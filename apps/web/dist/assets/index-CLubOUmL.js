const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BRcRwJky.js","assets/is-plan-event-enabled-DS1Agtkw.js","assets/index-wKMuZcJx.js"])))=>i.map(i=>d[i]);
var Gz=Object.defineProperty;var Vz=(r,e,t)=>e in r?Gz(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var uP=(r,e,t)=>Vz(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();const Uo=class Uo extends HTMLElement{constructor(e={}){super(),this._testModeEnabled=!1;const t=e.ariaConfig||{};this.ariaConfig={requiredAriaAttributes:t.requiredAriaAttributes||[],staticAriaAttributes:t.staticAriaAttributes||{},dynamicAriaAttributes:t.dynamicAriaAttributes||[],...t};const n=[...this.ariaConfig.dynamicAriaAttributes||[],...this.ariaConfig.requiredAriaAttributes||[]];this.options={display:e.display||"block",observedAttributes:Array.from(new Set([...e.observedAttributes||[],...n])),attributeHandlers:{...e.attributeHandlers||{}},events:e.events||[],targetSelector:e.targetSelector||null,template:e.template},this.addAriaAttributeHandlers(),this.setupShadowDOM(),this.setupARIA(),this.setupEventListeners()}static enableTestMode(){Uo._testMode=!0,this._updateAllInstances()}static disableTestMode(){Uo._testMode=!1,this._updateAllInstances()}static _updateAllInstances(){document.querySelectorAll("*").forEach(e=>{e._updateTestMode&&typeof e._updateTestMode=="function"&&e._updateTestMode()})}_updateTestMode(){Uo._testMode&&!this._testModeEnabled?this._enableTestMode():!Uo._testMode&&this._testModeEnabled&&this._disableTestMode()}_enableTestMode(){this._testModeEnabled=!0,this._ensureTestId(),this._addTestModeObserver()}_disableTestMode(){this._testModeEnabled=!1,this._removeTestId(),this._removeTestModeObserver()}_ensureTestId(){this.setAttribute("data-testid",this._generateTestId())}_removeTestId(){this.removeAttribute("data-testid")}_generateTestId(){const e=this.tagName.toLowerCase().replace("ds-",""),t=this.getAttribute("variant")||"default",n=this.hasAttribute("disabled")?"disabled":"enabled",i=this.getAttribute("type")||"default";return`ds-${e}-${t}-${n}-${i}`}_addTestModeObserver(){this._testModeObserver=new MutationObserver(()=>{this._testModeEnabled&&this.setAttribute("data-testid",this._generateTestId())}),this._testModeObserver.observe(this,{attributes:!0,attributeFilter:["variant","disabled","type","size","href","checked","name","value","flex-grow","flex-basis","align-self","justify-content","aria-label","aria-describedby","action","method","enctype","target","novalidate","autocomplete","aria-labelledby"]}),this._disabledObserver=new MutationObserver(()=>{this._testModeEnabled&&this.setAttribute("data-testid",this._generateTestId())}),this._disabledObserver.observe(this,{attributes:!0,attributeFilter:["disabled"]})}_removeTestModeObserver(){this._testModeObserver&&(this._testModeObserver.disconnect(),this._testModeObserver=null),this._disabledObserver&&(this._disabledObserver.disconnect(),this._disabledObserver=null)}setupShadowDOM(){const e=this.attachShadow({mode:"open"}),t=document.createElement("template");t.innerHTML=`
            <style>
                @import url('/src/styles/variables.css');
                :host {
                    display: ${this.options.display};
                }
            </style>
            ${this.options.template||"<slot></slot>"}
        `,e.appendChild(t.content.cloneNode(!0)),this.options.targetSelector&&(this.targetElement=e.querySelector(this.options.targetSelector))}setupEventListeners(){!this.options.events.length||!this.targetElement||this.options.events.forEach(e=>{this.targetElement.addEventListener(e,()=>{const t=new Event(e,{bubbles:!0,composed:!0,cancelable:!0});if(e==="input"||e==="change")try{Object.defineProperty(t,"target",{value:this,writable:!1}),Object.defineProperty(t,"currentTarget",{value:this,writable:!1})}catch{}this.dispatchEvent(t)})})}attributeChangedCallback(e,t,n){if(t===n)return;if((this.ariaConfig.dynamicAriaAttributes||[]).includes(e)||(this.ariaConfig.requiredAriaAttributes||[]).includes(e)){if(this.ariaConfig.staticAriaAttributes&&this.ariaConfig.staticAriaAttributes[e]){Uo.createAriaAttributeHandler(e).call(this,n);return}Uo.createAriaAttributeHandler(e).call(this,n),this.validateAndWarnARIA(e,n)}const i=this.options.attributeHandlers[e];i&&i.call(this,n)}connectedCallback(){this.style.display=this.options.display,this.offsetHeight,this.options.observedAttributes.forEach(e=>{this.attributeChangedCallback(e,null,this.getAttribute(e))}),setTimeout(()=>{this.warnMissingARIA()},0),Uo._testMode&&this._enableTestMode()}static createBooleanHandler(e,t){return function(){this.targetElement&&(this.targetElement[e]=this.hasAttribute(t))}}static createStringHandler(e,t=""){return function(n){this.targetElement&&(this.targetElement[e]=n||t)}}static createSetAttributeHandler(e){return function(t){this.targetElement&&(t===null?this.targetElement.removeAttribute(e):this.targetElement.setAttribute(e,t))}}disconnectedCallback(){this._removeTestModeObserver()}createPropertyAccessor(e){return{get:()=>{var t;return(t=this.targetElement)==null?void 0:t[e]},set:t=>{this.targetElement&&(this.targetElement[e]=t)}}}setupARIA(){this.targetElement&&this.ariaConfig.staticAriaAttributes&&Object.entries(this.ariaConfig.staticAriaAttributes).forEach(([e,t])=>{this.targetElement.setAttribute(e,t)})}addAriaAttributeHandlers(){this.options.attributeHandlers||(this.options.attributeHandlers={}),[...this.ariaConfig.dynamicAriaAttributes||[],...this.ariaConfig.requiredAriaAttributes||[]].forEach(t=>{this.options.attributeHandlers[t]||(this.options.attributeHandlers[t]=Uo.createAriaAttributeHandler(t))})}static createAriaAttributeHandler(e){return function(t){var n;if(this.targetElement||(this.targetElement=(n=this.shadowRoot)==null?void 0:n.querySelector(this.options.targetSelector)),this.targetElement){if(this.ariaConfig.staticAriaAttributes&&this.ariaConfig.staticAriaAttributes[e]){const i=this.ariaConfig.staticAriaAttributes[e];t!==null&&t!==i&&console.warn(`[${this.constructor.name}] Cannot override static ARIA attribute '${e}' with value '${t}'. Static value '${i}' will be preserved.`);return}t==null?this.targetElement.removeAttribute(e):this.targetElement.setAttribute(e,t)}}}static createAriaPropertyHandler(e){return{get(){var t;return(t=this.targetElement)==null?void 0:t.getAttribute(e)},set(t){this.targetElement&&(t==null?this.targetElement.removeAttribute(e):this.targetElement.setAttribute(e,t))}}}static createAriaStateHandler(e){return function(t){this.targetElement&&(t==null?this.targetElement.removeAttribute(e):this.targetElement.setAttribute(e,t))}}validateAriaTokens(e,t,n){return n.includes(t)?null:`Invalid value '${t}' for ${e}. Allowed: ${n.join(", ")}`}checkAriaReferences(e,t){if(!t)return null;const n=t.split(/\s+/);for(const i of n)if(!document.getElementById(i))return`Element referenced by ${e} ('${i}') does not exist in the document.`;return null}validateARIA(){const e=[];return(this.ariaConfig.requiredAriaAttributes||[]).forEach(t=>{var n;!this.hasAttribute(t)&&!((n=this.targetElement)!=null&&n.hasAttribute(t))&&e.push(`Missing required ARIA attribute: ${t}`)}),this.ariaConfig.tokenValidation&&Object.entries(this.ariaConfig.tokenValidation).forEach(([t,n])=>{var a;const i=this.getAttribute(t)||((a=this.targetElement)==null?void 0:a.getAttribute(t));i&&!n.includes(i)&&e.push(this.validateAriaTokens(t,i,n))}),(this.ariaConfig.referenceAttributes||[]).forEach(t=>{var a;const n=this.getAttribute(t)||((a=this.targetElement)==null?void 0:a.getAttribute(t)),i=this.checkAriaReferences(t,n);i&&e.push(i)}),e}warnMissingARIA(){this.validateARIA().forEach(t=>{console.warn(`[${this.constructor.name}] ARIA validation: ${t}`)})}static get observedAttributes(){return["aria-label","aria-describedby","aria-pressed","aria-expanded","aria-haspopup","aria-controls","aria-current","aria-live","aria-atomic","aria-relevant","aria-busy","aria-dropeffect","aria-grabbed","aria-activedescendant","aria-colcount","aria-colindex","aria-colspan","aria-level","aria-multiline","aria-multiselectable","aria-orientation","aria-readonly","aria-required","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"]}validateAndWarnARIA(e,t){const n=[];if(this.ariaConfig.tokenValidation&&this.ariaConfig.tokenValidation[e]){const i=this.ariaConfig.tokenValidation[e];t&&!i.includes(t)&&n.push(this.validateAriaTokens(e,t,i))}if((this.ariaConfig.referenceAttributes||[]).includes(e)){const i=this.checkAriaReferences(e,t);i&&n.push(i)}n.forEach(i=>{console.warn(`[${this.constructor.name}] ARIA validation: ${i}`)})}};uP(Uo,"_testMode",!1);let hi=Uo;class $z extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby","aria-labelledby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby","aria-labelledby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block; /* Custom elements are inline by default */
                    width: 100%;
                    min-height: 100vh; /* Ensures it takes full viewport height */
                    box-sizing: border-box; /* Include padding/border in element's total width/height */
                }
                
                .page-container {
                    display: flex; /* Makes the main element a flex container for its children */
                    flex-direction: column; /* Stacks children vertically by default */
                    width: 100%;
                    padding: var(--ds-spacing-page-padding, 20px); /* Default padding, can be overridden by CSS variable */
                    margin: 0 auto; /* Center content if width is limited */
                    max-width: var(--ds-page-max-width, 1200px); /* Optional max-width for content */
                }
            </style>
            <main class="page-container" part="container">
                <slot></slot>
            </main>
        `,super({template:t.innerHTML,targetSelector:"main",ariaConfig:e,events:[],observedAttributes:[]}),this.pageContainer=this.shadowRoot.querySelector(".page-container")}static get observedAttributes(){return["aria-label","aria-describedby","aria-labelledby"]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}_generateTestId(){return"ds-page-default"}}customElements.get("ds-page")||customElements.define("ds-page",$z);class Wz extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block; /* Custom elements are inline by default */
                }
                .row-container {
                    display: flex;
                    flex-direction: row;
                }
            </style>
            <div class="row-container" part="container">
                <slot></slot>
            </div>
        `,super({template:t.innerHTML,targetSelector:".row-container",ariaConfig:e,events:[],observedAttributes:["justify-content","align-items","gap","wrap"]}),this.rowContainer=this.shadowRoot.querySelector(".row-container")}_generateTestId(){const e="row",t=this.getAttribute("justify-content")||"default",n=this.getAttribute("align-items")||"default",i=this.hasAttribute("wrap")?"wrap":"no-wrap",a=this.getAttribute("aria-label")||"default";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["justify-content","align-items","gap","wrap","aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"justify-content":this.rowContainer.style.justifyContent=n||"";break;case"align-items":this.rowContainer.style.alignItems=n||"";break;case"gap":this.rowContainer.style.gap=n||"";break;case"wrap":this.hasAttribute("wrap")?this.rowContainer.style.flexWrap="wrap":this.rowContainer.style.flexWrap="nowrap";break}}get ariaLabel(){const e=this.rowContainer.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.rowContainer.removeAttribute("aria-label"):this.rowContainer.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.rowContainer.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.rowContainer.removeAttribute("aria-describedby"):this.rowContainer.setAttribute("aria-describedby",e)}}customElements.get("ds-row")||customElements.define("ds-row",Wz);class Hz extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block; /* Custom elements are inline by default */
                }
                .col-container {
                    display: flex;
                    flex-direction: column;
                }
            </style>
            <div class="col-container" part="container">
                <slot></slot>
            </div>
        `,super({template:t.innerHTML,targetSelector:".col-container",ariaConfig:e,events:[],observedAttributes:["flex-grow","flex-shrink","flex-basis","align-self","order","justify-content","align-items","gap","wrap","variant","aria-label","aria-describedby"]}),this.colContainer=this.shadowRoot.querySelector(".col-container");const n=this.getAttribute("variant");n&&this._applyVariant(n)}static get observedAttributes(){return["flex-grow","flex-shrink","flex-basis","align-self","order","justify-content","align-items","gap","wrap","variant","aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"flex-grow":this.style.flexGrow=n||"";break;case"flex-shrink":this.style.flexShrink=n||"";break;case"flex-basis":this.style.flexBasis=n||"";break;case"align-self":this.style.alignSelf=n||"";break;case"order":this.style.order=n||"";break;case"justify-content":this.colContainer.style.justifyContent=n||"";break;case"align-items":this.colContainer.style.alignItems=n||"";break;case"gap":this.colContainer.style.gap=n||"";break;case"wrap":this.hasAttribute("wrap")?this.colContainer.style.flexWrap="wrap":this.colContainer.style.flexWrap="nowrap";break;case"variant":this._applyVariant(n);break}}_applyVariant(e){if(!e){this.style.flexGrow="",this.style.flexShrink="",this.style.flexBasis="";return}const t=e.match(/gs(\d+)/);if(!t){console.warn(`Invalid variant "${e}". Expected format: gs1-gs12`);return}const n=parseInt(t[1],10);if(n<1||n>12){console.warn(`Invalid variant "${e}". Column count must be between 1 and 12`);return}const i=n/12*100;this.style.flexGrow="0",this.style.flexShrink="0",this.style.flexBasis=`${i}%`}_generateTestId(){const e="col",t=this.getAttribute("flex-grow")||"default",n=this.getAttribute("flex-basis")||"default",i=this.getAttribute("align-self")||"default",a=this.getAttribute("justify-content")||"default",o=this.getAttribute("variant")||"default";return`ds-${e}-${t}-${n}-${i}-${a}-${o}`}get ariaLabel(){const e=this.colContainer.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.colContainer.removeAttribute("aria-label"):this.colContainer.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.colContainer.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.colContainer.removeAttribute("aria-describedby"):this.colContainer.setAttribute("aria-describedby",e)}}customElements.get("ds-col")||customElements.define("ds-col",Hz);function If(r,e,t){return r.dispatchEvent(new CustomEvent(e,{detail:t,bubbles:!0,composed:!0,cancelable:!1}))}class Yz extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby","aria-required","aria-invalid","aria-autocomplete","aria-controls","aria-activedescendant"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby","aria-controls","aria-activedescendant"],tokenValidation:{"aria-autocomplete":["inline","list","both","none"],"aria-invalid":["grammar","false","spelling","true"]}},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .wrapper {
                    width: 100%;
                }
                
                input[part="container"] {
                    width: 100%;
                    padding: var(--ds-form-input-padding);
                    border: 1px solid var(--ds-form-border-color);
                    border-radius: var(--ds-form-border-radius);
                    font-family: var(--ds-font-family-body);
                    font-size: var(--ds-font-size-base);
                    line-height: var(--ds-form-line-height);
                    background-color: var(--ds-form-bg-color);
                    color: var(--ds-form-text-color);
                    box-sizing: border-box;
                    transition: border-color 0.2s ease-in-out;
                }
                
                input[part="container"]:focus {
                    outline: none;
                    border-color: var(--ds-form-focus-color);
                    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
                }
                
                input[part="container"]:disabled {
                    background-color: var(--ds-form-disabled-bg-color);
                    color: #6c757d;
                    cursor: not-allowed;
                }
                
                input[part="container"]:read-only {
                    background-color: var(--ds-form-disabled-bg-color);
                }
                
                /* Variant-specific styles */
                input[part="container"].error {
                    border-color: var(--ds-text-input-error-border-color, #dc3545);
                    background-color: var(--ds-text-input-error-background-color, #fff5f5);
                }
                
                input[part="container"].success {
                    border-color: var(--ds-text-input-success-border-color, #28a745);
                    background-color: var(--ds-text-input-success-background-color, #f0fff4);
                }
                
                /* Size-specific styles */
                input[part="container"].small {
                    padding: var(--ds-text-input-small-padding, 4px 8px);
                    font-size: var(--ds-text-input-small-font-size, 14px);
                }
                
                input[part="container"].medium {
                    padding: var(--ds-text-input-medium-padding, 8px 12px);
                    font-size: var(--ds-text-input-medium-font-size, 16px);
                }
                
                input[part="container"].large {
                    padding: var(--ds-text-input-large-padding, 12px 16px);
                    font-size: var(--ds-text-input-large-font-size, 18px);
                }
            </style>
            <div class="wrapper">
                <input id="input" part="container" type="text">
                <slot></slot>
            </div>
        `,super({template:t.innerHTML,targetSelector:"input",ariaConfig:e,observedAttributes:["type","value","placeholder","disabled","readonly","required","name","id","variant","size"]}),this.input=this.shadowRoot.querySelector("input"),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}_generateTestId(){const e="text-input",t=this.getAttribute("type")||"text",n=this.getAttribute("name")||"default",i=this.hasAttribute("disabled")?"disabled":"enabled",a=this.hasAttribute("required")?"required":"optional";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["type","value","placeholder","disabled","readonly","required","name","id","variant","size","aria-label","aria-describedby","aria-required","aria-invalid","aria-autocomplete","aria-controls","aria-activedescendant"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"type":this.input.type=n||"text";break;case"value":this.input.value=n||"";break;case"placeholder":this.input.placeholder=n||"";break;case"disabled":this.input.disabled=this.hasAttribute("disabled");break;case"readonly":this.input.readOnly=this.hasAttribute("readonly");break;case"required":this.input.required=this.hasAttribute("required");break;case"name":this.input.name=n||"";break;case"id":this.input.id=n||"";break;case"variant":this.input.classList.remove("error","success"),n&&this.input.classList.add(n);break;case"size":this.input.classList.remove("small","medium","large"),n&&this.input.classList.add(n);break}}get value(){return this.input.value}set value(e){const t=e??"";this.input.value!==t&&(this.input.value=t),this.setAttribute("value",t)}get type(){return this.input.type}set type(e){this.input.type=e}get disabled(){return this.input.disabled}set disabled(e){this.input.disabled=e}get readonly(){return this.input.readOnly}set readonly(e){this.input.readOnly=e}get required(){return this.input.required}set required(e){this.input.required=e}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.input.addEventListener("input",this._onInput),this.input.addEventListener("change",this._onChange),this.input.addEventListener("focus",this._onFocus),this.input.addEventListener("blur",this._onBlur)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("change",this._onChange),this.input.removeEventListener("focus",this._onFocus),this.input.removeEventListener("blur",this._onBlur)}_onInput(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),If(this,"ds-change",{value:this.input.value})}_onChange(){this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))}_onFocus(){this.dispatchEvent(new Event("focus",{bubbles:!0,composed:!0}))}_onBlur(){this.dispatchEvent(new Event("blur",{bubbles:!0,composed:!0}))}get ariaLabel(){const e=this.input.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.input.removeAttribute("aria-label"):this.input.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.input.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.input.removeAttribute("aria-describedby"):this.input.setAttribute("aria-describedby",e)}get ariaRequired(){const e=this.input.getAttribute("aria-required");return e===null?null:e}set ariaRequired(e){e==null?this.input.removeAttribute("aria-required"):this.input.setAttribute("aria-required",e)}get ariaInvalid(){const e=this.input.getAttribute("aria-invalid");return e===null?null:e}set ariaInvalid(e){e==null?this.input.removeAttribute("aria-invalid"):this.input.setAttribute("aria-invalid",e)}get ariaAutocomplete(){const e=this.input.getAttribute("aria-autocomplete");return e===null?null:e}set ariaAutocomplete(e){e==null?this.input.removeAttribute("aria-autocomplete"):this.input.setAttribute("aria-autocomplete",e)}get ariaControls(){const e=this.input.getAttribute("aria-controls");return e===null?null:e}set ariaControls(e){e==null?this.input.removeAttribute("aria-controls"):this.input.setAttribute("aria-controls",e)}get ariaActiveDescendant(){const e=this.input.getAttribute("aria-activedescendant");return e===null?null:e}set ariaActiveDescendant(e){e==null?this.input.removeAttribute("aria-activedescendant"):this.input.setAttribute("aria-activedescendant",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.getAttribute("aria-label"),n=this.getAttribute("aria-labelledby"),i=this.input.getAttribute("aria-label"),a=this.input.getAttribute("aria-labelledby");if(t||n||i||a||e.push("Text input has no accessible name (aria-label or aria-labelledby required)"),this.input.hasAttribute("aria-invalid")){const s=this.input.getAttribute("aria-invalid");["true","false","grammar","spelling"].includes(s)||e.push(`Invalid aria-invalid value: ${s}`)}if(this.input.hasAttribute("aria-describedby")){const s=this.checkAriaReferences("aria-describedby",this.input.getAttribute("aria-describedby"));s&&e.push(s)}return e}}customElements.get("ds-text-input")||customElements.define("ds-text-input",Yz);class Xz extends hi{constructor(){const e={staticAriaAttributes:{role:"button"},dynamicAriaAttributes:["aria-label","aria-describedby","aria-pressed","aria-expanded","aria-haspopup"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"],tokenValidation:{"aria-haspopup":["false","true","menu","listbox","tree","grid","dialog"],"aria-pressed":["false","true","mixed","undefined"],"aria-expanded":["false","true","undefined"]}},t=document.createElement("template");t.innerHTML=`
            <style>
                :host { display: inline-block; }
                .wrapper { width: 100%; }
                
                button[part="container"] {
                    /* Base button styles using CSS custom properties */
                    background-color: var(--ds-button-background-color, #ffffff);
                    border-color: var(--ds-button-border-color, #ced4da);
                    color: var(--ds-button-text-color, #212529);
                    border-radius: var(--ds-button-border-radius, 4px);
                    padding: var(--ds-button-padding, 8px 16px);
                    font-size: var(--ds-button-font-size, 16px);
                    font-weight: var(--ds-button-font-weight, 400);
                    border-width: var(--ds-button-border-width, 1px);
                    border-style: var(--ds-button-border-style, solid);
                    transition: var(--ds-button-transition, all 0.2s ease-in-out);
                    cursor: pointer;
                    font-family: inherit;
                    line-height: 1.5;
                    box-sizing: border-box;
                    text-align: center;
                    justify-content: center;
                }
                
                button[part="container"]:hover {
                    background-color: var(--ds-button-hover-background-color, #e9ecef);
                    border-color: var(--ds-button-hover-border-color, var(--ds-button-border-color, #ced4da));
                }
                
                button[part="container"]:focus {
                    outline: none;
                    border-color: var(--ds-button-focus-border-color, #007bff);
                    box-shadow: var(--ds-button-focus-box-shadow, 0 0 0 2px rgba(0, 123, 255, 0.25));
                }
                
                button[part="container"]:disabled {
                    background-color: var(--ds-button-disabled-background-color, #e9ecef);
                    color: var(--ds-button-disabled-text-color, #6c757d);
                    cursor: not-allowed;
                    opacity: var(--ds-button-disabled-opacity, 0.65);
                }
                
                /* Variant-specific styles with cascading fallbacks */
                button[part="container"].primary {
                    background-color: var(--ds-button-primary-background-color, var(--ds-button-background-color, #ffffff));
                    border-color: var(--ds-button-primary-border-color, var(--ds-button-border-color, #ced4da));
                    color: var(--ds-button-primary-text-color, var(--ds-button-text-color, #212529));
                    font-weight: var(--ds-button-primary-font-weight, var(--ds-button-font-weight, 400));
                }
                
                button[part="container"].secondary {
                    background-color: var(--ds-button-secondary-background-color, var(--ds-button-background-color, #ffffff));
                    border-color: var(--ds-button-secondary-border-color, var(--ds-button-border-color, #ced4da));
                    color: var(--ds-button-secondary-text-color, var(--ds-button-text-color, #212529));
                }
                
                button[part="container"].danger {
                    background-color: var(--ds-button-danger-background-color, var(--ds-button-background-color, #ffffff));
                    border-color: var(--ds-button-danger-border-color, var(--ds-button-border-color, #ced4da));
                    color: var(--ds-button-danger-text-color, var(--ds-button-text-color, #212529));
                    font-weight: var(--ds-button-danger-font-weight, var(--ds-button-font-weight, 400));
                }
                
                button[part="container"].outline {
                    background-color: var(--ds-button-outline-background-color, var(--ds-button-background-color, #ffffff));
                    border-color: var(--ds-button-outline-border-color, var(--ds-button-border-color, #ced4da));
                    color: var(--ds-button-outline-text-color, var(--ds-button-text-color, #212529));
                }
                
                button[part="container"].ghost {
                    background-color: var(--ds-button-ghost-background-color, var(--ds-button-background-color, #ffffff));
                    border-color: var(--ds-button-ghost-border-color, var(--ds-button-border-color, #ced4da));
                    color: var(--ds-button-ghost-text-color, var(--ds-button-text-color, #212529));
                }
                
                /* Size-specific styles */
                button[part="container"].small {
                    padding: var(--ds-button-small-padding, 4px 8px);
                    font-size: var(--ds-button-small-font-size, 14px);
                }
                
                button[part="container"].medium {
                    padding: var(--ds-button-medium-padding, 8px 16px);
                    font-size: var(--ds-button-medium-font-size, 16px);
                }
                
                button[part="container"].large {
                    padding: var(--ds-button-large-padding, 12px 24px);
                    font-size: var(--ds-button-large-font-size, 18px);
                }
            </style>
            <div class="wrapper">
                <button part="container" type="button">
                    <slot></slot>
                </button>
            </div>
        `,super({template:t.innerHTML,targetSelector:"button",ariaConfig:e,observedAttributes:["type","disabled","name","value","variant"]}),this.button=this.shadowRoot.querySelector("button"),this._onClick=this._onClick.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}static get observedAttributes(){return["type","disabled","name","value","variant","size","aria-label","aria-describedby","aria-pressed","aria-expanded","aria-haspopup"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"type":this.button.type=n||"button";break;case"disabled":this.hasAttribute("disabled")?this.button.disabled=!0:this.button.disabled=!1;break;case"name":this.button.name=n||"";break;case"value":this.button.value=n||"";break;case"variant":this.button.classList.remove("primary","secondary","danger","outline","ghost"),n&&this.button.classList.add(n);break;case"size":this.button.classList.remove("small","medium","large"),n&&this.button.classList.add(n);break}}get type(){return this.button.type}set type(e){this.button.type=e,e?this.setAttribute("type",e):this.removeAttribute("type")}get disabled(){return this.button.disabled}set disabled(e){this.button.disabled=e}get name(){return this.button.name}set name(e){this.button.name=e}get value(){return this.button.value}set value(e){this.button.value=e}get variant(){return this.getAttribute("variant")}set variant(e){e?this.setAttribute("variant",e):this.removeAttribute("variant")}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.button.addEventListener("click",this._onClick),this.button.addEventListener("focus",this._onFocus),this.button.addEventListener("blur",this._onBlur)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.button.removeEventListener("click",this._onClick),this.button.removeEventListener("focus",this._onFocus),this.button.removeEventListener("blur",this._onBlur)}_onClick(e){e.stopPropagation(),this.dispatchEvent(new Event("click",{bubbles:!0,composed:!0})),If(this,"ds-activate",{})}_onFocus(){this.dispatchEvent(new Event("focus",{bubbles:!0,composed:!0}))}_onBlur(){this.dispatchEvent(new Event("blur",{bubbles:!0,composed:!0}))}get ariaLabel(){const e=this.button.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.button.removeAttribute("aria-label"):this.button.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.button.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.button.removeAttribute("aria-describedby"):this.button.setAttribute("aria-describedby",e)}get ariaPressed(){const e=this.button.getAttribute("aria-pressed");return e===null?null:e}set ariaPressed(e){e==null?this.button.removeAttribute("aria-pressed"):this.button.setAttribute("aria-pressed",e)}get ariaExpanded(){const e=this.button.getAttribute("aria-expanded");return e===null?null:e}set ariaExpanded(e){e==null?this.button.removeAttribute("aria-expanded"):this.button.setAttribute("aria-expanded",e)}get ariaHasPopup(){const e=this.button.getAttribute("aria-haspopup");return e===null?null:e}set ariaHasPopup(e){e==null?this.button.removeAttribute("aria-haspopup"):this.button.setAttribute("aria-haspopup",e)}_generateTestId(){const e="button",t=this.getAttribute("variant")||"default",n=this.hasAttribute("disabled")?"disabled":"enabled",i=this.getAttribute("type")||"button",a=this.getAttribute("size")||"medium";return`ds-${e}-${t}-${n}-${i}-${a}`}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.textContent.trim(),n=this.getAttribute("aria-label"),i=this.getAttribute("aria-labelledby"),a=this.button.getAttribute("aria-label"),o=this.button.getAttribute("aria-labelledby");if(t||n||i||a||o||e.push("Button has no accessible name (text, aria-label, or aria-labelledby required)"),this.button.hasAttribute("aria-pressed")){const u=this.button.getAttribute("aria-pressed");["true","false","mixed","undefined"].includes(u)||e.push(`Invalid aria-pressed value: ${u}`)}if(this.button.hasAttribute("aria-expanded"),this.button.hasAttribute("aria-describedby")){const u=this.checkAriaReferences("aria-describedby",this.button.getAttribute("aria-describedby"));u&&e.push(u)}return e}}customElements.get("ds-button")||customElements.define("ds-button",Xz);class Kz extends hi{constructor(){const e={staticAriaAttributes:{role:"radio"},dynamicAriaAttributes:["aria-label","aria-describedby","aria-required","aria-invalid","aria-checked"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"],tokenValidation:{"aria-checked":["true","false","mixed","undefined"],"aria-invalid":["true","false","grammar","spelling"]}},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: inline-block;
                }
                
                .wrapper {
                    display: flex;
                    align-items: center;
                }
                
                input[part="container"] {
                    margin-right: var(--ds-spacing-xs);
                }
            </style>
            <div class="wrapper">
                <input type="radio" id="radio" part="container">
                <slot></slot>
            </div>
        `,super({template:t.innerHTML,targetSelector:'input[type="radio"]',ariaConfig:e,observedAttributes:["name","value","checked","disabled","readonly","required","id"]}),this.radio=this.shadowRoot.querySelector('input[type="radio"]'),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}_generateTestId(){const e="radio",t=this.getAttribute("name")||"default",n=this.getAttribute("value")||"default",i=this.hasAttribute("checked")?"checked":"unchecked",a=this.hasAttribute("disabled")?"disabled":"enabled";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["name","value","checked","disabled","readonly","required","id","class","aria-label","aria-describedby","aria-required","aria-invalid","aria-checked"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"name":this.radio.name=n||"";break;case"value":this.radio.value=n||"";break;case"checked":this.hasAttribute("checked")?this.radio.checked=!0:this.radio.checked=!1;break;case"disabled":this.hasAttribute("disabled")?this.radio.disabled=!0:this.radio.disabled=!1;break;case"readonly":this.hasAttribute("readonly")?this.radio.readOnly=!0:this.radio.readOnly=!1;break;case"required":this.hasAttribute("required")?this.radio.required=!0:this.radio.required=!1;break;case"id":this.radio.id=n||"";break}}get checked(){return this.radio.checked}set checked(e){this.radio.checked=e}get value(){return this.radio.value}set value(e){const t=e??"";this.radio.value!==t&&(this.radio.value=t),this.setAttribute("value",t)}get name(){return this.radio.name}set name(e){this.radio.name=e}get disabled(){return this.radio.disabled}set disabled(e){this.radio.disabled=e}get readonly(){return this.radio.readOnly}set readonly(e){this.radio.readOnly=e}get required(){return this.radio.required}set required(e){this.radio.required=e}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.radio.addEventListener("input",this._onInput),this.radio.addEventListener("change",this._onChange),this.radio.addEventListener("focus",this._onFocus),this.radio.addEventListener("blur",this._onBlur)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.radio.removeEventListener("input",this._onInput),this.radio.removeEventListener("change",this._onChange),this.radio.removeEventListener("focus",this._onFocus),this.radio.removeEventListener("blur",this._onBlur)}_onInput(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),If(this,"ds-change",{value:this.radio.value})}_onChange(){this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))}_onFocus(){this.dispatchEvent(new Event("focus",{bubbles:!0,composed:!0}))}_onBlur(){this.dispatchEvent(new Event("blur",{bubbles:!0,composed:!0}))}get ariaLabel(){const e=this.radio.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.radio.removeAttribute("aria-label"):this.radio.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.radio.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.radio.removeAttribute("aria-describedby"):this.radio.setAttribute("aria-describedby",e)}get ariaRequired(){const e=this.radio.getAttribute("aria-required");return e===null?null:e}set ariaRequired(e){e==null?this.radio.removeAttribute("aria-required"):this.radio.setAttribute("aria-required",e)}get ariaInvalid(){const e=this.radio.getAttribute("aria-invalid");return e===null?null:e}set ariaInvalid(e){e==null?this.radio.removeAttribute("aria-invalid"):this.radio.setAttribute("aria-invalid",e)}get ariaChecked(){const e=this.radio.getAttribute("aria-checked");return e===null?null:e}set ariaChecked(e){e==null?this.radio.removeAttribute("aria-checked"):this.radio.setAttribute("aria-checked",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.textContent.trim(),n=this.getAttribute("aria-label"),i=this.getAttribute("aria-labelledby"),a=this.radio.getAttribute("aria-label"),o=this.radio.getAttribute("aria-labelledby");if(t||n||i||a||o||e.push("Radio has no accessible name (text, aria-label, or aria-labelledby required)"),this.radio.hasAttribute("aria-checked")){const u=this.radio.getAttribute("aria-checked");["true","false","mixed","undefined"].includes(u)||e.push(`Invalid aria-checked value: ${u}`)}if(this.radio.hasAttribute("aria-describedby")){const u=this.checkAriaReferences("aria-describedby",this.radio.getAttribute("aria-describedby"));u&&e.push(u)}return e}}customElements.get("ds-radio")||customElements.define("ds-radio",Kz);class Zz extends hi{constructor(){const e={staticAriaAttributes:{role:"checkbox"},dynamicAriaAttributes:["aria-label","aria-describedby","aria-required","aria-invalid","aria-checked"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"],tokenValidation:{"aria-checked":["true","false","mixed","undefined"],"aria-invalid":["true","false","grammar","spelling"]}},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: inline-block;
                }
                
                .wrapper {
                    display: flex;
                    align-items: center;
                }
                
                input[part="container"] {
                    margin-right: var(--ds-spacing-xs);
                }
            </style>
            <div class="wrapper">
                <input type="checkbox" id="checkbox" part="container">
                <slot></slot>
            </div>
        `,super({template:t.innerHTML,targetSelector:'input[type="checkbox"]',ariaConfig:e,observedAttributes:["name","value","checked","disabled","readonly","required","id"]}),this.checkbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}static get observedAttributes(){return["name","value","checked","disabled","readonly","required","id","aria-label","aria-describedby","aria-required","aria-invalid","aria-checked"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"name":this.checkbox.name=n||"";break;case"value":this.checkbox.value=n||"";break;case"checked":this.hasAttribute("checked")?this.checkbox.checked=!0:this.checkbox.checked=!1;break;case"disabled":this.hasAttribute("disabled")?this.checkbox.disabled=!0:this.checkbox.disabled=!1;break;case"readonly":this.hasAttribute("readonly")?this.checkbox.readOnly=!0:this.checkbox.readOnly=!1;break;case"required":this.hasAttribute("required")?this.checkbox.required=!0:this.checkbox.required=!1;break;case"id":this.checkbox.id=n||"";break}}get checked(){return this.checkbox.checked}set checked(e){this.checkbox.checked=e}get value(){return this.checkbox.value}set value(e){const t=e??"";this.checkbox.value!==t&&(this.checkbox.value=t),this.setAttribute("value",t)}get name(){return this.checkbox.name}set name(e){this.checkbox.name=e}get disabled(){return this.checkbox.disabled}set disabled(e){this.checkbox.disabled=e}get readonly(){return this.checkbox.readOnly}set readonly(e){this.checkbox.readOnly=e}get required(){return this.checkbox.required}set required(e){this.checkbox.required=e}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.checkbox.addEventListener("input",this._onInput),this.checkbox.addEventListener("change",this._onChange),this.checkbox.addEventListener("focus",this._onFocus),this.checkbox.addEventListener("blur",this._onBlur)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.checkbox.removeEventListener("input",this._onInput),this.checkbox.removeEventListener("change",this._onChange),this.checkbox.removeEventListener("focus",this._onFocus),this.checkbox.removeEventListener("blur",this._onBlur)}_onInput(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),If(this,"ds-change",{value:this.checkbox.checked})}_onChange(){this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))}_onFocus(){this.dispatchEvent(new Event("focus",{bubbles:!0,composed:!0}))}_onBlur(){this.dispatchEvent(new Event("blur",{bubbles:!0,composed:!0}))}_generateTestId(){const e="checkbox",t=this.getAttribute("name")||"default",n=this.hasAttribute("disabled")?"disabled":"enabled",i=this.hasAttribute("checked")?"checked":"unchecked",a=this.getAttribute("value")||"medium";return`ds-${e}-${t}-${n}-${i}-${a}`}get ariaLabel(){const e=this.checkbox.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.checkbox.removeAttribute("aria-label"):this.checkbox.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.checkbox.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.checkbox.removeAttribute("aria-describedby"):this.checkbox.setAttribute("aria-describedby",e)}get ariaRequired(){const e=this.checkbox.getAttribute("aria-required");return e===null?null:e}set ariaRequired(e){e==null?this.checkbox.removeAttribute("aria-required"):this.checkbox.setAttribute("aria-required",e)}get ariaInvalid(){const e=this.checkbox.getAttribute("aria-invalid");return e===null?null:e}set ariaInvalid(e){e==null?this.checkbox.removeAttribute("aria-invalid"):this.checkbox.setAttribute("aria-invalid",e)}get ariaChecked(){const e=this.checkbox.getAttribute("aria-checked");return e===null?null:e}set ariaChecked(e){e==null?this.checkbox.removeAttribute("aria-checked"):this.checkbox.setAttribute("aria-checked",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.textContent.trim(),n=this.getAttribute("aria-label"),i=this.getAttribute("aria-labelledby"),a=this.checkbox.getAttribute("aria-label"),o=this.checkbox.getAttribute("aria-labelledby");if(t||n||i||a||o||e.push("Checkbox has no accessible name (text, aria-label, or aria-labelledby required)"),this.checkbox.hasAttribute("aria-checked")){const u=this.checkbox.getAttribute("aria-checked");["true","false","mixed","undefined"].includes(u)||e.push(`Invalid aria-checked value: ${u}`)}if(this.checkbox.hasAttribute("aria-describedby")){const u=this.checkAriaReferences("aria-describedby",this.checkbox.getAttribute("aria-describedby"));u&&e.push(u)}return e}}customElements.get("ds-checkbox")||customElements.define("ds-checkbox",Zz);class Qz extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby","aria-required","aria-invalid"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"],tokenValidation:{"aria-invalid":["grammar","false","spelling","true"]}},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .wrapper {
                    width: 100%;
                }
                
                textarea[part="container"] {
                    width: 100%;
                    padding: var(--ds-form-input-padding);
                    border: 1px solid var(--ds-form-border-color);
                    border-radius: var(--ds-form-border-radius);
                    font-family: var(--ds-font-family-body);
                    font-size: var(--ds-font-size-base);
                    line-height: var(--ds-form-line-height);
                    background-color: var(--ds-form-bg-color);
                    color: var(--ds-form-text-color);
                    box-sizing: border-box;
                    transition: border-color 0.2s ease-in-out;
                }
                
                textarea[part="container"]:focus {
                    outline: none;
                    border-color: var(--ds-form-focus-color);
                    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
                }
                
                textarea[part="container"]:disabled {
                    background-color: var(--ds-form-disabled-bg-color);
                    color: #6c757d;
                    cursor: not-allowed;
                }
                
                textarea[part="container"]:read-only {
                    background-color: var(--ds-form-disabled-bg-color);
                }
                
                /* Variant-specific styles */
                textarea[part="container"].error {
                    border-color: var(--ds-textarea-error-border-color, #dc3545);
                    background-color: var(--ds-textarea-error-background-color, #fff5f5);
                }
                
                textarea[part="container"].success {
                    border-color: var(--ds-textarea-success-border-color, #28a745);
                    background-color: var(--ds-textarea-success-background-color, #f0fff4);
                }
                
                /* Size-specific styles */
                textarea[part="container"].small {
                    padding: var(--ds-textarea-small-padding, 4px 8px);
                    font-size: var(--ds-textarea-small-font-size, 14px);
                }
                
                textarea[part="container"].medium {
                    padding: var(--ds-textarea-medium-padding, 8px 12px);
                    font-size: var(--ds-textarea-medium-font-size, 16px);
                }
                
                textarea[part="container"].large {
                    padding: var(--ds-textarea-large-padding, 12px 16px);
                    font-size: var(--ds-textarea-large-font-size, 18px);
                }
            </style>
            <div class="wrapper">
                <textarea id="textarea" part="container">
                    <slot></slot>
                </textarea>
            </div>
        `,super({template:t.innerHTML,targetSelector:"textarea",ariaConfig:e,events:["input","change","focus","blur"],observedAttributes:["value","placeholder","rows","cols","disabled","readonly","required","name","id","variant","size"]}),this.textarea=this.shadowRoot.querySelector("textarea"),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}_generateTestId(){const e="textarea",t=this.getAttribute("name")||"default",n=this.getAttribute("rows")||"default",i=this.hasAttribute("required")?"required":"optional",a=this.hasAttribute("disabled")?"disabled":"enabled";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["value","placeholder","rows","cols","disabled","readonly","required","name","id","variant","size","aria-label","aria-describedby","aria-required","aria-invalid"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"value":this.textarea.value=n||"";break;case"placeholder":this.textarea.placeholder=n||"";break;case"rows":this.textarea.rows=n||"";break;case"cols":this.textarea.cols=n||"";break;case"disabled":this.textarea.disabled=this.hasAttribute("disabled");break;case"readonly":this.textarea.readOnly=this.hasAttribute("readonly");break;case"required":this.textarea.required=this.hasAttribute("required");break;case"name":this.textarea.name=n||"";break;case"id":this.textarea.id=n||"";break;case"variant":this.textarea.classList.remove("error","success"),n&&this.textarea.classList.add(n);break;case"size":this.textarea.classList.remove("small","medium","large"),n&&this.textarea.classList.add(n);break}}get value(){return this.textarea.value}set value(e){const t=e??"";this.textarea.value!==t&&(this.textarea.value=t),this.setAttribute("value",t)}get placeholder(){return this.textarea.placeholder}set placeholder(e){this.textarea.placeholder=e}get rows(){return this.textarea.rows}set rows(e){this.textarea.rows=e}get cols(){return this.textarea.cols}set cols(e){this.textarea.cols=e}get disabled(){return this.textarea.disabled}set disabled(e){this.textarea.disabled=e}get readonly(){return this.textarea.readOnly}set readonly(e){this.textarea.readOnly=e}get required(){return this.textarea.required}set required(e){this.textarea.required=e}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.textarea.addEventListener("input",this._onInput),this.textarea.addEventListener("change",this._onChange),this.textarea.addEventListener("focus",this._onFocus),this.textarea.addEventListener("blur",this._onBlur)}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.textarea.removeEventListener("input",this._onInput),this.textarea.removeEventListener("change",this._onChange),this.textarea.removeEventListener("focus",this._onFocus),this.textarea.removeEventListener("blur",this._onBlur)}_onInput(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),If(this,"ds-change",{value:this.textarea.value})}_onChange(){this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))}_onFocus(){this.dispatchEvent(new Event("focus",{bubbles:!0,composed:!0}))}_onBlur(){this.dispatchEvent(new Event("blur",{bubbles:!0,composed:!0}))}focus(){this.textarea.focus()}blur(){this.textarea.blur()}get name(){return this.textarea.name}set name(e){this.textarea.name=e}get ariaLabel(){const e=this.textarea.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.textarea.removeAttribute("aria-label"):this.textarea.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.textarea.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.textarea.removeAttribute("aria-describedby"):this.textarea.setAttribute("aria-describedby",e)}get ariaRequired(){const e=this.textarea.getAttribute("aria-required");return e===null?null:e}set ariaRequired(e){e==null?this.textarea.removeAttribute("aria-required"):this.textarea.setAttribute("aria-required",e)}get ariaInvalid(){const e=this.textarea.getAttribute("aria-invalid");return e===null?null:e}set ariaInvalid(e){e==null?this.textarea.removeAttribute("aria-invalid"):this.textarea.setAttribute("aria-invalid",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.getAttribute("aria-label"),n=this.getAttribute("aria-labelledby"),i=this.textarea.getAttribute("aria-label"),a=this.textarea.getAttribute("aria-labelledby");if(t||n||i||a||e.push("Textarea has no accessible name (aria-label or aria-labelledby required)"),this.textarea.hasAttribute("aria-invalid")){const s=this.textarea.getAttribute("aria-invalid");["true","false","grammar","spelling"].includes(s)||e.push(`Invalid aria-invalid value: ${s}`)}if(this.textarea.hasAttribute("aria-describedby")){const s=this.checkAriaReferences("aria-describedby",this.textarea.getAttribute("aria-describedby"));s&&e.push(s)}return e}}customElements.get("ds-textarea")||customElements.define("ds-textarea",Qz);class Jz extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby","aria-required","aria-invalid","aria-expanded","aria-activedescendant","aria-controls"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby","aria-activedescendant","aria-controls"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .wrapper {
                    width: 100%;
                }
                
                select[part="container"] {
                    width: 100%;
                    padding: var(--ds-form-input-padding);
                    border: 1px solid var(--ds-form-border-color);
                    border-radius: var(--ds-form-border-radius);
                    font-family: var(--ds-font-family-body);
                    font-size: var(--ds-font-size-base);
                    line-height: var(--ds-form-line-height);
                    background-color: var(--ds-form-bg-color);
                    color: var(--ds-form-text-color);
                    box-sizing: border-box;
                    transition: border-color 0.2s ease-in-out;
                }
                
                select[part="container"]:focus {
                    outline: none;
                    border-color: var(--ds-form-focus-color);
                    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
                }
                
                select[part="container"]:disabled {
                    background-color: var(--ds-form-disabled-bg-color);
                    color: #6c757d;
                    cursor: not-allowed;
                }
            </style>
            <div class="wrapper">
                <select id="select" part="container">
                    <slot></slot>
                </select>
            </div>
        `,super({template:t.innerHTML,targetSelector:"select",ariaConfig:e,observedAttributes:["value","disabled","required","name","multiple","size"]}),this.select=this.shadowRoot.querySelector("select"),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}_generateTestId(){const e="select";if(!this.isConnected)return`ds-${e}-default-single-optional-enabled`;const t=this.getAttribute("name")||"default",n=this.hasAttribute("multiple")?"multiple":"single",i=this.hasAttribute("required")?"required":"optional",a=this.hasAttribute("disabled")?"disabled":"enabled";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["value","disabled","required","name","multiple","size","class","aria-label","aria-describedby","aria-required","aria-expanded","aria-activedescendant","aria-controls"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"value":this.select&&this.select.options.length>0&&(this.select.value=n||"");break;case"disabled":this.select.disabled=this.hasAttribute("disabled");break;case"required":this.select.required=this.hasAttribute("required");break;case"name":this.select.name=n||"";break;case"multiple":this.select.multiple=this.hasAttribute("multiple");break;case"size":this.select.size=n||"";break}}get value(){return this.select.value}set value(e){const t=e??"";this.select.value!==t&&(this.select.value=t),this.setAttribute("value",t)}get disabled(){return this.select.disabled}set disabled(e){this.select.disabled=e}get required(){return this.select.required}set required(e){this.select.required=e}get name(){return this.select.name}set name(e){this.select.name=e}get multiple(){return this.select.multiple}set multiple(e){this.select.multiple=e}get size(){return this.select.size}set size(e){this.select.size=e}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.select.addEventListener("input",this._onInput),this.select.addEventListener("change",this._onChange),this.select.addEventListener("focus",this._onFocus),this.select.addEventListener("blur",this._onBlur),this._validateAccessibleName()}_validateAccessibleName(){const e=this.getAttribute("aria-label"),t=this.getAttribute("aria-labelledby"),n=this._hasAssociatedLabel();if(!e&&!t&&!n&&console.warn(`[${this.constructor.name}] Select has no accessible name. Provide aria-label, aria-labelledby, or associate with a label element.`),t){const i=t.split(/\s+/);for(const a of i)document.getElementById(a)||console.warn(`[${this.constructor.name}] Element referenced by aria-labelledby ('${a}') does not exist in the document.`)}}_hasAssociatedLabel(){const e=this.getAttribute("id");if(e){const n=document.querySelector(`label[for="${e}"]`);if(n&&n.textContent.trim())return!0}const t=this.closest("label");return!!(t&&t.textContent.trim())}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.select.removeEventListener("input",this._onInput),this.select.removeEventListener("change",this._onChange),this.select.removeEventListener("focus",this._onFocus),this.select.removeEventListener("blur",this._onBlur)}_onInput(){this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})),If(this,"ds-change",{value:this.select.value})}_onChange(){this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))}_onFocus(){this.dispatchEvent(new Event("focus",{bubbles:!0,composed:!0}))}_onBlur(){this.dispatchEvent(new Event("blur",{bubbles:!0,composed:!0}))}focus(){this.select.focus()}blur(){this.select.blur()}}customElements.get("ds-select")||customElements.define("ds-select",Jz);class eq extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: none; /* Hidden by default, shown when slotted into select */
                }
                
                option[part="container"] {
                    padding: var(--ds-spacing-xs);
                }
            </style>
            <div>
                <option part="container">
                    <slot></slot>
                </option>
            </div>
        `,super({template:t.innerHTML,targetSelector:"option",ariaConfig:e,events:[],observedAttributes:["value","disabled","selected"]}),this.option=this.shadowRoot.querySelector("option")}_generateTestId(){const e="option",t=this.getAttribute("value")||"default",n=this.hasAttribute("selected")?"selected":"unselected",i=this.hasAttribute("disabled")?"disabled":"enabled",a=this.getAttribute("aria-label")||"default";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["value","disabled","selected","aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"value":this.option.value=n||"";break;case"disabled":this.option.disabled=this.hasAttribute("disabled");break;case"selected":this.option.selected=this.hasAttribute("selected");break}}get value(){return this.option.value}set value(e){this.option.value=e}get selected(){return this.option.selected}set selected(e){this.option.selected=e}get disabled(){return this.option.disabled}set disabled(e){this.option.disabled=e}get ariaLabel(){const e=this.option.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.option.removeAttribute("aria-label"):this.option.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.option.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.option.removeAttribute("aria-describedby"):this.option.setAttribute("aria-describedby",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.textContent.trim(),n=this.option.getAttribute("aria-label");return!t&&!n&&e.push("Option has no accessible name (text or aria-label required)"),e}}customElements.get("ds-option")||customElements.define("ds-option",eq);class tq extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .wrapper {
                    width: 100%;
                }
                
                label[part="container"] {
                    display: block;
                    margin-bottom: var(--ds-spacing-xs);
                    font-weight: 500;
                    color: var(--ds-form-text-color);
                }
            </style>
            <div class="wrapper">
                <label part="container">
                    <slot></slot>
                </label>
            </div>
        `,super({template:t.innerHTML,targetSelector:"label",ariaConfig:e,events:["click"],observedAttributes:["for"]}),this.label=this.shadowRoot.querySelector("label")}_generateTestId(){const e="label",t=this.getAttribute("for")?"with-for":"no-for",n=this.getAttribute("aria-label")||"default",i=this.getAttribute("aria-describedby")||"default";return`ds-${e}-${t}-${n}-${i}`}static get observedAttributes(){return["for","aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"for":this.label.setAttribute("for",n||"");break}}get htmlFor(){return this.label.htmlFor}set htmlFor(e){this.label.htmlFor=e}get ariaLabel(){const e=this.label.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.label.removeAttribute("aria-label"):this.label.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.label.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.label.removeAttribute("aria-describedby"):this.label.setAttribute("aria-describedby",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.label.getAttribute("for");t&&!document.getElementById(t)&&e.push(`Label 'for' attribute references missing element: ${t}`);const n=this.textContent.trim(),i=this.label.getAttribute("aria-label");return!n&&!i&&e.push("Label has no accessible name (text or aria-label required)"),e}}customElements.get("ds-label")||customElements.define("ds-label",tq);class rq extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .wrapper {
                    width: 100%;
                }
                
                fieldset[part="container"] {
                    border: 1px solid var(--ds-form-border-color);
                    border-radius: var(--ds-form-border-radius);
                    padding: var(--ds-spacing-md);
                    margin: var(--ds-spacing-md) 0;
                }
            </style>
            <div class="wrapper">
                <fieldset part="container">
                    <slot></slot>
                </fieldset>
            </div>
        `,super({template:t.innerHTML,targetSelector:"fieldset",ariaConfig:e,events:[],observedAttributes:[]}),this.fieldset=this.shadowRoot.querySelector("fieldset")}static get observedAttributes(){return["aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}_generateTestId(){const e="fieldset",t=this.fieldset.querySelector("legend,ds-legend")?"with-legend":"no-legend",n=this.getAttribute("aria-label")||"default",i=this.getAttribute("aria-describedby")||"default";return`ds-${e}-${t}-${n}-${i}`}get ariaLabel(){const e=this.fieldset.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.fieldset.removeAttribute("aria-label"):this.fieldset.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.fieldset.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.fieldset.removeAttribute("aria-describedby"):this.fieldset.setAttribute("aria-describedby",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.fieldset.querySelector("legend,ds-legend"),n=this.fieldset.getAttribute("aria-label");return!t&&!n&&e.push("Fieldset has no accessible name (legend or aria-label required)"),e}}customElements.get("ds-fieldset")||customElements.define("ds-fieldset",rq);class nq extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .wrapper {
                    width: 100%;
                }
                
                legend[part="container"] {
                    padding: 0 var(--ds-spacing-xs);
                    font-weight: 600;
                    color: var(--ds-form-text-color);
                }
            </style>
            <div class="wrapper">
                <legend part="container">
                    <slot></slot>
                </legend>
            </div>
        `,super({template:t.innerHTML,targetSelector:"legend",ariaConfig:e,events:[],observedAttributes:[]}),this.legend=this.shadowRoot.querySelector("legend")}_generateTestId(){const e="legend",t=this.getAttribute("aria-label")||"default",n=this.getAttribute("aria-describedby")||"default";return`ds-${e}-${t}-${n}`}static get observedAttributes(){return["aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}get ariaLabel(){const e=this.legend.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.legend.removeAttribute("aria-label"):this.legend.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.legend.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.legend.removeAttribute("aria-describedby"):this.legend.setAttribute("aria-describedby",e)}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.textContent.trim(),n=this.legend.getAttribute("aria-label");return!t&&!n&&e.push("Legend has no accessible name (text or aria-label required)"),e}}customElements.get("ds-legend")||customElements.define("ds-legend",nq);class iq extends hi{constructor(){const e={staticAriaAttributes:{role:"form"},dynamicAriaAttributes:["aria-label","aria-describedby","aria-labelledby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby","aria-labelledby"]},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .form-wrapper {
                    width: 100%;
                }
                
                form[part="container"] {
                    width: 100%;
                }
                
                .live-region[part="live-region"] {
                    position: absolute;
                    left: -10000px;
                    width: 1px;
                    height: 1px;
                    overflow: hidden;
                }
                
                .live-region[part="live-region"]:not([hidden]) {
                    position: static;
                    width: auto;
                    height: auto;
                    margin-top: var(--ds-spacing-sm);
                    padding: var(--ds-spacing-sm);
                    border-radius: var(--ds-form-border-radius);
                    font-size: 0.9em;
                }
                
                .live-region[part="live-region"][data-type="error"] {
                    background-color: var(--ds-form-error-background);
                    color: var(--ds-form-error-color);
                    border: 1px solid var(--ds-form-error-border);
                }
                
                .live-region[part="live-region"][data-type="success"] {
                    background-color: var(--ds-form-success-background, #d4edda);
                    color: var(--ds-form-success-color, #155724);
                    border: 1px solid var(--ds-form-success-border, #c3e6cb);
                }
                
                .live-region[part="live-region"][data-type="info"] {
                    background-color: var(--ds-form-info-background, #d1ecf1);
                    color: var(--ds-form-info-color, #0c5460);
                    border: 1px solid var(--ds-form-info-border, #bee5eb);
                }
            </style>
            <div class="form-wrapper">
                <form part="container" novalidate>
                    <slot></slot>
                </form>
                <div 
                    part="live-region" 
                    class="live-region"
                    aria-live="polite" 
                    aria-atomic="true" 
                    hidden>
                </div>
            </div>
        `,super({template:t.innerHTML,targetSelector:"form",ariaConfig:e,events:["submit","reset","input","change","invalid"]}),this.form=this.shadowRoot.querySelector("form"),this.liveRegion=this.shadowRoot.querySelector('[part="live-region"]'),this.formState={submitted:!1,valid:!0,errors:new Map,hasValidationErrors:!1},this.setupFormHandlers()}_generateTestId(){const e="form",t=this.getAttribute("method")||"get",n=this.getAttribute("action")?"with-action":"no-action",i=this.getAttribute("aria-label")||"default",a=this.getAttribute("aria-describedby")||"default";return`ds-${e}-${t}-${n}-${i}-${a}`}static get observedAttributes(){return["action","method","enctype","target","novalidate","autocomplete","aria-label","aria-describedby","aria-labelledby"]}setupFormHandlers(){this.form.addEventListener("submit",e=>{this.handleFormSubmit(e)}),this.form.addEventListener("reset",e=>{this.handleFormReset(e)}),this.form.addEventListener("input",e=>{this.handleInputChange(e)}),this.form.addEventListener("invalid",e=>{this.handleInvalidEvent(e)}),this.form.addEventListener("change",e=>{this.handleFormChange(e)})}handleFormSubmit(e){this.formState.submitted=!0;const t=this.querySelectorAll("input, select, textarea, ds-text-input, ds-select, ds-textarea, ds-checkbox, ds-radio");let n=!1;if(t.forEach(i=>{i.hasAttribute("required")&&((i.value||"").trim()||(n=!0,this.validateInput(i)))}),n){e.preventDefault(),this.handleValidationErrors();return}this.clearLiveRegion(),this.announceToScreenReader("Form submitted successfully")}handleFormReset(){this.formState={submitted:!1,valid:!0,errors:new Map,hasValidationErrors:!1},this.clearLiveRegion(),this.announceToScreenReader("Form has been reset")}handleInputChange(e){const t=e.target;this.formState.errors.has(t)&&(this.formState.errors.delete(t),this.updateLiveRegion()),this.formState.submitted&&this.validateInput(t)}handleInvalidEvent(e){e.preventDefault(),this.validateInput(e.target)}handleFormChange(){this.updateFormValidity()}validateInput(e){let t=!0,n="";if(e.checkValidity)t=e.checkValidity(),n=e.validationMessage||"This field is invalid";else if(e.tagName&&e.tagName.toLowerCase().includes("ds-")){const i=e.hasAttribute("required"),a=e.value||"";i&&!a.trim()?(t=!1,n="This field is required"):e.type==="email"&&a&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||(t=!1,n="Please enter a valid email address"))}t?this.formState.errors.delete(e):(this.formState.errors.set(e,n),this.formState.hasValidationErrors=!0),this.updateFormValidity(),this.updateLiveRegion()}updateFormValidity(){this.formState.valid=this.form.checkValidity(),this.formState.hasValidationErrors?this.form.setAttribute("aria-invalid","true"):this.form.removeAttribute("aria-invalid")}handleValidationErrors(){this.formState.hasValidationErrors=!0,this.formState.valid=!1;const e=Array.from(this.formState.errors.values());if(e.length>0){const t=`Form has ${e.length} validation error${e.length>1?"s":""}: ${e.join(". ")}`;this.announceToScreenReader(t,"error")}this.updateLiveRegion()}updateLiveRegion(){if(this.formState.errors.size===0){this.clearLiveRegion();return}const t=Array.from(this.formState.errors.values()).join(". ");this.liveRegion.textContent=t,this.liveRegion.setAttribute("data-type","error"),this.liveRegion.hidden=!1}clearLiveRegion(){this.liveRegion.textContent="",this.liveRegion.hidden=!0,this.liveRegion.removeAttribute("data-type")}announceToScreenReader(e,t="info"){this.liveRegion.textContent=e,this.liveRegion.setAttribute("data-type",t),this.liveRegion.hidden=!1,setTimeout(()=>{this.clearLiveRegion()},5e3)}get action(){return this.form.action}set action(e){this.form.action=e}get method(){return this.form.method}set method(e){this.form.method=e}get enctype(){return this.form.enctype}set enctype(e){this.form.enctype=e}get target(){return this.form.target}set target(e){this.form.target=e}get novalidate(){return this.form.hasAttribute("novalidate")}set novalidate(e){e?this.form.setAttribute("novalidate",""):this.form.removeAttribute("novalidate")}get autocomplete(){return this.form.autocomplete}set autocomplete(e){this.form.autocomplete=e}get ariaLabel(){const e=this.form.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.form.removeAttribute("aria-label"):this.form.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.form.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.form.removeAttribute("aria-describedby"):this.form.setAttribute("aria-describedby",e)}get ariaLabelledBy(){const e=this.form.getAttribute("aria-labelledby");return e===null?null:e}set ariaLabelledBy(e){e==null?this.form.removeAttribute("aria-labelledby"):this.form.setAttribute("aria-labelledby",e)}submit(){this.form.submit()}reset(){this.form.reset(),this.handleFormReset(new Event("reset"))}checkValidity(){return this.form.checkValidity()}reportValidity(){return this.form.reportValidity()}getFormData(){const e=new FormData;return this.querySelectorAll("input, select, textarea, ds-text-input, ds-select, ds-textarea, ds-checkbox, ds-radio").forEach(n=>{const i=n.name||n.getAttribute("name");if(!i)return;let a="",o=!1,s=!1,u=!1;const l=n.tagName.toLowerCase();n.type==="checkbox"||l==="ds-checkbox"?(o=!0,u=n.checked===!0||n.hasAttribute("checked")):(n.type==="radio"||l==="ds-radio")&&(s=!0,u=n.checked===!0||n.hasAttribute("checked")),o||s?u&&(l.startsWith("ds-")?a=n.getAttribute("value")??n.value??"on":a=n.value||"on",e.append(i,a)):(a=n.value||"",e.append(i,a))}),e}getFormDataAsObject(){const e=this.getFormData(),t={};for(const[n,i]of e.entries())t[n]=i;return t}validateARIA(){const e=super.validateARIA?super.validateARIA():[],t=this.form.getAttribute("aria-label"),n=this.form.getAttribute("aria-labelledby"),i=this.querySelector("h1, h2, h3, h4, h5, h6");return!t&&!n&&!i&&e.push("Form should have an accessible name"),this.querySelector('input, select, textarea, ds-text-input, ds-select, ds-textarea, ds-checkbox, ds-radio, button[type="submit"]')||e.push("Form should contain form controls"),e}}customElements.get("ds-form")||customElements.define("ds-form",iq);class aq extends hi{static get observedAttributes(){return["href","variant","size","aria-label","aria-labelledby"]}constructor(){super({template:"<slot></slot>",display:"block",ariaConfig:{requiredAriaAttributes:["aria-label","aria-labelledby"],dynamicAriaAttributes:["aria-label","aria-labelledby"],referenceAttributes:["aria-labelledby"]}}),this._onKeyDown=this._onKeyDown.bind(this)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.render(),this.hasAttribute("href")&&this.shadowRoot.querySelector(".card-link").addEventListener("keydown",this._onKeyDown),this._updateTestMode()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this.hasAttribute("href")&&this.shadowRoot.querySelector(".card-link").removeEventListener("keydown",this._onKeyDown)}attributeChangedCallback(e,t,n){super.attributeChangedCallback&&super.attributeChangedCallback(e,t,n),e==="href"&&t!==n&&this.render(),["aria-label","aria-labelledby"].includes(e)&&t!==n&&this.render(),["href","variant","size","aria-label","aria-labelledby"].includes(e)&&this._updateTestMode()}_onKeyDown(e){(e.key==="Enter"||e.key===" ")&&this.hasAttribute("href")&&(e.preventDefault(),this.shadowRoot.querySelector(".card-link").click())}_generateTestId(){const e="card",t=this.getAttribute("variant")||"default",n=this.hasAttribute("href")?"link":"default",i=this.getAttribute("size")||"medium",a=this.hasAttribute("aria-label")?"labeled":"unlabeled",o=this.hasAttribute("aria-labelledby")?"referenced":"unreferenced";return`ds-${e}-${t}-enabled-${n}-${i}-${a}-${o}`}render(){const e=this.getAttribute("href"),t=!!e,n=this.getAttribute("aria-label"),i=this.getAttribute("aria-labelledby"),a=this.getAttribute("class")||"";this._validateAccessibleName(),console.log(e),this.shadowRoot.innerHTML=`
      <style>
        .card-root {
          display: block;
          width: 100%;
          background: var(--ds-card-background, #fff) !important;
          border: 1px solid var(--ds-card-border-color, #e0e0e0) !important;
          border-radius: var(--ds-card-border-radius, 12px) !important;
          box-shadow: var(--ds-card-shadow, 0 2px 8px rgba(0,0,0,0.04)) !important;
          color: var(--ds-card-text-color, #222) !important;
          transition: box-shadow 0.2s, border 0.2s;
          outline: none;
          text-decoration: none !important;
          cursor: ${t?"pointer":"default"};
          text-align: left;
        }
        .card-root:focus, .card-root:focus-visible, .card-root:active, .card-root:hover {
          border: 1px solid var(--ds-color-primary, #007bff) !important;
          box-shadow: 0 4px 16px rgba(0,123,255,0.08) !important;
        }
        .card-content {
          padding: var(--ds-card-padding, 2rem 2.5rem) !important;
        }
        ::slotted(h2) {
          margin: 0 0 0.5rem 0;
          font-size: 1.3rem;
          color: var(--ds-color-primary, #007bff) !important;
        }
        ::slotted(p), ::slotted(div), ::slotted(span), ::slotted(*) {
          color: #555 !important;
          text-decoration: none !important;
        }
      </style>
      ${t?`
        <a class="card-root card-link ${a}" href="${e}" tabindex="0" role="link" target="_blank" rel="noopener" 
           ${n?`aria-label="${n}"`:""} 
           ${i?`aria-labelledby="${i}"`:""}>
          <div class="card-content">
            <slot></slot>
          </div>
        </a>
      `:`
        <div class="card-root card-content-wrapper ${a}" role="group" tabindex="0" 
             ${n?`aria-label="${n}"`:'aria-label="Card"'} 
             ${i?`aria-labelledby="${i}"`:""}>
          <div class="card-content">
            <slot></slot>
          </div>
        </div>
      `}
    `}_validateAccessibleName(){const e=this.getAttribute("aria-label"),t=this.getAttribute("aria-labelledby"),n=this.textContent&&this.textContent.trim().length>0;if(!e&&!t&&!n&&console.warn(`[${this.constructor.name}] Card has no accessible name. Provide aria-label, aria-labelledby, or visible text content.`),t){const i=t.split(/\s+/);for(const a of i)document.getElementById(a)||console.warn(`[${this.constructor.name}] Element referenced by aria-labelledby ('${a}') does not exist in the document.`)}}}customElements.get("ds-card")||customElements.define("ds-card",aq);class oq extends hi{constructor(){const e={staticAriaAttributes:{},dynamicAriaAttributes:["aria-label","aria-describedby"],requiredAriaAttributes:[],referenceAttributes:["aria-describedby"],tokenValidation:{}},t=document.createElement("template");t.innerHTML=`
            <style>
                :host {
                    display: block;
                }
                
                .header-wrapper {
                    margin: 0;
                    padding: 0;
                }
                
                ::slotted(*) {
                    margin: 0;
                }
            </style>
            <div class="header-wrapper">
                <h1 id="header-element" part="container">
                    <slot></slot>
                </h1>
            </div>
        `,super({template:t.innerHTML,targetSelector:"h1",ariaConfig:e,events:[],observedAttributes:["level","id"]}),this.headerElement=this.shadowRoot.querySelector("h1"),this._currentLevel=1,this._setupTextContentObserver()}_generateTestId(){const e="heading",t=this.getAttribute("level")||"1",n=this.textContent.trim()?"with-content":"empty";return`ds-${e}-level-${t}-${n}`}static get observedAttributes(){return["level","id","aria-label","aria-describedby"]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),t!==n)switch(e){case"level":this._updateHeaderLevel(n);break;case"id":this.headerElement.id=n||"";break}}_updateTextContent(){this.textContent.trim()&&(this.headerElement.textContent=this.textContent)}_setupTextContentObserver(){this._textObserver=new MutationObserver(e=>{e.forEach(t=>{(t.type==="childList"||t.type==="characterData")&&this._updateTextContent()})}),this._textObserver.observe(this,{childList:!0,characterData:!0,subtree:!0})}_updateHeaderLevel(e){const t=this._currentLevel,n=this._parseLevel(e);n!==t&&(this._currentLevel=n,this._renderHeader(),If(this,"ds-level-change",{level:n,oldLevel:t}))}_parseLevel(e){if(!e)return 1;if(typeof e=="string"&&e.toLowerCase().startsWith("h")){const n=parseInt(e.slice(1));return n>=1&&n<=6?n:1}const t=parseInt(e);return t>=1&&t<=6?t:1}_renderHeader(){const e=`h${this._currentLevel}`,t=document.createElement(e);t.id=this.headerElement.id,t.className=this.headerElement.className,["aria-label","aria-describedby"].forEach(o=>{this.headerElement.hasAttribute(o)&&t.setAttribute(o,this.headerElement.getAttribute(o))});const i=document.createElement("slot");t.appendChild(i),this.shadowRoot.querySelector(".header-wrapper").replaceChild(t,this.headerElement),this.headerElement=t,this.options.targetSelector=e}get level(){return this._currentLevel}set level(e){this.setAttribute("level",e)}get id(){return this.headerElement.id}set id(e){this.headerElement.id=e}get ariaLabel(){const e=this.headerElement.getAttribute("aria-label");return e===null?null:e}set ariaLabel(e){e==null?this.headerElement.removeAttribute("aria-label"):this.headerElement.setAttribute("aria-label",e)}get ariaDescribedBy(){const e=this.headerElement.getAttribute("aria-describedby");return e===null?null:e}set ariaDescribedBy(e){e==null?this.headerElement.removeAttribute("aria-describedby"):this.headerElement.setAttribute("aria-describedby",e)}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._updateTextContent()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this._textObserver&&this._textObserver.disconnect()}validateARIA(){const e=super.validateARIA?super.validateARIA():[];if(this.headerElement.getAttribute("aria-label")||this.headerElement.getAttribute("aria-labelledby")||this.textContent.trim()||e.push("Header has no accessible name (aria-label, aria-labelledby, or text content required)"),this.headerElement.hasAttribute("aria-describedby")){const n=this.checkAriaReferences("aria-describedby",this.headerElement.getAttribute("aria-describedby"));n&&e.push(n)}return e}}customElements.get("ds-heading")||customElements.define("ds-heading",oq);const sq={color:{primary:"#007bff",secondary:"#6c757d",tertiary:"#868e96",text:"#212529",background:"#ffffff",success:"#28a745",error:"#dc3545",warning:"#ffc107",info:"#17a2b8"},spacing:{xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",pagePadding:"20px"},typography:{fontFamily:'system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',fontSize:"16px",lineHeight:"1.5"},layout:{pageMaxWidth:"1200px",containerPadding:"20px"},components:{button:{backgroundColor:"#ffffff",borderColor:"#ced4da",textColor:"#212529",borderRadius:"4px",padding:"8px 16px",fontSize:"16px",fontWeight:"400",borderWidth:"1px",borderStyle:"solid",transition:"all 0.2s ease-in-out",variants:{primary:{backgroundColor:"#007bff",borderColor:"#007bff",textColor:"#ffffff",fontWeight:"500",states:{hover:{backgroundColor:"#0056b3",borderColor:"#0056b3"},focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},active:{backgroundColor:"#004085",borderColor:"#004085"},disabled:{backgroundColor:"#6c757d",borderColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",borderRadius:"3px"},medium:{padding:"8px 16px",fontSize:"16px",borderRadius:"4px"},large:{padding:"12px 24px",fontSize:"18px",borderRadius:"6px"}}},secondary:{backgroundColor:"#6c757d",borderColor:"#6c757d",textColor:"#ffffff",states:{hover:{backgroundColor:"#545b62",borderColor:"#545b62"},focus:{boxShadow:"0 0 0 0.2rem rgba(108, 117, 125, 0.25)",outline:"none"},active:{backgroundColor:"#3d4449",borderColor:"#3d4449"},disabled:{backgroundColor:"#adb5bd",borderColor:"#adb5bd",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",borderRadius:"3px"},medium:{padding:"8px 16px",fontSize:"16px",borderRadius:"4px"},large:{padding:"12px 24px",fontSize:"18px",borderRadius:"6px"}}},danger:{backgroundColor:"#dc3545",borderColor:"#dc3545",textColor:"#ffffff",fontWeight:"500",states:{hover:{backgroundColor:"#c82333",borderColor:"#bd2130"},focus:{boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",outline:"none"},active:{backgroundColor:"#bd2130",borderColor:"#b21f2d"},disabled:{backgroundColor:"#6c757d",borderColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",borderRadius:"3px"},medium:{padding:"8px 16px",fontSize:"16px",borderRadius:"4px"},large:{padding:"12px 24px",fontSize:"18px",borderRadius:"6px"}}},outline:{backgroundColor:"transparent",borderColor:"#007bff",textColor:"#007bff",fontWeight:"500",states:{hover:{backgroundColor:"#007bff",borderColor:"#007bff",textColor:"#ffffff"},focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},active:{backgroundColor:"#0056b3",borderColor:"#0056b3",textColor:"#ffffff"},disabled:{backgroundColor:"transparent",borderColor:"#6c757d",textColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",borderRadius:"3px"},medium:{padding:"8px 16px",fontSize:"16px",borderRadius:"4px"},large:{padding:"12px 24px",fontSize:"18px",borderRadius:"6px"}}},ghost:{backgroundColor:"transparent",borderColor:"transparent",textColor:"#007bff",fontWeight:"500",states:{hover:{backgroundColor:"rgba(0, 123, 255, 0.1)",borderColor:"transparent"},focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},active:{backgroundColor:"rgba(0, 123, 255, 0.2)",borderColor:"transparent"},disabled:{backgroundColor:"transparent",borderColor:"transparent",textColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",borderRadius:"3px"},medium:{padding:"8px 16px",fontSize:"16px",borderRadius:"4px"},large:{padding:"12px 24px",fontSize:"18px",borderRadius:"6px"}}}},states:{hover:{backgroundColor:"#f8f9fa",borderColor:"#adb5bd"},focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},active:{backgroundColor:"#e9ecef",borderColor:"#6c757d"},disabled:{backgroundColor:"#e9ecef",borderColor:"#ced4da",textColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",borderRadius:"3px"},medium:{padding:"8px 16px",fontSize:"16px",borderRadius:"4px"},large:{padding:"12px 24px",fontSize:"18px",borderRadius:"6px"}}},input:{backgroundColor:"#ffffff",borderColor:"#ced4da",textColor:"#212529",borderRadius:"4px",padding:"8px 12px",fontSize:"16px",variants:{error:{borderColor:"#dc3545",backgroundColor:"#fff5f5",states:{focus:{borderColor:"#dc3545",boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",outline:"none"},disabled:{backgroundColor:"#f8d7da",borderColor:"#f5c6cb",textColor:"#721c24",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px"},medium:{padding:"8px 12px",fontSize:"16px"},large:{padding:"12px 16px",fontSize:"18px"}}},success:{borderColor:"#28a745",backgroundColor:"#f8fff8",states:{focus:{borderColor:"#28a745",boxShadow:"0 0 0 0.2rem rgba(40, 167, 69, 0.25)",outline:"none"},disabled:{backgroundColor:"#d4edda",borderColor:"#c3e6cb",textColor:"#155724",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px"},medium:{padding:"8px 12px",fontSize:"16px"},large:{padding:"12px 16px",fontSize:"18px"}}}},states:{focus:{borderColor:"#007bff",boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#e9ecef",borderColor:"#ced4da",textColor:"#6c757d",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px"},medium:{padding:"8px 12px",fontSize:"16px"},large:{padding:"12px 16px",fontSize:"18px"}}},card:{backgroundColor:"#ffffff",borderColor:"#e0e0e0",borderRadius:"12px",padding:"2rem 2.5rem",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",variants:{elevated:{boxShadow:"0 4px 16px rgba(0,0,0,0.12)"},outlined:{borderWidth:"2px",boxShadow:"none"},filled:{backgroundColor:"#f8f9fa",borderColor:"transparent"}}},select:{backgroundColor:"#ffffff",borderColor:"#ced4da",textColor:"#212529",borderRadius:"4px",padding:"8px 12px",fontSize:"16px",variants:{error:{borderColor:"#dc3545",backgroundColor:"#fff5f5",states:{focus:{borderColor:"#dc3545",boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",outline:"none"},disabled:{backgroundColor:"#f8d7da",borderColor:"#f5c6cb",textColor:"#721c24",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px"},medium:{padding:"8px 12px",fontSize:"16px"},large:{padding:"12px 16px",fontSize:"18px"}}},success:{borderColor:"#28a745",backgroundColor:"#f8fff8",states:{focus:{borderColor:"#28a745",boxShadow:"0 0 0 0.2rem rgba(40, 167, 69, 0.25)",outline:"none"},disabled:{backgroundColor:"#d4edda",borderColor:"#c3e6cb",textColor:"#155724",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px"},medium:{padding:"8px 12px",fontSize:"16px"},large:{padding:"12px 16px",fontSize:"18px"}}}},states:{focus:{borderColor:"#007bff",boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#e9ecef",borderColor:"#ced4da",textColor:"#6c757d",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px"},medium:{padding:"8px 12px",fontSize:"16px"},large:{padding:"12px 16px",fontSize:"18px"}}},textarea:{backgroundColor:"#ffffff",borderColor:"#ced4da",textColor:"#212529",borderRadius:"4px",padding:"8px 12px",fontSize:"16px",minHeight:"100px",variants:{error:{borderColor:"#dc3545",backgroundColor:"#fff5f5",states:{focus:{borderColor:"#dc3545",boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",outline:"none"},disabled:{backgroundColor:"#f8d7da",borderColor:"#f5c6cb",textColor:"#721c24",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",minHeight:"80px"},medium:{padding:"8px 12px",fontSize:"16px",minHeight:"100px"},large:{padding:"12px 16px",fontSize:"18px",minHeight:"120px"}}},success:{borderColor:"#28a745",backgroundColor:"#f8fff8",states:{focus:{borderColor:"#28a745",boxShadow:"0 0 0 0.2rem rgba(40, 167, 69, 0.25)",outline:"none"},disabled:{backgroundColor:"#d4edda",borderColor:"#c3e6cb",textColor:"#155724",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",minHeight:"80px"},medium:{padding:"8px 12px",fontSize:"16px",minHeight:"100px"},large:{padding:"12px 16px",fontSize:"18px",minHeight:"120px"}}}},states:{focus:{borderColor:"#007bff",boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#e9ecef",borderColor:"#ced4da",textColor:"#6c757d",cursor:"not-allowed"}},sizes:{small:{padding:"4px 8px",fontSize:"14px",minHeight:"80px"},medium:{padding:"8px 12px",fontSize:"16px",minHeight:"100px"},large:{padding:"12px 16px",fontSize:"18px",minHeight:"120px"}}},checkbox:{backgroundColor:"#ffffff",borderColor:"#ced4da",textColor:"#212529",borderRadius:"4px",width:"16px",height:"16px",variants:{checked:{backgroundColor:"#007bff",borderColor:"#007bff",states:{focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#6c757d",borderColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{width:"12px",height:"12px",borderRadius:"2px"},medium:{width:"16px",height:"16px",borderRadius:"4px"},large:{width:"20px",height:"20px",borderRadius:"6px"}}},error:{borderColor:"#dc3545",states:{focus:{boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",outline:"none"},disabled:{borderColor:"#f5c6cb",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{width:"12px",height:"12px",borderRadius:"2px"},medium:{width:"16px",height:"16px",borderRadius:"4px"},large:{width:"20px",height:"20px",borderRadius:"6px"}}}},states:{focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#e9ecef",borderColor:"#ced4da",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{width:"12px",height:"12px",borderRadius:"2px"},medium:{width:"16px",height:"16px",borderRadius:"4px"},large:{width:"20px",height:"20px",borderRadius:"6px"}}},radio:{backgroundColor:"#ffffff",borderColor:"#ced4da",textColor:"#212529",borderRadius:"50%",width:"16px",height:"16px",variants:{checked:{backgroundColor:"#007bff",borderColor:"#007bff",states:{focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#6c757d",borderColor:"#6c757d",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{width:"12px",height:"12px"},medium:{width:"16px",height:"16px"},large:{width:"20px",height:"20px"}}},error:{borderColor:"#dc3545",states:{focus:{boxShadow:"0 0 0 0.2rem rgba(220, 53, 69, 0.25)",outline:"none"},disabled:{borderColor:"#f5c6cb",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{width:"12px",height:"12px"},medium:{width:"16px",height:"16px"},large:{width:"20px",height:"20px"}}}},states:{focus:{boxShadow:"0 0 0 0.2rem rgba(0, 123, 255, 0.25)",outline:"none"},disabled:{backgroundColor:"#e9ecef",borderColor:"#ced4da",opacity:"0.65",cursor:"not-allowed"}},sizes:{small:{width:"12px",height:"12px"},medium:{width:"16px",height:"16px"},large:{width:"20px",height:"20px"}}},fieldset:{borderColor:"#ced4da",borderWidth:"1px",borderStyle:"solid",borderRadius:"4px",padding:"16px",margin:"0 0 16px 0"},label:{textColor:"#212529",fontSize:"14px",fontWeight:"500",margin:"0 0 4px 0"},legend:{textColor:"#212529",fontSize:"16px",fontWeight:"600",padding:"0 8px"},option:{backgroundColor:"#ffffff",textColor:"#212529",padding:"8px 12px",variants:{selected:{backgroundColor:"#007bff",textColor:"#ffffff"},hover:{backgroundColor:"#f8f9fa"}}},page:{backgroundColor:"#ffffff",textColor:"#212529",maxWidth:"1200px",margin:"0 auto",padding:"20px"},heading:{textColor:"#212529",fontWeight:"600",margin:"0 0 16px 0",variants:{h1:{fontSize:"2.5rem",lineHeight:"1.2"},h2:{fontSize:"2rem",lineHeight:"1.3"},h3:{fontSize:"1.75rem",lineHeight:"1.4"},h4:{fontSize:"1.5rem",lineHeight:"1.4"},h5:{fontSize:"1.25rem",lineHeight:"1.5"},h6:{fontSize:"1rem",lineHeight:"1.5"}}},col:{padding:"0 8px",variants:{xs1:{flex:"0 0 8.333333%"},xs2:{flex:"0 0 16.666667%"},xs3:{flex:"0 0 25%"},xs4:{flex:"0 0 33.333333%"},xs5:{flex:"0 0 41.666667%"},xs6:{flex:"0 0 50%"},xs7:{flex:"0 0 58.333333%"},xs8:{flex:"0 0 66.666667%"},xs9:{flex:"0 0 75%"},xs10:{flex:"0 0 83.333333%"},xs11:{flex:"0 0 91.666667%"},xs12:{flex:"0 0 100%"}}},row:{display:"flex",flexWrap:"wrap",margin:"0 -8px"},form:{borderColor:"#ced4da",borderRadius:"4px",textColor:"#495057",errorColor:"#dc3545",errorBackground:"#f8d7da",errorBorder:"#f5c6cb",successColor:"#155724",successBackground:"#d4edda",successBorder:"#c3e6cb",infoColor:"#0c5460",infoBackground:"#d1ecf1",infoBorder:"#bee5eb"}}};function Hd(r){return typeof r!="string"?r:r.replace(/([A-Z])/g,"-$1").toLowerCase()}function uq(r,e="--ds-",t="-"){const n={};function i(l,c=""){for(const[f,d]of Object.entries(l)){if(d==null)continue;const h=Hd(f),v=c?`${c}${t}${h}`:h;if(typeof d=="object"&&!Array.isArray(d))if(f==="components")for(const[p,g]of Object.entries(d))typeof g=="object"&&g!==null&&a(g,`${e}${Hd(p)}`,t);else i(d,v);else n[`${e}${v}`]=d}}function a(l,c,f){for(const[d,h]of Object.entries(l)){if(h==null)continue;const v=Hd(d);if(typeof h=="object"&&!Array.isArray(h)){if(d==="variants")for(const[p,g]of Object.entries(h))typeof g=="object"&&g!==null&&o(g,`${c}${f}${p}`,f);else if(d==="states")for(const[p,g]of Object.entries(h))typeof g=="object"&&g!==null&&s(g,`${c}${f}${p}`,f);else if(d==="sizes")for(const[p,g]of Object.entries(h))typeof g=="object"&&g!==null&&u(g,`${c}${f}${p}`,f)}else n[`${c}${f}${v}`]=h}}function o(l,c,f){for(const[d,h]of Object.entries(l)){if(h==null)continue;const v=Hd(d);if(typeof h=="object"&&!Array.isArray(h)){if(d==="states")for(const[p,g]of Object.entries(h))typeof g=="object"&&g!==null&&s(g,`${c}${f}${p}`,f);else if(d==="sizes")for(const[p,g]of Object.entries(h))typeof g=="object"&&g!==null&&u(g,`${c}${f}${p}`,f)}else n[`${c}${f}${v}`]=h}}function s(l,c,f){for(const[d,h]of Object.entries(l)){if(h==null)continue;const v=Hd(d);n[`${c}${f}${v}`]=h}}function u(l,c,f){for(const[d,h]of Object.entries(l)){if(h==null)continue;const v=Hd(d);n[`${c}${f}${v}`]=h}}return i(r),n}function lq(r){const e=uq(r,"--ds-","-");return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join(`
  `)}function cq(r){const e="ds-design-tokens";let t=document.getElementById(e);t||(t=document.createElement("style"),t.id=e,document.head.appendChild(t)),t.textContent=`:root {
  ${r}
}`}function fq(r){const e=[];return r.color&&typeof r.color!="object"&&e.push("Color tokens must be an object"),r.spacing&&typeof r.spacing!="object"&&e.push("Spacing tokens must be an object"),r.typography&&typeof r.typography!="object"&&e.push("Typography tokens must be an object"),r.layout&&typeof r.layout!="object"&&e.push("Layout tokens must be an object"),r.components&&typeof r.components!="object"&&e.push("Component tokens must be an object"),{isValid:e.length===0,errors:e}}function dq(r={},e={}){const t={injectCSS:!0,validate:!1,console:!1,...e};try{(!r||typeof r!="object"||Array.isArray(r))&&(r={});const n={};for(const[o,s]of Object.entries(r))s!=null&&(["color","spacing","typography","layout","components"].includes(o)?typeof s=="object"&&!Array.isArray(s)&&(n[o]=s):n[o]=s);if(t.validate){const o=fq(n);if(!o.isValid)return t.console&&typeof window<"u"&&window.console&&console.error("❌ Design system token validation failed:",o.errors),{success:!1,errors:o.errors}}const i=n,a=lq(i);return t.injectCSS&&typeof document<"u"&&cq(a),t.console&&(console.log("🎨 Design system initialized successfully"),console.log("📦 Tokens applied:",i)),{success:!0,errors:[],tokens:i,css:a}}catch(n){const i=`Design system initialization failed: ${n.message}`;return t.console&&console.error(i),{success:!1,errors:[i],tokens:null,css:""}}}const r3={isTestEnvironment(){var r,e;return typeof window>"u"||((e=(r=window.navigator)==null?void 0:r.userAgent)==null?void 0:e.includes("jsdom"))||!1},getEnvironment(){return this.isTestEnvironment()?"test":"production"}},lP={init(){typeof window>"u"||this._isStorybookEnvironment()&&(console.log("🎭 Storybook Testing Integration initialized (CI/CD mode)"),console.log("📊 Performance monitoring: CI/CD only - no real-time tracking"),console.log("🚫 No visual panels, popups, or real-time monitoring"))},_isStorybookEnvironment(){return typeof window<"u"&&window.location.href.includes("storybook")},async runCIPerformanceCheck(r,e){if(typeof window>"u")throw new Error("CI performance check must run in browser environment");try{console.log(`🚀 Running CI performance check for: ${r}`);const t=await this._validateComponentPerformance(r,e);return console.log(`✅ CI performance check completed for ${r}:`,t),t}catch(t){throw console.error(`❌ CI performance check failed for ${r}:`,t),t}},async _validateComponentPerformance(r,e){const t=performance.now(),n=this._getMemoryUsage();try{const i=new e;document.body.appendChild(i),await this._waitForNextFrame();const a=performance.now()-t,s=this._getMemoryUsage()-n;return document.body.removeChild(i),{componentName:r,timestamp:Date.now(),metrics:{renderTime:a.toFixed(2),memoryDelta:(s/1024/1024).toFixed(2),passed:a<100&&s<50*1024*1024},thresholds:{renderTime:"100ms",memoryDelta:"50MB"}}}catch(i){throw component&&component.parentNode&&component.parentNode.removeChild(component),i}},_waitForNextFrame(){return new Promise(r=>requestAnimationFrame(r))},_getMemoryUsage(){return performance.memory?performance.memory.usedJSHeapSize:0}};typeof window<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>lP.init(),1e3)}):setTimeout(()=>lP.init(),1e3));const cP={_isInitialized:!1,_observer:null,_enhancedComponents:new Set,init(){if(!this._isInitialized){if(!r3.isTestEnvironment()){console.log("🔍 Component enhancement: Not in test environment, skipping");return}console.log("🔧 Component enhancement: Initializing for test environment"),this._setupDOMWatcher(),this._isInitialized=!0}},setupTestEnvironment(r={}){const e={enableLogging:!0,enhanceExisting:!0,...r};return e.enableLogging&&console.log("🧪 Setting up comprehensive test environment..."),this.init(),e.enhanceExisting&&this._enhanceExistingComponents(),e.enableLogging&&console.log("✅ Test environment setup complete!"),{status:"ready",componentsEnhanced:this._enhancedComponents.size,watchingForNew:this._observer!==null}},_enhanceExistingComponents(){const r=document.querySelectorAll('[data-test-type], [class*="ds-"], ds-button, ds-text-input, ds-textarea, ds-select, ds-option, ds-checkbox, ds-radio, ds-form, ds-fieldset, ds-legend, ds-label, ds-card, ds-page, ds-row, ds-col');console.log(`🔧 Enhancing ${r.length} existing components...`),r.forEach(e=>{this._enhanceComponent(e)})},_setupDOMWatcher(){if(!window.MutationObserver){console.warn("⚠️ MutationObserver not available, cannot watch for new components");return}this._observer=new MutationObserver(r=>{r.forEach(e=>{e.addedNodes.forEach(t=>{t.nodeType===Node.ELEMENT_NODE&&this._isStandardsUIComponent(t)&&this._enhanceComponent(t)})})}),this._observer.observe(document.body||document.documentElement,{childList:!0,subtree:!0}),console.log("👀 DOM watcher active for new components")},_isStandardsUIComponent(r){var n,i;const e=(n=r.tagName)==null?void 0:n.toLowerCase(),t=r.getAttribute("data-test-type");return(t==null?void 0:t.startsWith("ds-"))||(e==null?void 0:e.startsWith("ds-"))||((i=r.classList)==null?void 0:i.toString().includes("ds-"))||["ds-button","ds-text-input","ds-textarea","ds-select","ds-option","ds-checkbox","ds-radio","ds-form","ds-fieldset","ds-legend","ds-label","ds-card","ds-page","ds-row","ds-col"].includes(e)},_enhanceComponent(r){var n;if(this._enhancedComponents.has(r))return;const e=((n=r.tagName)==null?void 0:n.toLowerCase())||"ds-component",t=r.getAttribute("data-test-type");r.hasAttribute("data-testid")||r.setAttribute("data-testid",t||e),this._addFormProperties(r),this._addTestHelpers(r),this._mockBrowserAPIs(r),this._setupAccessibility(r),this._enhancedComponents.add(r),r.classList.add("test-enhanced"),console.log(`✨ Enhanced component: ${e}`)},_addFormProperties(r){var n;const e=(n=r.tagName)==null?void 0:n.toLowerCase(),t=r.getAttribute("data-test-type");(t!=null&&t.includes("input")||t!=null&&t.includes("textarea")||t!=null&&t.includes("select")||e!=null&&e.includes("input")||e!=null&&e.includes("textarea"))&&(r.hasOwnProperty("value")||Object.defineProperty(r,"value",{get(){return this.getAttribute("value")||""},set(i){this.setAttribute("value",i),this.dispatchEvent(new Event("input",{bubbles:!0})),this.dispatchEvent(new Event("change",{bubbles:!0}))},configurable:!0})),(t!=null&&t.includes("checkbox")||t!=null&&t.includes("radio")||e!=null&&e.includes("checkbox")||e!=null&&e.includes("radio"))&&(r.hasOwnProperty("checked")||Object.defineProperty(r,"checked",{get(){return this.hasAttribute("checked")},set(i){i?this.setAttribute("checked",""):this.removeAttribute("checked"),this.dispatchEvent(new Event("change",{bubbles:!0}))},configurable:!0})),r.hasOwnProperty("disabled")||Object.defineProperty(r,"disabled",{get(){return this.hasAttribute("disabled")},set(i){i?this.setAttribute("disabled",""):this.removeAttribute("disabled")},configurable:!0})},_addTestHelpers(r){r.getTestInfo=()=>{var e;return{tagName:(e=r.tagName)==null?void 0:e.toLowerCase(),testId:r.getAttribute("data-testid"),role:r.getAttribute("role"),disabled:r.disabled,value:r.value,checked:r.checked,classes:Array.from(r.classList||[]),attributes:Array.from(r.attributes||[]).reduce((t,n)=>(t[n.name]=n.value,t),{})}},r.simulateUserInteraction=(e,t={})=>{switch(e){case"click":r.click();break;case"focus":r.focus();break;case"blur":r.blur();break;case"type":t.text&&r.value!==void 0&&(r.value=t.text);break;case"check":r.checked!==void 0&&(r.checked=!0);break;case"uncheck":r.checked!==void 0&&(r.checked=!1);break;case"select":t.value&&r.value!==void 0&&(r.value=t.value);break}},r.triggerEvent=(e,t={})=>{const n=new Event(e,{bubbles:!0,...t});return r.dispatchEvent(n),n}},_mockBrowserAPIs(r){r.focus||(r.focus=()=>{r.dispatchEvent(new FocusEvent("focus",{bubbles:!0}))}),r.blur||(r.blur=()=>{r.dispatchEvent(new FocusEvent("blur",{bubbles:!0}))}),r.click||(r.click=()=>{const e=new MouseEvent("click",{bubbles:!0,cancelable:!0});r.dispatchEvent(e)}),r.scrollIntoView||(r.scrollIntoView=()=>{}),r.getBoundingClientRect||(r.getBoundingClientRect=()=>({top:0,left:0,right:100,bottom:20,width:100,height:20}))},_setupAccessibility(r){var n;const e=(n=r.tagName)==null?void 0:n.toLowerCase(),t=r.getAttribute("data-test-type");r.hasAttribute("role")||(t!=null&&t.includes("button")||e!=null&&e.includes("button")?r.setAttribute("role","button"):t!=null&&t.includes("input")||e!=null&&e.includes("input")||t!=null&&t.includes("textarea")||e!=null&&e.includes("textarea")?r.setAttribute("role","textbox"):t!=null&&t.includes("checkbox")||e!=null&&e.includes("checkbox")?r.setAttribute("role","checkbox"):t!=null&&t.includes("radio")||e!=null&&e.includes("radio")?r.setAttribute("role","radio"):t!=null&&t.includes("select")||e!=null&&e.includes("select")?r.setAttribute("role","listbox"):t!=null&&t.includes("form")||e!=null&&e.includes("form")?r.setAttribute("role","form"):t!=null&&t.includes("fieldset")||e!=null&&e.includes("fieldset")?r.setAttribute("role","group"):t!=null&&t.includes("legend")||e!=null&&e.includes("legend")?r.setAttribute("role","heading"):t!=null&&t.includes("label")||e!=null&&e.includes("label")?r.setAttribute("role","label"):t!=null&&t.includes("card")||e!=null&&e.includes("card")?r.setAttribute("role","article"):t!=null&&t.includes("page")||e!=null&&e.includes("page")?r.setAttribute("role","main"):t!=null&&t.includes("row")||e!=null&&e.includes("row")?r.setAttribute("role","row"):t!=null&&t.includes("col")||e!=null&&e.includes("col")?r.setAttribute("role","cell"):(t!=null&&t.includes("option")||e!=null&&e.includes("option"))&&r.setAttribute("role","option")),!r.hasAttribute("tabindex")&&this._isInteractive(r)&&r.setAttribute("tabindex","0")},_isInteractive(r){var n;const e=(n=r.tagName)==null?void 0:n.toLowerCase(),t=r.getAttribute("data-test-type");return(t==null?void 0:t.includes("button"))||(t==null?void 0:t.includes("input"))||(t==null?void 0:t.includes("checkbox"))||(t==null?void 0:t.includes("radio"))||(t==null?void 0:t.includes("select"))||(t==null?void 0:t.includes("textarea"))||(e==null?void 0:e.includes("button"))||(e==null?void 0:e.includes("input"))||(e==null?void 0:e.includes("checkbox"))||(e==null?void 0:e.includes("radio"))||(e==null?void 0:e.includes("select"))},createTestMock(r){console.log(`🔧 Creating individual test mock for ${r}`);const e=document.createElement("div");return e.setAttribute("data-mock-type",r),e.setAttribute("data-testid",r),this._enhanceComponent(e),e},createAllMocks(r={}){const e=["ds-button","ds-text-input","ds-textarea","ds-select","ds-option","ds-checkbox","ds-radio","ds-form","ds-fieldset","ds-legend","ds-label","ds-card","ds-page","ds-row","ds-col"],t={};return e.forEach(n=>{t[n]=this.createTestMock(n,r)}),console.log(`✅ Created mocks for ${e.length} components`),t},reset(){this._observer&&(this._observer.disconnect(),this._observer=null),this._enhancedComponents.forEach(r=>{r.classList.remove("test-enhanced")}),this._enhancedComponents.clear(),this._isInitialized=!1,console.log("🧹 Component enhancement system reset")}};typeof window<"u"&&r3.isTestEnvironment()&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>cP.init()):cP.init());const xw="#3366cc",Ew="#202122",Ow="#a2a9b1",hq="#14866d",Sw="#d73333",vq="#f5b700",pq="#0093d3",xs={color:{primary:xw,secondary:Ow,tertiary:"#eef1f5",text:Ew,background:"#ffffff",success:hq,error:Sw,warning:vq,info:pq},spacing:{xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",pagePadding:"24px"},typography:{fontFamily:"'Helvetica Neue', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif",fontSize:"16px",lineHeight:"1.6"},layout:{pageMaxWidth:"1280px",containerPadding:"24px"},components:{button:{backgroundColor:"#ffffff",borderColor:Ow,textColor:Ew,borderRadius:"6px",padding:"10px 18px",fontSize:"16px",fontWeight:"500",borderWidth:"1px",borderStyle:"solid",transition:"all 0.2s ease-in-out",variants:{primary:{backgroundColor:xw,borderColor:xw,textColor:"#ffffff",states:{hover:{backgroundColor:"#2450a5",borderColor:"#2450a5"},focus:{boxShadow:"0 0 0 3px rgba(51, 102, 204, 0.3)",outline:"none"},active:{backgroundColor:"#1b3a7f",borderColor:"#1b3a7f"}}},secondary:{backgroundColor:"#ffffff",borderColor:Ow,textColor:Ew,states:{hover:{backgroundColor:"#f4f6f9",borderColor:"#8c939f"},focus:{boxShadow:"0 0 0 3px rgba(162, 169, 177, 0.35)",outline:"none"},active:{backgroundColor:"#e6e9ef",borderColor:"#7a828c"}}},danger:{backgroundColor:Sw,borderColor:Sw,textColor:"#ffffff",states:{hover:{backgroundColor:"#b02020",borderColor:"#b02020"},focus:{boxShadow:"0 0 0 3px rgba(215, 51, 51, 0.35)",outline:"none"},active:{backgroundColor:"#861616",borderColor:"#861616"}}}}},card:{backgroundColor:"#ffffff",borderColor:"#d5dae0",borderRadius:"8px",padding:"20px",boxShadow:"0 10px 30px rgba(18, 23, 40, 0.05)"},page:{backgroundColor:"#f8fafc"}}},gq="http://localhost:3000".replace(/\/$/,"");async function yq(r){if((r.headers.get("content-type")??"").includes("application/json"))try{const t=await r.json(),n=(t==null?void 0:t.error)??(t==null?void 0:t.message)??r.statusText;return new Error(n||`Request failed with status ${r.status}`)}catch{return new Error(r.statusText||`Request failed with status ${r.status}`)}try{const t=await r.text();if(t)return new Error(t)}catch{}return new Error(r.statusText||`Request failed with status ${r.status}`)}async function Iu(r,e={}){const t=await fetch(`${gq}${r}`,{credentials:"include",...e,headers:{Accept:"application/json, text/html;q=0.9, */*;q=0.8","Content-Type":"application/json",...e.headers??{}}});if(!t.ok)throw await yq(t);return t}async function mq(){const e=await(await Iu("/api/universes")).json();return(e==null?void 0:e.data)??[]}async function bq(r){const t=await(await Iu(`/api/universes/${encodeURIComponent(r)}`)).json();return t==null?void 0:t.data}async function _q(r){const t=await(await Iu(`/api/universes/${encodeURIComponent(r)}/entities`)).json();return(t==null?void 0:t.data)??[]}async function wq(r){const t=await(await Iu(`/api/universes/${encodeURIComponent(r)}/graph`)).json();return(t==null?void 0:t.data)??{nodes:[],relationships:[]}}async function xq(r){const t=await(await Iu(`/api/entities/${encodeURIComponent(r)}`)).json();return t==null?void 0:t.data}async function Eq(r){return(await Iu(`/universes/page/${encodeURIComponent(r)}/fragment`,{headers:{Accept:"text/html, application/json;q=0.9, */*;q=0.8"}})).text()}async function Oq(r){return await(await Iu("/universes/new",{method:"POST",body:JSON.stringify({name:r})})).json()}async function Sq(){return await(await Iu("/queue/stats")).json()}async function n3(r,e){return(await Iu("/content/create",{method:"POST",body:JSON.stringify({universeId:r,type:e})})).text()}var Cq=Object.defineProperty,Tq=(r,e,t)=>e in r?Cq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,fu=(r,e,t)=>Tq(r,typeof e!="symbol"?e+"":e,t);const Aq={route:{view:"home"},universes:[],universesLoaded:!1,universeDetails:{},universeCategories:{},categoryPages:{},universeGraphs:{},pages:{},queue:void 0,loading:{universes:!1,universe:!1,category:!1,page:!1,queue:!1,graph:!1},errors:{},modal:{open:!1,submitting:!1,error:void 0},lastContentHtml:void 0};class Pq{constructor(){fu(this,"state",Aq),fu(this,"listeners",new Set),fu(this,"navigator"),fu(this,"queuePollingHandle"),fu(this,"pendingUniverses",!1),fu(this,"pendingUniverseDetails",new Set),fu(this,"pendingUniverseCategories",new Set),fu(this,"pendingUniverseGraphs",new Set),fu(this,"pendingPageLoads",new Set)}initialize(){this.ensureDataForRoute(this.state.route)}subscribe(e){return this.listeners.add(e),e(this.state),()=>{this.listeners.delete(e)}}getState(){return this.state}bindNavigator(e){this.navigator=e}navigate(e,t){if(this.navigator){this.navigator(e,t);return}this.applyRoute(e)}setRouteFromRouter(e){this.applyRoute(e)}openUniverseModal(){this.patch({modal:{open:!0,submitting:!1,error:void 0}})}closeUniverseModal(){this.patch({modal:{open:!1,submitting:!1,error:void 0}})}async submitUniverse(e){var n;const t=e.trim();if(!t){this.patch({modal:{...this.state.modal,error:"Universe name is required."}});return}this.patch({modal:{...this.state.modal,submitting:!0,error:void 0}});try{const i=await Oq(t);return await this.loadUniverses(),this.patch({modal:{open:!1,submitting:!1,error:void 0}}),(n=i==null?void 0:i.universe)!=null&&n.id&&this.navigate({view:"universe",universeId:i.universe.id}),i}catch(i){this.patch({modal:{...this.state.modal,submitting:!1,error:i instanceof Error?i.message:String(i)}})}}refreshQueue(){this.loadQueueStats()}async queueContent(e,t){this.setError("category");try{const n=await n3(e,t);this.patch({lastContentHtml:n}),await this.hydrateUniverseCategories(e)}catch(n){this.setError("category",n instanceof Error?n.message:String(n))}}applyRoute(e){const t=this.state.route;this.patch({route:e}),e.view==="queue"?this.ensureQueuePolling():t.view==="queue"&&this.stopQueuePolling(),this.ensureDataForRoute(e)}ensureDataForRoute(e){if(!this.state.universesLoaded&&!this.pendingUniverses&&this.loadUniverses(),e.view==="universe"||e.view==="category"||e.view==="page"){const t=e.view==="page"?e.universeId??void 0:e.universeId;t&&(this.state.universeDetails[t]||this.loadUniverse(t),this.state.universeCategories[t]||this.hydrateUniverseCategories(t))}e.view==="category"&&this.ensureCategoryPages(e.universeId,e.categoryName),e.view==="page"&&(this.state.pages[e.pageId]||this.loadPage(e.pageId)),e.view==="queue"&&this.loadQueueStats()}async loadUniverses(){if(!this.pendingUniverses){this.pendingUniverses=!0,this.updateLoading("universes",!0),this.setError("universes");try{const e=await mq();this.patch({universes:e,universesLoaded:!0})}catch(e){this.patch({universesLoaded:!1}),this.setError("universes",e instanceof Error?e.message:String(e))}finally{this.pendingUniverses=!1,this.updateLoading("universes",!1)}}}async loadUniverse(e){if(!this.pendingUniverseDetails.has(e)){this.pendingUniverseDetails.add(e),this.updateLoading("universe",!0),this.setError("universe");try{const t=await bq(e);if(!t)throw new Error("Universe not found");this.patch({universeDetails:{...this.state.universeDetails,[e]:t}})}catch(t){this.setError("universe",t instanceof Error?t.message:String(t))}finally{this.pendingUniverseDetails.delete(e),this.updateLoading("universe",!1)}}}async hydrateUniverseCategories(e){if(!this.pendingUniverseCategories.has(e)){this.pendingUniverseCategories.add(e),this.updateLoading("category",!0);try{const t=await _q(e),n={...this.state.categoryPages};for(const i of t)n[this.getCategoryKey(e,i.category)]=i.pages??[];this.patch({universeCategories:{...this.state.universeCategories,[e]:t},categoryPages:n})}catch(t){this.setError("category",t instanceof Error?t.message:String(t))}finally{this.pendingUniverseCategories.delete(e),this.updateLoading("category",!1)}}}async ensureCategoryPages(e,t){const n=this.getCategoryKey(e,t);if(!this.state.categoryPages[n]){if(this.state.universeCategories[e]){const i=this.state.universeCategories[e].find(a=>a.category.toLowerCase()===t.toLowerCase());if(i){this.patch({categoryPages:{...this.state.categoryPages,[n]:i.pages??[]}});return}}await this.hydrateUniverseCategories(e)}}ensureUniverseGraph(e){e&&(this.state.universeGraphs[e]||this.loadUniverseGraph(e))}async loadUniverseGraph(e){if(!this.pendingUniverseGraphs.has(e)){this.pendingUniverseGraphs.add(e),this.updateLoading("graph",!0),this.setError("graph");try{const t=await wq(e);this.patch({universeGraphs:{...this.state.universeGraphs,[e]:t}})}catch(t){this.setError("graph",t instanceof Error?t.message:String(t))}finally{this.pendingUniverseGraphs.delete(e),this.updateLoading("graph",!1)}}}async loadPage(e){if(!this.pendingPageLoads.has(e)){this.pendingPageLoads.add(e),this.updateLoading("page",!0),this.setError("page");try{const[t,n]=await Promise.all([xq(e),Eq(e)]);this.patch({pages:{...this.state.pages,[e]:{metadata:t,html:n}}})}catch(t){this.setError("page",t instanceof Error?t.message:String(t))}finally{this.pendingPageLoads.delete(e),this.updateLoading("page",!1)}}}async loadQueueStats(){this.updateLoading("queue",!0),this.setError("queue");try{const e=await Sq();this.patch({queue:{...e,fetchedAt:Date.now()}})}catch(e){this.setError("queue",e instanceof Error?e.message:String(e))}finally{this.updateLoading("queue",!1)}}ensureQueuePolling(){this.queuePollingHandle||(this.loadQueueStats(),this.queuePollingHandle=window.setInterval(()=>{this.loadQueueStats()},5e3))}stopQueuePolling(){this.queuePollingHandle&&(window.clearInterval(this.queuePollingHandle),this.queuePollingHandle=void 0)}getCategoryKey(e,t){return`${e}::${t.toLowerCase()}`}updateLoading(e,t){this.patch({loading:{...this.state.loading,[e]:t}})}setError(e,t){const n={...this.state.errors};t?n[e]=t:delete n[e],this.patch({errors:n})}patch(e){this.state={...this.state,...e},this.notify()}notify(){for(const e of this.listeners)e(this.state)}}const gr=new Pq;function np(r){if(r)try{return decodeURIComponent(r)}catch(e){return console.warn("Failed to decode route segment",r,e),r}}function i3(r=window.location){const t=r.pathname.replace(/\/+$/,"").split("/").filter(Boolean);if(t.length===0)return{view:"home"};if(t[0]==="universes")return{view:"universes"};if(t[0]==="queue")return{view:"queue"};if(t[0]==="help")return{view:"help"};if(t[0]==="universe"&&t[1]){const n=np(t[1])??t[1];return t[2]==="category"&&t[3]?{view:"category",universeId:n,categoryName:np(t[3])??t[3]}:{view:"universe",universeId:n}}if(t[0]==="page"&&t[1]){const n=r.search?new URLSearchParams(r.search):null,i=(n==null?void 0:n.get("universe"))??void 0,a=(n==null?void 0:n.get("category"))??void 0;return{view:"page",pageId:np(t[1])??t[1],universeId:i?np(i):void 0,categoryName:a?np(a):void 0}}return{view:"home"}}function Rq(r){switch(r.view){case"home":return"/";case"universes":return"/universes";case"queue":return"/queue";case"help":return"/help";case"universe":return`/universe/${encodeURIComponent(r.universeId)}`;case"category":return`/universe/${encodeURIComponent(r.universeId)}/category/${encodeURIComponent(r.categoryName)}`;case"page":{const e=`/page/${encodeURIComponent(r.pageId)}`,t=new URLSearchParams;r.universeId&&t.set("universe",r.universeId),r.categoryName&&t.set("category",r.categoryName);const n=t.toString();return n?`${e}?${n}`:e}default:return"/"}}var kq=Object.defineProperty,Iq=(r,e,t)=>e in r?kq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,km=(r,e,t)=>Iq(r,typeof e!="symbol"?e+"":e,t);class Dq extends HTMLElement{constructor(){super(...arguments),km(this,"unsubscribe"),km(this,"state",null),km(this,"handleCreateClick",()=>{gr.openUniverseModal()}),km(this,"handleBrowseClick",()=>{gr.navigate({view:"universes"})})}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}render(){var n;if(!this.shadowRoot)return;(n=this.state)==null||n.universes.length,this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        .hero {
          background: linear-gradient(135deg, rgba(51, 102, 204, 0.12), rgba(9, 45, 125, 0.08));
          border-radius: 16px;
          padding: 48px 40px;
          color: #202122;
          box-shadow: 0 20px 60px rgba(23, 43, 77, 0.08);
        }

        .hero h1 {
          margin: 0 0 16px 0;
          font-size: 36px;
          line-height: 1.2;
        }

        .hero p {
          margin: 0 0 32px 0;
          font-size: 18px;
          color: rgba(32, 33, 34, 0.78);
          max-width: 720px;
        }

        .hero-actions {
          display: flex;
          flex-wrap: wrap;
          gap: 16px;
        }

        .metrics {
          margin-top: 40px;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
          gap: 16px;
        }

        .metric-card {
          background: #ffffff;
          border-radius: 12px;
          padding: 24px;
          box-shadow: 0 10px 30px rgba(18, 23, 40, 0.08);
        }

        .metric-card h3 {
          margin: 0;
          font-size: 32px;
          color: #3366cc;
        }

        .metric-card p {
          margin: 8px 0 0 0;
          font-size: 14px;
          color: rgba(32, 33, 34, 0.68);
        }

        .feature-grid {
          margin-top: 48px;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
          gap: 20px;
        }

        .feature-card {
          background: #ffffff;
          border-radius: 12px;
          padding: 24px;
          border: 1px solid rgba(162, 169, 177, 0.28);
          box-shadow: 0 12px 32px rgba(18, 23, 40, 0.06);
        }

        .feature-card h4 {
          margin: 0 0 12px 0;
          font-size: 20px;
        }

        .feature-card p {
          margin: 0;
          font-size: 15px;
          color: rgba(32, 33, 34, 0.72);
          line-height: 1.6;
        }

        @media (max-width: 640px) {
          .hero {
            padding: 32px 24px;
          }

          .hero h1 {
            font-size: 28px;
          }
        }
      </style>
      <section>
        <div class="hero">
          <h1>Canon</h1>
          <p>
            Compose entire fictional universes with shared lore, rich geography, and
            interconnected cultures.
          </p>
          <div class="hero-actions">
            <ds-button variant="primary" id="create-btn">Create a universe</ds-button>
            <ds-button variant="secondary" id="browse-btn">Browse existing universes</ds-button>
          </div>
        </div>
        <div class="feature-grid">
          <div class="feature-card">
            <h4>Build living worlds</h4>
            <p>
              Sketch continents, space stations, or hidden dimensions with spatial anchors and
              relationships that keep every location grounded in shared lore.
            </p>
          </div>
          <div class="feature-card">
            <h4>Create unforgettable characters</h4>
            <p>
              Define motivations, lineages, and alliances so your protagonists and villains stay
              connected to the worlds they inhabit.
            </p>
          </div>
          <div class="feature-card">
            <h4>Shape evolving societies</h4>
            <p>
              Capture cultures, factions, and rituals to explain how communities rise, clash, and
              cooperate across your universe.
            </p>
          </div>
        </div>
      </section>
    `;const e=this.shadowRoot.querySelector("#create-btn"),t=this.shadowRoot.querySelector("#browse-btn");e&&(e.onclick=this.handleCreateClick),t&&(t.onclick=this.handleBrowseClick)}}customElements.get("canon-home")||customElements.define("canon-home",Dq);var Mq=Object.defineProperty,Lq=(r,e,t)=>e in r?Mq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Cw=(r,e,t)=>Lq(r,typeof e!="symbol"?e+"":e,t);class Nq extends HTMLElement{constructor(){super(...arguments),Cw(this,"unsubscribe"),Cw(this,"state",null),Cw(this,"handleCreateClick",()=>{gr.openUniverseModal()})}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}navigate(e){gr.navigate(e)}render(){var i,a;if(!this.shadowRoot)return;const e=(i=this.state)==null?void 0:i.route,t=this.getSelectedUniverseId(e),n=((a=this.state)==null?void 0:a.universes)??[];this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        .sidebar {
          background: #ffffff;
          border-radius: 16px;
          border: 1px solid rgba(162, 169, 177, 0.3);
          padding: 24px;
          box-shadow: 0 16px 36px rgba(18, 23, 40, 0.08);
          position: sticky;
          top: 24px;
        }

        h2 {
          margin: 0 0 16px 0;
          font-size: 18px;
        }

        nav ul {
          list-style: none;
          margin: 0 0 16px 0;
          padding: 0;
          display: grid;
          gap: 8px;
        }

        nav button {
          width: 100%;
          text-align: left;
          border: none;
          background: transparent;
          font: inherit;
          color: #202122;
          padding: 10px 12px;
          border-radius: 8px;
          cursor: pointer;
          transition: background 0.2s ease, color 0.2s ease;
        }

        nav button:hover {
          background: rgba(51, 102, 204, 0.1);
        }

        nav button[data-active="true"] {
          background: #3366cc;
          color: #ffffff;
        }

        .universes-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin: 24px 0 12px 0;
        }

        .universes-header h3 {
          margin: 0;
          font-size: 16px;
        }

        .universes-list {
          display: grid;
          gap: 4px;
          max-height: 320px;
          overflow-y: auto;
        }

        .empty-state {
          font-size: 14px;
          color: rgba(32, 33, 34, 0.65);
          padding: 12px 0;
        }

        .action {
          margin-top: 16px;
        }
      </style>
      <aside class="sidebar">
        <header>
          <h2>Navigation</h2>
        </header>
        <nav>
          <ul>
            <li>
              <button type="button" data-view="home">Home</button>
            </li>
            <li>
              <button type="button" data-view="universes">Universe catalog</button>
            </li>
            <li>
              <button type="button" data-view="queue">Queue dashboard</button>
            </li>
            <li>
              <button type="button" data-view="help">Help & docs</button>
            </li>
          </ul>
        </nav>
        <div class="universes">
          <div class="universes-header">
            <h3>Universes</h3>
            <ds-button variant="secondary" id="create-btn">New</ds-button>
          </div>
          <div class="universes-list">
            ${n.map(o=>`
                <button
                  type="button"
                  data-universe="${o.id}"
                  data-active="${t===o.id}"
                >
                  ${o.name}
                </button>
              `).join("")||'<div class="empty-state">No universes yet</div>'}
          </div>
        </div>
      </aside>
    `,this.bindEvents(e)}bindEvents(e){if(!this.shadowRoot)return;const t=Array.from(this.shadowRoot.querySelectorAll("nav button[data-view]"));for(const a of t){const o=a.getAttribute("data-view");o&&(a.dataset.active=this.isViewActive(o,e)?"true":"false",a.onclick=()=>{switch(o){case"home":this.navigate({view:"home"});break;case"universes":this.navigate({view:"universes"});break;case"queue":this.navigate({view:"queue"});break;case"help":this.navigate({view:"help"});break}})}const n=this.shadowRoot.querySelector("#create-btn");n&&(n.onclick=this.handleCreateClick);const i=Array.from(this.shadowRoot.querySelectorAll(".universes-list button[data-universe]"));for(const a of i){const o=a.getAttribute("data-universe");o&&(a.onclick=()=>{this.navigate({view:"universe",universeId:o})})}}getSelectedUniverseId(e){if(e){if(e.view==="universe"||e.view==="category")return e.universeId;if(e.view==="page")return e.universeId??void 0}}isViewActive(e,t){if(!t)return!1;switch(e){case"home":return t.view==="home";case"universes":return t.view==="universes";case"queue":return t.view==="queue";case"help":return t.view==="help";default:return!1}}}customElements.get("canon-universe-sidebar")||customElements.define("canon-universe-sidebar",Nq);var jq=Object.defineProperty,Fq=(r,e,t)=>e in r?jq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Tw=(r,e,t)=>Fq(r,typeof e!="symbol"?e+"":e,t);class Bq extends HTMLElement{constructor(){super(...arguments),Tw(this,"unsubscribe"),Tw(this,"state",null),Tw(this,"handleCreateClick",()=>{gr.openUniverseModal()})}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}navigateToUniverse(e){gr.navigate({view:"universe",universeId:e.id})}render(){if(!this.shadowRoot||!this.state)return;const{loading:e,errors:t,universes:n}=this.state;this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        header {
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          justify-content: space-between;
          gap: 16px;
          margin-bottom: 24px;
        }

        h1 {
          margin: 0;
          font-size: 28px;
        }

        .grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 20px;
        }

        .card {
          background: #ffffff;
          border-radius: 16px;
          padding: 24px;
          border: 1px solid rgba(162, 169, 177, 0.28);
          box-shadow: 0 12px 34px rgba(18, 23, 40, 0.08);
          display: flex;
          flex-direction: column;
          gap: 12px;
        }

        .card h2 {
          margin: 0;
          font-size: 20px;
        }

        .card p {
          margin: 0;
          color: rgba(32, 33, 34, 0.7);
          line-height: 1.6;
        }

        .meta {
          font-size: 13px;
          color: rgba(32, 33, 34, 0.55);
        }

        .loading,
        .error,
        .empty {
          padding: 32px;
          border-radius: 12px;
          text-align: center;
          background: rgba(51, 102, 204, 0.08);
          color: #202122;
        }

        .error {
          background: rgba(215, 51, 51, 0.12);
          color: #861616;
        }

        .empty {
          background: rgba(20, 134, 109, 0.1);
          color: #0b6952;
        }
      </style>
      <section>
        <header>
          <div>
            <h1>Universe catalog</h1>
            <p class="meta">Browse every universe that Canon has indexed.</p>
          </div>
          <ds-button variant="primary" id="create-btn">Create universe</ds-button>
        </header>
        ${e.universes?'<div class="loading">Loading universes…</div>':t.universes?`<div class="error">${t.universes}</div>`:n.length===0?'<div class="empty">Start by creating your first universe.</div>':`<div class="grid">${n.map(o=>this.renderUniverseCard(o)).join("")}</div>`}
      </section>
    `;const i=this.shadowRoot.querySelector("#create-btn");i&&(i.onclick=this.handleCreateClick),this.shadowRoot.querySelectorAll("ds-button[data-universe]").forEach(o=>{const s=o.getAttribute("data-universe");s&&(o.onclick=()=>{const u=n.find(l=>l.id===s);u&&this.navigateToUniverse(u)})})}renderUniverseCard(e){const t=typeof e.createdAt=="number"?new Date(e.createdAt).toLocaleDateString():void 0;return`
      <div class="card">
        <h2>${e.name}</h2>
        <p>${e.description||"No description yet."}</p>
        <div class="meta">${t?`Created ${t}`:"Creation date unavailable"}</div>
        <div>
          <ds-button variant="secondary" data-universe="${e.id}">
            View details
          </ds-button>
        </div>
      </div>
    `}}customElements.get("canon-universe-list")||customElements.define("canon-universe-list",Bq);function RC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Uq(r){if(Array.isArray(r))return r}function zq(r){if(Array.isArray(r))return RC(r)}function nc(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qq(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,o3(n.key),n)}}function ic(r,e,t){return e&&qq(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Sa(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=X2(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function a3(r,e,t){return(e=o3(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Gq(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Vq(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,i,a,o,s=[],u=!0,l=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=a.call(t)).done)&&(s.push(n.value),s.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}function $q(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hn(r,e){return Uq(r)||Vq(r,e)||X2(r,e)||$q()}function qb(r){return zq(r)||Gq(r)||X2(r)||Wq()}function Hq(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function o3(r){var e=Hq(r,"string");return typeof e=="symbol"?e:e+""}function ei(r){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ei(r)}function X2(r,e){if(r){if(typeof r=="string")return RC(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?RC(r,e):void 0}}var Zn=typeof window>"u"?null:window,fP=Zn?Zn.navigator:null;Zn&&Zn.document;var Yq=ei(""),s3=ei({}),Xq=ei(function(){}),Kq=typeof HTMLElement>"u"?"undefined":ei(HTMLElement),Gg=function(e){return e&&e.instanceString&&Sn(e.instanceString)?e.instanceString():null},Tt=function(e){return e!=null&&ei(e)==Yq},Sn=function(e){return e!=null&&ei(e)===Xq},Kr=function(e){return!Ha(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Pr=function(e){return e!=null&&ei(e)===s3&&!Kr(e)&&e.constructor===Object},Zq=function(e){return e!=null&&ei(e)===s3},at=function(e){return e!=null&&ei(e)===ei(1)&&!isNaN(e)},Qq=function(e){return at(e)&&Math.floor(e)===e},Gb=function(e){if(Kq!=="undefined")return e!=null&&e instanceof HTMLElement},Ha=function(e){return Vg(e)||u3(e)},Vg=function(e){return Gg(e)==="collection"&&e._private.single},u3=function(e){return Gg(e)==="collection"&&!e._private.single},K2=function(e){return Gg(e)==="core"},l3=function(e){return Gg(e)==="stylesheet"},Jq=function(e){return Gg(e)==="event"},Wl=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},e9=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},t9=function(e){return Pr(e)&&at(e.x1)&&at(e.x2)&&at(e.y1)&&at(e.y2)},r9=function(e){return Zq(e)&&Sn(e.then)},n9=function(){return fP&&fP.userAgent.match(/msie|trident|edge/i)},Ih=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);return a.join("$")});var n=function(){var a=this,o=arguments,s,u=t.apply(a,o),l=n.cache;return(s=l[u])||(s=l[u]=e.apply(a,o)),s};return n.cache={},n},Z2=Ih(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),x0=Ih(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),c3=Ih(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),dP=function(e){return Wl(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},kl=function(e,t){return e.slice(-1*t.length)===t},Qn="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",i9="rgb[a]?\\(("+Qn+"[%]?)\\s*,\\s*("+Qn+"[%]?)\\s*,\\s*("+Qn+"[%]?)(?:\\s*,\\s*("+Qn+"))?\\)",a9="rgb[a]?\\((?:"+Qn+"[%]?)\\s*,\\s*(?:"+Qn+"[%]?)\\s*,\\s*(?:"+Qn+"[%]?)(?:\\s*,\\s*(?:"+Qn+"))?\\)",o9="hsl[a]?\\(("+Qn+")\\s*,\\s*("+Qn+"[%])\\s*,\\s*("+Qn+"[%])(?:\\s*,\\s*("+Qn+"))?\\)",s9="hsl[a]?\\((?:"+Qn+")\\s*,\\s*(?:"+Qn+"[%])\\s*,\\s*(?:"+Qn+"[%])(?:\\s*,\\s*(?:"+Qn+"))?\\)",u9="\\#[0-9a-fA-F]{3}",l9="\\#[0-9a-fA-F]{6}",f3=function(e,t){return e<t?-1:e>t?1:0},c9=function(e,t){return-1*f3(e,t)},jt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];r[o]=n[o]}}return r},f9=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,i,a,o=16;return t?(n=parseInt(e[1]+e[1],o),i=parseInt(e[2]+e[2],o),a=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),i=parseInt(e[3]+e[4],o),a=parseInt(e[5]+e[6],o)),[n,i,a]}},d9=function(e){var t,n,i,a,o,s,u,l;function c(v,p,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?v+(p-v)*6*g:g<1/2?p:g<2/3?v+(p-v)*(2/3-g)*6:v}var f=new RegExp("^"+o9+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,i=parseFloat(f[2]),i<0||i>100||(i=i/100,a=parseFloat(f[3]),a<0||a>100)||(a=a/100,o=f[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(i===0)s=u=l=Math.round(a*255);else{var d=a<.5?a*(1+i):a+i-a*i,h=2*a-d;s=Math.round(255*c(h,d,n+1/3)),u=Math.round(255*c(h,d,n)),l=Math.round(255*c(h,d,n-1/3))}t=[s,u,l,o]}return t},h9=function(e){var t,n=new RegExp("^"+i9+"$").exec(e);if(n){t=[];for(var i=[],a=1;a<=3;a++){var o=n[a];if(o[o.length-1]==="%"&&(i[a]=!0),o=parseFloat(o),i[a]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=i[1]||i[2]||i[3],u=i[1]&&i[2]&&i[3];if(s&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},v9=function(e){return p9[e.toLowerCase()]},d3=function(e){return(Kr(e)?e:null)||v9(e)||f9(e)||h9(e)||d9(e)},p9={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},h3=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(Pr(o))throw Error("Tried to set map with object key");a<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},v3=function(e){for(var t=e.map,n=e.keys,i=n.length,a=0;a<i;a++){var o=n[a];if(Pr(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t},Im=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $g(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Aw,hP;function Wg(){if(hP)return Aw;hP=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Aw=r,Aw}var Pw,vP;function g9(){if(vP)return Pw;vP=1;var r=typeof Im=="object"&&Im&&Im.Object===Object&&Im;return Pw=r,Pw}var Rw,pP;function E0(){if(pP)return Rw;pP=1;var r=g9(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Rw=t,Rw}var kw,gP;function y9(){if(gP)return kw;gP=1;var r=E0(),e=function(){return r.Date.now()};return kw=e,kw}var Iw,yP;function m9(){if(yP)return Iw;yP=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Iw=e,Iw}var Dw,mP;function b9(){if(mP)return Dw;mP=1;var r=m9(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Dw=t,Dw}var Mw,bP;function Q2(){if(bP)return Mw;bP=1;var r=E0(),e=r.Symbol;return Mw=e,Mw}var Lw,_P;function _9(){if(_P)return Lw;_P=1;var r=Q2(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(o){var s=t.call(o,i),u=o[i];try{o[i]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(s?o[i]=u:delete o[i]),c}return Lw=a,Lw}var Nw,wP;function w9(){if(wP)return Nw;wP=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Nw=t,Nw}var jw,xP;function p3(){if(xP)return jw;xP=1;var r=Q2(),e=_9(),t=w9(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function o(s){return s==null?s===void 0?i:n:a&&a in Object(s)?e(s):t(s)}return jw=o,jw}var Fw,EP;function x9(){if(EP)return Fw;EP=1;function r(e){return e!=null&&typeof e=="object"}return Fw=r,Fw}var Bw,OP;function Hg(){if(OP)return Bw;OP=1;var r=p3(),e=x9(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return Bw=n,Bw}var Uw,SP;function E9(){if(SP)return Uw;SP=1;var r=b9(),e=Wg(),t=Hg(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=a.test(l);return f||o.test(l)?s(l.slice(2),f?2:8):i.test(l)?n:+l}return Uw=u,Uw}var zw,CP;function O9(){if(CP)return zw;CP=1;var r=Wg(),e=y9(),t=E9(),n="Expected a function",i=Math.max,a=Math.min;function o(s,u,l){var c,f,d,h,v,p,g=0,y=!1,b=!1,m=!0;if(typeof s!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(y=!!l.leading,b="maxWait"in l,d=b?i(t(l.maxWait)||0,u):d,m="trailing"in l?!!l.trailing:m);function _(M){var N=c,F=f;return c=f=void 0,g=M,h=s.apply(F,N),h}function x(M){return g=M,v=setTimeout(O,u),y?_(M):h}function C(M){var N=M-p,F=M-g,z=u-N;return b?a(z,d-F):z}function w(M){var N=M-p,F=M-g;return p===void 0||N>=u||N<0||b&&F>=d}function O(){var M=e();if(w(M))return A(M);v=setTimeout(O,C(M))}function A(M){return v=void 0,m&&c?_(M):(c=f=void 0,h)}function k(){v!==void 0&&clearTimeout(v),g=0,c=p=f=v=void 0}function R(){return v===void 0?h:A(e())}function I(){var M=e(),N=w(M);if(c=arguments,f=this,p=M,N){if(v===void 0)return x(p);if(b)return clearTimeout(v),v=setTimeout(O,u),_(p)}return v===void 0&&(v=setTimeout(O,u)),h}return I.cancel=k,I.flush=R,I}return zw=o,zw}var S9=O9(),Yg=$g(S9),qw=Zn?Zn.performance:null,g3=qw&&qw.now?function(){return qw.now()}:function(){return Date.now()},C9=function(){if(Zn){if(Zn.requestAnimationFrame)return function(r){Zn.requestAnimationFrame(r)};if(Zn.mozRequestAnimationFrame)return function(r){Zn.mozRequestAnimationFrame(r)};if(Zn.webkitRequestAnimationFrame)return function(r){Zn.webkitRequestAnimationFrame(r)};if(Zn.msRequestAnimationFrame)return function(r){Zn.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(g3())},1e3/60)}}(),Vb=function(e){return C9(e)},Tu=g3,ff=9261,y3=65599,hh=5381,m3=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ff,n=t,i;i=e.next(),!i.done;)n=n*y3+i.value|0;return n},xg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ff;return t*y3+e|0},Eg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hh;return(t<<5)+t+e|0},T9=function(e,t){return e*2097152+t},gl=function(e){return e[0]*2097152+e[1]},Dm=function(e,t){return[xg(e[0],t[0]),Eg(e[1],t[1])]},TP=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e[i++]:n.done=!0,n}};return m3(o,t)},_f=function(e,t){var n={value:0,done:!1},i=0,a=e.length,o={next:function(){return i<a?n.value=e.charCodeAt(i++):n.done=!0,n}};return m3(o,t)},b3=function(){return A9(arguments)},A9=function(e){for(var t,n=0;n<e.length;n++){var i=e[n];n===0?t=_f(i):t=_f(i,t)}return t};function P9(r,e,t,n,i){var a=i*Math.PI/180,o=Math.cos(a)*(r-t)-Math.sin(a)*(e-n)+t,s=Math.sin(a)*(r-t)+Math.cos(a)*(e-n)+n;return{x:o,y:s}}var R9=function(e,t,n,i,a,o){return{x:(e-n)*a+n,y:(t-i)*o+i}};function k9(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,i=(e.y1+e.y2)/2,a=e.w/e.h,o=1/a,s=P9(r.x,r.y,n,i,t),u=R9(s.x,s.y,n,i,a,o);return{x:u.x,y:u.y}}var AP=!0,I9=console.warn!=null,D9=console.trace!=null,J2=Number.MAX_SAFE_INTEGER||9007199254740991,_3=function(){return!0},$b=function(){return!1},PP=function(){return 0},eT=function(){},pn=function(e){throw new Error(e)},w3=function(e){if(e!==void 0)AP=!!e;else return AP},Gr=function(e){w3()&&(I9?console.warn(e):(console.log(e),D9&&console.trace()))},M9=function(e){return jt({},e)},Is=function(e){return e==null?e:Kr(e)?e.slice():Pr(e)?M9(e):e},L9=function(e){return e.slice()},x3=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},N9={},E3=function(){return N9},Ri=function(e){var t=Object.keys(e);return function(n){for(var i={},a=0;a<t.length;a++){var o=t[a],s=n==null?void 0:n[o];i[o]=s===void 0?e[o]:s}return i}},Hl=function(e,t,n){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1)},tT=function(e){e.splice(0,e.length)},j9=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];e.push(i)}},xa=function(e,t,n){return n&&(t=c3(n,t)),e[t]},yu=function(e,t,n,i){n&&(t=c3(n,t)),e[t]=i},F9=function(){function r(){nc(this,r),this._obj={}}return ic(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])}(),bu=typeof Map<"u"?Map:F9,B9="undefined",U9=function(){function r(e){if(nc(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return ic(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])}(),qh=(typeof Set>"u"?"undefined":ei(Set))!==B9?Set:U9,O0=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!K2(e)){pn("An element must have a core reference and parameters set");return}var i=t.group;if(i==null&&(t.data&&t.data.source!=null&&t.data.target!=null?i="edges":i="nodes"),i!=="nodes"&&i!=="edges"){pn("An element must be of type `nodes` or `edges`; you specified `"+i+"`");return}this.length=1,this[0]=this;var a=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:i,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?i==="edges":!!t.pannable,active:!1,classes:new qh,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(a.position.x==null&&(a.position.x=0),a.position.y==null&&(a.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),u=e.zoom();a.position={x:(o.x-s.x)/u,y:(o.y-s.y)/u}}var l=[];Kr(t.classes)?l=t.classes:Tt(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var d=l[c];!d||d===""||a.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var h=t.style||t.css;h&&(Gr("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},RP=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,i,a){var o;Pr(n)&&!Ha(n)&&(o=n,n=o.roots||o.root,i=o.visit,a=o.directed),a=arguments.length===2&&!Sn(i)?i:a,i=Sn(i)?i:function(){};for(var s=this._private.cy,u=n=Tt(n)?this.filter(n):n,l=[],c=[],f={},d={},h={},v=0,p,g=this.byGroup(),y=g.nodes,b=g.edges,m=0;m<u.length;m++){var _=u[m],x=_.id();_.isNode()&&(l.unshift(_),e.bfs&&(h[x]=!0,c.push(_)),d[x]=0)}for(var C=function(){var M=e.bfs?l.shift():l.pop(),N=M.id();if(e.dfs){if(h[N])return 0;h[N]=!0,c.push(M)}var F=d[N],z=f[N],B=z!=null?z.source():null,U=z!=null?z.target():null,W=z==null?void 0:M.same(B)?U[0]:B[0],Y;if(Y=i(M,z,W,v++,F),Y===!0)return p=M,1;if(Y===!1)return 1;for(var H=M.connectedEdges().filter(function(ge){return(!a||ge.source().same(M))&&b.has(ge)}),J=0;J<H.length;J++){var le=H[J],fe=le.connectedNodes().filter(function(ge){return!ge.same(M)&&y.has(ge)}),ue=fe.id();fe.length!==0&&!h[ue]&&(fe=fe[0],l.push(fe),e.bfs&&(h[ue]=!0,c.push(fe)),f[ue]=le,d[ue]=d[N]+1)}},w;l.length!==0&&(w=C(),!(w!==0&&w===1)););for(var O=s.collection(),A=0;A<c.length;A++){var k=c[A],R=f[k.id()];R!=null&&O.push(R),O.push(k)}return{path:s.collection(O),found:s.collection(p)}}},Og={breadthFirstSearch:RP({bfs:!0}),depthFirstSearch:RP({dfs:!0})};Og.bfs=Og.breadthFirstSearch;Og.dfs=Og.depthFirstSearch;var xb={exports:{}},z9=xb.exports,kP;function q9(){return kP||(kP=1,function(r,e){(function(){var t,n,i,a,o,s,u,l,c,f,d,h,v,p,g;i=Math.floor,f=Math.min,n=function(y,b){return y<b?-1:y>b?1:0},c=function(y,b,m,_,x){var C;if(m==null&&(m=0),x==null&&(x=n),m<0)throw new Error("lo must be non-negative");for(_==null&&(_=y.length);m<_;)C=i((m+_)/2),x(b,y[C])<0?_=C:m=C+1;return[].splice.apply(y,[m,m-m].concat(b)),b},s=function(y,b,m){return m==null&&(m=n),y.push(b),p(y,0,y.length-1,m)},o=function(y,b){var m,_;return b==null&&(b=n),m=y.pop(),y.length?(_=y[0],y[0]=m,g(y,0,b)):_=m,_},l=function(y,b,m){var _;return m==null&&(m=n),_=y[0],y[0]=b,g(y,0,m),_},u=function(y,b,m){var _;return m==null&&(m=n),y.length&&m(y[0],b)<0&&(_=[y[0],b],b=_[0],y[0]=_[1],g(y,0,m)),b},a=function(y,b){var m,_,x,C,w,O;for(b==null&&(b=n),C=(function(){O=[];for(var A=0,k=i(y.length/2);0<=k?A<k:A>k;0<=k?A++:A--)O.push(A);return O}).apply(this).reverse(),w=[],_=0,x=C.length;_<x;_++)m=C[_],w.push(g(y,m,b));return w},v=function(y,b,m){var _;if(m==null&&(m=n),_=y.indexOf(b),_!==-1)return p(y,0,_,m),g(y,_,m)},d=function(y,b,m){var _,x,C,w,O;if(m==null&&(m=n),x=y.slice(0,b),!x.length)return x;for(a(x,m),O=y.slice(b),C=0,w=O.length;C<w;C++)_=O[C],u(x,_,m);return x.sort(m).reverse()},h=function(y,b,m){var _,x,C,w,O,A,k,R,I;if(m==null&&(m=n),b*10<=y.length){if(C=y.slice(0,b).sort(m),!C.length)return C;for(x=C[C.length-1],k=y.slice(b),w=0,A=k.length;w<A;w++)_=k[w],m(_,x)<0&&(c(C,_,0,null,m),C.pop(),x=C[C.length-1]);return C}for(a(y,m),I=[],O=0,R=f(b,y.length);0<=R?O<R:O>R;0<=R?++O:--O)I.push(o(y,m));return I},p=function(y,b,m,_){var x,C,w;for(_==null&&(_=n),x=y[m];m>b;){if(w=m-1>>1,C=y[w],_(x,C)<0){y[m]=C,m=w;continue}break}return y[m]=x},g=function(y,b,m){var _,x,C,w,O;for(m==null&&(m=n),x=y.length,O=b,C=y[b],_=2*b+1;_<x;)w=_+1,w<x&&!(m(y[_],y[w])<0)&&(_=w),y[b]=y[_],b=_,_=2*b+1;return y[b]=C,p(y,O,b,m)},t=function(){y.push=s,y.pop=o,y.replace=l,y.pushpop=u,y.heapify=a,y.updateItem=v,y.nlargest=d,y.nsmallest=h;function y(b){this.cmp=b??n,this.nodes=[]}return y.prototype.push=function(b){return s(this.nodes,b,this.cmp)},y.prototype.pop=function(){return o(this.nodes,this.cmp)},y.prototype.peek=function(){return this.nodes[0]},y.prototype.contains=function(b){return this.nodes.indexOf(b)!==-1},y.prototype.replace=function(b){return l(this.nodes,b,this.cmp)},y.prototype.pushpop=function(b){return u(this.nodes,b,this.cmp)},y.prototype.heapify=function(){return a(this.nodes,this.cmp)},y.prototype.updateItem=function(b){return v(this.nodes,b,this.cmp)},y.prototype.clear=function(){return this.nodes=[]},y.prototype.empty=function(){return this.nodes.length===0},y.prototype.size=function(){return this.nodes.length},y.prototype.clone=function(){var b;return b=new y,b.nodes=this.nodes.slice(0),b},y.prototype.toArray=function(){return this.nodes.slice(0)},y.prototype.insert=y.prototype.push,y.prototype.top=y.prototype.peek,y.prototype.front=y.prototype.peek,y.prototype.has=y.prototype.contains,y.prototype.copy=y.prototype.clone,y}(),function(y,b){return r.exports=b()}(this,function(){return t})}).call(z9)}(xb)),xb.exports}var Gw,IP;function G9(){return IP||(IP=1,Gw=q9()),Gw}var V9=G9(),Xg=$g(V9),$9=Ri({root:null,weight:function(e){return 1},directed:!1}),W9={dijkstra:function(e){if(!Pr(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=$9(e),i=n.root,a=n.weight,o=n.directed,s=this,u=a,l=Tt(i)?this.filter(i)[0]:i[0],c={},f={},d={},h=this.byGroup(),v=h.nodes,p=h.edges;p.unmergeBy(function(F){return F.isLoop()});for(var g=function(z){return c[z.id()]},y=function(z,B){c[z.id()]=B,b.updateItem(z)},b=new Xg(function(F,z){return g(F)-g(z)}),m=0;m<v.length;m++){var _=v[m];c[_.id()]=_.same(l)?0:1/0,b.push(_)}for(var x=function(z,B){for(var U=(o?z.edgesTo(B):z.edgesWith(B)).intersect(p),W=1/0,Y,H=0;H<U.length;H++){var J=U[H],le=u(J);(le<W||!Y)&&(W=le,Y=J)}return{edge:Y,dist:W}};b.size()>0;){var C=b.pop(),w=g(C),O=C.id();if(d[O]=w,w!==1/0)for(var A=C.neighborhood().intersect(v),k=0;k<A.length;k++){var R=A[k],I=R.id(),M=x(C,R),N=w+M.dist;N<g(R)&&(y(R,N),f[I]={node:C,edge:M.edge})}}return{distanceTo:function(z){var B=Tt(z)?v.filter(z)[0]:z[0];return d[B.id()]},pathTo:function(z){var B=Tt(z)?v.filter(z)[0]:z[0],U=[],W=B,Y=W.id();if(B.length>0)for(U.unshift(B);f[Y];){var H=f[Y];U.unshift(H.edge),U.unshift(H.node),W=H.node,Y=W.id()}return s.spawn(U)}}}},H9={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,i=t.edges,a=n.length,o=new Array(a),s=n,u=function(_){for(var x=0;x<o.length;x++){var C=o[x];if(C.has(_))return x}},l=0;l<a;l++)o[l]=this.spawn(n[l]);for(var c=i.sort(function(m,_){return e(m)-e(_)}),f=0;f<c.length;f++){var d=c[f],h=d.source()[0],v=d.target()[0],p=u(h),g=u(v),y=o[p],b=o[g];p!==g&&(s.merge(d),y.merge(b),o.splice(g,1))}return s}},Y9=Ri({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),X9={aStar:function(e){var t=this.cy(),n=Y9(e),i=n.root,a=n.goal,o=n.heuristic,s=n.directed,u=n.weight;i=t.collection(i)[0],a=t.collection(a)[0];var l=i.id(),c=a.id(),f={},d={},h={},v=new Xg(function(Y,H){return d[Y.id()]-d[H.id()]}),p=new qh,g={},y={},b=function(H,J){v.push(H),p.add(J)},m,_,x=function(){m=v.pop(),_=m.id(),p.delete(_)},C=function(H){return p.has(H)};b(i,l),f[l]=0,d[l]=o(i);for(var w=0;v.size()>0;){if(x(),w++,_===c){for(var O=[],A=a,k=c,R=y[k];O.unshift(A),R!=null&&O.unshift(R),A=g[k],A!=null;)k=A.id(),R=y[k];return{found:!0,distance:f[_],path:this.spawn(O),steps:w}}h[_]=!0;for(var I=m._private.edges,M=0;M<I.length;M++){var N=I[M];if(this.hasElementWithId(N.id())&&!(s&&N.data("source")!==_)){var F=N.source(),z=N.target(),B=F.id()!==_?F:z,U=B.id();if(this.hasElementWithId(U)&&!h[U]){var W=f[_]+u(N);if(!C(U)){f[U]=W,d[U]=W+o(B),b(B,U),g[U]=m,y[U]=N;continue}W<f[U]&&(f[U]=W,d[U]=W+o(B),g[U]=m,y[U]=N)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},K9=Ri({weight:function(e){return 1},directed:!1}),Z9={floydWarshall:function(e){for(var t=this.cy(),n=K9(e),i=n.weight,a=n.directed,o=i,s=this.byGroup(),u=s.nodes,l=s.edges,c=u.length,f=c*c,d=function(le){return u.indexOf(le)},h=function(le){return u[le]},v=new Array(f),p=0;p<f;p++){var g=p%c,y=(p-g)/c;y===g?v[p]=0:v[p]=1/0}for(var b=new Array(f),m=new Array(f),_=0;_<l.length;_++){var x=l[_],C=x.source()[0],w=x.target()[0];if(C!==w){var O=d(C),A=d(w),k=O*c+A,R=o(x);if(v[k]>R&&(v[k]=R,b[k]=A,m[k]=x),!a){var I=A*c+O;!a&&v[I]>R&&(v[I]=R,b[I]=O,m[I]=x)}}}for(var M=0;M<c;M++)for(var N=0;N<c;N++)for(var F=N*c+M,z=0;z<c;z++){var B=N*c+z,U=M*c+z;v[F]+v[U]<v[B]&&(v[B]=v[F]+v[U],b[B]=b[F])}var W=function(le){return(Tt(le)?t.filter(le):le)[0]},Y=function(le){return d(W(le))},H={distance:function(le,fe){var ue=Y(le),ge=Y(fe);return v[ue*c+ge]},path:function(le,fe){var ue=Y(le),ge=Y(fe),ve=h(ue);if(ue===ge)return ve.collection();if(b[ue*c+ge]==null)return t.collection();var de=t.collection(),ie=ue,Q;for(de.merge(ve);ue!==ge;)ie=ue,ue=b[ue*c+ge],Q=m[ie*c+ue],de.merge(Q),de.merge(h(ue));return de}};return H}},Q9=Ri({weight:function(e){return 1},directed:!1,root:null}),J9={bellmanFord:function(e){var t=this,n=Q9(e),i=n.weight,a=n.directed,o=n.root,s=i,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,h=d.length,v=new bu,p=!1,g=[];o=l.collection(o)[0],f.unmergeBy(function(be){return be.isLoop()});for(var y=f.length,b=function(j){var G=v.get(j.id());return G||(G={},v.set(j.id(),G)),G},m=function(j){return(Tt(j)?l.$(j):j)[0]},_=function(j){return b(m(j)).dist},x=function(j){for(var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,$=m(j),te=[],ce=$;;){if(ce==null)return t.spawn();var he=b(ce),xe=he.edge,Ne=he.pred;if(te.unshift(ce[0]),ce.same(G)&&te.length>0)break;xe!=null&&te.unshift(xe),ce=Ne}return u.spawn(te)},C=0;C<h;C++){var w=d[C],O=b(w);w.same(o)?O.dist=0:O.dist=1/0,O.pred=null,O.edge=null}for(var A=!1,k=function(j,G,$,te,ce,he){var xe=te.dist+he;xe<ce.dist&&!$.same(te.edge)&&(ce.dist=xe,ce.pred=j,ce.edge=$,A=!0)},R=1;R<h;R++){A=!1;for(var I=0;I<y;I++){var M=f[I],N=M.source(),F=M.target(),z=s(M),B=b(N),U=b(F);k(N,F,M,B,U,z),a||k(F,N,M,U,B,z)}if(!A)break}if(A)for(var W=[],Y=0;Y<y;Y++){var H=f[Y],J=H.source(),le=H.target(),fe=s(H),ue=b(J).dist,ge=b(le).dist;if(ue+fe<ge||!a&&ge+fe<ue)if(p||(Gr("Graph contains a negative weight cycle for Bellman-Ford"),p=!0),e.findNegativeWeightCycles!==!1){var ve=[];ue+fe<ge&&ve.push(J),!a&&ge+fe<ue&&ve.push(le);for(var de=ve.length,ie=0;ie<de;ie++){var Q=ve[ie],re=[Q];re.push(b(Q).edge);for(var se=b(Q).pred;re.indexOf(se)===-1;)re.push(se),re.push(b(se).edge),se=b(se).pred;re=re.slice(re.indexOf(se));for(var pe=re[0].id(),Oe=0,Ce=2;Ce<re.length;Ce+=2)re[Ce].id()<pe&&(pe=re[Ce].id(),Oe=Ce);re=re.slice(Oe).concat(re.slice(0,Oe)),re.push(re[0]);var Re=re.map(function(be){return be.id()}).join(",");W.indexOf(Re)===-1&&(g.push(u.spawn(re)),W.push(Re))}}else break}return{distanceTo:_,pathTo:x,hasNegativeWeightCycle:p,negativeWeightCycles:g}}},e7=Math.sqrt(2),t7=function(e,t,n){n.length===0&&pn("Karger-Stein must be run on a connected (sub)graph");for(var i=n[e],a=i[1],o=i[2],s=t[a],u=t[o],l=n,c=l.length-1;c>=0;c--){var f=l[c],d=f[1],h=f[2];(t[d]===s&&t[h]===u||t[d]===u&&t[h]===s)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var p=l[v];p[1]===u?(l[v]=p.slice(),l[v][1]=s):p[2]===u&&(l[v]=p.slice(),l[v][2]=s)}for(var g=0;g<t.length;g++)t[g]===u&&(t[g]=s);return l},Vw=function(e,t,n,i){for(;n>i;){var a=Math.floor(Math.random()*t.length);t=t7(a,e,t),n--}return t},r7={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,i=t.edges;i.unmergeBy(function(U){return U.isLoop()});var a=n.length,o=i.length,s=Math.ceil(Math.pow(Math.log(a)/Math.LN2,2)),u=Math.floor(a/e7);if(a<2){pn("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<o;c++){var f=i[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,h=[],v=new Array(a),p=new Array(a),g=new Array(a),y=function(W,Y){for(var H=0;H<a;H++)Y[H]=W[H]},b=0;b<=s;b++){for(var m=0;m<a;m++)p[m]=m;var _=Vw(p,l.slice(),a,u),x=_.slice();y(p,g);var C=Vw(p,_,u,2),w=Vw(g,x,u,2);C.length<=w.length&&C.length<d?(d=C.length,h=C,y(p,v)):w.length<=C.length&&w.length<d&&(d=w.length,h=w,y(g,v))}for(var O=this.spawn(h.map(function(U){return i[U[0]]})),A=this.spawn(),k=this.spawn(),R=v[0],I=0;I<v.length;I++){var M=v[I],N=n[I];M===R?A.merge(N):k.merge(N)}var F=function(W){var Y=e.spawn();return W.forEach(function(H){Y.merge(H),H.connectedEdges().forEach(function(J){e.contains(J)&&!O.contains(J)&&Y.merge(J)})}),Y},z=[F(A),F(k)],B={cut:O,components:z,partition1:A,partition2:k};return B}},$w,n7=function(e){return{x:e.x,y:e.y}},S0=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},O3=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},gh=function(e){return{x:e[0],y:e[1]}},i7=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.min(o,i))}return i},a7=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=-1/0,a=t;a<n;a++){var o=e[a];isFinite(o)&&(i=Math.max(o,i))}return i},o7=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=0,a=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(i+=s,a++)}return i/a},s7=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;i?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,u=e.length-1;u>=0;u--){var l=e[u];o?isFinite(l)||(e[u]=-1/0,s++):e.splice(u,1)}a&&e.sort(function(d,h){return d-h});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+s]:(e[f-1+s]+e[f+s])/2},u7=function(e){return Math.PI*e/180},Mm=function(e,t){return Math.atan2(t,e)-Math.PI/2},rT=Math.log2||function(r){return Math.log(r)/Math.log(2)},nT=function(e){return e>0?1:e<0?-1:0},wf=function(e,t){return Math.sqrt(af(e,t))},af=function(e,t){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},l7=function(e){for(var t=e.length,n=0,i=0;i<t;i++)n+=e[i];for(var a=0;a<t;a++)e[a]=e[a]/n;return e},fi=function(e,t,n,i){return(1-i)*(1-i)*e+2*(1-i)*i*t+i*i*n},wh=function(e,t,n,i){return{x:fi(e.x,t.x,n.x,i),y:fi(e.y,t.y,n.y,i)}},c7=function(e,t,n,i){var a={x:t.x-e.x,y:t.y-e.y},o=wf(e,t),s={x:a.x/o,y:a.y/o};return n=n??0,i=i??n*o,{x:e.x+s.x*i,y:e.y+s.y*i}},Sg=function(e,t,n){return Math.max(e,Math.min(n,t))},oa=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},f7=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},d7=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},h7=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},S3=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},Eb=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Ob=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,i,a,o;if(t.length===1)n=i=a=o=t[0];else if(t.length===2)n=a=t[0],o=i=t[1];else if(t.length===4){var s=Hn(t,4);n=s[0],i=s[1],a=s[2],o=s[3]}return e.x1-=o,e.x2+=i,e.y1-=n,e.y2+=a,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},DP=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},iT=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},Il=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},MP=function(e,t){return Il(e,t.x,t.y)},C3=function(e,t){return Il(e,t.x1,t.y1)&&Il(e,t.x2,t.y2)},v7=($w=Math.hypot)!==null&&$w!==void 0?$w:function(r,e){return Math.sqrt(r*r+e*e)};function p7(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(O,A){return{x:O.x+A.x,y:O.y+A.y}},n=function(O,A){return{x:O.x-A.x,y:O.y-A.y}},i=function(O,A){return{x:O.x*A,y:O.y*A}},a=function(O,A){return O.x*A.y-O.y*A.x},o=function(O){var A=v7(O.x,O.y);return A===0?{x:0,y:0}:{x:O.x/A,y:O.y/A}},s=function(O){for(var A=0,k=0;k<O.length;k++){var R=O[k],I=O[(k+1)%O.length];A+=R.x*I.y-I.x*R.y}return A/2},u=function(O,A,k,R){var I=n(A,O),M=n(R,k),N=a(I,M);if(Math.abs(N)<1e-9)return t(O,i(I,.5));var F=a(n(k,O),M)/N;return t(O,i(I,F))},l=r.map(function(w){return{x:w.x,y:w.y}});s(l)<0&&l.reverse();for(var c=l.length,f=[],d=0;d<c;d++){var h=l[d],v=l[(d+1)%c],p=n(v,h),g=o({x:p.y,y:-p.x});f.push(g)}for(var y=f.map(function(w,O){var A=t(l[O],i(w,e)),k=t(l[(O+1)%c],i(w,e));return{p1:A,p2:k}}),b=[],m=0;m<c;m++){var _=y[(m-1+c)%c],x=y[m],C=u(_.p1,_.p2,x.p1,x.p2);b.push(C)}return b}function g7(r,e,t,n,i,a){var o=S7(r,e,t,n,i),s=p7(o,a),u=oa();return s.forEach(function(l){return S3(u,l.x,l.y)}),u}var T3=function(e,t,n,i,a,o,s){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?Yl(a,o):u,c=a/2,f=o/2;l=Math.min(l,c,f);var d=l!==c,h=l!==f,v;if(d){var p=n-c+l-s,g=i-f-s,y=n+c-l+s,b=g;if(v=Dl(e,t,n,i,p,g,y,b,!1),v.length>0)return v}if(h){var m=n+c+s,_=i-f+l-s,x=m,C=i+f-l+s;if(v=Dl(e,t,n,i,m,_,x,C,!1),v.length>0)return v}if(d){var w=n-c+l-s,O=i+f+s,A=n+c-l+s,k=O;if(v=Dl(e,t,n,i,w,O,A,k,!1),v.length>0)return v}if(h){var R=n-c-s,I=i-f+l-s,M=R,N=i+f-l+s;if(v=Dl(e,t,n,i,R,I,M,N,!1),v.length>0)return v}var F;{var z=n-c+l,B=i-f+l;if(F=xp(e,t,n,i,z,B,l+s),F.length>0&&F[0]<=z&&F[1]<=B)return[F[0],F[1]]}{var U=n+c-l,W=i-f+l;if(F=xp(e,t,n,i,U,W,l+s),F.length>0&&F[0]>=U&&F[1]<=W)return[F[0],F[1]]}{var Y=n+c-l,H=i+f-l;if(F=xp(e,t,n,i,Y,H,l+s),F.length>0&&F[0]>=Y&&F[1]>=H)return[F[0],F[1]]}{var J=n-c+l,le=i+f-l;if(F=xp(e,t,n,i,J,le,l+s),F.length>0&&F[0]<=J&&F[1]>=le)return[F[0],F[1]]}return[]},y7=function(e,t,n,i,a,o,s){var u=s,l=Math.min(n,a),c=Math.max(n,a),f=Math.min(i,o),d=Math.max(i,o);return l-u<=e&&e<=c+u&&f-u<=t&&t<=d+u},m7=function(e,t,n,i,a,o,s,u,l){var c={x1:Math.min(n,s,a)-l,x2:Math.max(n,s,a)+l,y1:Math.min(i,u,o)-l,y2:Math.max(i,u,o)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},b7=function(e,t,n,i){n-=i;var a=t*t-4*e*n;if(a<0)return[];var o=Math.sqrt(a),s=2*e,u=(-t+o)/s,l=(-t-o)/s;return[u,l]},_7=function(e,t,n,i,a){var o=1e-5;e===0&&(e=o),t/=e,n/=e,i/=e;var s,u,l,c,f,d,h,v;if(u=(3*n-t*t)/9,l=-(27*i)+t*(9*n-2*(t*t)),l/=54,s=u*u*u+l*l,a[1]=0,h=t/3,s>0){f=l+Math.sqrt(s),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=l-Math.sqrt(s),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),a[0]=-h+f+d,h+=(f+d)/2,a[4]=a[2]=-h,h=Math.sqrt(3)*(-d+f)/2,a[3]=h,a[5]=-h;return}if(a[5]=a[3]=0,s===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),a[0]=-h+2*v,a[4]=a[2]=-(v+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),a[0]=-h+v*Math.cos(c/3),a[2]=-h+v*Math.cos((c+2*Math.PI)/3),a[4]=-h+v*Math.cos((c+4*Math.PI)/3)},w7=function(e,t,n,i,a,o,s,u){var l=1*n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s+i*i-4*i*o+2*i*u+4*o*o-4*o*u+u*u,c=1*9*n*a-3*n*n-3*n*s-6*a*a+3*a*s+9*i*o-3*i*i-3*i*u-6*o*o+3*o*u,f=1*3*n*n-6*n*a+n*s-n*e+2*a*a+2*a*e-s*e+3*i*i-6*i*o+i*u-i*t+2*o*o+2*o*t-u*t,d=1*n*a-n*n+n*e-a*e+i*o-i*i+i*t-o*t,h=[];_7(l,c,f,d,h);for(var v=1e-7,p=[],g=0;g<6;g+=2)Math.abs(h[g+1])<v&&h[g]>=0&&h[g]<=1&&p.push(h[g]);p.push(1),p.push(0);for(var y=-1,b,m,_,x=0;x<p.length;x++)b=Math.pow(1-p[x],2)*n+2*(1-p[x])*p[x]*a+p[x]*p[x]*s,m=Math.pow(1-p[x],2)*i+2*(1-p[x])*p[x]*o+p[x]*p[x]*u,_=Math.pow(b-e,2)+Math.pow(m-t,2),y>=0?_<y&&(y=_):y=_;return y},x7=function(e,t,n,i,a,o){var s=[e-n,t-i],u=[a-n,o-i],l=u[0]*u[0]+u[1]*u[1],c=s[0]*s[0]+s[1]*s[1],f=s[0]*u[0]+s[1]*u[1],d=f*f/l;return f<0?c:d>l?(e-a)*(e-a)+(t-o)*(t-o):c-d},Ea=function(e,t,n){for(var i,a,o,s,u,l=0,c=0;c<n.length/2;c++)if(i=n[c*2],a=n[c*2+1],c+1<n.length/2?(o=n[(c+1)*2],s=n[(c+1)*2+1]):(o=n[(c+1-n.length/2)*2],s=n[(c+1-n.length/2)*2+1]),!(i==e&&o==e))if(i>=e&&e>=o||i<=e&&e<=o)u=(e-i)/(o-i)*(s-a)+a,u>t&&l++;else continue;return l%2!==0},Au=function(e,t,n,i,a,o,s,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var d=Math.cos(-f),h=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=o/2*(n[v*2]*d-n[v*2+1]*h),c[v*2+1]=s/2*(n[v*2+1]*d+n[v*2]*h),c[v*2]+=i,c[v*2+1]+=a;var p;if(l>0){var g=Hb(c,-l);p=Wb(g)}else p=c;return Ea(e,t,p)},E7=function(e,t,n,i,a,o,s,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(d<=Math.pow(f.radius,2))return!0}return Ea(e,t,l)},Wb=function(e){for(var t=new Array(e.length/2),n,i,a,o,s,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],i=e[f*4+1],a=e[f*4+2],o=e[f*4+3],f<e.length/4-1?(s=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(s=e[0],u=e[1],l=e[2],c=e[3]);var d=Dl(n,i,a,o,s,u,l,c,!0);t[f*2]=d[0],t[f*2+1]=d[1]}return t},Hb=function(e,t){for(var n=new Array(e.length*2),i,a,o,s,u=0;u<e.length/2;u++){i=e[u*2],a=e[u*2+1],u<e.length/2-1?(o=e[(u+1)*2],s=e[(u+1)*2+1]):(o=e[0],s=e[1]);var l=s-a,c=-(o-i),f=Math.sqrt(l*l+c*c),d=l/f,h=c/f;n[u*4]=i+d*t,n[u*4+1]=a+h*t,n[u*4+2]=o+d*t,n[u*4+3]=s+h*t}return n},O7=function(e,t,n,i,a,o){var s=n-e,u=i-t;s/=a,u/=o;var l=Math.sqrt(s*s+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(i-t)*f+t]},hf=function(e,t,n,i,a,o,s){return e-=a,t-=o,e/=n/2+s,t/=i/2+s,e*e+t*t<=1},xp=function(e,t,n,i,a,o,s){var u=[n-e,i-t],l=[e-a,t-o],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),d=l[0]*l[0]+l[1]*l[1]-s*s,h=f*f-4*c*d;if(h<0)return[];var v=(-f+Math.sqrt(h))/(2*c),p=(-f-Math.sqrt(h))/(2*c),g=Math.min(v,p),y=Math.max(v,p),b=[];if(g>=0&&g<=1&&b.push(g),y>=0&&y<=1&&b.push(y),b.length===0)return[];var m=b[0]*u[0]+e,_=b[0]*u[1]+t;if(b.length>1){if(b[0]==b[1])return[m,_];var x=b[1]*u[0]+e,C=b[1]*u[1]+t;return[m,_,x,C]}else return[m,_]},Ww=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Dl=function(e,t,n,i,a,o,s,u,l){var c=e-a,f=n-e,d=s-a,h=t-o,v=i-t,p=u-o,g=d*h-p*c,y=f*h-v*c,b=p*f-d*v;if(b!==0){var m=g/b,_=y/b,x=.001,C=0-x,w=1+x;return C<=m&&m<=w&&C<=_&&_<=w?[e+m*f,t+m*v]:l?[e+m*f,t+m*v]:[]}else return g===0||y===0?Ww(e,n,s)===s?[s,u]:Ww(e,n,a)===a?[a,o]:Ww(a,s,n)===n?[n,i]:[]:[]},S7=function(e,t,n,i,a){var o=[],s=i/2,u=a/2,l=t,c=n;o.push({x:l+s*e[0],y:c+u*e[1]});for(var f=1;f<e.length/2;f++)o.push({x:l+s*e[f*2],y:c+u*e[f*2+1]});return o},Cg=function(e,t,n,i,a,o,s,u){var l=[],c,f=new Array(n.length),d=!0;o==null&&(d=!1);var h;if(d){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*o+i,f[v*2+1]=n[v*2+1]*s+a;if(u>0){var p=Hb(f,-u);h=Wb(p)}else h=f}else h=n;for(var g,y,b,m,_=0;_<h.length/2;_++)g=h[_*2],y=h[_*2+1],_<h.length/2-1?(b=h[(_+1)*2],m=h[(_+1)*2+1]):(b=h[0],m=h[1]),c=Dl(e,t,i,a,g,y,b,m),c.length!==0&&l.push(c[0],c[1]);return l},C7=function(e,t,n,i,a,o,s,u,l){var c=[],f,d=new Array(n.length*2);l.forEach(function(b,m){m===0?(d[d.length-2]=b.startX,d[d.length-1]=b.startY):(d[m*4-2]=b.startX,d[m*4-1]=b.startY),d[m*4]=b.stopX,d[m*4+1]=b.stopY,f=xp(e,t,i,a,b.cx,b.cy,b.radius),f.length!==0&&c.push(f[0],f[1])});for(var h=0;h<d.length/4;h++)f=Dl(e,t,i,a,d[h*4],d[h*4+1],d[h*4+2],d[h*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],p=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),g=1;g<c.length/2;g++){var y=Math.pow(c[g*2]-e,2)+Math.pow(c[g*2+1]-t,2);y<=p&&(v[0]=c[g*2],v[1]=c[g*2+1],p=y)}return v}return c},Lm=function(e,t,n){var i=[e[0]-t[0],e[1]-t[1]],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=(a-n)/a;return o<0&&(o=1e-5),[t[0]+o*i[0],t[1]+o*i[1]]},na=function(e,t){var n=kC(e,t);return n=A3(n),n},A3=function(e){for(var t,n,i=e.length/2,a=1/0,o=1/0,s=-1/0,u=-1/0,l=0;l<i;l++)t=e[2*l],n=e[2*l+1],a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);for(var c=2/(s-a),f=2/(u-o),d=0;d<i;d++)t=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,a=Math.min(a,t),s=Math.max(s,t),o=Math.min(o,n),u=Math.max(u,n);if(o<-1)for(var h=0;h<i;h++)n=e[2*h+1]=e[2*h+1]+(-1-o);return e},kC=function(e,t){var n=1/e*2*Math.PI,i=e%2===0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=new Array(e*2),o,s=0;s<e;s++)o=s*n+i,a[2*s]=Math.cos(o),a[2*s+1]=Math.sin(-o);return a},Yl=function(e,t){return Math.min(e/4,t/4,8)},P3=function(e,t){return Math.min(e/10,t/10,8)},aT=function(){return 8},T7=function(e,t,n){return[e-2*t+n,2*(t-e),e]},IC=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function Hw(r,e){function t(f){for(var d=[],h=0;h<f.length;h++){var v=f[h],p=f[(h+1)%f.length],g={x:p.x-v.x,y:p.y-v.y},y={x:-g.y,y:g.x},b=Math.sqrt(y.x*y.x+y.y*y.y);d.push({x:y.x/b,y:y.y/b})}return d}function n(f,d){var h=1/0,v=-1/0,p=Sa(f),g;try{for(p.s();!(g=p.n()).done;){var y=g.value,b=y.x*d.x+y.y*d.y;h=Math.min(h,b),v=Math.max(v,b)}}catch(m){p.e(m)}finally{p.f()}return{min:h,max:v}}function i(f,d){return!(f.max<d.min||d.max<f.min)}var a=[].concat(qb(t(r)),qb(t(e))),o=Sa(a),s;try{for(o.s();!(s=o.n()).done;){var u=s.value,l=n(r,u),c=n(e,u);if(!i(l,c))return!1}}catch(f){o.e(f)}finally{o.f()}return!0}var A7=Ri({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),P7={pageRank:function(e){for(var t=A7(e),n=t.dampingFactor,i=t.precision,a=t.iterations,o=t.weight,s=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,d=f*f,h=c.length,v=new Array(d),p=new Array(f),g=(1-n)/f,y=0;y<f;y++){for(var b=0;b<f;b++){var m=y*f+b;v[m]=0}p[y]=0}for(var _=0;_<h;_++){var x=c[_],C=x.data("source"),w=x.data("target");if(C!==w){var O=l.indexOfId(C),A=l.indexOfId(w),k=o(x),R=A*f+O;v[R]+=k,p[O]+=k}}for(var I=1/f+g,M=0;M<f;M++)if(p[M]===0)for(var N=0;N<f;N++){var F=N*f+M;v[F]=I}else for(var z=0;z<f;z++){var B=z*f+M;v[B]=v[B]/p[M]+g}for(var U=new Array(f),W=new Array(f),Y,H=0;H<f;H++)U[H]=1;for(var J=0;J<a;J++){for(var le=0;le<f;le++)W[le]=0;for(var fe=0;fe<f;fe++)for(var ue=0;ue<f;ue++){var ge=fe*f+ue;W[fe]+=v[ge]*U[ue]}l7(W),Y=U,U=W,W=Y;for(var ve=0,de=0;de<f;de++){var ie=Y[de]-U[de];ve+=ie*ie}if(ve<i)break}var Q={rank:function(se){return se=s.collection(se)[0],U[l.indexOf(se)]}};return Q}},LP=Ri({root:null,weight:function(e){return 1},directed:!1,alpha:0}),xh={degreeCentralityNormalized:function(e){e=LP(e);var t=this.cy(),n=this.nodes(),i=n.length;if(e.directed){for(var c={},f={},d=0,h=0,v=0;v<i;v++){var p=n[v],g=p.id();e.root=p;var y=this.degreeCentrality(e);d<y.indegree&&(d=y.indegree),h<y.outdegree&&(h=y.outdegree),c[g]=y.indegree,f[g]=y.outdegree}return{indegree:function(m){return d==0?0:(Tt(m)&&(m=t.filter(m)),c[m.id()]/d)},outdegree:function(m){return h===0?0:(Tt(m)&&(m=t.filter(m)),f[m.id()]/h)}}}else{for(var a={},o=0,s=0;s<i;s++){var u=n[s];e.root=u;var l=this.degreeCentrality(e);o<l.degree&&(o=l.degree),a[u.id()]=l.degree}return{degree:function(m){return o===0?0:(Tt(m)&&(m=t.filter(m)),a[m.id()]/o)}}}},degreeCentrality:function(e){e=LP(e);var t=this.cy(),n=this,i=e,a=i.root,o=i.weight,s=i.directed,u=i.alpha;if(a=t.collection(a)[0],s){for(var h=a.connectedEdges(),v=h.filter(function(C){return C.target().same(a)&&n.has(C)}),p=h.filter(function(C){return C.source().same(a)&&n.has(C)}),g=v.length,y=p.length,b=0,m=0,_=0;_<v.length;_++)b+=o(v[_]);for(var x=0;x<p.length;x++)m+=o(p[x]);return{indegree:Math.pow(g,1-u)*Math.pow(b,u),outdegree:Math.pow(y,1-u)*Math.pow(m,u)}}else{for(var l=a.connectedEdges().intersection(n),c=l.length,f=0,d=0;d<l.length;d++)f+=o(l[d]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};xh.dc=xh.degreeCentrality;xh.dcn=xh.degreeCentralityNormalised=xh.degreeCentralityNormalized;var NP=Ri({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Eh={closenessCentralityNormalized:function(e){for(var t=NP(e),n=t.harmonic,i=t.weight,a=t.directed,o=this.cy(),s={},u=0,l=this.nodes(),c=this.floydWarshall({weight:i,directed:a}),f=0;f<l.length;f++){for(var d=0,h=l[f],v=0;v<l.length;v++)if(f!==v){var p=c.distance(h,l[v]);n?d+=1/p:d+=p}n||(d=1/d),u<d&&(u=d),s[h.id()]=d}return{closeness:function(y){return u==0?0:(Tt(y)?y=o.filter(y)[0].id():y=y.id(),s[y]/u)}}},closenessCentrality:function(e){var t=NP(e),n=t.root,i=t.weight,a=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:i,directed:a}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var d=s.distanceTo(f);o?u+=1/d:u+=d}}return o?u:1/u}};Eh.cc=Eh.closenessCentrality;Eh.ccn=Eh.closenessCentralityNormalised=Eh.closenessCentralityNormalized;var R7=Ri({weight:null,directed:!1}),DC={betweennessCentrality:function(e){for(var t=R7(e),n=t.directed,i=t.weight,a=i!=null,o=this.cy(),s=this.nodes(),u={},l={},c=0,f={set:function(m,_){l[m]=_,_>c&&(c=_)},get:function(m){return l[m]}},d=0;d<s.length;d++){var h=s[d],v=h.id();n?u[v]=h.outgoers().nodes():u[v]=h.openNeighborhood().nodes(),f.set(v,0)}for(var p=function(){for(var m=s[g].id(),_=[],x={},C={},w={},O=new Xg(function(fe,ue){return w[fe]-w[ue]}),A=0;A<s.length;A++){var k=s[A].id();x[k]=[],C[k]=0,w[k]=1/0}for(C[m]=1,w[m]=0,O.push(m);!O.empty();){var R=O.pop();if(_.push(R),a)for(var I=0;I<u[R].length;I++){var M=u[R][I],N=o.getElementById(R),F=void 0;N.edgesTo(M).length>0?F=N.edgesTo(M)[0]:F=M.edgesTo(N)[0];var z=i(F);M=M.id(),w[M]>w[R]+z&&(w[M]=w[R]+z,O.nodes.indexOf(M)<0?O.push(M):O.updateItem(M),C[M]=0,x[M]=[]),w[M]==w[R]+z&&(C[M]=C[M]+C[R],x[M].push(R))}else for(var B=0;B<u[R].length;B++){var U=u[R][B].id();w[U]==1/0&&(O.push(U),w[U]=w[R]+1),w[U]==w[R]+1&&(C[U]=C[U]+C[R],x[U].push(R))}}for(var W={},Y=0;Y<s.length;Y++)W[s[Y].id()]=0;for(;_.length>0;){for(var H=_.pop(),J=0;J<x[H].length;J++){var le=x[H][J];W[le]=W[le]+C[le]/C[H]*(1+W[H])}H!=s[g].id()&&f.set(H,f.get(H)+W[H])}},g=0;g<s.length;g++)p();var y={betweenness:function(m){var _=o.collection(m).id();return f.get(_)},betweennessNormalized:function(m){if(c==0)return 0;var _=o.collection(m).id();return f.get(_)/c}};return y.betweennessNormalised=y.betweennessNormalized,y}};DC.bc=DC.betweennessCentrality;var k7=Ri({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),I7=function(e){return k7(e)},D7=function(e,t){for(var n=0,i=0;i<t.length;i++)n+=t[i](e);return n},M7=function(e,t,n){for(var i=0;i<t;i++)e[i*t+i]=n},R3=function(e,t){for(var n,i=0;i<t;i++){n=0;for(var a=0;a<t;a++)n+=e[a*t+i];for(var o=0;o<t;o++)e[o*t+i]=e[o*t+i]/n}},L7=function(e,t,n){for(var i=new Array(n*n),a=0;a<n;a++){for(var o=0;o<n;o++)i[a*n+o]=0;for(var s=0;s<n;s++)for(var u=0;u<n;u++)i[a*n+u]+=e[a*n+s]*t[s*n+u]}return i},N7=function(e,t,n){for(var i=e.slice(0),a=1;a<n;a++)e=L7(e,i,t);return e},j7=function(e,t,n){for(var i=new Array(t*t),a=0;a<t*t;a++)i[a]=Math.pow(e[a],n);return R3(i,t),i},F7=function(e,t,n,i){for(var a=0;a<n;a++){var o=Math.round(e[a]*Math.pow(10,i))/Math.pow(10,i),s=Math.round(t[a]*Math.pow(10,i))/Math.pow(10,i);if(o!==s)return!1}return!0},B7=function(e,t,n,i){for(var a=[],o=0;o<t;o++){for(var s=[],u=0;u<t;u++)Math.round(e[o*t+u]*1e3)/1e3>0&&s.push(n[u]);s.length!==0&&a.push(i.collection(s))}return a},U7=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},z7=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&U7(e[t],e[n])&&e.splice(n,1);return e},jP=function(e){for(var t=this.nodes(),n=this.edges(),i=this.cy(),a=I7(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var u=t.length,l=u*u,c=new Array(l),f,d=0;d<l;d++)c[d]=0;for(var h=0;h<n.length;h++){var v=n[h],p=o[v.source().id()],g=o[v.target().id()],y=D7(v,a.attributes);c[p*u+g]+=y,c[g*u+p]+=y}M7(c,u,a.multFactor),R3(c,u);for(var b=!0,m=0;b&&m<a.maxIterations;)b=!1,f=N7(c,u,a.expandFactor),c=j7(f,u,a.inflateFactor),F7(c,f,l,4)||(b=!0),m++;var _=B7(c,u,t,i);return _=z7(_),_},q7={markovClustering:jP,mcl:jP},G7=function(e){return e},k3=function(e,t){return Math.abs(t-e)},FP=function(e,t,n){return e+k3(t,n)},BP=function(e,t,n){return e+Math.pow(n-t,2)},V7=function(e){return Math.sqrt(e)},$7=function(e,t,n){return Math.max(e,k3(t,n))},ip=function(e,t,n,i,a){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:G7,s=i,u,l,c=0;c<e;c++)u=t(c),l=n(c),s=a(s,u,l);return o(s)},Dh={euclidean:function(e,t,n){return e>=2?ip(e,t,n,0,BP,V7):ip(e,t,n,0,FP)},squaredEuclidean:function(e,t,n){return ip(e,t,n,0,BP)},manhattan:function(e,t,n){return ip(e,t,n,0,FP)},max:function(e,t,n){return ip(e,t,n,-1/0,$7)}};Dh["squared-euclidean"]=Dh.squaredEuclidean;Dh.squaredeuclidean=Dh.squaredEuclidean;function C0(r,e,t,n,i,a){var o;return Sn(r)?o=r:o=Dh[r]||Dh.euclidean,e===0&&Sn(r)?o(i,a):o(e,t,n,i,a)}var W7=Ri({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),oT=function(e){return W7(e)},Yb=function(e,t,n,i,a){var o=a!=="kMedoids",s=o?function(f){return n[f]}:function(f){return i[f](n)},u=function(d){return i[d](t)},l=n,c=t;return C0(e,i.length,s,u,l,c)},Yw=function(e,t,n){for(var i=n.length,a=new Array(i),o=new Array(i),s=new Array(t),u=null,l=0;l<i;l++)a[l]=e.min(n[l]).value,o[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<i;f++)u[f]=Math.random()*(o[f]-a[f])+a[f];s[c]=u}return s},I3=function(e,t,n,i,a){for(var o=1/0,s=0,u=0;u<t.length;u++){var l=Yb(n,e,t[u],i,a);l<o&&(o=l,s=u)}return s},D3=function(e,t,n){for(var i=[],a=null,o=0;o<t.length;o++)a=t[o],n[a.id()]===e&&i.push(a);return i},H7=function(e,t,n){return Math.abs(t-e)<=n},Y7=function(e,t,n){for(var i=0;i<e.length;i++)for(var a=0;a<e[i].length;a++){var o=Math.abs(e[i][a]-t[i][a]);if(o>n)return!1}return!0},X7=function(e,t,n){for(var i=0;i<n;i++)if(e===t[i])return!0;return!1},UP=function(e,t){var n=new Array(t);if(e.length<50)for(var i=0;i<t;i++){for(var a=e[Math.floor(Math.random()*e.length)];X7(a,n,i);)a=e[Math.floor(Math.random()*e.length)];n[i]=a}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},zP=function(e,t,n){for(var i=0,a=0;a<t.length;a++)i+=Yb("manhattan",t[a],e,n,"kMedoids");return i},K7=function(e){var t=this.cy(),n=this.nodes(),i=null,a=oT(e),o=new Array(a.k),s={},u;a.testMode?typeof a.testCentroids=="number"?(a.testCentroids,u=Yw(n,a.k,a.attributes)):ei(a.testCentroids)==="object"?u=a.testCentroids:u=Yw(n,a.k,a.attributes):u=Yw(n,a.k,a.attributes);for(var l=!0,c=0;l&&c<a.maxIterations;){for(var f=0;f<n.length;f++)i=n[f],s[i.id()]=I3(i,u,a.distance,a.attributes,"kMeans");l=!1;for(var d=0;d<a.k;d++){var h=D3(d,n,s);if(h.length!==0){for(var v=a.attributes.length,p=u[d],g=new Array(v),y=new Array(v),b=0;b<v;b++){y[b]=0;for(var m=0;m<h.length;m++)i=h[m],y[b]+=a.attributes[b](i);g[b]=y[b]/h.length,H7(g[b],p[b],a.sensitivityThreshold)||(l=!0)}u[d]=g,o[d]=t.collection(h)}}c++}return o},Z7=function(e){var t=this.cy(),n=this.nodes(),i=null,a=oT(e),o=new Array(a.k),s,u={},l,c=new Array(a.k);a.testMode?typeof a.testCentroids=="number"||(ei(a.testCentroids)==="object"?s=a.testCentroids:s=UP(n,a.k)):s=UP(n,a.k);for(var f=!0,d=0;f&&d<a.maxIterations;){for(var h=0;h<n.length;h++)i=n[h],u[i.id()]=I3(i,s,a.distance,a.attributes,"kMedoids");f=!1;for(var v=0;v<s.length;v++){var p=D3(v,n,u);if(p.length!==0){c[v]=zP(s[v],p,a.attributes);for(var g=0;g<p.length;g++)l=zP(p[g],p,a.attributes),l<c[v]&&(c[v]=l,s[v]=p[g],f=!0);o[v]=t.collection(p)}}d++}return o},Q7=function(e,t,n,i,a){for(var o,s,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)i[u][l]=Math.pow(n[u][l],a.m);for(var c=0;c<e.length;c++)for(var f=0;f<a.attributes.length;f++){o=0,s=0;for(var d=0;d<t.length;d++)o+=i[d][c]*a.attributes[f](t[d]),s+=i[d][c];e[c][f]=o/s}},J7=function(e,t,n,i,a){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,u,l,c=2/(a.m-1),f=0;f<n.length;f++)for(var d=0;d<i.length;d++){s=0;for(var h=0;h<n.length;h++)u=Yb(a.distance,i[d],n[f],a.attributes,"cmeans"),l=Yb(a.distance,i[d],n[h],a.attributes,"cmeans"),s+=Math.pow(u/l,c);e[d][f]=1/s}},eG=function(e,t,n,i){for(var a=new Array(n.k),o=0;o<a.length;o++)a[o]=[];for(var s,u,l=0;l<t.length;l++){s=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>s&&(s=t[l][c],u=c);a[u].push(e[l])}for(var f=0;f<a.length;f++)a[f]=i.collection(a[f]);return a},qP=function(e){var t=this.cy(),n=this.nodes(),i=oT(e),a,o,s,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(i.k);s=new Array(n.length);for(var f=0;f<n.length;f++)s[f]=new Array(i.k);for(var d=0;d<n.length;d++){for(var h=0,v=0;v<i.k;v++)s[d][v]=Math.random(),h+=s[d][v];for(var p=0;p<i.k;p++)s[d][p]=s[d][p]/h}o=new Array(i.k);for(var g=0;g<i.k;g++)o[g]=new Array(i.attributes.length);l=new Array(n.length);for(var y=0;y<n.length;y++)l[y]=new Array(i.k);for(var b=!0,m=0;b&&m<i.maxIterations;)b=!1,Q7(o,n,s,l,i),J7(s,u,o,n,i),Y7(s,u,i.sensitivityThreshold)||(b=!0),m++;return a=eG(n,s,i,t),{clusters:a,degreeOfMembership:s}},tG={kMeans:K7,kMedoids:Z7,fuzzyCMeans:qP,fcm:qP},rG=Ri({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),nG={single:"min",complete:"max"},iG=function(e){var t=rG(e),n=nG[t.linkage];return n!=null&&(t.linkage=n),t},GP=function(e,t,n,i,a){for(var o=0,s=1/0,u,l=a.attributes,c=function(A,k){return C0(a.distance,l.length,function(R){return l[R](A)},function(R){return l[R](k)},A,k)},f=0;f<e.length;f++){var d=e[f].key,h=n[d][i[d]];h<s&&(o=d,s=h)}if(a.mode==="threshold"&&s>=a.threshold||a.mode==="dendrogram"&&e.length===1)return!1;var v=t[o],p=t[i[o]],g;a.mode==="dendrogram"?g={left:v,right:p,key:v.key}:g={value:v.value.concat(p.value),key:v.key},e[v.index]=g,e.splice(p.index,1),t[v.key]=g;for(var y=0;y<e.length;y++){var b=e[y];v.key===b.key?u=1/0:a.linkage==="min"?(u=n[v.key][b.key],n[v.key][b.key]>n[p.key][b.key]&&(u=n[p.key][b.key])):a.linkage==="max"?(u=n[v.key][b.key],n[v.key][b.key]<n[p.key][b.key]&&(u=n[p.key][b.key])):a.linkage==="mean"?u=(n[v.key][b.key]*v.size+n[p.key][b.key]*p.size)/(v.size+p.size):a.mode==="dendrogram"?u=c(b.value,v.value):u=c(b.value[0],v.value[0]),n[v.key][b.key]=n[b.key][v.key]=u}for(var m=0;m<e.length;m++){var _=e[m].key;if(i[_]===v.key||i[_]===p.key){for(var x=_,C=0;C<e.length;C++){var w=e[C].key;n[_][w]<n[_][x]&&(x=w)}i[_]=x}e[m].index=m}return v.key=p.key=v.index=p.index=null,!0},yh=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&yh(e.left,t),e.right&&yh(e.right,t)))},MC=function(e,t){if(!e)return"";if(e.left&&e.right){var n=MC(e.left,t),i=MC(e.right,t),a=t.add({group:"nodes",data:{id:n+","+i}});return t.add({group:"edges",data:{source:n,target:a.id()}}),t.add({group:"edges",data:{source:i,target:a.id()}}),a.id()}else if(e.value)return e.value.id()},LC=function(e,t,n){if(!e)return[];var i=[],a=[],o=[];return t===0?(e.left&&yh(e.left,i),e.right&&yh(e.right,a),o=i.concat(a),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&yh(e.left,i),e.right&&yh(e.right,a),[n.collection(i),n.collection(a)]):e.value?[n.collection(e.value)]:(e.left&&(i=LC(e.left,t-1,n)),e.right&&(a=LC(e.right,t-1,n)),i.concat(a))},VP=function(e){for(var t=this.cy(),n=this.nodes(),i=iG(e),a=i.attributes,o=function(m,_){return C0(i.distance,a.length,function(x){return a[x](m)},function(x){return a[x](_)},m,_)},s=[],u=[],l=[],c=[],f=0;f<n.length;f++){var d={value:i.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};s[f]=d,c[f]=d,u[f]=[],l[f]=0}for(var h=0;h<s.length;h++)for(var v=0;v<=h;v++){var p=void 0;i.mode==="dendrogram"?p=h===v?1/0:o(s[h].value,s[v].value):p=h===v?1/0:o(s[h].value[0],s[v].value[0]),u[h][v]=p,u[v][h]=p,p<u[h][l[h]]&&(l[h]=v)}for(var g=GP(s,c,u,l,i);g;)g=GP(s,c,u,l,i);var y;return i.mode==="dendrogram"?(y=LC(s[0],i.dendrogramDepth,t),i.addDendrogram&&MC(s[0],t)):(y=new Array(s.length),s.forEach(function(b,m){b.key=b.index=null,y[m]=t.collection(b.value)})),y},aG={hierarchicalClustering:VP,hca:VP},oG=Ri({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),sG=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||pn("Damping must range on [0.5, 1).  Got: ".concat(t));var i=["median","mean","min","max"];return i.some(function(a){return a===n})||at(n)||pn("Preference must be one of [".concat(i.map(function(a){return"'".concat(a,"'")}).join(", "),"] or a number.  Got: ").concat(n)),oG(e)},uG=function(e,t,n,i){var a=function(s,u){return i[u](s)};return-C0(e,i.length,function(o){return a(t,o)},function(o){return a(n,o)},t,n)},lG=function(e,t){var n=null;return t==="median"?n=s7(e):t==="mean"?n=o7(e):t==="min"?n=i7(e):t==="max"?n=a7(e):n=t,n},cG=function(e,t,n){for(var i=[],a=0;a<e;a++)t[a*e+a]+n[a*e+a]>0&&i.push(a);return i},$P=function(e,t,n){for(var i=[],a=0;a<e;a++){for(var o=-1,s=-1/0,u=0;u<n.length;u++){var l=n[u];t[a*e+l]>s&&(o=l,s=t[a*e+l])}o>0&&i.push(o)}for(var c=0;c<n.length;c++)i[n[c]]=n[c];return i},fG=function(e,t,n){for(var i=$P(e,t,n),a=0;a<n.length;a++){for(var o=[],s=0;s<i.length;s++)i[s]===n[a]&&o.push(s);for(var u=-1,l=-1/0,c=0;c<o.length;c++){for(var f=0,d=0;d<o.length;d++)f+=t[o[d]*e+o[c]];f>l&&(u=c,l=f)}n[a]=o[u]}return i=$P(e,t,n),i},WP=function(e){for(var t=this.cy(),n=this.nodes(),i=sG(e),a={},o=0;o<n.length;o++)a[n[o].id()]=o;var s,u,l,c,f,d;s=n.length,u=s*s,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var v=0;v<s;v++)for(var p=0;p<s;p++)v!==p&&(l[v*s+p]=uG(i.distance,n[v],n[p],i.attributes));c=lG(l,i.preference);for(var g=0;g<s;g++)l[g*s+g]=c;f=new Array(u);for(var y=0;y<u;y++)f[y]=0;d=new Array(u);for(var b=0;b<u;b++)d[b]=0;for(var m=new Array(s),_=new Array(s),x=new Array(s),C=0;C<s;C++)m[C]=0,_[C]=0,x[C]=0;for(var w=new Array(s*i.minIterations),O=0;O<w.length;O++)w[O]=0;var A;for(A=0;A<i.maxIterations;A++){for(var k=0;k<s;k++){for(var R=-1/0,I=-1/0,M=-1,N=0,F=0;F<s;F++)m[F]=f[k*s+F],N=d[k*s+F]+l[k*s+F],N>=R?(I=R,R=N,M=F):N>I&&(I=N);for(var z=0;z<s;z++)f[k*s+z]=(1-i.damping)*(l[k*s+z]-R)+i.damping*m[z];f[k*s+M]=(1-i.damping)*(l[k*s+M]-I)+i.damping*m[M]}for(var B=0;B<s;B++){for(var U=0,W=0;W<s;W++)m[W]=d[W*s+B],_[W]=Math.max(0,f[W*s+B]),U+=_[W];U-=_[B],_[B]=f[B*s+B],U+=_[B];for(var Y=0;Y<s;Y++)d[Y*s+B]=(1-i.damping)*Math.min(0,U-_[Y])+i.damping*m[Y];d[B*s+B]=(1-i.damping)*(U-_[B])+i.damping*m[B]}for(var H=0,J=0;J<s;J++){var le=d[J*s+J]+f[J*s+J]>0?1:0;w[A%i.minIterations*s+J]=le,H+=le}if(H>0&&(A>=i.minIterations-1||A==i.maxIterations-1)){for(var fe=0,ue=0;ue<s;ue++){x[ue]=0;for(var ge=0;ge<i.minIterations;ge++)x[ue]+=w[ge*s+ue];(x[ue]===0||x[ue]===i.minIterations)&&fe++}if(fe===s)break}}for(var ve=cG(s,f,d),de=fG(s,l,ve),ie={},Q=0;Q<ve.length;Q++)ie[ve[Q]]=[];for(var re=0;re<n.length;re++){var se=a[n[re].id()],pe=de[se];pe!=null&&ie[pe].push(n[re])}for(var Oe=new Array(ve.length),Ce=0;Ce<ve.length;Ce++)Oe[Ce]=t.collection(ie[ve[Ce]]);return Oe},dG={affinityPropagation:WP,ap:WP},hG=Ri({root:void 0,directed:!1}),vG={hierholzer:function(e){if(!Pr(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=hG(e),i=n.root,a=n.directed,o=this,s=!1,u,l,c;i&&(c=Tt(i)?this.filter(i)[0].id():i[0].id());var f={},d={};a?o.forEach(function(b){var m=b.id();if(b.isNode()){var _=b.indegree(!0),x=b.outdegree(!0),C=_-x,w=x-_;C==1?u?s=!0:u=m:w==1?l?s=!0:l=m:(w>1||C>1)&&(s=!0),f[m]=[],b.outgoers().forEach(function(O){O.isEdge()&&f[m].push(O.id())})}else d[m]=[void 0,b.target().id()]}):o.forEach(function(b){var m=b.id();if(b.isNode()){var _=b.degree(!0);_%2&&(u?l?s=!0:l=m:u=m),f[m]=[],b.connectedEdges().forEach(function(x){return f[m].push(x.id())})}else d[m]=[b.source().id(),b.target().id()]});var h={found:!1,trail:void 0};if(s)return h;if(l&&u)if(a){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=o[0].id());var v=function(m){for(var _=m,x=[m],C,w,O;f[_].length;)C=f[_].shift(),w=d[C][0],O=d[C][1],_!=O?(f[O]=f[O].filter(function(A){return A!=C}),_=O):!a&&_!=w&&(f[w]=f[w].filter(function(A){return A!=C}),_=w),x.unshift(C),x.unshift(_);return x},p=[],g=[];for(g=v(c);g.length!=1;)f[g[0]].length==0?(p.unshift(o.getElementById(g.shift())),p.unshift(o.getElementById(g.shift()))):g=v(g.shift()).concat(g);p.unshift(o.getElementById(g.shift()));for(var y in f)if(f[y].length)return h;return h.found=!0,h.trail=this.spawn(p,!0),h}},Nm=function(){var e=this,t={},n=0,i=0,a=[],o=[],s={},u=function(d,h){for(var v=o.length-1,p=[],g=e.spawn();o[v].x!=d||o[v].y!=h;)p.push(o.pop().edge),v--;p.push(o.pop().edge),p.forEach(function(y){var b=y.connectedNodes().intersection(e);g.merge(y),b.forEach(function(m){var _=m.id(),x=m.connectedEdges().intersection(e);g.merge(m),t[_].cutVertex?g.merge(x.filter(function(C){return C.isLoop()})):g.merge(x)})}),a.push(g)},l=function(d,h,v){d===v&&(i+=1),t[h]={id:n,low:n++,cutVertex:!1};var p=e.getElementById(h).connectedEdges().intersection(e);if(p.size()===0)a.push(e.spawn(e.getElementById(h)));else{var g,y,b,m;p.forEach(function(_){g=_.source().id(),y=_.target().id(),b=g===h?y:g,b!==v&&(m=_.id(),s[m]||(s[m]=!0,o.push({x:h,y:b,edge:_})),b in t?t[h].low=Math.min(t[h].low,t[b].id):(l(d,b,h),t[h].low=Math.min(t[h].low,t[b].low),t[h].id<=t[b].low&&(t[h].cutVertex=!0,u(h,b))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in t||(i=0,l(d,d),t[d].cutVertex=i>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:a}},pG={hopcroftTarjanBiconnected:Nm,htbc:Nm,htb:Nm,hopcroftTarjanBiconnectedComponents:Nm},jm=function(){var e=this,t={},n=0,i=[],a=[],o=e.spawn(e),s=function(l){a.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(p){var g=p.target().id();g!==l&&(g in t||s(g),t[g].explored||(t[l].low=Math.min(t[l].low,t[g].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var d=a.pop();if(f.merge(e.getElementById(d)),t[d].low=t[l].index,t[d].explored=!0,d===l)break}var h=f.edgesWith(f),v=f.merge(h);i.push(v),o=o.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||s(l)}}),{cut:o,components:i}},gG={tarjanStronglyConnected:jm,tsc:jm,tscc:jm,tarjanStronglyConnectedComponents:jm},M3={};[Og,W9,H9,X9,Z9,J9,r7,P7,xh,Eh,DC,q7,tG,aG,dG,vG,pG,gG].forEach(function(r){jt(M3,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var L3=0,N3=1,j3=2,Xo=function(e){if(!(this instanceof Xo))return new Xo(e);this.id="Thenable/1.0.7",this.state=L3,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Xo.prototype={fulfill:function(e){return HP(this,N3,"fulfillValue",e)},reject:function(e){return HP(this,j3,"rejectReason",e)},then:function(e,t){var n=this,i=new Xo;return n.onFulfilled.push(XP(e,i,"fulfill")),n.onRejected.push(XP(t,i,"reject")),F3(n),i.proxy}};var HP=function(e,t,n,i){return e.state===L3&&(e.state=t,e[n]=i,F3(e)),e},F3=function(e){e.state===N3?YP(e,"onFulfilled",e.fulfillValue):e.state===j3&&YP(e,"onRejected",e.rejectReason)},YP=function(e,t,n){if(e[t].length!==0){var i=e[t];e[t]=[];var a=function(){for(var s=0;s<i.length;s++)i[s](n)};typeof setImmediate=="function"?setImmediate(a):setTimeout(a,0)}},XP=function(e,t,n){return function(i){if(typeof e!="function")t[n].call(t,i);else{var a;try{a=e(i)}catch(o){t.reject(o);return}B3(t,a)}}},B3=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(ei(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(a){e.reject(a);return}if(typeof n=="function"){var i=!1;try{n.call(t,function(a){i||(i=!0,a===t?e.reject(new TypeError("circular thenable chain")):B3(e,a))},function(a){i||(i=!0,e.reject(a))})}catch(a){i||e.reject(a)}return}e.fulfill(t)};Xo.all=function(r){return new Xo(function(e,t){for(var n=new Array(r.length),i=0,a=function(u,l){n[u]=l,i++,i===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var u=r[s],l=u!=null&&u.then!=null;if(l)u.then(function(f){a(s,f)},function(f){t(f)});else{var c=u;a(s,c)}})(o)})};Xo.resolve=function(r){return new Xo(function(e,t){e(r)})};Xo.reject=function(r){return new Xo(function(e,t){t(r)})};var Gh=typeof Promise<"u"?Promise:Xo,NC=function(e,t,n){var i=K2(e),a=!i,o=this._private=jt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Sn(o.complete)&&o.completes.push(o.complete),a){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(i){var u=e.pan();o.startPan={x:u.x,y:u.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},xf=NC.prototype;jt(xf,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Ha(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var i=0;i<e.style.length;i++){var a=e.style[i],o=a.name,s=e.startStyle[o];e.startStyle[o]=a,e.style[i]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Gh(function(i,a){n.push(function(){i()})})}});xf.complete=xf.completed;xf.run=xf.play;xf.running=xf.playing;var yG={animated:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return!1;var o=i[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,i=n?t:[t],a=this._private.cy||this;if(!a.styleEnabled())return this;for(var o=0;o<i.length;o++){var s=i[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var i=this._private.cy||this;return i.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this,u=!a,l=!u;if(!s.styleEnabled())return this;var c=s.style();t=jt({},t,n);var f=Object.keys(t).length===0;if(f)return new NC(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var d=t.renderedPosition,h=s.pan(),v=s.zoom();t.position=O3(d,v,h)}if(u&&t.panBy!=null){var p=t.panBy,g=s.pan();t.pan={x:g.x+p.x,y:g.y+p.y}}var y=t.center||t.centre;if(u&&y!=null){var b=s.getCenterPan(y.eles,t.zoom);b!=null&&(t.pan=b)}if(u&&t.fit!=null){var m=t.fit,_=s.getFitViewport(m.eles||m.boundingBox,m.padding);_!=null&&(t.pan=_.pan,t.zoom=_.zoom)}if(u&&Pr(t.zoom)){var x=s.getZoomedViewport(t.zoom);x!=null?(x.zoomed&&(t.zoom=x.zoom),x.panned&&(t.pan=x.pan)):t.zoom=null}return new NC(o[0],t)}},animate:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=jt({},t,n));for(var u=0;u<o.length;u++){var l=o[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var i=this,a=i.length!==void 0,o=a?i:[i],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var u=0;u<o.length;u++){for(var l=o[u],c=l._private,f=c.animation.current,d=0;d<f.length;d++){var h=f[d],v=h._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return s.notify("draw"),this}}},Xw,KP;function T0(){if(KP)return Xw;KP=1;var r=Array.isArray;return Xw=r,Xw}var Kw,ZP;function mG(){if(ZP)return Kw;ZP=1;var r=T0(),e=Hg(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(r(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||o!=null&&a in Object(o)}return Kw=i,Kw}var Zw,QP;function bG(){if(QP)return Zw;QP=1;var r=p3(),e=Wg(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==a}return Zw=o,Zw}var Qw,JP;function _G(){if(JP)return Qw;JP=1;var r=E0(),e=r["__core-js_shared__"];return Qw=e,Qw}var Jw,eR;function wG(){if(eR)return Jw;eR=1;var r=_G(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return Jw=t,Jw}var e1,tR;function xG(){if(tR)return e1;tR=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return e1=t,e1}var t1,rR;function EG(){if(rR)return t1;rR=1;var r=bG(),e=wG(),t=Wg(),n=xG(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!t(d)||e(d))return!1;var h=r(d)?c:a;return h.test(n(d))}return t1=f,t1}var r1,nR;function OG(){if(nR)return r1;nR=1;function r(e,t){return e==null?void 0:e[t]}return r1=r,r1}var n1,iR;function sT(){if(iR)return n1;iR=1;var r=EG(),e=OG();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return n1=t,n1}var i1,aR;function A0(){if(aR)return i1;aR=1;var r=sT(),e=r(Object,"create");return i1=e,i1}var a1,oR;function SG(){if(oR)return a1;oR=1;var r=A0();function e(){this.__data__=r?r(null):{},this.size=0}return a1=e,a1}var o1,sR;function CG(){if(sR)return o1;sR=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return o1=r,o1}var s1,uR;function TG(){if(uR)return s1;uR=1;var r=A0(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var o=this.__data__;if(r){var s=o[a];return s===e?void 0:s}return n.call(o,a)?o[a]:void 0}return s1=i,s1}var u1,lR;function AG(){if(lR)return u1;lR=1;var r=A0(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return u1=n,u1}var l1,cR;function PG(){if(cR)return l1;cR=1;var r=A0(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return l1=t,l1}var c1,fR;function RG(){if(fR)return c1;fR=1;var r=SG(),e=CG(),t=TG(),n=AG(),i=PG();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,c1=a,c1}var f1,dR;function kG(){if(dR)return f1;dR=1;function r(){this.__data__=[],this.size=0}return f1=r,f1}var d1,hR;function U3(){if(hR)return d1;hR=1;function r(e,t){return e===t||e!==e&&t!==t}return d1=r,d1}var h1,vR;function P0(){if(vR)return h1;vR=1;var r=U3();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return h1=e,h1}var v1,pR;function IG(){if(pR)return v1;pR=1;var r=P0(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,o=r(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return v1=n,v1}var p1,gR;function DG(){if(gR)return p1;gR=1;var r=P0();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return p1=e,p1}var g1,yR;function MG(){if(yR)return g1;yR=1;var r=P0();function e(t){return r(this.__data__,t)>-1}return g1=e,g1}var y1,mR;function LG(){if(mR)return y1;mR=1;var r=P0();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return y1=e,y1}var m1,bR;function NG(){if(bR)return m1;bR=1;var r=kG(),e=IG(),t=DG(),n=MG(),i=LG();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,m1=a,m1}var b1,_R;function jG(){if(_R)return b1;_R=1;var r=sT(),e=E0(),t=r(e,"Map");return b1=t,b1}var _1,wR;function FG(){if(wR)return _1;wR=1;var r=RG(),e=NG(),t=jG();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return _1=n,_1}var w1,xR;function BG(){if(xR)return w1;xR=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return w1=r,w1}var x1,ER;function R0(){if(ER)return x1;ER=1;var r=BG();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return x1=e,x1}var E1,OR;function UG(){if(OR)return E1;OR=1;var r=R0();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return E1=e,E1}var O1,SR;function zG(){if(SR)return O1;SR=1;var r=R0();function e(t){return r(this,t).get(t)}return O1=e,O1}var S1,CR;function qG(){if(CR)return S1;CR=1;var r=R0();function e(t){return r(this,t).has(t)}return S1=e,S1}var C1,TR;function GG(){if(TR)return C1;TR=1;var r=R0();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return C1=e,C1}var T1,AR;function VG(){if(AR)return T1;AR=1;var r=FG(),e=UG(),t=zG(),n=qG(),i=GG();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,T1=a,T1}var A1,PR;function $G(){if(PR)return A1;PR=1;var r=VG(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],u=a.cache;if(u.has(s))return u.get(s);var l=n.apply(this,o);return a.cache=u.set(s,l)||u,l};return a.cache=new(t.Cache||r),a}return t.Cache=r,A1=t,A1}var P1,RR;function WG(){if(RR)return P1;RR=1;var r=$G(),e=500;function t(n){var i=r(n,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return P1=t,P1}var R1,kR;function z3(){if(kR)return R1;kR=1;var r=WG(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,u,l){a.push(u?l.replace(t,"$1"):s||o)}),a});return R1=n,R1}var k1,IR;function q3(){if(IR)return k1;IR=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return k1=r,k1}var I1,DR;function HG(){if(DR)return I1;DR=1;var r=Q2(),e=q3(),t=T0(),n=Hg(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(n(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return I1=o,I1}var D1,MR;function G3(){if(MR)return D1;MR=1;var r=HG();function e(t){return t==null?"":r(t)}return D1=e,D1}var M1,LR;function V3(){if(LR)return M1;LR=1;var r=T0(),e=mG(),t=z3(),n=G3();function i(a,o){return r(a)?a:e(a,o)?[a]:t(n(a))}return M1=i,M1}var L1,NR;function uT(){if(NR)return L1;NR=1;var r=Hg();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return L1=e,L1}var N1,jR;function YG(){if(jR)return N1;jR=1;var r=V3(),e=uT();function t(n,i){i=r(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[e(i[a++])];return a&&a==o?n:void 0}return N1=t,N1}var j1,FR;function XG(){if(FR)return j1;FR=1;var r=YG();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return j1=e,j1}var KG=XG(),ZG=$g(KG),F1,BR;function QG(){if(BR)return F1;BR=1;var r=sT(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return F1=e,F1}var B1,UR;function JG(){if(UR)return B1;UR=1;var r=QG();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return B1=e,B1}var U1,zR;function eV(){if(zR)return U1;zR=1;var r=JG(),e=U3(),t=Object.prototype,n=t.hasOwnProperty;function i(a,o,s){var u=a[o];(!(n.call(a,o)&&e(u,s))||s===void 0&&!(o in a))&&r(a,o,s)}return U1=i,U1}var z1,qR;function tV(){if(qR)return z1;qR=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return z1=t,z1}var q1,GR;function rV(){if(GR)return q1;GR=1;var r=eV(),e=V3(),t=tV(),n=Wg(),i=uT();function a(o,s,u,l){if(!n(o))return o;s=e(s,o);for(var c=-1,f=s.length,d=f-1,h=o;h!=null&&++c<f;){var v=i(s[c]),p=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(c!=d){var g=h[v];p=l?l(g,v,h):void 0,p===void 0&&(p=n(g)?g:t(s[c+1])?[]:{})}r(h,v,p),h=h[v]}return o}return q1=a,q1}var G1,VR;function nV(){if(VR)return G1;VR=1;var r=rV();function e(t,n,i){return t==null?t:r(t,n,i)}return G1=e,G1}var iV=nV(),aV=$g(iV),V1,$R;function oV(){if($R)return V1;$R=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return V1=r,V1}var $1,WR;function sV(){if(WR)return $1;WR=1;var r=q3(),e=oV(),t=T0(),n=Hg(),i=z3(),a=uT(),o=G3();function s(u){return t(u)?r(u,a):n(u)?[u]:e(i(o(u)))}return $1=s,$1}var uV=sV(),lV=$g(uV),cV={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(i){},beforeSet:function(i,a){},onSet:function(i){},canSet:function(i){return!0}};return e=jt({},t,e),function(i,a){var o=e,s=this,u=s.length!==void 0,l=u?s:[s],c=u?s[0]:s;if(Tt(i)){var f=i.indexOf(".")!==-1,d=f&&lV(i);if(o.allowGetting&&a===void 0){var h;return c&&(o.beforeGet(c),d&&c._private[o.field][i]===void 0?h=ZG(c._private[o.field],d):h=c._private[o.field][i]),h}else if(o.allowSetting&&a!==void 0){var v=!o.immutableKeys[i];if(v){var p=a3({},i,a);o.beforeSet(s,p);for(var g=0,y=l.length;g<y;g++){var b=l[g];o.canSet(b)&&(d&&c._private[o.field][i]===void 0?aV(b._private[o.field],d,a):b._private[o.field][i]=a)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Pr(i)){var m=i,_,x,C=Object.keys(m);o.beforeSet(s,m);for(var w=0;w<C.length;w++){_=C[w],x=m[_];var O=!o.immutableKeys[_];if(O)for(var A=0;A<l.length;A++){var k=l[A];o.canSet(k)&&(k._private[o.field][_]=x)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Sn(i)){var R=i;s.on(o.bindingEvent,R)}else if(o.allowGetting&&i===void 0){var I;return c&&(o.beforeGet(c),I=c._private[o.field]),I}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=jt({},t,e),function(i){var a=e,o=this,s=o.length!==void 0,u=s?o:[o];if(Tt(i)){for(var l=i.split(/\s+/),c=l.length,f=0;f<c;f++){var d=l[f];if(!Wl(d)){var h=!a.immutableKeys[d];if(h)for(var v=0,p=u.length;v<p;v++)u[v]._private[a.field][d]=void 0}}a.triggerEvent&&o[a.triggerFnName](a.event)}else if(i===void 0){for(var g=0,y=u.length;g<y;g++)for(var b=u[g]._private[a.field],m=Object.keys(b),_=0;_<m.length;_++){var x=m[_],C=!a.immutableKeys[x];C&&(b[x]=void 0)}a.triggerEvent&&o[a.triggerFnName](a.event)}return o}}},fV={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,i){var a=this,o=Array.prototype.slice.call(arguments,0);return new Gh(function(s,u){var l=function(h){a.off.apply(a,f),s(h)},c=o.concat([l]),f=c.concat([]);a.on.apply(a,c)})}}},qr={};[yG,cV,fV].forEach(function(r){jt(qr,r)});var dV={animate:qr.animate(),animation:qr.animation(),animated:qr.animated(),clearQueue:qr.clearQueue(),delay:qr.delay(),delayAnimation:qr.delayAnimation(),stop:qr.stop()},Sb={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else Kr(e)||(e=(e||"").match(/\S+/g)||[]);for(var i=[],a=new qh(e),o=0;o<t.length;o++){for(var s=t[o],u=s._private,l=u.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=l.has(d);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=a,i.push(s))}return i.length>0&&this.spawn(i).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){Kr(e)||(e=e.match(/\S+/g)||[]);for(var n=this,i=t===void 0,a=[],o=0,s=n.length;o<s;o++)for(var u=n[o],l=u._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=l.has(d),v=!1;t||i&&!h?(l.add(d),v=!0):(!t||i&&h)&&(l.delete(d),v=!0),!c&&v&&(a.push(u),c=!0)}return a.length>0&&this.spawn(a).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};Sb.className=Sb.classNames=Sb.classes;var Tr={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Qn,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Tr.variable="(?:[\\w-.]|(?:\\\\"+Tr.metaChar+"))+";Tr.className="(?:[\\w-]|(?:\\\\"+Tr.metaChar+"))+";Tr.value=Tr.string+"|"+Tr.number;Tr.id=Tr.variable;(function(){var r,e,t;for(r=Tr.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Tr.comparatorOp+="|@"+e;for(r=Tr.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Tr.comparatorOp+="|\\!"+e)})();var Hr=function(){return{checks:[]}},vt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},jC=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return c9(r.selector,e.selector)}),hV=function(){for(var r={},e,t=0;t<jC.length;t++)e=jC[t],r[e.selector]=e.matches;return r}(),vV=function(e,t){return hV[e](t)},pV="("+jC.map(function(r){return r.selector}).join("|")+")",Yd=function(e){return e.replace(new RegExp("\\\\("+Tr.metaChar+")","g"),function(t,n){return n})},yl=function(e,t,n){e[e.length-1]=n},FC=[{name:"group",query:!0,regex:"("+Tr.group+")",populate:function(e,t,n){var i=Hn(n,1),a=i[0];t.checks.push({type:vt.GROUP,value:a==="*"?a:a+"s"})}},{name:"state",query:!0,regex:pV,populate:function(e,t,n){var i=Hn(n,1),a=i[0];t.checks.push({type:vt.STATE,value:a})}},{name:"id",query:!0,regex:"\\#("+Tr.id+")",populate:function(e,t,n){var i=Hn(n,1),a=i[0];t.checks.push({type:vt.ID,value:Yd(a)})}},{name:"className",query:!0,regex:"\\.("+Tr.className+")",populate:function(e,t,n){var i=Hn(n,1),a=i[0];t.checks.push({type:vt.CLASS,value:Yd(a)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Tr.variable+")\\s*\\]",populate:function(e,t,n){var i=Hn(n,1),a=i[0];t.checks.push({type:vt.DATA_EXIST,field:Yd(a)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Tr.variable+")\\s*("+Tr.comparatorOp+")\\s*("+Tr.value+")\\s*\\]",populate:function(e,t,n){var i=Hn(n,3),a=i[0],o=i[1],s=i[2],u=new RegExp("^"+Tr.string+"$").exec(s)!=null;u?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:vt.DATA_COMPARE,field:Yd(a),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Tr.boolOp+")\\s*("+Tr.variable+")\\s*\\]",populate:function(e,t,n){var i=Hn(n,2),a=i[0],o=i[1];t.checks.push({type:vt.DATA_BOOL,field:Yd(o),operator:a})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Tr.meta+")\\s*("+Tr.comparatorOp+")\\s*("+Tr.number+")\\s*\\]\\]",populate:function(e,t,n){var i=Hn(n,3),a=i[0],o=i[1],s=i[2];t.checks.push({type:vt.META_COMPARE,field:Yd(a),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Tr.separator,populate:function(e,t){var n=e.currentSubject,i=e.edgeCount,a=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=i,o.compoundCount=a,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Hr();return s}},{name:"directedEdge",separator:!0,regex:Tr.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Hr(),i=t,a=Hr();return n.checks.push({type:vt.DIRECTED_EDGE,source:i,target:a}),yl(e,t,n),e.edgeCount++,a}else{var o=Hr(),s=t,u=Hr();return o.checks.push({type:vt.NODE_SOURCE,source:s,target:u}),yl(e,t,o),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Tr.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Hr(),i=t,a=Hr();return n.checks.push({type:vt.UNDIRECTED_EDGE,nodes:[i,a]}),yl(e,t,n),e.edgeCount++,a}else{var o=Hr(),s=t,u=Hr();return o.checks.push({type:vt.NODE_NEIGHBOR,node:s,neighbor:u}),yl(e,t,o),u}}},{name:"child",separator:!0,regex:Tr.child,populate:function(e,t){if(e.currentSubject==null){var n=Hr(),i=Hr(),a=e[e.length-1];return n.checks.push({type:vt.CHILD,parent:a,child:i}),yl(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=Hr(),s=e[e.length-1],u=Hr(),l=Hr(),c=Hr(),f=Hr();return o.checks.push({type:vt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:vt.TRUE}],f.checks.push({type:vt.TRUE}),u.checks.push({type:vt.PARENT,parent:f,child:c}),yl(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var d=Hr(),h=Hr(),v=[{type:vt.PARENT,parent:d,child:h}];return d.checks=t.checks,t.checks=v,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:Tr.descendant,populate:function(e,t){if(e.currentSubject==null){var n=Hr(),i=Hr(),a=e[e.length-1];return n.checks.push({type:vt.DESCENDANT,ancestor:a,descendant:i}),yl(e,t,n),e.compoundCount++,i}else if(e.currentSubject===t){var o=Hr(),s=e[e.length-1],u=Hr(),l=Hr(),c=Hr(),f=Hr();return o.checks.push({type:vt.COMPOUND_SPLIT,left:s,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:vt.TRUE}],f.checks.push({type:vt.TRUE}),u.checks.push({type:vt.ANCESTOR,ancestor:f,descendant:c}),yl(e,s,o),e.currentSubject=l,e.compoundCount++,c}else{var d=Hr(),h=Hr(),v=[{type:vt.ANCESTOR,ancestor:d,descendant:h}];return d.checks=t.checks,t.checks=v,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:Tr.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Gr("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],i=n.checks[0],a=i==null?null:i.type;a===vt.DIRECTED_EDGE?i.type=vt.NODE_TARGET:a===vt.UNDIRECTED_EDGE&&(i.type=vt.NODE_NEIGHBOR,i.node=i.nodes[1],i.neighbor=i.nodes[0],i.nodes=null)}}];FC.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var gV=function(e){for(var t,n,i,a=0;a<FC.length;a++){var o=FC[a],s=o.name,u=e.match(o.regexObj);if(u!=null){n=u,t=o,i=s;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:i,remaining:e}},yV=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},mV=function(e){var t=this,n=t.inputText=e,i=t[0]=Hr();for(t.length=1,n=yV(n);;){var a=gV(n);if(a.expr==null)return Gr("The selector `"+e+"`is invalid"),!1;var o=a.match.slice(1),s=a.expr.populate(t,i,o);if(s===!1)return!1;if(s!=null&&(i=s),n=a.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return Gr("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Gr("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Gr("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},bV=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return Tt(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},i=function(c,f){var d=c.type,h=c.value;switch(d){case vt.GROUP:{var v=e(h);return v.substring(0,v.length-1)}case vt.DATA_COMPARE:{var p=c.field,g=c.operator;return"["+p+n(e(g))+t(h)+"]"}case vt.DATA_BOOL:{var y=c.operator,b=c.field;return"["+e(y)+b+"]"}case vt.DATA_EXIST:{var m=c.field;return"["+m+"]"}case vt.META_COMPARE:{var _=c.operator,x=c.field;return"[["+x+n(e(_))+t(h)+"]]"}case vt.STATE:return h;case vt.ID:return"#"+h;case vt.CLASS:return"."+h;case vt.PARENT:case vt.CHILD:return a(c.parent,f)+n(">")+a(c.child,f);case vt.ANCESTOR:case vt.DESCENDANT:return a(c.ancestor,f)+" "+a(c.descendant,f);case vt.COMPOUND_SPLIT:{var C=a(c.left,f),w=a(c.subject,f),O=a(c.right,f);return C+(C.length>0?" ":"")+w+O}case vt.TRUE:return""}},a=function(c,f){return c.checks.reduce(function(d,h,v){return d+(f===c&&v===0?"$":"")+i(h,f)},"")},o="",s=0;s<this.length;s++){var u=this[s];o+=a(u,u.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},_V={parse:mV,toString:bV},$3=function(e,t,n){var i,a=Tt(e),o=at(e),s=Tt(n),u,l,c=!1,f=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(a||s||c)&&(u=!a&&!o?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":i=u.indexOf(l)>=0;break;case"$=":i=u.indexOf(l,u.length-l.length)>=0;break;case"^=":i=u.indexOf(l)===0;break;case"=":i=e===n;break;case">":d=!0,i=e>n;break;case">=":d=!0,i=e>=n;break;case"<":d=!0,i=e<n;break;case"<=":d=!0,i=e<=n;break;default:i=!1;break}return f&&(e!=null||!d)&&(i=!i),i},wV=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},xV=function(e){return e!==void 0},lT=function(e,t){return e.data(t)},EV=function(e,t){return e[t]()},Dn=[],cn=function(e,t){return e.checks.every(function(n){return Dn[n.type](n,t)})};Dn[vt.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Dn[vt.STATE]=function(r,e){var t=r.value;return vV(t,e)};Dn[vt.ID]=function(r,e){var t=r.value;return e.id()===t};Dn[vt.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Dn[vt.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return $3(EV(e,t),n,i)};Dn[vt.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,i=r.value;return $3(lT(e,t),n,i)};Dn[vt.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return wV(lT(e,t),n)};Dn[vt.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,xV(lT(e,t))};Dn[vt.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],i=e.source(),a=e.target();return cn(t,i)&&cn(n,a)||cn(n,i)&&cn(t,a)};Dn[vt.NODE_NEIGHBOR]=function(r,e){return cn(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&cn(r.neighbor,t)})};Dn[vt.DIRECTED_EDGE]=function(r,e){return cn(r.source,e.source())&&cn(r.target,e.target())};Dn[vt.NODE_SOURCE]=function(r,e){return cn(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&cn(r.target,t)})};Dn[vt.NODE_TARGET]=function(r,e){return cn(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&cn(r.source,t)})};Dn[vt.CHILD]=function(r,e){return cn(r.child,e)&&cn(r.parent,e.parent())};Dn[vt.PARENT]=function(r,e){return cn(r.parent,e)&&e.children().some(function(t){return cn(r.child,t)})};Dn[vt.DESCENDANT]=function(r,e){return cn(r.descendant,e)&&e.ancestors().some(function(t){return cn(r.ancestor,t)})};Dn[vt.ANCESTOR]=function(r,e){return cn(r.ancestor,e)&&e.descendants().some(function(t){return cn(r.descendant,t)})};Dn[vt.COMPOUND_SPLIT]=function(r,e){return cn(r.subject,e)&&cn(r.left,e)&&cn(r.right,e)};Dn[vt.TRUE]=function(){return!0};Dn[vt.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Dn[vt.FILTER]=function(r,e){var t=r.value;return t(e)};var OV=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===vt.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(a){for(var o=0;o<t.length;o++){var s=t[o];if(cn(s,a))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},SV=function(e){for(var t=this,n=0;n<t.length;n++){var i=t[n];if(cn(i,e))return!0}return!1},CV={matches:SV,filter:OV},Xl=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Tt(e)&&e.match(/^\s*$/)||(Ha(e)?this.addQuery({checks:[{type:vt.COLLECTION,value:e.collection()}]}):Sn(e)?this.addQuery({checks:[{type:vt.FILTER,value:e}]}):Tt(e)?this.parse(e)||(this.invalid=!0):pn("A selector must be created from a string; found "))},Kl=Xl.prototype;[_V,CV].forEach(function(r){return jt(Kl,r)});Kl.text=function(){return this.inputText};Kl.size=function(){return this.length};Kl.eq=function(r){return this[r]};Kl.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};Kl.addQuery=function(r){this[this.length++]=r};Kl.selector=Kl.toString;var Bl={allAre:function(e){var t=new Xl(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Xl(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(i)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var i=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!i)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(i){return e.hasElementWithId(i.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Bl.allAreNeighbours=Bl.allAreNeighbors;Bl.has=Bl.contains;Bl.equal=Bl.equals=Bl.same;var _o=function(e,t){return function(i,a,o,s){var u=i,l=this,c;if(u==null?c="":Ha(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,d=f.traversalCache=f.traversalCache||{},h=d[t]=d[t]||[],v=_f(c),p=h[v];return p||(h[v]=e.call(l,i,a,o,s))}else return e.call(l,i,a,o,s)}},Mh={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var i=0;i<this.length;i++){var a=this[i],o=a._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var i=0;i<n.length;i++){var a=n[i];t.push(a)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var i=this[n],a=i.parents();t=t||a,t=t.intersect(a)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:_o(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],i=n._private.children,a=0;a<i.length;a++)e.push(i[a]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(i){for(var a=0;a<i.length;a++){var o=i[a];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function cT(r,e,t,n){for(var i=[],a=new qh,o=r.cy(),s=o.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?i.push(l):s&&n(i,a,l)}for(;i.length>0;){var c=i.shift();e(c),a.add(c.id()),s&&n(i,a,c)}return r}function W3(r,e,t){if(t.isParent())for(var n=t._private.children,i=0;i<n.length;i++){var a=n[i];e.has(a.id())||r.push(a)}}Mh.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cT(this,r,e,W3)};function H3(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}Mh.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cT(this,r,e,H3)};function TV(r,e,t){H3(r,e,t),W3(r,e,t)}Mh.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cT(this,r,e,TV)};Mh.ancestors=Mh.parents;var Tg,Y3;Tg=Y3={data:qr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:qr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:qr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:qr.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:qr.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Tg.attr=Tg.data;Tg.removeAttr=Tg.removeData;var AV=Y3,k0={};function W1(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,i=t[0],a=i._private.edges,o=0;o<a.length;o++){var s=a[o];!e&&s.isLoop()||(n+=r(i,s))}return n}else return}}jt(k0,{degree:W1(function(r,e){return e.source().same(e.target())?2:1}),indegree:W1(function(r,e){return e.target().same(r)?1:0}),outdegree:W1(function(r,e){return e.source().same(r)?1:0})});function Xd(r,e){return function(t){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}jt(k0,{minDegree:Xd("degree",function(r,e){return r<e}),maxDegree:Xd("degree",function(r,e){return r>e}),minIndegree:Xd("indegree",function(r,e){return r<e}),maxIndegree:Xd("indegree",function(r,e){return r>e}),minOutdegree:Xd("outdegree",function(r,e){return r<e}),maxOutdegree:Xd("outdegree",function(r,e){return r>e})});jt(k0,{totalDegree:function(e){for(var t=0,n=this.nodes(),i=0;i<n.length;i++)t+=n[i].degree(e);return t}});var Wo,X3,K3=function(e,t,n){for(var i=0;i<e.length;i++){var a=e[i];if(!a.locked()){var o=a._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};a.isParent()&&!(s.x===0&&s.y===0)&&a.children().shift(s,n),a.dirtyBoundingBoxCache()}}},HR={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){K3(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};Wo=X3={position:qr.data(HR),silentPosition:qr.data(jt({},HR,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){K3(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Pr(e))t?this.silentPosition(e):this.position(e);else if(Sn(e)){var n=e,i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a],s=void 0;(s=n(o,a))&&(t?o.silentPosition(s):o.position(s))}i.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var i;if(Pr(e)?(i={x:at(e.x)?e.x:0,y:at(e.y)?e.y:0},n=t):Tt(e)&&at(t)&&(i={x:0,y:0},i[e]=t),i!=null){var a=this.cy();a.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(a.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var u=s.position(),l={x:u.x+i.x,y:u.y+i.y};n?s.silentPosition(l):s.position(l)}}a.endBatch()}return this},silentShift:function(e,t){return Pr(e)?this.shift(e,!0):Tt(e)&&at(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],i=this.cy(),a=i.zoom(),o=i.pan(),s=Pr(e)?e:void 0,u=s!==void 0||t!==void 0&&Tt(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-o[e])/a):s!==void 0&&c.position(O3(s,a,o))}else{var f=n.position();return s=S0(f,a,o),e===void 0?s:s[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],i=this.cy(),a=Pr(e)?e:void 0,o=a!==void 0||t!==void 0&&Tt(e),s=i.hasCompoundNodes();if(n&&n.isNode())if(o)for(var u=0;u<this.length;u++){var l=this[u],c=s?l.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var h=d?c.position():{x:0,y:0};t!==void 0?l.position(e,t+h[e]):a!==void 0&&l.position({x:a.x+h.x,y:a.y+h.y})}else{var v=n.position(),p=s?n.parent():null,g=p&&p.length>0,y=g;g&&(p=p[0]);var b=y?p.position():{x:0,y:0};return a={x:v.x-b.x,y:v.y-b.y},e===void 0?a:a[e]}else if(!o)return;return this}};Wo.modelPosition=Wo.point=Wo.position;Wo.modelPositions=Wo.points=Wo.positions;Wo.renderedPoint=Wo.renderedPosition;Wo.relativePoint=Wo.relativePosition;var PV=X3,Oh,ac;Oh=ac={};ac.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),i=t.pan(),a=e.x1*n+i.x,o=e.x2*n+i.x,s=e.y1*n+i.y,u=e.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:u,w:o-a,h:u-s}};ac.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};ac.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,u=o.children(),l=o.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),d=s.position;(f.w===0||f.h===0)&&(f={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function h(A,k,R){var I=0,M=0,N=k+R;return A>0&&N>0&&(I=k/N*A,M=R/N*A),{biasDiff:I,biasComplementDiff:M}}function v(A,k,R,I){if(R.units==="%")switch(I){case"width":return A>0?R.pfValue*A:0;case"height":return k>0?R.pfValue*k:0;case"average":return A>0&&k>0?R.pfValue*(A+k)/2:0;case"min":return A>0&&k>0?A>k?R.pfValue*k:R.pfValue*A:0;case"max":return A>0&&k>0?A>k?R.pfValue*A:R.pfValue*k:0;default:return 0}else return R.units==="px"?R.pfValue:0}var p=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var g=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var y=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(y=y*100/c.height.val);var b=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(b=b*100/c.height.val);var m=h(c.width.val-f.w,p,g),_=m.biasDiff,x=m.biasComplementDiff,C=h(c.height.val-f.h,y,b),w=C.biasDiff,O=C.biasComplementDiff;s.autoPadding=v(f.w,f.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(f.w,c.width.val),d.x=(-_+f.x1+f.x2+x)/2,s.autoHeight=Math.max(f.h,c.height.val),d.y=(-w+f.y1+f.y2+O)/2}for(var n=0;n<this.length;n++){var i=this[n],a=i._private;(!a.compoundBoundsClean||r)&&(t(i),e.batching()||(a.compoundBoundsClean=!0))}return this};var mo=function(e){return e===1/0||e===-1/0?0:e},zo=function(e,t,n,i,a){i-t===0||a-n===0||t==null||n==null||i==null||a==null||(e.x1=t<e.x1?t:e.x1,e.x2=i>e.x2?i:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=a>e.y2?a:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Pl=function(e,t){return t==null?e:zo(e,t.x1,t.y1,t.x2,t.y2)},ap=function(e,t,n){return xa(e,t,n)},Fm=function(e,t,n){if(!t.cy().headless()){var i=t._private,a=i.rstyle,o=a.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,u,l;if(s!=="none"){n==="source"?(u=a.srcX,l=a.srcY):n==="target"?(u=a.tgtX,l=a.tgtY):(u=a.midX,l=a.midY);var c=i.arrowBounds=i.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-o,f.y1=l-o,f.x2=u+o,f.y2=l+o,f.w=f.x2-f.x1,f.h=f.y2-f.y1,Eb(f,1),zo(e,f.x1,f.y1,f.x2,f.y2)}}},H1=function(e,t,n){if(!t.cy().headless()){var i;n?i=n+"-":i="";var a=t._private,o=a.rstyle,s=t.pstyle(i+"label").strValue;if(s){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=ap(o,"labelWidth",n),f=ap(o,"labelHeight",n),d=ap(o,"labelX",n),h=ap(o,"labelY",n),v=t.pstyle(i+"text-margin-x").pfValue,p=t.pstyle(i+"text-margin-y").pfValue,g=t.isEdge(),y=t.pstyle(i+"text-rotation"),b=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,_=m/2,x=t.pstyle("text-background-padding").pfValue,C=2,w=f,O=c,A=O/2,k=w/2,R,I,M,N;if(g)R=d-A,I=d+A,M=h-k,N=h+k;else{switch(u.value){case"left":R=d-O,I=d;break;case"center":R=d-A,I=d+A;break;case"right":R=d,I=d+O;break}switch(l.value){case"top":M=h-w,N=h;break;case"center":M=h-k,N=h+k;break;case"bottom":M=h,N=h+w;break}}var F=v-Math.max(b,_)-x-C,z=v+Math.max(b,_)+x+C,B=p-Math.max(b,_)-x-C,U=p+Math.max(b,_)+x+C;R+=F,I+=z,M+=B,N+=U;var W=n||"main",Y=a.labelBounds,H=Y[W]=Y[W]||{};H.x1=R,H.y1=M,H.x2=I,H.y2=N,H.w=I-R,H.h=N-M,H.leftPad=F,H.rightPad=z,H.topPad=B,H.botPad=U;var J=g&&y.strValue==="autorotate",le=y.pfValue!=null&&y.pfValue!==0;if(J||le){var fe=J?ap(a.rstyle,"labelAngle",n):y.pfValue,ue=Math.cos(fe),ge=Math.sin(fe),ve=(R+I)/2,de=(M+N)/2;if(!g){switch(u.value){case"left":ve=I;break;case"right":ve=R;break}switch(l.value){case"top":de=N;break;case"bottom":de=M;break}}var ie=function(be,j){return be=be-ve,j=j-de,{x:be*ue-j*ge+ve,y:be*ge+j*ue+de}},Q=ie(R,M),re=ie(R,N),se=ie(I,M),pe=ie(I,N);R=Math.min(Q.x,re.x,se.x,pe.x),I=Math.max(Q.x,re.x,se.x,pe.x),M=Math.min(Q.y,re.y,se.y,pe.y),N=Math.max(Q.y,re.y,se.y,pe.y)}var Oe=W+"Rot",Ce=Y[Oe]=Y[Oe]||{};Ce.x1=R,Ce.y1=M,Ce.x2=I,Ce.y2=N,Ce.w=I-R,Ce.h=N-M,zo(e,R,M,I,N),zo(a.labelBounds.all,R,M,I,N)}return e}},YR=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,i=t.pstyle("outline-width").value,a=t.pstyle("outline-offset").value,o=i+a;Z3(e,t,n,o,"outside",o/2)}},Z3=function(e,t,n,i,a,o){if(!(n===0||i<=0||a==="inside")){var s=t.cy(),u=t.pstyle("shape").value,l=s.renderer().nodeShapes[u],c=t.position(),f=c.x,d=c.y,h=t.width(),v=t.height();if(l.hasMiterBounds){a==="center"&&(i/=2);var p=l.miterBounds(f,d,h,v,i);Pl(e,p)}else o!=null&&o>0&&Ob(e,[o,o,o,o])}},RV=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,i=t.pstyle("border-width").pfValue,a=t.pstyle("border-position").value;Z3(e,t,n,i,a)}},kV=function(e,t){var n=e._private.cy,i=n.styleEnabled(),a=n.headless(),o=oa(),s=e._private,u=e.isNode(),l=e.isEdge(),c,f,d,h,v,p,g=s.rstyle,y=u&&i?e.pstyle("bounds-expansion").pfValue:[0],b=function(Re){return Re.pstyle("display").value!=="none"},m=!i||b(e)&&(!l||b(e.source())&&b(e.target()));if(m){var _=0,x=0;i&&t.includeOverlays&&(_=e.pstyle("overlay-opacity").value,_!==0&&(x=e.pstyle("overlay-padding").value));var C=0,w=0;i&&t.includeUnderlays&&(C=e.pstyle("underlay-opacity").value,C!==0&&(w=e.pstyle("underlay-padding").value));var O=Math.max(x,w),A=0,k=0;if(i&&(A=e.pstyle("width").pfValue,k=A/2),u&&t.includeNodes){var R=e.position();v=R.x,p=R.y;var I=e.outerWidth(),M=I/2,N=e.outerHeight(),F=N/2;c=v-M,f=v+M,d=p-F,h=p+F,zo(o,c,d,f,h),i&&YR(o,e),i&&t.includeOutlines&&!a&&YR(o,e),i&&RV(o,e)}else if(l&&t.includeEdges)if(i&&!a){var z=e.pstyle("curve-style").strValue;if(c=Math.min(g.srcX,g.midX,g.tgtX),f=Math.max(g.srcX,g.midX,g.tgtX),d=Math.min(g.srcY,g.midY,g.tgtY),h=Math.max(g.srcY,g.midY,g.tgtY),c-=k,f+=k,d-=k,h+=k,zo(o,c,d,f,h),z==="haystack"){var B=g.haystackPts;if(B&&B.length===2){if(c=B[0].x,d=B[0].y,f=B[1].x,h=B[1].y,c>f){var U=c;c=f,f=U}if(d>h){var W=d;d=h,h=W}zo(o,c-k,d-k,f+k,h+k)}}else if(z==="bezier"||z==="unbundled-bezier"||kl(z,"segments")||kl(z,"taxi")){var Y;switch(z){case"bezier":case"unbundled-bezier":Y=g.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":Y=g.linePts;break}if(Y!=null)for(var H=0;H<Y.length;H++){var J=Y[H];c=J.x-k,f=J.x+k,d=J.y-k,h=J.y+k,zo(o,c,d,f,h)}}}else{var le=e.source(),fe=le.position(),ue=e.target(),ge=ue.position();if(c=fe.x,f=ge.x,d=fe.y,h=ge.y,c>f){var ve=c;c=f,f=ve}if(d>h){var de=d;d=h,h=de}c-=k,f+=k,d-=k,h+=k,zo(o,c,d,f,h)}if(i&&t.includeEdges&&l&&(Fm(o,e,"mid-source"),Fm(o,e,"mid-target"),Fm(o,e,"source"),Fm(o,e,"target")),i){var ie=e.pstyle("ghost").value==="yes";if(ie){var Q=e.pstyle("ghost-offset-x").pfValue,re=e.pstyle("ghost-offset-y").pfValue;zo(o,o.x1+Q,o.y1+re,o.x2+Q,o.y2+re)}}var se=s.bodyBounds=s.bodyBounds||{};DP(se,o),Ob(se,y),Eb(se,1),i&&(c=o.x1,f=o.x2,d=o.y1,h=o.y2,zo(o,c-O,d-O,f+O,h+O));var pe=s.overlayBounds=s.overlayBounds||{};DP(pe,o),Ob(pe,y),Eb(pe,1);var Oe=s.labelBounds=s.labelBounds||{};Oe.all!=null?d7(Oe.all):Oe.all=oa(),i&&t.includeLabels&&(t.includeMainLabels&&H1(o,e,null),l&&(t.includeSourceLabels&&H1(o,e,"source"),t.includeTargetLabels&&H1(o,e,"target")))}return o.x1=mo(o.x1),o.y1=mo(o.y1),o.x2=mo(o.x2),o.y2=mo(o.y2),o.w=mo(o.x2-o.x1),o.h=mo(o.y2-o.y1),o.w>0&&o.h>0&&m&&(Ob(o,y),Eb(o,1)),o},Q3=function(e){var t=0,n=function(o){return(o?1:0)<<t++},i=0;return i+=n(e.incudeNodes),i+=n(e.includeEdges),i+=n(e.includeLabels),i+=n(e.includeMainLabels),i+=n(e.includeSourceLabels),i+=n(e.includeTargetLabels),i+=n(e.includeOverlays),i+=n(e.includeOutlines),i},J3=function(e){var t=function(s){return Math.round(s)};if(e.isEdge()){var n=e.source().position(),i=e.target().position();return TP([t(n.x),t(n.y),t(i.x),t(i.y)])}else{var a=e.position();return TP([t(a.x),t(a.y)])}},XR=function(e,t){var n=e._private,i,a=e.isEdge(),o=t==null?KR:Q3(t),s=o===KR;if(n.bbCache==null?(i=kV(e,Ag),n.bbCache=i,n.bbCachePosKey=J3(e)):i=n.bbCache,!s){var u=e.isNode();i=oa(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Pl(i,n.overlayBounds):Pl(i,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!a||t.includeSourceLabels&&t.includeTargetLabels)?Pl(i,n.labelBounds.all):(t.includeMainLabels&&Pl(i,n.labelBounds.mainRot),t.includeSourceLabels&&Pl(i,n.labelBounds.sourceRot),t.includeTargetLabels&&Pl(i,n.labelBounds.targetRot))),i.w=i.x2-i.x1,i.h=i.y2-i.y1}return i},Ag={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},KR=Q3(Ag),ZR=Ri(Ag);ac.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=Ih(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==J3(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=Ag:r=ZR(r),e=XR(this[0],r);else{e=oa(),r=r||Ag;var i=ZR(r),a=this,o=a.cy(),s=o.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),s&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<a.length;u++){var l=a[u];n(l)&&l.dirtyBoundingBoxCache(),Pl(e,XR(l,i))}}return e.x1=mo(e.x1),e.y1=mo(e.y1),e.x2=mo(e.x2),e.y2=mo(e.y2),e.w=mo(e.x2-e.x1),e.h=mo(e.y2-e.y1),e};ac.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};ac.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),i=t.collection();if(n&&(i=e.filter(function(l){return l.isParent()}),e=e.not(i)),Pr(r)){var a=r;r=function(){return a}}var o=function(c,f){return c._private.bbAtOldPos=r(c,f)},s=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0));var u=f7(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),i.updateCompoundBounds(!0)),t.endBatch(),u};Oh.boundingbox=Oh.bb=Oh.boundingBox;Oh.renderedBoundingbox=Oh.renderedBoundingBox;var IV=ac,Ep,Kg;Ep=Kg={};var ej=function(e){e.uppercaseName=dP(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=dP(e.outerName),Ep[e.name]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),i[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),i.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Ep["outer"+e.uppercaseName]=function(){var n=this[0],i=n._private,a=i.cy,o=a._private.styleEnabled;if(n)if(o){var s=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return s+l+c}else return 1},Ep["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var i=n[e.name]();return i*this.cy().zoom()}},Ep["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var i=n[e.outerName]();return i*this.cy().zoom()}}};ej({name:"width"});ej({name:"height"});Kg.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Kg.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Kg.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var DV=Kg,MV=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},LV=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return S0(t(e),n.zoom(),n.pan())}},NV=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),i=n.pan(),a=n.zoom();return t(e).map(function(o){return S0(o,a,i)})}},jV=function(e){return e.renderer().getControlPoints(e)},FV=function(e){return e.renderer().getSegmentPoints(e)},BV=function(e){return e.renderer().getSourceEndpoint(e)},UV=function(e){return e.renderer().getTargetEndpoint(e)},zV=function(e){return e.renderer().getEdgeMidpoint(e)},QR={controlPoints:{get:jV,mult:!0},segmentPoints:{get:FV,mult:!0},sourceEndpoint:{get:BV},targetEndpoint:{get:UV},midpoint:{get:zV}},qV=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},GV=Object.keys(QR).reduce(function(r,e){var t=QR[e],n=qV(e);return r[e]=function(){return MV(this,t.get)},t.mult?r[n]=function(){return NV(this,t.get)}:r[n]=function(){return LV(this,t.get)},r},{}),VV=jt({},PV,IV,DV,GV);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var tj=function(e,t){this.recycle(e,t)};function op(){return!1}function Bm(){return!0}tj.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=op,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Bm:op):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,i=this.cy.zoom(),a=this.cy.pan();this.renderedPosition={x:n.x*i+a.x,y:n.y*i+a.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Bm;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Bm;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Bm,this.stopPropagation()},isDefaultPrevented:op,isPropagationStopped:op,isImmediatePropagationStopped:op};var rj=/^([^.]+)(\.(?:[^.]+))?$/,$V=".*",nj={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},JR=Object.keys(nj),WV={};function I0(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:WV,e=arguments.length>1?arguments[1]:void 0,t=0;t<JR.length;t++){var n=JR[t];this[n]=r[n]||nj[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var Zl=I0.prototype,ij=function(e,t,n,i,a,o,s){Sn(i)&&(a=i,i=null),s&&(o==null?o=s:o=jt({},o,s));for(var u=Kr(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!Wl(c)){var f=c.match(rj);if(f){var d=f[1],h=f[2]?f[2]:null,v=t(e,c,d,h,i,a,o);if(v===!1)break}}}},ek=function(e,t){return e.addEventFields(e.context,t),new tj(t.type,t)},HV=function(e,t,n){if(Jq(n)){t(e,n);return}else if(Pr(n)){t(e,ek(e,n));return}for(var i=Kr(n)?n:n.split(/\s+/),a=0;a<i.length;a++){var o=i[a];if(!Wl(o)){var s=o.match(rj);if(s){var u=s[1],l=s[2]?s[2]:null,c=ek(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};Zl.on=Zl.addListener=function(r,e,t,n,i){return ij(this,function(a,o,s,u,l,c,f){Sn(c)&&a.listeners.push({event:o,callback:c,type:s,namespace:u,qualifier:l,conf:f})},r,e,t,n,i),this};Zl.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};Zl.removeListener=Zl.off=function(r,e,t,n){var i=this;this.emitting!==0&&(this.listeners=L9(this.listeners));for(var a=this.listeners,o=function(l){var c=a[l];ij(i,function(f,d,h,v,p,g){if((c.type===h||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!p||f.qualifierCompare(c.qualifier,p))&&(!g||c.callback===g))return a.splice(l,1),!1},r,e,t,n)},s=a.length-1;s>=0;s--)o(s);return this};Zl.removeAllListeners=function(){return this.removeListener("*")};Zl.emit=Zl.trigger=function(r,e,t){var n=this.listeners,i=n.length;return this.emitting++,Kr(e)||(e=[e]),HV(this,function(a,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],i=n.length);for(var s=function(){var c=n[u];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===$V)&&a.eventMatches(a.context,c,o)){var f=[o];e!=null&&j9(f,e),a.beforeEmit(a.context,c,o),c.conf&&c.conf.one&&(a.listeners=a.listeners.filter(function(v){return v!==c}));var d=a.callbackContext(a.context,c,o),h=c.callback.apply(d,f);a.afterEmit(a.context,c,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},u=0;u<i;u++)s();a.bubble(a.context)&&!o.isPropagationStopped()&&a.parent(a.context).emit(o,e)},r),this.emitting--,this};var YV={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Vg(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Um=function(e){return Tt(e)?new Xl(e):e},aj={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new I0(YV,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var i=Um(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n)}return this},removeListener:function(e,t,n){for(var i=Um(t),a=0;a<this.length;a++){var o=this[a];o.emitter().removeListener(e,i,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var i=Um(t),a=0;a<this.length;a++){var o=this[a];o.emitter().one(e,i,n)}return this},once:function(e,t,n){for(var i=Um(t),a=0;a<this.length;a++){var o=this[a];o.emitter().on(e,i,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var i=this[n];i.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};qr.eventAliasesOn(aj);var oj={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var i=this[n];i.isNode()?e.push(i):t.push(i)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Tt(e)||Ha(e))return new Xl(e).filter(this);if(Sn(e)){for(var n=this.spawn(),i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Tt(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var i=this[n],a=e.has(i);a||t.push(i)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Tt(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),i=this,a=e,o=this.length<e.length,s=o?i:a,u=o?a:i,l=0;l<s.length;l++){var c=s[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;Tt(e)&&(e=t.$(e));var n=this.spawn(),i=this,a=e,o=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],d=f._private.data.id,h=l.hasElementWithId(d);h||n.push(f)}};return o(i,a),o(a,i),n},diff:function(e){var t=this._private.cy;Tt(e)&&(e=t.$(e));var n=this.spawn(),i=this.spawn(),a=this.spawn(),o=this,s=e,u=function(c,f,d){for(var h=0;h<c.length;h++){var v=c[h],p=v._private.data.id,g=f.hasElementWithId(p);g?a.merge(v):d.push(v)}};return u(o,s,n),u(s,o,i),{left:n,right:i,both:a}},add:function(e){var t=this._private.cy;if(!e)return this;if(Tt(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=this.spawnSelf(),a=0;a<e.length;a++){var o=e[a],s=!this.has(o);s&&i.push(o)}return i},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Tt(e)){var i=e;e=n.mutableElements().filter(i)}for(var a=t.map,o=0;o<e.length;o++){var s=e[o],u=s._private.data.id,l=!a.has(u);if(l){var c=this.length++;this[c]=s,a.set(u,{ele:s,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),i=this._private,a=i.map;this[e]=void 0,a.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,u=this[s],l=u._private.data.id;this[s]=void 0,this[e]=u,a.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,i=t.map,a=i.get(n);if(!a)return this;var o=a.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Tt(e)){var n=e;e=t.mutableElements().filter(n)}for(var i=0;i<e.length;i++)this.unmergeOne(e[i]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],i=this,a=0;a<i.length;a++){var o=i[a],s=t?e.apply(t,[o,a,i]):e(o,a,i);n.push(s)}return n},reduce:function(e,t){for(var n=t,i=this,a=0;a<i.length;a++)n=e(n,i[a],a,i);return n},max:function(e,t){for(var n=-1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u>n&&(n=u,i=s)}return{value:n,ele:i}},min:function(e,t){for(var n=1/0,i,a=this,o=0;o<a.length;o++){var s=a[o],u=t?e.apply(t,[s,o,a]):e(s,o,a);u<n&&(n=u,i=s)}return{value:n,ele:i}}},Mr=oj;Mr.u=Mr["|"]=Mr["+"]=Mr.union=Mr.or=Mr.add;Mr["\\"]=Mr["!"]=Mr["-"]=Mr.difference=Mr.relativeComplement=Mr.subtract=Mr.not;Mr.n=Mr["&"]=Mr["."]=Mr.and=Mr.intersection=Mr.intersect;Mr["^"]=Mr["(+)"]=Mr["(-)"]=Mr.symmetricDifference=Mr.symdiff=Mr.xor;Mr.fnFilter=Mr.filterFn=Mr.stdFilter=Mr.filter;Mr.complement=Mr.abscomp=Mr.absoluteComplement;var XV={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},sj=function(e,t){var n=e.cy(),i=n.hasCompoundNodes();function a(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?i?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?J2:0}var o=a(e)-a(t);if(o!==0)return o;function s(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=s(e)-s(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},Xb={forEach:function(e,t){if(Sn(e))for(var n=this.length,i=0;i<n;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],i=this.length;t==null&&(t=i),e==null&&(e=0),e<0&&(e=i+e),t<0&&(t=i+t);for(var a=e;a>=0&&a<t&&a<i;a++)n.push(this[a]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Sn(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(sj)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var i=t.data.parent?e.parents().size():0;return e.isParent()?i:J2-1}else{var a=t.source,o=t.target,s=a.zDepth(),u=o.zDepth();return Math.max(s,u,0)}}}};Xb.each=Xb.forEach;var KV=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":ei(Symbol))!=e&&ei(Symbol.iterator)!=e;t&&(Xb[Symbol.iterator]=function(){var n=this,i={value:void 0,done:!1},a=0,o=this.length;return a3({next:function(){return a<o?i.value=n[a++]:(i.value=void 0,i.done=!0),i}},Symbol.iterator,function(){return this})})};KV();var ZV=Ri({nodeDimensionsIncludeLabels:!1}),Cb={layoutDimensions:function(e){e=ZV(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var i=this.nodes().filter(function(x){return!x.isParent()}),a=this.cy(),o=t.eles,s=function(C){return C.id()},u=Ih(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(C,w,O){var A={x:w.x1+w.w/2,y:w.y1+w.h/2},k={x:(O.x-A.x)*C,y:(O.y-A.y)*C};return{x:A.x+k.x,y:A.y+k.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var C=oa(),w=0;w<i.length;w++){var O=i[w],A=u(O,w);S3(C,A.x,A.y)}return C},d=f(),h=Ih(function(x,C){var w=u(x,C);if(c){var O=Math.abs(t.spacingFactor);w=l(O,d,w)}return t.transform!=null&&(w=t.transform(x,w)),w},s);if(t.animate){for(var v=0;v<i.length;v++){var p=i[v],g=h(p,v),y=t.animateFilter==null||t.animateFilter(p,v);if(y){var b=p.animation({position:g,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}else p.position(g)}if(t.fit){var m=a.animation({fit:{boundingBox:o.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var _=a.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(_)}e.animations.forEach(function(x){return x.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Gh.all(e.animations.map(function(x){return x.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else i.positions(h),t.fit&&a.fit(t.eles,t.padding),t.zoom!=null&&a.zoom(t.zoom),t.pan&&a.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(jt({},e,{eles:this}))}};Cb.createLayout=Cb.makeLayout=Cb.layout;function uj(r,e,t){var n=t._private,i=n.styleCache=n.styleCache||[],a;return(a=i[r])!=null||(a=i[r]=e(t)),a}function D0(r,e){return r=_f(r),function(n){return uj(r,e,n)}}function M0(r,e){r=_f(r);var t=function(i){return e.call(i)};return function(){var i=this[0];if(i)return uj(r,t,i)}}var Ci={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),i=t.styleEnabled();return n&&i&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(a){return a._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(i){t(i),i.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var i=t.hasCompoundNodes(),a=this;e=!!(e||e===void 0),i&&(a=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=a;return e?o.emitAndNotify("style"):o.emit("style"),a.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],i=n.cy();if(i.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,i.style().apply(n));var a=n._private.style[e];return a??(t?i.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var i=!1,a=n.style();if(Pr(e)){var o=e;a.applyBypass(this,o,i),this.emitAndNotify("style")}else if(Tt(e))if(t===void 0){var s=this[0];return s?a.getStylePropertyValue(s,e):void 0}else a.applyBypass(this,e,t,i),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?a.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,i=t.style(),a=this;if(e===void 0)for(var o=0;o<a.length;o++){var s=a[o];i.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var u=0;u<a.length;u++){var l=a[u];i.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var i=n._private,a=n.pstyle("opacity").value;if(!t)return a;var o=i.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var u=o[s],l=u.pstyle("opacity").value;a=l*a}return a}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Y1(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var i=0;i<n.length;i++){var a=n[i];if(!e(a))return!1}return!0}function fT(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var i=this.cy();if(!i.styleEnabled())return!0;var a=this[0],o=i.hasCompoundNodes();if(a){var s=a._private;if(!e(a))return!1;if(a.isNode())return!o||Y1(a,n);var u=s.source,l=s.target;return t(u)&&(!o||Y1(u,t))&&(u===l||t(l)&&(!o||Y1(l,t)))}}}var Vh=D0("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Ci.takesUpSpace=M0("takesUpSpace",fT({ok:Vh}));var QV=D0("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Vh(r)}),JV=D0("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Vh(r)});Ci.interactive=M0("interactive",fT({ok:QV,parentOk:JV,edgeOkViaNode:Vh}));Ci.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var e$=D0("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Vh(r)}),t$=Vh;Ci.visible=M0("visible",fT({ok:e$,edgeOkViaNode:t$}));Ci.hidden=function(){var r=this[0];if(r)return!r.visible()};Ci.isBundledBezier=M0("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Ci.bypass=Ci.css=Ci.style;Ci.renderedCss=Ci.renderedStyle;Ci.removeBypass=Ci.removeCss=Ci.removeStyle;Ci.pstyle=Ci.parsedStyle;var Ul={};function tk(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],i=e[1];this.on(r.event,n,i)}else if(e.length===1&&Sn(e[0])){var a=e[0];this.on(r.event,a)}else if(e.length===0||e.length===1&&Kr(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var u=this[s],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var d=this.spawn(t);d.updateStyle(),d.emit(r.event),o&&d.emit(o)}return this}}function $h(r){Ul[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},Ul[r.on]=tk({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),Ul[r.off]=tk({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}$h({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});$h({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});$h({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});$h({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});Ul.deselect=Ul.unselect;Ul.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};$h({field:"active",on:"activate",off:"unactivate"});$h({field:"pannable",on:"panify",off:"unpanify"});Ul.inactive=function(){var r=this[0];if(r)return!r._private.active};var zi={},rk=function(e){return function(n){for(var i=this,a=[],o=0;o<i.length;o++){var s=i[o];if(s.isNode()){for(var u=!1,l=s.connectedEdges(),c=0;c<l.length;c++){var f=l[c],d=f.source(),h=f.target();if(e.noIncomingEdges&&h===s&&d!==s||e.noOutgoingEdges&&d===s&&h!==s){u=!0;break}}u||a.push(s)}}return this.spawn(a,!0).filter(n)}},nk=function(e){return function(t){for(var n=this,i=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode())for(var s=o.connectedEdges(),u=0;u<s.length;u++){var l=s[u],c=l.source(),f=l.target();e.outgoing&&c===o?(i.push(l),i.push(f)):e.incoming&&f===o&&(i.push(l),i.push(c))}}return this.spawn(i,!0).filter(t)}},ik=function(e){return function(t){for(var n=this,i=[],a={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,u=0;u<o.length;u++){var l=o[u],c=l.id();a[c]||(a[c]=!0,i.push(l),s=!0)}if(!s)break;n=o}return this.spawn(i,!0).filter(t)}};zi.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};jt(zi,{roots:rk({noIncomingEdges:!0}),leaves:rk({noOutgoingEdges:!0}),outgoers:_o(nk({outgoing:!0}),"outgoers"),successors:ik({outgoing:!0}),incomers:_o(nk({incoming:!0}),"incomers"),predecessors:ik({})});jt(zi,{neighborhood:_o(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var i=t[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],u=s.source(),l=s.target(),c=i===u?l:u;c.length>0&&e.push(c[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});zi.neighbourhood=zi.neighborhood;zi.closedNeighbourhood=zi.closedNeighborhood;zi.openNeighbourhood=zi.openNeighborhood;jt(zi,{source:_o(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:_o(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:ak({attr:"source"}),targets:ak({attr:"target"})});function ak(r){return function(t){for(var n=[],i=0;i<this.length;i++){var a=this[i],o=a._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}jt(zi,{edgesWith:_o(ok(),"edgesWith"),edgesTo:_o(ok({thisIsSrc:!0}),"edgesTo")});function ok(r){return function(t){var n=[],i=this._private.cy,a=r||{};Tt(t)&&(t=i.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,u=0;u<s.length;u++){var l=s[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),d=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=f||d;h&&((a.thisIsSrc||a.thisIsTgt)&&(a.thisIsSrc&&!f||a.thisIsTgt&&!d)||n.push(l))}return this.spawn(n,!0)}}jt(zi,{connectedEdges:_o(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];if(i.isNode())for(var a=i._private.edges,o=0;o<a.length;o++){var s=a[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:_o(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var i=t[n];i.isEdge()&&(e.push(i.source()[0]),e.push(i.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:_o(sk(),"parallelEdges"),codirectedEdges:_o(sk({codirected:!0}),"codirectedEdges")});function sk(r){var e={codirected:!1};return r=jt({},e,r),function(n){for(var i=[],a=this.edges(),o=r,s=0;s<a.length;s++)for(var u=a[s],l=u._private,c=l.source,f=c._private.data.id,d=l.data.target,h=c._private.edges,v=0;v<h.length;v++){var p=h[v],g=p._private.data,y=g.target,b=g.source,m=y===d&&b===f,_=f===y&&d===b;(o.codirected&&m||!o.codirected&&(m||_))&&i.push(p)}return this.spawn(i,!0).filter(n)}}jt(zi,{components:function(e){var t=this,n=t.cy(),i=n.collection(),a=e==null?t.nodes():e.nodes(),o=[];e!=null&&a.empty()&&(a=e.sources());var s=function(c,f){i.merge(c),a.unmerge(c),f.merge(c)};if(a.empty())return t.spawn();var u=function(){var c=n.collection();o.push(c);var f=a[0];s(f,c),t.bfs({directed:!1,roots:f,visit:function(h){return s(h,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(h){t.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(a.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});zi.componentsOf=zi.components;var Ti=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){pn("A collection must have a reference to the core");return}var a=new bu,o=!1;if(!t)t=[];else if(t.length>0&&Pr(t[0])&&!Vg(t[0])){o=!0;for(var s=[],u=new qh,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=x3();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var h=new O0(e,f,!1);s.push(h),u.add(d.id)}t=s}this.length=0;for(var v=0,p=t.length;v<p;v++){var g=t[v][0];if(g!=null){var y=g._private.data.id;(!n||!a.has(y))&&(n&&a.set(y,{index:this.length,ele:g}),this[this.length]=g,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(b){this.lazyMap=b},rebuildMap:function(){for(var m=this.lazyMap=new bu,_=this.eles,x=0;x<_.length;x++){var C=_[x];m.set(C.id(),{index:x,ele:C})}}},n&&(this._private.map=a),o&&!i&&this.restore()},rn=O0.prototype=Ti.prototype=Object.create(Array.prototype);rn.instanceString=function(){return"collection"};rn.spawn=function(r,e){return new Ti(this.cy(),r,e)};rn.spawnSelf=function(){return this.spawn(this)};rn.cy=function(){return this._private.cy};rn.renderer=function(){return this._private.cy.renderer()};rn.element=function(){return this[0]};rn.collection=function(){return u3(this)?this:new Ti(this._private.cy,[this])};rn.unique=function(){return new Ti(this._private.cy,this,!0)};rn.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};rn.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Ti(e)};rn.$id=rn.getElementById;rn.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};rn.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};rn.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};rn.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Pr(r)){if(t.startBatch(),r.data){e.data(r.data);var i=n.data;if(e.isEdge()){var a=!1,o={},s=r.data.source,u=r.data.target;s!=null&&s!=i.source&&(o.source=""+s,a=!0),u!=null&&u!=i.target&&(o.target=""+u,a=!0),a&&(e=e.move(o))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||i.parent!=null)&&c!=i.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(p,g,y){var b=r[p];b!=null&&b!==n[p]&&(b?e[g]():e[y]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var d={data:Is(n.data),position:Is(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var h=0;return n.classes.forEach(function(v){return d.classes+=h++===0?v:" "+v}),d}}};rn.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};rn.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],i=n.json(),a=new O0(r,i,!1);e.push(a)}return new Ti(r,e)};rn.copy=rn.clone;rn.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),i=n._private,a=[],o=[],s,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?a.push(c):o.push(c))}s=a.concat(o);var f,d=function(){s.splice(f,1),f--};for(f=0;f<s.length;f++){var h=s[f],v=h._private,p=v.data;if(h.clearTraversalCache(),!(!e&&!v.removed)){if(p.id===void 0)p.id=x3();else if(at(p.id))p.id=""+p.id;else if(Wl(p.id)||!Tt(p.id)){pn("Can not create element with invalid string ID `"+p.id+"`"),d();continue}else if(n.hasElementWithId(p.id)){pn("Can not create second element with ID `"+p.id+"`"),d();continue}}var g=p.id;if(h.isNode()){var y=v.position;y.x==null&&(y.x=0),y.y==null&&(y.y=0)}if(h.isEdge()){for(var b=h,m=["source","target"],_=m.length,x=!1,C=0;C<_;C++){var w=m[C],O=p[w];at(O)&&(O=p[w]=""+p[w]),O==null||O===""?(pn("Can not create edge `"+g+"` with unspecified "+w),x=!0):n.hasElementWithId(O)||(pn("Can not create edge `"+g+"` with nonexistant "+w+" `"+O+"`"),x=!0)}if(x){d();continue}var A=n.getElementById(p.source),k=n.getElementById(p.target);A.same(k)?A._private.edges.push(b):(A._private.edges.push(b),k._private.edges.push(b)),b._private.source=A,b._private.target=k}v.map=new bu,v.map.set(g,{ele:h,index:0}),v.removed=!1,e&&n.addToPool(h)}for(var R=0;R<a.length;R++){var I=a[R],M=I._private.data;at(M.parent)&&(M.parent=""+M.parent);var N=M.parent,F=N!=null;if(F||I._private.parent){var z=I._private.parent?n.collection().merge(I._private.parent):n.getElementById(N);if(z.empty())M.parent=void 0;else if(z[0].removed())Gr("Node added with missing parent, reference to parent removed"),M.parent=void 0,I._private.parent=null;else{for(var B=!1,U=z;!U.empty();){if(I.same(U)){B=!0,M.parent=void 0;break}U=U.parent()}B||(z[0]._private.children.push(I),I._private.parent=z[0],i.hasCompoundNodes=!0)}}}if(s.length>0){for(var W=s.length===t.length?t:new Ti(n,s),Y=0;Y<W.length;Y++){var H=W[Y];H.isNode()||(H.parallelEdges().clearTraversalCache(),H.source().clearTraversalCache(),H.target().clearTraversalCache())}var J;i.hasCompoundNodes?J=n.collection().merge(W).merge(W.connectedNodes()).merge(W.parent()):J=W,J.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?W.emitAndNotify("add"):e&&W.emit("add")}return t};rn.removed=function(){var r=this[0];return r&&r._private.removed};rn.inside=function(){var r=this[0];return r&&!r._private.removed};rn.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],i={},a=t._private.cy;function o(N){for(var F=N._private.edges,z=0;z<F.length;z++)u(F[z])}function s(N){for(var F=N._private.children,z=0;z<F.length;z++)u(F[z])}function u(N){var F=i[N.id()];e&&N.removed()||F||(i[N.id()]=!0,N.isNode()?(n.push(N),o(N),s(N)):n.unshift(N))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function d(N,F){var z=N._private.edges;Hl(z,F),N.clearTraversalCache()}function h(N){N.clearTraversalCache()}var v=[];v.ids={};function p(N,F){F=F[0],N=N[0];var z=N._private.children,B=N.id();Hl(z,F),F._private.parent=null,v.ids[B]||(v.ids[B]=!0,v.push(N))}t.dirtyCompoundBoundsCache(),e&&a.removeFromPool(n);for(var g=0;g<n.length;g++){var y=n[g];if(y.isEdge()){var b=y.source()[0],m=y.target()[0];d(b,y),d(m,y);for(var _=y.parallelEdges(),x=0;x<_.length;x++){var C=_[x];h(C),C.isBundledBezier()&&C.dirtyBoundingBoxCache()}}else{var w=y.parent();w.length!==0&&p(w,y)}e&&(y._private.removed=!0)}var O=a._private.elements;a._private.hasCompoundNodes=!1;for(var A=0;A<O.length;A++){var k=O[A];if(k.isParent()){a._private.hasCompoundNodes=!0;break}}var R=new Ti(this.cy(),n);R.size()>0&&(r?R.emitAndNotify("remove"):e&&R.emit("remove"));for(var I=0;I<v.length;I++){var M=v[I];(!e||!M.removed())&&M.updateStyle()}return R};rn.move=function(r){var e=this._private.cy,t=this,n=!1,i=!1,a=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var o=a(r.source),s=a(r.target),u=o!=null&&e.hasElementWithId(o),l=s!=null&&e.hasElementWithId(s);(u||l)&&(e.batch(function(){t.remove(n,i),t.emitAndNotify("moveout");for(var h=0;h<t.length;h++){var v=t[h],p=v._private.data;v.isEdge()&&(u&&(p.source=o),l&&(p.target=s))}t.restore(n,i)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=a(r.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var h=t.remove(n,i);h.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var p=t[v],g=p._private.data;p.isNode()&&(g.parent=d)}h.restore(n,i)}),t.emitAndNotify("move")}}return this};[M3,dV,Sb,Bl,Mh,AV,k0,VV,aj,oj,XV,Xb,Cb,Ci,Ul,zi].forEach(function(r){jt(rn,r)});var r$={add:function(e){var t,n=this;if(Ha(e)){var i=e;if(i._private.cy===n)t=i.restore();else{for(var a=[],o=0;o<i.length;o++){var s=i[o];a.push(s.json())}t=new Ti(n,a)}}else if(Kr(e)){var u=e;t=new Ti(n,u)}else if(Pr(e)&&(Kr(e.nodes)||Kr(e.edges))){for(var l=e,c=[],f=["nodes","edges"],d=0,h=f.length;d<h;d++){var v=f[d],p=l[v];if(Kr(p))for(var g=0,y=p.length;g<y;g++){var b=jt({group:v},p[g]);c.push(b)}}t=new Ti(n,c)}else{var m=e;t=new O0(n,m).collection()}return t},remove:function(e){if(!Ha(e)){if(Tt(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function n$(r,e,t,n){var i=4,a=.001,o=1e-7,s=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var d=c?new Float32Array(u):new Array(u);function h(k,R){return 1-3*R+3*k}function v(k,R){return 3*R-6*k}function p(k){return 3*k}function g(k,R,I){return((h(R,I)*k+v(R,I))*k+p(R))*k}function y(k,R,I){return 3*h(R,I)*k*k+2*v(R,I)*k+p(R)}function b(k,R){for(var I=0;I<i;++I){var M=y(R,r,t);if(M===0)return R;var N=g(R,r,t)-k;R-=N/M}return R}function m(){for(var k=0;k<u;++k)d[k]=g(k*l,r,t)}function _(k,R,I){var M,N,F=0;do N=R+(I-R)/2,M=g(N,r,t)-k,M>0?I=N:R=N;while(Math.abs(M)>o&&++F<s);return N}function x(k){for(var R=0,I=1,M=u-1;I!==M&&d[I]<=k;++I)R+=l;--I;var N=(k-d[I])/(d[I+1]-d[I]),F=R+N*l,z=y(F,r,t);return z>=a?b(k,F):z===0?F:_(k,R,R+l)}var C=!1;function w(){C=!0,(r!==e||t!==n)&&m()}var O=function(R){return C||w(),r===e&&t===n?R:R===0?0:R===1?1:g(x(R),e,n)};O.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var A="generateBezier("+[r,e,t,n]+")";return O.toString=function(){return A},O}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var i$=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,i,a){var o={x:n.x+a.dx*i,v:n.v+a.dv*i,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,i){var a={dx:n.v,dv:r(n)},o=e(n,i*.5,a),s=e(n,i*.5,o),u=e(n,i,s),l=1/6*(a.dx+2*(o.dx+s.dx)+u.dx),c=1/6*(a.dv+2*(o.dv+s.dv)+u.dv);return n.x=n.x+l*i,n.v=n.v+c*i,n}return function n(i,a,o){var s={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,d,h,v;for(i=parseFloat(i)||500,a=parseFloat(a)||20,o=o||null,s.tension=i,s.friction=a,d=o!==null,d?(l=n(i,a),h=l/o*f):h=f;v=t(v||s,h),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return d?function(p){return u[p*(u.length-1)|0]}:l}}(),tn=function(e,t,n,i){var a=n$(e,t,n,i);return function(o,s,u){return o+(s-o)*a(u)}},Tb={linear:function(e,t,n){return e+(t-e)*n},ease:tn(.25,.1,.25,1),"ease-in":tn(.42,0,1,1),"ease-out":tn(0,0,.58,1),"ease-in-out":tn(.42,0,.58,1),"ease-in-sine":tn(.47,0,.745,.715),"ease-out-sine":tn(.39,.575,.565,1),"ease-in-out-sine":tn(.445,.05,.55,.95),"ease-in-quad":tn(.55,.085,.68,.53),"ease-out-quad":tn(.25,.46,.45,.94),"ease-in-out-quad":tn(.455,.03,.515,.955),"ease-in-cubic":tn(.55,.055,.675,.19),"ease-out-cubic":tn(.215,.61,.355,1),"ease-in-out-cubic":tn(.645,.045,.355,1),"ease-in-quart":tn(.895,.03,.685,.22),"ease-out-quart":tn(.165,.84,.44,1),"ease-in-out-quart":tn(.77,0,.175,1),"ease-in-quint":tn(.755,.05,.855,.06),"ease-out-quint":tn(.23,1,.32,1),"ease-in-out-quint":tn(.86,0,.07,1),"ease-in-expo":tn(.95,.05,.795,.035),"ease-out-expo":tn(.19,1,.22,1),"ease-in-out-expo":tn(1,0,0,1),"ease-in-circ":tn(.6,.04,.98,.335),"ease-out-circ":tn(.075,.82,.165,1),"ease-in-out-circ":tn(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return Tb.linear;var i=i$(e,t,n);return function(a,o,s){return a+(o-a)*i(s)}},"cubic-bezier":tn};function uk(r,e,t,n,i){if(n===1||e===t)return t;var a=i(e,t,n);return r==null||((r.roundValue||r.color)&&(a=Math.round(a)),r.min!==void 0&&(a=Math.max(a,r.min)),r.max!==void 0&&(a=Math.min(a,r.max))),a}function lk(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Kd(r,e,t,n,i){var a=i!=null?i.type:null;t<0?t=0:t>1&&(t=1);var o=lk(r,i),s=lk(e,i);if(at(o)&&at(s))return uk(a,o,s,t,n);if(Kr(o)&&Kr(s)){for(var u=[],l=0;l<s.length;l++){var c=o[l],f=s[l];if(c!=null&&f!=null){var d=uk(a,c,f,t,n);u.push(d)}else u.push(f)}return u}}function a$(r,e,t,n){var i=!n,a=r._private,o=e._private,s=o.easing,u=o.startTime,l=n?r:r.cy(),c=l.style();if(!o.easingImpl)if(s==null)o.easingImpl=Tb.linear;else{var f;if(Tt(s)){var d=c.parse("transition-timing-function",s);f=d.value}else f=s;var h,v;Tt(f)?(h=f,v=[]):(h=f[1],v=f.slice(2).map(function(W){return+W})),v.length>0?(h==="spring"&&v.push(o.duration),o.easingImpl=Tb[h].apply(null,v)):o.easingImpl=Tb[h]}var p=o.easingImpl,g;if(o.duration===0?g=1:g=(t-u)/o.duration,o.applying&&(g=o.progress),g<0?g=0:g>1&&(g=1),o.delay==null){var y=o.startPosition,b=o.position;if(b&&i&&!r.locked()){var m={};sp(y.x,b.x)&&(m.x=Kd(y.x,b.x,g,p)),sp(y.y,b.y)&&(m.y=Kd(y.y,b.y,g,p)),r.position(m)}var _=o.startPan,x=o.pan,C=a.pan,w=x!=null&&n;w&&(sp(_.x,x.x)&&(C.x=Kd(_.x,x.x,g,p)),sp(_.y,x.y)&&(C.y=Kd(_.y,x.y,g,p)),r.emit("pan"));var O=o.startZoom,A=o.zoom,k=A!=null&&n;k&&(sp(O,A)&&(a.zoom=Sg(a.minZoom,Kd(O,A,g,p),a.maxZoom)),r.emit("zoom")),(w||k)&&r.emit("viewport");var R=o.style;if(R&&R.length>0&&i){for(var I=0;I<R.length;I++){var M=R[I],N=M.name,F=M,z=o.startStyle[N],B=c.properties[z.name],U=Kd(z,F,g,p,B);c.overrideBypass(r,N,U)}r.emit("style")}}return o.progress=g,g}function sp(r,e){return r==null||e==null?!1:at(r)&&at(e)?!0:!!(r&&e)}function o$(r,e,t,n){var i=e._private;i.started=!0,i.startTime=t-i.progress*i.duration}function ck(r,e){var t=e._private.aniEles,n=[];function i(c,f){var d=c._private,h=d.animation.current,v=d.animation.queue,p=!1;if(h.length===0){var g=v.shift();g&&h.push(g)}for(var y=function(C){for(var w=C.length-1;w>=0;w--){var O=C[w];O()}C.splice(0,C.length)},b=h.length-1;b>=0;b--){var m=h[b],_=m._private;if(_.stopped){h.splice(b,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.frames);continue}!_.playing&&!_.applying||(_.playing&&_.applying&&(_.applying=!1),_.started||o$(c,m,r),a$(c,m,r,f),_.applying&&(_.applying=!1),y(_.frames),_.step!=null&&_.step(r),m.completed()&&(h.splice(b,1),_.hooked=!1,_.playing=!1,_.started=!1,y(_.completes)),p=!0)}return!f&&h.length===0&&v.length===0&&n.push(c),p}for(var a=!1,o=0;o<t.length;o++){var s=t[o],u=i(s);a=a||u}var l=i(e,!0);(a||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var s$={animate:qr.animate(),animation:qr.animation(),animated:qr.animated(),clearQueue:qr.clearQueue(),delay:qr.delay(),delayAnimation:qr.delayAnimation(),stop:qr.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&Vb(function(a){ck(a,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(a,o){ck(o,e)},n.beforeRenderPriorities.animations):t()}},u$={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var i=t.qualifier;return i!=null?e!==n.target&&Vg(n.target)&&i.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},zm=function(e){return Tt(e)?new Xl(e):e},lj={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new I0(u$,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,zm(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,zm(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,zm(t),n),this},once:function(e,t,n){return this.emitter().one(e,zm(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};qr.eventAliasesOn(lj);var BC={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};BC.jpeg=BC.jpg;var Ab={layout:function(e){var t=this;if(e==null){pn("Layout options must be specified to make a layout");return}if(e.name==null){pn("A `name` must be specified to make a layout");return}var n=e.name,i=t.extension("layout",n);if(i==null){pn("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var a;Tt(e.eles)?a=t.$(e.eles):a=e.eles!=null?e.eles:t.$();var o=new i(jt({},e,{cy:t,eles:a}));return o}};Ab.createLayout=Ab.makeLayout=Ab.layout;var l$={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var i=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&i.merge(t);return}if(n.notificationsEnabled){var a=this.renderer();this.destroyed()||!a||a.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var i=e.batchNotifications[n];i.empty()?t.notify(n):t.notify(n,i)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=t.getElementById(a);s.data(o)}})}},c$=Ri({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),UC={renderTo:function(e,t,n,i){var a=this._private.renderer;return a.renderTo(e,t,n,i),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){pn("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Gr("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var i=c$(e);i.cy=t,t._private.renderer=new n(i),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var i=n._private;i.rscratch={},i.rstyle={},i.animation.current=[],i.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};UC.invalidateDimensions=UC.resize;var Pb={collection:function(e,t){return Tt(e)?this.$(e):Ha(e)?e.collection():Kr(e)?(t||(t={}),new Ti(this,e,t.unique,t.removed)):new Ti(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Pb.elements=Pb.filter=Pb.$;var vi={},Bp="t",f$="f";vi.apply=function(r){for(var e=this,t=e._private,n=t.cy,i=n.collection(),a=0;a<r.length;a++){var o=r[a],s=e.getContextMeta(o);if(!s.empty){var u=e.getContextStyle(s),l=e.applyContextStyle(s,u,o);o._private.appliedInitStyle?e.updateTransitions(o,l.diffProps):o._private.appliedInitStyle=!0;var c=e.updateStyleHints(o);c&&i.push(o)}}return i};vi.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},i=r+"-"+e,a=n[i];if(a)return a;for(var o=[],s={},u=0;u<t.length;u++){var l=t[u],c=r[u]===Bp,f=e[u]===Bp,d=c!==f,h=l.mappedProperties.length>0;if(d||f&&h){var v=void 0;d&&h||d?v=l.properties:h&&(v=l.mappedProperties);for(var p=0;p<v.length;p++){for(var g=v[p],y=g.name,b=!1,m=u+1;m<t.length;m++){var _=t[m],x=e[m]===Bp;if(x&&(b=_.properties[g.name]!=null,b))break}!s[y]&&!b&&(s[y]=!0,o.push(y))}}}return n[i]=o,o};vi.getContextMeta=function(r){for(var e=this,t="",n,i=r._private.styleCxtKey||"",a=0;a<e.length;a++){var o=e[a],s=o.selector&&o.selector.matches(r);s?t+=Bp:t+=f$}return n=e.getPropertiesDiff(i,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};vi.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var i={_private:{key:e}},a=0;a<t.length;a++){var o=t[a],s=e[a]===Bp;if(s)for(var u=0;u<o.properties.length;u++){var l=o.properties[u];i[l.name]=l}}return n[e]=i,i};vi.applyContextStyle=function(r,e,t){for(var n=this,i=r.diffPropNames,a={},o=n.types,s=0;s<i.length;s++){var u=i[s],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===o.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,d=f.fnValue=l.value(t);if(d===f.prevFnValue)continue}var h=a[u]={prev:c};n.applyParsedProperty(t,l),h.next=t.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:a}};vi.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,i=t.propertyGroupKeys,a=function(se,pe,Oe){return t.getPropertiesHash(se,pe,Oe)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<i.length;l++){var c=i[l];e.styleKeys[c]=[ff,hh]}for(var f=function(se,pe){return e.styleKeys[pe][0]=xg(se,e.styleKeys[pe][0])},d=function(se,pe){return e.styleKeys[pe][1]=Eg(se,e.styleKeys[pe][1])},h=function(se,pe){f(se,pe),d(se,pe)},v=function(se,pe){for(var Oe=0;Oe<se.length;Oe++){var Ce=se.charCodeAt(Oe);f(Ce,pe),d(Ce,pe)}},p=2e9,g=function(se){return-128<se&&se<128&&Math.floor(se)!==se?p-(se*1024|0):se},y=0;y<n.length;y++){var b=n[y],m=u[b];if(m!=null){var _=this.properties[b],x=_.type,C=_.groupKey,w=void 0;_.hashOverride!=null?w=_.hashOverride(r,m):m.pfValue!=null&&(w=m.pfValue);var O=_.enums==null?m.value:null,A=w!=null,k=O!=null,R=A||k,I=m.units;if(x.number&&R&&!x.multiple){var M=A?w:O;h(g(M),C),!A&&I!=null&&v(I,C)}else v(m.strValue,C)}}for(var N=[ff,hh],F=0;F<i.length;F++){var z=i[F],B=e.styleKeys[z];N[0]=xg(B[0],N[0]),N[1]=Eg(B[1],N[1])}e.styleKey=T9(N[0],N[1]);var U=e.styleKeys;e.labelDimsKey=gl(U.labelDimensions);var W=a(r,["label"],U.labelDimensions);if(e.labelKey=gl(W),e.labelStyleKey=gl(Dm(U.commonLabel,W)),!s){var Y=a(r,["source-label"],U.labelDimensions);e.sourceLabelKey=gl(Y),e.sourceLabelStyleKey=gl(Dm(U.commonLabel,Y));var H=a(r,["target-label"],U.labelDimensions);e.targetLabelKey=gl(H),e.targetLabelStyleKey=gl(Dm(U.commonLabel,H))}if(s){var J=e.styleKeys,le=J.nodeBody,fe=J.nodeBorder,ue=J.nodeOutline,ge=J.backgroundImage,ve=J.compound,de=J.pie,ie=J.stripe,Q=[le,fe,ue,ge,ve,de,ie].filter(function(re){return re!=null}).reduce(Dm,[ff,hh]);e.nodeKey=gl(Q),e.hasPie=de!=null&&de[0]!==ff&&de[1]!==hh,e.hasStripe=ie!=null&&ie[0]!==ff&&ie[1]!==hh}return o!==e.styleKey};vi.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};vi.applyParsedProperty=function(r,e){var t=this,n=e,i=r._private.style,a,o=t.types,s=t.properties[n.name].type,u=n.bypass,l=i[n.name],c=l&&l.bypass,f=r._private,d="mapping",h=function(le){return le==null?null:le.pfValue!=null?le.pfValue:le.value},v=function(){var le=h(l),fe=h(n);t.checkTriggers(r,n.name,le,fe)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return i[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(i[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var p=function(){Gr("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var g=n.field.split("."),y=f.data,b=0;b<g.length&&y;b++){var m=g[b];y=y[m]}if(y==null)return p(),!1;var _;if(at(y)){var x=n.fieldMax-n.fieldMin;x===0?_=0:_=(y-n.fieldMin)/x}else return Gr("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+y+"` for `"+r.id()+"` is non-numeric)"),!1;if(_<0?_=0:_>1&&(_=1),s.color){var C=n.valueMin[0],w=n.valueMax[0],O=n.valueMin[1],A=n.valueMax[1],k=n.valueMin[2],R=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],M=n.valueMax[3]==null?1:n.valueMax[3],N=[Math.round(C+(w-C)*_),Math.round(O+(A-O)*_),Math.round(k+(R-k)*_),Math.round(I+(M-I)*_)];a={bypass:n.bypass,name:n.name,value:N,strValue:"rgb("+N[0]+", "+N[1]+", "+N[2]+")"}}else if(s.number){var F=n.valueMin+(n.valueMax-n.valueMin)*_;a=this.parse(n.name,F,n.bypass,d)}else return!1;if(!a)return p(),!1;a.mapping=n,n=a;break}case o.data:{for(var z=n.field.split("."),B=f.data,U=0;U<z.length&&B;U++){var W=z[U];B=B[W]}if(B!=null&&(a=this.parse(n.name,B,n.bypass,d)),!a)return p(),!1;a.mapping=n,n=a;break}case o.fn:{var Y=n.value,H=n.fnValue!=null?n.fnValue:Y(r);if(n.prevFnValue=H,H==null)return Gr("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(a=this.parse(n.name,H,n.bypass,d),!a)return Gr("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;a.mapping=Is(n),n=a;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):c?l.bypassed=n:i[n.name]=n,v(),!0};vi.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],u=i[s];u!=null&&(u.bypass?u.bypassed=null:i[s]=null)}}};vi.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};vi.updateTransitions=function(r,e){var t=this,n=r._private,i=r.pstyle("transition-property").value,a=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},u=!1,l=0;l<i.length;l++){var c=i[l],f=r.pstyle(c),d=e[c];if(d){var h=d.prev,v=h,p=d.next!=null?d.next:f,g=!1,y=void 0,b=1e-6;v&&(at(v.pfValue)&&at(p.pfValue)?(g=p.pfValue-v.pfValue,y=v.pfValue+b*g):at(v.value)&&at(p.value)?(g=p.value-v.value,y=v.value+b*g):Kr(v.value)&&Kr(p.value)&&(g=v.value[0]!==p.value[0]||v.value[1]!==p.value[1]||v.value[2]!==p.value[2],y=v.strValue),g&&(s[c]=p.strValue,this.applyBypass(r,c,y),u=!0))}}if(!u)return;n.transitioning=!0,new Gh(function(m){o>0?r.delayAnimation(o).play().promise().then(m):m()}).then(function(){return r.animation({style:s,duration:a,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,i),r.emitAndNotify("style"),n.transitioning=!1)};vi.checkTrigger=function(r,e,t,n,i,a){var o=this.properties[e],s=i(o);r.removed()||s!=null&&s(t,n,r)&&a(o)};vi.checkZOrderTrigger=function(r,e,t,n){var i=this;this.checkTrigger(r,e,t,n,function(a){return a.triggersZOrder},function(){i._private.cy.notify("zorder",r)})};vi.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBounds},function(i){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};vi.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfConnectedEdges},function(i){r.connectedEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};vi.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(i){return i.triggersBoundsOfParallelEdges},function(i){r.parallelEdges().forEach(function(a){a.dirtyBoundingBoxCache()})})};vi.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var Zg={};Zg.applyBypass=function(r,e,t,n){var i=this,a=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<i.properties.length;s++){var u=i.properties[s],l=u.name,c=this.parse(l,t,!0);c&&a.push(c)}}else if(Tt(e)){var f=this.parse(e,t,!0);f&&a.push(f)}else if(Pr(e)){var d=e;n=t;for(var h=Object.keys(d),v=0;v<h.length;v++){var p=h[v],g=d[p];if(g===void 0&&(g=d[x0(p)]),g!==void 0){var y=this.parse(p,g,!0);y&&a.push(y)}}}else return!1;if(a.length===0)return!1;for(var b=!1,m=0;m<r.length;m++){for(var _=r[m],x={},C=void 0,w=0;w<a.length;w++){var O=a[w];if(n){var A=_.pstyle(O.name);C=x[O.name]={prev:A}}b=this.applyParsedProperty(_,Is(O))||b,n&&(C.next=_.pstyle(O.name))}b&&this.updateStyleHints(_),n&&this.updateTransitions(_,x,o)}return b};Zg.overrideBypass=function(r,e,t){e=Z2(e);for(var n=0;n<r.length;n++){var i=r[n],a=i._private.style[e],o=this.properties[e].type,s=o.color,u=o.mutiple,l=a?a.pfValue!=null?a.pfValue:a.value:null;!a||!a.bypass?this.applyBypass(i,e,t):(a.value=t,a.pfValue!=null&&(a.pfValue=t),s?a.strValue="rgb("+t.join(",")+")":u?a.strValue=t.join(" "):a.strValue=""+t,this.updateStyleHints(i)),this.checkTriggers(i,e,l,t)}};Zg.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Zg.removeBypasses=function(r,e,t){for(var n=!0,i=0;i<r.length;i++){for(var a=r[i],o={},s=0;s<e.length;s++){var u=e[s],l=this.properties[u],c=a.pstyle(l.name);if(!(!c||!c.bypass)){var f="",d=this.parse(u,f,!0),h=o[l.name]={prev:c};this.applyParsedProperty(a,d),h.next=a.pstyle(l.name)}}this.updateStyleHints(a),t&&this.updateTransitions(a,o,n)}};var dT={};dT.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};dT.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Ns={};Ns.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Ns.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},i=0;i<t.properties.length;i++){var a=t.properties[i],o=t.getStylePropertyValue(r,a.name,e);o!=null&&(n[a.name]=o,n[x0(a.name)]=o)}return n}};Ns.getIndexedStyle=function(r,e,t,n){var i=r.pstyle(e)[t][n];return i??r.cy().style().getDefaultProperty(e)[t][0]};Ns.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var i=n.properties[e];i.alias&&(i=i.pointsTo);var a=i.type,o=r.pstyle(i.name);if(o){var s=o.value,u=o.units,l=o.strValue;if(t&&a.number&&s!=null&&at(s)){var c=r.cy().zoom(),f=function(g){return g*c},d=function(g,y){return f(g)+y},h=Kr(s),v=h?u.every(function(p){return p!=null}):u!=null;return v?h?s.map(function(p,g){return d(p,u[g])}).join(" "):d(s,u):h?s.map(function(p){return Tt(p)?p:""+f(p)}).join(" "):""+f(s)}else if(l!=null)return l}return null}};Ns.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var i=e[n],a=i.name,o=r.pstyle(a);o!==void 0&&(Pr(o)?o=this.parse(a,o.strValue):o=this.parse(a,o)),o&&(t[a]=o)}return t};Ns.getPropsList=function(r){var e=this,t=[],n=r,i=e.properties;if(n)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],u=n[s],l=i[s]||i[Z2(s)],c=this.parse(l.name,u);c&&t.push(c)}return t};Ns.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),i,a,o,s,u,l;for(u=0;u<e.length;u++)if(i=e[u],a=r.pstyle(i,!1),a!=null)if(a.pfValue!=null)n[0]=xg(s,n[0]),n[1]=Eg(s,n[1]);else for(o=a.strValue,l=0;l<o.length;l++)s=o.charCodeAt(l),n[0]=xg(s,n[0]),n[1]=Eg(s,n[1]);return n};Ns.getPropertiesHash=Ns.getNonDefaultPropertiesHash;var L0={};L0.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],i=n.selector,a=n.style||n.css,o=Object.keys(a);e.selector(i);for(var s=0;s<o.length;s++){var u=o[s],l=a[u];e.css(u,l)}}return e};L0.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};L0.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,i=t.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:a})}return r};var hT={};hT.appendFromString=function(r){var e=this,t=this,n=""+r,i,a,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>i.length?n=n.substr(i.length):n=""}function u(){a.length>o.length?a=a.substr(o.length):a=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Gr("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}i=c[0];var f=c[1];if(f!=="core"){var d=new Xl(f);if(d.invalid){Gr("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),s();continue}}var h=c[2],v=!1;a=h;for(var p=[];;){var g=a.match(/^\s*$/);if(g)break;var y=a.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!y){Gr("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}o=y[0];var b=y[1],m=y[2],_=e.properties[b];if(!_){Gr("Skipping property: Invalid property name in: "+o),u();continue}var x=t.parse(b,m);if(!x){Gr("Skipping property: Invalid property definition in: "+o),u();continue}p.push({name:b,val:m}),u()}if(v){s();break}t.selector(f);for(var C=0;C<p.length;C++){var w=p[C];t.css(w.name,w.val)}s()}return t};hT.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Wn={};(function(){var r=Qn,e=a9,t=s9,n=u9,i=l9,a=function(re){return"^"+re+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(re){var se=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+i;return"^"+re+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+se+")\\s*\\,\\s*("+se+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Wn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:a("data")},layoutData:{mapping:!0,regex:a("layoutData")},scratch:{mapping:!0,regex:a("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(re,se){switch(re.length){case 2:return se[0]!=="deg"&&se[0]!=="rad"&&se[1]!=="deg"&&se[1]!=="rad";case 1:return Tt(re[0])||se[0]==="deg"||se[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(re){var se=re.length;return se===1||se===2||se===4}}};var u={zeroNonZero:function(re,se){return(re==null||se==null)&&re!==se||re==0&&se!=0?!0:re!=0&&se==0},any:function(re,se){return re!=se},emptyNonEmpty:function(re,se){var pe=Wl(re),Oe=Wl(se);return pe&&!Oe||!pe&&Oe}},l=Wn.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],p=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],g=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(re,se,pe){return re===se?!1:pe.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],y=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],b=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],m=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],_=function(re,se){return se.value==="label"?-re.poolIndex():se.pfValue},x=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:_},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],C=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],w=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],O=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],A=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],k=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(re,se){return re===se?!1:re==="bezier"||se==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],R=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],I=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],M=[];Wn.pieBackgroundN=16,M.push({name:"pie-size",type:l.sizeMaybePercent}),M.push({name:"pie-hole",type:l.sizeMaybePercent}),M.push({name:"pie-start-angle",type:l.angle});for(var N=1;N<=Wn.pieBackgroundN;N++)M.push({name:"pie-"+N+"-background-color",type:l.color}),M.push({name:"pie-"+N+"-background-size",type:l.percent}),M.push({name:"pie-"+N+"-background-opacity",type:l.zeroOneNumber});var F=[];Wn.stripeBackgroundN=16,F.push({name:"stripe-size",type:l.sizeMaybePercent}),F.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var z=1;z<=Wn.stripeBackgroundN;z++)F.push({name:"stripe-"+z+"-background-color",type:l.color}),F.push({name:"stripe-"+z+"-background-size",type:l.percent}),F.push({name:"stripe-"+z+"-background-opacity",type:l.zeroOneNumber});var B=[],U=Wn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(Q){U.forEach(function(re){var se=re+"-"+Q.name,pe=Q.type,Oe=Q.triggersBounds;B.push({name:se,type:pe,triggersBounds:Oe})})},{});var W=Wn.properties=[].concat(p,m,g,y,b,R,v,h,c,f,d,x,C,w,O,M,F,A,k,B,I),Y=Wn.propertyGroups={behavior:p,transition:m,visibility:g,overlay:y,underlay:b,ghost:R,commonLabel:v,labelDimensions:h,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:x,nodeBorder:C,nodeOutline:w,backgroundImage:O,pie:M,stripe:F,compound:A,edgeLine:k,edgeArrow:B,core:I},H=Wn.propertyGroupNames={},J=Wn.propertyGroupKeys=Object.keys(Y);J.forEach(function(Q){H[Q]=Y[Q].map(function(re){return re.name}),Y[Q].forEach(function(re){return re.groupKey=Q})});var le=Wn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Wn.propertyNames=W.map(function(Q){return Q.name});for(var fe=0;fe<W.length;fe++){var ue=W[fe];W[ue.name]=ue}for(var ge=0;ge<le.length;ge++){var ve=le[ge],de=W[ve.pointsTo],ie={name:ve.name,alias:!0,pointsTo:de};W.push(ie),W[ve.name]=ie}})();Wn.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Wn.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=jt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Wn.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=Wn.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return Wn.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,d=l.value;u[f]=d}),u},{})),t={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=e[a],s=this.parse(a,o);t[a]=s}}return r.defaultProperties=t,r.defaultProperties};Wn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var N0={};N0.parse=function(r,e,t,n){var i=this;if(Sn(e))return i.parseImplWarn(r,e,t,n);var a=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,u=b3(r,s,o,a),l=i.propCache=i.propCache||[],c;return(c=l[u])||(c=l[u]=i.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=Is(c),c&&(c.value=Is(c.value))),c};N0.parseImplWarn=function(r,e,t,n){var i=this.parseImpl(r,e,t,n);return!i&&e!=null&&Gr("The style property `".concat(r,": ").concat(e,"` is invalid")),i&&(i.name==="width"||i.name==="height")&&e==="label"&&Gr("The style value of `label` is deprecated for `"+i.name+"`"),i};N0.parseImpl=function(r,e,t,n){var i=this;r=Z2(r);var a=i.properties[r],o=e,s=i.types;if(!a||e===void 0)return null;a.alias&&(a=a.pointsTo,r=a.name);var u=Tt(e);u&&(e=e.trim());var l=a.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(Sn(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(s.data.regex).exec(e))){if(t)return!1;var d=s.data;return{name:r,value:c,strValue:""+e,mapped:d,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(s.mapData.regex).exec(e))){if(t||l.multiple)return!1;var h=s.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var p=this.parse(r,f[5]);if(!p||p.mapped)return!1;if(v.pfValue===p.pfValue||v.strValue===p.strValue)return Gr("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var g=v.value,y=p.value,b=g[0]===y[0]&&g[1]===y[1]&&g[2]===y[2]&&(g[3]===y[3]||(g[3]==null||g[3]===1)&&(y[3]==null||y[3]===1));if(b)return!1}return{name:r,value:f,strValue:""+e,mapped:h,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:p.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var m;if(u?m=e.split(/\s+/):Kr(e)?m=e:m=[e],l.evenMultiple&&m.length%2!==0)return null;for(var _=[],x=[],C=[],w="",O=!1,A=0;A<m.length;A++){var k=i.parse(r,m[A],t,"multiple");O=O||Tt(k.value),_.push(k.value),C.push(k.pfValue!=null?k.pfValue:k.value),x.push(k.units),w+=(A>0?" ":"")+k.strValue}return l.validate&&!l.validate(_,x)?null:l.singleEnum&&O?_.length===1&&Tt(_[0])?{name:r,value:_[0],strValue:_[0],bypass:t}:null:{name:r,value:_,pfValue:C,strValue:w,bypass:t,units:x}}var R=function(){for(var ie=0;ie<l.enums.length;ie++){var Q=l.enums[ie];if(Q===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var I,M="px";if(l.units&&(I=l.units),l.implicitUnits&&(M=l.implicitUnits),!l.unitless)if(u){var N="px|em"+(l.allowPercent?"|\\%":"");I&&(N=I);var F=e.match("^("+Qn+")("+N+")?$");F&&(e=F[1],I=F[2]||M)}else(!I||l.implicitUnits)&&(I=M);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=o,R();if(l.integer&&!Qq(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var z={name:r,value:e,strValue:""+e+(I||""),units:I,bypass:t};return l.unitless||I!=="px"&&I!=="em"?z.pfValue=e:z.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(z.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(z.pfValue=I==="rad"?e:u7(e)),I==="%"&&(z.pfValue=e/100),z}else if(l.propList){var B=[],U=""+e;if(U!=="none"){for(var W=U.split(/\s*,\s*|\s+/),Y=0;Y<W.length;Y++){var H=W[Y].trim();i.properties[H]?B.push(H):Gr("`"+H+"` is not a valid property name")}if(B.length===0)return null}return{name:r,value:B,strValue:B.length===0?"none":B.join(" "),bypass:t}}else if(l.color){var J=d3(e);return J?{name:r,value:J,pfValue:J,strValue:"rgb("+J[0]+","+J[1]+","+J[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var le=R();if(le)return le}for(var fe=l.regexes?l.regexes:[l.regex],ue=0;ue<fe.length;ue++){var ge=new RegExp(fe[ue]),ve=ge.exec(e);if(ve)return{name:r,value:l.singleRegexMatchValue?ve[1]:ve,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?R():null};var di=function(e){if(!(this instanceof di))return new di(e);if(!K2(e)){pn("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},qi=di.prototype;qi.instanceString=function(){return"style"};qi.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(i){var a=i[0]._private;a.styleDirty=!0,a.appliedInitStyle=!1}),this};qi.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};qi.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};qi.selector=function(r){var e=r==="core"?null:new Xl(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};qi.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var i=r.properties[n],a=t[i.name];a===void 0&&(a=t[x0(i.name)]),a!==void 0&&this.cssRule(i.name,a)}else e.length===2&&this.cssRule(e[0],e[1]);return this};qi.style=qi.css;qi.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var i=!this[n].selector;i&&(this._private.coreStyle[t.name]=t)}return this};qi.append=function(r){return l3(r)?r.appendToStyle(this):Kr(r)?this.appendFromJson(r):Tt(r)&&this.appendFromString(r),this};di.fromJson=function(r,e){var t=new di(r);return t.fromJson(e),t};di.fromString=function(r,e){return new di(r).fromString(e)};[vi,Zg,dT,Ns,L0,hT,Wn,N0].forEach(function(r){jt(qi,r)});di.types=qi.types;di.properties=qi.properties;di.propertyGroups=qi.propertyGroups;di.propertyGroupNames=qi.propertyGroupNames;di.propertyGroupKeys=qi.propertyGroupKeys;var d$={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return l3(e)?t.style=e.generateStyle(this):Kr(e)?t.style=di.fromJson(this,e):Tt(e)?t.style=di.fromString(this,e):t.style=di(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},h$="single",Ef={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=h$),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,i,a,o,s;switch(e.length){case 0:return t;case 1:if(Tt(e[0]))return n=e[0],t[n];if(Pr(e[0])){if(!this._private.panningEnabled)return this;a=e[0],o=a.x,s=a.y,at(o)&&(t.x=o),at(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],i=e[1],(n==="x"||n==="y")&&at(i)&&(t[n]=i),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,i=this._private.pan,a,o,s,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Pr(e)&&(s=n[0],u=s.x,l=s.y,at(u)&&(i.x+=u),at(l)&&(i.y+=l),this.emit("pan viewport"));break;case 2:a=e,o=t,(a==="x"||a==="y")&&at(o)&&(i[a]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var i=this._private;i.zoom=n.zoom,i.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(at(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Tt(e)){var i=e;e=this.$(i)}else if(t9(e)){var a=e;n={x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Ha(e)||(e=this.mutableElements());if(!(Ha(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),u;if(t=at(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((o-2*t)/n.w,(s-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(o-u*(n.x1+n.x2))/2,y:(s-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var i=e;e=i.min,t=i.max}return at(e)&&at(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):at(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:at(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,i=t.zoom,a,o,s=!1;if(t.zoomingEnabled||(s=!0),at(e)?o=e:Pr(e)&&(o=e.level,e.position!=null?a=S0(e.position,i,n):e.renderedPosition!=null&&(a=e.renderedPosition),a!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!at(o)||o===i||a!=null&&(!at(a.x)||!at(a.y)))return null;if(a!=null){var u=n,l=i,c=o,f={x:-c/l*(a.x-u.x)+a.x,y:-c/l*(a.y-u.y)+a.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,i=!0,a=[],o=!1,s=!1;if(!e)return this;if(at(e.zoom)||(n=!1),Pr(e.pan)||(i=!1),!n&&!i)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=u,a.push("zoom"))}if(i&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;at(l.x)&&(t.pan.x=l.x,s=!1),at(l.y)&&(t.pan.y=l.y,s=!1),s||a.push("pan")}return a.length>0&&(a.push("viewport"),this.emit(a.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(Tt(e)){var n=e;e=this.mutableElements().filter(n)}else Ha(e)||(e=this.mutableElements());if(e.length!==0){var i=e.boundingBox(),a=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(a-t*(i.x1+i.x2))/2,y:(o-t*(i.y1+i.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var i=n.window().getComputedStyle(t),a=function(s){return parseFloat(i.getPropertyValue(s))};return{width:t.clientWidth-a("padding-left")-a("padding-right"),height:t.clientHeight-a("padding-top")-a("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),i={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return i.w=i.x2-i.x1,i.h=i.y2-i.y1,i},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ef.centre=Ef.center;Ef.autolockNodes=Ef.autolock;Ef.autoungrabifyNodes=Ef.autoungrabify;var Pg={data:qr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:qr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:qr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:qr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};Pg.attr=Pg.data;Pg.removeAttr=Pg.removeData;var Rg=function(e){var t=this;e=jt({},e);var n=e.container;n&&!Gb(n)&&Gb(n[0])&&(n=n[0]);var i=n?n._cyreg:null;i=i||{},i&&i.cy&&(i.cy.destroy(),i={});var a=i.readies=i.readies||[];n&&(n._cyreg=i),i.cy=t;var o=Zn!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=jt({name:o?"grid":"null"},s.layout),s.renderer=jt({name:o?"canvas":"null"},s.renderer);var u=function(v,p,g){return p!==void 0?p:g!==void 0?g:v},l=this._private={container:n,ready:!1,options:s,elements:new Ti(this),listeners:[],aniEles:new Ti(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,s.zoomingEnabled),userZoomingEnabled:u(!0,s.userZoomingEnabled),panningEnabled:u(!0,s.panningEnabled),userPanningEnabled:u(!0,s.userPanningEnabled),boxSelectionEnabled:u(!0,s.boxSelectionEnabled),autolock:u(!1,s.autolock,s.autolockNodes),autoungrabify:u(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:u(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:at(s.zoom)?s.zoom:1,pan:{x:Pr(s.pan)&&at(s.pan.x)?s.pan.x:0,y:Pr(s.pan)&&at(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var c=function(v,p){var g=v.some(r9);if(g)return Gh.all(v).then(p);p(v)};l.styleEnabled&&t.setStyle([]);var f=jt({},s,s.renderer);t.initRenderer(f);var d=function(v,p,g){t.notifications(!1);var y=t.mutableElements();y.length>0&&y.remove(),v!=null&&(Pr(v)||Kr(v))&&t.add(v),t.one("layoutready",function(m){t.notifications(!0),t.emit(m),t.one("load",p),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",g),t.emit("done")});var b=jt({},t._private.options.layout);b.eles=t.elements(),t.layout(b).run()};c([s.style,s.elements],function(h){var v=h[0],p=h[1];l.styleEnabled&&t.style().append(v),d(p,function(){t.startAnimationLoop(),l.ready=!0,Sn(s.ready)&&t.on("ready",s.ready);for(var g=0;g<a.length;g++){var y=a[g];t.on("ready",y)}i&&(i.readies=[]),t.emit("ready")},s.done)})},Kb=Rg.prototype;jt(Kb,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Zn;var t=this._private.container.ownerDocument;return t===void 0||t==null?Zn:t.defaultView||Zn},mount:function(e){if(e!=null){var t=this,n=t._private,i=n.options;return!Gb(e)&&Gb(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(jt({},i,i.renderer,{name:i.renderer.name==="null"?"canvas":i.renderer.name})),t.startAnimationLoop(),t.style(i.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Is(this._private.options)},json:function(e){var t=this,n=t._private,i=t.mutableElements(),a=function(_){return t.getElementById(_.id())};if(Pr(e)){if(t.startBatch(),e.elements){var o={},s=function(_,x){for(var C=[],w=[],O=0;O<_.length;O++){var A=_[O];if(!A.data.id){Gr("cy.json() cannot handle elements without an ID attribute");continue}var k=""+A.data.id,R=t.getElementById(k);o[k]=!0,R.length!==0?w.push({ele:R,json:A}):(x&&(A.group=x),C.push(A))}t.add(C);for(var I=0;I<w.length;I++){var M=w[I],N=M.ele,F=M.json;N.json(F)}};if(Kr(e.elements))s(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];Kr(f)&&s(f,c)}var d=t.collection();i.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?d.merge(m):m.remove()}),d.forEach(function(m){return m.children().move({parent:null})}),d.forEach(function(m){return a(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<h.length;v++){var p=h[v];e[p]!=null&&t[p](e[p])}return t.endBatch(),this}else{var g=!!e,y={};g?y.elements=this.elements().map(function(m){return m.json()}):(y.elements={},i.forEach(function(m){var _=m.group();y.elements[_]||(y.elements[_]=[]),y.elements[_].push(m.json())})),this._private.styleEnabled&&(y.style=t.style().json()),y.data=Is(t.data());var b=n.options;return y.zoomingEnabled=n.zoomingEnabled,y.userZoomingEnabled=n.userZoomingEnabled,y.zoom=n.zoom,y.minZoom=n.minZoom,y.maxZoom=n.maxZoom,y.panningEnabled=n.panningEnabled,y.userPanningEnabled=n.userPanningEnabled,y.pan=Is(n.pan),y.boxSelectionEnabled=n.boxSelectionEnabled,y.renderer=Is(b.renderer),y.hideEdgesOnViewport=b.hideEdgesOnViewport,y.textureOnViewport=b.textureOnViewport,y.wheelSensitivity=b.wheelSensitivity,y.motionBlur=b.motionBlur,y.multiClickDebounceTime=b.multiClickDebounceTime,y}}});Kb.$id=Kb.getElementById;[r$,s$,lj,BC,Ab,l$,UC,Pb,d$,Ef,Pg].forEach(function(r){jt(Kb,r)});var v$={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},p$={maximal:!1,acyclic:!1},Zd=function(e){return e.scratch("breadthfirst")},fk=function(e,t){return e.scratch("breadthfirst",t)};function cj(r){this.options=jt({},v$,p$,r)}cj.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(G){return G.isChildless()}),i=t,a=r.directed,o=r.acyclic||r.maximal||r.maximalAdjustments>0,s=!!r.boundingBox,u=oa(s?r.boundingBox:structuredClone(e.extent())),l;if(Ha(r.roots))l=r.roots;else if(Kr(r.roots)){for(var c=[],f=0;f<r.roots.length;f++){var d=r.roots[f],h=e.getElementById(d);c.push(h)}l=e.collection(c)}else if(Tt(r.roots))l=e.$(r.roots);else if(a)l=n.roots();else{var v=t.components();l=e.collection();for(var p=function(){var $=v[g],te=$.maxDegree(!1),ce=$.filter(function(he){return he.degree(!1)===te});l=l.add(ce)},g=0;g<v.length;g++)p()}var y=[],b={},m=function($,te){y[te]==null&&(y[te]=[]);var ce=y[te].length;y[te].push($),fk($,{index:ce,depth:te})},_=function($,te){var ce=Zd($),he=ce.depth,xe=ce.index;y[he][xe]=null,$.isChildless()&&m($,te)};i.bfs({roots:l,directed:r.directed,visit:function($,te,ce,he,xe){var Ne=$[0],We=Ne.id();Ne.isChildless()&&m(Ne,xe),b[We]=!0}});for(var x=[],C=0;C<n.length;C++){var w=n[C];b[w.id()]||x.push(w)}var O=function($){for(var te=y[$],ce=0;ce<te.length;ce++){var he=te[ce];if(he==null){te.splice(ce,1),ce--;continue}fk(he,{depth:$,index:ce})}},A=function($,te){for(var ce=Zd($),he=$.incomers().filter(function(Qe){return Qe.isNode()&&t.has(Qe)}),xe=-1,Ne=$.id(),We=0;We<he.length;We++){var ot=he[We],Ze=Zd(ot);xe=Math.max(xe,Ze.depth)}if(ce.depth<=xe){if(!r.acyclic&&te[Ne])return null;var et=xe+1;return _($,et),te[Ne]=et,!0}return!1};if(a&&o){var k=[],R={},I=function($){return k.push($)},M=function(){return k.shift()};for(n.forEach(function(G){return k.push(G)});k.length>0;){var N=M(),F=A(N,R);if(F)N.outgoers().filter(function(G){return G.isNode()&&t.has(G)}).forEach(I);else if(F===null){Gr("Detected double maximal shift for node `"+N.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var z=0;if(r.avoidOverlap)for(var B=0;B<n.length;B++){var U=n[B],W=U.layoutDimensions(r),Y=W.w,H=W.h;z=Math.max(z,Y,H)}var J={},le=function($){if(J[$.id()])return J[$.id()];for(var te=Zd($).depth,ce=$.neighborhood(),he=0,xe=0,Ne=0;Ne<ce.length;Ne++){var We=ce[Ne];if(!(We.isEdge()||We.isParent()||!n.has(We))){var ot=Zd(We);if(ot!=null){var Ze=ot.index,et=ot.depth;if(!(Ze==null||et==null)){var Qe=y[et].length;et<te&&(he+=Ze/Qe,xe++)}}}}return xe=Math.max(1,xe),he=he/xe,xe===0&&(he=0),J[$.id()]=he,he},fe=function($,te){var ce=le($),he=le(te),xe=ce-he;return xe===0?f3($.id(),te.id()):xe};r.depthSort!==void 0&&(fe=r.depthSort);for(var ue=y.length,ge=0;ge<ue;ge++)y[ge].sort(fe),O(ge);for(var ve=[],de=0;de<x.length;de++)ve.push(x[de]);var ie=function(){for(var $=0;$<ue;$++)O($)};ve.length&&(y.unshift(ve),ue=y.length,ie());for(var Q=0,re=0;re<ue;re++)Q=Math.max(y[re].length,Q);var se={x:u.x1+u.w/2,y:u.y1+u.h/2},pe=n.reduce(function(G,$){return function(te){return{w:G.w===-1?te.w:(G.w+te.w)/2,h:G.h===-1?te.h:(G.h+te.h)/2}}($.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Oe=Math.max(ue===1?0:s?(u.h-r.padding*2-pe.h)/(ue-1):(u.h-r.padding*2-pe.h)/(ue+1),z),Ce=y.reduce(function(G,$){return Math.max(G,$.length)},0),Re=function($){var te=Zd($),ce=te.depth,he=te.index;if(r.circle){var xe=Math.min(u.w/2/ue,u.h/2/ue);xe=Math.max(xe,z);var Ne=xe*ce+xe-(ue>0&&y[0].length<=3?xe/2:0),We=2*Math.PI/y[ce].length*he;return ce===0&&y[0].length===1&&(Ne=1),{x:se.x+Ne*Math.cos(We),y:se.y+Ne*Math.sin(We)}}else{var ot=y[ce].length,Ze=Math.max(ot===1?0:s?(u.w-r.padding*2-pe.w)/((r.grid?Ce:ot)-1):(u.w-r.padding*2-pe.w)/((r.grid?Ce:ot)+1),z),et={x:se.x+(he+1-(ot+1)/2)*Ze,y:se.y+(ce+1-(ue+1)/2)*Oe};return et}},be={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(be).indexOf(r.direction)===-1&&pn("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(be).join(", ")));var j=function($){return k9(Re($),u,be[r.direction])};return t.nodes().layoutPositions(this,r,j),this};var g$={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function fj(r){this.options=jt({},g$,r)}fj.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));for(var o=oa(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/a.length:e.sweep,l=u/Math.max(1,a.length-1),c,f=0,d=0;d<a.length;d++){var h=a[d],v=h.layoutDimensions(e),p=v.w,g=v.h;f=Math.max(f,p,g)}if(at(e.radius)?c=e.radius:a.length<=1?c=0:c=Math.min(o.h,o.w)/2-f,a.length>1&&e.avoidOverlap){f*=1.75;var y=Math.cos(l)-Math.cos(0),b=Math.sin(l)-Math.sin(0),m=Math.sqrt(f*f/(y*y+b*b));c=Math.max(m,c)}var _=function(C,w){var O=e.startAngle+w*l*(i?1:-1),A=c*Math.cos(O),k=c*Math.sin(O),R={x:s.x+A,y:s.y+k};return R};return n.nodes().layoutPositions(this,e,_),this};var y$={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function dj(r){this.options=jt({},y$,r)}dj.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,i=e.eles,a=i.nodes().not(":parent"),o=oa(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},u=[],l=0,c=0;c<a.length;c++){var f=a[c],d=void 0;d=e.concentric(f),u.push({value:d,node:f}),f._private.scratch.concentric=d}a.updateStyle();for(var h=0;h<a.length;h++){var v=a[h],p=v.layoutDimensions(e);l=Math.max(l,p.w,p.h)}u.sort(function(Oe,Ce){return Ce.value-Oe.value});for(var g=e.levelWidth(a),y=[[]],b=y[0],m=0;m<u.length;m++){var _=u[m];if(b.length>0){var x=Math.abs(b[0].value-_.value);x>=g&&(b=[],y.push(b))}b.push(_)}var C=l+e.minNodeSpacing;if(!e.avoidOverlap){var w=y.length>0&&y[0].length>1,O=Math.min(o.w,o.h)/2-C,A=O/(y.length+w?1:0);C=Math.min(C,A)}for(var k=0,R=0;R<y.length;R++){var I=y[R],M=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,N=I.dTheta=M/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var F=Math.cos(N)-Math.cos(0),z=Math.sin(N)-Math.sin(0),B=Math.sqrt(C*C/(F*F+z*z));k=Math.max(B,k)}I.r=k,k+=C}if(e.equidistant){for(var U=0,W=0,Y=0;Y<y.length;Y++){var H=y[Y],J=H.r-W;U=Math.max(U,J)}W=0;for(var le=0;le<y.length;le++){var fe=y[le];le===0&&(W=fe.r),fe.r=W,W+=U}}for(var ue={},ge=0;ge<y.length;ge++)for(var ve=y[ge],de=ve.dTheta,ie=ve.r,Q=0;Q<ve.length;Q++){var re=ve[Q],se=e.startAngle+(t?1:-1)*de*Q,pe={x:s.x+ie*Math.cos(se),y:s.y+ie*Math.sin(se)};ue[re.node.id()]=pe}return i.nodes().layoutPositions(this,e,function(Oe){var Ce=Oe.id();return ue[Ce]}),this};var X1,m$={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function j0(r){this.options=jt({},m$,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(i){var a=i.source().data("id"),o=i.target().data("id"),s=e.some(function(l){return l.data("id")===a}),u=e.some(function(l){return l.data("id")===o});return!s||!u});this.options.eles=this.options.eles.not(n)}j0.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?X1=!0:X1=!1;var n=b$(e,t,r);X1&&w$(n),r.randomize&&x$(n);var i=Tu(),a=function(){E$(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(d){return!(t.stopped||d>=r.numIter||(O$(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)a(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var d=r.eles.nodes(),h=vj(n,r,d);d.layoutPositions(t,r,h)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var d=0;l&&d<r.refresh;)l=o(u),u++,d++;if(!l)hk(n,r),s();else{var h=Tu();h-i>=r.animationThreshold&&a(),Vb(c)}};c()}else{for(;l;)l=o(u),u++;hk(n,r),s()}return this};j0.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};j0.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var b$=function(e,t,n){for(var i=n.eles.edges(),a=n.eles.nodes(),o=oa(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:a.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:i.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],d=0;d<f.length;d++){var h=f[d];l[h.id()]=c}for(var c=0;c<s.nodeSize;c++){var v=a[c],p=v.layoutDimensions(n),g={};g.isLocked=v.locked(),g.id=v.data("id"),g.parentId=v.data("parent"),g.cmptId=l[v.id()],g.children=[],g.positionX=v.position("x"),g.positionY=v.position("y"),g.offsetX=0,g.offsetY=0,g.height=p.w,g.width=p.h,g.maxX=g.positionX+g.width/2,g.minX=g.positionX-g.width/2,g.maxY=g.positionY+g.height/2,g.minY=g.positionY-g.height/2,g.padLeft=parseFloat(v.style("padding")),g.padRight=parseFloat(v.style("padding")),g.padTop=parseFloat(v.style("padding")),g.padBottom=parseFloat(v.style("padding")),g.nodeRepulsion=Sn(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,s.layoutNodes.push(g),s.idToIndex[g.id]=c}for(var y=[],b=0,m=-1,_=[],c=0;c<s.nodeSize;c++){var v=s.layoutNodes[c],x=v.parentId;x!=null?s.layoutNodes[s.idToIndex[x]].children.push(v.id):(y[++m]=v.id,_.push(v.id))}for(s.graphSet.push(_);b<=m;){var C=y[b++],w=s.idToIndex[C],h=s.layoutNodes[w],O=h.children;if(O.length>0){s.graphSet.push(O);for(var c=0;c<O.length;c++)y[++m]=O[c]}}for(var c=0;c<s.graphSet.length;c++)for(var A=s.graphSet[c],d=0;d<A.length;d++){var k=s.idToIndex[A[d]];s.indexToGraph[k]=c}for(var c=0;c<s.edgeSize;c++){var R=i[c],I={};I.id=R.data("id"),I.sourceId=R.data("source"),I.targetId=R.data("target");var M=Sn(n.idealEdgeLength)?n.idealEdgeLength(R):n.idealEdgeLength,N=Sn(n.edgeElasticity)?n.edgeElasticity(R):n.edgeElasticity,F=s.idToIndex[I.sourceId],z=s.idToIndex[I.targetId],B=s.indexToGraph[F],U=s.indexToGraph[z];if(B!=U){for(var W=_$(I.sourceId,I.targetId,s),Y=s.graphSet[W],H=0,g=s.layoutNodes[F];Y.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],H++;for(g=s.layoutNodes[z];Y.indexOf(g.id)===-1;)g=s.layoutNodes[s.idToIndex[g.parentId]],H++;M*=H*n.nestingFactor}I.idealLength=M,I.elasticity=N,s.layoutEdges.push(I)}return s},_$=function(e,t,n){var i=hj(e,t,0,n);return 2>i.count?0:i.graph},hj=function(e,t,n,i){var a=i.graphSet[n];if(-1<a.indexOf(e)&&-1<a.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<a.length;s++){var u=a[s],l=i.idToIndex[u],c=i.layoutNodes[l].children;if(c.length!==0){var f=i.indexToGraph[i.idToIndex[c[0]]],d=hj(e,t,f,i);if(d.count!==0)if(d.count===1){if(o++,o===2)break}else return d}}return{count:o,graph:n}},w$,x$=function(e,t){for(var n=e.clientWidth,i=e.clientHeight,a=0;a<e.nodeSize;a++){var o=e.layoutNodes[a];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*i)}},vj=function(e,t,n){var i=e.boundingBox,a={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];a.x1=Math.min(a.x1,s.positionX),a.x2=Math.max(a.x2,s.positionX),a.y1=Math.min(a.y1,s.positionY),a.y2=Math.max(a.y2,s.positionY)}),a.w=a.x2-a.x1,a.h=a.y2-a.y1),function(o,s){var u=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var l=a.w===0?.5:(u.positionX-a.x1)/a.w,c=a.h===0?.5:(u.positionY-a.y1)/a.h;return{x:i.x1+l*i.w,y:i.y1+c*i.h}}else return{x:u.positionX,y:u.positionY}}},E$=function(e,t,n){var i=n.layout,a=n.eles.nodes(),o=vj(e,n,a);a.positions(o),e.ready!==!0&&(e.ready=!0,i.one("layoutready",n.ready),i.emit({type:"layoutready",layout:this}))},O$=function(e,t,n){S$(e,t),A$(e),P$(e,t),R$(e),k$(e)},S$=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var i=e.graphSet[n],a=i.length,o=0;o<a;o++)for(var s=e.layoutNodes[e.idToIndex[i[o]]],u=o+1;u<a;u++){var l=e.layoutNodes[e.idToIndex[i[u]]];C$(s,l,e,t)}},dk=function(e){return-1+2*e*Math.random()},C$=function(e,t,n,i){var a=e.cmptId,o=t.cmptId;if(!(a!==o&&!n.isCompound)){var s=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;s===0&&u===0&&(s=dk(l),u=dk(l));var c=T$(e,t,s,u);if(c>0)var f=i.nodeOverlap*c,d=Math.sqrt(s*s+u*u),h=f*s/d,v=f*u/d;else var p=Zb(e,s,u),g=Zb(t,-1*s,-1*u),y=g.x-p.x,b=g.y-p.y,m=y*y+b*b,d=Math.sqrt(m),f=(e.nodeRepulsion+t.nodeRepulsion)/m,h=f*y/d,v=f*b/d;e.isLocked||(e.offsetX-=h,e.offsetY-=v),t.isLocked||(t.offsetX+=h,t.offsetY+=v)}},T$=function(e,t,n,i){if(n>0)var a=e.maxX-t.minX;else var a=t.maxX-e.minX;if(i>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return a>=0&&o>=0?Math.sqrt(a*a+o*o):0},Zb=function(e,t,n){var i=e.positionX,a=e.positionY,o=e.height||1,s=e.width||1,u=n/t,l=o/s,c={};return t===0&&0<n||t===0&&0>n?(c.x=i,c.y=a+o/2,c):0<t&&-1*l<=u&&u<=l?(c.x=i+s/2,c.y=a+s*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=i-s/2,c.y=a-s*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=i+o*t/2/n,c.y=a+o/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=i-o*t/2/n,c.y=a-o/2),c)},A$=function(e,t){for(var n=0;n<e.edgeSize;n++){var i=e.layoutEdges[n],a=e.idToIndex[i.sourceId],o=e.layoutNodes[a],s=e.idToIndex[i.targetId],u=e.layoutNodes[s],l=u.positionX-o.positionX,c=u.positionY-o.positionY;if(!(l===0&&c===0)){var f=Zb(o,l,c),d=Zb(u,-1*l,-1*c),h=d.x-f.x,v=d.y-f.y,p=Math.sqrt(h*h+v*v),g=Math.pow(i.idealLength-p,2)/i.elasticity;if(p!==0)var y=g*h/p,b=g*v/p;else var y=0,b=0;o.isLocked||(o.offsetX+=y,o.offsetY+=b),u.isLocked||(u.offsetX-=y,u.offsetY-=b)}}},P$=function(e,t){if(t.gravity!==0)for(var n=1,i=0;i<e.graphSet.length;i++){var a=e.graphSet[i],o=a.length;if(i===0)var s=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[a[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],s=c.positionX,u=c.positionY;for(var f=0;f<o;f++){var d=e.layoutNodes[e.idToIndex[a[f]]];if(!d.isLocked){var h=s-d.positionX,v=u-d.positionY,p=Math.sqrt(h*h+v*v);if(p>n){var g=t.gravity*h/p,y=t.gravity*v/p;d.offsetX+=g,d.offsetY+=y}}}}},R$=function(e,t){var n=[],i=0,a=-1;for(n.push.apply(n,e.graphSet[0]),a+=e.graphSet[0].length;i<=a;){var o=n[i++],s=e.idToIndex[o],u=e.layoutNodes[s],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,d=0;d<l.length;d++){var h=e.layoutNodes[e.idToIndex[l[d]]];h.offsetX+=c,h.offsetY+=f,n[++a]=l[d]}u.offsetX=0,u.offsetY=0}}},k$=function(e,t){for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&(i.maxX=void 0,i.minX=void 0,i.maxY=void 0,i.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];if(!(0<i.children.length||i.isLocked)){var a=I$(i.offsetX,i.offsetY,e.temperature);i.positionX+=a.x,i.positionY+=a.y,i.offsetX=0,i.offsetY=0,i.minX=i.positionX-i.width,i.maxX=i.positionX+i.width,i.minY=i.positionY-i.height,i.maxY=i.positionY+i.height,pj(i,e)}}for(var n=0;n<e.nodeSize;n++){var i=e.layoutNodes[n];0<i.children.length&&!i.isLocked&&(i.positionX=(i.maxX+i.minX)/2,i.positionY=(i.maxY+i.minY)/2,i.width=i.maxX-i.minX,i.height=i.maxY-i.minY)}},I$=function(e,t,n){var i=Math.sqrt(e*e+t*t);if(i>n)var a={x:n*e/i,y:n*t/i};else var a={x:e,y:t};return a},pj=function(e,t){var n=e.parentId;if(n!=null){var i=t.layoutNodes[t.idToIndex[n]],a=!1;if((i.maxX==null||e.maxX+i.padRight>i.maxX)&&(i.maxX=e.maxX+i.padRight,a=!0),(i.minX==null||e.minX-i.padLeft<i.minX)&&(i.minX=e.minX-i.padLeft,a=!0),(i.maxY==null||e.maxY+i.padBottom>i.maxY)&&(i.maxY=e.maxY+i.padBottom,a=!0),(i.minY==null||e.minY-i.padTop<i.minY)&&(i.minY=e.minY-i.padTop,a=!0),a)return pj(i,t)}},hk=function(e,t){for(var n=e.layoutNodes,i=[],a=0;a<n.length;a++){var o=n[a],s=o.cmptId,u=i[s]=i[s]||[];u.push(o)}for(var l=0,a=0;a<i.length;a++){var c=i[a];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}i.sort(function(b,m){return m.w*m.h-b.w*b.h});for(var h=0,v=0,p=0,g=0,y=Math.sqrt(l)*e.clientWidth/e.clientHeight,a=0;a<i.length;a++){var c=i[a];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=h-c.x1,d.positionY+=v-c.y1)}h+=c.w+t.componentSpacing,p+=c.w+t.componentSpacing,g=Math.max(g,c.h),p>y&&(v+=g+t.componentSpacing,h=0,p=0,g=0)}}},D$={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function gj(r){this.options=jt({},D$,r)}gj.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));var a=oa(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(a.h===0||a.w===0)n.nodes().layoutPositions(this,e,function(le){return{x:a.x1,y:a.y1}});else{var o=i.size(),s=Math.sqrt(o*a.h/a.w),u=Math.round(s),l=Math.round(a.w/a.h*s),c=function(fe){if(fe==null)return Math.min(u,l);var ue=Math.min(u,l);ue==u?u=fe:l=fe},f=function(fe){if(fe==null)return Math.max(u,l);var ue=Math.max(u,l);ue==u?u=fe:l=fe},d=e.rows,h=e.cols!=null?e.cols:e.columns;if(d!=null&&h!=null)u=d,l=h;else if(d!=null&&h==null)u=d,l=Math.ceil(o/u);else if(d==null&&h!=null)l=h,u=Math.ceil(o/l);else if(l*u>o){var v=c(),p=f();(v-1)*p>=o?c(v-1):(p-1)*v>=o&&f(p-1)}else for(;l*u<o;){var g=c(),y=f();(y+1)*g>=o?f(y+1):c(g+1)}var b=a.w/l,m=a.h/u;if(e.condense&&(b=0,m=0),e.avoidOverlap)for(var _=0;_<i.length;_++){var x=i[_],C=x._private.position;(C.x==null||C.y==null)&&(C.x=0,C.y=0);var w=x.layoutDimensions(e),O=e.avoidOverlapPadding,A=w.w+O,k=w.h+O;b=Math.max(b,A),m=Math.max(m,k)}for(var R={},I=function(fe,ue){return!!R["c-"+fe+"-"+ue]},M=function(fe,ue){R["c-"+fe+"-"+ue]=!0},N=0,F=0,z=function(){F++,F>=l&&(F=0,N++)},B={},U=0;U<i.length;U++){var W=i[U],Y=e.position(W);if(Y&&(Y.row!==void 0||Y.col!==void 0)){var H={row:Y.row,col:Y.col};if(H.col===void 0)for(H.col=0;I(H.row,H.col);)H.col++;else if(H.row===void 0)for(H.row=0;I(H.row,H.col);)H.row++;B[W.id()]=H,M(H.row,H.col)}}var J=function(fe,ue){var ge,ve;if(fe.locked()||fe.isParent())return!1;var de=B[fe.id()];if(de)ge=de.col*b+b/2+a.x1,ve=de.row*m+m/2+a.y1;else{for(;I(N,F);)z();ge=F*b+b/2+a.x1,ve=N*m+m/2+a.y1,M(N,F),z()}return{x:ge,y:ve}};i.layoutPositions(this,e,J)}return this};var M$={ready:function(){},stop:function(){}};function vT(r){this.options=jt({},M$,r)}vT.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};vT.prototype.stop=function(){return this};var L$={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function yj(r){this.options=jt({},L$,r)}yj.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=Sn(r.positions);function i(a){if(r.positions==null)return n7(a.position());if(n)return r.positions(a);var o=r.positions[a._private.data.id];return o??null}return t.layoutPositions(this,r,function(a,o){var s=i(a);return a.locked()||s==null?!1:s}),this};var N$={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function mj(r){this.options=jt({},N$,r)}mj.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=oa(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),i=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,i),this};var j$=[{name:"breadthfirst",impl:cj},{name:"circle",impl:fj},{name:"concentric",impl:dj},{name:"cose",impl:j0},{name:"grid",impl:gj},{name:"null",impl:vT},{name:"preset",impl:yj},{name:"random",impl:mj}];function bj(r){this.options=r,this.notifications=0}var vk=function(){},pk=function(){throw new Error("A headless instance can not render images")};bj.prototype={recalculateRenderedStyle:vk,notify:function(){this.notifications++},init:vk,isHeadless:function(){return!0},png:pk,jpg:pk};var pT={};pT.arrowShapeWidth=.3;pT.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,d,h,v,p){var g=h.x-f/2-p,y=h.x+f/2+p,b=h.y-f/2-p,m=h.y+f/2+p,_=g<=l&&l<=y&&b<=c&&c<=m;return _},n=function(l,c,f,d,h){var v=l*Math.cos(d)-c*Math.sin(d),p=l*Math.sin(d)+c*Math.cos(d),g=v*f,y=p*f,b=g+h.x,m=y+h.y;return{x:b,y:m}},i=function(l,c,f,d){for(var h=[],v=0;v<l.length;v+=2){var p=l[v],g=l[v+1];h.push(n(p,g,c,f,d))}return h},a=function(l){for(var c=[],f=0;f<l.length;f++){var d=l[f];c.push(d.x,d.y)}return c},o=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},s=function(l,c){Tt(c)&&(c=r[c]),r[l]=jt({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,h,v,p,g,y){var b=a(i(this.points,v+2*y,p,g)),m=Ea(d,h,b);return m},roughCollide:t,draw:function(d,h,v,p){var g=i(this.points,h,v,p);e.arrowShapeImpl("polygon")(d,g)},spacing:function(d){return 0},gap:o},c)};s("none",{collide:$b,roughCollide:$b,draw:eT,spacing:PP,gap:PP}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,d,h){var v=i(this.points,c,f,d),p=this.controlPoint,g=n(p[0],p[1],c,f,d);e.arrowShapeImpl(this.name)(l,v,g)},gap:function(l){return o(l)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,d,h,v,p){var g=a(i(this.points,f+2*p,d,h)),y=a(i(this.pointsTee,f+2*p,d,h)),b=Ea(l,c,g)||Ea(l,c,y);return b},draw:function(l,c,f,d,h){var v=i(this.points,c,f,d),p=i(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(l,v,p)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,d,h,v,p){var g=h,y=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((f+2*p)*this.radius,2),b=a(i(this.points,f+2*p,d,h));return Ea(l,c,b)||y},draw:function(l,c,f,d,h){var v=i(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(l,v,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),d=c/l,h=3,v=5;return f[h]=f[h]-d,f[v]=f[v]-d,f},collide:function(l,c,f,d,h,v,p){var g=a(i(this.points,f+2*p,d,h)),y=a(i(this.crossLinePts(f,v),f+2*p,d,h)),b=Ea(l,c,g)||Ea(l,c,y);return b},draw:function(l,c,f,d,h){var v=i(this.points,c,f,d),p=i(this.crossLinePts(c,h),c,f,d);e.arrowShapeImpl(this.name)(l,v,p)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return o(l)*.525}}),s("circle",{radius:.15,collide:function(l,c,f,d,h,v,p){var g=h,y=Math.pow(g.x-l,2)+Math.pow(g.y-c,2)<=Math.pow((f+2*p)*this.radius,2);return y},draw:function(l,c,f,d,h){e.arrowShapeImpl(this.name)(l,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Df={};Df.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=t.pan(),u=t.zoom(),l=((r-i)/o-s.x)/u,c=((e-a)/o-s.y)/u;return[l,c]};Df.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(y){return parseFloat(t.getPropertyValue(y))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,u=i.left+i.right,l=i.top+i.bottom,c=a.left+a.right,f=e.width/(o+c),d=o-u,h=s-l,v=e.left+i.left+a.left,p=e.top+i.top+a.top;return this.containerBB=[v,p,d,h,f]};Df.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Df.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Df.findNearestElements=function(r,e,t,n){var i=this,a=this,o=a.getCachedZSortedEles(),s=[],u=a.cy.zoom(),l=a.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,d=(n?8:2)/u,h=1/0,v,p;t&&(o=o.interactive);function g(w,O){if(w.isNode()){if(p)return;p=w,s.push(w)}if(w.isEdge()&&(O==null||O<h))if(v){if(v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===w.pstyle("z-compound-depth").value){for(var A=0;A<s.length;A++)if(s[A].isEdge()){s[A]=w,v=w,h=O??h;break}}}else s.push(w),v=w,h=O??h}function y(w){var O=w.outerWidth()+2*f,A=w.outerHeight()+2*f,k=O/2,R=A/2,I=w.position(),M=w.pstyle("corner-radius").value==="auto"?"auto":w.pstyle("corner-radius").pfValue,N=w._private.rscratch;if(I.x-k<=r&&r<=I.x+k&&I.y-R<=e&&e<=I.y+R){var F=a.nodeShapes[i.getNodeShape(w)];if(F.checkPoint(r,e,0,O,A,I.x,I.y,M,N))return g(w,0),!0}}function b(w){var O=w._private,A=O.rscratch,k=w.pstyle("width").pfValue,R=w.pstyle("arrow-scale").value,I=k/2+c,M=I*I,N=I*2,U=O.source,W=O.target,F;if(A.edgeType==="segments"||A.edgeType==="straight"||A.edgeType==="haystack"){for(var z=A.allpts,B=0;B+3<z.length;B+=2)if(y7(r,e,z[B],z[B+1],z[B+2],z[B+3],N)&&M>(F=x7(r,e,z[B],z[B+1],z[B+2],z[B+3])))return g(w,F),!0}else if(A.edgeType==="bezier"||A.edgeType==="multibezier"||A.edgeType==="self"||A.edgeType==="compound"){for(var z=A.allpts,B=0;B+5<A.allpts.length;B+=4)if(m7(r,e,z[B],z[B+1],z[B+2],z[B+3],z[B+4],z[B+5],N)&&M>(F=w7(r,e,z[B],z[B+1],z[B+2],z[B+3],z[B+4],z[B+5])))return g(w,F),!0}for(var U=U||O.source,W=W||O.target,Y=i.getArrowWidth(k,R),H=[{name:"source",x:A.arrowStartX,y:A.arrowStartY,angle:A.srcArrowAngle},{name:"target",x:A.arrowEndX,y:A.arrowEndY,angle:A.tgtArrowAngle},{name:"mid-source",x:A.midX,y:A.midY,angle:A.midsrcArrowAngle},{name:"mid-target",x:A.midX,y:A.midY,angle:A.midtgtArrowAngle}],B=0;B<H.length;B++){var J=H[B],le=a.arrowShapes[w.pstyle(J.name+"-arrow-shape").value],fe=w.pstyle("width").pfValue;if(le.roughCollide(r,e,Y,J.angle,{x:J.x,y:J.y},fe,c)&&le.collide(r,e,Y,J.angle,{x:J.x,y:J.y},fe,c))return g(w),!0}l&&s.length>0&&(y(U),y(W))}function m(w,O,A){return xa(w,O,A)}function _(w,O){var A=w._private,k=d,R;O?R=O+"-":R="",w.boundingBox();var I=A.labelBounds[O||"main"],M=w.pstyle(R+"label").value,N=w.pstyle("text-events").strValue==="yes";if(!(!N||!M)){var F=m(A.rscratch,"labelX",O),z=m(A.rscratch,"labelY",O),B=m(A.rscratch,"labelAngle",O),U=w.pstyle(R+"text-margin-x").pfValue,W=w.pstyle(R+"text-margin-y").pfValue,Y=I.x1-k-U,H=I.x2+k-U,J=I.y1-k-W,le=I.y2+k-W;if(B){var fe=Math.cos(B),ue=Math.sin(B),ge=function(pe,Oe){return pe=pe-F,Oe=Oe-z,{x:pe*fe-Oe*ue+F,y:pe*ue+Oe*fe+z}},ve=ge(Y,J),de=ge(Y,le),ie=ge(H,J),Q=ge(H,le),re=[ve.x+U,ve.y+W,ie.x+U,ie.y+W,Q.x+U,Q.y+W,de.x+U,de.y+W];if(Ea(r,e,re))return g(w),!0}else if(Il(I,r,e))return g(w),!0}}for(var x=o.length-1;x>=0;x--){var C=o[x];C.isNode()?y(C)||_(C):b(C)||_(C)||_(C,"source")||_(C,"target")}return s};Df.getAllInBox=function(r,e,t,n){var i=this.getCachedZSortedEles().interactive,a=this.cy.zoom(),o=2/a,s=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),f=Math.max(e,n);r=u,t=l,e=c,n=f;var d=oa({x1:r,y1:e,x2:t,y2:n}),h=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}],v=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function p(pe,Oe,Ce){return xa(pe,Oe,Ce)}function g(pe,Oe){var Ce=pe._private,Re=o,be="";pe.boundingBox();var j=Ce.labelBounds.main;if(!j)return null;var G=p(Ce.rscratch,"labelX",Oe),$=p(Ce.rscratch,"labelY",Oe),te=p(Ce.rscratch,"labelAngle",Oe),ce=pe.pstyle(be+"text-margin-x").pfValue,he=pe.pstyle(be+"text-margin-y").pfValue,xe=j.x1-Re-ce,Ne=j.x2+Re-ce,We=j.y1-Re-he,ot=j.y2+Re-he;if(te){var Ze=Math.cos(te),et=Math.sin(te),Qe=function(Ie,ee){return Ie=Ie-G,ee=ee-$,{x:Ie*Ze-ee*et+G,y:Ie*et+ee*Ze+$}};return[Qe(xe,We),Qe(Ne,We),Qe(Ne,ot),Qe(xe,ot)]}else return[{x:xe,y:We},{x:Ne,y:We},{x:Ne,y:ot},{x:xe,y:ot}]}function y(pe,Oe,Ce,Re){function be(j,G,$){return($.y-j.y)*(G.x-j.x)>(G.y-j.y)*($.x-j.x)}return be(pe,Ce,Re)!==be(Oe,Ce,Re)&&be(pe,Oe,Ce)!==be(pe,Oe,Re)}for(var b=0;b<i.length;b++){var m=i[b];if(m.isNode()){var _=m,x=_.pstyle("text-events").strValue==="yes",C=_.pstyle("box-selection").strValue,w=_.pstyle("box-select-labels").strValue==="yes";if(C==="none")continue;var O=(C==="overlap"||w)&&x,A=_.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:O});if(C==="contain"){var k=!1;if(w&&x){var R=g(_);R&&Hw(R,h)&&(s.push(_),k=!0)}!k&&C3(d,A)&&s.push(_)}else if(C==="overlap"&&iT(d,A)){var I=_.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),M=[{x:I.x1,y:I.y1},{x:I.x2,y:I.y1},{x:I.x2,y:I.y2},{x:I.x1,y:I.y2}];if(Hw(M,h))s.push(_);else{var N=g(_);N&&Hw(N,h)&&s.push(_)}}}else{var F=m,z=F._private,B=z.rscratch,U=F.pstyle("box-selection").strValue;if(U==="none")continue;if(U==="contain"){if(B.startX!=null&&B.startY!=null&&!Il(d,B.startX,B.startY)||B.endX!=null&&B.endY!=null&&!Il(d,B.endX,B.endY))continue;if(B.edgeType==="bezier"||B.edgeType==="multibezier"||B.edgeType==="self"||B.edgeType==="compound"||B.edgeType==="segments"||B.edgeType==="haystack"){for(var W=z.rstyle.bezierPts||z.rstyle.linePts||z.rstyle.haystackPts,Y=!0,H=0;H<W.length;H++)if(!MP(d,W[H])){Y=!1;break}Y&&s.push(F)}else B.edgeType==="straight"&&s.push(F)}else if(U==="overlap"){var J=!1;if(B.startX!=null&&B.startY!=null&&B.endX!=null&&B.endY!=null&&(Il(d,B.startX,B.startY)||Il(d,B.endX,B.endY)))s.push(F),J=!0;else if(!J&&B.edgeType==="haystack"){for(var le=z.rstyle.haystackPts,fe=0;fe<le.length;fe++)if(MP(d,le[fe])){s.push(F),J=!0;break}}if(!J){var ue=z.rstyle.bezierPts||z.rstyle.linePts||z.rstyle.haystackPts;if((!ue||ue.length<2)&&B.edgeType==="straight"&&B.startX!=null&&B.startY!=null&&B.endX!=null&&B.endY!=null&&(ue=[{x:B.startX,y:B.startY},{x:B.endX,y:B.endY}]),!ue||ue.length<2)continue;for(var ge=0;ge<ue.length-1;ge++){for(var ve=ue[ge],de=ue[ge+1],ie=0;ie<v.length;ie++){var Q=Hn(v[ie],2),re=Q[0],se=Q[1];if(y(ve,de,re,se)){s.push(F),J=!0;break}}if(J)break}}}}}return s};var Qb={};Qb.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",i=e.edgeType==="multibezier",a=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",u,l,c,f,d,h,y,b;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,h=e.arrowEndY),y=e.midX,b=e.midY,a)u=c-e.segpts[0],l=f-e.segpts[1];else if(i||o||s||n){var v=e.allpts,p=fi(v[0],v[2],v[4],.1),g=fi(v[1],v[3],v[5],.1);u=c-p,l=f-g}else u=c-y,l=f-b;e.srcArrowAngle=Mm(u,l);var y=e.midX,b=e.midY;if(t&&(y=(c+d)/2,b=(f+h)/2),u=d-c,l=h-f,a){var v=e.allpts;if(v.length/2%2===0){var m=v.length/2,_=m-2;u=v[m]-v[_],l=v[m+1]-v[_+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var m=v.length/2-1,_=m-2;u=v[m]-v[_],l=v[m+1]-v[_+1]}}else if(i||o||s){var v=e.allpts,x=e.ctrlpts,C,w,O,A;if(x.length/2%2===0){var k=v.length/2-1,R=k+2,I=R+2;C=fi(v[k],v[R],v[I],0),w=fi(v[k+1],v[R+1],v[I+1],0),O=fi(v[k],v[R],v[I],1e-4),A=fi(v[k+1],v[R+1],v[I+1],1e-4)}else{var R=v.length/2-1,k=R-2,I=R+2;C=fi(v[k],v[R],v[I],.4999),w=fi(v[k+1],v[R+1],v[I+1],.4999),O=fi(v[k],v[R],v[I],.5),A=fi(v[k+1],v[R+1],v[I+1],.5)}u=O-C,l=A-w}if(e.midtgtArrowAngle=Mm(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,a){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var m=v.length/2-1,M=m+2;u=-(v[M]-v[m]),l=-(v[M+1]-v[m+1])}}}if(e.midsrcArrowAngle=Mm(u,l),a)u=d-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(i||o||s||n){var v=e.allpts,N=v.length,p=fi(v[N-6],v[N-4],v[N-2],.9),g=fi(v[N-5],v[N-3],v[N-1],.9);u=d-p,l=h-g}else u=d-y,l=h-b;e.tgtArrowAngle=Mm(u,l)};Qb.getArrowWidth=Qb.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var zC,qC,ks={},yo={},gk,yk,df,Rb,du,ef,of,Es,Qd,qm,_j,wj,GC,VC,mk,bk=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},F$=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},B$=function(e,t,n,i,a){if(e!==mk?bk(t,e,ks):F$(yo,ks),bk(t,n,yo),gk=ks.nx*yo.ny-ks.ny*yo.nx,yk=ks.nx*yo.nx-ks.ny*-yo.ny,du=Math.asin(Math.max(-1,Math.min(1,gk))),Math.abs(du)<1e-6){zC=t.x,qC=t.y,of=Qd=0;return}df=1,Rb=!1,yk<0?du<0?du=Math.PI+du:(du=Math.PI-du,df=-1,Rb=!0):du>0&&(df=-1,Rb=!0),t.radius!==void 0?Qd=t.radius:Qd=i,ef=du/2,qm=Math.min(ks.len/2,yo.len/2),a?(Es=Math.abs(Math.cos(ef)*Qd/Math.sin(ef)),Es>qm?(Es=qm,of=Math.abs(Es*Math.sin(ef)/Math.cos(ef))):of=Qd):(Es=Math.min(qm,Qd),of=Math.abs(Es*Math.sin(ef)/Math.cos(ef))),GC=t.x+yo.nx*Es,VC=t.y+yo.ny*Es,zC=GC-yo.ny*of*df,qC=VC+yo.nx*of*df,_j=t.x+ks.nx*Es,wj=t.y+ks.ny*Es,mk=t};function xj(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function gT(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(B$(r,e,t,n,i),{cx:zC,cy:qC,radius:of,startX:_j,startY:wj,stopX:GC,stopY:VC,startAngle:ks.ang+Math.PI/2*df,endAngle:yo.ang-Math.PI/2*df,counterClockwise:Rb})}var kg=.01,U$=Math.sqrt(2*kg),Gi={};Gi.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,i=e.vectorNormInverse,a,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),u=o.units!=null&&s.units!=null,l=function(x,C,w,O){var A=O-C,k=w-x,R=Math.sqrt(k*k+A*A);return{x:-A/R,y:k/R}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":a=t;break;case"intersection":a=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],o),d=Hn(f,2),h=d[0],v=d[1],p=this.manualEndptToPx(r.target()[0],s),g=Hn(p,2),y=g[0],b=g[1],m={x1:h,y1:v,x2:y,y2:b};i=l(h,v,y,b),a=m}else Gr("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),a=n;break}}return{midptPts:a,vectorNormInverse:i}};Gi.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,i=n.rscratch;if(!i.haystack){var a=Math.random()*2*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},a=Math.random()*2*Math.PI,i.target={x:Math.cos(a),y:Math.sin(a)}}var o=n.source,s=n.target,u=o.position(),l=s.position(),c=o.width(),f=s.width(),d=o.height(),h=s.height(),v=t.pstyle("haystack-radius").value,p=v/2;i.haystackPts=i.allpts=[i.source.x*c*p+u.x,i.source.y*d*p+u.y,i.target.x*f*p+l.x,i.target.y*h*p+l.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Gi.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),i=r.pstyle("segment-distances"),a=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),u=a.pfValue[a.pfValue.length-1],l=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<s;c++){var f=n.pfValue[c],d=i.pfValue[c],h=1-f,v=f,p=this.findMidptPtsEtc(r,e),g=p.midptPts,y=p.vectorNormInverse,b={x:g.x1*h+g.x2*v,y:g.y1*h+g.y2*v};t.segpts.push(b.x+y.x*d,b.y+y.y*d),t.radii.push(a.pfValue[c]!==void 0?a.pfValue[c]:u),t.isArcRadius.push((o.pfValue[c]!==void 0?o.pfValue[c]:l)==="arc-radius")}};Gi.findLoopPoints=function(r,e,t,n){var i=r._private.rscratch,a=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),u=s?s.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;i.edgeType="self";var d=t,h=f;n&&(d=0,h=u);var v=l-Math.PI/2,p=v-c/2,g=v+c/2,y=l+"_"+c;d=a[y]===void 0?a[y]=0:++a[y],i.ctrlpts=[o.x+Math.cos(p)*1.4*h*(d/3+1),o.y+Math.sin(p)*1.4*h*(d/3+1),o.x+Math.cos(g)*1.4*h*(d/3+1),o.y+Math.sin(g)*1.4*h*(d/3+1)]};Gi.findCompoundLoopPoints=function(r,e,t,n){var i=r._private.rscratch;i.edgeType="compound";var a=e.srcPos,o=e.tgtPos,s=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,d=r.pstyle("control-point-distances"),h=d?d.pfValue[0]:void 0,v=t,p=f;n&&(v=0,p=h);var g=50,y={x:a.x-s/2,y:a.y-u/2},b={x:o.x-l/2,y:o.y-c/2},m={x:Math.min(y.x,b.x),y:Math.min(y.y,b.y)},_=.5,x=Math.max(_,Math.log(s*kg)),C=Math.max(_,Math.log(l*kg));i.ctrlpts=[m.x,m.y-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*x,m.x-(1+Math.pow(g,1.12)/100)*p*(v/3+1)*C,m.y]};Gi.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Gi.findBezierPoints=function(r,e,t,n,i){var a=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=s&&u?Math.min(s.value.length,u.value.length):1,c=s?s.pfValue[0]:void 0,f=u.value[0],d=n;a.edgeType=d?"multibezier":"bezier",a.ctrlpts=[];for(var h=0;h<l;h++){var v=(.5-e.eles.length/2+t)*o*(i?-1:1),p=void 0,g=nT(v);d&&(c=s?s.pfValue[h]:o,f=u.value[h]),n?p=c:p=c!==void 0?g*c:void 0;var y=p!==void 0?p:v,b=1-f,m=f,_=this.findMidptPtsEtc(r,e),x=_.midptPts,C=_.vectorNormInverse,w={x:x.x1*b+x.x2*m,y:x.y1*b+x.y2*m};a.ctrlpts.push(w.x+C.x*y,w.y+C.y*y)}};Gi.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",i="horizontal",a="leftward",o="rightward",s="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,d=e.srcH,h=e.tgtW,v=e.tgtH,p=r.pstyle("edge-distances").value,g=p!=="node-position",y=r.pstyle("taxi-direction").value,b=y,m=r.pstyle("taxi-turn"),_=m.units==="%",x=m.pfValue,C=x<0,w=r.pstyle("taxi-turn-min-distance").pfValue,O=g?(f+h)/2:0,A=g?(d+v)/2:0,k=c.x2-c.x1,R=c.y2-c.y1,I=function(ee,we){return ee>0?Math.max(ee-we,0):Math.min(ee+we,0)},M=I(k,O),N=I(R,A),F=!1;b===l?y=Math.abs(M)>Math.abs(N)?i:n:b===u||b===s?(y=n,F=!0):(b===a||b===o)&&(y=i,F=!0);var z=y===n,B=z?N:M,U=z?R:k,W=nT(U),Y=!1;!(F&&(_||C))&&(b===s&&U<0||b===u&&U>0||b===a&&U>0||b===o&&U<0)&&(W*=-1,B=W*Math.abs(B),Y=!0);var H;if(_){var J=x<0?1+x:x;H=J*B}else{var le=x<0?B:0;H=le+x*W}var fe=function(ee){return Math.abs(ee)<w||Math.abs(ee)>=Math.abs(B)},ue=fe(H),ge=fe(Math.abs(B)-Math.abs(H)),ve=ue||ge;if(ve&&!Y)if(z){var de=Math.abs(U)<=d/2,ie=Math.abs(k)<=h/2;if(de){var Q=(c.x1+c.x2)/2,re=c.y1,se=c.y2;t.segpts=[Q,re,Q,se]}else if(ie){var pe=(c.y1+c.y2)/2,Oe=c.x1,Ce=c.x2;t.segpts=[Oe,pe,Ce,pe]}else t.segpts=[c.x1,c.y2]}else{var Re=Math.abs(U)<=f/2,be=Math.abs(R)<=v/2;if(Re){var j=(c.y1+c.y2)/2,G=c.x1,$=c.x2;t.segpts=[G,j,$,j]}else if(be){var te=(c.x1+c.x2)/2,ce=c.y1,he=c.y2;t.segpts=[te,ce,te,he]}else t.segpts=[c.x2,c.y1]}else if(z){var xe=c.y1+H+(g?d/2*W:0),Ne=c.x1,We=c.x2;t.segpts=[Ne,xe,We,xe]}else{var ot=c.x1+H+(g?f/2*W:0),Ze=c.y1,et=c.y2;t.segpts=[ot,Ze,ot,et]}if(t.isRound){var Qe=r.pstyle("taxi-radius").value,Ye=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(Qe),t.isArcRadius=new Array(t.segpts.length/2).fill(Ye)}};Gi.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,i=e.tgtPos,a=e.srcW,o=e.srcH,s=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,h=e.srcRs,v=e.tgtRs,p=!at(t.startX)||!at(t.startY),g=!at(t.arrowStartX)||!at(t.arrowStartY),y=!at(t.endX)||!at(t.endY),b=!at(t.arrowEndX)||!at(t.arrowEndY),m=3,_=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,x=m*_,C=wf({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),w=C<x,O=wf({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),A=O<x,k=!1;if(p||g||w){k=!0;var R={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},I=Math.sqrt(R.x*R.x+R.y*R.y),M={x:R.x/I,y:R.y/I},N=Math.max(a,o),F={x:t.ctrlpts[0]+M.x*2*N,y:t.ctrlpts[1]+M.y*2*N},z=l.intersectLine(n.x,n.y,a,o,F.x,F.y,0,f,h);w?(t.ctrlpts[0]=t.ctrlpts[0]+M.x*(x-C),t.ctrlpts[1]=t.ctrlpts[1]+M.y*(x-C)):(t.ctrlpts[0]=z[0]+M.x*x,t.ctrlpts[1]=z[1]+M.y*x)}if(y||b||A){k=!0;var B={x:t.ctrlpts[0]-i.x,y:t.ctrlpts[1]-i.y},U=Math.sqrt(B.x*B.x+B.y*B.y),W={x:B.x/U,y:B.y/U},Y=Math.max(a,o),H={x:t.ctrlpts[0]+W.x*2*Y,y:t.ctrlpts[1]+W.y*2*Y},J=c.intersectLine(i.x,i.y,s,u,H.x,H.y,0,d,v);A?(t.ctrlpts[0]=t.ctrlpts[0]+W.x*(x-O),t.ctrlpts[1]=t.ctrlpts[1]+W.y*(x-O)):(t.ctrlpts[0]=J[0]+W.x*x,t.ctrlpts[1]=J[1]+W.y*x)}k&&this.findEndpoints(r)}};Gi.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,i;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,i=.5,e.midX=fi(e.allpts[n],e.allpts[n+2],e.allpts[n+4],i),e.midY=fi(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],i))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var a=2;a+3<e.allpts.length;a+=2){var o=e.radii[a/2-1],s=e.isArcRadius[a/2-1];e.roundCorners.push(gT({x:e.allpts[a-2],y:e.allpts[a-1]},{x:e.allpts[a],y:e.allpts[a+1],radius:o},{x:e.allpts[a+2],y:e.allpts[a+3]},o,s))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2];if(d.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-h.y,h.x-f.x]}else{var v=[f.x-d.cx,f.y-d.cy],p=d.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(g){return g*p}),e.midX=d.cx+v[0],e.midY=d.cy+v[1],e.midVector=v}}}}};Gi.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||at(e.startX)&&at(e.startY)&&at(e.endX)&&at(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Gr("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Gi.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,i=n.hasCompoundNodes(),a=new bu,o=function(A,k){return[].concat(qb(A),[k?1:0]).join("-")},s=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,d=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(d==="haystack"){u.push(c);continue}var h=d==="unbundled-bezier"||kl(d,"segments")||d==="straight"||d==="straight-triangle"||kl(d,"taxi"),v=d==="unbundled-bezier"||d==="bezier",p=f.source,g=f.target,y=p.poolIndex(),b=g.poolIndex(),m=[y,b].sort(),_=o(m,h),x=a.get(_);x==null&&(x={eles:[]},s.push({pairId:m,edgeIsUnbundled:h}),a.set(_,x)),x.eles.push(c),h&&(x.hasUnbundled=!0),v&&(x.hasBezier=!0)}}for(var C=function(){var A=s[w],k=A.pairId,R=A.edgeIsUnbundled,I=o(k,R),M=a.get(I),N;if(!M.hasUnbundled){var F=M.eles[0].parallelEdges().filter(function(Ye){return Ye.isBundledBezier()});tT(M.eles),F.forEach(function(Ye){return M.eles.push(Ye)}),M.eles.sort(function(Ye,Ie){return Ye.poolIndex()-Ie.poolIndex()})}var z=M.eles[0],B=z.source(),U=z.target();if(B.poolIndex()>U.poolIndex()){var W=B;B=U,U=W}var Y=M.srcPos=B.position(),H=M.tgtPos=U.position(),J=M.srcW=B.outerWidth(),le=M.srcH=B.outerHeight(),fe=M.tgtW=U.outerWidth(),ue=M.tgtH=U.outerHeight(),ge=M.srcShape=t.nodeShapes[e.getNodeShape(B)],ve=M.tgtShape=t.nodeShapes[e.getNodeShape(U)],de=M.srcCornerRadius=B.pstyle("corner-radius").value==="auto"?"auto":B.pstyle("corner-radius").pfValue,ie=M.tgtCornerRadius=U.pstyle("corner-radius").value==="auto"?"auto":U.pstyle("corner-radius").pfValue,Q=M.tgtRs=U._private.rscratch,re=M.srcRs=B._private.rscratch;M.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var se=0;se<M.eles.length;se++){var pe=M.eles[se],Oe=pe[0]._private.rscratch,Ce=pe.pstyle("curve-style").value,Re=Ce==="unbundled-bezier"||kl(Ce,"segments")||kl(Ce,"taxi"),be=!B.same(pe.source());if(!M.calculatedIntersection&&B!==U&&(M.hasBezier||M.hasUnbundled)){M.calculatedIntersection=!0;var j=ge.intersectLine(Y.x,Y.y,J,le,H.x,H.y,0,de,re),G=M.srcIntn=j,$=ve.intersectLine(H.x,H.y,fe,ue,Y.x,Y.y,0,ie,Q),te=M.tgtIntn=$,ce=M.intersectionPts={x1:j[0],x2:$[0],y1:j[1],y2:$[1]},he=M.posPts={x1:Y.x,x2:H.x,y1:Y.y,y2:H.y},xe=$[1]-j[1],Ne=$[0]-j[0],We=Math.sqrt(Ne*Ne+xe*xe);at(We)&&We>=U$||(We=Math.sqrt(Math.max(Ne*Ne,kg)+Math.max(xe*xe,kg)));var ot=M.vector={x:Ne,y:xe},Ze=M.vectorNorm={x:ot.x/We,y:ot.y/We},et={x:-Ze.y,y:Ze.x};M.nodesOverlap=!at(We)||ve.checkPoint(j[0],j[1],0,fe,ue,H.x,H.y,ie,Q)||ge.checkPoint($[0],$[1],0,J,le,Y.x,Y.y,de,re),M.vectorNormInverse=et,N={nodesOverlap:M.nodesOverlap,dirCounts:M.dirCounts,calculatedIntersection:!0,hasBezier:M.hasBezier,hasUnbundled:M.hasUnbundled,eles:M.eles,srcPos:H,srcRs:Q,tgtPos:Y,tgtRs:re,srcW:fe,srcH:ue,tgtW:J,tgtH:le,srcIntn:te,tgtIntn:G,srcShape:ve,tgtShape:ge,posPts:{x1:he.x2,y1:he.y2,x2:he.x1,y2:he.y1},intersectionPts:{x1:ce.x2,y1:ce.y2,x2:ce.x1,y2:ce.y1},vector:{x:-ot.x,y:-ot.y},vectorNorm:{x:-Ze.x,y:-Ze.y},vectorNormInverse:{x:-et.x,y:-et.y}}}var Qe=be?N:M;Oe.nodesOverlap=Qe.nodesOverlap,Oe.srcIntn=Qe.srcIntn,Oe.tgtIntn=Qe.tgtIntn,Oe.isRound=Ce.startsWith("round"),i&&(B.isParent()||B.isChild()||U.isParent()||U.isChild())&&(B.parents().anySame(U)||U.parents().anySame(B)||B.same(U)&&B.isParent())?e.findCompoundLoopPoints(pe,Qe,se,Re):B===U?e.findLoopPoints(pe,Qe,se,Re):Ce.endsWith("segments")?e.findSegmentsPoints(pe,Qe):Ce.endsWith("taxi")?e.findTaxiPoints(pe,Qe):Ce==="straight"||!Re&&M.eles.length%2===1&&se===Math.floor(M.eles.length/2)?e.findStraightEdgePoints(pe):e.findBezierPoints(pe,Qe,se,Re,be),e.findEndpoints(pe),e.tryToCorrectInvalidPoints(pe,Qe),e.checkForInvalidEdgeWarning(pe),e.storeAllpts(pe),e.storeEdgeProjections(pe),e.calculateArrowAngles(pe),e.recalculateEdgeLabelProjections(pe),e.calculateLabelAngles(pe)}},w=0;w<s.length;w++)C();this.findHaystackPoints(u)}};function Ej(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],i=r[t+1];e.push({x:n,y:i})}return e}}Gi.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return Ej(e.segpts)};Gi.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return Ej(e.ctrlpts)};Gi.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Qg={};Qg.manualEndptToPx=function(r,e){var t=this,n=r.position(),i=r.outerWidth(),a=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*i),e.units[1]==="%"&&(s[1]=s[1]*a),s[0]+=n.x,s[1]+=n.y,s}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(i,a),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,i,a,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Qg.findEndpoints=function(r){var e,t,n,i,a=this,o,s=r.source()[0],u=r.target()[0],l=s.position(),c=u.position(),f=r.pstyle("target-arrow-shape").value,d=r.pstyle("source-arrow-shape").value,h=r.pstyle("target-distance-from-node").pfValue,v=r.pstyle("source-distance-from-node").pfValue,p=s._private.rscratch,g=u._private.rscratch,y=r.pstyle("curve-style").value,b=r._private.rscratch,m=b.edgeType,_=kl(y,"taxi"),x=m==="self"||m==="compound",C=m==="bezier"||m==="multibezier"||x,w=m!=="bezier",O=m==="straight"||m==="segments",A=m==="segments",k=C||w||O,R=x||_,I=r.pstyle("source-endpoint"),M=R?"outside-to-node":I.value,N=s.pstyle("corner-radius").value==="auto"?"auto":s.pstyle("corner-radius").pfValue,F=r.pstyle("target-endpoint"),z=R?"outside-to-node":F.value,B=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;b.srcManEndpt=I,b.tgtManEndpt=F;var U,W,Y,H,J=(e=(F==null||(t=F.pfValue)===null||t===void 0?void 0:t.length)===2?F.pfValue:null)!==null&&e!==void 0?e:[0,0],le=(n=(I==null||(i=I.pfValue)===null||i===void 0?void 0:i.length)===2?I.pfValue:null)!==null&&n!==void 0?n:[0,0];if(C){var fe=[b.ctrlpts[0],b.ctrlpts[1]],ue=w?[b.ctrlpts[b.ctrlpts.length-2],b.ctrlpts[b.ctrlpts.length-1]]:fe;U=ue,W=fe}else if(O){var ge=A?b.segpts.slice(0,2):[c.x+J[0],c.y+J[1]],ve=A?b.segpts.slice(b.segpts.length-2):[l.x+le[0],l.y+le[1]];U=ve,W=ge}if(z==="inside-to-node")o=[c.x,c.y];else if(F.units)o=this.manualEndptToPx(u,F);else if(z==="outside-to-line")o=b.tgtIntn;else if(z==="outside-to-node"||z==="outside-to-node-or-label"?Y=U:(z==="outside-to-line"||z==="outside-to-line-or-label")&&(Y=[l.x,l.y]),o=a.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),Y[0],Y[1],0,B,g),z==="outside-to-node-or-label"||z==="outside-to-line-or-label"){var de=u._private.rscratch,ie=de.labelWidth,Q=de.labelHeight,re=de.labelX,se=de.labelY,pe=ie/2,Oe=Q/2,Ce=u.pstyle("text-valign").value;Ce==="top"?se-=Oe:Ce==="bottom"&&(se+=Oe);var Re=u.pstyle("text-halign").value;Re==="left"?re-=pe:Re==="right"&&(re+=pe);var be=Cg(Y[0],Y[1],[re-pe,se-Oe,re+pe,se-Oe,re+pe,se+Oe,re-pe,se+Oe],c.x,c.y);if(be.length>0){var j=l,G=af(j,gh(o)),$=af(j,gh(be)),te=G;if($<G&&(o=be,te=$),be.length>2){var ce=af(j,{x:be[2],y:be[3]});ce<te&&(o=[be[2],be[3]])}}}var he=Lm(o,U,a.arrowShapes[f].spacing(r)+h),xe=Lm(o,U,a.arrowShapes[f].gap(r)+h);if(b.endX=xe[0],b.endY=xe[1],b.arrowEndX=he[0],b.arrowEndY=he[1],M==="inside-to-node")o=[l.x,l.y];else if(I.units)o=this.manualEndptToPx(s,I);else if(M==="outside-to-line")o=b.srcIntn;else if(M==="outside-to-node"||M==="outside-to-node-or-label"?H=W:(M==="outside-to-line"||M==="outside-to-line-or-label")&&(H=[c.x,c.y]),o=a.nodeShapes[this.getNodeShape(s)].intersectLine(l.x,l.y,s.outerWidth(),s.outerHeight(),H[0],H[1],0,N,p),M==="outside-to-node-or-label"||M==="outside-to-line-or-label"){var Ne=s._private.rscratch,We=Ne.labelWidth,ot=Ne.labelHeight,Ze=Ne.labelX,et=Ne.labelY,Qe=We/2,Ye=ot/2,Ie=s.pstyle("text-valign").value;Ie==="top"?et-=Ye:Ie==="bottom"&&(et+=Ye);var ee=s.pstyle("text-halign").value;ee==="left"?Ze-=Qe:ee==="right"&&(Ze+=Qe);var we=Cg(H[0],H[1],[Ze-Qe,et-Ye,Ze+Qe,et-Ye,Ze+Qe,et+Ye,Ze-Qe,et+Ye],l.x,l.y);if(we.length>0){var Pe=c,De=af(Pe,gh(o)),Me=af(Pe,gh(we)),it=De;if(Me<De&&(o=[we[0],we[1]],it=Me),we.length>2){var Fe=af(Pe,{x:we[2],y:we[3]});Fe<it&&(o=[we[2],we[3]])}}}var ut=Lm(o,W,a.arrowShapes[d].spacing(r)+v),rt=Lm(o,W,a.arrowShapes[d].gap(r)+v);b.startX=rt[0],b.startY=rt[1],b.arrowStartX=ut[0],b.arrowStartY=ut[1],k&&(!at(b.startX)||!at(b.startY)||!at(b.endX)||!at(b.endY)?b.badLine=!0:b.badLine=!1)};Qg.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Qg.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var yT={};function z$(r,e,t){for(var n=function(l,c,f,d){return fi(l,c,f,d)},i=e._private,a=i.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];a.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}yT.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var i=0;i+5<t.allpts.length;i+=4)z$(this,r,t.allpts.slice(i,i+6))}else if(n==="segments")for(var a=e.rstyle.linePts=[],i=0;i+1<t.allpts.length;i+=2)a.push({x:t.allpts[i],y:t.allpts[i+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};yT.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Bs={};Bs.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Wl(e)){var t,n,i=r._private,a=r.width(),o=r.height(),s=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=i.rscratch,d=i.rstyle;switch(l){case"left":t=u.x-a/2-s;break;case"right":t=u.x+a/2+s;break;default:t=u.x}switch(c){case"top":n=u.y-o/2-s;break;case"bottom":n=u.y+o/2+s;break;default:n=u.y}f.labelX=t,f.labelY=n,d.labelX=t,d.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Oj=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},Sj=function(e,t){var n=t.x-e.x,i=t.y-e.y;return Oj(n,i)},q$=function(e,t,n,i){var a=Sg(0,i-.001,1),o=Sg(0,i+.001,1),s=wh(e,t,n,a),u=wh(e,t,n,o);return Sj(s,u)};Bs.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,i=this,a={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(a.mid||a.source||a.target){e={x:n.midX,y:n.midY};var o=function(f,d,h){yu(t.rscratch,f,d,h),yu(t.rstyle,f,d,h)};o("labelX",null,e.x),o("labelY",null,e.y);var s=Oj(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var u=function(){if(u.cache)return u.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var h={x:n.allpts[d],y:n.allpts[d+1]},v={x:n.allpts[d+2],y:n.allpts[d+3]},p={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:h,p1:v,p2:p,startDist:0,length:0,segments:[]})}var g=t.rstyle.bezierPts,y=i.bezierProjPcts.length;function b(w,O,A,k,R){var I=wf(O,A),M=w.segments[w.segments.length-1],N={p0:O,p1:A,t0:k,t1:R,startDist:M?M.startDist+M.length:0,length:I};w.segments.push(N),w.length+=I}for(var m=0;m<f.length;m++){var _=f[m],x=f[m-1];x&&(_.startDist=x.startDist+x.length),b(_,_.p0,g[m*y],0,i.bezierProjPcts[0]);for(var C=0;C<y-1;C++)b(_,g[m*y+C],g[m*y+C+1],i.bezierProjPcts[C],i.bezierProjPcts[C+1]);b(_,g[m*y+y-1],_.p2,i.bezierProjPcts[y-1],1)}return u.cache=f},l=function(f){var d,h=f==="source";if(a[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var p=u(),g,y=0,b=0,m=0;m<p.length;m++){for(var _=p[h?m:p.length-1-m],x=0;x<_.segments.length;x++){var C=_.segments[h?x:_.segments.length-1-x],w=m===p.length-1&&x===_.segments.length-1;if(y=b,b+=C.length,b>=v||w){g={cp:_,segment:C};break}}if(g)break}var O=g.cp,A=g.segment,k=(v-y)/A.length,R=A.t1-A.t0,I=h?A.t0+R*k:A.t1-R*k;I=Sg(0,I,1),e=wh(O.p0,O.p1,O.p2,I),d=q$(O.p0,O.p1,O.p2,I);break}case"straight":case"segments":case"haystack":{for(var M=0,N,F,z,B,U=n.allpts.length,W=0;W+3<U&&(h?(z={x:n.allpts[W],y:n.allpts[W+1]},B={x:n.allpts[W+2],y:n.allpts[W+3]}):(z={x:n.allpts[U-2-W],y:n.allpts[U-1-W]},B={x:n.allpts[U-4-W],y:n.allpts[U-3-W]}),N=wf(z,B),F=M,M+=N,!(M>=v));W+=2);var Y=v-F,H=Y/N;H=Sg(0,H,1),e=c7(z,B,H),d=Sj(z,B);break}}o("labelX",f,e.x),o("labelY",f,e.y),o("labelAutoAngle",f,d)}};l("source"),l("target"),this.applyLabelDimensions(r)}};Bs.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Bs.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),i=_f(n,r._private.labelDimsKey);if(xa(t.rscratch,"prefixedLabelDimsKey",e)!==i){yu(t.rscratch,"prefixedLabelDimsKey",e,i);var a=this.calculateLabelDimensions(r,n),o=r.pstyle("line-height").pfValue,s=r.pstyle("text-wrap").strValue,u=xa(t.rscratch,"labelWrapCachedLines",e)||[],l=s!=="wrap"?1:Math.max(u.length,1),c=a.height/l,f=c*o,d=a.width,h=a.height+(l-1)*(o-1)*c;yu(t.rstyle,"labelWidth",e,d),yu(t.rscratch,"labelWidth",e,d),yu(t.rstyle,"labelHeight",e,h),yu(t.rscratch,"labelHeight",e,h),yu(t.rscratch,"labelLineHeight",e,f)}};Bs.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",i=r.pstyle(n+"label").strValue,a=r.pstyle("text-transform").value,o=function(le,fe){return fe?(yu(t.rscratch,le,e,fe),fe):xa(t.rscratch,le,e)};if(!i)return"";a=="none"||(a=="uppercase"?i=i.toUpperCase():a=="lowercase"&&(i=i.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var u=o("labelKey");if(u!=null&&o("labelWrapKey")===u)return o("labelWrapCachedText");for(var l="​",c=i.split(`
`),f=r.pstyle("text-max-width").pfValue,d=r.pstyle("text-overflow-wrap").value,h=d==="anywhere",v=[],p=/[\s\u200b]+|$/g,g=0;g<c.length;g++){var y=c[g],b=this.calculateLabelDimensions(r,y),m=b.width;if(h){var _=y.split("").join(l);y=_}if(m>f){var x=y.matchAll(p),C="",w=0,O=Sa(x),A;try{for(O.s();!(A=O.n()).done;){var k=A.value,R=k[0],I=y.substring(w,k.index);w=k.index+R.length;var M=C.length===0?I:C+I+R,N=this.calculateLabelDimensions(r,M),F=N.width;F<=f?C+=I+R:(C&&v.push(C),C=I+R)}}catch(J){O.e(J)}finally{O.f()}C.match(/^[\s\u200b]+$/)||v.push(C)}else v.push(y)}o("labelWrapCachedLines",v),i=o("labelWrapCachedText",v.join(`
`)),o("labelWrapKey",u)}else if(s==="ellipsis"){var z=r.pstyle("text-max-width").pfValue,B="",U="…",W=!1;if(this.calculateLabelDimensions(r,i).width<z)return i;for(var Y=0;Y<i.length;Y++){var H=this.calculateLabelDimensions(r,B+i[Y]+U).width;if(H>z)break;B+=i[Y],Y===i.length-1&&(W=!0)}return W||(B+=U),B}return i};Bs.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Bs.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),i=n.document,a=0,o=r.pstyle("font-style").strValue,s=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=i.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var d=c.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(o," ").concat(l," ").concat(s,"px ").concat(u);for(var h=0,v=0,p=e.split(`
`),g=0;g<p.length;g++){var y=p[g],b=f.measureText(y),m=Math.ceil(b.width),_=s;h=Math.max(m,h),v+=_}return h+=a,v+=a,{width:h,height:v}};Bs.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,i=r.isEdge(),a=e?e+"-":"",o=r.pstyle(a+"text-rotation"),s=o.strValue;return s==="none"?0:i&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Bs.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,i=n.rscratch;i.labelAngle=e.calculateLabelAngle(r),t&&(i.sourceLabelAngle=e.calculateLabelAngle(r,"source"),i.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var Cj={},_k=28,wk=!1;Cj.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<_k||r.height()<_k))return wk||(Gr("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),wk=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var F0={};F0.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var u=0;u<o.length;u++){var l=o[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var i=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(s)for(var f=0;f<s.length;f++){var d=s[f];d(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){i(!0)},t.beforeRender(i,t.beforeRenderPriorities.eleCalcs)};F0.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};F0.recalculateRenderedStyle=function(r,e){var t=function(_){return _._private.rstyle.cleanConnected};if(r.length!==0){var n=[],i=[];if(!this.destroyed){e===void 0&&(e=!0);for(var a=0;a<r.length;a++){var o=r[a],s=o._private,u=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(u.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(m){return!m._private.rstyle.clean&&m.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?i.push(o):n.push(o),u.clean=!0)}for(var l=0;l<i.length;l++){var c=i[l],f=c._private,d=f.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var p=n[v],g=p._private,y=g.rstyle,b=g.rscratch;y.srcX=b.arrowStartX,y.srcY=b.arrowStartY,y.tgtX=b.arrowEndX,y.tgtY=b.arrowEndY,y.midX=b.midX,y.midY=b.midY,y.labelAngle=b.labelAngle,y.sourceLabelAngle=b.sourceLabelAngle,y.targetLabelAngle=b.targetLabelAngle}}}};var B0={};B0.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],i=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):i.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};B0.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};B0.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(sj),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Tj={};[Df,Qb,Gi,Qg,yT,Bs,Cj,F0,B0].forEach(function(r){jt(Tj,r)});var Aj={};Aj.getCachedImage=function(r,e,t){var n=this,i=n.imageCache=n.imageCache||{},a=i[r];if(a)return a.image.complete||a.image.addEventListener("load",t),a.image;a=i[r]=i[r]||{};var o=a.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",u=r.substring(0,s.length).toLowerCase()===s;return u||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var Wh={};Wh.registerBinding=function(r,e,t,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var a=[],o=0;o<r.length;o++){var s=r[o];if(s!==void 0){var u=this.binder(s);a.push(u.on.apply(u,i))}}return a}var u=this.binder(r);return u.on.apply(u,i)};Wh.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||e9(r);if(e.supportsPassiveEvents==null){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});t.addEventListener("test",null,a)}catch{}e.supportsPassiveEvents=i}var o=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Wh.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Wh.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Wh.load=function(){var r=this,e=r.cy.window(),t=function(ee){return ee.selected()},n=function(ee){var we=ee.getRootNode();if(we&&we.nodeType===11&&we.host!==void 0)return we},i=function(ee,we,Pe,De){ee==null&&(ee=r.cy);for(var Me=0;Me<we.length;Me++){var it=we[Me];ee.emit({originalEvent:Pe,type:it,position:De})}},a=function(ee){return ee.shiftKey||ee.metaKey||ee.ctrlKey},o=function(ee,we){var Pe=!0;if(r.cy.hasCompoundNodes()&&ee&&ee.pannable())for(var De=0;we&&De<we.length;De++){var ee=we[De];if(ee.isNode()&&ee.isParent()&&!ee.pannable()){Pe=!1;break}}else Pe=!0;return Pe},s=function(ee){ee[0]._private.grabbed=!0},u=function(ee){ee[0]._private.grabbed=!1},l=function(ee){ee[0]._private.rscratch.inDragLayer=!0},c=function(ee){ee[0]._private.rscratch.inDragLayer=!1},f=function(ee){ee[0]._private.rscratch.isGrabTarget=!0},d=function(ee){ee[0]._private.rscratch.isGrabTarget=!1},h=function(ee,we){var Pe=we.addToList,De=Pe.has(ee);!De&&ee.grabbable()&&!ee.locked()&&(Pe.merge(ee),s(ee))},v=function(ee,we){if(ee.cy().hasCompoundNodes()&&!(we.inDragLayer==null&&we.addToList==null)){var Pe=ee.descendants();we.inDragLayer&&(Pe.forEach(l),Pe.connectedEdges().forEach(l)),we.addToList&&h(Pe,we)}},p=function(ee,we){we=we||{};var Pe=ee.cy().hasCompoundNodes();we.inDragLayer&&(ee.forEach(l),ee.neighborhood().stdFilter(function(De){return!Pe||De.isEdge()}).forEach(l)),we.addToList&&ee.forEach(function(De){h(De,we)}),v(ee,we),b(ee,{inDragLayer:we.inDragLayer}),r.updateCachedGrabbedEles()},g=p,y=function(ee){ee&&(r.getCachedZSortedEles().forEach(function(we){u(we),c(we),d(we)}),r.updateCachedGrabbedEles())},b=function(ee,we){if(!(we.inDragLayer==null&&we.addToList==null)&&ee.cy().hasCompoundNodes()){var Pe=ee.ancestors().orphans();if(!Pe.same(ee)){var De=Pe.descendants().spawnSelf().merge(Pe).unmerge(ee).unmerge(ee.descendants()),Me=De.connectedEdges();we.inDragLayer&&(Me.forEach(l),De.forEach(l)),we.addToList&&De.forEach(function(it){h(it,we)})}}},m=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},_=typeof MutationObserver<"u",x=typeof ResizeObserver<"u";_?(r.removeObserver=new MutationObserver(function(Ie){for(var ee=0;ee<Ie.length;ee++){var we=Ie[ee],Pe=we.removedNodes;if(Pe)for(var De=0;De<Pe.length;De++){var Me=Pe[De];if(Me===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(Ie){r.destroy()});var C=Yg(function(){r.cy.resize()},100);_&&(r.styleObserver=new MutationObserver(C),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",C),x&&(r.resizeObserver=new ResizeObserver(C),r.resizeObserver.observe(r.container));var w=function(ee,we){for(;ee!=null;)we(ee),ee=ee.parentNode},O=function(){r.invalidateContainerClientCoordsCache()};w(r.container,function(Ie){r.registerBinding(Ie,"transitionend",O),r.registerBinding(Ie,"animationend",O),r.registerBinding(Ie,"scroll",O)}),r.registerBinding(r.container,"contextmenu",function(Ie){Ie.preventDefault()});var A=function(){return r.selection[4]!==0},k=function(ee){for(var we=r.findContainerClientCoords(),Pe=we[0],De=we[1],Me=we[2],it=we[3],Fe=ee.touches?ee.touches:[ee],ut=!1,rt=0;rt<Fe.length;rt++){var ft=Fe[rt];if(Pe<=ft.clientX&&ft.clientX<=Pe+Me&&De<=ft.clientY&&ft.clientY<=De+it){ut=!0;break}}if(!ut)return!1;for(var Ot=r.container,yt=ee.target,nt=yt.parentNode,kt=!1;nt;){if(nt===Ot){kt=!0;break}nt=nt.parentNode}return!!kt};r.registerBinding(r.container,"mousedown",function(ee){if(k(ee)&&!(r.hoverData.which===1&&ee.which!==1)){ee.preventDefault(),m(),r.hoverData.capture=!0,r.hoverData.which=ee.which;var we=r.cy,Pe=[ee.clientX,ee.clientY],De=r.projectIntoViewport(Pe[0],Pe[1]),Me=r.selection,it=r.findNearestElements(De[0],De[1],!0,!1),Fe=it[0],ut=r.dragData.possibleDragElements;r.hoverData.mdownPos=De,r.hoverData.mdownGPos=Pe;var rt=function(St){return{originalEvent:ee,type:St,position:{x:De[0],y:De[1]}}},ft=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var St=r.hoverData.down;St?St.emit(rt("taphold")):we.emit(rt("taphold"))}},r.tapholdDuration)};if(ee.which==3){r.hoverData.cxtStarted=!0;var Ot={originalEvent:ee,type:"cxttapstart",position:{x:De[0],y:De[1]}};Fe?(Fe.activate(),Fe.emit(Ot),r.hoverData.down=Fe):we.emit(Ot),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(ee.which==1){Fe&&Fe.activate();{if(Fe!=null&&r.nodeIsGrabbable(Fe)){var yt=function(St){St.emit(rt("grab"))};if(f(Fe),!Fe.selected())ut=r.dragData.possibleDragElements=we.collection(),g(Fe,{addToList:ut}),Fe.emit(rt("grabon")).emit(rt("grab"));else{ut=r.dragData.possibleDragElements=we.collection();var nt=we.$(function(kt){return kt.isNode()&&kt.selected()&&r.nodeIsGrabbable(kt)});p(nt,{addToList:ut}),Fe.emit(rt("grabon")),nt.forEach(yt)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=Fe,r.hoverData.downs=it,r.hoverData.downTime=new Date().getTime()}i(Fe,["mousedown","tapstart","vmousedown"],ee,{x:De[0],y:De[1]}),Fe==null?(Me[4]=1,r.data.bgActivePosistion={x:De[0],y:De[1]},r.redrawHint("select",!0),r.redraw()):Fe.pannable()&&(Me[4]=1),ft()}Me[0]=Me[2]=De[0],Me[1]=Me[3]=De[1]}},!1);var R=n(r.container);r.registerBinding([e,R],"mousemove",function(ee){var we=r.hoverData.capture;if(!(!we&&!k(ee))){var Pe=!1,De=r.cy,Me=De.zoom(),it=[ee.clientX,ee.clientY],Fe=r.projectIntoViewport(it[0],it[1]),ut=r.hoverData.mdownPos,rt=r.hoverData.mdownGPos,ft=r.selection,Ot=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Ot=r.findNearestElement(Fe[0],Fe[1],!0,!1));var yt=r.hoverData.last,nt=r.hoverData.down,kt=[Fe[0]-ft[2],Fe[1]-ft[3]],St=r.dragData.possibleDragElements,lr;if(rt){var ar=it[0]-rt[0],Gt=ar*ar,At=it[1]-rt[1],hr=At*At,or=Gt+hr;r.hoverData.isOverThresholdDrag=lr=or>=r.desktopTapThreshold2}var Fr=a(ee);lr&&(r.hoverData.tapholdCancelled=!0);var nn=function(){var qn=r.hoverData.dragDelta=r.hoverData.dragDelta||[];qn.length===0?(qn.push(kt[0]),qn.push(kt[1])):(qn[0]+=kt[0],qn[1]+=kt[1])};Pe=!0,i(Ot,["mousemove","vmousemove","tapdrag"],ee,{x:Fe[0],y:Fe[1]});var Dt=function(qn){return{originalEvent:ee,type:qn,position:{x:Fe[0],y:Fe[1]}}},yr=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||De.emit(Dt("boxstart")),ft[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(lr){var Wr=Dt("cxtdrag");nt?nt.emit(Wr):De.emit(Wr),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Ot!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(Dt("cxtdragout")),r.hoverData.cxtOver=Ot,Ot&&Ot.emit(Dt("cxtdragover")))}}else if(r.hoverData.dragging){if(Pe=!0,De.panningEnabled()&&De.userPanningEnabled()){var Qr;if(r.hoverData.justStartedPan){var Cn=r.hoverData.mdownPos;Qr={x:(Fe[0]-Cn[0])*Me,y:(Fe[1]-Cn[1])*Me},r.hoverData.justStartedPan=!1}else Qr={x:kt[0]*Me,y:kt[1]*Me};De.panBy(Qr),De.emit(Dt("dragpan")),r.hoverData.dragged=!0}Fe=r.projectIntoViewport(ee.clientX,ee.clientY)}else if(ft[4]==1&&(nt==null||nt.pannable())){if(lr){if(!r.hoverData.dragging&&De.boxSelectionEnabled()&&(Fr||!De.panningEnabled()||!De.userPanningEnabled()))yr();else if(!r.hoverData.selecting&&De.panningEnabled()&&De.userPanningEnabled()){var bn=o(nt,r.hoverData.downs);bn&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,ft[4]=0,r.data.bgActivePosistion=gh(ut),r.redrawHint("select",!0),r.redraw())}nt&&nt.pannable()&&nt.active()&&nt.unactivate()}}else{if(nt&&nt.pannable()&&nt.active()&&nt.unactivate(),(!nt||!nt.grabbed())&&Ot!=yt&&(yt&&i(yt,["mouseout","tapdragout"],ee,{x:Fe[0],y:Fe[1]}),Ot&&i(Ot,["mouseover","tapdragover"],ee,{x:Fe[0],y:Fe[1]}),r.hoverData.last=Ot),nt)if(lr){if(De.boxSelectionEnabled()&&Fr)nt&&nt.grabbed()&&(y(St),nt.emit(Dt("freeon")),St.emit(Dt("free")),r.dragData.didDrag&&(nt.emit(Dt("dragfreeon")),St.emit(Dt("dragfree")))),yr();else if(nt&&nt.grabbed()&&r.nodeIsDraggable(nt)){var Or=!r.dragData.didDrag;Or&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||p(St,{inDragLayer:!0});var Rr={x:0,y:0};if(at(kt[0])&&at(kt[1])&&(Rr.x+=kt[0],Rr.y+=kt[1],Or)){var xr=r.hoverData.dragDelta;xr&&at(xr[0])&&at(xr[1])&&(Rr.x+=xr[0],Rr.y+=xr[1])}r.hoverData.draggingEles=!0,St.silentShift(Rr).emit(Dt("position")).emit(Dt("drag")),r.redrawHint("drag",!0),r.redraw()}}else nn();Pe=!0}if(ft[2]=Fe[0],ft[3]=Fe[1],Pe)return ee.stopPropagation&&ee.stopPropagation(),ee.preventDefault&&ee.preventDefault(),!1}},!1);var I,M,N;r.registerBinding(e,"mouseup",function(ee){if(!(r.hoverData.which===1&&ee.which!==1&&r.hoverData.capture)){var we=r.hoverData.capture;if(we){r.hoverData.capture=!1;var Pe=r.cy,De=r.projectIntoViewport(ee.clientX,ee.clientY),Me=r.selection,it=r.findNearestElement(De[0],De[1],!0,!1),Fe=r.dragData.possibleDragElements,ut=r.hoverData.down,rt=a(ee);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,ut&&ut.unactivate();var ft=function(ar){return{originalEvent:ee,type:ar,position:{x:De[0],y:De[1]}}};if(r.hoverData.which===3){var Ot=ft("cxttapend");if(ut?ut.emit(Ot):Pe.emit(Ot),!r.hoverData.cxtDragged){var yt=ft("cxttap");ut?ut.emit(yt):Pe.emit(yt)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(i(it,["mouseup","tapend","vmouseup"],ee,{x:De[0],y:De[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(i(ut,["click","tap","vclick"],ee,{x:De[0],y:De[1]}),M=!1,ee.timeStamp-N<=Pe.multiClickDebounceTime()?(I&&clearTimeout(I),M=!0,N=null,i(ut,["dblclick","dbltap","vdblclick"],ee,{x:De[0],y:De[1]})):(I=setTimeout(function(){M||i(ut,["oneclick","onetap","voneclick"],ee,{x:De[0],y:De[1]})},Pe.multiClickDebounceTime()),N=ee.timeStamp)),ut==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(ee)&&(Pe.$(t).unselect(["tapunselect"]),Fe.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=Fe=Pe.collection()),it==ut&&!r.dragData.didDrag&&!r.hoverData.selecting&&it!=null&&it._private.selectable&&(r.hoverData.dragging||(Pe.selectionType()==="additive"||rt?it.selected()?it.unselect(["tapunselect"]):it.select(["tapselect"]):rt||(Pe.$(t).unmerge(it).unselect(["tapunselect"]),it.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var nt=Pe.collection(r.getAllInBox(Me[0],Me[1],Me[2],Me[3]));r.redrawHint("select",!0),nt.length>0&&r.redrawHint("eles",!0),Pe.emit(ft("boxend"));var kt=function(ar){return ar.selectable()&&!ar.selected()};Pe.selectionType()==="additive"||rt||Pe.$(t).unmerge(nt).unselect(),nt.emit(ft("box")).stdFilter(kt).select().emit(ft("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!Me[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var St=ut&&ut.grabbed();y(Fe),St&&(ut.emit(ft("freeon")),Fe.emit(ft("free")),r.dragData.didDrag&&(ut.emit(ft("dragfreeon")),Fe.emit(ft("dragfree"))))}}Me[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var F=[],z=4,B,U=1e5,W=function(ee,we){for(var Pe=0;Pe<ee.length;Pe++)if(ee[Pe]%we!==0)return!1;return!0},Y=function(ee){for(var we=Math.abs(ee[0]),Pe=1;Pe<ee.length;Pe++)if(Math.abs(ee[Pe])!==we)return!1;return!0},H=function(ee){var we=!1,Pe=ee.deltaY;if(Pe==null&&(ee.wheelDeltaY!=null?Pe=ee.wheelDeltaY/4:ee.wheelDelta!=null&&(Pe=ee.wheelDelta/4)),Pe!==0){if(B==null)if(F.length>=z){var De=F;if(B=W(De,5),!B){var Me=Math.abs(De[0]);B=Y(De)&&Me>5}if(B)for(var it=0;it<De.length;it++)U=Math.min(Math.abs(De[it]),U)}else F.push(Pe),we=!0;else B&&(U=Math.min(Math.abs(Pe),U));if(!r.scrollingPage){var Fe=r.cy,ut=Fe.zoom(),rt=Fe.pan(),ft=r.projectIntoViewport(ee.clientX,ee.clientY),Ot=[ft[0]*ut+rt.x,ft[1]*ut+rt.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||A()){ee.preventDefault();return}if(Fe.panningEnabled()&&Fe.userPanningEnabled()&&Fe.zoomingEnabled()&&Fe.userZoomingEnabled()){ee.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var yt;we&&Math.abs(Pe)>5&&(Pe=nT(Pe)*5),yt=Pe/-250,B&&(yt/=U,yt*=3),yt=yt*r.wheelSensitivity;var nt=ee.deltaMode===1;nt&&(yt*=33);var kt=Fe.zoom()*Math.pow(10,yt);ee.type==="gesturechange"&&(kt=r.gestureStartZoom*ee.scale),Fe.zoom({level:kt,renderedPosition:{x:Ot[0],y:Ot[1]}}),Fe.emit({type:ee.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:ee,position:{x:ft[0],y:ft[1]}})}}}};r.registerBinding(r.container,"wheel",H,!0),r.registerBinding(e,"scroll",function(ee){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(ee){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||ee.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(Ie){r.hasTouchStarted||H(Ie)},!0),r.registerBinding(r.container,"mouseout",function(ee){var we=r.projectIntoViewport(ee.clientX,ee.clientY);r.cy.emit({originalEvent:ee,type:"mouseout",position:{x:we[0],y:we[1]}})},!1),r.registerBinding(r.container,"mouseover",function(ee){var we=r.projectIntoViewport(ee.clientX,ee.clientY);r.cy.emit({originalEvent:ee,type:"mouseover",position:{x:we[0],y:we[1]}})},!1);var J,le,fe,ue,ge,ve,de,ie,Q,re,se,pe,Oe,Ce=function(ee,we,Pe,De){return Math.sqrt((Pe-ee)*(Pe-ee)+(De-we)*(De-we))},Re=function(ee,we,Pe,De){return(Pe-ee)*(Pe-ee)+(De-we)*(De-we)},be;r.registerBinding(r.container,"touchstart",be=function(ee){if(r.hasTouchStarted=!0,!!k(ee)){m(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var we=r.cy,Pe=r.touchData.now,De=r.touchData.earlier;if(ee.touches[0]){var Me=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Pe[0]=Me[0],Pe[1]=Me[1]}if(ee.touches[1]){var Me=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Pe[2]=Me[0],Pe[3]=Me[1]}if(ee.touches[2]){var Me=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Pe[4]=Me[0],Pe[5]=Me[1]}var it=function(Fr){return{originalEvent:ee,type:Fr,position:{x:Pe[0],y:Pe[1]}}};if(ee.touches[1]){r.touchData.singleTouchMoved=!0,y(r.dragData.touchDragEles);var Fe=r.findContainerClientCoords();Q=Fe[0],re=Fe[1],se=Fe[2],pe=Fe[3],J=ee.touches[0].clientX-Q,le=ee.touches[0].clientY-re,fe=ee.touches[1].clientX-Q,ue=ee.touches[1].clientY-re,Oe=0<=J&&J<=se&&0<=fe&&fe<=se&&0<=le&&le<=pe&&0<=ue&&ue<=pe;var ut=we.pan(),rt=we.zoom();ge=Ce(J,le,fe,ue),ve=Re(J,le,fe,ue),de=[(J+fe)/2,(le+ue)/2],ie=[(de[0]-ut.x)/rt,(de[1]-ut.y)/rt];var ft=200,Ot=ft*ft;if(ve<Ot&&!ee.touches[2]){var yt=r.findNearestElement(Pe[0],Pe[1],!0,!0),nt=r.findNearestElement(Pe[2],Pe[3],!0,!0);yt&&yt.isNode()?(yt.activate().emit(it("cxttapstart")),r.touchData.start=yt):nt&&nt.isNode()?(nt.activate().emit(it("cxttapstart")),r.touchData.start=nt):we.emit(it("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(ee.touches[2])we.boxSelectionEnabled()&&ee.preventDefault();else if(!ee.touches[1]){if(ee.touches[0]){var kt=r.findNearestElements(Pe[0],Pe[1],!0,!0),St=kt[0];if(St!=null&&(St.activate(),r.touchData.start=St,r.touchData.starts=kt,r.nodeIsGrabbable(St))){var lr=r.dragData.touchDragEles=we.collection(),ar=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),St.selected()?(ar=we.$(function(or){return or.selected()&&r.nodeIsGrabbable(or)}),p(ar,{addToList:lr})):g(St,{addToList:lr}),f(St),St.emit(it("grabon")),ar?ar.forEach(function(or){or.emit(it("grab"))}):St.emit(it("grab"))}i(St,["touchstart","tapstart","vmousedown"],ee,{x:Pe[0],y:Pe[1]}),St==null&&(r.data.bgActivePosistion={x:Me[0],y:Me[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&i(r.touchData.start,["taphold"],ee,{x:Pe[0],y:Pe[1]})},r.tapholdDuration)}}if(ee.touches.length>=1){for(var Gt=r.touchData.startPosition=[null,null,null,null,null,null],At=0;At<Pe.length;At++)Gt[At]=De[At]=Pe[At];var hr=ee.touches[0];r.touchData.startGPosition=[hr.clientX,hr.clientY]}}},!1);var j;r.registerBinding(e,"touchmove",j=function(ee){var we=r.touchData.capture;if(!(!we&&!k(ee))){var Pe=r.selection,De=r.cy,Me=r.touchData.now,it=r.touchData.earlier,Fe=De.zoom();if(ee.touches[0]){var ut=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Me[0]=ut[0],Me[1]=ut[1]}if(ee.touches[1]){var ut=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Me[2]=ut[0],Me[3]=ut[1]}if(ee.touches[2]){var ut=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Me[4]=ut[0],Me[5]=ut[1]}var rt=function(Mn){return{originalEvent:ee,type:Mn,position:{x:Me[0],y:Me[1]}}},ft=r.touchData.startGPosition,Ot;if(we&&ee.touches[0]&&ft){for(var yt=[],nt=0;nt<Me.length;nt++)yt[nt]=Me[nt]-it[nt];var kt=ee.touches[0].clientX-ft[0],St=kt*kt,lr=ee.touches[0].clientY-ft[1],ar=lr*lr,Gt=St+ar;Ot=Gt>=r.touchTapThreshold2}if(we&&r.touchData.cxt){ee.preventDefault();var At=ee.touches[0].clientX-Q,hr=ee.touches[0].clientY-re,or=ee.touches[1].clientX-Q,Fr=ee.touches[1].clientY-re,nn=Re(At,hr,or,Fr),Dt=nn/ve,yr=150,Wr=yr*yr,Qr=1.5,Cn=Qr*Qr;if(Dt>=Cn||nn>=Wr){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var bn=rt("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(bn),r.touchData.start=null):De.emit(bn)}}if(we&&r.touchData.cxt){var bn=rt("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(bn):De.emit(bn),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Or=r.findNearestElement(Me[0],Me[1],!0,!0);(!r.touchData.cxtOver||Or!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit(rt("cxtdragout")),r.touchData.cxtOver=Or,Or&&Or.emit(rt("cxtdragover")))}else if(we&&ee.touches[2]&&De.boxSelectionEnabled())ee.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||De.emit(rt("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,Pe[4]=1,!Pe||Pe.length===0||Pe[0]===void 0?(Pe[0]=(Me[0]+Me[2]+Me[4])/3,Pe[1]=(Me[1]+Me[3]+Me[5])/3,Pe[2]=(Me[0]+Me[2]+Me[4])/3+1,Pe[3]=(Me[1]+Me[3]+Me[5])/3+1):(Pe[2]=(Me[0]+Me[2]+Me[4])/3,Pe[3]=(Me[1]+Me[3]+Me[5])/3),r.redrawHint("select",!0),r.redraw();else if(we&&ee.touches[1]&&!r.touchData.didSelect&&De.zoomingEnabled()&&De.panningEnabled()&&De.userZoomingEnabled()&&De.userPanningEnabled()){ee.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Rr=r.dragData.touchDragEles;if(Rr){r.redrawHint("drag",!0);for(var xr=0;xr<Rr.length;xr++){var Ii=Rr[xr]._private;Ii.grabbed=!1,Ii.rscratch.inDragLayer=!1}}var qn=r.touchData.start,At=ee.touches[0].clientX-Q,hr=ee.touches[0].clientY-re,or=ee.touches[1].clientX-Q,Fr=ee.touches[1].clientY-re,Qo=Ce(At,hr,or,Fr),Vs=Qo/ge;if(Oe){var Xa=At-J,So=hr-le,Ka=or-fe,$s=Fr-ue,Ws=(Xa+Ka)/2,Hs=(So+$s)/2,ua=De.zoom(),mr=ua*Vs,cr=De.pan(),Jo=ie[0]*ua+cr.x,es=ie[1]*ua+cr.y,uc={x:-mr/ua*(Jo-cr.x-Ws)+Jo,y:-mr/ua*(es-cr.y-Hs)+es};if(qn&&qn.active()){var Rr=r.dragData.touchDragEles;y(Rr),r.redrawHint("drag",!0),r.redrawHint("eles",!0),qn.unactivate().emit(rt("freeon")),Rr.emit(rt("free")),r.dragData.didDrag&&(qn.emit(rt("dragfreeon")),Rr.emit(rt("dragfree")))}De.viewport({zoom:mr,pan:uc,cancelOnFailedZoom:!0}),De.emit(rt("pinchzoom")),ge=Qo,J=At,le=hr,fe=or,ue=Fr,r.pinching=!0}if(ee.touches[0]){var ut=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Me[0]=ut[0],Me[1]=ut[1]}if(ee.touches[1]){var ut=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Me[2]=ut[0],Me[3]=ut[1]}if(ee.touches[2]){var ut=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Me[4]=ut[0],Me[5]=ut[1]}}else if(ee.touches[0]&&!r.touchData.didSelect){var ri=r.touchData.start,ts=r.touchData.last,Or;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Or=r.findNearestElement(Me[0],Me[1],!0,!0)),we&&ri!=null&&ee.preventDefault(),we&&ri!=null&&r.nodeIsDraggable(ri))if(Ot){var Rr=r.dragData.touchDragEles,an=!r.dragData.didDrag;an&&p(Rr,{inDragLayer:!0}),r.dragData.didDrag=!0;var Pa={x:0,y:0};if(at(yt[0])&&at(yt[1])&&(Pa.x+=yt[0],Pa.y+=yt[1],an)){r.redrawHint("eles",!0);var _n=r.touchData.dragDelta;_n&&at(_n[0])&&at(_n[1])&&(Pa.x+=_n[0],Pa.y+=_n[1])}r.hoverData.draggingEles=!0,Rr.silentShift(Pa).emit(rt("position")).emit(rt("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==it[0]&&r.touchData.startPosition[1]==it[1]&&r.redrawHint("eles",!0),r.redraw()}else{var _n=r.touchData.dragDelta=r.touchData.dragDelta||[];_n.length===0?(_n.push(yt[0]),_n.push(yt[1])):(_n[0]+=yt[0],_n[1]+=yt[1])}if(i(ri||Or,["touchmove","tapdrag","vmousemove"],ee,{x:Me[0],y:Me[1]}),(!ri||!ri.grabbed())&&Or!=ts&&(ts&&ts.emit(rt("tapdragout")),Or&&Or.emit(rt("tapdragover"))),r.touchData.last=Or,we)for(var xr=0;xr<Me.length;xr++)Me[xr]&&r.touchData.startPosition[xr]&&Ot&&(r.touchData.singleTouchMoved=!0);if(we&&(ri==null||ri.pannable())&&De.panningEnabled()&&De.userPanningEnabled()){var Nu=o(ri,r.touchData.starts);Nu&&(ee.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=gh(r.touchData.startPosition)),r.swipePanning?(De.panBy({x:yt[0]*Fe,y:yt[1]*Fe}),De.emit(rt("dragpan"))):Ot&&(r.swipePanning=!0,De.panBy({x:kt*Fe,y:lr*Fe}),De.emit(rt("dragpan")),ri&&(ri.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var ut=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Me[0]=ut[0],Me[1]=ut[1]}}for(var nt=0;nt<Me.length;nt++)it[nt]=Me[nt];we&&ee.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var G;r.registerBinding(e,"touchcancel",G=function(ee){var we=r.touchData.start;r.touchData.capture=!1,we&&we.unactivate()});var $,te,ce,he;if(r.registerBinding(e,"touchend",$=function(ee){var we=r.touchData.start,Pe=r.touchData.capture;if(Pe)ee.touches.length===0&&(r.touchData.capture=!1),ee.preventDefault();else return;var De=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var Me=r.cy,it=Me.zoom(),Fe=r.touchData.now,ut=r.touchData.earlier;if(ee.touches[0]){var rt=r.projectIntoViewport(ee.touches[0].clientX,ee.touches[0].clientY);Fe[0]=rt[0],Fe[1]=rt[1]}if(ee.touches[1]){var rt=r.projectIntoViewport(ee.touches[1].clientX,ee.touches[1].clientY);Fe[2]=rt[0],Fe[3]=rt[1]}if(ee.touches[2]){var rt=r.projectIntoViewport(ee.touches[2].clientX,ee.touches[2].clientY);Fe[4]=rt[0],Fe[5]=rt[1]}var ft=function(Wr){return{originalEvent:ee,type:Wr,position:{x:Fe[0],y:Fe[1]}}};we&&we.unactivate();var Ot;if(r.touchData.cxt){if(Ot=ft("cxttapend"),we?we.emit(Ot):Me.emit(Ot),!r.touchData.cxtDragged){var yt=ft("cxttap");we?we.emit(yt):Me.emit(yt)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!ee.touches[2]&&Me.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var nt=Me.collection(r.getAllInBox(De[0],De[1],De[2],De[3]));De[0]=void 0,De[1]=void 0,De[2]=void 0,De[3]=void 0,De[4]=0,r.redrawHint("select",!0),Me.emit(ft("boxend"));var kt=function(Wr){return Wr.selectable()&&!Wr.selected()};nt.emit(ft("box")).stdFilter(kt).select().emit(ft("boxselect")),nt.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(we!=null&&we.unactivate(),ee.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!ee.touches[1]){if(!ee.touches[0]){if(!ee.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var St=r.dragData.touchDragEles;if(we!=null){var lr=we._private.grabbed;y(St),r.redrawHint("drag",!0),r.redrawHint("eles",!0),lr&&(we.emit(ft("freeon")),St.emit(ft("free")),r.dragData.didDrag&&(we.emit(ft("dragfreeon")),St.emit(ft("dragfree")))),i(we,["touchend","tapend","vmouseup","tapdragout"],ee,{x:Fe[0],y:Fe[1]}),we.unactivate(),r.touchData.start=null}else{var ar=r.findNearestElement(Fe[0],Fe[1],!0,!0);i(ar,["touchend","tapend","vmouseup","tapdragout"],ee,{x:Fe[0],y:Fe[1]})}var Gt=r.touchData.startPosition[0]-Fe[0],At=Gt*Gt,hr=r.touchData.startPosition[1]-Fe[1],or=hr*hr,Fr=At+or,nn=Fr*it*it;r.touchData.singleTouchMoved||(we||Me.$(":selected").unselect(["tapunselect"]),i(we,["tap","vclick"],ee,{x:Fe[0],y:Fe[1]}),te=!1,ee.timeStamp-he<=Me.multiClickDebounceTime()?(ce&&clearTimeout(ce),te=!0,he=null,i(we,["dbltap","vdblclick"],ee,{x:Fe[0],y:Fe[1]})):(ce=setTimeout(function(){te||i(we,["onetap","voneclick"],ee,{x:Fe[0],y:Fe[1]})},Me.multiClickDebounceTime()),he=ee.timeStamp)),we!=null&&!r.dragData.didDrag&&we._private.selectable&&nn<r.touchTapThreshold2&&!r.pinching&&(Me.selectionType()==="single"?(Me.$(t).unmerge(we).unselect(["tapunselect"]),we.select(["tapselect"])):we.selected()?we.unselect(["tapunselect"]):we.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Dt=0;Dt<Fe.length;Dt++)ut[Dt]=Fe[Dt];r.dragData.didDrag=!1,ee.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),ee.touches.length<2&&(ee.touches.length===1&&(r.touchData.startGPosition=[ee.touches[0].clientX,ee.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var xe=[],Ne=function(ee){return{clientX:ee.clientX,clientY:ee.clientY,force:1,identifier:ee.pointerId,pageX:ee.pageX,pageY:ee.pageY,radiusX:ee.width/2,radiusY:ee.height/2,screenX:ee.screenX,screenY:ee.screenY,target:ee.target}},We=function(ee){return{event:ee,touch:Ne(ee)}},ot=function(ee){xe.push(We(ee))},Ze=function(ee){for(var we=0;we<xe.length;we++){var Pe=xe[we];if(Pe.event.pointerId===ee.pointerId){xe.splice(we,1);return}}},et=function(ee){var we=xe.filter(function(Pe){return Pe.event.pointerId===ee.pointerId})[0];we.event=ee,we.touch=Ne(ee)},Qe=function(ee){ee.touches=xe.map(function(we){return we.touch})},Ye=function(ee){return ee.pointerType==="mouse"||ee.pointerType===4};r.registerBinding(r.container,"pointerdown",function(Ie){Ye(Ie)||(Ie.preventDefault(),ot(Ie),Qe(Ie),be(Ie))}),r.registerBinding(r.container,"pointerup",function(Ie){Ye(Ie)||(Ze(Ie),Qe(Ie),$(Ie))}),r.registerBinding(r.container,"pointercancel",function(Ie){Ye(Ie)||(Ze(Ie),Qe(Ie),G(Ie))}),r.registerBinding(r.container,"pointermove",function(Ie){Ye(Ie)||(Ie.preventDefault(),et(Ie),Qe(Ie),j(Ie))})}};var Du={};Du.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,i,a,o,s,u){this.renderer.nodeShapeImpl("polygon",n,i,a,o,s,this.points)},intersectLine:function(n,i,a,o,s,u,l,c){return Cg(s,u,this.points,n,i,a/2,o/2,l)},checkPoint:function(n,i,a,o,s,u,l,c){return Au(n,i,this.points,u,l,o,s,[0,-1],a)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,i,a,o,s,u){return g7(this.points,n,i,a,o,s)}}};Du.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,u){return O7(a,o,e,t,n/2+s,i/2+s)},checkPoint:function(e,t,n,i,a,o,s,u){return hf(e,t,i,a,o,s,n)}}};Du.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,i,a,o,s,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===i)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=i;var c=a/2,f=o/2;s=s==="auto"?P3(a,o):s;for(var d=new Array(e.length/2),h=0;h<e.length/2;h++)d[h]={x:n+c*e[h*2],y:i+f*e[h*2+1]};var v,p,g,y,b=d.length;for(p=d[b-1],v=0;v<b;v++)g=d[v%b],y=d[(v+1)%b],u[l][v]=gT(p,g,y,s),p=g,g=y;return u[l]},draw:function(n,i,a,o,s,u,l){this.renderer.nodeShapeImpl("round-polygon",n,i,a,o,s,this.points,this.getOrCreateCorners(i,a,o,s,u,l,"drawCorners"))},intersectLine:function(n,i,a,o,s,u,l,c,f){return C7(s,u,this.points,n,i,a,o,l,this.getOrCreateCorners(n,i,a,o,c,f,"corners"))},checkPoint:function(n,i,a,o,s,u,l,c,f){return E7(n,i,this.points,u,l,o,s,this.getOrCreateCorners(u,l,o,s,c,f,"corners"))}}};Du.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:na(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,u){return T3(a,o,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,a,o,s,u){var l=i/2,c=a/2;u=u==="auto"?Yl(i,a):u,u=Math.min(l,c,u);var f=u*2;return!!(Au(e,t,this.points,o,s,i,a-f,[0,-1],n)||Au(e,t,this.points,o,s,i-f,a,[0,-1],n)||hf(e,t,f,f,o-l+u,s-c+u,n)||hf(e,t,f,f,o+l-u,s-c+u,n)||hf(e,t,f,f,o+l-u,s+c-u,n)||hf(e,t,f,f,o-l+u,s+c-u,n))}}};Du.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:aT(),points:na(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,null,o)},generateCutTrianglePts:function(e,t,n,i,a){var o=a==="auto"?this.cornerLength:a,s=t/2,u=e/2,l=n-u,c=n+u,f=i-s,d=i+s;return{topLeft:[l,f+o,l+o,f,l+o,f+o],topRight:[c-o,f,c,f+o,c-o,f+o],bottomRight:[c,d-o,c-o,d,c-o,d-o],bottomLeft:[l+o,d,l,d-o,l+o,d-o]}},intersectLine:function(e,t,n,i,a,o,s,u){var l=this.generateCutTrianglePts(n+2*s,i+2*s,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return Cg(a,o,c,e,t)},checkPoint:function(e,t,n,i,a,o,s,u){var l=u==="auto"?this.cornerLength:u;if(Au(e,t,this.points,o,s,i,a-2*l,[0,-1],n)||Au(e,t,this.points,o,s,i-2*l,a,[0,-1],n))return!0;var c=this.generateCutTrianglePts(i,a,o,s);return Ea(e,t,c.topLeft)||Ea(e,t,c.topRight)||Ea(e,t,c.bottomRight)||Ea(e,t,c.bottomLeft)}}};Du.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:na(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a)},intersectLine:function(e,t,n,i,a,o,s,u){var l=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*s,i+2*s,e,t),h=function(g){var y=wh({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},l),b=wh({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},c),m=wh({x:g[0],y:g[1]},{x:g[2],y:g[3]},{x:g[4],y:g[5]},f);return[g[0],g[1],y.x,y.y,b.x,b.y,m.x,m.y,g[4],g[5]]},v=[].concat(h(d.topLeft),h(d.topRight),h(d.bottomRight),h(d.bottomLeft));return Cg(a,o,v,e,t)},generateBarrelBezierPts:function(e,t,n,i){var a=t/2,o=e/2,s=n-o,u=n+o,l=i-a,c=i+a,f=IC(e,t),d=f.heightOffset,h=f.widthOffset,v=f.ctrlPtOffsetPct*e,p={topLeft:[s,l+d,s+v,l,s+h,l],topRight:[u-h,l,u-v,l,u,l+d],bottomRight:[u,c-d,u-v,c,u-h,c],bottomLeft:[s+h,c,s+v,c,s,c-d]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,n,i,a,o,s,u){var l=IC(i,a),c=l.heightOffset,f=l.widthOffset;if(Au(e,t,this.points,o,s,i,a-2*c,[0,-1],n)||Au(e,t,this.points,o,s,i-2*f,a,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(i,a,o,s),h=function(O,A,k){var R=k[4],I=k[2],M=k[0],N=k[5],F=k[1],z=Math.min(R,M),B=Math.max(R,M),U=Math.min(N,F),W=Math.max(N,F);if(z<=O&&O<=B&&U<=A&&A<=W){var Y=T7(R,I,M),H=b7(Y[0],Y[1],Y[2],O),J=H.filter(function(le){return 0<=le&&le<=1});if(J.length>0)return J[0]}return null},v=Object.keys(d),p=0;p<v.length;p++){var g=v[p],y=d[g],b=h(e,t,y);if(b!=null){var m=y[5],_=y[3],x=y[1],C=fi(m,_,x,b);if(y.isTop&&C<=t||y.isBottom&&t<=C)return!0}}return!1}}};Du.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:na(4,0),draw:function(e,t,n,i,a,o){this.renderer.nodeShapeImpl(this.name,e,t,n,i,a,this.points,o)},intersectLine:function(e,t,n,i,a,o,s,u){var l=e-(n/2+s),c=t-(i/2+s),f=c,d=e+(n/2+s),h=Dl(a,o,e,t,l,c,d,f,!1);return h.length>0?h:T3(a,o,e,t,n,i,s,u)},checkPoint:function(e,t,n,i,a,o,s,u){u=u==="auto"?Yl(i,a):u;var l=2*u;if(Au(e,t,this.points,o,s,i,a-l,[0,-1],n)||Au(e,t,this.points,o,s,i-l,a,[0,-1],n))return!0;var c=i/2+2*n,f=a/2+2*n,d=[o-c,s-f,o-c,s,o+c,s,o+c,s-f];return!!(Ea(e,t,d)||hf(e,t,l,l,o+i/2-u,s+a/2-u,n)||hf(e,t,l,l,o-i/2+u,s+a/2-u,n))}}};Du.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",na(3,0)),this.generateRoundPolygon("round-triangle",na(3,0)),this.generatePolygon("rectangle",na(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",na(5,0)),this.generateRoundPolygon("round-pentagon",na(5,0)),this.generatePolygon("hexagon",na(6,0)),this.generateRoundPolygon("round-hexagon",na(6,0)),this.generatePolygon("heptagon",na(7,0)),this.generateRoundPolygon("round-heptagon",na(7,0)),this.generatePolygon("octagon",na(8,0)),this.generateRoundPolygon("round-octagon",na(8,0));var n=new Array(20);{var i=kC(5,0),a=kC(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[s*2]*=o,a[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=i[s*2],n[s*4+1]=i[s*2+1],n[s*4+2]=a[s*2],n[s*4+3]=a[s*2+1]}n=A3(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,l)}};var Jg={};Jg.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Jg.redraw=function(r){r=r||E3();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Jg.beforeRender=function(r,e){if(!this.destroyed){e==null&&pn("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,i){return i.priority-n.priority})}};var xk=function(e,t,n){for(var i=e.beforeRenderCallbacks,a=0;a<i.length;a++)i[a].fn(t,n)};Jg.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(i){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){xk(r,!0,i);var a=Tu();r.render(r.renderOptions);var o=r.lastDrawTime=Tu();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-a),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-a;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else xk(r,!1,i);r.skipFrame=!1,Vb(t)}};Vb(t)}};var G$=function(e){this.init(e)},Pj=G$,Hh=Pj.prototype;Hh.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Hh.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var i=n.document,a=i.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",u=i.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!u){var l=i.createElement("style");l.id=o,l.textContent="."+s+" { position: relative; }",a.insertBefore(l,a.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&Gr("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=at(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Hh.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Hh.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,i=n.target;(i.off||i.removeEventListener).apply(i,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};Hh.isHeadless=function(){return!1};[pT,Tj,Aj,Wh,Du,Jg].forEach(function(r){jt(Hh,r)});var K1=1e3/60,Rj={setupDequeueing:function(e){return function(){var n=this,i=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var a=Yg(function(){i.redrawHint("eles",!0),i.redrawHint("drag",!0),i.redraw()},e.deqRedrawThreshold),o=function(l,c){var f=Tu(),d=i.averageRedrawTime,h=i.lastRedrawTime,v=[],p=i.cy.extent(),g=i.getPixelRatio();for(l||i.flushRenderedStyleQueue();;){var y=Tu(),b=y-f,m=y-c;if(h<K1){var _=K1-(l?d:0);if(m>=e.deqFastCost*_)break}else if(l){if(b>=e.deqCost*h||b>=e.deqAvgCost*d)break}else if(m>=e.deqNoDrawCost*K1)break;var x=e.deq(n,g,p);if(x.length>0)for(var C=0;C<x.length;C++)v.push(x[C]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,g,p)&&a())},s=e.priority||eT;i.beforeRender(o,s(n))}}}},V$=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$b;nc(this,r),this.idsByKey=new bu,this.keyForId=new bu,this.cachesByLvl=new bu,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return ic(r,[{key:"getIdsFor",value:function(t){t==null&&pn("Can not get id list for null key");var n=this.idsByKey,i=this.idsByKey.get(t);return i||(i=new qh,n.set(t,i)),i}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);this.deleteIdForKey(i,n),this.addIdForKey(a,n),this.keyForId.set(n,a)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteIdForKey(i,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),i=this.keyForId.get(n),a=this.getKey(t);return i!==a}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,i=this.lvls,a=n.get(t);return a||(a=new bu,n.set(t,a),i.push(t)),a}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var i=this.getKey(t),a=this.getCache(i,n);return a!=null&&this.updateKeyMappingFor(t),a}},{key:"getForCachedKey",value:function(t,n){var i=this.keyForId.get(t.id()),a=this.getCache(i,n);return a}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var i=this.getKey(t);return this.hasCache(i,n)}},{key:"setCache",value:function(t,n,i){i.key=t,this.getCachesAt(n).set(t,i)}},{key:"set",value:function(t,n,i){var a=this.getKey(t);this.setCache(a,n,i),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var i=this.getKey(t);this.deleteCache(i,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(i){return n.deleteCache(t,i)})}},{key:"invalidate",value:function(t){var n=t.id(),i=this.keyForId.get(n);this.deleteKeyMappingFor(t);var a=this.doesEleInvalidateKey(t);return a&&this.invalidateKey(i),a||this.getNumberOfIdsForKey(i)===0}}])}(),Ek=25,Gm=50,kb=-4,$C=3,kj=7.99,$$=8,W$=1024,H$=1024,Y$=1024,X$=.2,K$=.8,Z$=10,Q$=.15,J$=.1,eW=.9,tW=.9,rW=100,nW=1,mh={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},iW=Ri({getKey:null,doesEleInvalidateKey:$b,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:_3,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Op=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var i=iW(t);jt(n,i),n.lookup=new V$(i.getKey,i.doesEleInvalidateKey),n.setupDequeueing()},ti=Op.prototype;ti.reasons=mh;ti.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};ti.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};ti.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Xg(function(t,n){return n.reqs-t.reqs});return e};ti.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};ti.getElement=function(r,e,t,n,i){var a=this,o=this.renderer,s=o.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!a.allowEdgeTxrCaching&&r.isEdge()||!a.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(rT(s*t))),n<kb)n=kb;else if(s>=kj||n>$C)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,d=o.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,d))return null;var h=u.get(r,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var v;if(c<=Ek?v=Ek:c<=Gm?v=Gm:v=Math.ceil(c/Gm)*Gm,c>Y$||f>H$)return null;var p=a.getTextureQueue(v),g=p[p.length-2],y=function(){return a.recycleTexture(v,f)||a.addTexture(v,f)};g||(g=p[p.length-1]),g||(g=y()),g.width-g.usedWidth<f&&(g=y());for(var b=function(z){return z&&z.scaledLabelShown===d},m=i&&i===mh.dequeue,_=i&&i===mh.highQuality,x=i&&i===mh.downscale,C,w=n+1;w<=$C;w++){var O=u.get(r,w);if(O){C=O;break}}var A=C&&C.level===n+1?C:null,k=function(){g.context.drawImage(A.texture.canvas,A.x,0,A.width,A.height,g.usedWidth,0,f,c)};if(g.context.setTransform(1,0,0,1,0,0),g.context.clearRect(g.usedWidth,0,f,v),b(A))k();else if(b(C))if(_){for(var R=C.level;R>n;R--)A=a.getElement(r,e,t,R,mh.downscale);k()}else return a.queueElement(r,C.level-1),C;else{var I;if(!m&&!_&&!x)for(var M=n-1;M>=kb;M--){var N=u.get(r,M);if(N){I=N;break}}if(b(I))return a.queueElement(r,n),I;g.context.translate(g.usedWidth,0),g.context.scale(l,l),this.drawElement(g.context,r,e,d,!1),g.context.scale(1/l,1/l),g.context.translate(-g.usedWidth,0)}return h={x:g.usedWidth,texture:g,level:n,scale:l,width:f,height:c,scaledLabelShown:d},g.usedWidth+=Math.ceil(f+$$),g.eleCaches.push(h),u.set(r,n,h),a.checkTextureFullness(g),h};ti.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};ti.invalidateElement=function(r){var e=this,t=e.lookup,n=[],i=t.isInvalid(r);if(i){for(var a=kb;a<=$C;a++){var o=t.getForCachedKey(r,a);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};ti.checkTextureUtility=function(r){r.invalidatedWidth>=X$*r.width&&this.retireTexture(r)};ti.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>K$&&r.fullnessChecks>=Z$?Hl(t,r):r.fullnessChecks++};ti.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),i=this.lookup;Hl(n,r),r.retired=!0;for(var a=r.eleCaches,o=0;o<a.length;o++){var s=a[o];i.deleteCache(s.key,s.level)}tT(a);var u=e.getRetiredTextureQueue(t);u.push(r)};ti.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),i={};return n.push(i),i.eleCaches=[],i.height=r,i.width=Math.max(W$,e),i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,i.canvas=t.renderer.makeOffscreenCanvas(i.width,i.height),i.context=i.canvas.getContext("2d"),i};ti.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),i=t.getRetiredTextureQueue(r),a=0;a<i.length;a++){var o=i[a];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,tT(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),Hl(i,o),n.push(o),o}};ti.queueElement=function(r,e){var t=this,n=t.getElementQueue(),i=t.getElementKeyToQueue(),a=this.getKey(r),o=i[a];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:a};n.push(s),i[a]=s}};ti.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=[],a=e.lookup,o=0;o<nW&&t.size()>0;o++){var s=t.pop(),u=s.key,l=s.eles[0],c=a.hasCache(l,s.level);if(n[u]=null,c)continue;i.push(s);var f=e.getBoundingBox(l);e.getElement(l,f,r,s.level,mh.dequeue)}return i};ti.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),i=this.getKey(r),a=n[i];a!=null&&(a.eles.length===1?(a.reqs=J2,t.updateItem(a),t.pop(),n[i]=null):a.eles.unmerge(r))};ti.onDequeue=function(r){this.onDequeues.push(r)};ti.offDequeue=function(r){Hl(this.onDequeues,r)};ti.setupDequeueing=Rj.setupDequeueing({deqRedrawThreshold:rW,deqCost:Q$,deqAvgCost:J$,deqNoDrawCost:eW,deqFastCost:tW,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var i=e.onDequeues[n];i(t)}},shouldRedraw:function(e,t,n,i){for(var a=0;a<t.length;a++)for(var o=t[a].eles,s=0;s<o.length;s++){var u=o[s].boundingBox();if(iT(u,i))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var aW=1,Up=-4,Jb=2,oW=3.99,sW=50,uW=50,lW=.15,cW=.1,fW=.9,dW=.9,hW=1,Ok=250,vW=4e3*4e3,Sk=32767,pW=!0,Ij=function(e){var t=this,n=t.renderer=e,i=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Tu()-2*Ok,t.skipping=!1,t.eleTxrDeqs=i.collection(),t.scheduleElementRefinement=Yg(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},uW),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=Ok?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var a=function(s,u){return u.reqs-s.reqs};t.layersQueue=new Xg(a),t.setupDequeueing()},ki=Ij.prototype,Ck=0,gW=Math.pow(2,53)-1;ki.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),i=Math.ceil(r.h*t),a=this.renderer.makeOffscreenCanvas(n,i),o={id:Ck=++Ck%gW,bb:r,level:e,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,u=-o.bb.x1,l=-o.bb.y1;return s.scale(t,t),s.translate(u,l),o};ki.getLayers=function(r,e,t){var n=this,i=n.renderer,a=i.cy,o=a.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(rT(o*e)),t<Up)t=Up;else if(o>=oW||t>Jb)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,d=n.levelIsComplete(t,r),h,v=function(){var k=function(F){if(n.validateLayersElesOrdering(F,r),n.levelIsComplete(F,r))return h=u[F],!0},R=function(F){if(!h)for(var z=t+F;Up<=z&&z<=Jb&&!k(z);z+=F);};R(1),R(-1);for(var I=c.length-1;I>=0;I--){var M=c[I];M.invalid&&Hl(c,M)}};if(!d)v();else return c;var p=function(){if(!f){f=oa();for(var k=0;k<r.length;k++)h7(f,r[k].boundingBox())}return f},g=function(k){k=k||{};var R=k.after;p();var I=Math.ceil(f.w*l),M=Math.ceil(f.h*l);if(I>Sk||M>Sk)return null;var N=I*M;if(N>vW)return null;var F=n.makeLayer(f,t);if(R!=null){var z=c.indexOf(R)+1;c.splice(z,0,F)}else(k.insert===void 0||k.insert)&&c.unshift(F);return F};if(n.skipping&&!s)return null;for(var y=null,b=r.length/aW,m=!s,_=0;_<r.length;_++){var x=r[_],C=x._private.rscratch,w=C.imgLayerCaches=C.imgLayerCaches||{},O=w[t];if(O){y=O;continue}if((!y||y.eles.length>=b||!C3(y.bb,x.boundingBox()))&&(y=g({insert:!0,after:y}),!y))return null;h||m?n.queueLayer(y,x):n.drawEleInLayer(y,x,t,e),y.eles.push(x),w[t]=y}return h||(m?null:c)};ki.getEleLevelForLayerLevel=function(r,e){return r};ki.drawEleInLayer=function(r,e,t,n){var i=this,a=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=i.getEleLevelForLayerLevel(t,n),a.setImgSmoothing(o,!1),a.drawCachedElement(o,e,null,null,t,pW),a.setImgSmoothing(o,!0))};ki.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var i=0,a=0;a<n.length;a++){var o=n[a];if(o.reqs>0||o.invalid)return!1;i+=o.eles.length}return i===e.length};ki.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var i=t[n],a=-1,o=0;o<e.length;o++)if(i.eles[0]===e[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==e[s+o]){this.invalidateLayer(i);break}}};ki.updateElementsInLayers=function(r,e){for(var t=this,n=Vg(r[0]),i=0;i<r.length;i++)for(var a=n?null:r[i],o=n?r[i]:r[i].ele,s=o._private.rscratch,u=s.imgLayerCaches=s.imgLayerCaches||{},l=Up;l<=Jb;l++){var c=u[l];c&&(a&&t.getEleLevelForLayerLevel(c.level)!==a.level||e(c,o,a))}};ki.haveLayers=function(){for(var r=this,e=!1,t=Up;t<=Jb;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};ki.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Tu(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,i,a){e.invalidateLayer(n)}))};ki.invalidateLayer=function(r){if(this.lastInvalidationTime=Tu(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Hl(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var i=0;i<t.length;i++){var a=t[i]._private.rscratch.imgLayerCaches;a&&(a[e]=null)}}};ki.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,i,a){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};ki.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};ki.queueLayer=function(r,e){var t=this,n=t.layersQueue,i=r.elesQueue,a=i.hasId=i.hasId||{};if(!r.replacement){if(e){if(a[e.id()])return;i.push(e),a[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};ki.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],i=0;i<hW&&t.size()!==0;){var a=t.peek();if(a.replacement){t.pop();continue}if(a.replaces&&a!==a.replaces.replacement){t.pop();continue}if(a.invalid){t.pop();continue}var o=a.elesQueue.shift();o&&(e.drawEleInLayer(a,o,a.level,r),i++),n.length===0&&n.push(!0),a.elesQueue.length===0&&(t.pop(),a.reqs=0,a.replaces&&e.applyLayerReplacement(a),e.requestRedraw())}return n};ki.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,i=t.indexOf(n);if(!(i<0||n.invalid)){t[i]=r;for(var a=0;a<r.eles.length;a++){var o=r.eles[a]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};ki.requestRedraw=Yg(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);ki.setupDequeueing=Rj.setupDequeueing({deqRedrawThreshold:sW,deqCost:lW,deqAvgCost:cW,deqNoDrawCost:fW,deqFastCost:dW,deq:function(e,t){return e.dequeue(t)},onDeqd:eT,shouldRedraw:_3,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var Dj={},Tk;function yW(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function mW(r,e,t){for(var n,i=0;i<e.length;i++){var a=e[i];i===0&&(n=a),r.lineTo(a.x,a.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Ak(r,e,t){r.beginPath&&r.beginPath();for(var n=e,i=0;i<n.length;i++){var a=n[i];r.lineTo(a.x,a.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var i=1;i<o.length;i++){var a=o[i];r.lineTo(a.x,a.y)}r.closePath&&r.closePath()}function bW(r,e,t,n,i){r.beginPath&&r.beginPath(),r.arc(t,n,i,0,Math.PI*2,!1);var a=e,o=a[0];r.moveTo(o.x,o.y);for(var s=0;s<a.length;s++){var u=a[s];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function _W(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}Dj.arrowShapeImpl=function(r){return(Tk||(Tk={polygon:yW,"triangle-backcurve":mW,"triangle-tee":Ak,"circle-triangle":bW,"triangle-cross":Ak,circle:_W}))[r]};var Us={};Us.drawElement=function(r,e,t,n,i,a){var o=this;e.isNode()?o.drawNode(r,e,t,n,i,a):o.drawEdge(r,e,t,n,i,a)};Us.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};Us.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};Us.drawCachedElementPortion=function(r,e,t,n,i,a,o,s){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,i,a);if(c!=null){var f=s(u,e);if(f===0)return;var d=o(u,e),h=l.x1,v=l.y1,p=l.w,g=l.h,y,b,m,_,x;if(d!==0){var C=t.getRotationPoint(e);m=C.x,_=C.y,r.translate(m,_),r.rotate(d),x=u.getImgSmoothing(r),x||u.setImgSmoothing(r,!0);var w=t.getRotationOffset(e);y=w.x,b=w.y}else y=h,b=v;var O;f!==1&&(O=r.globalAlpha,r.globalAlpha=O*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,y,b,p,g),f!==1&&(r.globalAlpha=O),d!==0&&(r.rotate(-d),r.translate(-m,-_),x||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var wW=function(){return 0},xW=function(e,t){return e.getTextAngle(t,null)},EW=function(e,t){return e.getTextAngle(t,"source")},OW=function(e,t){return e.getTextAngle(t,"target")},SW=function(e,t){return t.effectiveOpacity()},Z1=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};Us.drawCachedElement=function(r,e,t,n,i,a){var o=this,s=o.data,u=s.eleTxrCache,l=s.lblTxrCache,c=s.slbTxrCache,f=s.tlbTxrCache,d=e.boundingBox(),h=a===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||iT(d,n))){var v=e.isEdge(),p=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,u,t,i,h,wW,SW),(!v||!p)&&o.drawCachedElementPortion(r,e,l,t,i,h,xW,Z1),v&&!p&&(o.drawCachedElementPortion(r,e,c,t,i,h,EW,Z1),o.drawCachedElementPortion(r,e,f,t,i,h,OW,Z1)),o.drawElementOverlay(r,e)}};Us.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var i=e[n];t.drawElement(r,i)}};Us.drawCachedElements=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];i.drawCachedElement(r,o,t,n)}};Us.drawCachedNodes=function(r,e,t,n){for(var i=this,a=0;a<e.length;a++){var o=e[a];o.isNode()&&i.drawCachedElement(r,o,t,n)}};Us.drawLayeredElements=function(r,e,t,n){var i=this,a=i.data.lyrTxrCache.getLayers(e,t);if(a)for(var o=0;o<a.length;o++){var s=a[o],u=s.bb;u.w===0||u.h===0||r.drawImage(s.canvas,u.x1,u.y1,u.w,u.h)}else i.drawCachedElements(r,e,t,n)};var Mu={};Mu.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(a&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=a?e.pstyle("opacity").value:1,c=a?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,p=e.pstyle("line-outline-width").value,g=e.pstyle("line-outline-color").value,y=l*c,b=l*c,m=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;f==="straight-triangle"?(o.eleStrokeStyle(r,e,F),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=h,r.lineCap=v,o.eleStrokeStyle(r,e,F),o.drawEdgePath(e,r,s.allpts,d),r.lineCap="butt")},_=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y;if(r.lineWidth=h+p,r.lineCap=v,p>0)o.colorStrokeStyle(r,g[0],g[1],g[2],F);else{r.lineCap="butt";return}f==="straight-triangle"?o.drawEdgeTrianglePath(e,r,s.allpts):(o.drawEdgePath(e,r,s.allpts,d),r.lineCap="butt")},x=function(){i&&o.drawEdgeOverlay(r,e)},C=function(){i&&o.drawEdgeUnderlay(r,e)},w=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;o.drawArrowheads(r,e,F)},O=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var A=e.pstyle("ghost").value==="yes";if(A){var k=e.pstyle("ghost-offset-x").pfValue,R=e.pstyle("ghost-offset-y").pfValue,I=e.pstyle("ghost-opacity").value,M=y*I;r.translate(k,R),m(M),w(M),r.translate(-k,-R)}else _();C(),m(),w(),x(),O(),t&&r.translate(u.x1,u.y1)}};var Mj=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var i=n.pstyle("".concat(e,"-opacity")).value;if(i!==0){var a=this,o=a.usePaths(),s=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",a.colorStrokeStyle(t,c[0],c[1],c[2],i),a.drawEdgePath(n,t,s.allpts,"solid")}}}};Mu.drawEdgeOverlay=Mj("overlay");Mu.drawEdgeUnderlay=Mj("underlay");Mu.drawEdgePath=function(r,e,t,n){var i=r._private.rscratch,a=e,o,s=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),d=i.pathCacheKey&&i.pathCacheKey===f;d?(o=e=i.pathCache,s=!0):(o=e=new Path2D,i.pathCacheKey=f,i.pathCache=o)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=c;break;case"solid":a.setLineDash([]);break}if(!s&&!i.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<t.length;h+=4)e.quadraticCurveTo(t[h],t[h+1],t[h+2],t[h+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(i.isRound){var p=Sa(i.roundCorners),g;try{for(p.s();!(g=p.n()).done;){var y=g.value;xj(e,y)}}catch(m){p.e(m)}finally{p.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var b=2;b+1<t.length;b+=2)e.lineTo(t[b],t[b+1]);break}e=a,u?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Mu.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,i=0;i+1<t.length;i+=2){var a=[t[i+2]-t[i],t[i+3]-t[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],u=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[i]-u[0],t[i+1]-u[1]),e.lineTo(t[i]+u[0],t[i+1]+u[1]),e.lineTo(t[i+2],t[i+3]),e.closePath(),e.fill()}};Mu.drawArrowheads=function(r,e,t){var n=e._private.rscratch,i=n.edgeType==="haystack";i||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),i||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Mu.drawArrowhead=function(r,e,t,n,i,a,o){if(!(isNaN(n)||n==null||isNaN(i)||i==null||isNaN(a)||a==null)){var s=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(t+"-arrow-width"),h=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(h*=f);var v=e.pstyle("opacity").value;o===void 0&&(o=v);var p=r.globalCompositeOperation;(o!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,l,f,u,h,n,i,a),r.globalCompositeOperation=p);var g=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,g[0],g[1],g[2],o),s.colorStrokeStyle(r,g[0],g[1],g[2],o),s.drawArrowShape(e,r,c,f,u,h,n,i,a)}}};Mu.drawArrowShape=function(r,e,t,n,i,a,o,s,u){var l=this,c=this.usePaths()&&i!=="triangle-cross",f=!1,d,h=e,v={x:o,y:s},p=r.pstyle("arrow-scale").value,g=this.getArrowWidth(n,p),y=l.arrowShapes[i];if(c){var b=l.arrowPathCache=l.arrowPathCache||[],m=_f(i),_=b[m];_!=null?(d=e=_,f=!0):(d=e=new Path2D,b[m]=d)}f||(e.beginPath&&e.beginPath(),c?y.draw(e,1,0,{x:0,y:0},1):y.draw(e,g,u,v,n),e.closePath&&e.closePath()),e=h,c&&(e.translate(o,s),e.rotate(u),e.scale(g,g)),(t==="filled"||t==="both")&&(c?e.fill(d):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=a/(c?g:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/g,1/g),e.rotate(-u),e.translate(-o,-s))};var mT={};mT.safeDrawImage=function(r,e,t,n,i,a,o,s,u,l){if(!(i<=0||a<=0||u<=0||l<=0))try{r.drawImage(e,t,n,i,a,o,s,u,l)}catch(c){Gr(c)}};mT.drawInscribedImage=function(r,e,t,n,i){var a=this,o=t.position(),s=o.x,u=o.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),d=c(t,"background-repeat","value",n),h=t.width(),v=t.height(),p=t.padding()*2,g=h+(c(t,"background-width-relative-to","value",n)==="inner"?0:p),y=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:p),b=t._private.rscratch,m=c(t,"background-clip","value",n),_=m==="node",x=c(t,"background-image-opacity","value",n)*i,C=c(t,"background-image-smoothing","value",n),w=t.pstyle("corner-radius").value;w!=="auto"&&(w=t.pstyle("corner-radius").pfValue);var O=e.width||e.cachedW,A=e.height||e.cachedH;(O==null||A==null)&&(document.body.appendChild(e),O=e.cachedW=e.width||e.offsetWidth,A=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var k=O,R=A;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?k=c(t,"background-width","pfValue",n)*g:k=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?R=c(t,"background-height","pfValue",n)*y:R=c(t,"background-height","pfValue",n)),!(k===0||R===0)){if(f==="contain"){var I=Math.min(g/k,y/R);k*=I,R*=I}else if(f==="cover"){var I=Math.max(g/k,y/R);k*=I,R*=I}var M=s-g/2,N=c(t,"background-position-x","units",n),F=c(t,"background-position-x","pfValue",n);N==="%"?M+=(g-k)*F:M+=F;var z=c(t,"background-offset-x","units",n),B=c(t,"background-offset-x","pfValue",n);z==="%"?M+=(g-k)*B:M+=B;var U=u-y/2,W=c(t,"background-position-y","units",n),Y=c(t,"background-position-y","pfValue",n);W==="%"?U+=(y-R)*Y:U+=Y;var H=c(t,"background-offset-y","units",n),J=c(t,"background-offset-y","pfValue",n);H==="%"?U+=(y-R)*J:U+=J,b.pathCache&&(M-=s,U-=u,s=0,u=0);var le=r.globalAlpha;r.globalAlpha=x;var fe=a.getImgSmoothing(r),ue=!1;if(C==="no"&&fe?(a.setImgSmoothing(r,!1),ue=!0):C==="yes"&&!fe&&(a.setImgSmoothing(r,!0),ue=!0),d==="no-repeat")_&&(r.save(),b.pathCache?r.clip(b.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,g,y,w,b),r.clip())),a.safeDrawImage(r,e,0,0,O,A,M,U,k,R),_&&r.restore();else{var ge=r.createPattern(e,d);r.fillStyle=ge,a.nodeShapes[a.getNodeShape(t)].draw(r,s,u,g,y,w,b),r.translate(M,U),r.fill(),r.translate(-M,-U)}r.globalAlpha=le,ue&&a.setImgSmoothing(r,fe)}};var Mf={};Mf.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),i=Math.ceil(rT(t*n));e=Math.pow(2,i)}var a=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(a<o)};Mf.drawElementText=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(a&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var u=o.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;r.textAlign="center",r.textBaseline="bottom"}var h=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),i==null?(o.drawText(r,e,null,h,a),e.isEdge()&&(o.drawText(r,e,"source",h,a),o.drawText(r,e,"target",h,a))):o.drawText(r,e,i,h,a),t&&r.translate(v.x1,v.y1)};Mf.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Mf.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue+"px",a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*s,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+i+" "+a,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],s),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function CW(r,e,t,n,i){var a=Math.min(n,i),o=a/2,s=e+n/2,u=t+i/2;r.beginPath(),r.arc(s,u,o,0,Math.PI*2),r.closePath()}function Pk(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=Math.min(a,n/2,i/2);r.beginPath(),r.moveTo(e+o,t),r.lineTo(e+n-o,t),r.quadraticCurveTo(e+n,t,e+n,t+o),r.lineTo(e+n,t+i-o),r.quadraticCurveTo(e+n,t+i,e+n-o,t+i),r.lineTo(e+o,t+i),r.quadraticCurveTo(e,t+i,e,t+i-o),r.lineTo(e,t+o),r.quadraticCurveTo(e,t,e+o,t),r.closePath()}Mf.getTextAngle=function(r,e){var t,n=r._private,i=n.rscratch,a=e?e+"-":"",o=r.pstyle(a+"text-rotation");if(o.strValue==="autorotate"){var s=xa(i,"labelAngle",e);t=r.isEdge()?s:0}else o.strValue==="none"?t=0:t=o.pfValue;return t};Mf.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=e._private,o=a.rscratch,s=i?e.effectiveOpacity():1;if(!(i&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=xa(o,"labelX",t),l=xa(o,"labelY",t),c,f,d=this.getLabelText(e,t);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,i);var h=t?t+"-":"",v=xa(o,"labelWidth",t),p=xa(o,"labelHeight",t),g=e.pstyle(h+"text-margin-x").pfValue,y=e.pstyle(h+"text-margin-y").pfValue,b=e.isEdge(),m=e.pstyle("text-halign").value,_=e.pstyle("text-valign").value;b&&(m="center",_="center"),u+=g,l+=y;var x;switch(n?x=this.getTextAngle(e,t):x=0,x!==0&&(c=u,f=l,r.translate(c,f),r.rotate(x),u=0,l=0),_){case"top":break;case"center":l+=p/2;break;case"bottom":l+=p;break}var C=e.pstyle("text-background-opacity").value,w=e.pstyle("text-border-opacity").value,O=e.pstyle("text-border-width").pfValue,A=e.pstyle("text-background-padding").pfValue,k=e.pstyle("text-background-shape").strValue,R=k==="round-rectangle"||k==="roundrectangle",I=k==="circle",M=2;if(C>0||O>0&&w>0){var N=r.fillStyle,F=r.strokeStyle,z=r.lineWidth,B=e.pstyle("text-background-color").value,U=e.pstyle("text-border-color").value,W=e.pstyle("text-border-style").value,Y=C>0,H=O>0&&w>0,J=u-A;switch(m){case"left":J-=v;break;case"center":J-=v/2;break}var le=l-p-A,fe=v+2*A,ue=p+2*A;if(Y&&(r.fillStyle="rgba(".concat(B[0],",").concat(B[1],",").concat(B[2],",").concat(C*s,")")),H&&(r.strokeStyle="rgba(".concat(U[0],",").concat(U[1],",").concat(U[2],",").concat(w*s,")"),r.lineWidth=O,r.setLineDash))switch(W){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=O/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(R?(r.beginPath(),Pk(r,J,le,fe,ue,M)):I?(r.beginPath(),CW(r,J,le,fe,ue)):(r.beginPath(),r.rect(J,le,fe,ue)),Y&&r.fill(),H&&r.stroke(),H&&W==="double"){var ge=O/2;r.beginPath(),R?Pk(r,J+ge,le+ge,fe-2*ge,ue-2*ge,M):r.rect(J+ge,le+ge,fe-2*ge,ue-2*ge),r.stroke()}r.fillStyle=N,r.strokeStyle=F,r.lineWidth=z,r.setLineDash&&r.setLineDash([])}var ve=2*e.pstyle("text-outline-width").pfValue;if(ve>0&&(r.lineWidth=ve),e.pstyle("text-wrap").value==="wrap"){var de=xa(o,"labelWrapCachedLines",t),ie=xa(o,"labelLineHeight",t),Q=v/2,re=this.getLabelJustification(e);switch(re==="auto"||(m==="left"?re==="left"?u+=-v:re==="center"&&(u+=-Q):m==="center"?re==="left"?u+=-Q:re==="right"&&(u+=Q):m==="right"&&(re==="center"?u+=Q:re==="right"&&(u+=v))),_){case"top":l-=(de.length-1)*ie;break;case"center":case"bottom":l-=(de.length-1)*ie;break}for(var se=0;se<de.length;se++)ve>0&&r.strokeText(de[se],u,l),r.fillText(de[se],u,l),l+=ie}else ve>0&&r.strokeText(d,u,l),r.fillText(d,u,l);x!==0&&(r.rotate(-x),r.translate(-c,-f))}}};var oc={};oc.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,u,l=e._private,c=l.rscratch,f=e.position();if(!(!at(f.x)||!at(f.y))&&!(a&&!e.visible())){var d=a?e.effectiveOpacity():1,h=o.usePaths(),v,p=!1,g=e.padding();s=e.width()+2*g,u=e.height()+2*g;var y;t&&(y=t,r.translate(-y.x1,-y.y1));for(var b=e.pstyle("background-image"),m=b.value,_=new Array(m.length),x=new Array(m.length),C=0,w=0;w<m.length;w++){var O=m[w],A=_[w]=O!=null&&O!=="none";if(A){var k=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",w);C++,x[w]=o.getCachedImage(O,k,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var R=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,M=e.pstyle("background-opacity").value*d,N=e.pstyle("border-color").value,F=e.pstyle("border-style").value,z=e.pstyle("border-join").value,B=e.pstyle("border-cap").value,U=e.pstyle("border-position").value,W=e.pstyle("border-dash-pattern").pfValue,Y=e.pstyle("border-dash-offset").pfValue,H=e.pstyle("border-opacity").value*d,J=e.pstyle("outline-width").pfValue,le=e.pstyle("outline-color").value,fe=e.pstyle("outline-style").value,ue=e.pstyle("outline-opacity").value*d,ge=e.pstyle("outline-offset").value,ve=e.pstyle("corner-radius").value;ve!=="auto"&&(ve=e.pstyle("corner-radius").pfValue);var de=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;o.eleFillStyle(r,e,Ye)},ie=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H;o.colorStrokeStyle(r,N[0],N[1],N[2],Ye)},Q=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ue;o.colorStrokeStyle(r,le[0],le[1],le[2],Ye)},re=function(Ye,Ie,ee,we){var Pe=o.nodePathCache=o.nodePathCache||[],De=b3(ee==="polygon"?ee+","+we.join(","):ee,""+Ie,""+Ye,""+ve),Me=Pe[De],it,Fe=!1;return Me!=null?(it=Me,Fe=!0,c.pathCache=it):(it=new Path2D,Pe[De]=c.pathCache=it),{path:it,cacheHit:Fe}},se=e.pstyle("shape").strValue,pe=e.pstyle("shape-polygon-points").pfValue;if(h){r.translate(f.x,f.y);var Oe=re(s,u,se,pe);v=Oe.path,p=Oe.cacheHit}var Ce=function(){if(!p){var Ye=f;h&&(Ye={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(v||r,Ye.x,Ye.y,s,u,ve,c)}h?r.fill(v):r.fill()},Re=function(){for(var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ee=l.backgrounding,we=0,Pe=0;Pe<x.length;Pe++){var De=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Pe);if(Ie&&De==="over"||!Ie&&De==="inside"){we++;continue}_[Pe]&&x[Pe].complete&&!x[Pe].error&&(we++,o.drawInscribedImage(r,x[Pe],e,Pe,Ye))}l.backgrounding=we!==C,ee!==l.backgrounding&&e.updateStyle(!1)},be=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasPie(e)&&(o.drawPie(r,e,Ie),Ye&&(h||o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,ve,c)))},j=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;o.hasStripe(e)&&(r.save(),h?r.clip(c.pathCache):(o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,ve,c),r.clip()),o.drawStripe(r,e,Ie),r.restore(),Ye&&(h||o.nodeShapes[o.getNodeShape(e)].draw(r,f.x,f.y,s,u,ve,c)))},G=function(){var Ye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,Ie=(R>0?R:-R)*Ye,ee=R>0?0:255;R!==0&&(o.colorFillStyle(r,ee,ee,ee,Ie),h?r.fill(v):r.fill())},$=function(){if(I>0){if(r.lineWidth=I,r.lineCap=B,r.lineJoin=z,r.setLineDash)switch(F){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(W),r.lineDashOffset=Y;break;case"solid":case"double":r.setLineDash([]);break}if(U!=="center"){if(r.save(),r.lineWidth*=2,U==="inside")h?r.clip(v):r.clip();else{var Ye=new Path2D;Ye.rect(-s/2-I,-u/2-I,s+2*I,u+2*I),Ye.addPath(v),r.clip(Ye,"evenodd")}h?r.stroke(v):r.stroke(),r.restore()}else h?r.stroke(v):r.stroke();if(F==="double"){r.lineWidth=I/3;var Ie=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(v):r.stroke(),r.globalCompositeOperation=Ie}r.setLineDash&&r.setLineDash([])}},te=function(){if(J>0){if(r.lineWidth=J,r.lineCap="butt",r.setLineDash)switch(fe){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var Ye=f;h&&(Ye={x:0,y:0});var Ie=o.getNodeShape(e),ee=I;U==="inside"&&(ee=0),U==="outside"&&(ee*=2);var we=(s+ee+(J+ge))/s,Pe=(u+ee+(J+ge))/u,De=s*we,Me=u*Pe,it=o.nodeShapes[Ie].points,Fe;if(h){var ut=re(De,Me,Ie,it);Fe=ut.path}if(Ie==="ellipse")o.drawEllipsePath(Fe||r,Ye.x,Ye.y,De,Me);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(Ie)){var rt=0,ft=0,Ot=0;Ie==="round-diamond"?rt=(ee+ge+J)*1.4:Ie==="round-heptagon"?(rt=(ee+ge+J)*1.075,Ot=-(ee/2+ge+J)/35):Ie==="round-hexagon"?rt=(ee+ge+J)*1.12:Ie==="round-pentagon"?(rt=(ee+ge+J)*1.13,Ot=-(ee/2+ge+J)/15):Ie==="round-tag"?(rt=(ee+ge+J)*1.12,ft=(ee/2+J+ge)*.07):Ie==="round-triangle"&&(rt=(ee+ge+J)*(Math.PI/2),Ot=-(ee+ge/2+J)/Math.PI),rt!==0&&(we=(s+rt)/s,De=s*we,["round-hexagon","round-tag"].includes(Ie)||(Pe=(u+rt)/u,Me=u*Pe)),ve=ve==="auto"?P3(De,Me):ve;for(var yt=De/2,nt=Me/2,kt=ve+(ee+J+ge)/2,St=new Array(it.length/2),lr=new Array(it.length/2),ar=0;ar<it.length/2;ar++)St[ar]={x:Ye.x+ft+yt*it[ar*2],y:Ye.y+Ot+nt*it[ar*2+1]};var Gt,At,hr,or,Fr=St.length;for(At=St[Fr-1],Gt=0;Gt<Fr;Gt++)hr=St[Gt%Fr],or=St[(Gt+1)%Fr],lr[Gt]=gT(At,hr,or,kt),At=hr,hr=or;o.drawRoundPolygonPath(Fe||r,Ye.x+ft,Ye.y+Ot,s*we,u*Pe,it,lr)}else if(["roundrectangle","round-rectangle"].includes(Ie))ve=ve==="auto"?Yl(De,Me):ve,o.drawRoundRectanglePath(Fe||r,Ye.x,Ye.y,De,Me,ve+(ee+J+ge)/2);else if(["cutrectangle","cut-rectangle"].includes(Ie))ve=ve==="auto"?aT():ve,o.drawCutRectanglePath(Fe||r,Ye.x,Ye.y,De,Me,null,ve+(ee+J+ge)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(Ie))ve=ve==="auto"?Yl(De,Me):ve,o.drawBottomRoundRectanglePath(Fe||r,Ye.x,Ye.y,De,Me,ve+(ee+J+ge)/2);else if(Ie==="barrel")o.drawBarrelPath(Fe||r,Ye.x,Ye.y,De,Me);else if(Ie.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(Ie)){var nn=(ee+J+ge)/s;it=Wb(Hb(it,nn)),o.drawPolygonPath(Fe||r,Ye.x,Ye.y,s,u,it)}else{var Dt=(ee+J+ge)/s;it=Wb(Hb(it,-Dt)),o.drawPolygonPath(Fe||r,Ye.x,Ye.y,s,u,it)}if(h?r.stroke(Fe):r.stroke(),fe==="double"){r.lineWidth=ee/3;var yr=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(Fe):r.stroke(),r.globalCompositeOperation=yr}r.setLineDash&&r.setLineDash([])}},ce=function(){i&&o.drawNodeOverlay(r,e,f,s,u)},he=function(){i&&o.drawNodeUnderlay(r,e,f,s,u)},xe=function(){o.drawElementText(r,e,null,n)},Ne=e.pstyle("ghost").value==="yes";if(Ne){var We=e.pstyle("ghost-offset-x").pfValue,ot=e.pstyle("ghost-offset-y").pfValue,Ze=e.pstyle("ghost-opacity").value,et=Ze*d;r.translate(We,ot),Q(),te(),de(Ze*M),Ce(),Re(et,!0),ie(Ze*H),$(),be(R!==0||I!==0),j(R!==0||I!==0),Re(et,!1),G(et),r.translate(-We,-ot)}h&&r.translate(-f.x,-f.y),he(),h&&r.translate(f.x,f.y),Q(),te(),de(),Ce(),Re(d,!0),ie(),$(),be(R!==0||I!==0),j(R!==0||I!==0),Re(d,!1),G(),h&&r.translate(-f.x,-f.y),xe(),ce(),t&&r.translate(y.x1,y.y1)}};var Lj=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,i,a,o){var s=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(i=i||n.position(),a==null||o==null){var h=n.padding();a=n.width()+2*h,o=n.height()+2*h}s.colorFillStyle(t,c[0],c[1],c[2],l),s.nodeShapes[f].draw(t,i.x,i.y,a+u*2,o+u*2,d),t.fill()}}}};oc.drawNodeOverlay=Lj("overlay");oc.drawNodeUnderlay=Lj("underlay");oc.hasPie=function(r){return r=r[0],r._private.hasPie};oc.hasStripe=function(r){return r=r[0],r._private.hasStripe};oc.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=e.pstyle("pie-size"),o=e.pstyle("pie-hole"),s=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),d=Math.min(c,f)/2,h,v=0,p=this.usePaths();if(p&&(u=0,l=0),a.units==="%"?d=d*a.pfValue:a.pfValue!==void 0&&(d=a.pfValue/2),o.units==="%"?h=d*o.pfValue:o.pfValue!==void 0&&(h=o.pfValue/2),!(h>=d))for(var g=1;g<=i.pieBackgroundN;g++){var y=e.pstyle("pie-"+g+"-background-size").value,b=e.pstyle("pie-"+g+"-background-color").value,m=e.pstyle("pie-"+g+"-background-opacity").value*t,_=y/100;_+v>1&&(_=1-v);var x=1.5*Math.PI+2*Math.PI*v;x+=s;var C=2*Math.PI*_,w=x+C;y===0||v>=1||v+_>1||(h===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,d,x,w),r.closePath()):(r.beginPath(),r.arc(u,l,d,x,w),r.arc(u,l,h,w,x,!0),r.closePath()),this.colorFillStyle(r,b[0],b[1],b[2],m),r.fill(),v+=_)}};oc.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var i=e.cy().style(),a=n.x,o=n.y,s=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var f=e.pstyle("stripe-direction").value,d=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var h=s,v=u;d.units==="%"?(h=h*d.pfValue,v=v*d.pfValue):d.pfValue!==void 0&&(h=d.pfValue,v=d.pfValue),c&&(a=0,o=0),o-=h/2,a-=v/2;for(var p=1;p<=i.stripeBackgroundN;p++){var g=e.pstyle("stripe-"+p+"-background-size").value,y=e.pstyle("stripe-"+p+"-background-color").value,b=e.pstyle("stripe-"+p+"-background-opacity").value*t,m=g/100;m+l>1&&(m=1-l),!(g===0||l>=1||l+m>1)&&(r.beginPath(),r.rect(a,o+v*l,h,v*m),r.closePath(),this.colorFillStyle(r,y[0],y[1],y[2],b),r.fill(),l+=m)}r.restore()};var sa={},TW=100;sa.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};sa.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,i=0;i<e.length;i++)if(n=e[i],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};sa.createGradientStyleFor=function(r,e,t,n,i){var a,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),d=wf(l,f),h=wf(c,f);a=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,h))}else{var v=o?{x:0,y:0}:t.position(),p=t.paddedWidth(),g=t.paddedHeight();a=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(p,g))}else if(t.isEdge()){var y=t.sourceEndpoint(),b=t.targetEndpoint();a=r.createLinearGradient(y.x,y.y,b.x,b.y)}else{var m=o?{x:0,y:0}:t.position(),_=t.paddedWidth(),x=t.paddedHeight(),C=_/2,w=x/2,O=t.pstyle("background-gradient-direction").value;switch(O){case"to-bottom":a=r.createLinearGradient(m.x,m.y-w,m.x,m.y+w);break;case"to-top":a=r.createLinearGradient(m.x,m.y+w,m.x,m.y-w);break;case"to-left":a=r.createLinearGradient(m.x+C,m.y,m.x-C,m.y);break;case"to-right":a=r.createLinearGradient(m.x-C,m.y,m.x+C,m.y);break;case"to-bottom-right":case"to-right-bottom":a=r.createLinearGradient(m.x-C,m.y-w,m.x+C,m.y+w);break;case"to-top-right":case"to-right-top":a=r.createLinearGradient(m.x-C,m.y+w,m.x+C,m.y-w);break;case"to-bottom-left":case"to-left-bottom":a=r.createLinearGradient(m.x+C,m.y-w,m.x-C,m.y+w);break;case"to-top-left":case"to-left-top":a=r.createLinearGradient(m.x+C,m.y+w,m.x-C,m.y-w);break}}if(!a)return null;for(var A=u.length===s.length,k=s.length,R=0;R<k;R++)a.addColorStop(A?u[R]:R/(k-1),"rgba("+s[R][0]+","+s[R][1]+","+s[R][2]+","+i+")");return a};sa.gradientFillStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"background",e,t,n);if(!i)return null;r.fillStyle=i};sa.colorFillStyle=function(r,e,t,n,i){r.fillStyle="rgba("+e+","+t+","+n+","+i+")"};sa.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var i=e.pstyle("background-color").value;this.colorFillStyle(r,i[0],i[1],i[2],t)}};sa.gradientStrokeStyle=function(r,e,t,n){var i=this.createGradientStyleFor(r,"line",e,t,n);if(!i)return null;r.strokeStyle=i};sa.colorStrokeStyle=function(r,e,t,n,i){r.strokeStyle="rgba("+e+","+t+","+n+","+i+")"};sa.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var i=e.pstyle("line-color").value;this.colorStrokeStyle(r,i[0],i[1],i[2],t)}};sa.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),i=n[2],a=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var u=i*o,l=a*o,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=i+"px",f.style.height=a+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=t.canvases[d],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=t.bufferCanvases[d],c.width=u,c.height=l,c.style.width=i+"px",c.style.height=a+"px";e.textureMult=1,o<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=o}};sa.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};sa.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};sa.render=function(r){var e=this;r=r||E3();var t=e.cy,n=r.forcedContext,i=r.drawAllLayers,a=r.drawOnlyNodeLayer,o=r.forcedZoom,s=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),d=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,v=t.hasCompoundNodes(),p=e.hoverData.draggingEles,g=!!(e.hoverData.selecting||e.touchData.selecting);d=d&&!n&&e.motionBlurEnabled&&!g;var y=d;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),d&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(y=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var b=t.style(),m=t.zoom(),_=o!==void 0?o:m,x=t.pan(),C={x:x.x,y:x.y},w={zoom:m,pan:{x:x.x,y:x.y}},O=e.prevViewport,A=O===void 0||w.zoom!==O.zoom||w.pan.x!==O.pan.x||w.pan.y!==O.pan.y;!A&&!(p&&!v)&&(e.motionBlurPxRatio=1),s&&(C=s),_*=u,C.x*=u,C.y*=u;var k=e.getCachedZSortedEles();function R(ie,Q,re,se,pe){var Oe=ie.globalCompositeOperation;ie.globalCompositeOperation="destination-out",e.colorFillStyle(ie,255,255,255,e.motionBlurTransparency),ie.fillRect(Q,re,se,pe),ie.globalCompositeOperation=Oe}function I(ie,Q){var re,se,pe,Oe;!e.clearingMotionBlur&&(ie===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||ie===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(re={x:x.x*h,y:x.y*h},se=m*h,pe=e.canvasWidth*h,Oe=e.canvasHeight*h):(re=C,se=_,pe=e.canvasWidth,Oe=e.canvasHeight),ie.setTransform(1,0,0,1,0,0),Q==="motionBlur"?R(ie,0,0,pe,Oe):!n&&(Q===void 0||Q)&&ie.clearRect(0,0,pe,Oe),i||(ie.translate(re.x,re.y),ie.scale(se,se)),s&&ie.translate(s.x,s.y),o&&ie.scale(o,o)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var M=e.data.bufferContexts[e.TEXTURE_BUFFER];M.setTransform(1,0,0,1,0,0),M.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:M,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var w=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};w.mpan={x:(0-w.pan.x)/w.zoom,y:(0-w.pan.y)/w.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var N=l.contexts[e.NODE],F=e.textureCache.texture,w=e.textureCache.viewport;N.setTransform(1,0,0,1,0,0),d?R(N,0,0,w.width,w.height):N.clearRect(0,0,w.width,w.height);var z=b.core("outside-texture-bg-color").value,B=b.core("outside-texture-bg-opacity").value;e.colorFillStyle(N,z[0],z[1],z[2],B),N.fillRect(0,0,w.width,w.height);var m=t.zoom();I(N,!1),N.clearRect(w.mpan.x,w.mpan.y,w.width/w.zoom/u,w.height/w.zoom/u),N.drawImage(F,w.mpan.x,w.mpan.y,w.width/w.zoom/u,w.height/w.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var U=t.extent(),W=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),Y=e.hideEdgesOnViewport&&W,H=[];if(H[e.NODE]=!c[e.NODE]&&d&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,H[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),H[e.DRAG]=!c[e.DRAG]&&d&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,H[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||i||a||H[e.NODE]){var J=d&&!H[e.NODE]&&h!==1,N=n||(J?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),le=d&&!J?"motionBlur":void 0;I(N,le),Y?e.drawCachedNodes(N,k.nondrag,u,U):e.drawLayeredElements(N,k.nondrag,u,U),e.debug&&e.drawDebugPoints(N,k.nondrag),!i&&!d&&(c[e.NODE]=!1)}if(!a&&(c[e.DRAG]||i||H[e.DRAG])){var J=d&&!H[e.DRAG]&&h!==1,N=n||(J?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);I(N,d&&!J?"motionBlur":void 0),Y?e.drawCachedNodes(N,k.drag,u,U):e.drawCachedElements(N,k.drag,u,U),e.debug&&e.drawDebugPoints(N,k.drag),!i&&!d&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,I),d&&h!==1){var fe=l.contexts[e.NODE],ue=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],ge=l.contexts[e.DRAG],ve=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],de=function(Q,re,se){Q.setTransform(1,0,0,1,0,0),se||!y?Q.clearRect(0,0,e.canvasWidth,e.canvasHeight):R(Q,0,0,e.canvasWidth,e.canvasHeight);var pe=h;Q.drawImage(re,0,0,e.canvasWidth*pe,e.canvasHeight*pe,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||H[e.NODE])&&(de(fe,ue,H[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||H[e.DRAG])&&(de(ge,ve,H[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=w,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),d&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},TW)),n||t.emit("render")};var up;sa.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,i=t.data,a=n.style(),o=r.drawOnlyNodeLayer,s=r.drawAllLayers,u=i.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!o&&u[t.SELECT_BOX]&&!s){var c=l||i.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),d=a.core("selection-box-border-width").value/f;c.lineWidth=d,c.fillStyle="rgba("+a.core("selection-box-color").value[0]+","+a.core("selection-box-color").value[1]+","+a.core("selection-box-color").value[2]+","+a.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),d>0&&(c.strokeStyle="rgba("+a.core("selection-box-border-color").value[0]+","+a.core("selection-box-border-color").value[1]+","+a.core("selection-box-border-color").value[2]+","+a.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(i.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),h=i.bgActivePosistion;c.fillStyle="rgba("+a.core("active-bg-color").value[0]+","+a.core("active-bg-color").value[1]+","+a.core("active-bg-color").value[2]+","+a.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,a.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var p=Math.round(1e3/v),g="1 frame = "+v+" ms = "+p+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!up){var y=c.measureText(g);up=y.actualBoundingBoxAscent}c.fillText(g,0,up);var b=60;c.strokeRect(0,up+10,250,20),c.fillRect(0,up+10,250*Math.min(p/b,1),20)}s||(u[t.SELECT_BOX]=!1)}};function Rk(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function AW(r,e,t){var n=Rk(r,r.VERTEX_SHADER,e),i=Rk(r,r.FRAGMENT_SHADER,t),a=r.createProgram();if(r.attachShader(a,n),r.attachShader(a,i),r.linkProgram(a),!r.getProgramParameter(a,r.LINK_STATUS))throw new Error("Could not initialize shaders");return a}function PW(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function bT(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function RW(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function kW(r,e,t,n,i){var a=n*t+e.x,o=i*t+e.y;return o=Math.round(r.canvasHeight-o),[a,o]}function IW(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function DW(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function tf(r,e,t){var n=r[0]/255,i=r[1]/255,a=r[2]/255,o=e,s=t||new Array(4);return s[0]=n*o,s[1]=i*o,s[2]=a*o,s[3]=o,s}function Jd(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function MW(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function LW(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function Nj(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function jj(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function NW(r,e,t,n,i,a){switch(e){case r.FLOAT:return new Float32Array(t.buffer,a*n,i);case r.INT:return new Int32Array(t.buffer,a*n,i)}}function jW(r,e,t,n){var i=Nj(r,e),a=Hn(i,2),o=a[0],s=a[1],u=jj(r,s,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),s===r.FLOAT?r.vertexAttribPointer(t,o,s,!1,0,0):s===r.INT&&r.vertexAttribIPointer(t,o,s,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function Os(r,e,t,n){var i=Nj(r,t),a=Hn(i,3),o=a[0],s=a[1],u=a[2],l=jj(r,s,e*o),c=o*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),s===r.FLOAT?r.vertexAttribPointer(n,o,s,!1,c,0):s===r.INT&&r.vertexAttribIPointer(n,o,s,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var d=new Array(e),h=0;h<e;h++)d[h]=NW(r,s,l,c,o,h);return f.dataArray=l,f.stride=c,f.size=o,f.getView=function(v){return d[v]},f.setPoint=function(v,p,g){var y=d[v];y[0]=p,y[1]=g},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*o):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function FW(r,e,t){for(var n=9,i=new Float32Array(e*n),a=new Array(e),o=0;o<e;o++){var s=o*n*4;a[o]=new Float32Array(i.buffer,s,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,i.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,3*12,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return a[f]},u.setData=function(f,d){a[d].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,i)},u}function BW(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,i){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,i,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var kk=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function Q1(){var r=new kk(9);return kk!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Ik(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function UW(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=t[0],h=t[1],v=t[2],p=t[3],g=t[4],y=t[5],b=t[6],m=t[7],_=t[8];return r[0]=d*n+h*o+v*l,r[1]=d*i+h*s+v*c,r[2]=d*a+h*u+v*f,r[3]=p*n+g*o+y*l,r[4]=p*i+g*s+y*c,r[5]=p*a+g*u+y*f,r[6]=b*n+m*o+_*l,r[7]=b*i+m*s+_*c,r[8]=b*a+m*u+_*f,r}function Ib(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=t[0],h=t[1];return r[0]=n,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=u,r[6]=d*n+h*o+l,r[7]=d*i+h*s+c,r[8]=d*a+h*u+f,r}function Dk(r,e,t){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=Math.sin(t),h=Math.cos(t);return r[0]=h*n+d*o,r[1]=h*i+d*s,r[2]=h*a+d*u,r[3]=h*o-d*n,r[4]=h*s-d*i,r[5]=h*u-d*a,r[6]=l,r[7]=c,r[8]=f,r}function WC(r,e,t){var n=t[0],i=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=i*e[3],r[4]=i*e[4],r[5]=i*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function zW(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var qW=function(){function r(e,t,n,i){nc(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(e,t,t),this.scratch=i(e,t,this.texHeight,"scratch")}return ic(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,i=t.h,a=this.texHeight,o=this.texSize,s=a/i,u=n*s,l=i*s;return u>o&&(s=o/n,u=n*s,l=i*s),{scale:s,texW:u,texH:l}}},{key:"draw",value:function(t,n,i){var a=this;if(this.locked)throw new Error("can't draw, atlas is locked");var o=this.texSize,s=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,d=l.texH,h=function(m,_){if(i&&_){var x=_.context,C=m.x,w=m.row,O=C,A=u*w;x.save(),x.translate(O,A),x.scale(c,c),i(x,n),x.restore()}},v=[null,null],p=function(){h(a.freePointer,a.canvas),v[0]={x:a.freePointer.x,y:a.freePointer.row*u,w:f,h:d},v[1]={x:a.freePointer.x+f,y:a.freePointer.row*u,w:0,h:d},a.freePointer.x+=f,a.freePointer.x==o&&(a.freePointer.x=0,a.freePointer.row++)},g=function(){var m=a.scratch,_=a.canvas;m.clear(),h({x:0,row:0},m);var x=o-a.freePointer.x,C=f-x,w=u;{var O=a.freePointer.x,A=a.freePointer.row*u,k=x;_.context.drawImage(m,0,0,k,w,O,A,k,w),v[0]={x:O,y:A,w:k,h:d}}{var R=x,I=(a.freePointer.row+1)*u,M=C;_&&_.context.drawImage(m,R,0,M,w,0,I,M,w),v[1]={x:0,y:I,w:M,h:d}}a.freePointer.x=C,a.freePointer.row++},y=function(){a.freePointer.x=0,a.freePointer.row++};if(this.freePointer.x+f<=o)p();else{if(this.freePointer.row>=s-1)return!1;this.freePointer.x===o?(y(),p()):this.enableWrapping?g():(y(),p())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,i=this.texRows,a=this.getScale(t),o=a.texW;return this.freePointer.x+o>n?this.freePointer.row<i-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=LW(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),GW=function(){function r(e,t,n,i){nc(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return ic(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas;return new qW(t,n,i,a)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,i=this.texRows,a=this.createTextureCanvas,o=Math.floor(n/i);this.scratch=a(t,n,o,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,i){var a=this.styleKeyToAtlas.get(t);return a||(a=this.atlases[this.atlases.length-1],(!a||!a.canFit(n))&&(a&&a.lock(),a=this._createAtlas(),this.atlases.push(a)),a.draw(t,n,i),this.styleKeyToAtlas.set(t,a)),a}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var i=[],a=new Map,o=null,s=Sa(this.atlases),u;try{var l=function(){var f=u.value,d=f.getKeys(),h=VW(n,d);if(h.size===0)return i.push(f),d.forEach(function(x){return a.set(x,f)}),1;o||(o=t._createAtlas(),i.push(o));var v=Sa(d),p;try{for(v.s();!(p=v.n()).done;){var g=p.value;if(!h.has(g)){var y=f.getOffsets(g),b=Hn(y,2),m=b[0],_=b[1];o.canFit({w:m.w+_.w,h:m.h})||(o.lock(),o=t._createAtlas(),i.push(o)),f.canvas&&(t._copyTextureToNewAtlas(g,f,o),a.set(g,o))}}}catch(x){v.e(x)}finally{v.f()}f.dispose()};for(s.s();!(u=s.n()).done;)l()}catch(c){s.e(c)}finally{s.f()}this.atlases=i,this.styleKeyToAtlas=a,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(t,n,i){var a=n.getOffsets(t),o=Hn(a,2),s=o[0],u=o[1];if(u.w===0)i.draw(t,s,function(d){d.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,s.x,s.y,s.w,s.h,0,0,s.w,s.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,s.w,0,u.w,u.h);var c=s.w+u.w,f=s.h;i.draw(t,{w:c,h:f},function(d){d.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function VW(r,e){return r.intersection?r.intersection(e):new Set(qb(r).filter(function(t){return e.has(t)}))}var $W=function(){function r(e,t){nc(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return ic(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var i=this.globalOptions,a=i.webglTexSize,o=i.createTextureCanvas,s=n.texRows,u=this._cacheScratchCanvas(o),l=new GW(this.r,a,s,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var i=n.collection;if(!this.collections.has(i))throw new Error("invalid atlas collection name '".concat(i,"'"));var a=this.collections.get(i),o=jt({type:t,atlasCollection:a},n);this.renderTypes.set(t,o)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,i=-1,a=null;return function(o,s,u,l){return l?((!a||s!=n||u!=i)&&(n=s,i=u,a=t(o,s,u)),a):t(o,s,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=i.forceRedraw,o=a===void 0?!1:a,s=i.filterEle,u=s===void 0?function(){return!0}:s,l=i.filterType,c=l===void 0?function(){return!0}:l,f=!1,d=!1,h=Sa(t),v;try{for(h.s();!(v=h.n()).done;){var p=v.value;if(u(p)){var g=Sa(this.renderTypes.values()),y;try{var b=function(){var _=y.value,x=_.type;if(c(x)){var C=n.collections.get(_.collection),w=_.getKey(p),O=Array.isArray(w)?w:[w];if(o)O.forEach(function(I){return C.markKeyForGC(I)}),d=!0;else{var A=_.getID?_.getID(p):p.id(),k=n._key(x,A),R=n.typeAndIdToKey.get(k);R!==void 0&&!DW(O,R)&&(f=!0,n.typeAndIdToKey.delete(k),R.forEach(function(I){return C.markKeyForGC(I)}))}}};for(g.s();!(y=g.n()).done;)b()}catch(m){g.e(m)}finally{g.f()}}}}catch(m){h.e(m)}finally{h.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var t=Sa(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var i=n.value;i.gc()}}catch(a){t.e(a)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,i,a){var o=this.renderTypes.get(n),s=this.collections.get(o.collection),u=!1,l=s.draw(a,i,function(d){o.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,i.w,i.h),d.clip(),o.drawElement(d,t,i,!0,!0),d.restore()):o.drawElement(d,t,i,!0,!0),u=!0});if(u){var c=o.getID?o.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(a):this.typeAndIdToKey.set(f,[a])}return l}},{key:"getAtlasInfo",value:function(t,n){var i=this,a=this.renderTypes.get(n),o=a.getKey(t),s=Array.isArray(o)?o:[o];return s.map(function(u){var l=a.getBoundingBox(t,u),c=i.getOrCreateAtlas(t,n,l,u),f=c.getOffsets(u),d=Hn(f,2),h=d[0],v=d[1];return{atlas:c,tex:h,tex1:h,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=Sa(this.collections),i;try{for(n.s();!(i=n.n()).done;){var a=Hn(i.value,2),o=a[0],s=a[1],u=s.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:o,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])}(),WW=function(){function r(e){nc(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return ic(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])}(),HW=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,YW=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,XW=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,KW=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,zp={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},e0={IGNORE:1,USE_BB:2},J1=0,Mk=1,Lk=2,ex=3,eh=4,Vm=5,lp=6,cp=7,ZW=function(){function r(e,t,n){nc(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=PW,this.atlasManager=new $W(e,n),this.batchManager=new WW(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(zp.SCREEN),this.pickingProgram=this._createShaderProgram(zp.PICKING),this.vao=this._createVAO()}return ic(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.type,a=this.atlasManager;return i?a.invalidate(t,{filterType:function(s){return s===i},forceRedraw:!0}):a.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,i=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(J1,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(eh," || aVertType == ").concat(cp,` 
             || aVertType == `).concat(Vm," || aVertType == ").concat(lp,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Mk,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(Lk,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(ex,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),a=this.batchManager.getIndexArray(),o=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(a.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(HW,`
      `).concat(YW,`
      `).concat(XW,`
      `).concat(KW,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(J1,`) {
          // look up the texel from the texture unit
          `).concat(a.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(ex,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(eh,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(eh," || vVertType == ").concat(cp,` 
          || vVertType == `).concat(Vm," || vVertType == ").concat(lp,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(eh,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(cp,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(cp,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),s=AW(n,i,o);s.aPosition=n.getAttribLocation(s,"aPosition"),s.aIndex=n.getAttribLocation(s,"aIndex"),s.aVertType=n.getAttribLocation(s,"aVertType"),s.aTransform=n.getAttribLocation(s,"aTransform"),s.aAtlasId=n.getAttribLocation(s,"aAtlasId"),s.aTex=n.getAttribLocation(s,"aTex"),s.aPointAPointB=n.getAttribLocation(s,"aPointAPointB"),s.aPointCPointD=n.getAttribLocation(s,"aPointCPointD"),s.aLineWidth=n.getAttribLocation(s,"aLineWidth"),s.aColor=n.getAttribLocation(s,"aColor"),s.aCornerRadius=n.getAttribLocation(s,"aCornerRadius"),s.aBorderColor=n.getAttribLocation(s,"aBorderColor"),s.uPanZoomMatrix=n.getUniformLocation(s,"uPanZoomMatrix"),s.uAtlasSize=n.getUniformLocation(s,"uAtlasSize"),s.uBGColor=n.getUniformLocation(s,"uBGColor"),s.uZoom=n.getUniformLocation(s,"uZoom"),s.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)s.uTextures.push(n.getUniformLocation(s,"uTexture".concat(u)));return s}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,i=this.gl,a=this.program,o=i.createVertexArray();return i.bindVertexArray(o),jW(i,"vec2",a.aPosition,t),this.transformBuffer=FW(i,n,a.aTransform),this.indexBuffer=Os(i,n,"vec4",a.aIndex),this.vertTypeBuffer=Os(i,n,"int",a.aVertType),this.atlasIdBuffer=Os(i,n,"int",a.aAtlasId),this.texBuffer=Os(i,n,"vec4",a.aTex),this.pointAPointBBuffer=Os(i,n,"vec4",a.aPointAPointB),this.pointCPointDBuffer=Os(i,n,"vec4",a.aPointCPointD),this.lineWidthBuffer=Os(i,n,"vec2",a.aLineWidth),this.colorBuffer=Os(i,n,"vec4",a.aColor),this.cornerRadiusBuffer=Os(i,n,"vec4",a.aCornerRadius),this.borderColorBuffer=Os(i,n,"vec4",a.aBorderColor),i.bindVertexArray(null),o}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return kl(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zp.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,i){var a=this.atlasManager,o=this.batchManager,s=a.getRenderTypeOpts(i);if(this._isVisible(t,s)&&!(t.isEdge()&&!this._isValidEdge(t))){if(this.renderTarget.picking&&s.getTexPickingMode){var u=s.getTexPickingMode(t);if(u===e0.IGNORE)return;if(u==e0.USE_BB){this.drawPickingRectangle(t,n,i);return}}var l=a.getAtlasInfo(t,i),c=Sa(l),f;try{for(c.s();!(f=c.n()).done;){var d=f.value,h=d.atlas,v=d.tex1,p=d.tex2;o.canAddToCurrentBatch(h)||this.endBatch();for(var g=o.getAtlasIndexForBatch(h),y=0,b=[[v,!0],[p,!1]];y<b.length;y++){var m=Hn(b[y],2),_=m[0],x=m[1];if(_.w!=0){var C=this.instanceCount;this.vertTypeBuffer.getView(C)[0]=J1;var w=this.indexBuffer.getView(C);Jd(n,w);var O=this.atlasIdBuffer.getView(C);O[0]=g;var A=this.texBuffer.getView(C);A[0]=_.x,A[1]=_.y,A[2]=_.w,A[3]=_.h;var k=this.transformBuffer.getMatrixView(C);this.setTransformMatrix(t,k,s,d,x),this.instanceCount++,x||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(R){c.e(R)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=0;if(i.shapeProps&&i.shapeProps.padding&&(s=t.pstyle(i.shapeProps.padding).pfValue),a){var u=a.bb,l=a.tex1,c=a.tex2,f=l.w/(l.w+c.w);o||(f=1-f);var d=this._getAdjustedBB(u,s,o,f);this._applyTransformMatrix(n,d,i,t)}else{var h=i.getBoundingBox(t),v=this._getAdjustedBB(h,s,!0,1);this._applyTransformMatrix(n,v,i,t)}}},{key:"_applyTransformMatrix",value:function(t,n,i,a){var o,s;Ik(t);var u=i.getRotation?i.getRotation(a):0;if(u!==0){var l=i.getRotationPoint(a),c=l.x,f=l.y;Ib(t,t,[c,f]),Dk(t,t,u);var d=i.getRotationOffset(a);o=d.x+(n.xOffset||0),s=d.y+(n.yOffset||0)}else o=n.x1,s=n.y1;Ib(t,t,[o,s]),WC(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,i,a){var o=t.x1,s=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(o-=n,s-=n,u+=2*n,l+=2*n);var f=0,d=u*a;return i&&a<1?u=d:!i&&a<1&&(f=u-d,o+=f,u=d),{x1:o,y1:s,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,i){var a=this.atlasManager.getRenderTypeOpts(i),o=this.instanceCount;this.vertTypeBuffer.getView(o)[0]=eh;var s=this.indexBuffer.getView(o);Jd(n,s);var u=this.colorBuffer.getView(o);tf([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(t,l,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,i){var a=this.simpleShapeOptions.get(i);if(this._isVisible(t,a)){var o=a.shapeProps,s=this._getVertTypeForShape(t,o.shape);if(s===void 0||a.isSimple&&!a.isSimple(t)){this.drawTexture(t,n,i);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=s,s===Vm||s===lp){var l=a.getBoundingBox(t),c=this._getCornerRadius(t,o.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,s===lp&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(u);Jd(n,d);var h=t.pstyle(o.color).value,v=t.pstyle(o.opacity).value,p=this.colorBuffer.getView(u);tf(h,v,p);var g=this.lineWidthBuffer.getView(u);if(g[0]=0,g[1]=0,o.border){var y=t.pstyle("border-width").value;if(y>0){var b=t.pstyle("border-color").value,m=t.pstyle("border-opacity").value,_=this.borderColorBuffer.getView(u);tf(b,m,_);var x=t.pstyle("border-position").value;if(x==="inside")g[0]=0,g[1]=-y;else if(x==="outside")g[0]=y,g[1]=0;else{var C=y/2;g[0]=C,g[1]=-C}}}var w=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,w,a),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var i=t.pstyle(n).value;switch(i){case"rectangle":return eh;case"ellipse":return cp;case"roundrectangle":case"round-rectangle":return Vm;case"bottom-round-rectangle":return lp;default:return}}},{key:"_getCornerRadius",value:function(t,n,i){var a=i.w,o=i.h;if(t.pstyle(n).value==="auto")return Yl(a,o);var s=t.pstyle(n).pfValue,u=a/2,l=o/2;return Math.min(s,l,u)}},{key:"drawEdgeArrow",value:function(t,n,i){if(t.visible()){var a=t._private.rscratch,o,s,u;if(i==="source"?(o=a.arrowStartX,s=a.arrowStartY,u=a.srcArrowAngle):(o=a.arrowEndX,s=a.arrowEndY,u=a.tgtArrowAngle),!(isNaN(o)||o==null||isNaN(s)||s==null||isNaN(u)||u==null)){var l=t.pstyle(i+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(i+"-arrow-color").value,f=t.pstyle("opacity").value,d=t.pstyle("line-opacity").value,h=f*d,v=t.pstyle("width").pfValue,p=t.pstyle("arrow-scale").value,g=this.r.getArrowWidth(v,p),y=this.instanceCount,b=this.transformBuffer.getMatrixView(y);Ik(b),Ib(b,b,[o,s]),WC(b,b,[g,g]),Dk(b,b,u),this.vertTypeBuffer.getView(y)[0]=ex;var m=this.indexBuffer.getView(y);Jd(n,m);var _=this.colorBuffer.getView(y);tf(c,h,_),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var i=this._getEdgePoints(t);if(i){var a=t.pstyle("opacity").value,o=t.pstyle("line-opacity").value,s=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=a*o;if(i.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),i.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=Mk;var f=this.indexBuffer.getView(c);Jd(n,f);var d=this.colorBuffer.getView(c);tf(u,l,d);var h=this.lineWidthBuffer.getView(c);h[0]=s;var v=this.pointAPointBBuffer.getView(c);v[0]=i[0],v[1]=i[1],v[2]=i[2],v[3]=i[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var p=0;p<i.length-2;p+=2){var g=this.instanceCount;this.vertTypeBuffer.getView(g)[0]=Lk;var y=this.indexBuffer.getView(g);Jd(n,y);var b=this.colorBuffer.getView(g);tf(u,l,b);var m=this.lineWidthBuffer.getView(g);m[0]=s;var _=i[p-2],x=i[p-1],C=i[p],w=i[p+1],O=i[p+2],A=i[p+3],k=i[p+4],R=i[p+5];p==0&&(_=2*C-O+.001,x=2*w-A+.001),p==i.length-4&&(k=2*O-C+.001,R=2*A-w+.001);var I=this.pointAPointBBuffer.getView(g);I[0]=_,I[1]=x,I[2]=C,I[3]=w;var M=this.pointCPointDBuffer.getView(g);M[0]=O,M[1]=A,M[2]=k,M[3]=R,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(t){var n=t._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(this._isValidEdge(t)){var i=n.allpts;if(i.length==4)return i;var a=this._getNumSegments(t);return this._getCurveSegmentPoints(i,a)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var i=Array((n+1)*2),a=0;a<=n;a++)if(a==0)i[0]=t[0],i[1]=t[1];else if(a==n)i[a*2]=t[t.length-2],i[a*2+1]=t[t.length-1];else{var o=a/n;this._setCurvePoint(t,o,i,a*2)}return i}},{key:"_setCurvePoint",value:function(t,n,i,a){if(t.length<=2)i[a]=t[0],i[a+1]=t[1];else{for(var o=Array(t.length-2),s=0;s<o.length;s+=2){var u=(1-n)*t[s]+n*t[s+2],l=(1-n)*t[s+1]+n*t[s+3];o[s]=u,o[s+1]=l}return this._setCurvePoint(o,n,i,a)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,i=this.vertexCount,a=this.instanceCount;if(a!==0){var o=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(o),t.bindVertexArray(n);var s=Sa(this.buffers),u;try{for(s.s();!(u=s.n()).done;){var l=u.value;l.bufferSubData(a)}}catch(v){s.e(v)}finally{s.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var d=0;d<c.length;d++)t.activeTexture(t.TEXTURE0+d),t.bindTexture(t.TEXTURE_2D,c[d].texture),t.uniform1i(o.uTextures[d],d);t.uniform1f(o.uZoom,RW(this.r)),t.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var h=tf(this.bgColor,1);t.uniform4fv(o.uBGColor,h),t.drawArraysInstanced(t.TRIANGLES,0,i,a),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:a,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(o,s){return o+s.atlasCount},0),i=this.batchDebugInfo,a=i.reduce(function(o,s){return o+s.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:i.length,batchInfo:i,totalInstances:a}}}])}(),Fj={};Fj.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=QW(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=BW(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new ZW(t,n,r);var i=function(f){return function(d){return t.getTextAngle(d,f)}},a=function(f){return function(d){var h=d.pstyle(f);return h&&h.value}},o=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},s=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?e0.USE_BB:e0.IGNORE},u=function(f){var d=f.position(),h=d.x,v=d.y,p=f.outerWidth(),g=f.outerHeight();return{w:p,h:g,x1:h-p/2,y1:v-g/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:IW,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:o("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:o("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:s,getKey:tx(e.getLabelKey,null),getBoundingBox:rx(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:i(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:a("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:s,getKey:tx(e.getSourceLabelKey,"source"),getBoundingBox:rx(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:i("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:a("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:s,getKey:tx(e.getTargetLabelKey,"target"),getBoundingBox:rx(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:i("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:a("target-label")});var l=Yg(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,f){var d=!1;f&&f.length>0&&(d|=t.drawing.invalidate(f)),d&&l()}),JW(t)};function QW(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return d3(t)}function Bj(r,e){var t=r._private.rscratch;return xa(t,"labelWrapCachedLines",e)||[]}var tx=function(e,t){return function(n){var i=e(n),a=Bj(n,t);return a.length>1?a.map(function(o,s){return"".concat(i,"_").concat(s)}):i}},rx=function(e,t){return function(n,i){var a=e(n);if(typeof i=="string"){var o=i.indexOf("_");if(o>0){var s=Number(i.substring(o+1)),u=Bj(n,t),l=a.h/u.length,c=l*s,f=a.y1+c;return{x1:a.x1,w:a.w,y1:f,h:l,yOffset:c}}}return a}};function JW(r){{var e=r.render;r.render=function(a){a=a||{};var o=r.cy;r.webgl&&(o.zoom()>kj?(eH(r),e.call(r,a)):(tH(r),zj(r,a,zp.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(a){t.call(r,a),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(a,o,s,u){return sH(r,a,o)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var i=r.notify;r.notify=function(a,o){i.call(r,a,o),a==="viewport"||a==="bounds"?r.pickingFrameBuffer.needsDraw=!0:a==="background"&&r.drawing.invalidate(o,{type:"node-body"})}}}function eH(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function tH(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function rH(r){var e=r.canvasWidth,t=r.canvasHeight,n=bT(r),i=n.pan,a=n.zoom,o=Q1();Ib(o,o,[i.x,i.y]),WC(o,o,[a,a]);var s=Q1();zW(s,e,t);var u=Q1();return UW(u,s,o),u}function Uj(r,e){var t=r.canvasWidth,n=r.canvasHeight,i=bT(r),a=i.pan,o=i.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(a.x,a.y),e.scale(o,o)}function nH(r,e){r.drawSelectionRectangle(e,function(t){return Uj(r,t)})}function iH(r){var e=r.data.contexts[r.NODE];e.save(),Uj(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function aH(r){var e=function(i,a,o){for(var s=i.atlasManager.getAtlasCollection(a),u=r.data.contexts[r.NODE],l=s.atlases,c=0;c<l.length;c++){var f=l[c],d=f.canvas;if(d){var h=d.width,v=d.height,p=h*c,g=d.height*o,y=.4;u.save(),u.scale(y,y),u.drawImage(d,p,g),u.strokeStyle="black",u.rect(p,g,h,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function oH(r,e,t,n,i){var a,o,s,u,l=bT(r),c=l.pan,f=l.zoom;{var d=kW(r,c,f,e,t),h=Hn(d,2),v=h[0],p=h[1],g=6;a=v-g/2,o=p-g/2,s=g,u=g}if(s===0||u===0)return[];var y=r.data.contexts[r.WEBGL];y.bindFramebuffer(y.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(y.viewport(0,0,y.canvas.width,y.canvas.height),zj(r,null,zp.PICKING),r.pickingFrameBuffer.needsDraw=!1);var b=s*u,m=new Uint8Array(b*4);y.readPixels(a,o,s,u,y.RGBA,y.UNSIGNED_BYTE,m),y.bindFramebuffer(y.FRAMEBUFFER,null);for(var _=new Set,x=0;x<b;x++){var C=m.slice(x*4,x*4+4),w=MW(C)-1;w>=0&&_.add(w)}return _}function sH(r,e,t){var n=oH(r,e,t),i=r.getCachedZSortedEles(),a,o,s=Sa(n),u;try{for(s.s();!(u=s.n()).done;){var l=u.value,c=i[l];if(!a&&c.isNode()&&(a=c),!o&&c.isEdge()&&(o=c),a&&o)break}}catch(f){s.e(f)}finally{s.f()}return[a,o].filter(Boolean)}function nx(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function zj(r,e,t){var n;r.webglDebug&&(n=performance.now());var i=r.drawing,a=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&nH(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var o=r.data.contexts[r.WEBGL];t.screen?(o.clearColor(0,0,0,0),o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.viewport(0,0,o.canvas.width,o.canvas.height);var s=rH(r),u=r.getCachedZSortedEles();if(a=u.length,i.startFrame(s,t),t.screen){for(var l=0;l<u.nondrag.length;l++)nx(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)nx(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)nx(r,f,u[f]);i.endFrame(),t.screen&&r.webglDebugShowAtlases&&(iH(r),aH(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var d=performance.now(),h=!1,v=Math.ceil(d-n),p=i.getDebugInfo(),g=["".concat(a," elements"),"".concat(p.totalInstances," instances"),"".concat(p.batchCount," batches"),"".concat(p.totalAtlases," atlases"),"".concat(p.wrappedCount," wrapped textures"),"".concat(p.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(g));else{console.log("WebGL (".concat(t.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(g)),console.log("Texture Atlases Used:");var y=p.atlasInfo,b=Sa(y),m;try{for(b.s();!(m=b.n()).done;){var _=m.value;console.log("  ".concat(_.type,": ").concat(_.keyCount," keys, ").concat(_.atlasCount," atlases"))}}catch(x){b.e(x)}finally{b.f()}console.log("")}}r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,i.gc())}var sc={};sc.drawPolygonPath=function(r,e,t,n,i,a){var o=n/2,s=i/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*a[0],t+s*a[1]);for(var u=1;u<a.length/2;u++)r.lineTo(e+o*a[u*2],t+s*a[u*2+1]);r.closePath()};sc.drawRoundPolygonPath=function(r,e,t,n,i,a,o){o.forEach(function(s){return xj(r,s)}),r.closePath()};sc.drawRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=a==="auto"?Yl(n,i):Math.min(a,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,u),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.arcTo(e-o,t-s,e,t-s,u),r.lineTo(e,t-s),r.closePath()};sc.drawBottomRoundRectanglePath=function(r,e,t,n,i,a){var o=n/2,s=i/2,u=a==="auto"?Yl(n,i):a;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,u),r.arcTo(e-o,t+s,e-o,t,u),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};sc.drawCutRectanglePath=function(r,e,t,n,i,a,o){var s=n/2,u=i/2,l=o==="auto"?aT():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+l,t-u),r.lineTo(e+s-l,t-u),r.lineTo(e+s,t-u+l),r.lineTo(e+s,t+u-l),r.lineTo(e+s-l,t+u),r.lineTo(e-s+l,t+u),r.lineTo(e-s,t+u-l),r.lineTo(e-s,t-u+l),r.closePath()};sc.drawBarrelPath=function(r,e,t,n,i){var a=n/2,o=i/2,s=e-a,u=e+a,l=t-o,c=t+o,f=IC(n,i),d=f.widthOffset,h=f.heightOffset,v=f.ctrlPtOffsetPct*d;r.beginPath&&r.beginPath(),r.moveTo(s,l+h),r.lineTo(s,c-h),r.quadraticCurveTo(s+v,c,s+d,c),r.lineTo(u-d,c),r.quadraticCurveTo(u-v,c,u,c-h),r.lineTo(u,l+h),r.quadraticCurveTo(u-v,l,u-d,l),r.lineTo(s+d,l),r.quadraticCurveTo(s+v,l,s,l+h),r.closePath()};var Nk=Math.sin(0),jk=Math.cos(0),HC={},YC={},qj=Math.PI/40;for(var th=0*Math.PI;th<2*Math.PI;th+=qj)HC[th]=Math.sin(th),YC[th]=Math.cos(th);sc.drawEllipsePath=function(r,e,t,n,i){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,u=i/2,l=0*Math.PI;l<2*Math.PI;l+=qj)a=e-s*HC[l]*Nk+s*YC[l]*jk,o=t+u*YC[l]*Nk+u*HC[l]*jk,l===0?r.moveTo(a,o):r.lineTo(a,o);r.closePath()};var ey={};ey.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};ey.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),i=this.findContainerClientCoords(),a=r.full?Math.ceil(n.w):i[2],o=r.full?Math.ceil(n.h):i[3],s=at(r.maxWidth)||at(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)a*=r.scale,o*=r.scale,l=r.scale;else if(s){var c=1/0,f=1/0;at(r.maxWidth)&&(c=l*r.maxWidth/a),at(r.maxHeight)&&(f=l*r.maxHeight/o),l=Math.min(c,f),a*=l,o*=l}s||(a*=u,o*=u,l*=u);var d=document.createElement("canvas");d.width=a,d.height=o,d.style.width=a+"px",d.style.height=o+"px";var h=d.getContext("2d");if(a>0&&o>0){h.clearRect(0,0,a,o),h.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)h.translate(-n.x1*l,-n.y1*l),h.scale(l,l),this.drawElements(h,v),h.scale(1/l,1/l),h.translate(n.x1*l,n.y1*l);else{var p=e.pan(),g={x:p.x*l,y:p.y*l};l*=e.zoom(),h.translate(g.x,g.y),h.scale(l,l),this.drawElements(h,v),h.scale(1/l,1/l),h.translate(-g.x,-g.y)}r.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=r.bg,h.rect(0,0,a,o),h.fill())}return d};function uH(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:e})}function Fk(r){var e=r.indexOf(",");return r.substr(e+1)}function Gj(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Gh(function(i,a){try{e.toBlob(function(o){o!=null?i(o):a(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){a(o)}});case"blob":return uH(Fk(n()),t);case"base64":return Fk(n());case"base64uri":default:return n()}}ey.png=function(r){return Gj(r,this.bufferCanvasImage(r),"image/png")};ey.jpg=function(r){return Gj(r,this.bufferCanvasImage(r),"image/jpeg")};var Vj={};Vj.nodeShapeImpl=function(r,e,t,n,i,a,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,i,a);case"polygon":return this.drawPolygonPath(e,t,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,i,a,s);case"barrel":return this.drawBarrelPath(e,t,n,i,a)}};var lH=$j,sr=$j.prototype;sr.CANVAS_LAYERS=3;sr.SELECT_BOX=0;sr.DRAG=1;sr.NODE=2;sr.WEBGL=3;sr.CANVAS_TYPES=["2d","2d","2d","webgl2"];sr.BUFFER_COUNT=3;sr.TEXTURE_BUFFER=0;sr.MOTIONBLUR_BUFFER_NODE=1;sr.MOTIONBLUR_BUFFER_DRAG=2;function $j(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(sr.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(sr.CANVAS_LAYERS),contexts:new Array(sr.CANVAS_LAYERS),canvasNeedsRedraw:new Array(sr.CANVAS_LAYERS),bufferCanvases:new Array(sr.BUFFER_COUNT),bufferContexts:new Array(sr.CANVAS_LAYERS)};var i="-webkit-tap-highlight-color",a="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var o=e.data.canvasContainer.style;e.data.canvasContainer.style[i]=a,o.position="relative",o.zIndex="0",o.overflow="hidden";var s=r.cy.container();s.appendChild(e.data.canvasContainer),s.style[i]=a;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};n9()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<sr.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=sr.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||pn("Could not create canvas of type "+f),Object.keys(u).forEach(function(ie){c.style[ie]=u[ie]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(sr.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[sr.NODE].setAttribute("data-id","layer"+sr.NODE+"-node"),e.data.canvases[sr.SELECT_BOX].setAttribute("data-id","layer"+sr.SELECT_BOX+"-selectbox"),e.data.canvases[sr.DRAG].setAttribute("data-id","layer"+sr.DRAG+"-drag"),e.data.canvases[sr.WEBGL]&&e.data.canvases[sr.WEBGL].setAttribute("data-id","layer"+sr.WEBGL+"-webgl");for(var l=0;l<sr.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var d=oa(),h=function(Q){return{x:(Q.x1+Q.x2)/2,y:(Q.y1+Q.y2)/2}},v=function(Q){return{x:-Q.w/2,y:-Q.h/2}},p=function(Q){var re=Q[0]._private,se=re.oldBackgroundTimestamp===re.backgroundTimestamp;return!se},g=function(Q){return Q[0]._private.nodeKey},y=function(Q){return Q[0]._private.labelStyleKey},b=function(Q){return Q[0]._private.sourceLabelStyleKey},m=function(Q){return Q[0]._private.targetLabelStyleKey},_=function(Q,re,se,pe,Oe){return e.drawElement(Q,re,se,!1,!1,Oe)},x=function(Q,re,se,pe,Oe){return e.drawElementText(Q,re,se,pe,"main",Oe)},C=function(Q,re,se,pe,Oe){return e.drawElementText(Q,re,se,pe,"source",Oe)},w=function(Q,re,se,pe,Oe){return e.drawElementText(Q,re,se,pe,"target",Oe)},O=function(Q){return Q.boundingBox(),Q[0]._private.bodyBounds},A=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.main||d},k=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.source||d},R=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.target||d},I=function(Q,re){return re},M=function(Q){return h(O(Q))},N=function(Q,re,se){var pe=Q?Q+"-":"";return{x:re.x+se.pstyle(pe+"text-margin-x").pfValue,y:re.y+se.pstyle(pe+"text-margin-y").pfValue}},F=function(Q,re,se){var pe=Q[0]._private.rscratch;return{x:pe[re],y:pe[se]}},z=function(Q){return N("",F(Q,"labelX","labelY"),Q)},B=function(Q){return N("source",F(Q,"sourceLabelX","sourceLabelY"),Q)},U=function(Q){return N("target",F(Q,"targetLabelX","targetLabelY"),Q)},W=function(Q){return v(O(Q))},Y=function(Q){return v(k(Q))},H=function(Q){return v(R(Q))},J=function(Q){var re=A(Q),se=v(A(Q));if(Q.isNode()){switch(Q.pstyle("text-halign").value){case"left":se.x=-re.w-(re.leftPad||0);break;case"right":se.x=-(re.rightPad||0);break}switch(Q.pstyle("text-valign").value){case"top":se.y=-re.h-(re.topPad||0);break;case"bottom":se.y=-(re.botPad||0);break}}return se},le=e.data.eleTxrCache=new Op(e,{getKey:g,doesEleInvalidateKey:p,drawElement:_,getBoundingBox:O,getRotationPoint:M,getRotationOffset:W,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),fe=e.data.lblTxrCache=new Op(e,{getKey:y,drawElement:x,getBoundingBox:A,getRotationPoint:z,getRotationOffset:J,isVisible:I}),ue=e.data.slbTxrCache=new Op(e,{getKey:b,drawElement:C,getBoundingBox:k,getRotationPoint:B,getRotationOffset:Y,isVisible:I}),ge=e.data.tlbTxrCache=new Op(e,{getKey:m,drawElement:w,getBoundingBox:R,getRotationPoint:U,getRotationOffset:H,isVisible:I}),ve=e.data.lyrTxrCache=new Ij(e);e.onUpdateEleCalcs(function(Q,re){le.invalidateElements(re),fe.invalidateElements(re),ue.invalidateElements(re),ge.invalidateElements(re),ve.invalidateElements(re);for(var se=0;se<re.length;se++){var pe=re[se]._private;pe.oldBackgroundTimestamp=pe.backgroundTimestamp}});var de=function(Q){for(var re=0;re<Q.length;re++)ve.enqueueElementRefinement(Q[re].ele)};le.onDequeue(de),fe.onDequeue(de),ue.onDequeue(de),ge.onDequeue(de),r.webgl&&e.initWebgl(r,{getStyleKey:g,getLabelKey:y,getSourceLabelKey:b,getTargetLabelKey:m,drawElement:_,drawLabel:x,drawSourceLabel:C,drawTargetLabel:w,getElementBox:O,getLabelBox:A,getSourceLabelBox:k,getTargetLabelBox:R,getElementRotationPoint:M,getElementRotationOffset:W,getLabelRotationPoint:z,getSourceLabelRotationPoint:B,getTargetLabelRotationPoint:U,getLabelRotationOffset:J,getSourceLabelRotationOffset:Y,getTargetLabelRotationOffset:H})}sr.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[sr.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[sr.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[sr.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var cH=typeof Path2D<"u";sr.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};sr.usePaths=function(){return cH&&this.pathsEnabled};sr.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};sr.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};sr.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":ei(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),i=n.document;t=i.createElement("canvas"),t.width=r,t.height=e}return t};[Dj,Us,Mu,mT,Mf,oc,sa,Fj,sc,ey,Vj].forEach(function(r){jt(sr,r)});var fH=[{name:"null",impl:bj},{name:"base",impl:Pj},{name:"canvas",impl:lH}],dH=[{type:"layout",extensions:j$},{type:"renderer",extensions:fH}],Wj={},Hj={};function Yj(r,e,t){var n=t,i=function(O){Gr("Can not register `"+e+"` for `"+r+"` since `"+O+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Rg.prototype[e])return i(e);Rg.prototype[e]=t}else if(r==="collection"){if(Ti.prototype[e])return i(e);Ti.prototype[e]=t}else if(r==="layout"){for(var a=function(O){this.options=O,t.call(this,O),Pr(this._private)||(this._private={}),this._private.cy=O.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(t.prototype),s=[],u=0;u<s.length;u++){var l=s[u];o[l]=o[l]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=t.prototype.stop;o.stop=function(){var w=this.options;if(w&&w.animate){var O=this.animations;if(O)for(var A=0;A<O.length;A++)O[A].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var f=function(O){return O._private.cy},d={addEventFields:function(O,A){A.layout=O,A.cy=f(O),A.target=O},bubble:function(){return!0},parent:function(O){return f(O)}};jt(o,{createEmitter:function(){return this._private.emitter=new I0(d,this),this},emitter:function(){return this._private.emitter},on:function(O,A){return this.emitter().on(O,A),this},one:function(O,A){return this.emitter().one(O,A),this},once:function(O,A){return this.emitter().one(O,A),this},removeListener:function(O,A){return this.emitter().removeListener(O,A),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(O,A){return this.emitter().emit(O,A),this}}),qr.eventAliasesOn(o),n=a}else if(r==="renderer"&&e!=="null"&&e!=="base"){var h=Xj("renderer","base"),v=h.prototype,p=t,g=t.prototype,y=function(){h.apply(this,arguments),p.apply(this,arguments)},b=y.prototype;for(var m in v){var _=v[m],x=g[m]!=null;if(x)return i(m);b[m]=_}for(var C in g)b[C]=g[C];v.clientFunctions.forEach(function(w){b[w]=b[w]||function(){pn("Renderer does not implement `renderer."+w+"()` on its prototype")}}),n=y}else if(r==="__proto__"||r==="constructor"||r==="prototype")return pn(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return h3({map:Wj,keys:[r,e],value:n})}function Xj(r,e){return v3({map:Wj,keys:[r,e]})}function hH(r,e,t,n,i){return h3({map:Hj,keys:[r,e,t,n],value:i})}function vH(r,e,t,n){return v3({map:Hj,keys:[r,e,t,n]})}var XC=function(){if(arguments.length===2)return Xj.apply(null,arguments);if(arguments.length===3)return Yj.apply(null,arguments);if(arguments.length===4)return vH.apply(null,arguments);if(arguments.length===5)return hH.apply(null,arguments);pn("Invalid extension access syntax")};Rg.prototype.extension=XC;dH.forEach(function(r){r.extensions.forEach(function(e){Yj(r.type,e.name,e.impl)})});var t0=function(){if(!(this instanceof t0))return new t0;this.length=0},Of=t0.prototype;Of.instanceString=function(){return"stylesheet"};Of.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Of.css=function(r,e){var t=this.length-1;if(Tt(r))this[t].properties.push({name:r,value:e});else if(Pr(r))for(var n=r,i=Object.keys(n),a=0;a<i.length;a++){var o=i[a],s=n[o];if(s!=null){var u=di.properties[o]||di.properties[x0(o)];if(u!=null){var l=u.name,c=s;this[t].properties.push({name:l,value:c})}}}return this};Of.style=Of.css;Of.generateStyle=function(r){var e=new di(r);return this.appendToStyle(e)};Of.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,i=t.properties;r.selector(n);for(var a=0;a<i.length;a++){var o=i[a];r.css(o.name,o.value)}}return r};var pH="3.33.1",Ql=function(e){if(e===void 0&&(e={}),Pr(e))return new Rg(e);if(Tt(e))return XC.apply(XC,arguments)};Ql.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Ql),r.apply(null,e),this};Ql.warnings=function(r){return w3(r)};Ql.version=pH;Ql.stylesheet=Ql.Stylesheet=t0;var Lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Kj={exports:{}},ix={exports:{}},ax={exports:{}},Bk;function gH(){return Bk||(Bk=1,function(r,e){(function(n,i){r.exports=i()})(Lr,function(){return function(t){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=n,i.i=function(a){return a},i.d=function(a,o,s){i.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=26)}([function(t,n,i){function a(){}a.QUALITY=1,a.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,a.DEFAULT_INCREMENTAL=!1,a.DEFAULT_ANIMATION_ON_LAYOUT=!0,a.DEFAULT_ANIMATION_DURING_LAYOUT=!1,a.DEFAULT_ANIMATION_PERIOD=50,a.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,a.DEFAULT_GRAPH_MARGIN=15,a.NODE_DIMENSIONS_INCLUDE_LABELS=!1,a.SIMPLE_NODE_SIZE=40,a.SIMPLE_NODE_HALF_SIZE=a.SIMPLE_NODE_SIZE/2,a.EMPTY_COMPOUND_NODE_SIZE=40,a.MIN_EDGE_LENGTH=1,a.WORLD_BOUNDARY=1e6,a.INITIAL_WORLD_BOUNDARY=a.WORLD_BOUNDARY/1e3,a.WORLD_CENTER_X=1200,a.WORLD_CENTER_Y=900,t.exports=a},function(t,n,i){var a=i(2),o=i(8),s=i(9);function u(c,f,d){a.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=c,this.target=f}u.prototype=Object.create(a.prototype);for(var l in a)u[l]=a[l];u.prototype.getSource=function(){return this.source},u.prototype.getTarget=function(){return this.target},u.prototype.isInterGraph=function(){return this.isInterGraph},u.prototype.getLength=function(){return this.length},u.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},u.prototype.getBendpoints=function(){return this.bendpoints},u.prototype.getLca=function(){return this.lca},u.prototype.getSourceInLca=function(){return this.sourceInLca},u.prototype.getTargetInLca=function(){return this.targetInLca},u.prototype.getOtherEnd=function(c){if(this.source===c)return this.target;if(this.target===c)return this.source;throw"Node is not incident with this edge"},u.prototype.getOtherEndInGraph=function(c,f){for(var d=this.getOtherEnd(c),h=f.getGraphManager().getRoot();;){if(d.getOwner()==f)return d;if(d.getOwner()==h)break;d=d.getOwner().getParent()}return null},u.prototype.updateLength=function(){var c=new Array(4);this.isOverlapingSourceAndTarget=o.getIntersection(this.target.getRect(),this.source.getRect(),c),this.isOverlapingSourceAndTarget||(this.lengthX=c[0]-c[2],this.lengthY=c[1]-c[3],Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},u.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=s.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=s.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},t.exports=u},function(t,n,i){function a(o){this.vGraphObject=o}t.exports=a},function(t,n,i){var a=i(2),o=i(10),s=i(13),u=i(0),l=i(16),c=i(4);function f(h,v,p,g){p==null&&g==null&&(g=v),a.call(this,g),h.graphManager!=null&&(h=h.graphManager),this.estimatedSize=o.MIN_VALUE,this.inclusionTreeDepth=o.MAX_VALUE,this.vGraphObject=g,this.edges=[],this.graphManager=h,p!=null&&v!=null?this.rect=new s(v.x,v.y,p.width,p.height):this.rect=new s}f.prototype=Object.create(a.prototype);for(var d in a)f[d]=a[d];f.prototype.getEdges=function(){return this.edges},f.prototype.getChild=function(){return this.child},f.prototype.getOwner=function(){return this.owner},f.prototype.getWidth=function(){return this.rect.width},f.prototype.setWidth=function(h){this.rect.width=h},f.prototype.getHeight=function(){return this.rect.height},f.prototype.setHeight=function(h){this.rect.height=h},f.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},f.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},f.prototype.getCenter=function(){return new c(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},f.prototype.getLocation=function(){return new c(this.rect.x,this.rect.y)},f.prototype.getRect=function(){return this.rect},f.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},f.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},f.prototype.setRect=function(h,v){this.rect.x=h.x,this.rect.y=h.y,this.rect.width=v.width,this.rect.height=v.height},f.prototype.setCenter=function(h,v){this.rect.x=h-this.rect.width/2,this.rect.y=v-this.rect.height/2},f.prototype.setLocation=function(h,v){this.rect.x=h,this.rect.y=v},f.prototype.moveBy=function(h,v){this.rect.x+=h,this.rect.y+=v},f.prototype.getEdgeListToNode=function(h){var v=[],p=this;return p.edges.forEach(function(g){if(g.target==h){if(g.source!=p)throw"Incorrect edge source!";v.push(g)}}),v},f.prototype.getEdgesBetween=function(h){var v=[],p=this;return p.edges.forEach(function(g){if(!(g.source==p||g.target==p))throw"Incorrect edge source and/or target";(g.target==h||g.source==h)&&v.push(g)}),v},f.prototype.getNeighborsList=function(){var h=new Set,v=this;return v.edges.forEach(function(p){if(p.source==v)h.add(p.target);else{if(p.target!=v)throw"Incorrect incidency!";h.add(p.source)}}),h},f.prototype.withChildren=function(){var h=new Set,v,p;if(h.add(this),this.child!=null)for(var g=this.child.getNodes(),y=0;y<g.length;y++)v=g[y],p=v.withChildren(),p.forEach(function(b){h.add(b)});return h},f.prototype.getNoOfChildren=function(){var h=0,v;if(this.child==null)h=1;else for(var p=this.child.getNodes(),g=0;g<p.length;g++)v=p[g],h+=v.getNoOfChildren();return h==0&&(h=1),h},f.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},f.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},f.prototype.scatter=function(){var h,v,p=-u.INITIAL_WORLD_BOUNDARY,g=u.INITIAL_WORLD_BOUNDARY;h=u.WORLD_CENTER_X+l.nextDouble()*(g-p)+p;var y=-u.INITIAL_WORLD_BOUNDARY,b=u.INITIAL_WORLD_BOUNDARY;v=u.WORLD_CENTER_Y+l.nextDouble()*(b-y)+y,this.rect.x=h,this.rect.y=v},f.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var h=this.getChild();if(h.updateBounds(!0),this.rect.x=h.getLeft(),this.rect.y=h.getTop(),this.setWidth(h.getRight()-h.getLeft()),this.setHeight(h.getBottom()-h.getTop()),u.NODE_DIMENSIONS_INCLUDE_LABELS){var v=h.getRight()-h.getLeft(),p=h.getBottom()-h.getTop();this.labelWidth>v&&(this.rect.x-=(this.labelWidth-v)/2,this.setWidth(this.labelWidth)),this.labelHeight>p&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-p)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-p),this.setHeight(this.labelHeight))}}},f.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==o.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},f.prototype.transform=function(h){var v=this.rect.x;v>u.WORLD_BOUNDARY?v=u.WORLD_BOUNDARY:v<-u.WORLD_BOUNDARY&&(v=-u.WORLD_BOUNDARY);var p=this.rect.y;p>u.WORLD_BOUNDARY?p=u.WORLD_BOUNDARY:p<-u.WORLD_BOUNDARY&&(p=-u.WORLD_BOUNDARY);var g=new c(v,p),y=h.inverseTransformPoint(g);this.setLocation(y.x,y.y)},f.prototype.getLeft=function(){return this.rect.x},f.prototype.getRight=function(){return this.rect.x+this.rect.width},f.prototype.getTop=function(){return this.rect.y},f.prototype.getBottom=function(){return this.rect.y+this.rect.height},f.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},t.exports=f},function(t,n,i){function a(o,s){o==null&&s==null?(this.x=0,this.y=0):(this.x=o,this.y=s)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.setX=function(o){this.x=o},a.prototype.setY=function(o){this.y=o},a.prototype.getDifference=function(o){return new DimensionD(this.x-o.x,this.y-o.y)},a.prototype.getCopy=function(){return new a(this.x,this.y)},a.prototype.translate=function(o){return this.x+=o.width,this.y+=o.height,this},t.exports=a},function(t,n,i){var a=i(2),o=i(10),s=i(0),u=i(6),l=i(3),c=i(1),f=i(13),d=i(12),h=i(11);function v(g,y,b){a.call(this,b),this.estimatedSize=o.MIN_VALUE,this.margin=s.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=g,y!=null&&y instanceof u?this.graphManager=y:y!=null&&y instanceof Layout&&(this.graphManager=y.graphManager)}v.prototype=Object.create(a.prototype);for(var p in a)v[p]=a[p];v.prototype.getNodes=function(){return this.nodes},v.prototype.getEdges=function(){return this.edges},v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getParent=function(){return this.parent},v.prototype.getLeft=function(){return this.left},v.prototype.getRight=function(){return this.right},v.prototype.getTop=function(){return this.top},v.prototype.getBottom=function(){return this.bottom},v.prototype.isConnected=function(){return this.isConnected},v.prototype.add=function(g,y,b){if(y==null&&b==null){var m=g;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(m)>-1)throw"Node already in graph!";return m.owner=this,this.getNodes().push(m),m}else{var _=g;if(!(this.getNodes().indexOf(y)>-1&&this.getNodes().indexOf(b)>-1))throw"Source or target not in graph!";if(!(y.owner==b.owner&&y.owner==this))throw"Both owners must be this graph!";return y.owner!=b.owner?null:(_.source=y,_.target=b,_.isInterGraph=!1,this.getEdges().push(_),y.edges.push(_),b!=y&&b.edges.push(_),_)}},v.prototype.remove=function(g){var y=g;if(g instanceof l){if(y==null)throw"Node is null!";if(!(y.owner!=null&&y.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var b=y.edges.slice(),m,_=b.length,x=0;x<_;x++)m=b[x],m.isInterGraph?this.graphManager.remove(m):m.source.owner.remove(m);var C=this.nodes.indexOf(y);if(C==-1)throw"Node not in owner node list!";this.nodes.splice(C,1)}else if(g instanceof c){var m=g;if(m==null)throw"Edge is null!";if(!(m.source!=null&&m.target!=null))throw"Source and/or target is null!";if(!(m.source.owner!=null&&m.target.owner!=null&&m.source.owner==this&&m.target.owner==this))throw"Source and/or target owner is invalid!";var w=m.source.edges.indexOf(m),O=m.target.edges.indexOf(m);if(!(w>-1&&O>-1))throw"Source and/or target doesn't know this edge!";m.source.edges.splice(w,1),m.target!=m.source&&m.target.edges.splice(O,1);var C=m.source.owner.getEdges().indexOf(m);if(C==-1)throw"Not in owner's edge list!";m.source.owner.getEdges().splice(C,1)}},v.prototype.updateLeftTop=function(){for(var g=o.MAX_VALUE,y=o.MAX_VALUE,b,m,_,x=this.getNodes(),C=x.length,w=0;w<C;w++){var O=x[w];b=O.getTop(),m=O.getLeft(),g>b&&(g=b),y>m&&(y=m)}return g==o.MAX_VALUE?null:(x[0].getParent().paddingLeft!=null?_=x[0].getParent().paddingLeft:_=this.margin,this.left=y-_,this.top=g-_,new d(this.left,this.top))},v.prototype.updateBounds=function(g){for(var y=o.MAX_VALUE,b=-o.MAX_VALUE,m=o.MAX_VALUE,_=-o.MAX_VALUE,x,C,w,O,A,k=this.nodes,R=k.length,I=0;I<R;I++){var M=k[I];g&&M.child!=null&&M.updateBounds(),x=M.getLeft(),C=M.getRight(),w=M.getTop(),O=M.getBottom(),y>x&&(y=x),b<C&&(b=C),m>w&&(m=w),_<O&&(_=O)}var N=new f(y,m,b-y,_-m);y==o.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),k[0].getParent().paddingLeft!=null?A=k[0].getParent().paddingLeft:A=this.margin,this.left=N.x-A,this.right=N.x+N.width+A,this.top=N.y-A,this.bottom=N.y+N.height+A},v.calculateBounds=function(g){for(var y=o.MAX_VALUE,b=-o.MAX_VALUE,m=o.MAX_VALUE,_=-o.MAX_VALUE,x,C,w,O,A=g.length,k=0;k<A;k++){var R=g[k];x=R.getLeft(),C=R.getRight(),w=R.getTop(),O=R.getBottom(),y>x&&(y=x),b<C&&(b=C),m>w&&(m=w),_<O&&(_=O)}var I=new f(y,m,b-y,_-m);return I},v.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},v.prototype.getEstimatedSize=function(){if(this.estimatedSize==o.MIN_VALUE)throw"assert failed";return this.estimatedSize},v.prototype.calcEstimatedSize=function(){for(var g=0,y=this.nodes,b=y.length,m=0;m<b;m++){var _=y[m];g+=_.calcEstimatedSize()}return g==0?this.estimatedSize=s.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=g/Math.sqrt(this.nodes.length),this.estimatedSize},v.prototype.updateConnected=function(){var g=this;if(this.nodes.length==0){this.isConnected=!0;return}var y=new h,b=new Set,m=this.nodes[0],_,x,C=m.withChildren();for(C.forEach(function(I){y.push(I),b.add(I)});y.length!==0;){m=y.shift(),_=m.getEdges();for(var w=_.length,O=0;O<w;O++){var A=_[O];if(x=A.getOtherEndInGraph(m,this),x!=null&&!b.has(x)){var k=x.withChildren();k.forEach(function(I){y.push(I),b.add(I)})}}}if(this.isConnected=!1,b.size>=this.nodes.length){var R=0;b.forEach(function(I){I.owner==g&&R++}),R==this.nodes.length&&(this.isConnected=!0)}},t.exports=v},function(t,n,i){var a,o=i(1);function s(u){a=i(5),this.layout=u,this.graphs=[],this.edges=[]}s.prototype.addRoot=function(){var u=this.layout.newGraph(),l=this.layout.newNode(null),c=this.add(u,l);return this.setRootGraph(c),this.rootGraph},s.prototype.add=function(u,l,c,f,d){if(c==null&&f==null&&d==null){if(u==null)throw"Graph is null!";if(l==null)throw"Parent node is null!";if(this.graphs.indexOf(u)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(u),u.parent!=null)throw"Already has a parent!";if(l.child!=null)throw"Already has a child!";return u.parent=l,l.child=u,u}else{d=c,f=l,c=u;var h=f.getOwner(),v=d.getOwner();if(!(h!=null&&h.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(v!=null&&v.getGraphManager()==this))throw"Target not in this graph mgr!";if(h==v)return c.isInterGraph=!1,h.add(c,f,d);if(c.isInterGraph=!0,c.source=f,c.target=d,this.edges.indexOf(c)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(c),!(c.source!=null&&c.target!=null))throw"Edge source and/or target is null!";if(!(c.source.edges.indexOf(c)==-1&&c.target.edges.indexOf(c)==-1))throw"Edge already in source and/or target incidency list!";return c.source.edges.push(c),c.target.edges.push(c),c}},s.prototype.remove=function(u){if(u instanceof a){var l=u;if(l.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(l==this.rootGraph||l.parent!=null&&l.parent.graphManager==this))throw"Invalid parent node!";var c=[];c=c.concat(l.getEdges());for(var f,d=c.length,h=0;h<d;h++)f=c[h],l.remove(f);var v=[];v=v.concat(l.getNodes());var p;d=v.length;for(var h=0;h<d;h++)p=v[h],l.remove(p);l==this.rootGraph&&this.setRootGraph(null);var g=this.graphs.indexOf(l);this.graphs.splice(g,1),l.parent=null}else if(u instanceof o){if(f=u,f==null)throw"Edge is null!";if(!f.isInterGraph)throw"Not an inter-graph edge!";if(!(f.source!=null&&f.target!=null))throw"Source and/or target is null!";if(!(f.source.edges.indexOf(f)!=-1&&f.target.edges.indexOf(f)!=-1))throw"Source and/or target doesn't know this edge!";var g=f.source.edges.indexOf(f);if(f.source.edges.splice(g,1),g=f.target.edges.indexOf(f),f.target.edges.splice(g,1),!(f.source.owner!=null&&f.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(f.source.owner.getGraphManager().edges.indexOf(f)==-1)throw"Not in owner graph manager's edge list!";var g=f.source.owner.getGraphManager().edges.indexOf(f);f.source.owner.getGraphManager().edges.splice(g,1)}},s.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},s.prototype.getGraphs=function(){return this.graphs},s.prototype.getAllNodes=function(){if(this.allNodes==null){for(var u=[],l=this.getGraphs(),c=l.length,f=0;f<c;f++)u=u.concat(l[f].getNodes());this.allNodes=u}return this.allNodes},s.prototype.resetAllNodes=function(){this.allNodes=null},s.prototype.resetAllEdges=function(){this.allEdges=null},s.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},s.prototype.getAllEdges=function(){if(this.allEdges==null){var u=[],l=this.getGraphs();l.length;for(var c=0;c<l.length;c++)u=u.concat(l[c].getEdges());u=u.concat(this.edges),this.allEdges=u}return this.allEdges},s.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},s.prototype.setAllNodesToApplyGravitation=function(u){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=u},s.prototype.getRoot=function(){return this.rootGraph},s.prototype.setRootGraph=function(u){if(u.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=u,u.parent==null&&(u.parent=this.layout.newNode("Root node"))},s.prototype.getLayout=function(){return this.layout},s.prototype.isOneAncestorOfOther=function(u,l){if(!(u!=null&&l!=null))throw"assert failed";if(u==l)return!0;var c=u.getOwner(),f;do{if(f=c.getParent(),f==null)break;if(f==l)return!0;if(c=f.getOwner(),c==null)break}while(!0);c=l.getOwner();do{if(f=c.getParent(),f==null)break;if(f==u)return!0;if(c=f.getOwner(),c==null)break}while(!0);return!1},s.prototype.calcLowestCommonAncestors=function(){for(var u,l,c,f,d,h=this.getAllEdges(),v=h.length,p=0;p<v;p++){if(u=h[p],l=u.source,c=u.target,u.lca=null,u.sourceInLca=l,u.targetInLca=c,l==c){u.lca=l.getOwner();continue}for(f=l.getOwner();u.lca==null;){for(u.targetInLca=c,d=c.getOwner();u.lca==null;){if(d==f){u.lca=d;break}if(d==this.rootGraph)break;if(u.lca!=null)throw"assert failed";u.targetInLca=d.getParent(),d=u.targetInLca.getOwner()}if(f==this.rootGraph)break;u.lca==null&&(u.sourceInLca=f.getParent(),f=u.sourceInLca.getOwner())}if(u.lca==null)throw"assert failed"}},s.prototype.calcLowestCommonAncestor=function(u,l){if(u==l)return u.getOwner();var c=u.getOwner();do{if(c==null)break;var f=l.getOwner();do{if(f==null)break;if(f==c)return f;f=f.getParent().getOwner()}while(!0);c=c.getParent().getOwner()}while(!0);return c},s.prototype.calcInclusionTreeDepths=function(u,l){u==null&&l==null&&(u=this.rootGraph,l=1);for(var c,f=u.getNodes(),d=f.length,h=0;h<d;h++)c=f[h],c.inclusionTreeDepth=l,c.child!=null&&this.calcInclusionTreeDepths(c.child,l+1)},s.prototype.includesInvalidEdge=function(){for(var u,l=this.edges.length,c=0;c<l;c++)if(u=this.edges[c],this.isOneAncestorOfOther(u.source,u.target))return!0;return!1},t.exports=s},function(t,n,i){var a=i(0);function o(){}for(var s in a)o[s]=a[s];o.MAX_ITERATIONS=2500,o.DEFAULT_EDGE_LENGTH=50,o.DEFAULT_SPRING_STRENGTH=.45,o.DEFAULT_REPULSION_STRENGTH=4500,o.DEFAULT_GRAVITY_STRENGTH=.4,o.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,o.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,o.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,o.COOLING_ADAPTATION_FACTOR=.33,o.ADAPTATION_LOWER_NODE_LIMIT=1e3,o.ADAPTATION_UPPER_NODE_LIMIT=5e3,o.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,o.MAX_NODE_DISPLACEMENT=o.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,o.MIN_REPULSION_DIST=o.DEFAULT_EDGE_LENGTH/10,o.CONVERGENCE_CHECK_PERIOD=100,o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,o.MIN_EDGE_LENGTH=1,o.GRID_CALCULATION_CHECK_PERIOD=10,t.exports=o},function(t,n,i){var a=i(12);function o(){}o.calcSeparationAmount=function(s,u,l,c){if(!s.intersects(u))throw"assert failed";var f=new Array(2);this.decideDirectionsForOverlappingNodes(s,u,f),l[0]=Math.min(s.getRight(),u.getRight())-Math.max(s.x,u.x),l[1]=Math.min(s.getBottom(),u.getBottom())-Math.max(s.y,u.y),s.getX()<=u.getX()&&s.getRight()>=u.getRight()?l[0]+=Math.min(u.getX()-s.getX(),s.getRight()-u.getRight()):u.getX()<=s.getX()&&u.getRight()>=s.getRight()&&(l[0]+=Math.min(s.getX()-u.getX(),u.getRight()-s.getRight())),s.getY()<=u.getY()&&s.getBottom()>=u.getBottom()?l[1]+=Math.min(u.getY()-s.getY(),s.getBottom()-u.getBottom()):u.getY()<=s.getY()&&u.getBottom()>=s.getBottom()&&(l[1]+=Math.min(s.getY()-u.getY(),u.getBottom()-s.getBottom()));var d=Math.abs((u.getCenterY()-s.getCenterY())/(u.getCenterX()-s.getCenterX()));u.getCenterY()===s.getCenterY()&&u.getCenterX()===s.getCenterX()&&(d=1);var h=d*l[0],v=l[1]/d;l[0]<v?v=l[0]:h=l[1],l[0]=-1*f[0]*(v/2+c),l[1]=-1*f[1]*(h/2+c)},o.decideDirectionsForOverlappingNodes=function(s,u,l){s.getCenterX()<u.getCenterX()?l[0]=-1:l[0]=1,s.getCenterY()<u.getCenterY()?l[1]=-1:l[1]=1},o.getIntersection2=function(s,u,l){var c=s.getCenterX(),f=s.getCenterY(),d=u.getCenterX(),h=u.getCenterY();if(s.intersects(u))return l[0]=c,l[1]=f,l[2]=d,l[3]=h,!0;var v=s.getX(),p=s.getY(),g=s.getRight(),y=s.getX(),b=s.getBottom(),m=s.getRight(),_=s.getWidthHalf(),x=s.getHeightHalf(),C=u.getX(),w=u.getY(),O=u.getRight(),A=u.getX(),k=u.getBottom(),R=u.getRight(),I=u.getWidthHalf(),M=u.getHeightHalf(),N=!1,F=!1;if(c===d){if(f>h)return l[0]=c,l[1]=p,l[2]=d,l[3]=k,!1;if(f<h)return l[0]=c,l[1]=b,l[2]=d,l[3]=w,!1}else if(f===h){if(c>d)return l[0]=v,l[1]=f,l[2]=O,l[3]=h,!1;if(c<d)return l[0]=g,l[1]=f,l[2]=C,l[3]=h,!1}else{var z=s.height/s.width,B=u.height/u.width,U=(h-f)/(d-c),W=void 0,Y=void 0,H=void 0,J=void 0,le=void 0,fe=void 0;if(-z===U?c>d?(l[0]=y,l[1]=b,N=!0):(l[0]=g,l[1]=p,N=!0):z===U&&(c>d?(l[0]=v,l[1]=p,N=!0):(l[0]=m,l[1]=b,N=!0)),-B===U?d>c?(l[2]=A,l[3]=k,F=!0):(l[2]=O,l[3]=w,F=!0):B===U&&(d>c?(l[2]=C,l[3]=w,F=!0):(l[2]=R,l[3]=k,F=!0)),N&&F)return!1;if(c>d?f>h?(W=this.getCardinalDirection(z,U,4),Y=this.getCardinalDirection(B,U,2)):(W=this.getCardinalDirection(-z,U,3),Y=this.getCardinalDirection(-B,U,1)):f>h?(W=this.getCardinalDirection(-z,U,1),Y=this.getCardinalDirection(-B,U,3)):(W=this.getCardinalDirection(z,U,2),Y=this.getCardinalDirection(B,U,4)),!N)switch(W){case 1:J=p,H=c+-x/U,l[0]=H,l[1]=J;break;case 2:H=m,J=f+_*U,l[0]=H,l[1]=J;break;case 3:J=b,H=c+x/U,l[0]=H,l[1]=J;break;case 4:H=y,J=f+-_*U,l[0]=H,l[1]=J;break}if(!F)switch(Y){case 1:fe=w,le=d+-M/U,l[2]=le,l[3]=fe;break;case 2:le=R,fe=h+I*U,l[2]=le,l[3]=fe;break;case 3:fe=k,le=d+M/U,l[2]=le,l[3]=fe;break;case 4:le=A,fe=h+-I*U,l[2]=le,l[3]=fe;break}}return!1},o.getCardinalDirection=function(s,u,l){return s>u?l:1+l%4},o.getIntersection=function(s,u,l,c){if(c==null)return this.getIntersection2(s,u,l);var f=s.x,d=s.y,h=u.x,v=u.y,p=l.x,g=l.y,y=c.x,b=c.y,m=void 0,_=void 0,x=void 0,C=void 0,w=void 0,O=void 0,A=void 0,k=void 0,R=void 0;return x=v-d,w=f-h,A=h*d-f*v,C=b-g,O=p-y,k=y*g-p*b,R=x*O-C*w,R===0?null:(m=(w*k-O*A)/R,_=(C*A-x*k)/R,new a(m,_))},o.angleOfVector=function(s,u,l,c){var f=void 0;return s!==l?(f=Math.atan((c-u)/(l-s)),l<s?f+=Math.PI:c<u&&(f+=this.TWO_PI)):c<u?f=this.ONE_AND_HALF_PI:f=this.HALF_PI,f},o.doIntersect=function(s,u,l,c){var f=s.x,d=s.y,h=u.x,v=u.y,p=l.x,g=l.y,y=c.x,b=c.y,m=(h-f)*(b-g)-(y-p)*(v-d);if(m===0)return!1;var _=((b-g)*(y-f)+(p-y)*(b-d))/m,x=((d-v)*(y-f)+(h-f)*(b-d))/m;return 0<_&&_<1&&0<x&&x<1},o.HALF_PI=.5*Math.PI,o.ONE_AND_HALF_PI=1.5*Math.PI,o.TWO_PI=2*Math.PI,o.THREE_PI=3*Math.PI,t.exports=o},function(t,n,i){function a(){}a.sign=function(o){return o>0?1:o<0?-1:0},a.floor=function(o){return o<0?Math.ceil(o):Math.floor(o)},a.ceil=function(o){return o<0?Math.floor(o):Math.ceil(o)},t.exports=a},function(t,n,i){function a(){}a.MAX_VALUE=2147483647,a.MIN_VALUE=-2147483648,t.exports=a},function(t,n,i){var a=function(){function f(d,h){for(var v=0;v<h.length;v++){var p=h[v];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,h,v){return h&&f(d.prototype,h),v&&f(d,v),d}}();function o(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}var s=function(d){return{value:d,next:null,prev:null}},u=function(d,h,v,p){return d!==null?d.next=h:p.head=h,v!==null?v.prev=h:p.tail=h,h.prev=d,h.next=v,p.length++,h},l=function(d,h){var v=d.prev,p=d.next;return v!==null?v.next=p:h.head=p,p!==null?p.prev=v:h.tail=v,d.prev=d.next=null,h.length--,d},c=function(){function f(d){var h=this;o(this,f),this.length=0,this.head=null,this.tail=null,d!=null&&d.forEach(function(v){return h.push(v)})}return a(f,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(h,v){return u(v.prev,s(h),v,this)}},{key:"insertAfter",value:function(h,v){return u(v,s(h),v.next,this)}},{key:"insertNodeBefore",value:function(h,v){return u(v.prev,h,v,this)}},{key:"insertNodeAfter",value:function(h,v){return u(v,h,v.next,this)}},{key:"push",value:function(h){return u(this.tail,s(h),null,this)}},{key:"unshift",value:function(h){return u(null,s(h),this.head,this)}},{key:"remove",value:function(h){return l(h,this)}},{key:"pop",value:function(){return l(this.tail,this).value}},{key:"popNode",value:function(){return l(this.tail,this)}},{key:"shift",value:function(){return l(this.head,this).value}},{key:"shiftNode",value:function(){return l(this.head,this)}},{key:"get_object_at",value:function(h){if(h<=this.length()){for(var v=1,p=this.head;v<h;)p=p.next,v++;return p.value}}},{key:"set_object_at",value:function(h,v){if(h<=this.length()){for(var p=1,g=this.head;p<h;)g=g.next,p++;g.value=v}}}]),f}();t.exports=c},function(t,n,i){function a(o,s,u){this.x=null,this.y=null,o==null&&s==null&&u==null?(this.x=0,this.y=0):typeof o=="number"&&typeof s=="number"&&u==null?(this.x=o,this.y=s):o.constructor.name=="Point"&&s==null&&u==null&&(u=o,this.x=u.x,this.y=u.y)}a.prototype.getX=function(){return this.x},a.prototype.getY=function(){return this.y},a.prototype.getLocation=function(){return new a(this.x,this.y)},a.prototype.setLocation=function(o,s,u){o.constructor.name=="Point"&&s==null&&u==null?(u=o,this.setLocation(u.x,u.y)):typeof o=="number"&&typeof s=="number"&&u==null&&(parseInt(o)==o&&parseInt(s)==s?this.move(o,s):(this.x=Math.floor(o+.5),this.y=Math.floor(s+.5)))},a.prototype.move=function(o,s){this.x=o,this.y=s},a.prototype.translate=function(o,s){this.x+=o,this.y+=s},a.prototype.equals=function(o){if(o.constructor.name=="Point"){var s=o;return this.x==s.x&&this.y==s.y}return this==o},a.prototype.toString=function(){return new a().constructor.name+"[x="+this.x+",y="+this.y+"]"},t.exports=a},function(t,n,i){function a(o,s,u,l){this.x=0,this.y=0,this.width=0,this.height=0,o!=null&&s!=null&&u!=null&&l!=null&&(this.x=o,this.y=s,this.width=u,this.height=l)}a.prototype.getX=function(){return this.x},a.prototype.setX=function(o){this.x=o},a.prototype.getY=function(){return this.y},a.prototype.setY=function(o){this.y=o},a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(o){this.width=o},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(o){this.height=o},a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.intersects=function(o){return!(this.getRight()<o.x||this.getBottom()<o.y||o.getRight()<this.x||o.getBottom()<this.y)},a.prototype.getCenterX=function(){return this.x+this.width/2},a.prototype.getMinX=function(){return this.getX()},a.prototype.getMaxX=function(){return this.getX()+this.width},a.prototype.getCenterY=function(){return this.y+this.height/2},a.prototype.getMinY=function(){return this.getY()},a.prototype.getMaxY=function(){return this.getY()+this.height},a.prototype.getWidthHalf=function(){return this.width/2},a.prototype.getHeightHalf=function(){return this.height/2},t.exports=a},function(t,n,i){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};function o(){}o.lastID=0,o.createID=function(s){return o.isPrimitive(s)?s:(s.uniqueID!=null||(s.uniqueID=o.getString(),o.lastID++),s.uniqueID)},o.getString=function(s){return s==null&&(s=o.lastID),"Object#"+s},o.isPrimitive=function(s){var u=typeof s>"u"?"undefined":a(s);return s==null||u!="object"&&u!="function"},t.exports=o},function(t,n,i){function a(p){if(Array.isArray(p)){for(var g=0,y=Array(p.length);g<p.length;g++)y[g]=p[g];return y}else return Array.from(p)}var o=i(0),s=i(6),u=i(3),l=i(1),c=i(5),f=i(4),d=i(17),h=i(27);function v(p){h.call(this),this.layoutQuality=o.QUALITY,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=o.DEFAULT_INCREMENTAL,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new s(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,p!=null&&(this.isRemoteUse=p)}v.RANDOM_SEED=1,v.prototype=Object.create(h.prototype),v.prototype.getGraphManager=function(){return this.graphManager},v.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},v.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},v.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},v.prototype.newGraphManager=function(){var p=new s(this);return this.graphManager=p,p},v.prototype.newGraph=function(p){return new c(null,this.graphManager,p)},v.prototype.newNode=function(p){return new u(this.graphManager,p)},v.prototype.newEdge=function(p){return new l(null,null,p)},v.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},v.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var p;return this.checkLayoutSuccess()?p=!1:p=this.layout(),o.ANIMATE==="during"?!1:(p&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,p)},v.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},v.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var p=this.graphManager.getAllEdges(),g=0;g<p.length;g++)p[g];for(var y=this.graphManager.getRoot().getNodes(),g=0;g<y.length;g++)y[g];this.update(this.graphManager.getRoot())}},v.prototype.update=function(p){if(p==null)this.update2();else if(p instanceof u){var g=p;if(g.getChild()!=null)for(var y=g.getChild().getNodes(),b=0;b<y.length;b++)update(y[b]);if(g.vGraphObject!=null){var m=g.vGraphObject;m.update(g)}}else if(p instanceof l){var _=p;if(_.vGraphObject!=null){var x=_.vGraphObject;x.update(_)}}else if(p instanceof c){var C=p;if(C.vGraphObject!=null){var w=C.vGraphObject;w.update(C)}}},v.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=o.QUALITY,this.animationDuringLayout=o.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=o.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=o.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=o.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=o.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=o.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},v.prototype.transform=function(p){if(p==null)this.transform(new f(0,0));else{var g=new d,y=this.graphManager.getRoot().updateLeftTop();if(y!=null){g.setWorldOrgX(p.x),g.setWorldOrgY(p.y),g.setDeviceOrgX(y.x),g.setDeviceOrgY(y.y);for(var b=this.getAllNodes(),m,_=0;_<b.length;_++)m=b[_],m.transform(g)}}},v.prototype.positionNodesRandomly=function(p){if(p==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var g,y,b=p.getNodes(),m=0;m<b.length;m++)g=b[m],y=g.getChild(),y==null||y.getNodes().length==0?g.scatter():(this.positionNodesRandomly(y),g.updateBounds())},v.prototype.getFlatForest=function(){for(var p=[],g=!0,y=this.graphManager.getRoot().getNodes(),b=!0,m=0;m<y.length;m++)y[m].getChild()!=null&&(b=!1);if(!b)return p;var _=new Set,x=[],C=new Map,w=[];for(w=w.concat(y);w.length>0&&g;){for(x.push(w[0]);x.length>0&&g;){var O=x[0];x.splice(0,1),_.add(O);for(var A=O.getEdges(),m=0;m<A.length;m++){var k=A[m].getOtherEnd(O);if(C.get(O)!=k)if(!_.has(k))x.push(k),C.set(k,O);else{g=!1;break}}}if(!g)p=[];else{var R=[].concat(a(_));p.push(R);for(var m=0;m<R.length;m++){var I=R[m],M=w.indexOf(I);M>-1&&w.splice(M,1)}_=new Set,C=new Map}}return p},v.prototype.createDummyNodesForBendpoints=function(p){for(var g=[],y=p.source,b=this.graphManager.calcLowestCommonAncestor(p.source,p.target),m=0;m<p.bendpoints.length;m++){var _=this.newNode(null);_.setRect(new Point(0,0),new Dimension(1,1)),b.add(_);var x=this.newEdge(null);this.graphManager.add(x,y,_),g.add(_),y=_}var x=this.newEdge(null);return this.graphManager.add(x,y,p.target),this.edgeToDummyNodes.set(p,g),p.isInterGraph()?this.graphManager.remove(p):b.remove(p),g},v.prototype.createBendpointsFromDummyNodes=function(){var p=[];p=p.concat(this.graphManager.getAllEdges()),p=[].concat(a(this.edgeToDummyNodes.keys())).concat(p);for(var g=0;g<p.length;g++){var y=p[g];if(y.bendpoints.length>0){for(var b=this.edgeToDummyNodes.get(y),m=0;m<b.length;m++){var _=b[m],x=new f(_.getCenterX(),_.getCenterY()),C=y.bendpoints.get(m);C.x=x.x,C.y=x.y,_.getOwner().remove(_)}this.graphManager.add(y,y.source,y.target)}}},v.transform=function(p,g,y,b){if(y!=null&&b!=null){var m=g;if(p<=50){var _=g/y;m-=(g-_)/50*(50-p)}else{var x=g*b;m+=(x-g)/50*(p-50)}return m}else{var C,w;return p<=50?(C=9*g/500,w=g/10):(C=9*g/50,w=-8*g),C*p+w}},v.findCenterOfTree=function(p){var g=[];g=g.concat(p);var y=[],b=new Map,m=!1,_=null;(g.length==1||g.length==2)&&(m=!0,_=g[0]);for(var x=0;x<g.length;x++){var C=g[x],w=C.getNeighborsList().size;b.set(C,C.getNeighborsList().size),w==1&&y.push(C)}var O=[];for(O=O.concat(y);!m;){var A=[];A=A.concat(O),O=[];for(var x=0;x<g.length;x++){var C=g[x],k=g.indexOf(C);k>=0&&g.splice(k,1);var R=C.getNeighborsList();R.forEach(function(N){if(y.indexOf(N)<0){var F=b.get(N),z=F-1;z==1&&O.push(N),b.set(N,z)}})}y=y.concat(O),(g.length==1||g.length==2)&&(m=!0,_=g[0])}return _},v.prototype.setGraphManager=function(p){this.graphManager=p},t.exports=v},function(t,n,i){function a(){}a.seed=1,a.x=0,a.nextDouble=function(){return a.x=Math.sin(a.seed++)*1e4,a.x-Math.floor(a.x)},t.exports=a},function(t,n,i){var a=i(4);function o(s,u){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}o.prototype.getWorldOrgX=function(){return this.lworldOrgX},o.prototype.setWorldOrgX=function(s){this.lworldOrgX=s},o.prototype.getWorldOrgY=function(){return this.lworldOrgY},o.prototype.setWorldOrgY=function(s){this.lworldOrgY=s},o.prototype.getWorldExtX=function(){return this.lworldExtX},o.prototype.setWorldExtX=function(s){this.lworldExtX=s},o.prototype.getWorldExtY=function(){return this.lworldExtY},o.prototype.setWorldExtY=function(s){this.lworldExtY=s},o.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},o.prototype.setDeviceOrgX=function(s){this.ldeviceOrgX=s},o.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},o.prototype.setDeviceOrgY=function(s){this.ldeviceOrgY=s},o.prototype.getDeviceExtX=function(){return this.ldeviceExtX},o.prototype.setDeviceExtX=function(s){this.ldeviceExtX=s},o.prototype.getDeviceExtY=function(){return this.ldeviceExtY},o.prototype.setDeviceExtY=function(s){this.ldeviceExtY=s},o.prototype.transformX=function(s){var u=0,l=this.lworldExtX;return l!=0&&(u=this.ldeviceOrgX+(s-this.lworldOrgX)*this.ldeviceExtX/l),u},o.prototype.transformY=function(s){var u=0,l=this.lworldExtY;return l!=0&&(u=this.ldeviceOrgY+(s-this.lworldOrgY)*this.ldeviceExtY/l),u},o.prototype.inverseTransformX=function(s){var u=0,l=this.ldeviceExtX;return l!=0&&(u=this.lworldOrgX+(s-this.ldeviceOrgX)*this.lworldExtX/l),u},o.prototype.inverseTransformY=function(s){var u=0,l=this.ldeviceExtY;return l!=0&&(u=this.lworldOrgY+(s-this.ldeviceOrgY)*this.lworldExtY/l),u},o.prototype.inverseTransformPoint=function(s){var u=new a(this.inverseTransformX(s.x),this.inverseTransformY(s.y));return u},t.exports=o},function(t,n,i){function a(h){if(Array.isArray(h)){for(var v=0,p=Array(h.length);v<h.length;v++)p[v]=h[v];return p}else return Array.from(h)}var o=i(15),s=i(7),u=i(0),l=i(8),c=i(9);function f(){o.call(this),this.useSmartIdealEdgeLengthCalculation=s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=s.DEFAULT_EDGE_LENGTH,this.springConstant=s.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=s.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=s.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=s.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*s.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=s.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=s.MAX_ITERATIONS}f.prototype=Object.create(o.prototype);for(var d in o)f[d]=o[d];f.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},f.prototype.calcIdealEdgeLengths=function(){for(var h,v,p,g,y,b,m=this.getGraphManager().getAllEdges(),_=0;_<m.length;_++)h=m[_],h.idealLength=this.idealEdgeLength,h.isInterGraph&&(p=h.getSource(),g=h.getTarget(),y=h.getSourceInLca().getEstimatedSize(),b=h.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(h.idealLength+=y+b-2*u.SIMPLE_NODE_SIZE),v=h.getLca().getInclusionTreeDepth(),h.idealLength+=s.DEFAULT_EDGE_LENGTH*s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(p.getInclusionTreeDepth()+g.getInclusionTreeDepth()-2*v))},f.prototype.initSpringEmbedder=function(){var h=this.getAllNodes().length;this.incremental?(h>s.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*s.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(h-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-s.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT_INCREMENTAL):(h>s.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(s.COOLING_ADAPTATION_FACTOR,1-(h-s.ADAPTATION_LOWER_NODE_LIMIT)/(s.ADAPTATION_UPPER_NODE_LIMIT-s.ADAPTATION_LOWER_NODE_LIMIT)*(1-s.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=s.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},f.prototype.calcSpringForces=function(){for(var h=this.getAllEdges(),v,p=0;p<h.length;p++)v=h[p],this.calcSpringForce(v,v.idealLength)},f.prototype.calcRepulsionForces=function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p,g,y,b,m=this.getAllNodes(),_;if(this.useFRGridVariant)for(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&h&&this.updateGrid(),_=new Set,p=0;p<m.length;p++)y=m[p],this.calculateRepulsionForceOfANode(y,_,h,v),_.add(y);else for(p=0;p<m.length;p++)for(y=m[p],g=p+1;g<m.length;g++)b=m[g],y.getOwner()==b.getOwner()&&this.calcRepulsionForce(y,b)},f.prototype.calcGravitationalForces=function(){for(var h,v=this.getAllNodesToApplyGravitation(),p=0;p<v.length;p++)h=v[p],this.calcGravitationalForce(h)},f.prototype.moveNodes=function(){for(var h=this.getAllNodes(),v,p=0;p<h.length;p++)v=h[p],v.move()},f.prototype.calcSpringForce=function(h,v){var p=h.getSource(),g=h.getTarget(),y,b,m,_;if(this.uniformLeafNodeSizes&&p.getChild()==null&&g.getChild()==null)h.updateLengthSimple();else if(h.updateLength(),h.isOverlapingSourceAndTarget)return;y=h.getLength(),y!=0&&(b=this.springConstant*(y-v),m=b*(h.lengthX/y),_=b*(h.lengthY/y),p.springForceX+=m,p.springForceY+=_,g.springForceX-=m,g.springForceY-=_)},f.prototype.calcRepulsionForce=function(h,v){var p=h.getRect(),g=v.getRect(),y=new Array(2),b=new Array(4),m,_,x,C,w,O,A;if(p.intersects(g)){l.calcSeparationAmount(p,g,y,s.DEFAULT_EDGE_LENGTH/2),O=2*y[0],A=2*y[1];var k=h.noOfChildren*v.noOfChildren/(h.noOfChildren+v.noOfChildren);h.repulsionForceX-=k*O,h.repulsionForceY-=k*A,v.repulsionForceX+=k*O,v.repulsionForceY+=k*A}else this.uniformLeafNodeSizes&&h.getChild()==null&&v.getChild()==null?(m=g.getCenterX()-p.getCenterX(),_=g.getCenterY()-p.getCenterY()):(l.getIntersection(p,g,b),m=b[2]-b[0],_=b[3]-b[1]),Math.abs(m)<s.MIN_REPULSION_DIST&&(m=c.sign(m)*s.MIN_REPULSION_DIST),Math.abs(_)<s.MIN_REPULSION_DIST&&(_=c.sign(_)*s.MIN_REPULSION_DIST),x=m*m+_*_,C=Math.sqrt(x),w=this.repulsionConstant*h.noOfChildren*v.noOfChildren/x,O=w*m/C,A=w*_/C,h.repulsionForceX-=O,h.repulsionForceY-=A,v.repulsionForceX+=O,v.repulsionForceY+=A},f.prototype.calcGravitationalForce=function(h){var v,p,g,y,b,m,_,x;v=h.getOwner(),p=(v.getRight()+v.getLeft())/2,g=(v.getTop()+v.getBottom())/2,y=h.getCenterX()-p,b=h.getCenterY()-g,m=Math.abs(y)+h.getWidth()/2,_=Math.abs(b)+h.getHeight()/2,h.getOwner()==this.graphManager.getRoot()?(x=v.getEstimatedSize()*this.gravityRangeFactor,(m>x||_>x)&&(h.gravitationForceX=-this.gravityConstant*y,h.gravitationForceY=-this.gravityConstant*b)):(x=v.getEstimatedSize()*this.compoundGravityRangeFactor,(m>x||_>x)&&(h.gravitationForceX=-this.gravityConstant*y*this.compoundGravityConstant,h.gravitationForceY=-this.gravityConstant*b*this.compoundGravityConstant))},f.prototype.isConverged=function(){var h,v=!1;return this.totalIterations>this.maxIterations/3&&(v=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),h=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,h||v},f.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},f.prototype.calcNoOfChildrenForAllNodes=function(){for(var h,v=this.graphManager.getAllNodes(),p=0;p<v.length;p++)h=v[p],h.noOfChildren=h.getNoOfChildren()},f.prototype.calcGrid=function(h){var v=0,p=0;v=parseInt(Math.ceil((h.getRight()-h.getLeft())/this.repulsionRange)),p=parseInt(Math.ceil((h.getBottom()-h.getTop())/this.repulsionRange));for(var g=new Array(v),y=0;y<v;y++)g[y]=new Array(p);for(var y=0;y<v;y++)for(var b=0;b<p;b++)g[y][b]=new Array;return g},f.prototype.addNodeToGrid=function(h,v,p){var g=0,y=0,b=0,m=0;g=parseInt(Math.floor((h.getRect().x-v)/this.repulsionRange)),y=parseInt(Math.floor((h.getRect().width+h.getRect().x-v)/this.repulsionRange)),b=parseInt(Math.floor((h.getRect().y-p)/this.repulsionRange)),m=parseInt(Math.floor((h.getRect().height+h.getRect().y-p)/this.repulsionRange));for(var _=g;_<=y;_++)for(var x=b;x<=m;x++)this.grid[_][x].push(h),h.setGridCoordinates(g,y,b,m)},f.prototype.updateGrid=function(){var h,v,p=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),h=0;h<p.length;h++)v=p[h],this.addNodeToGrid(v,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},f.prototype.calculateRepulsionForceOfANode=function(h,v,p,g){if(this.totalIterations%s.GRID_CALCULATION_CHECK_PERIOD==1&&p||g){var y=new Set;h.surrounding=new Array;for(var b,m=this.grid,_=h.startX-1;_<h.finishX+2;_++)for(var x=h.startY-1;x<h.finishY+2;x++)if(!(_<0||x<0||_>=m.length||x>=m[0].length)){for(var C=0;C<m[_][x].length;C++)if(b=m[_][x][C],!(h.getOwner()!=b.getOwner()||h==b)&&!v.has(b)&&!y.has(b)){var w=Math.abs(h.getCenterX()-b.getCenterX())-(h.getWidth()/2+b.getWidth()/2),O=Math.abs(h.getCenterY()-b.getCenterY())-(h.getHeight()/2+b.getHeight()/2);w<=this.repulsionRange&&O<=this.repulsionRange&&y.add(b)}}h.surrounding=[].concat(a(y))}for(_=0;_<h.surrounding.length;_++)this.calcRepulsionForce(h,h.surrounding[_])},f.prototype.calcRepulsionRange=function(){return 0},t.exports=f},function(t,n,i){var a=i(1),o=i(7);function s(l,c,f){a.call(this,l,c,f),this.idealLength=o.DEFAULT_EDGE_LENGTH}s.prototype=Object.create(a.prototype);for(var u in a)s[u]=a[u];t.exports=s},function(t,n,i){var a=i(3);function o(u,l,c,f){a.call(this,u,l,c,f),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}o.prototype=Object.create(a.prototype);for(var s in a)o[s]=a[s];o.prototype.setGridCoordinates=function(u,l,c,f){this.startX=u,this.finishX=l,this.startY=c,this.finishY=f},t.exports=o},function(t,n,i){function a(o,s){this.width=0,this.height=0,o!==null&&s!==null&&(this.height=s,this.width=o)}a.prototype.getWidth=function(){return this.width},a.prototype.setWidth=function(o){this.width=o},a.prototype.getHeight=function(){return this.height},a.prototype.setHeight=function(o){this.height=o},t.exports=a},function(t,n,i){var a=i(14);function o(){this.map={},this.keys=[]}o.prototype.put=function(s,u){var l=a.createID(s);this.contains(l)||(this.map[l]=u,this.keys.push(s))},o.prototype.contains=function(s){return a.createID(s),this.map[s]!=null},o.prototype.get=function(s){var u=a.createID(s);return this.map[u]},o.prototype.keySet=function(){return this.keys},t.exports=o},function(t,n,i){var a=i(14);function o(){this.set={}}o.prototype.add=function(s){var u=a.createID(s);this.contains(u)||(this.set[u]=s)},o.prototype.remove=function(s){delete this.set[a.createID(s)]},o.prototype.clear=function(){this.set={}},o.prototype.contains=function(s){return this.set[a.createID(s)]==s},o.prototype.isEmpty=function(){return this.size()===0},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAllTo=function(s){for(var u=Object.keys(this.set),l=u.length,c=0;c<l;c++)s.push(this.set[u[c]])},o.prototype.size=function(){return Object.keys(this.set).length},o.prototype.addAll=function(s){for(var u=s.length,l=0;l<u;l++){var c=s[l];this.add(c)}},t.exports=o},function(t,n,i){var a=function(){function l(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,h.key,h)}}return function(c,f,d){return f&&l(c.prototype,f),d&&l(c,d),c}}();function o(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var s=i(11),u=function(){function l(c,f){o(this,l),(f!==null||f!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var d=void 0;c instanceof s?d=c.size():d=c.length,this._quicksort(c,0,d-1)}return a(l,[{key:"_quicksort",value:function(f,d,h){if(d<h){var v=this._partition(f,d,h);this._quicksort(f,d,v),this._quicksort(f,v+1,h)}}},{key:"_partition",value:function(f,d,h){for(var v=this._get(f,d),p=d,g=h;;){for(;this.compareFunction(v,this._get(f,g));)g--;for(;this.compareFunction(this._get(f,p),v);)p++;if(p<g)this._swap(f,p,g),p++,g--;else return g}}},{key:"_get",value:function(f,d){return f instanceof s?f.get_object_at(d):f[d]}},{key:"_set",value:function(f,d,h){f instanceof s?f.set_object_at(d,h):f[d]=h}},{key:"_swap",value:function(f,d,h){var v=this._get(f,d);this._set(f,d,this._get(f,h)),this._set(f,h,v)}},{key:"_defaultCompareFunction",value:function(f,d){return d>f}}]),l}();t.exports=u},function(t,n,i){var a=function(){function u(l,c){for(var f=0;f<c.length;f++){var d=c[f];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,d.key,d)}}return function(l,c,f){return c&&u(l.prototype,c),f&&u(l,f),l}}();function o(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}var s=function(){function u(l,c){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;o(this,u),this.sequence1=l,this.sequence2=c,this.match_score=f,this.mismatch_penalty=d,this.gap_penalty=h,this.iMax=l.length+1,this.jMax=c.length+1,this.grid=new Array(this.iMax);for(var v=0;v<this.iMax;v++){this.grid[v]=new Array(this.jMax);for(var p=0;p<this.jMax;p++)this.grid[v][p]=0}this.tracebackGrid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=new Array(this.jMax);for(var y=0;y<this.jMax;y++)this.tracebackGrid[g][y]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return a(u,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var c=1;c<this.jMax;c++)this.grid[0][c]=this.grid[0][c-1]+this.gap_penalty,this.tracebackGrid[0][c]=[!1,!1,!0];for(var f=1;f<this.iMax;f++)this.grid[f][0]=this.grid[f-1][0]+this.gap_penalty,this.tracebackGrid[f][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var h=1;h<this.jMax;h++){var v=void 0;this.sequence1[d-1]===this.sequence2[h-1]?v=this.grid[d-1][h-1]+this.match_score:v=this.grid[d-1][h-1]+this.mismatch_penalty;var p=this.grid[d-1][h]+this.gap_penalty,g=this.grid[d][h-1]+this.gap_penalty,y=[v,p,g],b=this.arrayAllMaxIndexes(y);this.grid[d][h]=y[b[0]],this.tracebackGrid[d][h]=[b.includes(0),b.includes(1),b.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var c=[];for(c.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});c[0];){var f=c[0],d=this.tracebackGrid[f.pos[0]][f.pos[1]];d[0]&&c.push({pos:[f.pos[0]-1,f.pos[1]-1],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),d[1]&&c.push({pos:[f.pos[0]-1,f.pos[1]],seq1:this.sequence1[f.pos[0]-1]+f.seq1,seq2:"-"+f.seq2}),d[2]&&c.push({pos:[f.pos[0],f.pos[1]-1],seq1:"-"+f.seq1,seq2:this.sequence2[f.pos[1]-1]+f.seq2}),f.pos[0]===0&&f.pos[1]===0&&this.alignments.push({sequence1:f.seq1,sequence2:f.seq2}),c.shift()}return this.alignments}},{key:"getAllIndexes",value:function(c,f){for(var d=[],h=-1;(h=c.indexOf(f,h+1))!==-1;)d.push(h);return d}},{key:"arrayAllMaxIndexes",value:function(c){return this.getAllIndexes(c,Math.max.apply(null,c))}}]),u}();t.exports=s},function(t,n,i){var a=function(){};a.FDLayout=i(18),a.FDLayoutConstants=i(7),a.FDLayoutEdge=i(19),a.FDLayoutNode=i(20),a.DimensionD=i(21),a.HashMap=i(22),a.HashSet=i(23),a.IGeometry=i(8),a.IMath=i(9),a.Integer=i(10),a.Point=i(12),a.PointD=i(4),a.RandomSeed=i(16),a.RectangleD=i(13),a.Transform=i(17),a.UniqueIDGeneretor=i(14),a.Quicksort=i(24),a.LinkedList=i(11),a.LGraphObject=i(2),a.LGraph=i(5),a.LEdge=i(1),a.LGraphManager=i(6),a.LNode=i(3),a.Layout=i(15),a.LayoutConstants=i(0),a.NeedlemanWunsch=i(25),t.exports=a},function(t,n,i){function a(){this.listeners=[]}var o=a.prototype;o.addListener=function(s,u){this.listeners.push({event:s,callback:u})},o.removeListener=function(s,u){for(var l=this.listeners.length;l>=0;l--){var c=this.listeners[l];c.event===s&&c.callback===u&&this.listeners.splice(l,1)}},o.emit=function(s,u){for(var l=0;l<this.listeners.length;l++){var c=this.listeners[l];s===c.event&&c.callback(u)}},t.exports=a}])})}(ax)),ax.exports}var Uk;function yH(){return Uk||(Uk=1,function(r,e){(function(n,i){r.exports=i(gH())})(Lr,function(t){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.i=function(o){return o},a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=7)}([function(n,i){n.exports=t},function(n,i,a){var o=a(0).FDLayoutConstants;function s(){}for(var u in o)s[u]=o[u];s.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,s.DEFAULT_RADIAL_SEPARATION=o.DEFAULT_EDGE_LENGTH,s.DEFAULT_COMPONENT_SEPERATION=60,s.TILE=!0,s.TILING_PADDING_VERTICAL=10,s.TILING_PADDING_HORIZONTAL=10,s.TREE_REDUCTION_ON_INCREMENTAL=!1,n.exports=s},function(n,i,a){var o=a(0).FDLayoutEdge;function s(l,c,f){o.call(this,l,c,f)}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];n.exports=s},function(n,i,a){var o=a(0).LGraph;function s(l,c,f){o.call(this,l,c,f)}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];n.exports=s},function(n,i,a){var o=a(0).LGraphManager;function s(l){o.call(this,l)}s.prototype=Object.create(o.prototype);for(var u in o)s[u]=o[u];n.exports=s},function(n,i,a){var o=a(0).FDLayoutNode,s=a(0).IMath;function u(c,f,d,h){o.call(this,c,f,d,h)}u.prototype=Object.create(o.prototype);for(var l in o)u[l]=o[l];u.prototype.move=function(){var c=this.graphManager.getLayout();this.displacementX=c.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=c.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementX=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementX)),Math.abs(this.displacementY)>c.coolingFactor*c.maxNodeDisplacement&&(this.displacementY=c.coolingFactor*c.maxNodeDisplacement*s.sign(this.displacementY)),this.child==null?this.moveBy(this.displacementX,this.displacementY):this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),c.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},u.prototype.propogateDisplacementToChildren=function(c,f){for(var d=this.getChild().getNodes(),h,v=0;v<d.length;v++)h=d[v],h.getChild()==null?(h.moveBy(c,f),h.displacementX+=c,h.displacementY+=f):h.propogateDisplacementToChildren(c,f)},u.prototype.setPred1=function(c){this.pred1=c},u.prototype.getPred1=function(){return pred1},u.prototype.getPred2=function(){return pred2},u.prototype.setNext=function(c){this.next=c},u.prototype.getNext=function(){return next},u.prototype.setProcessed=function(c){this.processed=c},u.prototype.isProcessed=function(){return processed},n.exports=u},function(n,i,a){var o=a(0).FDLayout,s=a(4),u=a(3),l=a(5),c=a(2),f=a(1),d=a(0).FDLayoutConstants,h=a(0).LayoutConstants,v=a(0).Point,p=a(0).PointD,g=a(0).Layout,y=a(0).Integer,b=a(0).IGeometry,m=a(0).LGraph,_=a(0).Transform;function x(){o.call(this),this.toBeTiled={}}x.prototype=Object.create(o.prototype);for(var C in o)x[C]=o[C];x.prototype.newGraphManager=function(){var w=new s(this);return this.graphManager=w,w},x.prototype.newGraph=function(w){return new u(null,this.graphManager,w)},x.prototype.newNode=function(w){return new l(this.graphManager,w)},x.prototype.newEdge=function(w){return new c(null,null,w)},x.prototype.initParameters=function(){o.prototype.initParameters.call(this,arguments),this.isSubLayout||(f.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=f.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=f.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=d.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=d.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=d.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=d.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=d.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=d.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/d.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=d.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},x.prototype.layout=function(){var w=h.DEFAULT_CREATE_BENDS_AS_NEEDED;return w&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(f.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter(function(I){return O.has(I)});this.graphManager.setAllNodesToApplyGravitation(A)}}else{var w=this.getFlatForest();if(w.length>0)this.positionNodesRadially(w);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var O=new Set(this.getAllNodes()),A=this.nodesWithGravity.filter(function(k){return O.has(k)});this.graphManager.setAllNodesToApplyGravitation(A),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%d.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var w=new Set(this.getAllNodes()),O=this.nodesWithGravity.filter(function(R){return w.has(R)});this.graphManager.setAllNodesToApplyGravitation(O),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=d.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var A=!this.isTreeGrowing&&!this.isGrowthFinished,k=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(A,k),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var w=this.graphManager.getAllNodes(),O={},A=0;A<w.length;A++){var k=w[A].rect,R=w[A].id;O[R]={id:R,x:k.getCenterX(),y:k.getCenterY(),w:k.width,h:k.height}}return O},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var w=!1;if(d.ANIMATE==="during")this.emit("layoutstarted");else{for(;!w;)w=this.tick();this.graphManager.updateBounds()}},x.prototype.calculateNodesToApplyGravitationTo=function(){var w=[],O,A=this.graphManager.getGraphs(),k=A.length,R;for(R=0;R<k;R++)O=A[R],O.updateConnected(),O.isConnected||(w=w.concat(O.getNodes()));return w},x.prototype.createBendpoints=function(){var w=[];w=w.concat(this.graphManager.getAllEdges());var O=new Set,A;for(A=0;A<w.length;A++){var k=w[A];if(!O.has(k)){var R=k.getSource(),I=k.getTarget();if(R==I)k.getBendpoints().push(new p),k.getBendpoints().push(new p),this.createDummyNodesForBendpoints(k),O.add(k);else{var M=[];if(M=M.concat(R.getEdgeListToNode(I)),M=M.concat(I.getEdgeListToNode(R)),!O.has(M[0])){if(M.length>1){var N;for(N=0;N<M.length;N++){var F=M[N];F.getBendpoints().push(new p),this.createDummyNodesForBendpoints(F)}}M.forEach(function(z){O.add(z)})}}}if(O.size==w.length)break}},x.prototype.positionNodesRadially=function(w){for(var O=new v(0,0),A=Math.ceil(Math.sqrt(w.length)),k=0,R=0,I=0,M=new p(0,0),N=0;N<w.length;N++){N%A==0&&(I=0,R=k,N!=0&&(R+=f.DEFAULT_COMPONENT_SEPERATION),k=0);var F=w[N],z=g.findCenterOfTree(F);O.x=I,O.y=R,M=x.radialLayout(F,z,O),M.y>k&&(k=Math.floor(M.y)),I=Math.floor(M.x+f.DEFAULT_COMPONENT_SEPERATION)}this.transform(new p(h.WORLD_CENTER_X-M.x/2,h.WORLD_CENTER_Y-M.y/2))},x.radialLayout=function(w,O,A){var k=Math.max(this.maxDiagonalInTree(w),f.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(O,null,0,359,0,k);var R=m.calculateBounds(w),I=new _;I.setDeviceOrgX(R.getMinX()),I.setDeviceOrgY(R.getMinY()),I.setWorldOrgX(A.x),I.setWorldOrgY(A.y);for(var M=0;M<w.length;M++){var N=w[M];N.transform(I)}var F=new p(R.getMaxX(),R.getMaxY());return I.inverseTransformPoint(F)},x.branchRadialLayout=function(w,O,A,k,R,I){var M=(k-A+1)/2;M<0&&(M+=180);var N=(M+A)%360,F=N*b.TWO_PI/360,z=R*Math.cos(F),B=R*Math.sin(F);w.setCenter(z,B);var U=[];U=U.concat(w.getEdges());var W=U.length;O!=null&&W--;for(var Y=0,H=U.length,J,le=w.getEdgesBetween(O);le.length>1;){var fe=le[0];le.splice(0,1);var ue=U.indexOf(fe);ue>=0&&U.splice(ue,1),H--,W--}O!=null?J=(U.indexOf(le[0])+1)%H:J=0;for(var ge=Math.abs(k-A)/W,ve=J;Y!=W;ve=++ve%H){var de=U[ve].getOtherEnd(w);if(de!=O){var ie=(A+Y*ge)%360,Q=(ie+ge)%360;x.branchRadialLayout(de,w,ie,Q,R+I,I),Y++}}},x.maxDiagonalInTree=function(w){for(var O=y.MIN_VALUE,A=0;A<w.length;A++){var k=w[A],R=k.getDiagonal();R>O&&(O=R)}return O},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var w=this,O={};this.memberGroups={},this.idToDummyNode={};for(var A=[],k=this.graphManager.getAllNodes(),R=0;R<k.length;R++){var I=k[R],M=I.getParent();this.getNodeDegreeWithChildren(I)===0&&(M.id==null||!this.getToBeTiled(M))&&A.push(I)}for(var R=0;R<A.length;R++){var I=A[R],N=I.getParent().id;typeof O[N]>"u"&&(O[N]=[]),O[N]=O[N].concat(I)}Object.keys(O).forEach(function(F){if(O[F].length>1){var z="DummyCompound_"+F;w.memberGroups[z]=O[F];var B=O[F][0].getParent(),U=new l(w.graphManager);U.id=z,U.paddingLeft=B.paddingLeft||0,U.paddingRight=B.paddingRight||0,U.paddingBottom=B.paddingBottom||0,U.paddingTop=B.paddingTop||0,w.idToDummyNode[z]=U;var W=w.getGraphManager().add(w.newGraph(),U),Y=B.getChild();Y.add(U);for(var H=0;H<O[F].length;H++){var J=O[F][H];Y.remove(J),W.add(J)}}})},x.prototype.clearCompounds=function(){var w={},O={};this.performDFSOnCompounds();for(var A=0;A<this.compoundOrder.length;A++)O[this.compoundOrder[A].id]=this.compoundOrder[A],w[this.compoundOrder[A].id]=[].concat(this.compoundOrder[A].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[A].getChild()),this.compoundOrder[A].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(w,O)},x.prototype.clearZeroDegreeMembers=function(){var w=this,O=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(A){var k=w.idToDummyNode[A];O[A]=w.tileNodes(w.memberGroups[A],k.paddingLeft+k.paddingRight),k.rect.width=O[A].width,k.rect.height=O[A].height})},x.prototype.repopulateCompounds=function(){for(var w=this.compoundOrder.length-1;w>=0;w--){var O=this.compoundOrder[w],A=O.id,k=O.paddingLeft,R=O.paddingTop;this.adjustLocations(this.tiledMemberPack[A],O.rect.x,O.rect.y,k,R)}},x.prototype.repopulateZeroDegreeMembers=function(){var w=this,O=this.tiledZeroDegreePack;Object.keys(O).forEach(function(A){var k=w.idToDummyNode[A],R=k.paddingLeft,I=k.paddingTop;w.adjustLocations(O[A],k.rect.x,k.rect.y,R,I)})},x.prototype.getToBeTiled=function(w){var O=w.id;if(this.toBeTiled[O]!=null)return this.toBeTiled[O];var A=w.getChild();if(A==null)return this.toBeTiled[O]=!1,!1;for(var k=A.getNodes(),R=0;R<k.length;R++){var I=k[R];if(this.getNodeDegree(I)>0)return this.toBeTiled[O]=!1,!1;if(I.getChild()==null){this.toBeTiled[I.id]=!1;continue}if(!this.getToBeTiled(I))return this.toBeTiled[O]=!1,!1}return this.toBeTiled[O]=!0,!0},x.prototype.getNodeDegree=function(w){w.id;for(var O=w.getEdges(),A=0,k=0;k<O.length;k++){var R=O[k];R.getSource().id!==R.getTarget().id&&(A=A+1)}return A},x.prototype.getNodeDegreeWithChildren=function(w){var O=this.getNodeDegree(w);if(w.getChild()==null)return O;for(var A=w.getChild().getNodes(),k=0;k<A.length;k++){var R=A[k];O+=this.getNodeDegreeWithChildren(R)}return O},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(w){for(var O=0;O<w.length;O++){var A=w[O];A.getChild()!=null&&this.fillCompexOrderByDFS(A.getChild().getNodes()),this.getToBeTiled(A)&&this.compoundOrder.push(A)}},x.prototype.adjustLocations=function(w,O,A,k,R){O+=k,A+=R;for(var I=O,M=0;M<w.rows.length;M++){var N=w.rows[M];O=I;for(var F=0,z=0;z<N.length;z++){var B=N[z];B.rect.x=O,B.rect.y=A,O+=B.rect.width+w.horizontalPadding,B.rect.height>F&&(F=B.rect.height)}A+=F+w.verticalPadding}},x.prototype.tileCompoundMembers=function(w,O){var A=this;this.tiledMemberPack=[],Object.keys(w).forEach(function(k){var R=O[k];A.tiledMemberPack[k]=A.tileNodes(w[k],R.paddingLeft+R.paddingRight),R.rect.width=A.tiledMemberPack[k].width,R.rect.height=A.tiledMemberPack[k].height})},x.prototype.tileNodes=function(w,O){var A=f.TILING_PADDING_VERTICAL,k=f.TILING_PADDING_HORIZONTAL,R={rows:[],rowWidth:[],rowHeight:[],width:0,height:O,verticalPadding:A,horizontalPadding:k};w.sort(function(N,F){return N.rect.width*N.rect.height>F.rect.width*F.rect.height?-1:N.rect.width*N.rect.height<F.rect.width*F.rect.height?1:0});for(var I=0;I<w.length;I++){var M=w[I];R.rows.length==0?this.insertNodeToRow(R,M,0,O):this.canAddHorizontal(R,M.rect.width,M.rect.height)?this.insertNodeToRow(R,M,this.getShortestRowIndex(R),O):this.insertNodeToRow(R,M,R.rows.length,O),this.shiftToLastRow(R)}return R},x.prototype.insertNodeToRow=function(w,O,A,k){var R=k;if(A==w.rows.length){var I=[];w.rows.push(I),w.rowWidth.push(R),w.rowHeight.push(0)}var M=w.rowWidth[A]+O.rect.width;w.rows[A].length>0&&(M+=w.horizontalPadding),w.rowWidth[A]=M,w.width<M&&(w.width=M);var N=O.rect.height;A>0&&(N+=w.verticalPadding);var F=0;N>w.rowHeight[A]&&(F=w.rowHeight[A],w.rowHeight[A]=N,F=w.rowHeight[A]-F),w.height+=F,w.rows[A].push(O)},x.prototype.getShortestRowIndex=function(w){for(var O=-1,A=Number.MAX_VALUE,k=0;k<w.rows.length;k++)w.rowWidth[k]<A&&(O=k,A=w.rowWidth[k]);return O},x.prototype.getLongestRowIndex=function(w){for(var O=-1,A=Number.MIN_VALUE,k=0;k<w.rows.length;k++)w.rowWidth[k]>A&&(O=k,A=w.rowWidth[k]);return O},x.prototype.canAddHorizontal=function(w,O,A){var k=this.getShortestRowIndex(w);if(k<0)return!0;var R=w.rowWidth[k];if(R+w.horizontalPadding+O<=w.width)return!0;var I=0;w.rowHeight[k]<A&&k>0&&(I=A+w.verticalPadding-w.rowHeight[k]);var M;w.width-R>=O+w.horizontalPadding?M=(w.height+I)/(R+O+w.horizontalPadding):M=(w.height+I)/w.width,I=A+w.verticalPadding;var N;return w.width<O?N=(w.height+I)/O:N=(w.height+I)/w.width,N<1&&(N=1/N),M<1&&(M=1/M),M<N},x.prototype.shiftToLastRow=function(w){var O=this.getLongestRowIndex(w),A=w.rowWidth.length-1,k=w.rows[O],R=k[k.length-1],I=R.width+w.horizontalPadding;if(w.width-w.rowWidth[A]>I&&O!=A){k.splice(-1,1),w.rows[A].push(R),w.rowWidth[O]=w.rowWidth[O]-I,w.rowWidth[A]=w.rowWidth[A]+I,w.width=w.rowWidth[instance.getLongestRowIndex(w)];for(var M=Number.MIN_VALUE,N=0;N<k.length;N++)k[N].height>M&&(M=k[N].height);O>0&&(M+=w.verticalPadding);var F=w.rowHeight[O]+w.rowHeight[A];w.rowHeight[O]=M,w.rowHeight[A]<R.height+w.verticalPadding&&(w.rowHeight[A]=R.height+w.verticalPadding);var z=w.rowHeight[O]+w.rowHeight[A];w.height+=z-F,this.shiftToLastRow(w)}},x.prototype.tilingPreLayout=function(){f.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){f.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var w=[],O=!0,A;O;){var k=this.graphManager.getAllNodes(),R=[];O=!1;for(var I=0;I<k.length;I++)A=k[I],A.getEdges().length==1&&!A.getEdges()[0].isInterGraph&&A.getChild()==null&&(R.push([A,A.getEdges()[0],A.getOwner()]),O=!0);if(O==!0){for(var M=[],N=0;N<R.length;N++)R[N][0].getEdges().length==1&&(M.push(R[N]),R[N][0].getOwner().remove(R[N][0]));w.push(M),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=w},x.prototype.growTree=function(w){for(var O=w.length,A=w[O-1],k,R=0;R<A.length;R++)k=A[R],this.findPlaceforPrunedNode(k),k[2].add(k[0]),k[2].add(k[1],k[1].source,k[1].target);w.splice(w.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(w){var O,A,k=w[0];k==w[1].source?A=w[1].target:A=w[1].source;var R=A.startX,I=A.finishX,M=A.startY,N=A.finishY,F=0,z=0,B=0,U=0,W=[F,B,z,U];if(M>0)for(var Y=R;Y<=I;Y++)W[0]+=this.grid[Y][M-1].length+this.grid[Y][M].length-1;if(I<this.grid.length-1)for(var Y=M;Y<=N;Y++)W[1]+=this.grid[I+1][Y].length+this.grid[I][Y].length-1;if(N<this.grid[0].length-1)for(var Y=R;Y<=I;Y++)W[2]+=this.grid[Y][N+1].length+this.grid[Y][N].length-1;if(R>0)for(var Y=M;Y<=N;Y++)W[3]+=this.grid[R-1][Y].length+this.grid[R][Y].length-1;for(var H=y.MAX_VALUE,J,le,fe=0;fe<W.length;fe++)W[fe]<H?(H=W[fe],J=1,le=fe):W[fe]==H&&J++;if(J==3&&H==0)W[0]==0&&W[1]==0&&W[2]==0?O=1:W[0]==0&&W[1]==0&&W[3]==0?O=0:W[0]==0&&W[2]==0&&W[3]==0?O=3:W[1]==0&&W[2]==0&&W[3]==0&&(O=2);else if(J==2&&H==0){var ue=Math.floor(Math.random()*2);W[0]==0&&W[1]==0?ue==0?O=0:O=1:W[0]==0&&W[2]==0?ue==0?O=0:O=2:W[0]==0&&W[3]==0?ue==0?O=0:O=3:W[1]==0&&W[2]==0?ue==0?O=1:O=2:W[1]==0&&W[3]==0?ue==0?O=1:O=3:ue==0?O=2:O=3}else if(J==4&&H==0){var ue=Math.floor(Math.random()*4);O=ue}else O=le;O==0?k.setCenter(A.getCenterX(),A.getCenterY()-A.getHeight()/2-d.DEFAULT_EDGE_LENGTH-k.getHeight()/2):O==1?k.setCenter(A.getCenterX()+A.getWidth()/2+d.DEFAULT_EDGE_LENGTH+k.getWidth()/2,A.getCenterY()):O==2?k.setCenter(A.getCenterX(),A.getCenterY()+A.getHeight()/2+d.DEFAULT_EDGE_LENGTH+k.getHeight()/2):k.setCenter(A.getCenterX()-A.getWidth()/2-d.DEFAULT_EDGE_LENGTH-k.getWidth()/2,A.getCenterY())},n.exports=x},function(n,i,a){var o={};o.layoutBase=a(0),o.CoSEConstants=a(1),o.CoSEEdge=a(2),o.CoSEGraph=a(3),o.CoSEGraphManager=a(4),o.CoSELayout=a(6),o.CoSENode=a(5),n.exports=o}])})}(ix)),ix.exports}(function(r,e){(function(n,i){r.exports=i(yH())})(Lr,function(t){return function(n){var i={};function a(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return n[o].call(s.exports,s,s.exports,a),s.l=!0,s.exports}return a.m=n,a.c=i,a.i=function(o){return o},a.d=function(o,s,u){a.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},a.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(s,"a",s),s},a.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},a.p="",a(a.s=1)}([function(n,i){n.exports=t},function(n,i,a){var o=a(0).layoutBase.LayoutConstants,s=a(0).layoutBase.FDLayoutConstants,u=a(0).CoSEConstants,l=a(0).CoSELayout,c=a(0).CoSENode,f=a(0).layoutBase.PointD,d=a(0).layoutBase.DimensionD,h={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function v(b,m){var _={};for(var x in b)_[x]=b[x];for(var x in m)_[x]=m[x];return _}function p(b){this.options=v(h,b),g(this.options)}var g=function(m){m.nodeRepulsion!=null&&(u.DEFAULT_REPULSION_STRENGTH=s.DEFAULT_REPULSION_STRENGTH=m.nodeRepulsion),m.idealEdgeLength!=null&&(u.DEFAULT_EDGE_LENGTH=s.DEFAULT_EDGE_LENGTH=m.idealEdgeLength),m.edgeElasticity!=null&&(u.DEFAULT_SPRING_STRENGTH=s.DEFAULT_SPRING_STRENGTH=m.edgeElasticity),m.nestingFactor!=null&&(u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=m.nestingFactor),m.gravity!=null&&(u.DEFAULT_GRAVITY_STRENGTH=s.DEFAULT_GRAVITY_STRENGTH=m.gravity),m.numIter!=null&&(u.MAX_ITERATIONS=s.MAX_ITERATIONS=m.numIter),m.gravityRange!=null&&(u.DEFAULT_GRAVITY_RANGE_FACTOR=s.DEFAULT_GRAVITY_RANGE_FACTOR=m.gravityRange),m.gravityCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=m.gravityCompound),m.gravityRangeCompound!=null&&(u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=m.gravityRangeCompound),m.initialEnergyOnIncremental!=null&&(u.DEFAULT_COOLING_FACTOR_INCREMENTAL=s.DEFAULT_COOLING_FACTOR_INCREMENTAL=m.initialEnergyOnIncremental),m.quality=="draft"?o.QUALITY=0:m.quality=="proof"?o.QUALITY=2:o.QUALITY=1,u.NODE_DIMENSIONS_INCLUDE_LABELS=s.NODE_DIMENSIONS_INCLUDE_LABELS=o.NODE_DIMENSIONS_INCLUDE_LABELS=m.nodeDimensionsIncludeLabels,u.DEFAULT_INCREMENTAL=s.DEFAULT_INCREMENTAL=o.DEFAULT_INCREMENTAL=!m.randomize,u.ANIMATE=s.ANIMATE=o.ANIMATE=m.animate,u.TILE=m.tile,u.TILING_PADDING_VERTICAL=typeof m.tilingPaddingVertical=="function"?m.tilingPaddingVertical.call():m.tilingPaddingVertical,u.TILING_PADDING_HORIZONTAL=typeof m.tilingPaddingHorizontal=="function"?m.tilingPaddingHorizontal.call():m.tilingPaddingHorizontal};p.prototype.run=function(){var b,m,_=this.options;this.idToLNode={};var x=this.layout=new l,C=this;C.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var w=x.newGraphManager();this.gm=w;var O=this.options.eles.nodes(),A=this.options.eles.edges();this.root=w.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(O),x);for(var k=0;k<A.length;k++){var R=A[k],I=this.idToLNode[R.data("source")],M=this.idToLNode[R.data("target")];if(I!==M&&I.getEdgesBetween(M).length==0){var N=w.add(x.newEdge(),I,M);N.id=R.id()}}var F=function(U,W){typeof U=="number"&&(U=W);var Y=U.data("id"),H=C.idToLNode[Y];return{x:H.getRect().getCenterX(),y:H.getRect().getCenterY()}},z=function B(){for(var U=function(){_.fit&&_.cy.fit(_.eles,_.padding),b||(b=!0,C.cy.one("layoutready",_.ready),C.cy.trigger({type:"layoutready",layout:C}))},W=C.options.refresh,Y,H=0;H<W&&!Y;H++)Y=C.stopped||C.layout.tick();if(Y){x.checkLayoutSuccess()&&!x.isSubLayout&&x.doPostLayout(),x.tilingPostLayout&&x.tilingPostLayout(),x.isLayoutFinished=!0,C.options.eles.nodes().positions(F),U(),C.cy.one("layoutstop",C.options.stop),C.cy.trigger({type:"layoutstop",layout:C}),m&&cancelAnimationFrame(m),b=!1;return}var J=C.layout.getPositionsData();_.eles.nodes().positions(function(le,fe){if(typeof le=="number"&&(le=fe),!le.isParent()){for(var ue=le.id(),ge=J[ue],ve=le;ge==null&&(ge=J[ve.data("parent")]||J["DummyCompound_"+ve.data("parent")],J[ue]=ge,ve=ve.parent()[0],ve!=null););return ge!=null?{x:ge.x,y:ge.y}:{x:le.position("x"),y:le.position("y")}}}),U(),m=requestAnimationFrame(B)};return x.addListener("layoutstarted",function(){C.options.animate==="during"&&(m=requestAnimationFrame(z))}),x.runLayout(),this.options.animate!=="during"&&(C.options.eles.nodes().not(":parent").layoutPositions(C,C.options,F),b=!1),this},p.prototype.getTopMostNodes=function(b){for(var m={},_=0;_<b.length;_++)m[b[_].id()]=!0;var x=b.filter(function(C,w){typeof C=="number"&&(C=w);for(var O=C.parent()[0];O!=null;){if(m[O.id()])return!1;O=O.parent()[0]}return!0});return x},p.prototype.processChildrenList=function(b,m,_){for(var x=m.length,C=0;C<x;C++){var w=m[C],O=w.children(),A,k=w.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(w.outerWidth()!=null&&w.outerHeight()!=null?A=b.add(new c(_.graphManager,new f(w.position("x")-k.w/2,w.position("y")-k.h/2),new d(parseFloat(k.w),parseFloat(k.h)))):A=b.add(new c(this.graphManager)),A.id=w.data("id"),A.paddingLeft=parseInt(w.css("padding")),A.paddingTop=parseInt(w.css("padding")),A.paddingRight=parseInt(w.css("padding")),A.paddingBottom=parseInt(w.css("padding")),this.options.nodeDimensionsIncludeLabels&&w.isParent()){var R=w.boundingBox({includeLabels:!0,includeNodes:!1}).w,I=w.boundingBox({includeLabels:!0,includeNodes:!1}).h,M=w.css("text-halign");A.labelWidth=R,A.labelHeight=I,A.labelPos=M}if(this.idToLNode[w.data("id")]=A,isNaN(A.rect.x)&&(A.rect.x=0),isNaN(A.rect.y)&&(A.rect.y=0),O!=null&&O.length>0){var N;N=_.getGraphManager().add(_.newGraph(),A),this.processChildrenList(N,O,_)}}},p.prototype.stop=function(){return this.stopped=!0,this};var y=function(m){m("layout","cose-bilkent",p)};typeof cytoscape<"u"&&y(cytoscape),n.exports=y}])})})(Kj);var mH=Kj.exports;const bH=U0(mH);Ql.use(bH);const _H="cose-bilkent",wH=(r,e)=>{const t=Ql({headless:!0,styleEnabled:!1});t.add(r);const n={};return t.layout({name:_H,animate:!1,spacingFactor:e,quality:"default",tile:!1,randomize:!0,stop:()=>{t.nodes().forEach(a=>{n[a.id()]={...a.position()}})}}).run(),{positions:n}};class xH{start(){}postMessage(e){const{elements:t,spacingFactor:n}=e,i=wH(t,n);this.onmessage({data:i})}onmessage(){}close(){}}const EH={port:new xH},OH=()=>new SharedWorker(new URL("/assets/CoseBilkentLayout.worker-BhgoYVHw.js",import.meta.url),{type:"module",name:"CoseBilkentLayout"});function SH(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ox,zk;function CH(){if(zk)return ox;zk=1;function r(){this.__data__=[],this.size=0}return ox=r,ox}var sx,qk;function _T(){if(qk)return sx;qk=1;function r(e,t){return e===t||e!==e&&t!==t}return sx=r,sx}var ux,Gk;function z0(){if(Gk)return ux;Gk=1;var r=_T();function e(t,n){for(var i=t.length;i--;)if(r(t[i][0],n))return i;return-1}return ux=e,ux}var lx,Vk;function TH(){if(Vk)return lx;Vk=1;var r=z0(),e=Array.prototype,t=e.splice;function n(i){var a=this.__data__,o=r(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():t.call(a,o,1),--this.size,!0}return lx=n,lx}var cx,$k;function AH(){if($k)return cx;$k=1;var r=z0();function e(t){var n=this.__data__,i=r(n,t);return i<0?void 0:n[i][1]}return cx=e,cx}var fx,Wk;function PH(){if(Wk)return fx;Wk=1;var r=z0();function e(t){return r(this.__data__,t)>-1}return fx=e,fx}var dx,Hk;function RH(){if(Hk)return dx;Hk=1;var r=z0();function e(t,n){var i=this.__data__,a=r(i,t);return a<0?(++this.size,i.push([t,n])):i[a][1]=n,this}return dx=e,dx}var hx,Yk;function q0(){if(Yk)return hx;Yk=1;var r=CH(),e=TH(),t=AH(),n=PH(),i=RH();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,hx=a,hx}var vx,Xk;function kH(){if(Xk)return vx;Xk=1;var r=q0();function e(){this.__data__=new r,this.size=0}return vx=e,vx}var px,Kk;function IH(){if(Kk)return px;Kk=1;function r(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}return px=r,px}var gx,Zk;function DH(){if(Zk)return gx;Zk=1;function r(e){return this.__data__.get(e)}return gx=r,gx}var yx,Qk;function MH(){if(Qk)return yx;Qk=1;function r(e){return this.__data__.has(e)}return yx=r,yx}var mx,Jk;function Zj(){if(Jk)return mx;Jk=1;var r=typeof Lr=="object"&&Lr&&Lr.Object===Object&&Lr;return mx=r,mx}var bx,eI;function zs(){if(eI)return bx;eI=1;var r=Zj(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return bx=t,bx}var _x,tI;function Yh(){if(tI)return _x;tI=1;var r=zs(),e=r.Symbol;return _x=e,_x}var wx,rI;function LH(){if(rI)return wx;rI=1;var r=Yh(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,i=r?r.toStringTag:void 0;function a(o){var s=t.call(o,i),u=o[i];try{o[i]=void 0;var l=!0}catch{}var c=n.call(o);return l&&(s?o[i]=u:delete o[i]),c}return wx=a,wx}var xx,nI;function NH(){if(nI)return xx;nI=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return xx=t,xx}var Ex,iI;function Xh(){if(iI)return Ex;iI=1;var r=Yh(),e=LH(),t=NH(),n="[object Null]",i="[object Undefined]",a=r?r.toStringTag:void 0;function o(s){return s==null?s===void 0?i:n:a&&a in Object(s)?e(s):t(s)}return Ex=o,Ex}var Ox,aI;function Lf(){if(aI)return Ox;aI=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return Ox=r,Ox}var Sx,oI;function G0(){if(oI)return Sx;oI=1;var r=Xh(),e=Lf(),t="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var u=r(s);return u==n||u==i||u==t||u==a}return Sx=o,Sx}var Cx,sI;function jH(){if(sI)return Cx;sI=1;var r=zs(),e=r["__core-js_shared__"];return Cx=e,Cx}var Tx,uI;function FH(){if(uI)return Tx;uI=1;var r=jH(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return Tx=t,Tx}var Ax,lI;function Qj(){if(lI)return Ax;lI=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return Ax=t,Ax}var Px,cI;function BH(){if(cI)return Px;cI=1;var r=G0(),e=FH(),t=Lf(),n=Qj(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=RegExp("^"+u.call(l).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!t(d)||e(d))return!1;var h=r(d)?c:a;return h.test(n(d))}return Px=f,Px}var Rx,fI;function UH(){if(fI)return Rx;fI=1;function r(e,t){return e==null?void 0:e[t]}return Rx=r,Rx}var kx,dI;function Nf(){if(dI)return kx;dI=1;var r=BH(),e=UH();function t(n,i){var a=e(n,i);return r(a)?a:void 0}return kx=t,kx}var Ix,hI;function wT(){if(hI)return Ix;hI=1;var r=Nf(),e=zs(),t=r(e,"Map");return Ix=t,Ix}var Dx,vI;function V0(){if(vI)return Dx;vI=1;var r=Nf(),e=r(Object,"create");return Dx=e,Dx}var Mx,pI;function zH(){if(pI)return Mx;pI=1;var r=V0();function e(){this.__data__=r?r(null):{},this.size=0}return Mx=e,Mx}var Lx,gI;function qH(){if(gI)return Lx;gI=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return Lx=r,Lx}var Nx,yI;function GH(){if(yI)return Nx;yI=1;var r=V0(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function i(a){var o=this.__data__;if(r){var s=o[a];return s===e?void 0:s}return n.call(o,a)?o[a]:void 0}return Nx=i,Nx}var jx,mI;function VH(){if(mI)return jx;mI=1;var r=V0(),e=Object.prototype,t=e.hasOwnProperty;function n(i){var a=this.__data__;return r?a[i]!==void 0:t.call(a,i)}return jx=n,jx}var Fx,bI;function $H(){if(bI)return Fx;bI=1;var r=V0(),e="__lodash_hash_undefined__";function t(n,i){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=r&&i===void 0?e:i,this}return Fx=t,Fx}var Bx,_I;function WH(){if(_I)return Bx;_I=1;var r=zH(),e=qH(),t=GH(),n=VH(),i=$H();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Bx=a,Bx}var Ux,wI;function HH(){if(wI)return Ux;wI=1;var r=WH(),e=q0(),t=wT();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return Ux=n,Ux}var zx,xI;function YH(){if(xI)return zx;xI=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return zx=r,zx}var qx,EI;function $0(){if(EI)return qx;EI=1;var r=YH();function e(t,n){var i=t.__data__;return r(n)?i[typeof n=="string"?"string":"hash"]:i.map}return qx=e,qx}var Gx,OI;function XH(){if(OI)return Gx;OI=1;var r=$0();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Gx=e,Gx}var Vx,SI;function KH(){if(SI)return Vx;SI=1;var r=$0();function e(t){return r(this,t).get(t)}return Vx=e,Vx}var $x,CI;function ZH(){if(CI)return $x;CI=1;var r=$0();function e(t){return r(this,t).has(t)}return $x=e,$x}var Wx,TI;function QH(){if(TI)return Wx;TI=1;var r=$0();function e(t,n){var i=r(this,t),a=i.size;return i.set(t,n),this.size+=i.size==a?0:1,this}return Wx=e,Wx}var Hx,AI;function xT(){if(AI)return Hx;AI=1;var r=HH(),e=XH(),t=KH(),n=ZH(),i=QH();function a(o){var s=-1,u=o==null?0:o.length;for(this.clear();++s<u;){var l=o[s];this.set(l[0],l[1])}}return a.prototype.clear=r,a.prototype.delete=e,a.prototype.get=t,a.prototype.has=n,a.prototype.set=i,Hx=a,Hx}var Yx,PI;function JH(){if(PI)return Yx;PI=1;var r=q0(),e=wT(),t=xT(),n=200;function i(a,o){var s=this.__data__;if(s instanceof r){var u=s.__data__;if(!e||u.length<n-1)return u.push([a,o]),this.size=++s.size,this;s=this.__data__=new t(u)}return s.set(a,o),this.size=s.size,this}return Yx=i,Yx}var Xx,RI;function ET(){if(RI)return Xx;RI=1;var r=q0(),e=kH(),t=IH(),n=DH(),i=MH(),a=JH();function o(s){var u=this.__data__=new r(s);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=i,o.prototype.set=a,Xx=o,Xx}var Kx,kI;function OT(){if(kI)return Kx;kI=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}return Kx=r,Kx}var Zx,II;function Jj(){if(II)return Zx;II=1;var r=Nf(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Zx=e,Zx}var Qx,DI;function e4(){if(DI)return Qx;DI=1;var r=Jj();function e(t,n,i){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}return Qx=e,Qx}var Jx,MI;function t4(){if(MI)return Jx;MI=1;var r=e4(),e=_T(),t=Object.prototype,n=t.hasOwnProperty;function i(a,o,s){var u=a[o];(!(n.call(a,o)&&e(u,s))||s===void 0&&!(o in a))&&r(a,o,s)}return Jx=i,Jx}var eE,LI;function W0(){if(LI)return eE;LI=1;var r=t4(),e=e4();function t(n,i,a,o){var s=!a;a||(a={});for(var u=-1,l=i.length;++u<l;){var c=i[u],f=o?o(a[c],n[c],c,a,n):void 0;f===void 0&&(f=n[c]),s?e(a,c,f):r(a,c,f)}return a}return eE=t,eE}var tE,NI;function eY(){if(NI)return tE;NI=1;function r(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}return tE=r,tE}var rE,jI;function Lu(){if(jI)return rE;jI=1;function r(e){return e!=null&&typeof e=="object"}return rE=r,rE}var nE,FI;function tY(){if(FI)return nE;FI=1;var r=Xh(),e=Lu(),t="[object Arguments]";function n(i){return e(i)&&r(i)==t}return nE=n,nE}var iE,BI;function H0(){if(BI)return iE;BI=1;var r=tY(),e=Lu(),t=Object.prototype,n=t.hasOwnProperty,i=t.propertyIsEnumerable,a=r(function(){return arguments}())?r:function(o){return e(o)&&n.call(o,"callee")&&!i.call(o,"callee")};return iE=a,iE}var aE,UI;function pi(){if(UI)return aE;UI=1;var r=Array.isArray;return aE=r,aE}var Sp={exports:{}},oE,zI;function rY(){if(zI)return oE;zI=1;function r(){return!1}return oE=r,oE}Sp.exports;var qI;function ty(){return qI||(qI=1,function(r,e){var t=zs(),n=rY(),i=e&&!e.nodeType&&e,a=i&&!0&&r&&!r.nodeType&&r,o=a&&a.exports===i,s=o?t.Buffer:void 0,u=s?s.isBuffer:void 0,l=u||n;r.exports=l}(Sp,Sp.exports)),Sp.exports}var sE,GI;function r4(){if(GI)return sE;GI=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,i){var a=typeof n;return i=i??r,!!i&&(a=="number"||a!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<i}return sE=t,sE}var uE,VI;function ST(){if(VI)return uE;VI=1;var r=9007199254740991;function e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=r}return uE=e,uE}var lE,$I;function nY(){if($I)return lE;$I=1;var r=Xh(),e=ST(),t=Lu(),n="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",u="[object Function]",l="[object Map]",c="[object Number]",f="[object Object]",d="[object RegExp]",h="[object Set]",v="[object String]",p="[object WeakMap]",g="[object ArrayBuffer]",y="[object DataView]",b="[object Float32Array]",m="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",C="[object Int32Array]",w="[object Uint8Array]",O="[object Uint8ClampedArray]",A="[object Uint16Array]",k="[object Uint32Array]",R={};R[b]=R[m]=R[_]=R[x]=R[C]=R[w]=R[O]=R[A]=R[k]=!0,R[n]=R[i]=R[g]=R[a]=R[y]=R[o]=R[s]=R[u]=R[l]=R[c]=R[f]=R[d]=R[h]=R[v]=R[p]=!1;function I(M){return t(M)&&e(M.length)&&!!R[r(M)]}return lE=I,lE}var cE,WI;function CT(){if(WI)return cE;WI=1;function r(e){return function(t){return e(t)}}return cE=r,cE}var Cp={exports:{}};Cp.exports;var HI;function TT(){return HI||(HI=1,function(r,e){var t=Zj(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,o=a&&t.process,s=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();r.exports=s}(Cp,Cp.exports)),Cp.exports}var fE,YI;function Y0(){if(YI)return fE;YI=1;var r=nY(),e=CT(),t=TT(),n=t&&t.isTypedArray,i=n?e(n):r;return fE=i,fE}var dE,XI;function n4(){if(XI)return dE;XI=1;var r=eY(),e=H0(),t=pi(),n=ty(),i=r4(),a=Y0(),o=Object.prototype,s=o.hasOwnProperty;function u(l,c){var f=t(l),d=!f&&e(l),h=!f&&!d&&n(l),v=!f&&!d&&!h&&a(l),p=f||d||h||v,g=p?r(l.length,String):[],y=g.length;for(var b in l)(c||s.call(l,b))&&!(p&&(b=="length"||h&&(b=="offset"||b=="parent")||v&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,y)))&&g.push(b);return g}return dE=u,dE}var hE,KI;function X0(){if(KI)return hE;KI=1;var r=Object.prototype;function e(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||r;return t===i}return hE=e,hE}var vE,ZI;function i4(){if(ZI)return vE;ZI=1;function r(e,t){return function(n){return e(t(n))}}return vE=r,vE}var pE,QI;function iY(){if(QI)return pE;QI=1;var r=i4(),e=r(Object.keys,Object);return pE=e,pE}var gE,JI;function AT(){if(JI)return gE;JI=1;var r=X0(),e=iY(),t=Object.prototype,n=t.hasOwnProperty;function i(a){if(!r(a))return e(a);var o=[];for(var s in Object(a))n.call(a,s)&&s!="constructor"&&o.push(s);return o}return gE=i,gE}var yE,eD;function jf(){if(eD)return yE;eD=1;var r=G0(),e=ST();function t(n){return n!=null&&e(n.length)&&!r(n)}return yE=t,yE}var mE,tD;function Ff(){if(tD)return mE;tD=1;var r=n4(),e=AT(),t=jf();function n(i){return t(i)?r(i):e(i)}return mE=n,mE}var bE,rD;function aY(){if(rD)return bE;rD=1;var r=W0(),e=Ff();function t(n,i){return n&&r(i,e(i),n)}return bE=t,bE}var _E,nD;function oY(){if(nD)return _E;nD=1;function r(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}return _E=r,_E}var wE,iD;function sY(){if(iD)return wE;iD=1;var r=Lf(),e=X0(),t=oY(),n=Object.prototype,i=n.hasOwnProperty;function a(o){if(!r(o))return t(o);var s=e(o),u=[];for(var l in o)l=="constructor"&&(s||!i.call(o,l))||u.push(l);return u}return wE=a,wE}var xE,aD;function PT(){if(aD)return xE;aD=1;var r=n4(),e=sY(),t=jf();function n(i){return t(i)?r(i,!0):e(i)}return xE=n,xE}var EE,oD;function uY(){if(oD)return EE;oD=1;var r=W0(),e=PT();function t(n,i){return n&&r(i,e(i),n)}return EE=t,EE}var Tp={exports:{}};Tp.exports;var sD;function lY(){return sD||(sD=1,function(r,e){var t=zs(),n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,a=i&&i.exports===n,o=a?t.Buffer:void 0,s=o?o.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,d=s?s(f):new l.constructor(f);return l.copy(d),d}r.exports=u}(Tp,Tp.exports)),Tp.exports}var OE,uD;function cY(){if(uD)return OE;uD=1;function r(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}return OE=r,OE}var SE,lD;function a4(){if(lD)return SE;lD=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[a++]=s)}return o}return SE=r,SE}var CE,cD;function o4(){if(cD)return CE;cD=1;function r(){return[]}return CE=r,CE}var TE,fD;function RT(){if(fD)return TE;fD=1;var r=a4(),e=o4(),t=Object.prototype,n=t.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),r(i(o),function(s){return n.call(o,s)}))}:e;return TE=a,TE}var AE,dD;function fY(){if(dD)return AE;dD=1;var r=W0(),e=RT();function t(n,i){return r(n,e(n),i)}return AE=t,AE}var PE,hD;function kT(){if(hD)return PE;hD=1;function r(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}return PE=r,PE}var RE,vD;function IT(){if(vD)return RE;vD=1;var r=i4(),e=r(Object.getPrototypeOf,Object);return RE=e,RE}var kE,pD;function s4(){if(pD)return kE;pD=1;var r=kT(),e=IT(),t=RT(),n=o4(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)r(s,t(o)),o=e(o);return s}:n;return kE=a,kE}var IE,gD;function dY(){if(gD)return IE;gD=1;var r=W0(),e=s4();function t(n,i){return r(n,e(n),i)}return IE=t,IE}var DE,yD;function u4(){if(yD)return DE;yD=1;var r=kT(),e=pi();function t(n,i,a){var o=i(n);return e(n)?o:r(o,a(n))}return DE=t,DE}var ME,mD;function l4(){if(mD)return ME;mD=1;var r=u4(),e=RT(),t=Ff();function n(i){return r(i,t,e)}return ME=n,ME}var LE,bD;function hY(){if(bD)return LE;bD=1;var r=u4(),e=s4(),t=PT();function n(i){return r(i,t,e)}return LE=n,LE}var NE,_D;function vY(){if(_D)return NE;_D=1;var r=Nf(),e=zs(),t=r(e,"DataView");return NE=t,NE}var jE,wD;function pY(){if(wD)return jE;wD=1;var r=Nf(),e=zs(),t=r(e,"Promise");return jE=t,jE}var FE,xD;function c4(){if(xD)return FE;xD=1;var r=Nf(),e=zs(),t=r(e,"Set");return FE=t,FE}var BE,ED;function gY(){if(ED)return BE;ED=1;var r=Nf(),e=zs(),t=r(e,"WeakMap");return BE=t,BE}var UE,OD;function Kh(){if(OD)return UE;OD=1;var r=vY(),e=wT(),t=pY(),n=c4(),i=gY(),a=Xh(),o=Qj(),s="[object Map]",u="[object Object]",l="[object Promise]",c="[object Set]",f="[object WeakMap]",d="[object DataView]",h=o(r),v=o(e),p=o(t),g=o(n),y=o(i),b=a;return(r&&b(new r(new ArrayBuffer(1)))!=d||e&&b(new e)!=s||t&&b(t.resolve())!=l||n&&b(new n)!=c||i&&b(new i)!=f)&&(b=function(m){var _=a(m),x=_==u?m.constructor:void 0,C=x?o(x):"";if(C)switch(C){case h:return d;case v:return s;case p:return l;case g:return c;case y:return f}return _}),UE=b,UE}var zE,SD;function yY(){if(SD)return zE;SD=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n){var i=n.length,a=new n.constructor(i);return i&&typeof n[0]=="string"&&e.call(n,"index")&&(a.index=n.index,a.input=n.input),a}return zE=t,zE}var qE,CD;function f4(){if(CD)return qE;CD=1;var r=zs(),e=r.Uint8Array;return qE=e,qE}var GE,TD;function DT(){if(TD)return GE;TD=1;var r=f4();function e(t){var n=new t.constructor(t.byteLength);return new r(n).set(new r(t)),n}return GE=e,GE}var VE,AD;function mY(){if(AD)return VE;AD=1;var r=DT();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}return VE=e,VE}var $E,PD;function bY(){if(PD)return $E;PD=1;var r=/\w*$/;function e(t){var n=new t.constructor(t.source,r.exec(t));return n.lastIndex=t.lastIndex,n}return $E=e,$E}var WE,RD;function _Y(){if(RD)return WE;RD=1;var r=Yh(),e=r?r.prototype:void 0,t=e?e.valueOf:void 0;function n(i){return t?Object(t.call(i)):{}}return WE=n,WE}var HE,kD;function wY(){if(kD)return HE;kD=1;var r=DT();function e(t,n){var i=n?r(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}return HE=e,HE}var YE,ID;function xY(){if(ID)return YE;ID=1;var r=DT(),e=mY(),t=bY(),n=_Y(),i=wY(),a="[object Boolean]",o="[object Date]",s="[object Map]",u="[object Number]",l="[object RegExp]",c="[object Set]",f="[object String]",d="[object Symbol]",h="[object ArrayBuffer]",v="[object DataView]",p="[object Float32Array]",g="[object Float64Array]",y="[object Int8Array]",b="[object Int16Array]",m="[object Int32Array]",_="[object Uint8Array]",x="[object Uint8ClampedArray]",C="[object Uint16Array]",w="[object Uint32Array]";function O(A,k,R){var I=A.constructor;switch(k){case h:return r(A);case a:case o:return new I(+A);case v:return e(A,R);case p:case g:case y:case b:case m:case _:case x:case C:case w:return i(A,R);case s:return new I;case u:case f:return new I(A);case l:return t(A);case c:return new I;case d:return n(A)}}return YE=O,YE}var XE,DD;function d4(){if(DD)return XE;DD=1;var r=Lf(),e=Object.create,t=function(){function n(){}return function(i){if(!r(i))return{};if(e)return e(i);n.prototype=i;var a=new n;return n.prototype=void 0,a}}();return XE=t,XE}var KE,MD;function EY(){if(MD)return KE;MD=1;var r=d4(),e=IT(),t=X0();function n(i){return typeof i.constructor=="function"&&!t(i)?r(e(i)):{}}return KE=n,KE}var ZE,LD;function OY(){if(LD)return ZE;LD=1;var r=Kh(),e=Lu(),t="[object Map]";function n(i){return e(i)&&r(i)==t}return ZE=n,ZE}var QE,ND;function SY(){if(ND)return QE;ND=1;var r=OY(),e=CT(),t=TT(),n=t&&t.isMap,i=n?e(n):r;return QE=i,QE}var JE,jD;function CY(){if(jD)return JE;jD=1;var r=Kh(),e=Lu(),t="[object Set]";function n(i){return e(i)&&r(i)==t}return JE=n,JE}var eO,FD;function TY(){if(FD)return eO;FD=1;var r=CY(),e=CT(),t=TT(),n=t&&t.isSet,i=n?e(n):r;return eO=i,eO}var tO,BD;function AY(){if(BD)return tO;BD=1;var r=ET(),e=OT(),t=t4(),n=aY(),i=uY(),a=lY(),o=cY(),s=fY(),u=dY(),l=l4(),c=hY(),f=Kh(),d=yY(),h=xY(),v=EY(),p=pi(),g=ty(),y=SY(),b=Lf(),m=TY(),_=Ff(),x=PT(),C=1,w=2,O=4,A="[object Arguments]",k="[object Array]",R="[object Boolean]",I="[object Date]",M="[object Error]",N="[object Function]",F="[object GeneratorFunction]",z="[object Map]",B="[object Number]",U="[object Object]",W="[object RegExp]",Y="[object Set]",H="[object String]",J="[object Symbol]",le="[object WeakMap]",fe="[object ArrayBuffer]",ue="[object DataView]",ge="[object Float32Array]",ve="[object Float64Array]",de="[object Int8Array]",ie="[object Int16Array]",Q="[object Int32Array]",re="[object Uint8Array]",se="[object Uint8ClampedArray]",pe="[object Uint16Array]",Oe="[object Uint32Array]",Ce={};Ce[A]=Ce[k]=Ce[fe]=Ce[ue]=Ce[R]=Ce[I]=Ce[ge]=Ce[ve]=Ce[de]=Ce[ie]=Ce[Q]=Ce[z]=Ce[B]=Ce[U]=Ce[W]=Ce[Y]=Ce[H]=Ce[J]=Ce[re]=Ce[se]=Ce[pe]=Ce[Oe]=!0,Ce[M]=Ce[N]=Ce[le]=!1;function Re(be,j,G,$,te,ce){var he,xe=j&C,Ne=j&w,We=j&O;if(G&&(he=te?G(be,$,te,ce):G(be)),he!==void 0)return he;if(!b(be))return be;var ot=p(be);if(ot){if(he=d(be),!xe)return o(be,he)}else{var Ze=f(be),et=Ze==N||Ze==F;if(g(be))return a(be,xe);if(Ze==U||Ze==A||et&&!te){if(he=Ne||et?{}:v(be),!xe)return Ne?u(be,i(he,be)):s(be,n(he,be))}else{if(!Ce[Ze])return te?be:{};he=h(be,Ze,xe)}}ce||(ce=new r);var Qe=ce.get(be);if(Qe)return Qe;ce.set(be,he),m(be)?be.forEach(function(ee){he.add(Re(ee,j,G,ee,be,ce))}):y(be)&&be.forEach(function(ee,we){he.set(we,Re(ee,j,G,we,be,ce))});var Ye=We?Ne?c:l:Ne?x:_,Ie=ot?void 0:Ye(be);return e(Ie||be,function(ee,we){Ie&&(we=ee,ee=be[we]),t(he,we,Re(ee,j,G,we,be,ce))}),he}return tO=Re,tO}var rO,UD;function PY(){if(UD)return rO;UD=1;var r=AY(),e=4;function t(n){return r(n,e)}return rO=t,rO}var nO,zD;function h4(){if(zD)return nO;zD=1;function r(e){return function(){return e}}return nO=r,nO}var iO,qD;function RY(){if(qD)return iO;qD=1;function r(e){return function(t,n,i){for(var a=-1,o=Object(t),s=i(t),u=s.length;u--;){var l=s[e?u:++a];if(n(o[l],l,o)===!1)break}return t}}return iO=r,iO}var aO,GD;function kY(){if(GD)return aO;GD=1;var r=RY(),e=r();return aO=e,aO}var oO,VD;function v4(){if(VD)return oO;VD=1;var r=kY(),e=Ff();function t(n,i){return n&&r(n,i,e)}return oO=t,oO}var sO,$D;function IY(){if($D)return sO;$D=1;var r=jf();function e(t,n){return function(i,a){if(i==null)return i;if(!r(i))return t(i,a);for(var o=i.length,s=n?o:-1,u=Object(i);(n?s--:++s<o)&&a(u[s],s,u)!==!1;);return i}}return sO=e,sO}var uO,WD;function K0(){if(WD)return uO;WD=1;var r=v4(),e=IY(),t=e(r);return uO=t,uO}var lO,HD;function Z0(){if(HD)return lO;HD=1;function r(e){return e}return lO=r,lO}var cO,YD;function DY(){if(YD)return cO;YD=1;var r=Z0();function e(t){return typeof t=="function"?t:r}return cO=e,cO}var fO,XD;function MY(){if(XD)return fO;XD=1;var r=OT(),e=K0(),t=DY(),n=pi();function i(a,o){var s=n(a)?r:e;return s(a,t(o))}return fO=i,fO}var dO,KD;function LY(){return KD||(KD=1,dO=MY()),dO}var hO,ZD;function NY(){if(ZD)return hO;ZD=1;var r=K0();function e(t,n){var i=[];return r(t,function(a,o,s){n(a,o,s)&&i.push(a)}),i}return hO=e,hO}var vO,QD;function jY(){if(QD)return vO;QD=1;var r="__lodash_hash_undefined__";function e(t){return this.__data__.set(t,r),this}return vO=e,vO}var pO,JD;function FY(){if(JD)return pO;JD=1;function r(e){return this.__data__.has(e)}return pO=r,pO}var gO,eM;function p4(){if(eM)return gO;eM=1;var r=xT(),e=jY(),t=FY();function n(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new r;++a<o;)this.add(i[a])}return n.prototype.add=n.prototype.push=e,n.prototype.has=t,gO=n,gO}var yO,tM;function BY(){if(tM)return yO;tM=1;function r(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}return yO=r,yO}var mO,rM;function g4(){if(rM)return mO;rM=1;function r(e,t){return e.has(t)}return mO=r,mO}var bO,nM;function y4(){if(nM)return bO;nM=1;var r=p4(),e=BY(),t=g4(),n=1,i=2;function a(o,s,u,l,c,f){var d=u&n,h=o.length,v=s.length;if(h!=v&&!(d&&v>h))return!1;var p=f.get(o),g=f.get(s);if(p&&g)return p==s&&g==o;var y=-1,b=!0,m=u&i?new r:void 0;for(f.set(o,s),f.set(s,o);++y<h;){var _=o[y],x=s[y];if(l)var C=d?l(x,_,y,s,o,f):l(_,x,y,o,s,f);if(C!==void 0){if(C)continue;b=!1;break}if(m){if(!e(s,function(w,O){if(!t(m,O)&&(_===w||c(_,w,u,l,f)))return m.push(O)})){b=!1;break}}else if(!(_===x||c(_,x,u,l,f))){b=!1;break}}return f.delete(o),f.delete(s),b}return bO=a,bO}var _O,iM;function UY(){if(iM)return _O;iM=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i,a){n[++t]=[a,i]}),n}return _O=r,_O}var wO,aM;function MT(){if(aM)return wO;aM=1;function r(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}return wO=r,wO}var xO,oM;function zY(){if(oM)return xO;oM=1;var r=Yh(),e=f4(),t=_T(),n=y4(),i=UY(),a=MT(),o=1,s=2,u="[object Boolean]",l="[object Date]",c="[object Error]",f="[object Map]",d="[object Number]",h="[object RegExp]",v="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",m=r?r.prototype:void 0,_=m?m.valueOf:void 0;function x(C,w,O,A,k,R,I){switch(O){case b:if(C.byteLength!=w.byteLength||C.byteOffset!=w.byteOffset)return!1;C=C.buffer,w=w.buffer;case y:return!(C.byteLength!=w.byteLength||!R(new e(C),new e(w)));case u:case l:case d:return t(+C,+w);case c:return C.name==w.name&&C.message==w.message;case h:case p:return C==w+"";case f:var M=i;case v:var N=A&o;if(M||(M=a),C.size!=w.size&&!N)return!1;var F=I.get(C);if(F)return F==w;A|=s,I.set(C,w);var z=n(M(C),M(w),A,k,R,I);return I.delete(C),z;case g:if(_)return _.call(C)==_.call(w)}return!1}return xO=x,xO}var EO,sM;function qY(){if(sM)return EO;sM=1;var r=l4(),e=1,t=Object.prototype,n=t.hasOwnProperty;function i(a,o,s,u,l,c){var f=s&e,d=r(a),h=d.length,v=r(o),p=v.length;if(h!=p&&!f)return!1;for(var g=h;g--;){var y=d[g];if(!(f?y in o:n.call(o,y)))return!1}var b=c.get(a),m=c.get(o);if(b&&m)return b==o&&m==a;var _=!0;c.set(a,o),c.set(o,a);for(var x=f;++g<h;){y=d[g];var C=a[y],w=o[y];if(u)var O=f?u(w,C,y,o,a,c):u(C,w,y,a,o,c);if(!(O===void 0?C===w||l(C,w,s,u,c):O)){_=!1;break}x||(x=y=="constructor")}if(_&&!x){var A=a.constructor,k=o.constructor;A!=k&&"constructor"in a&&"constructor"in o&&!(typeof A=="function"&&A instanceof A&&typeof k=="function"&&k instanceof k)&&(_=!1)}return c.delete(a),c.delete(o),_}return EO=i,EO}var OO,uM;function GY(){if(uM)return OO;uM=1;var r=ET(),e=y4(),t=zY(),n=qY(),i=Kh(),a=pi(),o=ty(),s=Y0(),u=1,l="[object Arguments]",c="[object Array]",f="[object Object]",d=Object.prototype,h=d.hasOwnProperty;function v(p,g,y,b,m,_){var x=a(p),C=a(g),w=x?c:i(p),O=C?c:i(g);w=w==l?f:w,O=O==l?f:O;var A=w==f,k=O==f,R=w==O;if(R&&o(p)){if(!o(g))return!1;x=!0,A=!1}if(R&&!A)return _||(_=new r),x||s(p)?e(p,g,y,b,m,_):t(p,g,w,y,b,m,_);if(!(y&u)){var I=A&&h.call(p,"__wrapped__"),M=k&&h.call(g,"__wrapped__");if(I||M){var N=I?p.value():p,F=M?g.value():g;return _||(_=new r),m(N,F,y,b,_)}}return R?(_||(_=new r),n(p,g,y,b,m,_)):!1}return OO=v,OO}var SO,lM;function m4(){if(lM)return SO;lM=1;var r=GY(),e=Lu();function t(n,i,a,o,s){return n===i?!0:n==null||i==null||!e(n)&&!e(i)?n!==n&&i!==i:r(n,i,a,o,t,s)}return SO=t,SO}var CO,cM;function VY(){if(cM)return CO;cM=1;var r=ET(),e=m4(),t=1,n=2;function i(a,o,s,u){var l=s.length,c=l,f=!u;if(a==null)return!c;for(a=Object(a);l--;){var d=s[l];if(f&&d[2]?d[1]!==a[d[0]]:!(d[0]in a))return!1}for(;++l<c;){d=s[l];var h=d[0],v=a[h],p=d[1];if(f&&d[2]){if(v===void 0&&!(h in a))return!1}else{var g=new r;if(u)var y=u(v,p,h,a,o,g);if(!(y===void 0?e(p,v,t|n,u,g):y))return!1}}return!0}return CO=i,CO}var TO,fM;function b4(){if(fM)return TO;fM=1;var r=Lf();function e(t){return t===t&&!r(t)}return TO=e,TO}var AO,dM;function $Y(){if(dM)return AO;dM=1;var r=b4(),e=Ff();function t(n){for(var i=e(n),a=i.length;a--;){var o=i[a],s=n[o];i[a]=[o,s,r(s)]}return i}return AO=t,AO}var PO,hM;function _4(){if(hM)return PO;hM=1;function r(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}return PO=r,PO}var RO,vM;function WY(){if(vM)return RO;vM=1;var r=VY(),e=$Y(),t=_4();function n(i){var a=e(i);return a.length==1&&a[0][2]?t(a[0][0],a[0][1]):function(o){return o===i||r(o,i,a)}}return RO=n,RO}var kO,pM;function LT(){if(pM)return kO;pM=1;var r=Xh(),e=Lu(),t="[object Symbol]";function n(i){return typeof i=="symbol"||e(i)&&r(i)==t}return kO=n,kO}var IO,gM;function NT(){if(gM)return IO;gM=1;var r=pi(),e=LT(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(a,o){if(r(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:n.test(a)||!t.test(a)||o!=null&&a in Object(o)}return IO=i,IO}var DO,yM;function HY(){if(yM)return DO;yM=1;var r=xT(),e="Expected a function";function t(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],u=a.cache;if(u.has(s))return u.get(s);var l=n.apply(this,o);return a.cache=u.set(s,l)||u,l};return a.cache=new(t.Cache||r),a}return t.Cache=r,DO=t,DO}var MO,mM;function YY(){if(mM)return MO;mM=1;var r=HY(),e=500;function t(n){var i=r(n,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return MO=t,MO}var LO,bM;function XY(){if(bM)return LO;bM=1;var r=YY(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,u,l){a.push(u?l.replace(t,"$1"):s||o)}),a});return LO=n,LO}var NO,_M;function jT(){if(_M)return NO;_M=1;function r(e,t){for(var n=-1,i=e==null?0:e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}return NO=r,NO}var jO,wM;function KY(){if(wM)return jO;wM=1;var r=Yh(),e=jT(),t=pi(),n=LT(),i=r?r.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(t(s))return e(s,o)+"";if(n(s))return a?a.call(s):"";var u=s+"";return u=="0"&&1/s==-1/0?"-0":u}return jO=o,jO}var FO,xM;function ZY(){if(xM)return FO;xM=1;var r=KY();function e(t){return t==null?"":r(t)}return FO=e,FO}var BO,EM;function w4(){if(EM)return BO;EM=1;var r=pi(),e=NT(),t=XY(),n=ZY();function i(a,o){return r(a)?a:e(a,o)?[a]:t(n(a))}return BO=i,BO}var UO,OM;function Q0(){if(OM)return UO;OM=1;var r=LT();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return UO=e,UO}var zO,SM;function x4(){if(SM)return zO;SM=1;var r=w4(),e=Q0();function t(n,i){i=r(i,n);for(var a=0,o=i.length;n!=null&&a<o;)n=n[e(i[a++])];return a&&a==o?n:void 0}return zO=t,zO}var qO,CM;function QY(){if(CM)return qO;CM=1;var r=x4();function e(t,n,i){var a=t==null?void 0:r(t,n);return a===void 0?i:a}return qO=e,qO}var GO,TM;function JY(){if(TM)return GO;TM=1;function r(e,t){return e!=null&&t in Object(e)}return GO=r,GO}var VO,AM;function E4(){if(AM)return VO;AM=1;var r=w4(),e=H0(),t=pi(),n=r4(),i=ST(),a=Q0();function o(s,u,l){u=r(u,s);for(var c=-1,f=u.length,d=!1;++c<f;){var h=a(u[c]);if(!(d=s!=null&&l(s,h)))break;s=s[h]}return d||++c!=f?d:(f=s==null?0:s.length,!!f&&i(f)&&n(h,f)&&(t(s)||e(s)))}return VO=o,VO}var $O,PM;function eX(){if(PM)return $O;PM=1;var r=JY(),e=E4();function t(n,i){return n!=null&&e(n,i,r)}return $O=t,$O}var WO,RM;function tX(){if(RM)return WO;RM=1;var r=m4(),e=QY(),t=eX(),n=NT(),i=b4(),a=_4(),o=Q0(),s=1,u=2;function l(c,f){return n(c)&&i(f)?a(o(c),f):function(d){var h=e(d,c);return h===void 0&&h===f?t(d,c):r(f,h,s|u)}}return WO=l,WO}var HO,kM;function O4(){if(kM)return HO;kM=1;function r(e){return function(t){return t==null?void 0:t[e]}}return HO=r,HO}var YO,IM;function rX(){if(IM)return YO;IM=1;var r=x4();function e(t){return function(n){return r(n,t)}}return YO=e,YO}var XO,DM;function nX(){if(DM)return XO;DM=1;var r=O4(),e=rX(),t=NT(),n=Q0();function i(a){return t(a)?r(n(a)):e(a)}return XO=i,XO}var KO,MM;function J0(){if(MM)return KO;MM=1;var r=WY(),e=tX(),t=Z0(),n=pi(),i=nX();function a(o){return typeof o=="function"?o:o==null?t:typeof o=="object"?n(o)?e(o[0],o[1]):r(o):i(o)}return KO=a,KO}var ZO,LM;function iX(){if(LM)return ZO;LM=1;var r=a4(),e=NY(),t=J0(),n=pi();function i(a,o){var s=n(a)?r:e;return s(a,t(o,3))}return ZO=i,ZO}var QO,NM;function aX(){if(NM)return QO;NM=1;var r=Object.prototype,e=r.hasOwnProperty;function t(n,i){return n!=null&&e.call(n,i)}return QO=t,QO}var JO,jM;function oX(){if(jM)return JO;jM=1;var r=aX(),e=E4();function t(n,i){return n!=null&&e(n,i,r)}return JO=t,JO}var eS,FM;function sX(){if(FM)return eS;FM=1;var r=AT(),e=Kh(),t=H0(),n=pi(),i=jf(),a=ty(),o=X0(),s=Y0(),u="[object Map]",l="[object Set]",c=Object.prototype,f=c.hasOwnProperty;function d(h){if(h==null)return!0;if(i(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||a(h)||s(h)||t(h)))return!h.length;var v=e(h);if(v==u||v==l)return!h.size;if(o(h))return!r(h).length;for(var p in h)if(f.call(h,p))return!1;return!0}return eS=d,eS}var tS,BM;function uX(){if(BM)return tS;BM=1;function r(e){return e===void 0}return tS=r,tS}var rS,UM;function lX(){if(UM)return rS;UM=1;var r=K0(),e=jf();function t(n,i){var a=-1,o=e(n)?Array(n.length):[];return r(n,function(s,u,l){o[++a]=i(s,u,l)}),o}return rS=t,rS}var nS,zM;function cX(){if(zM)return nS;zM=1;var r=jT(),e=J0(),t=lX(),n=pi();function i(a,o){var s=n(a)?r:t;return s(a,e(o,3))}return nS=i,nS}var iS,qM;function fX(){if(qM)return iS;qM=1;function r(e,t,n,i){var a=-1,o=e==null?0:e.length;for(i&&o&&(n=e[++a]);++a<o;)n=t(n,e[a],a,e);return n}return iS=r,iS}var aS,GM;function dX(){if(GM)return aS;GM=1;function r(e,t,n,i,a){return a(e,function(o,s,u){n=i?(i=!1,o):t(n,o,s,u)}),n}return aS=r,aS}var oS,VM;function hX(){if(VM)return oS;VM=1;var r=fX(),e=K0(),t=J0(),n=dX(),i=pi();function a(o,s,u){var l=i(o)?r:n,c=arguments.length<3;return l(o,t(s,4),u,c,e)}return oS=a,oS}var sS,$M;function vX(){if($M)return sS;$M=1;var r=Xh(),e=pi(),t=Lu(),n="[object String]";function i(a){return typeof a=="string"||!e(a)&&t(a)&&r(a)==n}return sS=i,sS}var uS,WM;function pX(){if(WM)return uS;WM=1;var r=O4(),e=r("length");return uS=e,uS}var lS,HM;function gX(){if(HM)return lS;HM=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+r+i+a+"]");function u(l){return s.test(l)}return lS=u,lS}var cS,YM;function yX(){if(YM)return cS;YM=1;var r="\\ud800-\\udfff",e="\\u0300-\\u036f",t="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=e+t+n,a="\\ufe0e\\ufe0f",o="["+r+"]",s="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",l="(?:"+s+"|"+u+")",c="[^"+r+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",v=l+"?",p="["+a+"]?",g="(?:"+h+"(?:"+[c,f,d].join("|")+")"+p+v+")*",y=p+v+g,b="(?:"+[c+s+"?",s,f,d,o].join("|")+")",m=RegExp(u+"(?="+u+")|"+b+y,"g");function _(x){for(var C=m.lastIndex=0;m.test(x);)++C;return C}return cS=_,cS}var fS,XM;function mX(){if(XM)return fS;XM=1;var r=pX(),e=gX(),t=yX();function n(i){return e(i)?t(i):r(i)}return fS=n,fS}var dS,KM;function bX(){if(KM)return dS;KM=1;var r=AT(),e=Kh(),t=jf(),n=vX(),i=mX(),a="[object Map]",o="[object Set]";function s(u){if(u==null)return 0;if(t(u))return n(u)?i(u):u.length;var l=e(u);return l==a||l==o?u.size:r(u).length}return dS=s,dS}var hS,ZM;function _X(){if(ZM)return hS;ZM=1;var r=OT(),e=d4(),t=v4(),n=J0(),i=IT(),a=pi(),o=ty(),s=G0(),u=Lf(),l=Y0();function c(f,d,h){var v=a(f),p=v||o(f)||l(f);if(d=n(d,4),h==null){var g=f&&f.constructor;p?h=v?new g:[]:u(f)?h=s(g)?e(i(f)):{}:h={}}return(p?r:t)(f,function(y,b,m){return d(h,y,b,m)}),h}return hS=c,hS}var vS,QM;function wX(){if(QM)return vS;QM=1;var r=Yh(),e=H0(),t=pi(),n=r?r.isConcatSpreadable:void 0;function i(a){return t(a)||e(a)||!!(n&&a&&a[n])}return vS=i,vS}var pS,JM;function xX(){if(JM)return pS;JM=1;var r=kT(),e=wX();function t(n,i,a,o,s){var u=-1,l=n.length;for(a||(a=e),s||(s=[]);++u<l;){var c=n[u];i>0&&a(c)?i>1?t(c,i-1,a,o,s):r(s,c):o||(s[s.length]=c)}return s}return pS=t,pS}var gS,eL;function EX(){if(eL)return gS;eL=1;function r(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}return gS=r,gS}var yS,tL;function OX(){if(tL)return yS;tL=1;var r=EX(),e=Math.max;function t(n,i,a){return i=e(i===void 0?n.length-1:i,0),function(){for(var o=arguments,s=-1,u=e(o.length-i,0),l=Array(u);++s<u;)l[s]=o[i+s];s=-1;for(var c=Array(i+1);++s<i;)c[s]=o[s];return c[i]=a(l),r(n,this,c)}}return yS=t,yS}var mS,rL;function SX(){if(rL)return mS;rL=1;var r=h4(),e=Jj(),t=Z0(),n=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:r(a),writable:!0})}:t;return mS=n,mS}var bS,nL;function CX(){if(nL)return bS;nL=1;var r=800,e=16,t=Date.now;function n(i){var a=0,o=0;return function(){var s=t(),u=e-(s-o);if(o=s,u>0){if(++a>=r)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return bS=n,bS}var _S,iL;function TX(){if(iL)return _S;iL=1;var r=SX(),e=CX(),t=e(r);return _S=t,_S}var wS,aL;function AX(){if(aL)return wS;aL=1;var r=Z0(),e=OX(),t=TX();function n(i,a){return t(e(i,a,r),i+"")}return wS=n,wS}var xS,oL;function PX(){if(oL)return xS;oL=1;function r(e,t,n,i){for(var a=e.length,o=n+(i?1:-1);i?o--:++o<a;)if(t(e[o],o,e))return o;return-1}return xS=r,xS}var ES,sL;function RX(){if(sL)return ES;sL=1;function r(e){return e!==e}return ES=r,ES}var OS,uL;function kX(){if(uL)return OS;uL=1;function r(e,t,n){for(var i=n-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}return OS=r,OS}var SS,lL;function IX(){if(lL)return SS;lL=1;var r=PX(),e=RX(),t=kX();function n(i,a,o){return a===a?t(i,a,o):r(i,e,o)}return SS=n,SS}var CS,cL;function DX(){if(cL)return CS;cL=1;var r=IX();function e(t,n){var i=t==null?0:t.length;return!!i&&r(t,n,0)>-1}return CS=e,CS}var TS,fL;function MX(){if(fL)return TS;fL=1;function r(e,t,n){for(var i=-1,a=e==null?0:e.length;++i<a;)if(n(t,e[i]))return!0;return!1}return TS=r,TS}var AS,dL;function LX(){if(dL)return AS;dL=1;function r(){}return AS=r,AS}var PS,hL;function NX(){if(hL)return PS;hL=1;var r=c4(),e=LX(),t=MT(),n=1/0,i=r&&1/t(new r([,-0]))[1]==n?function(a){return new r(a)}:e;return PS=i,PS}var RS,vL;function jX(){if(vL)return RS;vL=1;var r=p4(),e=DX(),t=MX(),n=g4(),i=NX(),a=MT(),o=200;function s(u,l,c){var f=-1,d=e,h=u.length,v=!0,p=[],g=p;if(c)v=!1,d=t;else if(h>=o){var y=l?null:i(u);if(y)return a(y);v=!1,d=n,g=new r}else g=l?[]:p;e:for(;++f<h;){var b=u[f],m=l?l(b):b;if(b=c||b!==0?b:0,v&&m===m){for(var _=g.length;_--;)if(g[_]===m)continue e;l&&g.push(m),p.push(b)}else d(g,m,c)||(g!==p&&g.push(m),p.push(b))}return p}return RS=s,RS}var kS,pL;function FX(){if(pL)return kS;pL=1;var r=jf(),e=Lu();function t(n){return e(n)&&r(n)}return kS=t,kS}var IS,gL;function BX(){if(gL)return IS;gL=1;var r=xX(),e=AX(),t=jX(),n=FX(),i=e(function(a){return t(r(a,1,n,!0))});return IS=i,IS}var DS,yL;function UX(){if(yL)return DS;yL=1;var r=jT();function e(t,n){return r(n,function(i){return t[i]})}return DS=e,DS}var MS,mL;function zX(){if(mL)return MS;mL=1;var r=UX(),e=Ff();function t(n){return n==null?[]:r(n,e(n))}return MS=t,MS}var r0;if(typeof SH=="function")try{r0={clone:PY(),constant:h4(),each:LY(),filter:iX(),has:oX(),isArray:pi(),isEmpty:sX(),isFunction:G0(),isUndefined:uX(),keys:Ff(),map:cX(),reduce:hX(),size:bX(),transform:_X(),union:BX(),values:zX()}}catch{}r0||(r0=window._);var xo=r0,Xt=xo,FT=dr,qX="\0",Sf="\0",bL="";function dr(r){this._isDirected=Xt.has(r,"directed")?r.directed:!0,this._isMultigraph=Xt.has(r,"multigraph")?r.multigraph:!1,this._isCompound=Xt.has(r,"compound")?r.compound:!1,this._label=void 0,this._defaultNodeLabelFn=Xt.constant(void 0),this._defaultEdgeLabelFn=Xt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[Sf]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}dr.prototype._nodeCount=0;dr.prototype._edgeCount=0;dr.prototype.isDirected=function(){return this._isDirected};dr.prototype.isMultigraph=function(){return this._isMultigraph};dr.prototype.isCompound=function(){return this._isCompound};dr.prototype.setGraph=function(r){return this._label=r,this};dr.prototype.graph=function(){return this._label};dr.prototype.setDefaultNodeLabel=function(r){return Xt.isFunction(r)||(r=Xt.constant(r)),this._defaultNodeLabelFn=r,this};dr.prototype.nodeCount=function(){return this._nodeCount};dr.prototype.nodes=function(){return Xt.keys(this._nodes)};dr.prototype.sources=function(){var r=this;return Xt.filter(this.nodes(),function(e){return Xt.isEmpty(r._in[e])})};dr.prototype.sinks=function(){var r=this;return Xt.filter(this.nodes(),function(e){return Xt.isEmpty(r._out[e])})};dr.prototype.setNodes=function(r,e){var t=arguments,n=this;return Xt.each(r,function(i){t.length>1?n.setNode(i,e):n.setNode(i)}),this};dr.prototype.setNode=function(r,e){return Xt.has(this._nodes,r)?(arguments.length>1&&(this._nodes[r]=e),this):(this._nodes[r]=arguments.length>1?e:this._defaultNodeLabelFn(r),this._isCompound&&(this._parent[r]=Sf,this._children[r]={},this._children[Sf][r]=!0),this._in[r]={},this._preds[r]={},this._out[r]={},this._sucs[r]={},++this._nodeCount,this)};dr.prototype.node=function(r){return this._nodes[r]};dr.prototype.hasNode=function(r){return Xt.has(this._nodes,r)};dr.prototype.removeNode=function(r){var e=this;if(Xt.has(this._nodes,r)){var t=function(n){e.removeEdge(e._edgeObjs[n])};delete this._nodes[r],this._isCompound&&(this._removeFromParentsChildList(r),delete this._parent[r],Xt.each(this.children(r),function(n){e.setParent(n)}),delete this._children[r]),Xt.each(Xt.keys(this._in[r]),t),delete this._in[r],delete this._preds[r],Xt.each(Xt.keys(this._out[r]),t),delete this._out[r],delete this._sucs[r],--this._nodeCount}return this};dr.prototype.setParent=function(r,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Xt.isUndefined(e))e=Sf;else{e+="";for(var t=e;!Xt.isUndefined(t);t=this.parent(t))if(t===r)throw new Error("Setting "+e+" as parent of "+r+" would create a cycle");this.setNode(e)}return this.setNode(r),this._removeFromParentsChildList(r),this._parent[r]=e,this._children[e][r]=!0,this};dr.prototype._removeFromParentsChildList=function(r){delete this._children[this._parent[r]][r]};dr.prototype.parent=function(r){if(this._isCompound){var e=this._parent[r];if(e!==Sf)return e}};dr.prototype.children=function(r){if(Xt.isUndefined(r)&&(r=Sf),this._isCompound){var e=this._children[r];if(e)return Xt.keys(e)}else{if(r===Sf)return this.nodes();if(this.hasNode(r))return[]}};dr.prototype.predecessors=function(r){var e=this._preds[r];if(e)return Xt.keys(e)};dr.prototype.successors=function(r){var e=this._sucs[r];if(e)return Xt.keys(e)};dr.prototype.neighbors=function(r){var e=this.predecessors(r);if(e)return Xt.union(e,this.successors(r))};dr.prototype.isLeaf=function(r){var e;return this.isDirected()?e=this.successors(r):e=this.neighbors(r),e.length===0};dr.prototype.filterNodes=function(r){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var t=this;Xt.each(this._nodes,function(a,o){r(o)&&e.setNode(o,a)}),Xt.each(this._edgeObjs,function(a){e.hasNode(a.v)&&e.hasNode(a.w)&&e.setEdge(a,t.edge(a))});var n={};function i(a){var o=t.parent(a);return o===void 0||e.hasNode(o)?(n[a]=o,o):o in n?n[o]:i(o)}return this._isCompound&&Xt.each(e.nodes(),function(a){e.setParent(a,i(a))}),e};dr.prototype.setDefaultEdgeLabel=function(r){return Xt.isFunction(r)||(r=Xt.constant(r)),this._defaultEdgeLabelFn=r,this};dr.prototype.edgeCount=function(){return this._edgeCount};dr.prototype.edges=function(){return Xt.values(this._edgeObjs)};dr.prototype.setPath=function(r,e){var t=this,n=arguments;return Xt.reduce(r,function(i,a){return n.length>1?t.setEdge(i,a,e):t.setEdge(i,a),a}),this};dr.prototype.setEdge=function(){var r,e,t,n,i=!1,a=arguments[0];typeof a=="object"&&a!==null&&"v"in a?(r=a.v,e=a.w,t=a.name,arguments.length===2&&(n=arguments[1],i=!0)):(r=a,e=arguments[1],t=arguments[3],arguments.length>2&&(n=arguments[2],i=!0)),r=""+r,e=""+e,Xt.isUndefined(t)||(t=""+t);var o=ry(this._isDirected,r,e,t);if(Xt.has(this._edgeLabels,o))return i&&(this._edgeLabels[o]=n),this;if(!Xt.isUndefined(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(r),this.setNode(e),this._edgeLabels[o]=i?n:this._defaultEdgeLabelFn(r,e,t);var s=GX(this._isDirected,r,e,t);return r=s.v,e=s.w,Object.freeze(s),this._edgeObjs[o]=s,_L(this._preds[e],r),_L(this._sucs[r],e),this._in[e][o]=s,this._out[r][o]=s,this._edgeCount++,this};dr.prototype.edge=function(r,e,t){var n=arguments.length===1?BT(this._isDirected,arguments[0]):ry(this._isDirected,r,e,t);return this._edgeLabels[n]};dr.prototype.hasEdge=function(r,e,t){var n=arguments.length===1?BT(this._isDirected,arguments[0]):ry(this._isDirected,r,e,t);return Xt.has(this._edgeLabels,n)};dr.prototype.removeEdge=function(r,e,t){var n=arguments.length===1?BT(this._isDirected,arguments[0]):ry(this._isDirected,r,e,t),i=this._edgeObjs[n];return i&&(r=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],wL(this._preds[e],r),wL(this._sucs[r],e),delete this._in[e][n],delete this._out[r][n],this._edgeCount--),this};dr.prototype.inEdges=function(r,e){var t=this._in[r];if(t){var n=Xt.values(t);return e?Xt.filter(n,function(i){return i.v===e}):n}};dr.prototype.outEdges=function(r,e){var t=this._out[r];if(t){var n=Xt.values(t);return e?Xt.filter(n,function(i){return i.w===e}):n}};dr.prototype.nodeEdges=function(r,e){var t=this.inEdges(r,e);if(t)return t.concat(this.outEdges(r,e))};function _L(r,e){r[e]?r[e]++:r[e]=1}function wL(r,e){--r[e]||delete r[e]}function ry(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var o=i;i=a,a=o}return i+bL+a+bL+(Xt.isUndefined(n)?qX:n)}function GX(r,e,t,n){var i=""+e,a=""+t;if(!r&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}function BT(r,e){return ry(r,e.v,e.w,e.name)}var VX="2.1.8",$X={Graph:FT,version:VX},Ms=xo,WX=FT,HX={write:YX,read:ZX};function YX(r){var e={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:XX(r),edges:KX(r)};return Ms.isUndefined(r.graph())||(e.value=Ms.clone(r.graph())),e}function XX(r){return Ms.map(r.nodes(),function(e){var t=r.node(e),n=r.parent(e),i={v:e};return Ms.isUndefined(t)||(i.value=t),Ms.isUndefined(n)||(i.parent=n),i})}function KX(r){return Ms.map(r.edges(),function(e){var t=r.edge(e),n={v:e.v,w:e.w};return Ms.isUndefined(e.name)||(n.name=e.name),Ms.isUndefined(t)||(n.value=t),n})}function ZX(r){var e=new WX(r.options).setGraph(r.value);return Ms.each(r.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),Ms.each(r.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}var $m=xo,QX=JX;function JX(r){var e={},t=[],n;function i(a){$m.has(e,a)||(e[a]=!0,n.push(a),$m.each(r.successors(a),i),$m.each(r.predecessors(a),i))}return $m.each(r.nodes(),function(a){n=[],i(a),n.length&&t.push(n)}),t}var S4=xo,C4=Eo;function Eo(){this._arr=[],this._keyIndices={}}Eo.prototype.size=function(){return this._arr.length};Eo.prototype.keys=function(){return this._arr.map(function(r){return r.key})};Eo.prototype.has=function(r){return S4.has(this._keyIndices,r)};Eo.prototype.priority=function(r){var e=this._keyIndices[r];if(e!==void 0)return this._arr[e].priority};Eo.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key};Eo.prototype.add=function(r,e){var t=this._keyIndices;if(r=String(r),!S4.has(t,r)){var n=this._arr,i=n.length;return t[r]=i,n.push({key:r,priority:e}),this._decrease(i),!0}return!1};Eo.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key};Eo.prototype.decrease=function(r,e){var t=this._keyIndices[r];if(e>this._arr[t].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[t].priority+" New: "+e);this._arr[t].priority=e,this._decrease(t)};Eo.prototype._heapify=function(r){var e=this._arr,t=2*r,n=t+1,i=r;t<e.length&&(i=e[t].priority<e[i].priority?t:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==r&&(this._swap(r,i),this._heapify(i)))};Eo.prototype._decrease=function(r){for(var e=this._arr,t=e[r].priority,n;r!==0&&(n=r>>1,!(e[n].priority<t));)this._swap(r,n),r=n};Eo.prototype._swap=function(r,e){var t=this._arr,n=this._keyIndices,i=t[r],a=t[e];t[r]=a,t[e]=i,n[a.key]=r,n[i.key]=e};var eK=xo,tK=C4,T4=nK,rK=eK.constant(1);function nK(r,e,t,n){return iK(r,String(e),t||rK,n||function(i){return r.outEdges(i)})}function iK(r,e,t,n){var i={},a=new tK,o,s,u=function(l){var c=l.v!==o?l.v:l.w,f=i[c],d=t(l),h=s.distance+d;if(d<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+l+" Weight: "+d);h<f.distance&&(f.distance=h,f.predecessor=o,a.decrease(c,h))};for(r.nodes().forEach(function(l){var c=l===e?0:Number.POSITIVE_INFINITY;i[l]={distance:c},a.add(l,c)});a.size()>0&&(o=a.removeMin(),s=i[o],s.distance!==Number.POSITIVE_INFINITY);)n(o).forEach(u);return i}var aK=T4,oK=xo,sK=uK;function uK(r,e,t){return oK.transform(r.nodes(),function(n,i){n[i]=aK(r,i,e,t)},{})}var xL=xo,A4=lK;function lK(r){var e=0,t=[],n={},i=[];function a(o){var s=n[o]={onStack:!0,lowlink:e,index:e++};if(t.push(o),r.successors(o).forEach(function(c){xL.has(n,c)?n[c].onStack&&(s.lowlink=Math.min(s.lowlink,n[c].index)):(a(c),s.lowlink=Math.min(s.lowlink,n[c].lowlink))}),s.lowlink===s.index){var u=[],l;do l=t.pop(),n[l].onStack=!1,u.push(l);while(o!==l);i.push(u)}}return r.nodes().forEach(function(o){xL.has(n,o)||a(o)}),i}var cK=xo,fK=A4,dK=hK;function hK(r){return cK.filter(fK(r),function(e){return e.length>1||e.length===1&&r.hasEdge(e[0],e[0])})}var vK=xo,pK=yK,gK=vK.constant(1);function yK(r,e,t){return mK(r,e||gK,t||function(n){return r.outEdges(n)})}function mK(r,e,t){var n={},i=r.nodes();return i.forEach(function(a){n[a]={},n[a][a]={distance:0},i.forEach(function(o){a!==o&&(n[a][o]={distance:Number.POSITIVE_INFINITY})}),t(a).forEach(function(o){var s=o.v===a?o.w:o.v,u=e(o);n[a][s]={distance:u,predecessor:a}})}),i.forEach(function(a){var o=n[a];i.forEach(function(s){var u=n[s];i.forEach(function(l){var c=u[a],f=o[l],d=u[l],h=c.distance+f.distance;h<d.distance&&(d.distance=h,d.predecessor=f.predecessor)})})}),n}var fp=xo,P4=R4;R4.CycleException=n0;function R4(r){var e={},t={},n=[];function i(a){if(fp.has(t,a))throw new n0;fp.has(e,a)||(t[a]=!0,e[a]=!0,fp.each(r.predecessors(a),i),delete t[a],n.push(a))}if(fp.each(r.sinks(),i),fp.size(e)!==r.nodeCount())throw new n0;return n}function n0(){}n0.prototype=new Error;var EL=P4,bK=_K;function _K(r){try{EL(r)}catch(e){if(e instanceof EL.CycleException)return!1;throw e}return!0}var i0=xo,k4=wK;function wK(r,e,t){i0.isArray(e)||(e=[e]);var n=(r.isDirected()?r.successors:r.neighbors).bind(r),i=[],a={};return i0.each(e,function(o){if(!r.hasNode(o))throw new Error("Graph does not have node: "+o);I4(r,o,t==="post",a,n,i)}),i}function I4(r,e,t,n,i,a){i0.has(n,e)||(n[e]=!0,t||a.push(e),i0.each(i(e),function(o){I4(r,o,t,n,i,a)}),t&&a.push(e))}var xK=k4,EK=OK;function OK(r,e){return xK(r,e,"post")}var SK=k4,CK=TK;function TK(r,e){return SK(r,e,"pre")}var OL=xo,AK=FT,PK=C4,RK=kK;function kK(r,e){var t=new AK,n={},i=new PK,a;function o(u){var l=u.v===a?u.w:u.v,c=i.priority(l);if(c!==void 0){var f=e(u);f<c&&(n[l]=a,i.decrease(l,f))}}if(r.nodeCount()===0)return t;OL.each(r.nodes(),function(u){i.add(u,Number.POSITIVE_INFINITY),t.setNode(u)}),i.decrease(r.nodes()[0],0);for(var s=!1;i.size()>0;){if(a=i.removeMin(),OL.has(n,a))t.setEdge(a,n[a]);else{if(s)throw new Error("Input graph is not connected: "+r);s=!0}r.nodeEdges(a).forEach(o)}return t}var IK={components:QX,dijkstra:T4,dijkstraAll:sK,findCycles:dK,floydWarshall:pK,isAcyclic:bK,postorder:EK,preorder:CK,prim:RK,tarjan:A4,topsort:P4},SL=$X,Oo={Graph:SL.Graph,json:HX,alg:IK,version:SL.version};const DK=U0(Oo);var a0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */a0.exports;(function(r,e){(function(){var t,n="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,v=1,p=2,g=1,y=2,b=4,m=8,_=16,x=32,C=64,w=128,O=256,A=512,k=30,R="...",I=800,M=16,N=1,F=2,z=3,B=1/0,U=9007199254740991,W=17976931348623157e292,Y=NaN,H=4294967295,J=H-1,le=H>>>1,fe=[["ary",w],["bind",g],["bindKey",y],["curry",m],["curryRight",_],["flip",A],["partial",x],["partialRight",C],["rearg",O]],ue="[object Arguments]",ge="[object Array]",ve="[object AsyncFunction]",de="[object Boolean]",ie="[object Date]",Q="[object DOMException]",re="[object Error]",se="[object Function]",pe="[object GeneratorFunction]",Oe="[object Map]",Ce="[object Number]",Re="[object Null]",be="[object Object]",j="[object Promise]",G="[object Proxy]",$="[object RegExp]",te="[object Set]",ce="[object String]",he="[object Symbol]",xe="[object Undefined]",Ne="[object WeakMap]",We="[object WeakSet]",ot="[object ArrayBuffer]",Ze="[object DataView]",et="[object Float32Array]",Qe="[object Float64Array]",Ye="[object Int8Array]",Ie="[object Int16Array]",ee="[object Int32Array]",we="[object Uint8Array]",Pe="[object Uint8ClampedArray]",De="[object Uint16Array]",Me="[object Uint32Array]",it=/\b__p \+= '';/g,Fe=/\b(__p \+=) '' \+/g,ut=/(__e\(.*?\)|\b__t\)) \+\n'';/g,rt=/&(?:amp|lt|gt|quot|#39);/g,ft=/[&<>"']/g,Ot=RegExp(rt.source),yt=RegExp(ft.source),nt=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ar=/^\w*$/,Gt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,At=/[\\^$.*+?()[\]{}|]/g,hr=RegExp(At.source),or=/^\s+/,Fr=/\s/,nn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,yr=/,? & /,Wr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Qr=/[()=,{}\[\]\/\s]/,Cn=/\\(\\)?/g,bn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Or=/\w*$/,Rr=/^[-+]0x[0-9a-f]+$/i,xr=/^0b[01]+$/i,Ii=/^\[object .+?Constructor\]$/,qn=/^0o[0-7]+$/i,Qo=/^(?:0|[1-9]\d*)$/,Vs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xa=/($^)/,So=/['\n\r\u2028\u2029\\]/g,Ka="\\ud800-\\udfff",$s="\\u0300-\\u036f",Ws="\\ufe20-\\ufe2f",Hs="\\u20d0-\\u20ff",ua=$s+Ws+Hs,mr="\\u2700-\\u27bf",cr="a-z\\xdf-\\xf6\\xf8-\\xff",Jo="\\xac\\xb1\\xd7\\xf7",es="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",uc="\\u2000-\\u206f",ri=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ts="A-Z\\xc0-\\xd6\\xd8-\\xde",an="\\ufe0e\\ufe0f",Pa=Jo+es+uc+ri,_n="['’]",Nu="["+Ka+"]",Ys="["+Pa+"]",Mn="["+ua+"]",lc="\\d+",$f="["+mr+"]",cc="["+cr+"]",fc="[^"+Ka+Pa+lc+mr+cr+ts+"]",ju="\\ud83c[\\udffb-\\udfff]",Wf="(?:"+Mn+"|"+ju+")",ni="[^"+Ka+"]",dc="(?:\\ud83c[\\udde6-\\uddff]){2}",ii="[\\ud800-\\udbff][\\udc00-\\udfff]",rs="["+ts+"]",hc="\\u200d",Ra="(?:"+cc+"|"+fc+")",Fu="(?:"+rs+"|"+fc+")",Bu="(?:"+_n+"(?:d|ll|m|re|s|t|ve))?",$r="(?:"+_n+"(?:D|LL|M|RE|S|T|VE))?",ka=Wf+"?",Uu="["+an+"]?",tv="(?:"+hc+"(?:"+[ni,dc,ii].join("|")+")"+Uu+ka+")*",vc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rv="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pc=Uu+ka+tv,zu="(?:"+[$f,dc,ii].join("|")+")"+pc,ns="(?:"+[ni+Mn+"?",Mn,dc,ii,Nu].join("|")+")",nv=RegExp(_n,"g"),Hf=RegExp(Mn,"g"),qu=RegExp(ju+"(?="+ju+")|"+ns+pc,"g"),gc=RegExp([rs+"?"+cc+"+"+Bu+"(?="+[Ys,rs,"$"].join("|")+")",Fu+"+"+$r+"(?="+[Ys,rs+Ra,"$"].join("|")+")",rs+"?"+Ra+"+"+Bu,rs+"+"+$r,rv,vc,lc,zu].join("|"),"g"),yc=RegExp("["+hc+Ka+ua+an+"]"),Yf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bc=-1,Br={};Br[et]=Br[Qe]=Br[Ye]=Br[Ie]=Br[ee]=Br[we]=Br[Pe]=Br[De]=Br[Me]=!0,Br[ue]=Br[ge]=Br[ot]=Br[de]=Br[Ze]=Br[ie]=Br[re]=Br[se]=Br[Oe]=Br[Ce]=Br[be]=Br[$]=Br[te]=Br[ce]=Br[Ne]=!1;var Zt={};Zt[ue]=Zt[ge]=Zt[ot]=Zt[Ze]=Zt[de]=Zt[ie]=Zt[et]=Zt[Qe]=Zt[Ye]=Zt[Ie]=Zt[ee]=Zt[Oe]=Zt[Ce]=Zt[be]=Zt[$]=Zt[te]=Zt[ce]=Zt[he]=Zt[we]=Zt[Pe]=Zt[De]=Zt[Me]=!0,Zt[re]=Zt[se]=Zt[Ne]=!1;var _c={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Xs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Kf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},iv=parseFloat,av=parseInt,Zf=typeof Lr=="object"&&Lr&&Lr.Object===Object&&Lr,is=typeof self=="object"&&self&&self.Object===Object&&self,wn=Zf||is||Function("return this")(),Gu=e&&!e.nodeType&&e,ai=Gu&&!0&&r&&!r.nodeType&&r,Ks=ai&&ai.exports===Gu,wc=Ks&&Zf.process,Ln=function(){try{var Se=ai&&ai.require&&ai.require("util").types;return Se||wc&&wc.binding&&wc.binding("util")}catch{}}(),Nn=Ln&&Ln.isArrayBuffer,Za=Ln&&Ln.isDate,la=Ln&&Ln.isMap,Vi=Ln&&Ln.isRegExp,ke=Ln&&Ln.isSet,Ve=Ln&&Ln.isTypedArray;function Be(Se,je,Le){switch(Le.length){case 0:return Se.call(je);case 1:return Se.call(je,Le[0]);case 2:return Se.call(je,Le[0],Le[1]);case 3:return Se.call(je,Le[0],Le[1],Le[2])}return Se.apply(je,Le)}function lt(Se,je,Le,ht){for(var zt=-1,vr=Se==null?0:Se.length;++zt<vr;){var Pn=Se[zt];je(ht,Pn,Le(Pn),Se)}return ht}function _t(Se,je){for(var Le=-1,ht=Se==null?0:Se.length;++Le<ht&&je(Se[Le],Le,Se)!==!1;);return Se}function br(Se,je){for(var Le=Se==null?0:Se.length;Le--&&je(Se[Le],Le,Se)!==!1;);return Se}function Tn(Se,je){for(var Le=-1,ht=Se==null?0:Se.length;++Le<ht;)if(!je(Se[Le],Le,Se))return!1;return!0}function Yn(Se,je){for(var Le=-1,ht=Se==null?0:Se.length,zt=0,vr=[];++Le<ht;){var Pn=Se[Le];je(Pn,Le,Se)&&(vr[zt++]=Pn)}return vr}function Ur(Se,je){var Le=Se==null?0:Se.length;return!!Le&&Co(Se,je,0)>-1}function xc(Se,je,Le){for(var ht=-1,zt=Se==null?0:Se.length;++ht<zt;)if(Le(je,Se[ht]))return!0;return!1}function Jr(Se,je){for(var Le=-1,ht=Se==null?0:Se.length,zt=Array(ht);++Le<ht;)zt[Le]=je(Se[Le],Le,Se);return zt}function jn(Se,je){for(var Le=-1,ht=je.length,zt=Se.length;++Le<ht;)Se[zt+Le]=je[Le];return Se}function Vu(Se,je,Le,ht){var zt=-1,vr=Se==null?0:Se.length;for(ht&&vr&&(Le=Se[++zt]);++zt<vr;)Le=je(Le,Se[zt],zt,Se);return Le}function S_(Se,je,Le,ht){var zt=Se==null?0:Se.length;for(ht&&zt&&(Le=Se[--zt]);zt--;)Le=je(Le,Se[zt],zt,Se);return Le}function as(Se,je){for(var Le=-1,ht=Se==null?0:Se.length;++Le<ht;)if(je(Se[Le],Le,Se))return!0;return!1}var Qf=$u("length");function Jf(Se){return Se.split("")}function Nr(Se){return Se.match(Wr)||[]}function uy(Se,je,Le){var ht;return Le(Se,function(zt,vr,Pn){if(je(zt,vr,Pn))return ht=vr,!1}),ht}function Ec(Se,je,Le,ht){for(var zt=Se.length,vr=Le+(ht?1:-1);ht?vr--:++vr<zt;)if(je(Se[vr],vr,Se))return vr;return-1}function Co(Se,je,Le){return je===je?py(Se,je,Le):Ec(Se,ly,Le)}function C_(Se,je,Le,ht){for(var zt=Le-1,vr=Se.length;++zt<vr;)if(ht(Se[zt],je))return zt;return-1}function ly(Se){return Se!==Se}function cy(Se,je){var Le=Se==null?0:Se.length;return Le?Wu(Se,je)/Le:Y}function $u(Se){return function(je){return je==null?t:je[Se]}}function Qa(Se){return function(je){return Se==null?t:Se[je]}}function Oc(Se,je,Le,ht,zt){return zt(Se,function(vr,Pn,Z){Le=ht?(ht=!1,vr):je(Le,vr,Pn,Z)}),Le}function fy(Se,je){var Le=Se.length;for(Se.sort(je);Le--;)Se[Le]=Se[Le].value;return Se}function Wu(Se,je){for(var Le,ht=-1,zt=Se.length;++ht<zt;){var vr=je(Se[ht]);vr!==t&&(Le=Le===t?vr:Le+vr)}return Le}function ed(Se,je){for(var Le=-1,ht=Array(Se);++Le<Se;)ht[Le]=je(Le);return ht}function dy(Se,je){return Jr(je,function(Le){return[Le,Se[Le]]})}function Sc(Se){return Se&&Se.slice(0,id(Se)+1).replace(or,"")}function Di(Se){return function(je){return Se(je)}}function Zs(Se,je){return Jr(je,function(Le){return Se[Le]})}function Ia(Se,je){return Se.has(je)}function Cc(Se,je){for(var Le=-1,ht=Se.length;++Le<ht&&Co(je,Se[Le],0)>-1;);return Le}function hy(Se,je){for(var Le=Se.length;Le--&&Co(je,Se[Le],0)>-1;);return Le}function T_(Se,je){for(var Le=Se.length,ht=0;Le--;)Se[Le]===je&&++ht;return ht}var A_=Qa(_c),td=Qa(Xs);function rd(Se){return"\\"+Kf[Se]}function ov(Se,je){return Se==null?t:Se[je]}function Hu(Se){return yc.test(Se)}function vy(Se){return Yf.test(Se)}function P_(Se){for(var je,Le=[];!(je=Se.next()).done;)Le.push(je.value);return Le}function sv(Se){var je=-1,Le=Array(Se.size);return Se.forEach(function(ht,zt){Le[++je]=[zt,ht]}),Le}function An(Se,je){return function(Le){return Se(je(Le))}}function on(Se,je){for(var Le=-1,ht=Se.length,zt=0,vr=[];++Le<ht;){var Pn=Se[Le];(Pn===je||Pn===c)&&(Se[Le]=c,vr[zt++]=Le)}return vr}function nd(Se){var je=-1,Le=Array(Se.size);return Se.forEach(function(ht){Le[++je]=ht}),Le}function R_(Se){var je=-1,Le=Array(Se.size);return Se.forEach(function(ht){Le[++je]=[ht,ht]}),Le}function py(Se,je,Le){for(var ht=Le-1,zt=Se.length;++ht<zt;)if(Se[ht]===je)return ht;return-1}function k_(Se,je,Le){for(var ht=Le+1;ht--;)if(Se[ht]===je)return ht;return ht}function os(Se){return Hu(Se)?Tc(Se):Qf(Se)}function yi(Se){return Hu(Se)?Ac(Se):Jf(Se)}function id(Se){for(var je=Se.length;je--&&Fr.test(Se.charAt(je)););return je}var Yu=Qa(Xf);function Tc(Se){for(var je=qu.lastIndex=0;qu.test(Se);)++je;return je}function Ac(Se){return Se.match(qu)||[]}function ad(Se){return Se.match(gc)||[]}var Xu=function Se(je){je=je==null?wn:Ku.defaults(wn.Object(),je,Ku.pick(wn,mc));var Le=je.Array,ht=je.Date,zt=je.Error,vr=je.Function,Pn=je.Math,Z=je.Object,ss=je.RegExp,od=je.String,sn=je.TypeError,Jt=Le.prototype,Qs=vr.prototype,Mi=Z.prototype,ca=je["__core-js_shared__"],Ja=Qs.toString,er=Mi.hasOwnProperty,gy=0,uv=function(){var E=/[^.]+$/.exec(ca&&ca.keys&&ca.keys.IE_PROTO||"");return E?"Symbol(src)_1."+E:""}(),sd=Mi.toString,I_=Ja.call(Z),lv=wn._,Pc=ss("^"+Ja.call(er).replace(At,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Js=Ks?je.Buffer:t,us=je.Symbol,Rc=je.Uint8Array,eo=Js?Js.allocUnsafe:t,Zu=An(Z.getPrototypeOf,Z),ls=Z.create,$i=Mi.propertyIsEnumerable,kc=Jt.splice,cv=us?us.isConcatSpreadable:t,To=us?us.iterator:t,Li=us?us.toStringTag:t,Ic=function(){try{var E=_s(Z,"defineProperty");return E({},"",{}),E}catch{}}(),D_=je.clearTimeout!==wn.clearTimeout&&je.clearTimeout,ud=ht&&ht.now!==wn.Date.now&&ht.now,yy=je.setTimeout!==wn.setTimeout&&je.setTimeout,Rn=Pn.ceil,Qu=Pn.floor,ld=Z.getOwnPropertySymbols,to=Js?Js.isBuffer:t,cd=je.isFinite,fd=Jt.join,eu=An(Z.keys,Z),kn=Pn.max,kr=Pn.min,fv=ht.now,M_=je.parseInt,my=Pn.random,dv=Jt.reverse,tu=_s(je,"DataView"),Ju=_s(je,"Map"),ru=_s(je,"Promise"),cs=_s(je,"Set"),el=_s(je,"WeakMap"),tl=_s(Z,"create"),rl=el&&new el,fs={},by=Lo(tu),_y=Lo(Ju),wy=Lo(ru),dd=Lo(cs),xy=Lo(el),Dc=us?us.prototype:t,nl=Dc?Dc.valueOf:t,hd=Dc?Dc.toString:t;function ne(E){if(In(E)&&!Kt(E)&&!(E instanceof fr)){if(E instanceof Mt)return E;if(er.call(E,"__wrapped__"))return ym(E)}return new Mt(E)}var ds=function(){function E(){}return function(T){if(!En(T))return{};if(ls)return ls(T);E.prototype=T;var D=new E;return E.prototype=t,D}}();function il(){}function Mt(E,T){this.__wrapped__=E,this.__actions__=[],this.__chain__=!!T,this.__index__=0,this.__values__=t}ne.templateSettings={escape:nt,evaluate:kt,interpolate:St,variable:"",imports:{_:ne}},ne.prototype=il.prototype,ne.prototype.constructor=ne,Mt.prototype=ds(il.prototype),Mt.prototype.constructor=Mt;function fr(E){this.__wrapped__=E,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=H,this.__views__=[]}function L_(){var E=new fr(this.__wrapped__);return E.__actions__=Kn(this.__actions__),E.__dir__=this.__dir__,E.__filtered__=this.__filtered__,E.__iteratees__=Kn(this.__iteratees__),E.__takeCount__=this.__takeCount__,E.__views__=Kn(this.__views__),E}function Mc(){if(this.__filtered__){var E=new fr(this);E.__dir__=-1,E.__filtered__=!0}else E=this.clone(),E.__dir__*=-1;return E}function Ey(){var E=this.__wrapped__.value(),T=this.__dir__,D=Kt(E),q=T<0,X=D?E.length:0,ae=um(0,X,this.__views__),ye=ae.start,_e=ae.end,Te=_e-ye,Ue=q?_e:ye-1,Ge=this.__iteratees__,He=Ge.length,ct=0,gt=kr(Te,this.__takeCount__);if(!D||!q&&X==Te&&gt==Te)return Vy(E,this.__actions__);var Bt=[];e:for(;Te--&&ct<gt;){Ue+=T;for(var ir=-1,Ut=E[Ue];++ir<He;){var pr=Ge[ir],Er=pr.iteratee,Ua=pr.type,Xi=Er(Ut);if(Ua==F)Ut=Xi;else if(!Xi){if(Ua==N)continue e;break e}}Bt[ct++]=Ut}return Bt}fr.prototype=ds(il.prototype),fr.prototype.constructor=fr;function nu(E){var T=-1,D=E==null?0:E.length;for(this.clear();++T<D;){var q=E[T];this.set(q[0],q[1])}}function N_(){this.__data__=tl?tl(null):{},this.size=0}function fa(E){var T=this.has(E)&&delete this.__data__[E];return this.size-=T?1:0,T}function j_(E){var T=this.__data__;if(tl){var D=T[E];return D===u?t:D}return er.call(T,E)?T[E]:t}function vd(E){var T=this.__data__;return tl?T[E]!==t:er.call(T,E)}function hv(E,T){var D=this.__data__;return this.size+=this.has(E)?0:1,D[E]=tl&&T===t?u:T,this}nu.prototype.clear=N_,nu.prototype.delete=fa,nu.prototype.get=j_,nu.prototype.has=vd,nu.prototype.set=hv;function ro(E){var T=-1,D=E==null?0:E.length;for(this.clear();++T<D;){var q=E[T];this.set(q[0],q[1])}}function Oy(){this.__data__=[],this.size=0}function Wi(E){var T=this.__data__,D=Lc(T,E);if(D<0)return!1;var q=T.length-1;return D==q?T.pop():kc.call(T,D,1),--this.size,!0}function hs(E){var T=this.__data__,D=Lc(T,E);return D<0?t:T[D][1]}function vv(E){return Lc(this.__data__,E)>-1}function Sy(E,T){var D=this.__data__,q=Lc(D,E);return q<0?(++this.size,D.push([E,T])):D[q][1]=T,this}ro.prototype.clear=Oy,ro.prototype.delete=Wi,ro.prototype.get=hs,ro.prototype.has=vv,ro.prototype.set=Sy;function da(E){var T=-1,D=E==null?0:E.length;for(this.clear();++T<D;){var q=E[T];this.set(q[0],q[1])}}function Cy(){this.size=0,this.__data__={hash:new nu,map:new(Ju||ro),string:new nu}}function pv(E){var T=ga(this,E).delete(E);return this.size-=T?1:0,T}function Ty(E){return ga(this,E).get(E)}function gv(E){return ga(this,E).has(E)}function yv(E,T){var D=ga(this,E),q=D.size;return D.set(E,T),this.size+=D.size==q?0:1,this}da.prototype.clear=Cy,da.prototype.delete=pv,da.prototype.get=Ty,da.prototype.has=gv,da.prototype.set=yv;function Ni(E){var T=-1,D=E==null?0:E.length;for(this.__data__=new da;++T<D;)this.add(E[T])}function F_(E){return this.__data__.set(E,u),this}function vs(E){return this.__data__.has(E)}Ni.prototype.add=Ni.prototype.push=F_,Ni.prototype.has=vs;function ha(E){var T=this.__data__=new ro(E);this.size=T.size}function Ay(){this.__data__=new ro,this.size=0}function mv(E){var T=this.__data__,D=T.delete(E);return this.size=T.size,D}function Py(E){return this.__data__.get(E)}function Ry(E){return this.__data__.has(E)}function ky(E,T){var D=this.__data__;if(D instanceof ro){var q=D.__data__;if(!Ju||q.length<i-1)return q.push([E,T]),this.size=++D.size,this;D=this.__data__=new da(q)}return D.set(E,T),this.size=D.size,this}ha.prototype.clear=Ay,ha.prototype.delete=mv,ha.prototype.get=Py,ha.prototype.has=Ry,ha.prototype.set=ky;function bv(E,T){var D=Kt(E),q=!D&&Jc(E),X=!D&&!q&&pl(E),ae=!D&&!q&&!X&&$d(E),ye=D||q||X||ae,_e=ye?ed(E.length,od):[],Te=_e.length;for(var Ue in E)(T||er.call(E,Ue))&&!(ye&&(Ue=="length"||X&&(Ue=="offset"||Ue=="parent")||ae&&(Ue=="buffer"||Ue=="byteLength"||Ue=="byteOffset")||Mo(Ue,Te)))&&_e.push(Ue);return _e}function mi(E){var T=E.length;return T?E[Pv(0,T-1)]:t}function no(E,T){return Qc(Kn(E),ao(T,0,E.length))}function pd(E){return Qc(Kn(E))}function ps(E,T,D){(D!==t&&!No(E[T],D)||D===t&&!(T in E))&&io(E,T,D)}function al(E,T,D){var q=E[T];(!(er.call(E,T)&&No(q,D))||D===t&&!(T in E))&&io(E,T,D)}function Lc(E,T){for(var D=E.length;D--;)if(No(E[D][0],T))return D;return-1}function Iy(E,T,D,q){return Da(E,function(X,ae,ye){T(q,X,D(X),ye)}),q}function iu(E,T){return E&&Na(T,li(T),E)}function Nc(E,T){return E&&Na(T,ba(T),E)}function io(E,T,D){T=="__proto__"&&Ic?Ic(E,T,{configurable:!0,enumerable:!0,value:D,writable:!0}):E[T]=D}function gd(E,T){for(var D=-1,q=T.length,X=Le(q),ae=E==null;++D<q;)X[D]=ae?t:hw(E,T[D]);return X}function ao(E,T,D){return E===E&&(D!==t&&(E=E<=D?E:D),T!==t&&(E=E>=T?E:T)),E}function Hi(E,T,D,q,X,ae){var ye,_e=T&f,Te=T&d,Ue=T&h;if(D&&(ye=X?D(E,q,X,ae):D(E)),ye!==t)return ye;if(!En(E))return E;var Ge=Kt(E);if(Ge){if(ye=$_(E),!_e)return Kn(E,ye)}else{var He=oi(E),ct=He==se||He==pe;if(pl(E))return Hy(E,_e);if(He==be||He==ue||ct&&!X){if(ye=Te||ct?{}:cm(E),!_e)return Te?jv(E,Nc(ye,E)):em(E,iu(ye,E))}else{if(!Zt[He])return X?E:{};ye=W_(E,He,_e)}}ae||(ae=new ha);var gt=ae.get(E);if(gt)return gt;ae.set(E,ye),HA(E)?E.forEach(function(Ut){ye.add(Hi(Ut,T,D,Ut,E,ae))}):$A(E)&&E.forEach(function(Ut,pr){ye.set(pr,Hi(Ut,T,D,pr,E,ae))});var Bt=Ue?Te?_i:dl:Te?ba:li,ir=Ge?t:Bt(E);return _t(ir||E,function(Ut,pr){ir&&(pr=Ut,Ut=E[pr]),al(ye,pr,Hi(Ut,T,D,pr,E,ae))}),ye}function yd(E){var T=li(E);return function(D){return md(D,E,T)}}function md(E,T,D){var q=D.length;if(E==null)return!q;for(E=Z(E);q--;){var X=D[q],ae=T[X],ye=E[X];if(ye===t&&!(X in E)||!ae(ye))return!1}return!0}function jc(E,T,D){if(typeof E!="function")throw new sn(o);return Zc(function(){E.apply(t,D)},T)}function ol(E,T,D,q){var X=-1,ae=Ur,ye=!0,_e=E.length,Te=[],Ue=T.length;if(!_e)return Te;D&&(T=Jr(T,Di(D))),q?(ae=xc,ye=!1):T.length>=i&&(ae=Ia,ye=!1,T=new Ni(T));e:for(;++X<_e;){var Ge=E[X],He=D==null?Ge:D(Ge);if(Ge=q||Ge!==0?Ge:0,ye&&He===He){for(var ct=Ue;ct--;)if(T[ct]===He)continue e;Te.push(Ge)}else ae(T,He,q)||Te.push(Ge)}return Te}var Da=tm(Ma),_v=tm(La,!0);function wv(E,T){var D=!0;return Da(E,function(q,X,ae){return D=!!T(q,X,ae),D}),D}function bd(E,T,D){for(var q=-1,X=E.length;++q<X;){var ae=E[q],ye=T(ae);if(ye!=null&&(_e===t?ye===ye&&!Ba(ye):D(ye,_e)))var _e=ye,Te=ae}return Te}function Dy(E,T,D,q){var X=E.length;for(D=tr(D),D<0&&(D=-D>X?0:X+D),q=q===t||q>X?X:tr(q),q<0&&(q+=X),q=D>q?0:XA(q);D<q;)E[D++]=T;return E}function oo(E,T){var D=[];return Da(E,function(q,X,ae){T(q,X,ae)&&D.push(q)}),D}function Gn(E,T,D,q,X){var ae=-1,ye=E.length;for(D||(D=qv),X||(X=[]);++ae<ye;){var _e=E[ae];T>0&&D(_e)?T>1?Gn(_e,T-1,D,q,X):jn(X,_e):q||(X[X.length]=_e)}return X}var _d=rm(),My=rm(!0);function Ma(E,T){return E&&_d(E,T,li)}function La(E,T){return E&&My(E,T,li)}function sl(E,T){return Yn(T,function(D){return uu(E[D])})}function Ao(E,T){T=Io(T,E);for(var D=0,q=T.length;E!=null&&D<q;)E=E[co(T[D++])];return D&&D==q?E:t}function wd(E,T,D){var q=T(E);return Kt(E)?q:jn(q,D(E))}function Vn(E){return E==null?E===t?xe:Re:Li&&Li in Z(E)?ya(E):Y_(E)}function gs(E,T){return E>T}function It(E,T){return E!=null&&er.call(E,T)}function xd(E,T){return E!=null&&T in Z(E)}function xv(E,T,D){return E>=kr(T,D)&&E<kn(T,D)}function Po(E,T,D){for(var q=D?xc:Ur,X=E[0].length,ae=E.length,ye=ae,_e=Le(ae),Te=1/0,Ue=[];ye--;){var Ge=E[ye];ye&&T&&(Ge=Jr(Ge,Di(T))),Te=kr(Ge.length,Te),_e[ye]=!D&&(T||X>=120&&Ge.length>=120)?new Ni(ye&&Ge):t}Ge=E[0];var He=-1,ct=_e[0];e:for(;++He<X&&Ue.length<Te;){var gt=Ge[He],Bt=T?T(gt):gt;if(gt=D||gt!==0?gt:0,!(ct?Ia(ct,Bt):q(Ue,Bt,D))){for(ye=ae;--ye;){var ir=_e[ye];if(!(ir?Ia(ir,Bt):q(E[ye],Bt,D)))continue e}ct&&ct.push(Bt),Ue.push(gt)}}return Ue}function Ev(E,T,D,q){return Ma(E,function(X,ae,ye){T(q,D(X),ae,ye)}),q}function ul(E,T,D){T=Io(T,E),E=Wv(E,T);var q=E==null?E:E[co(L(T))];return q==null?t:Be(q,E,D)}function Xn(E){return In(E)&&Vn(E)==ue}function Ly(E){return In(E)&&Vn(E)==ot}function Ny(E){return In(E)&&Vn(E)==ie}function Fc(E,T,D,q,X){return E===T?!0:E==null||T==null||!In(E)&&!In(T)?E!==E&&T!==T:Ro(E,T,D,q,Fc,X)}function Ro(E,T,D,q,X,ae){var ye=Kt(E),_e=Kt(T),Te=ye?ge:oi(E),Ue=_e?ge:oi(T);Te=Te==ue?be:Te,Ue=Ue==ue?be:Ue;var Ge=Te==be,He=Ue==be,ct=Te==Ue;if(ct&&pl(E)){if(!pl(T))return!1;ye=!0,Ge=!1}if(ct&&!Ge)return ae||(ae=new ha),ye||$d(E)?Bv(E,T,D,q,X,ae):Xc(E,T,Te,D,q,X,ae);if(!(D&v)){var gt=Ge&&er.call(E,"__wrapped__"),Bt=He&&er.call(T,"__wrapped__");if(gt||Bt){var ir=gt?E.value():E,Ut=Bt?T.value():T;return ae||(ae=new ha),X(ir,Ut,D,q,ae)}}return ct?(ae||(ae=new ha),Uv(E,T,D,q,X,ae)):!1}function bi(E){return In(E)&&oi(E)==Oe}function Bc(E,T,D,q){var X=D.length,ae=X,ye=!q;if(E==null)return!ae;for(E=Z(E);X--;){var _e=D[X];if(ye&&_e[2]?_e[1]!==E[_e[0]]:!(_e[0]in E))return!1}for(;++X<ae;){_e=D[X];var Te=_e[0],Ue=E[Te],Ge=_e[1];if(ye&&_e[2]){if(Ue===t&&!(Te in E))return!1}else{var He=new ha;if(q)var ct=q(Ue,Ge,Te,E,T,He);if(!(ct===t?Fc(Ge,Ue,v|p,q,He):ct))return!1}}return!0}function Ed(E){if(!En(E)||H_(E))return!1;var T=uu(E)?Pc:Ii;return T.test(Lo(E))}function B_(E){return In(E)&&Vn(E)==$}function Uc(E){return In(E)&&oi(E)==te}function jy(E){return In(E)&&Am(E.length)&&!!Br[Vn(E)]}function Ov(E){return typeof E=="function"?E:E==null?_a:typeof E=="object"?Kt(E)?Sd(E[0],E[1]):ll(E):oP(E)}function Od(E){if(!Kc(E))return eu(E);var T=[];for(var D in Z(E))er.call(E,D)&&D!="constructor"&&T.push(D);return T}function Fy(E){if(!En(E))return vl(E);var T=Kc(E),D=[];for(var q in E)q=="constructor"&&(T||!er.call(E,q))||D.push(q);return D}function zc(E,T){return E<T}function Sv(E,T){var D=-1,q=ma(E)?Le(E.length):[];return Da(E,function(X,ae,ye){q[++D]=T(X,ae,ye)}),q}function ll(E){var T=Ht(E);return T.length==1&&T[0][2]?Vv(T[0][0],T[0][1]):function(D){return D===E||Bc(D,E,T)}}function Sd(E,T){return Gv(E)&&dm(T)?Vv(co(E),T):function(D){var q=hw(D,E);return q===t&&q===T?vw(D,E):Fc(T,q,v|p)}}function qc(E,T,D,q,X){E!==T&&_d(T,function(ae,ye){if(X||(X=new ha),En(ae))By(E,T,ye,D,qc,q,X);else{var _e=q?q(Hv(E,ye),ae,ye+"",E,T,X):t;_e===t&&(_e=ae),ps(E,ye,_e)}},ba)}function By(E,T,D,q,X,ae,ye){var _e=Hv(E,D),Te=Hv(T,D),Ue=ye.get(Te);if(Ue){ps(E,D,Ue);return}var Ge=ae?ae(_e,Te,D+"",E,T,ye):t,He=Ge===t;if(He){var ct=Kt(Te),gt=!ct&&pl(Te),Bt=!ct&&!gt&&$d(Te);Ge=Te,ct||gt||Bt?Kt(_e)?Ge=_e:Bn(_e)?Ge=Kn(_e):gt?(He=!1,Ge=Hy(Te,!0)):Bt?(He=!1,Ge=Ky(Te,!0)):Ge=[]:rp(Te)||Jc(Te)?(Ge=_e,Jc(_e)?Ge=KA(_e):(!En(_e)||uu(_e))&&(Ge=cm(Te))):He=!1}He&&(ye.set(Te,Ge),X(Ge,Te,q,ae,ye),ye.delete(Te)),ps(E,D,Ge)}function Gc(E,T){var D=E.length;if(D)return T+=T<0?D:0,Mo(T,D)?E[T]:t}function Cd(E,T,D){T.length?T=Jr(T,function(ae){return Kt(ae)?function(ye){return Ao(ye,ae.length===1?ae[0]:ae)}:ae}):T=[_a];var q=-1;T=Jr(T,Di(Pt()));var X=Sv(E,function(ae,ye,_e){var Te=Jr(T,function(Ue){return Ue(ae)});return{criteria:Te,index:++q,value:ae}});return fy(X,function(ae,ye){return Rd(ae,ye,D)})}function Cv(E,T){return Tv(E,T,function(D,q){return vw(E,q)})}function Tv(E,T,D){for(var q=-1,X=T.length,ae={};++q<X;){var ye=T[q],_e=Ao(E,ye);D(_e,ye)&&cl(ae,Io(ye,E),_e)}return ae}function so(E){return function(T){return Ao(T,E)}}function ko(E,T,D,q){var X=q?C_:Co,ae=-1,ye=T.length,_e=E;for(E===T&&(T=Kn(T)),D&&(_e=Jr(E,Di(D)));++ae<ye;)for(var Te=0,Ue=T[ae],Ge=D?D(Ue):Ue;(Te=X(_e,Ge,Te,q))>-1;)_e!==E&&kc.call(_e,Te,1),kc.call(E,Te,1);return E}function Av(E,T){for(var D=E?T.length:0,q=D-1;D--;){var X=T[D];if(D==q||X!==ae){var ae=X;Mo(X)?kc.call(E,X,1):$c(E,X)}}return E}function Pv(E,T){return E+Qu(my()*(T-E+1))}function U_(E,T,D,q){for(var X=-1,ae=kn(Rn((T-E)/(D||1)),0),ye=Le(ae);ae--;)ye[q?ae:++X]=E,E+=D;return ye}function Rv(E,T){var D="";if(!E||T<1||T>U)return D;do T%2&&(D+=E),T=Qu(T/2),T&&(E+=E);while(T);return D}function Qt(E,T){return Yv($v(E,T,_a),E+"")}function Uy(E){return mi(Wd(E))}function zy(E,T){var D=Wd(E);return Qc(D,ao(T,0,D.length))}function cl(E,T,D,q){if(!En(E))return E;T=Io(T,E);for(var X=-1,ae=T.length,ye=ae-1,_e=E;_e!=null&&++X<ae;){var Te=co(T[X]),Ue=D;if(Te==="__proto__"||Te==="constructor"||Te==="prototype")return E;if(X!=ye){var Ge=_e[Te];Ue=q?q(Ge,Te,_e):t,Ue===t&&(Ue=En(Ge)?Ge:Mo(T[X+1])?[]:{})}al(_e,Te,Ue),_e=_e[Te]}return E}var qy=rl?function(E,T){return rl.set(E,T),E}:_a,z_=Ic?function(E,T){return Ic(E,"toString",{configurable:!0,enumerable:!1,value:gw(T),writable:!0})}:_a;function q_(E){return Qc(Wd(E))}function un(E,T,D){var q=-1,X=E.length;T<0&&(T=-T>X?0:X+T),D=D>X?X:D,D<0&&(D+=X),X=T>D?0:D-T>>>0,T>>>=0;for(var ae=Le(X);++q<X;)ae[q]=E[q+T];return ae}function G_(E,T){var D;return Da(E,function(q,X,ae){return D=T(q,X,ae),!D}),!!D}function Vc(E,T,D){var q=0,X=E==null?q:E.length;if(typeof T=="number"&&T===T&&X<=le){for(;q<X;){var ae=q+X>>>1,ye=E[ae];ye!==null&&!Ba(ye)&&(D?ye<=T:ye<T)?q=ae+1:X=ae}return X}return kv(E,T,_a,D)}function kv(E,T,D,q){var X=0,ae=E==null?0:E.length;if(ae===0)return 0;T=D(T);for(var ye=T!==T,_e=T===null,Te=Ba(T),Ue=T===t;X<ae;){var Ge=Qu((X+ae)/2),He=D(E[Ge]),ct=He!==t,gt=He===null,Bt=He===He,ir=Ba(He);if(ye)var Ut=q||Bt;else Ue?Ut=Bt&&(q||ct):_e?Ut=Bt&&ct&&(q||!gt):Te?Ut=Bt&&ct&&!gt&&(q||!ir):gt||ir?Ut=!1:Ut=q?He<=T:He<T;Ut?X=Ge+1:ae=Ge}return kr(ae,J)}function Td(E,T){for(var D=-1,q=E.length,X=0,ae=[];++D<q;){var ye=E[D],_e=T?T(ye):ye;if(!D||!No(_e,Te)){var Te=_e;ae[X++]=ye===0?0:ye}}return ae}function Gy(E){return typeof E=="number"?E:Ba(E)?Y:+E}function Yi(E){if(typeof E=="string")return E;if(Kt(E))return Jr(E,Yi)+"";if(Ba(E))return hd?hd.call(E):"";var T=E+"";return T=="0"&&1/E==-B?"-0":T}function ys(E,T,D){var q=-1,X=Ur,ae=E.length,ye=!0,_e=[],Te=_e;if(D)ye=!1,X=xc;else if(ae>=i){var Ue=T?null:Do(E);if(Ue)return nd(Ue);ye=!1,X=Ia,Te=new Ni}else Te=T?[]:_e;e:for(;++q<ae;){var Ge=E[q],He=T?T(Ge):Ge;if(Ge=D||Ge!==0?Ge:0,ye&&He===He){for(var ct=Te.length;ct--;)if(Te[ct]===He)continue e;T&&Te.push(He),_e.push(Ge)}else X(Te,He,D)||(Te!==_e&&Te.push(He),_e.push(Ge))}return _e}function $c(E,T){return T=Io(T,E),E=Wv(E,T),E==null||delete E[co(L(T))]}function Iv(E,T,D,q){return cl(E,T,D(Ao(E,T)),q)}function Ad(E,T,D,q){for(var X=E.length,ae=q?X:-1;(q?ae--:++ae<X)&&T(E[ae],ae,E););return D?un(E,q?0:ae,q?ae+1:X):un(E,q?ae+1:0,q?X:ae)}function Vy(E,T){var D=E;return D instanceof fr&&(D=D.value()),Vu(T,function(q,X){return X.func.apply(X.thisArg,jn([q],X.args))},D)}function Dv(E,T,D){var q=E.length;if(q<2)return q?ys(E[0]):[];for(var X=-1,ae=Le(q);++X<q;)for(var ye=E[X],_e=-1;++_e<q;)_e!=X&&(ae[X]=ol(ae[X]||ye,E[_e],T,D));return ys(Gn(ae,1),T,D)}function $y(E,T,D){for(var q=-1,X=E.length,ae=T.length,ye={};++q<X;){var _e=q<ae?T[q]:t;D(ye,E[q],_e)}return ye}function Mv(E){return Bn(E)?E:[]}function Lv(E){return typeof E=="function"?E:_a}function Io(E,T){return Kt(E)?E:Gv(E,T)?[E]:Xv(zr(E))}var Pd=Qt;function ms(E,T,D){var q=E.length;return D=D===t?q:D,!T&&D>=q?E:un(E,T,D)}var Wy=D_||function(E){return wn.clearTimeout(E)};function Hy(E,T){if(T)return E.slice();var D=E.length,q=eo?eo(D):new E.constructor(D);return E.copy(q),q}function Nv(E){var T=new E.constructor(E.byteLength);return new Rc(T).set(new Rc(E)),T}function Yy(E,T){var D=T?Nv(E.buffer):E.buffer;return new E.constructor(D,E.byteOffset,E.byteLength)}function Xy(E){var T=new E.constructor(E.source,Or.exec(E));return T.lastIndex=E.lastIndex,T}function V_(E){return nl?Z(nl.call(E)):{}}function Ky(E,T){var D=T?Nv(E.buffer):E.buffer;return new E.constructor(D,E.byteOffset,E.length)}function Zy(E,T){if(E!==T){var D=E!==t,q=E===null,X=E===E,ae=Ba(E),ye=T!==t,_e=T===null,Te=T===T,Ue=Ba(T);if(!_e&&!Ue&&!ae&&E>T||ae&&ye&&Te&&!_e&&!Ue||q&&ye&&Te||!D&&Te||!X)return 1;if(!q&&!ae&&!Ue&&E<T||Ue&&D&&X&&!q&&!ae||_e&&D&&X||!ye&&X||!Te)return-1}return 0}function Rd(E,T,D){for(var q=-1,X=E.criteria,ae=T.criteria,ye=X.length,_e=D.length;++q<ye;){var Te=Zy(X[q],ae[q]);if(Te){if(q>=_e)return Te;var Ue=D[q];return Te*(Ue=="desc"?-1:1)}}return E.index-T.index}function Qy(E,T,D,q){for(var X=-1,ae=E.length,ye=D.length,_e=-1,Te=T.length,Ue=kn(ae-ye,0),Ge=Le(Te+Ue),He=!q;++_e<Te;)Ge[_e]=T[_e];for(;++X<ye;)(He||X<ae)&&(Ge[D[X]]=E[X]);for(;Ue--;)Ge[_e++]=E[X++];return Ge}function Jy(E,T,D,q){for(var X=-1,ae=E.length,ye=-1,_e=D.length,Te=-1,Ue=T.length,Ge=kn(ae-_e,0),He=Le(Ge+Ue),ct=!q;++X<Ge;)He[X]=E[X];for(var gt=X;++Te<Ue;)He[gt+Te]=T[Te];for(;++ye<_e;)(ct||X<ae)&&(He[gt+D[ye]]=E[X++]);return He}function Kn(E,T){var D=-1,q=E.length;for(T||(T=Le(q));++D<q;)T[D]=E[D];return T}function Na(E,T,D,q){var X=!D;D||(D={});for(var ae=-1,ye=T.length;++ae<ye;){var _e=T[ae],Te=q?q(D[_e],E[_e],_e,D,E):t;Te===t&&(Te=E[_e]),X?io(D,_e,Te):al(D,_e,Te)}return D}function em(E,T){return Na(E,Ld(E),T)}function jv(E,T){return Na(E,Cr(E),T)}function Wc(E,T){return function(D,q){var X=Kt(D)?lt:Iy,ae=T?T():{};return X(D,E,Pt(q,2),ae)}}function au(E){return Qt(function(T,D){var q=-1,X=D.length,ae=X>1?D[X-1]:t,ye=X>2?D[2]:t;for(ae=E.length>3&&typeof ae=="function"?(X--,ae):t,ye&&wi(D[0],D[1],ye)&&(ae=X<3?t:ae,X=1),T=Z(T);++q<X;){var _e=D[q];_e&&E(T,_e,q,ae)}return T})}function tm(E,T){return function(D,q){if(D==null)return D;if(!ma(D))return E(D,q);for(var X=D.length,ae=T?X:-1,ye=Z(D);(T?ae--:++ae<X)&&q(ye[ae],ae,ye)!==!1;);return D}}function rm(E){return function(T,D,q){for(var X=-1,ae=Z(T),ye=q(T),_e=ye.length;_e--;){var Te=ye[E?_e:++X];if(D(ae[Te],Te,ae)===!1)break}return T}}function kd(E,T,D){var q=T&g,X=ou(E);function ae(){var ye=this&&this!==wn&&this instanceof ae?X:E;return ye.apply(q?D:this,arguments)}return ae}function Hc(E){return function(T){T=zr(T);var D=Hu(T)?yi(T):t,q=D?D[0]:T.charAt(0),X=D?ms(D,1).join(""):T.slice(1);return q[E]()+X}}function fl(E){return function(T){return Vu(iP(nP(T).replace(nv,"")),E,"")}}function ou(E){return function(){var T=arguments;switch(T.length){case 0:return new E;case 1:return new E(T[0]);case 2:return new E(T[0],T[1]);case 3:return new E(T[0],T[1],T[2]);case 4:return new E(T[0],T[1],T[2],T[3]);case 5:return new E(T[0],T[1],T[2],T[3],T[4]);case 6:return new E(T[0],T[1],T[2],T[3],T[4],T[5]);case 7:return new E(T[0],T[1],T[2],T[3],T[4],T[5],T[6])}var D=ds(E.prototype),q=E.apply(D,T);return En(q)?q:D}}function nm(E,T,D){var q=ou(E);function X(){for(var ae=arguments.length,ye=Le(ae),_e=ae,Te=hl(X);_e--;)ye[_e]=arguments[_e];var Ue=ae<3&&ye[0]!==Te&&ye[ae-1]!==Te?[]:on(ye,Te);if(ae-=Ue.length,ae<D)return om(E,T,Id,X.placeholder,t,ye,Ue,t,t,D-ae);var Ge=this&&this!==wn&&this instanceof X?q:E;return Be(Ge,this,ye)}return X}function im(E){return function(T,D,q){var X=Z(T);if(!ma(T)){var ae=Pt(D,3);T=li(T),D=function(_e){return ae(X[_e],_e,X)}}var ye=E(T,D,q);return ye>-1?X[ae?T[ye]:ye]:t}}function va(E){return lo(function(T){var D=T.length,q=D,X=Mt.prototype.thru;for(E&&T.reverse();q--;){var ae=T[q];if(typeof ae!="function")throw new sn(o);if(X&&!ye&&Md(ae)=="wrapper")var ye=new Mt([],!0)}for(q=ye?q:D;++q<D;){ae=T[q];var _e=Md(ae),Te=_e=="wrapper"?bs(ae):t;Te&&si(Te[0])&&Te[1]==(w|m|x|O)&&!Te[4].length&&Te[9]==1?ye=ye[Md(Te[0])].apply(ye,Te[3]):ye=ae.length==1&&si(ae)?ye[_e]():ye.thru(ae)}return function(){var Ue=arguments,Ge=Ue[0];if(ye&&Ue.length==1&&Kt(Ge))return ye.plant(Ge).value();for(var He=0,ct=D?T[He].apply(this,Ue):Ge;++He<D;)ct=T[He].call(this,ct);return ct}})}function Id(E,T,D,q,X,ae,ye,_e,Te,Ue){var Ge=T&w,He=T&g,ct=T&y,gt=T&(m|_),Bt=T&A,ir=ct?t:ou(E);function Ut(){for(var pr=arguments.length,Er=Le(pr),Ua=pr;Ua--;)Er[Ua]=arguments[Ua];if(gt)var Xi=hl(Ut),za=T_(Er,Xi);if(q&&(Er=Qy(Er,q,X,gt)),ae&&(Er=Jy(Er,ae,ye,gt)),pr-=za,gt&&pr<Ue){var Un=on(Er,Xi);return om(E,T,Id,Ut.placeholder,D,Er,Un,_e,Te,Ue-pr)}var jo=He?D:this,cu=ct?jo[E]:E;return pr=Er.length,_e?Er=X_(Er,_e):Bt&&pr>1&&Er.reverse(),Ge&&Te<pr&&(Er.length=Te),this&&this!==wn&&this instanceof Ut&&(cu=ir||ou(cu)),cu.apply(jo,Er)}return Ut}function am(E,T){return function(D,q){return Ev(D,E,T(q),{})}}function uo(E,T){return function(D,q){var X;if(D===t&&q===t)return T;if(D!==t&&(X=D),q!==t){if(X===t)return q;typeof D=="string"||typeof q=="string"?(D=Yi(D),q=Yi(q)):(D=Gy(D),q=Gy(q)),X=E(D,q)}return X}}function Vt(E){return lo(function(T){return T=Jr(T,Di(Pt())),Qt(function(D){var q=this;return E(T,function(X){return Be(X,q,D)})})})}function Dd(E,T){T=T===t?" ":Yi(T);var D=T.length;if(D<2)return D?Rv(T,E):T;var q=Rv(T,Rn(E/os(T)));return Hu(T)?ms(yi(q),0,E).join(""):q.slice(0,E)}function ji(E,T,D,q){var X=T&g,ae=ou(E);function ye(){for(var _e=-1,Te=arguments.length,Ue=-1,Ge=q.length,He=Le(Ge+Te),ct=this&&this!==wn&&this instanceof ye?ae:E;++Ue<Ge;)He[Ue]=q[Ue];for(;Te--;)He[Ue++]=arguments[++_e];return Be(ct,X?D:this,He)}return ye}function fn(E){return function(T,D,q){return q&&typeof q!="number"&&wi(T,D,q)&&(D=q=t),T=lu(T),D===t?(D=T,T=0):D=lu(D),q=q===t?T<D?1:-1:lu(q),U_(T,D,q,E)}}function ja(E){return function(T,D){return typeof T=="string"&&typeof D=="string"||(T=ho(T),D=ho(D)),E(T,D)}}function om(E,T,D,q,X,ae,ye,_e,Te,Ue){var Ge=T&m,He=Ge?ye:t,ct=Ge?t:ye,gt=Ge?ae:t,Bt=Ge?t:ae;T|=Ge?x:C,T&=~(Ge?C:x),T&b||(T&=-4);var ir=[E,T,X,gt,He,Bt,ct,_e,Te,Ue],Ut=D.apply(t,ir);return si(E)&&pm(Ut,ir),Ut.placeholder=q,gm(Ut,E,T)}function Yc(E){var T=Pn[E];return function(D,q){if(D=ho(D),q=q==null?0:kr(tr(q),292),q&&cd(D)){var X=(zr(D)+"e").split("e"),ae=T(X[0]+"e"+(+X[1]+q));return X=(zr(ae)+"e").split("e"),+(X[0]+"e"+(+X[1]-q))}return T(D)}}var Do=cs&&1/nd(new cs([,-0]))[1]==B?function(E){return new cs(E)}:bw;function Fv(E){return function(T){var D=oi(T);return D==Oe?sv(T):D==te?R_(T):dy(T,E(T))}}function pa(E,T,D,q,X,ae,ye,_e){var Te=T&y;if(!Te&&typeof E!="function")throw new sn(o);var Ue=q?q.length:0;if(Ue||(T&=-97,q=X=t),ye=ye===t?ye:kn(tr(ye),0),_e=_e===t?_e:tr(_e),Ue-=X?X.length:0,T&C){var Ge=q,He=X;q=X=t}var ct=Te?t:bs(E),gt=[E,T,D,q,X,Ge,He,ae,ye,_e];if(ct&&vm(gt,ct),E=gt[0],T=gt[1],D=gt[2],q=gt[3],X=gt[4],_e=gt[9]=gt[9]===t?Te?0:E.length:kn(gt[9]-Ue,0),!_e&&T&(m|_)&&(T&=-25),!T||T==g)var Bt=kd(E,T,D);else T==m||T==_?Bt=nm(E,T,_e):(T==x||T==(g|x))&&!X.length?Bt=ji(E,T,D,q):Bt=Id.apply(t,gt);var ir=ct?qy:pm;return gm(ir(Bt,gt),E,T)}function en(E,T,D,q){return E===t||No(E,Mi[D])&&!er.call(q,D)?T:E}function ln(E,T,D,q,X,ae){return En(E)&&En(T)&&(ae.set(T,E),qc(E,T,t,ln,ae),ae.delete(T)),E}function sm(E){return rp(E)?t:E}function Bv(E,T,D,q,X,ae){var ye=D&v,_e=E.length,Te=T.length;if(_e!=Te&&!(ye&&Te>_e))return!1;var Ue=ae.get(E),Ge=ae.get(T);if(Ue&&Ge)return Ue==T&&Ge==E;var He=-1,ct=!0,gt=D&p?new Ni:t;for(ae.set(E,T),ae.set(T,E);++He<_e;){var Bt=E[He],ir=T[He];if(q)var Ut=ye?q(ir,Bt,He,T,E,ae):q(Bt,ir,He,E,T,ae);if(Ut!==t){if(Ut)continue;ct=!1;break}if(gt){if(!as(T,function(pr,Er){if(!Ia(gt,Er)&&(Bt===pr||X(Bt,pr,D,q,ae)))return gt.push(Er)})){ct=!1;break}}else if(!(Bt===ir||X(Bt,ir,D,q,ae))){ct=!1;break}}return ae.delete(E),ae.delete(T),ct}function Xc(E,T,D,q,X,ae,ye){switch(D){case Ze:if(E.byteLength!=T.byteLength||E.byteOffset!=T.byteOffset)return!1;E=E.buffer,T=T.buffer;case ot:return!(E.byteLength!=T.byteLength||!ae(new Rc(E),new Rc(T)));case de:case ie:case Ce:return No(+E,+T);case re:return E.name==T.name&&E.message==T.message;case $:case ce:return E==T+"";case Oe:var _e=sv;case te:var Te=q&v;if(_e||(_e=nd),E.size!=T.size&&!Te)return!1;var Ue=ye.get(E);if(Ue)return Ue==T;q|=p,ye.set(E,T);var Ge=Bv(_e(E),_e(T),q,X,ae,ye);return ye.delete(E),Ge;case he:if(nl)return nl.call(E)==nl.call(T)}return!1}function Uv(E,T,D,q,X,ae){var ye=D&v,_e=dl(E),Te=_e.length,Ue=dl(T),Ge=Ue.length;if(Te!=Ge&&!ye)return!1;for(var He=Te;He--;){var ct=_e[He];if(!(ye?ct in T:er.call(T,ct)))return!1}var gt=ae.get(E),Bt=ae.get(T);if(gt&&Bt)return gt==T&&Bt==E;var ir=!0;ae.set(E,T),ae.set(T,E);for(var Ut=ye;++He<Te;){ct=_e[He];var pr=E[ct],Er=T[ct];if(q)var Ua=ye?q(Er,pr,ct,T,E,ae):q(pr,Er,ct,E,T,ae);if(!(Ua===t?pr===Er||X(pr,Er,D,q,ae):Ua)){ir=!1;break}Ut||(Ut=ct=="constructor")}if(ir&&!Ut){var Xi=E.constructor,za=T.constructor;Xi!=za&&"constructor"in E&&"constructor"in T&&!(typeof Xi=="function"&&Xi instanceof Xi&&typeof za=="function"&&za instanceof za)&&(ir=!1)}return ae.delete(E),ae.delete(T),ir}function lo(E){return Yv($v(E,t,Bd),E+"")}function dl(E){return wd(E,li,Ld)}function _i(E){return wd(E,ba,Cr)}var bs=rl?function(E){return rl.get(E)}:bw;function Md(E){for(var T=E.name+"",D=fs[T],q=er.call(fs,T)?D.length:0;q--;){var X=D[q],ae=X.func;if(ae==null||ae==E)return X.name}return T}function hl(E){var T=er.call(ne,"placeholder")?ne:E;return T.placeholder}function Pt(){var E=ne.iteratee||yw;return E=E===yw?Ov:E,arguments.length?E(arguments[0],arguments[1]):E}function ga(E,T){var D=E.__data__;return $n(T)?D[typeof T=="string"?"string":"hash"]:D.map}function Ht(E){for(var T=li(E),D=T.length;D--;){var q=T[D],X=E[q];T[D]=[q,X,dm(X)]}return T}function _s(E,T){var D=ov(E,T);return Ed(D)?D:t}function ya(E){var T=er.call(E,Li),D=E[Li];try{E[Li]=t;var q=!0}catch{}var X=sd.call(E);return q&&(T?E[Li]=D:delete E[Li]),X}var Ld=ld?function(E){return E==null?[]:(E=Z(E),Yn(ld(E),function(T){return $i.call(E,T)}))}:_w,Cr=ld?function(E){for(var T=[];E;)jn(T,Ld(E)),E=Zu(E);return T}:_w,oi=Vn;(tu&&oi(new tu(new ArrayBuffer(1)))!=Ze||Ju&&oi(new Ju)!=Oe||ru&&oi(ru.resolve())!=j||cs&&oi(new cs)!=te||el&&oi(new el)!=Ne)&&(oi=function(E){var T=Vn(E),D=T==be?E.constructor:t,q=D?Lo(D):"";if(q)switch(q){case by:return Ze;case _y:return Oe;case wy:return j;case dd:return te;case xy:return Ne}return T});function um(E,T,D){for(var q=-1,X=D.length;++q<X;){var ae=D[q],ye=ae.size;switch(ae.type){case"drop":E+=ye;break;case"dropRight":T-=ye;break;case"take":T=kr(T,E+ye);break;case"takeRight":E=kn(E,T-ye);break}}return{start:E,end:T}}function Nd(E){var T=E.match(Dt);return T?T[1].split(yr):[]}function lm(E,T,D){T=Io(T,E);for(var q=-1,X=T.length,ae=!1;++q<X;){var ye=co(T[q]);if(!(ae=E!=null&&D(E,ye)))break;E=E[ye]}return ae||++q!=X?ae:(X=E==null?0:E.length,!!X&&Am(X)&&Mo(ye,X)&&(Kt(E)||Jc(E)))}function $_(E){var T=E.length,D=new E.constructor(T);return T&&typeof E[0]=="string"&&er.call(E,"index")&&(D.index=E.index,D.input=E.input),D}function cm(E){return typeof E.constructor=="function"&&!Kc(E)?ds(Zu(E)):{}}function W_(E,T,D){var q=E.constructor;switch(T){case ot:return Nv(E);case de:case ie:return new q(+E);case Ze:return Yy(E,D);case et:case Qe:case Ye:case Ie:case ee:case we:case Pe:case De:case Me:return Ky(E,D);case Oe:return new q;case Ce:case ce:return new q(E);case $:return Xy(E);case te:return new q;case he:return V_(E)}}function zv(E,T){var D=T.length;if(!D)return E;var q=D-1;return T[q]=(D>1?"& ":"")+T[q],T=T.join(D>2?", ":" "),E.replace(nn,`{
/* [wrapped with `+T+`] */
`)}function qv(E){return Kt(E)||Jc(E)||!!(cv&&E&&E[cv])}function Mo(E,T){var D=typeof E;return T=T??U,!!T&&(D=="number"||D!="symbol"&&Qo.test(E))&&E>-1&&E%1==0&&E<T}function wi(E,T,D){if(!En(D))return!1;var q=typeof T;return(q=="number"?ma(D)&&Mo(T,D.length):q=="string"&&T in D)?No(D[T],E):!1}function Gv(E,T){if(Kt(E))return!1;var D=typeof E;return D=="number"||D=="symbol"||D=="boolean"||E==null||Ba(E)?!0:ar.test(E)||!lr.test(E)||T!=null&&E in Z(T)}function $n(E){var T=typeof E;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?E!=="__proto__":E===null}function si(E){var T=Md(E),D=ne[T];if(typeof D!="function"||!(T in fr.prototype))return!1;if(E===D)return!0;var q=bs(D);return!!q&&E===q[0]}function H_(E){return!!uv&&uv in E}var fm=ca?uu:ww;function Kc(E){var T=E&&E.constructor,D=typeof T=="function"&&T.prototype||Mi;return E===D}function dm(E){return E===E&&!En(E)}function Vv(E,T){return function(D){return D==null?!1:D[E]===T&&(T!==t||E in Z(D))}}function hm(E){var T=Cm(E,function(q){return D.size===l&&D.clear(),q}),D=T.cache;return T}function vm(E,T){var D=E[1],q=T[1],X=D|q,ae=X<(g|y|w),ye=q==w&&D==m||q==w&&D==O&&E[7].length<=T[8]||q==(w|O)&&T[7].length<=T[8]&&D==m;if(!(ae||ye))return E;q&g&&(E[2]=T[2],X|=D&g?0:b);var _e=T[3];if(_e){var Te=E[3];E[3]=Te?Qy(Te,_e,T[4]):_e,E[4]=Te?on(E[3],c):T[4]}return _e=T[5],_e&&(Te=E[5],E[5]=Te?Jy(Te,_e,T[6]):_e,E[6]=Te?on(E[5],c):T[6]),_e=T[7],_e&&(E[7]=_e),q&w&&(E[8]=E[8]==null?T[8]:kr(E[8],T[8])),E[9]==null&&(E[9]=T[9]),E[0]=T[0],E[1]=X,E}function vl(E){var T=[];if(E!=null)for(var D in Z(E))T.push(D);return T}function Y_(E){return sd.call(E)}function $v(E,T,D){return T=kn(T===t?E.length-1:T,0),function(){for(var q=arguments,X=-1,ae=kn(q.length-T,0),ye=Le(ae);++X<ae;)ye[X]=q[T+X];X=-1;for(var _e=Le(T+1);++X<T;)_e[X]=q[X];return _e[T]=D(ye),Be(E,this,_e)}}function Wv(E,T){return T.length<2?E:Ao(E,un(T,0,-1))}function X_(E,T){for(var D=E.length,q=kr(T.length,D),X=Kn(E);q--;){var ae=T[q];E[q]=Mo(ae,D)?X[ae]:t}return E}function Hv(E,T){if(!(T==="constructor"&&typeof E[T]=="function")&&T!="__proto__")return E[T]}var pm=jd(qy),Zc=yy||function(E,T){return wn.setTimeout(E,T)},Yv=jd(z_);function gm(E,T,D){var q=T+"";return Yv(E,zv(q,K_(Nd(q),D)))}function jd(E){var T=0,D=0;return function(){var q=fv(),X=M-(q-D);if(D=q,X>0){if(++T>=I)return arguments[0]}else T=0;return E.apply(t,arguments)}}function Qc(E,T){var D=-1,q=E.length,X=q-1;for(T=T===t?q:T;++D<T;){var ae=Pv(D,X),ye=E[ae];E[ae]=E[D],E[D]=ye}return E.length=T,E}var Xv=hm(function(E){var T=[];return E.charCodeAt(0)===46&&T.push(""),E.replace(Gt,function(D,q,X,ae){T.push(X?ae.replace(Cn,"$1"):q||D)}),T});function co(E){if(typeof E=="string"||Ba(E))return E;var T=E+"";return T=="0"&&1/E==-B?"-0":T}function Lo(E){if(E!=null){try{return Ja.call(E)}catch{}try{return E+""}catch{}}return""}function K_(E,T){return _t(fe,function(D){var q="_."+D[0];T&D[1]&&!Ur(E,q)&&E.push(q)}),E.sort()}function ym(E){if(E instanceof fr)return E.clone();var T=new Mt(E.__wrapped__,E.__chain__);return T.__actions__=Kn(E.__actions__),T.__index__=E.__index__,T.__values__=E.__values__,T}function Fi(E,T,D){(D?wi(E,T,D):T===t)?T=1:T=kn(tr(T),0);var q=E==null?0:E.length;if(!q||T<1)return[];for(var X=0,ae=0,ye=Le(Rn(q/T));X<q;)ye[ae++]=un(E,X,X+=T);return ye}function Kv(E){for(var T=-1,D=E==null?0:E.length,q=0,X=[];++T<D;){var ae=E[T];ae&&(X[q++]=ae)}return X}function Z_(){var E=arguments.length;if(!E)return[];for(var T=Le(E-1),D=arguments[0],q=E;q--;)T[q-1]=arguments[q];return jn(Kt(D)?Kn(D):[D],Gn(T,1))}var Q_=Qt(function(E,T){return Bn(E)?ol(E,Gn(T,1,Bn,!0)):[]}),Zv=Qt(function(E,T){var D=L(T);return Bn(D)&&(D=t),Bn(E)?ol(E,Gn(T,1,Bn,!0),Pt(D,2)):[]}),Qv=Qt(function(E,T){var D=L(T);return Bn(D)&&(D=t),Bn(E)?ol(E,Gn(T,1,Bn,!0),t,D):[]});function J_(E,T,D){var q=E==null?0:E.length;return q?(T=D||T===t?1:tr(T),un(E,T<0?0:T,q)):[]}function ew(E,T,D){var q=E==null?0:E.length;return q?(T=D||T===t?1:tr(T),T=q-T,un(E,0,T<0?0:T)):[]}function tw(E,T){return E&&E.length?Ad(E,Pt(T,3),!0,!0):[]}function mm(E,T){return E&&E.length?Ad(E,Pt(T,3),!0):[]}function rw(E,T,D,q){var X=E==null?0:E.length;return X?(D&&typeof D!="number"&&wi(E,T,D)&&(D=0,q=X),Dy(E,T,D,q)):[]}function bm(E,T,D){var q=E==null?0:E.length;if(!q)return-1;var X=D==null?0:tr(D);return X<0&&(X=kn(q+X,0)),Ec(E,Pt(T,3),X)}function Fd(E,T,D){var q=E==null?0:E.length;if(!q)return-1;var X=q-1;return D!==t&&(X=tr(D),X=D<0?kn(q+X,0):kr(X,q-1)),Ec(E,Pt(T,3),X,!0)}function Bd(E){var T=E==null?0:E.length;return T?Gn(E,1):[]}function Jv(E){var T=E==null?0:E.length;return T?Gn(E,B):[]}function nw(E,T){var D=E==null?0:E.length;return D?(T=T===t?1:tr(T),Gn(E,T)):[]}function iw(E){for(var T=-1,D=E==null?0:E.length,q={};++T<D;){var X=E[T];q[X[0]]=X[1]}return q}function _m(E){return E&&E.length?E[0]:t}function aw(E,T,D){var q=E==null?0:E.length;if(!q)return-1;var X=D==null?0:tr(D);return X<0&&(X=kn(q+X,0)),Co(E,T,X)}function ow(E){var T=E==null?0:E.length;return T?un(E,0,-1):[]}var sw=Qt(function(E){var T=Jr(E,Mv);return T.length&&T[0]===E[0]?Po(T):[]}),uw=Qt(function(E){var T=L(E),D=Jr(E,Mv);return T===L(D)?T=t:D.pop(),D.length&&D[0]===E[0]?Po(D,Pt(T,2)):[]}),S=Qt(function(E){var T=L(E),D=Jr(E,Mv);return T=typeof T=="function"?T:t,T&&D.pop(),D.length&&D[0]===E[0]?Po(D,t,T):[]});function P(E,T){return E==null?"":fd.call(E,T)}function L(E){var T=E==null?0:E.length;return T?E[T-1]:t}function V(E,T,D){var q=E==null?0:E.length;if(!q)return-1;var X=q;return D!==t&&(X=tr(D),X=X<0?kn(q+X,0):kr(X,q-1)),T===T?k_(E,T,X):Ec(E,ly,X,!0)}function K(E,T){return E&&E.length?Gc(E,tr(T)):t}var oe=Qt(me);function me(E,T){return E&&E.length&&T&&T.length?ko(E,T):E}function Ee(E,T,D){return E&&E.length&&T&&T.length?ko(E,T,Pt(D,2)):E}function Ae(E,T,D){return E&&E.length&&T&&T.length?ko(E,T,t,D):E}var ze=lo(function(E,T){var D=E==null?0:E.length,q=gd(E,T);return Av(E,Jr(T,function(X){return Mo(X,D)?+X:X}).sort(Zy)),q});function qe(E,T){var D=[];if(!(E&&E.length))return D;var q=-1,X=[],ae=E.length;for(T=Pt(T,3);++q<ae;){var ye=E[q];T(ye,q,E)&&(D.push(ye),X.push(q))}return Av(E,X),D}function Xe(E){return E==null?E:dv.call(E)}function dt(E,T,D){var q=E==null?0:E.length;return q?(D&&typeof D!="number"&&wi(E,T,D)?(T=0,D=q):(T=T==null?0:tr(T),D=D===t?q:tr(D)),un(E,T,D)):[]}function pt(E,T){return Vc(E,T)}function Rt(E,T,D){return kv(E,T,Pt(D,2))}function $e(E,T){var D=E==null?0:E.length;if(D){var q=Vc(E,T);if(q<D&&No(E[q],T))return q}return-1}function Je(E,T){return Vc(E,T,!0)}function Ct(E,T,D){return kv(E,T,Pt(D,2),!0)}function st(E,T){var D=E==null?0:E.length;if(D){var q=Vc(E,T,!0)-1;if(No(E[q],T))return q}return-1}function $t(E){return E&&E.length?Td(E):[]}function qt(E,T){return E&&E.length?Td(E,Pt(T,2)):[]}function Sr(E){var T=E==null?0:E.length;return T?un(E,1,T):[]}function wt(E,T,D){return E&&E.length?(T=D||T===t?1:tr(T),un(E,0,T<0?0:T)):[]}function Lt(E,T,D){var q=E==null?0:E.length;return q?(T=D||T===t?1:tr(T),T=q-T,un(E,T<0?0:T,q)):[]}function Fn(E,T){return E&&E.length?Ad(E,Pt(T,3),!1,!0):[]}function xn(E,T){return E&&E.length?Ad(E,Pt(T,3)):[]}var xi=Qt(function(E){return ys(Gn(E,1,Bn,!0))}),Yr=Qt(function(E){var T=L(E);return Bn(T)&&(T=t),ys(Gn(E,1,Bn,!0),Pt(T,2))}),ui=Qt(function(E){var T=L(E);return T=typeof T=="function"?T:t,ys(Gn(E,1,Bn,!0),t,T)});function fo(E){return E&&E.length?ys(E):[]}function ws(E,T){return E&&E.length?ys(E,Pt(T,2)):[]}function su(E,T){return T=typeof T=="function"?T:t,E&&E.length?ys(E,t,T):[]}function Fa(E){if(!(E&&E.length))return[];var T=0;return E=Yn(E,function(D){if(Bn(D))return T=kn(D.length,T),!0}),ed(T,function(D){return Jr(E,$u(D))})}function ep(E,T){if(!(E&&E.length))return[];var D=Fa(E);return T==null?D:Jr(D,function(q){return Be(T,t,q)})}var wm=Qt(function(E,T){return Bn(E)?ol(E,T):[]}),Ud=Qt(function(E){return Dv(Yn(E,Bn))}),tp=Qt(function(E){var T=L(E);return Bn(T)&&(T=t),Dv(Yn(E,Bn),Pt(T,2))}),zd=Qt(function(E){var T=L(E);return T=typeof T=="function"?T:t,Dv(Yn(E,Bn),t,T)}),qd=Qt(Fa);function xm(E,T){return $y(E||[],T||[],al)}function Gd(E,T){return $y(E||[],T||[],cl)}var Vd=Qt(function(E){var T=E.length,D=T>1?E[T-1]:t;return D=typeof D=="function"?(E.pop(),D):t,ep(E,D)});function MA(E){var T=ne(E);return T.__chain__=!0,T}function I6(E,T){return T(E),E}function Em(E,T){return T(E)}var D6=lo(function(E){var T=E.length,D=T?E[0]:0,q=this.__wrapped__,X=function(ae){return gd(ae,E)};return T>1||this.__actions__.length||!(q instanceof fr)||!Mo(D)?this.thru(X):(q=q.slice(D,+D+(T?1:0)),q.__actions__.push({func:Em,args:[X],thisArg:t}),new Mt(q,this.__chain__).thru(function(ae){return T&&!ae.length&&ae.push(t),ae}))});function M6(){return MA(this)}function L6(){return new Mt(this.value(),this.__chain__)}function N6(){this.__values__===t&&(this.__values__=YA(this.value()));var E=this.__index__>=this.__values__.length,T=E?t:this.__values__[this.__index__++];return{done:E,value:T}}function j6(){return this}function F6(E){for(var T,D=this;D instanceof il;){var q=ym(D);q.__index__=0,q.__values__=t,T?X.__wrapped__=q:T=q;var X=q;D=D.__wrapped__}return X.__wrapped__=E,T}function B6(){var E=this.__wrapped__;if(E instanceof fr){var T=E;return this.__actions__.length&&(T=new fr(this)),T=T.reverse(),T.__actions__.push({func:Em,args:[Xe],thisArg:t}),new Mt(T,this.__chain__)}return this.thru(Xe)}function U6(){return Vy(this.__wrapped__,this.__actions__)}var z6=Wc(function(E,T,D){er.call(E,D)?++E[D]:io(E,D,1)});function q6(E,T,D){var q=Kt(E)?Tn:wv;return D&&wi(E,T,D)&&(T=t),q(E,Pt(T,3))}function G6(E,T){var D=Kt(E)?Yn:oo;return D(E,Pt(T,3))}var V6=im(bm),$6=im(Fd);function W6(E,T){return Gn(Om(E,T),1)}function H6(E,T){return Gn(Om(E,T),B)}function Y6(E,T,D){return D=D===t?1:tr(D),Gn(Om(E,T),D)}function LA(E,T){var D=Kt(E)?_t:Da;return D(E,Pt(T,3))}function NA(E,T){var D=Kt(E)?br:_v;return D(E,Pt(T,3))}var X6=Wc(function(E,T,D){er.call(E,D)?E[D].push(T):io(E,D,[T])});function K6(E,T,D,q){E=ma(E)?E:Wd(E),D=D&&!q?tr(D):0;var X=E.length;return D<0&&(D=kn(X+D,0)),Pm(E)?D<=X&&E.indexOf(T,D)>-1:!!X&&Co(E,T,D)>-1}var Z6=Qt(function(E,T,D){var q=-1,X=typeof T=="function",ae=ma(E)?Le(E.length):[];return Da(E,function(ye){ae[++q]=X?Be(T,ye,D):ul(ye,T,D)}),ae}),Q6=Wc(function(E,T,D){io(E,D,T)});function Om(E,T){var D=Kt(E)?Jr:Sv;return D(E,Pt(T,3))}function J6(E,T,D,q){return E==null?[]:(Kt(T)||(T=T==null?[]:[T]),D=q?t:D,Kt(D)||(D=D==null?[]:[D]),Cd(E,T,D))}var eU=Wc(function(E,T,D){E[D?0:1].push(T)},function(){return[[],[]]});function tU(E,T,D){var q=Kt(E)?Vu:Oc,X=arguments.length<3;return q(E,Pt(T,4),D,X,Da)}function rU(E,T,D){var q=Kt(E)?S_:Oc,X=arguments.length<3;return q(E,Pt(T,4),D,X,_v)}function nU(E,T){var D=Kt(E)?Yn:oo;return D(E,Tm(Pt(T,3)))}function iU(E){var T=Kt(E)?mi:Uy;return T(E)}function aU(E,T,D){(D?wi(E,T,D):T===t)?T=1:T=tr(T);var q=Kt(E)?no:zy;return q(E,T)}function oU(E){var T=Kt(E)?pd:q_;return T(E)}function sU(E){if(E==null)return 0;if(ma(E))return Pm(E)?os(E):E.length;var T=oi(E);return T==Oe||T==te?E.size:Od(E).length}function uU(E,T,D){var q=Kt(E)?as:G_;return D&&wi(E,T,D)&&(T=t),q(E,Pt(T,3))}var lU=Qt(function(E,T){if(E==null)return[];var D=T.length;return D>1&&wi(E,T[0],T[1])?T=[]:D>2&&wi(T[0],T[1],T[2])&&(T=[T[0]]),Cd(E,Gn(T,1),[])}),Sm=ud||function(){return wn.Date.now()};function cU(E,T){if(typeof T!="function")throw new sn(o);return E=tr(E),function(){if(--E<1)return T.apply(this,arguments)}}function jA(E,T,D){return T=D?t:T,T=E&&T==null?E.length:T,pa(E,w,t,t,t,t,T)}function FA(E,T){var D;if(typeof T!="function")throw new sn(o);return E=tr(E),function(){return--E>0&&(D=T.apply(this,arguments)),E<=1&&(T=t),D}}var lw=Qt(function(E,T,D){var q=g;if(D.length){var X=on(D,hl(lw));q|=x}return pa(E,q,T,D,X)}),BA=Qt(function(E,T,D){var q=g|y;if(D.length){var X=on(D,hl(BA));q|=x}return pa(T,q,E,D,X)});function UA(E,T,D){T=D?t:T;var q=pa(E,m,t,t,t,t,t,T);return q.placeholder=UA.placeholder,q}function zA(E,T,D){T=D?t:T;var q=pa(E,_,t,t,t,t,t,T);return q.placeholder=zA.placeholder,q}function qA(E,T,D){var q,X,ae,ye,_e,Te,Ue=0,Ge=!1,He=!1,ct=!0;if(typeof E!="function")throw new sn(o);T=ho(T)||0,En(D)&&(Ge=!!D.leading,He="maxWait"in D,ae=He?kn(ho(D.maxWait)||0,T):ae,ct="trailing"in D?!!D.trailing:ct);function gt(Un){var jo=q,cu=X;return q=X=t,Ue=Un,ye=E.apply(cu,jo),ye}function Bt(Un){return Ue=Un,_e=Zc(pr,T),Ge?gt(Un):ye}function ir(Un){var jo=Un-Te,cu=Un-Ue,sP=T-jo;return He?kr(sP,ae-cu):sP}function Ut(Un){var jo=Un-Te,cu=Un-Ue;return Te===t||jo>=T||jo<0||He&&cu>=ae}function pr(){var Un=Sm();if(Ut(Un))return Er(Un);_e=Zc(pr,ir(Un))}function Er(Un){return _e=t,ct&&q?gt(Un):(q=X=t,ye)}function Ua(){_e!==t&&Wy(_e),Ue=0,q=Te=X=_e=t}function Xi(){return _e===t?ye:Er(Sm())}function za(){var Un=Sm(),jo=Ut(Un);if(q=arguments,X=this,Te=Un,jo){if(_e===t)return Bt(Te);if(He)return Wy(_e),_e=Zc(pr,T),gt(Te)}return _e===t&&(_e=Zc(pr,T)),ye}return za.cancel=Ua,za.flush=Xi,za}var fU=Qt(function(E,T){return jc(E,1,T)}),dU=Qt(function(E,T,D){return jc(E,ho(T)||0,D)});function hU(E){return pa(E,A)}function Cm(E,T){if(typeof E!="function"||T!=null&&typeof T!="function")throw new sn(o);var D=function(){var q=arguments,X=T?T.apply(this,q):q[0],ae=D.cache;if(ae.has(X))return ae.get(X);var ye=E.apply(this,q);return D.cache=ae.set(X,ye)||ae,ye};return D.cache=new(Cm.Cache||da),D}Cm.Cache=da;function Tm(E){if(typeof E!="function")throw new sn(o);return function(){var T=arguments;switch(T.length){case 0:return!E.call(this);case 1:return!E.call(this,T[0]);case 2:return!E.call(this,T[0],T[1]);case 3:return!E.call(this,T[0],T[1],T[2])}return!E.apply(this,T)}}function vU(E){return FA(2,E)}var pU=Pd(function(E,T){T=T.length==1&&Kt(T[0])?Jr(T[0],Di(Pt())):Jr(Gn(T,1),Di(Pt()));var D=T.length;return Qt(function(q){for(var X=-1,ae=kr(q.length,D);++X<ae;)q[X]=T[X].call(this,q[X]);return Be(E,this,q)})}),cw=Qt(function(E,T){var D=on(T,hl(cw));return pa(E,x,t,T,D)}),GA=Qt(function(E,T){var D=on(T,hl(GA));return pa(E,C,t,T,D)}),gU=lo(function(E,T){return pa(E,O,t,t,t,T)});function yU(E,T){if(typeof E!="function")throw new sn(o);return T=T===t?T:tr(T),Qt(E,T)}function mU(E,T){if(typeof E!="function")throw new sn(o);return T=T==null?0:kn(tr(T),0),Qt(function(D){var q=D[T],X=ms(D,0,T);return q&&jn(X,q),Be(E,this,X)})}function bU(E,T,D){var q=!0,X=!0;if(typeof E!="function")throw new sn(o);return En(D)&&(q="leading"in D?!!D.leading:q,X="trailing"in D?!!D.trailing:X),qA(E,T,{leading:q,maxWait:T,trailing:X})}function _U(E){return jA(E,1)}function wU(E,T){return cw(Lv(T),E)}function xU(){if(!arguments.length)return[];var E=arguments[0];return Kt(E)?E:[E]}function EU(E){return Hi(E,h)}function OU(E,T){return T=typeof T=="function"?T:t,Hi(E,h,T)}function SU(E){return Hi(E,f|h)}function CU(E,T){return T=typeof T=="function"?T:t,Hi(E,f|h,T)}function TU(E,T){return T==null||md(E,T,li(T))}function No(E,T){return E===T||E!==E&&T!==T}var AU=ja(gs),PU=ja(function(E,T){return E>=T}),Jc=Xn(function(){return arguments}())?Xn:function(E){return In(E)&&er.call(E,"callee")&&!$i.call(E,"callee")},Kt=Le.isArray,RU=Nn?Di(Nn):Ly;function ma(E){return E!=null&&Am(E.length)&&!uu(E)}function Bn(E){return In(E)&&ma(E)}function kU(E){return E===!0||E===!1||In(E)&&Vn(E)==de}var pl=to||ww,IU=Za?Di(Za):Ny;function DU(E){return In(E)&&E.nodeType===1&&!rp(E)}function MU(E){if(E==null)return!0;if(ma(E)&&(Kt(E)||typeof E=="string"||typeof E.splice=="function"||pl(E)||$d(E)||Jc(E)))return!E.length;var T=oi(E);if(T==Oe||T==te)return!E.size;if(Kc(E))return!Od(E).length;for(var D in E)if(er.call(E,D))return!1;return!0}function LU(E,T){return Fc(E,T)}function NU(E,T,D){D=typeof D=="function"?D:t;var q=D?D(E,T):t;return q===t?Fc(E,T,t,D):!!q}function fw(E){if(!In(E))return!1;var T=Vn(E);return T==re||T==Q||typeof E.message=="string"&&typeof E.name=="string"&&!rp(E)}function jU(E){return typeof E=="number"&&cd(E)}function uu(E){if(!En(E))return!1;var T=Vn(E);return T==se||T==pe||T==ve||T==G}function VA(E){return typeof E=="number"&&E==tr(E)}function Am(E){return typeof E=="number"&&E>-1&&E%1==0&&E<=U}function En(E){var T=typeof E;return E!=null&&(T=="object"||T=="function")}function In(E){return E!=null&&typeof E=="object"}var $A=la?Di(la):bi;function FU(E,T){return E===T||Bc(E,T,Ht(T))}function BU(E,T,D){return D=typeof D=="function"?D:t,Bc(E,T,Ht(T),D)}function UU(E){return WA(E)&&E!=+E}function zU(E){if(fm(E))throw new zt(a);return Ed(E)}function qU(E){return E===null}function GU(E){return E==null}function WA(E){return typeof E=="number"||In(E)&&Vn(E)==Ce}function rp(E){if(!In(E)||Vn(E)!=be)return!1;var T=Zu(E);if(T===null)return!0;var D=er.call(T,"constructor")&&T.constructor;return typeof D=="function"&&D instanceof D&&Ja.call(D)==I_}var dw=Vi?Di(Vi):B_;function VU(E){return VA(E)&&E>=-U&&E<=U}var HA=ke?Di(ke):Uc;function Pm(E){return typeof E=="string"||!Kt(E)&&In(E)&&Vn(E)==ce}function Ba(E){return typeof E=="symbol"||In(E)&&Vn(E)==he}var $d=Ve?Di(Ve):jy;function $U(E){return E===t}function WU(E){return In(E)&&oi(E)==Ne}function HU(E){return In(E)&&Vn(E)==We}var YU=ja(zc),XU=ja(function(E,T){return E<=T});function YA(E){if(!E)return[];if(ma(E))return Pm(E)?yi(E):Kn(E);if(To&&E[To])return P_(E[To]());var T=oi(E),D=T==Oe?sv:T==te?nd:Wd;return D(E)}function lu(E){if(!E)return E===0?E:0;if(E=ho(E),E===B||E===-B){var T=E<0?-1:1;return T*W}return E===E?E:0}function tr(E){var T=lu(E),D=T%1;return T===T?D?T-D:T:0}function XA(E){return E?ao(tr(E),0,H):0}function ho(E){if(typeof E=="number")return E;if(Ba(E))return Y;if(En(E)){var T=typeof E.valueOf=="function"?E.valueOf():E;E=En(T)?T+"":T}if(typeof E!="string")return E===0?E:+E;E=Sc(E);var D=xr.test(E);return D||qn.test(E)?av(E.slice(2),D?2:8):Rr.test(E)?Y:+E}function KA(E){return Na(E,ba(E))}function KU(E){return E?ao(tr(E),-U,U):E===0?E:0}function zr(E){return E==null?"":Yi(E)}var ZU=au(function(E,T){if(Kc(T)||ma(T)){Na(T,li(T),E);return}for(var D in T)er.call(T,D)&&al(E,D,T[D])}),ZA=au(function(E,T){Na(T,ba(T),E)}),Rm=au(function(E,T,D,q){Na(T,ba(T),E,q)}),QU=au(function(E,T,D,q){Na(T,li(T),E,q)}),JU=lo(gd);function e8(E,T){var D=ds(E);return T==null?D:iu(D,T)}var t8=Qt(function(E,T){E=Z(E);var D=-1,q=T.length,X=q>2?T[2]:t;for(X&&wi(T[0],T[1],X)&&(q=1);++D<q;)for(var ae=T[D],ye=ba(ae),_e=-1,Te=ye.length;++_e<Te;){var Ue=ye[_e],Ge=E[Ue];(Ge===t||No(Ge,Mi[Ue])&&!er.call(E,Ue))&&(E[Ue]=ae[Ue])}return E}),r8=Qt(function(E){return E.push(t,ln),Be(QA,t,E)});function n8(E,T){return uy(E,Pt(T,3),Ma)}function i8(E,T){return uy(E,Pt(T,3),La)}function a8(E,T){return E==null?E:_d(E,Pt(T,3),ba)}function o8(E,T){return E==null?E:My(E,Pt(T,3),ba)}function s8(E,T){return E&&Ma(E,Pt(T,3))}function u8(E,T){return E&&La(E,Pt(T,3))}function l8(E){return E==null?[]:sl(E,li(E))}function c8(E){return E==null?[]:sl(E,ba(E))}function hw(E,T,D){var q=E==null?t:Ao(E,T);return q===t?D:q}function f8(E,T){return E!=null&&lm(E,T,It)}function vw(E,T){return E!=null&&lm(E,T,xd)}var d8=am(function(E,T,D){T!=null&&typeof T.toString!="function"&&(T=sd.call(T)),E[T]=D},gw(_a)),h8=am(function(E,T,D){T!=null&&typeof T.toString!="function"&&(T=sd.call(T)),er.call(E,T)?E[T].push(D):E[T]=[D]},Pt),v8=Qt(ul);function li(E){return ma(E)?bv(E):Od(E)}function ba(E){return ma(E)?bv(E,!0):Fy(E)}function p8(E,T){var D={};return T=Pt(T,3),Ma(E,function(q,X,ae){io(D,T(q,X,ae),q)}),D}function g8(E,T){var D={};return T=Pt(T,3),Ma(E,function(q,X,ae){io(D,X,T(q,X,ae))}),D}var y8=au(function(E,T,D){qc(E,T,D)}),QA=au(function(E,T,D,q){qc(E,T,D,q)}),m8=lo(function(E,T){var D={};if(E==null)return D;var q=!1;T=Jr(T,function(ae){return ae=Io(ae,E),q||(q=ae.length>1),ae}),Na(E,_i(E),D),q&&(D=Hi(D,f|d|h,sm));for(var X=T.length;X--;)$c(D,T[X]);return D});function b8(E,T){return JA(E,Tm(Pt(T)))}var _8=lo(function(E,T){return E==null?{}:Cv(E,T)});function JA(E,T){if(E==null)return{};var D=Jr(_i(E),function(q){return[q]});return T=Pt(T),Tv(E,D,function(q,X){return T(q,X[0])})}function w8(E,T,D){T=Io(T,E);var q=-1,X=T.length;for(X||(X=1,E=t);++q<X;){var ae=E==null?t:E[co(T[q])];ae===t&&(q=X,ae=D),E=uu(ae)?ae.call(E):ae}return E}function x8(E,T,D){return E==null?E:cl(E,T,D)}function E8(E,T,D,q){return q=typeof q=="function"?q:t,E==null?E:cl(E,T,D,q)}var eP=Fv(li),tP=Fv(ba);function O8(E,T,D){var q=Kt(E),X=q||pl(E)||$d(E);if(T=Pt(T,4),D==null){var ae=E&&E.constructor;X?D=q?new ae:[]:En(E)?D=uu(ae)?ds(Zu(E)):{}:D={}}return(X?_t:Ma)(E,function(ye,_e,Te){return T(D,ye,_e,Te)}),D}function S8(E,T){return E==null?!0:$c(E,T)}function C8(E,T,D){return E==null?E:Iv(E,T,Lv(D))}function T8(E,T,D,q){return q=typeof q=="function"?q:t,E==null?E:Iv(E,T,Lv(D),q)}function Wd(E){return E==null?[]:Zs(E,li(E))}function A8(E){return E==null?[]:Zs(E,ba(E))}function P8(E,T,D){return D===t&&(D=T,T=t),D!==t&&(D=ho(D),D=D===D?D:0),T!==t&&(T=ho(T),T=T===T?T:0),ao(ho(E),T,D)}function R8(E,T,D){return T=lu(T),D===t?(D=T,T=0):D=lu(D),E=ho(E),xv(E,T,D)}function k8(E,T,D){if(D&&typeof D!="boolean"&&wi(E,T,D)&&(T=D=t),D===t&&(typeof T=="boolean"?(D=T,T=t):typeof E=="boolean"&&(D=E,E=t)),E===t&&T===t?(E=0,T=1):(E=lu(E),T===t?(T=E,E=0):T=lu(T)),E>T){var q=E;E=T,T=q}if(D||E%1||T%1){var X=my();return kr(E+X*(T-E+iv("1e-"+((X+"").length-1))),T)}return Pv(E,T)}var I8=fl(function(E,T,D){return T=T.toLowerCase(),E+(D?rP(T):T)});function rP(E){return pw(zr(E).toLowerCase())}function nP(E){return E=zr(E),E&&E.replace(Vs,A_).replace(Hf,"")}function D8(E,T,D){E=zr(E),T=Yi(T);var q=E.length;D=D===t?q:ao(tr(D),0,q);var X=D;return D-=T.length,D>=0&&E.slice(D,X)==T}function M8(E){return E=zr(E),E&&yt.test(E)?E.replace(ft,td):E}function L8(E){return E=zr(E),E&&hr.test(E)?E.replace(At,"\\$&"):E}var N8=fl(function(E,T,D){return E+(D?"-":"")+T.toLowerCase()}),j8=fl(function(E,T,D){return E+(D?" ":"")+T.toLowerCase()}),F8=Hc("toLowerCase");function B8(E,T,D){E=zr(E),T=tr(T);var q=T?os(E):0;if(!T||q>=T)return E;var X=(T-q)/2;return Dd(Qu(X),D)+E+Dd(Rn(X),D)}function U8(E,T,D){E=zr(E),T=tr(T);var q=T?os(E):0;return T&&q<T?E+Dd(T-q,D):E}function z8(E,T,D){E=zr(E),T=tr(T);var q=T?os(E):0;return T&&q<T?Dd(T-q,D)+E:E}function q8(E,T,D){return D||T==null?T=0:T&&(T=+T),M_(zr(E).replace(or,""),T||0)}function G8(E,T,D){return(D?wi(E,T,D):T===t)?T=1:T=tr(T),Rv(zr(E),T)}function V8(){var E=arguments,T=zr(E[0]);return E.length<3?T:T.replace(E[1],E[2])}var $8=fl(function(E,T,D){return E+(D?"_":"")+T.toLowerCase()});function W8(E,T,D){return D&&typeof D!="number"&&wi(E,T,D)&&(T=D=t),D=D===t?H:D>>>0,D?(E=zr(E),E&&(typeof T=="string"||T!=null&&!dw(T))&&(T=Yi(T),!T&&Hu(E))?ms(yi(E),0,D):E.split(T,D)):[]}var H8=fl(function(E,T,D){return E+(D?" ":"")+pw(T)});function Y8(E,T,D){return E=zr(E),D=D==null?0:ao(tr(D),0,E.length),T=Yi(T),E.slice(D,D+T.length)==T}function X8(E,T,D){var q=ne.templateSettings;D&&wi(E,T,D)&&(T=t),E=zr(E),T=Rm({},T,q,en);var X=Rm({},T.imports,q.imports,en),ae=li(X),ye=Zs(X,ae),_e,Te,Ue=0,Ge=T.interpolate||Xa,He="__p += '",ct=ss((T.escape||Xa).source+"|"+Ge.source+"|"+(Ge===St?bn:Xa).source+"|"+(T.evaluate||Xa).source+"|$","g"),gt="//# sourceURL="+(er.call(T,"sourceURL")?(T.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bc+"]")+`
`;E.replace(ct,function(Ut,pr,Er,Ua,Xi,za){return Er||(Er=Ua),He+=E.slice(Ue,za).replace(So,rd),pr&&(_e=!0,He+=`' +
__e(`+pr+`) +
'`),Xi&&(Te=!0,He+=`';
`+Xi+`;
__p += '`),Er&&(He+=`' +
((__t = (`+Er+`)) == null ? '' : __t) +
'`),Ue=za+Ut.length,Ut}),He+=`';
`;var Bt=er.call(T,"variable")&&T.variable;if(!Bt)He=`with (obj) {
`+He+`
}
`;else if(Qr.test(Bt))throw new zt(s);He=(Te?He.replace(it,""):He).replace(Fe,"$1").replace(ut,"$1;"),He="function("+(Bt||"obj")+`) {
`+(Bt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(_e?", __e = _.escape":"")+(Te?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+He+`return __p
}`;var ir=aP(function(){return vr(ae,gt+"return "+He).apply(t,ye)});if(ir.source=He,fw(ir))throw ir;return ir}function K8(E){return zr(E).toLowerCase()}function Z8(E){return zr(E).toUpperCase()}function Q8(E,T,D){if(E=zr(E),E&&(D||T===t))return Sc(E);if(!E||!(T=Yi(T)))return E;var q=yi(E),X=yi(T),ae=Cc(q,X),ye=hy(q,X)+1;return ms(q,ae,ye).join("")}function J8(E,T,D){if(E=zr(E),E&&(D||T===t))return E.slice(0,id(E)+1);if(!E||!(T=Yi(T)))return E;var q=yi(E),X=hy(q,yi(T))+1;return ms(q,0,X).join("")}function ez(E,T,D){if(E=zr(E),E&&(D||T===t))return E.replace(or,"");if(!E||!(T=Yi(T)))return E;var q=yi(E),X=Cc(q,yi(T));return ms(q,X).join("")}function tz(E,T){var D=k,q=R;if(En(T)){var X="separator"in T?T.separator:X;D="length"in T?tr(T.length):D,q="omission"in T?Yi(T.omission):q}E=zr(E);var ae=E.length;if(Hu(E)){var ye=yi(E);ae=ye.length}if(D>=ae)return E;var _e=D-os(q);if(_e<1)return q;var Te=ye?ms(ye,0,_e).join(""):E.slice(0,_e);if(X===t)return Te+q;if(ye&&(_e+=Te.length-_e),dw(X)){if(E.slice(_e).search(X)){var Ue,Ge=Te;for(X.global||(X=ss(X.source,zr(Or.exec(X))+"g")),X.lastIndex=0;Ue=X.exec(Ge);)var He=Ue.index;Te=Te.slice(0,He===t?_e:He)}}else if(E.indexOf(Yi(X),_e)!=_e){var ct=Te.lastIndexOf(X);ct>-1&&(Te=Te.slice(0,ct))}return Te+q}function rz(E){return E=zr(E),E&&Ot.test(E)?E.replace(rt,Yu):E}var nz=fl(function(E,T,D){return E+(D?" ":"")+T.toUpperCase()}),pw=Hc("toUpperCase");function iP(E,T,D){return E=zr(E),T=D?t:T,T===t?vy(E)?ad(E):Nr(E):E.match(T)||[]}var aP=Qt(function(E,T){try{return Be(E,t,T)}catch(D){return fw(D)?D:new zt(D)}}),iz=lo(function(E,T){return _t(T,function(D){D=co(D),io(E,D,lw(E[D],E))}),E});function az(E){var T=E==null?0:E.length,D=Pt();return E=T?Jr(E,function(q){if(typeof q[1]!="function")throw new sn(o);return[D(q[0]),q[1]]}):[],Qt(function(q){for(var X=-1;++X<T;){var ae=E[X];if(Be(ae[0],this,q))return Be(ae[1],this,q)}})}function oz(E){return yd(Hi(E,f))}function gw(E){return function(){return E}}function sz(E,T){return E==null||E!==E?T:E}var uz=va(),lz=va(!0);function _a(E){return E}function yw(E){return Ov(typeof E=="function"?E:Hi(E,f))}function cz(E){return ll(Hi(E,f))}function fz(E,T){return Sd(E,Hi(T,f))}var dz=Qt(function(E,T){return function(D){return ul(D,E,T)}}),hz=Qt(function(E,T){return function(D){return ul(E,D,T)}});function mw(E,T,D){var q=li(T),X=sl(T,q);D==null&&!(En(T)&&(X.length||!q.length))&&(D=T,T=E,E=this,X=sl(T,li(T)));var ae=!(En(D)&&"chain"in D)||!!D.chain,ye=uu(E);return _t(X,function(_e){var Te=T[_e];E[_e]=Te,ye&&(E.prototype[_e]=function(){var Ue=this.__chain__;if(ae||Ue){var Ge=E(this.__wrapped__),He=Ge.__actions__=Kn(this.__actions__);return He.push({func:Te,args:arguments,thisArg:E}),Ge.__chain__=Ue,Ge}return Te.apply(E,jn([this.value()],arguments))})}),E}function vz(){return wn._===this&&(wn._=lv),this}function bw(){}function pz(E){return E=tr(E),Qt(function(T){return Gc(T,E)})}var gz=Vt(Jr),yz=Vt(Tn),mz=Vt(as);function oP(E){return Gv(E)?$u(co(E)):so(E)}function bz(E){return function(T){return E==null?t:Ao(E,T)}}var _z=fn(),wz=fn(!0);function _w(){return[]}function ww(){return!1}function xz(){return{}}function Ez(){return""}function Oz(){return!0}function Sz(E,T){if(E=tr(E),E<1||E>U)return[];var D=H,q=kr(E,H);T=Pt(T),E-=H;for(var X=ed(q,T);++D<E;)T(D);return X}function Cz(E){return Kt(E)?Jr(E,co):Ba(E)?[E]:Kn(Xv(zr(E)))}function Tz(E){var T=++gy;return zr(E)+T}var Az=uo(function(E,T){return E+T},0),Pz=Yc("ceil"),Rz=uo(function(E,T){return E/T},1),kz=Yc("floor");function Iz(E){return E&&E.length?bd(E,_a,gs):t}function Dz(E,T){return E&&E.length?bd(E,Pt(T,2),gs):t}function Mz(E){return cy(E,_a)}function Lz(E,T){return cy(E,Pt(T,2))}function Nz(E){return E&&E.length?bd(E,_a,zc):t}function jz(E,T){return E&&E.length?bd(E,Pt(T,2),zc):t}var Fz=uo(function(E,T){return E*T},1),Bz=Yc("round"),Uz=uo(function(E,T){return E-T},0);function zz(E){return E&&E.length?Wu(E,_a):0}function qz(E,T){return E&&E.length?Wu(E,Pt(T,2)):0}return ne.after=cU,ne.ary=jA,ne.assign=ZU,ne.assignIn=ZA,ne.assignInWith=Rm,ne.assignWith=QU,ne.at=JU,ne.before=FA,ne.bind=lw,ne.bindAll=iz,ne.bindKey=BA,ne.castArray=xU,ne.chain=MA,ne.chunk=Fi,ne.compact=Kv,ne.concat=Z_,ne.cond=az,ne.conforms=oz,ne.constant=gw,ne.countBy=z6,ne.create=e8,ne.curry=UA,ne.curryRight=zA,ne.debounce=qA,ne.defaults=t8,ne.defaultsDeep=r8,ne.defer=fU,ne.delay=dU,ne.difference=Q_,ne.differenceBy=Zv,ne.differenceWith=Qv,ne.drop=J_,ne.dropRight=ew,ne.dropRightWhile=tw,ne.dropWhile=mm,ne.fill=rw,ne.filter=G6,ne.flatMap=W6,ne.flatMapDeep=H6,ne.flatMapDepth=Y6,ne.flatten=Bd,ne.flattenDeep=Jv,ne.flattenDepth=nw,ne.flip=hU,ne.flow=uz,ne.flowRight=lz,ne.fromPairs=iw,ne.functions=l8,ne.functionsIn=c8,ne.groupBy=X6,ne.initial=ow,ne.intersection=sw,ne.intersectionBy=uw,ne.intersectionWith=S,ne.invert=d8,ne.invertBy=h8,ne.invokeMap=Z6,ne.iteratee=yw,ne.keyBy=Q6,ne.keys=li,ne.keysIn=ba,ne.map=Om,ne.mapKeys=p8,ne.mapValues=g8,ne.matches=cz,ne.matchesProperty=fz,ne.memoize=Cm,ne.merge=y8,ne.mergeWith=QA,ne.method=dz,ne.methodOf=hz,ne.mixin=mw,ne.negate=Tm,ne.nthArg=pz,ne.omit=m8,ne.omitBy=b8,ne.once=vU,ne.orderBy=J6,ne.over=gz,ne.overArgs=pU,ne.overEvery=yz,ne.overSome=mz,ne.partial=cw,ne.partialRight=GA,ne.partition=eU,ne.pick=_8,ne.pickBy=JA,ne.property=oP,ne.propertyOf=bz,ne.pull=oe,ne.pullAll=me,ne.pullAllBy=Ee,ne.pullAllWith=Ae,ne.pullAt=ze,ne.range=_z,ne.rangeRight=wz,ne.rearg=gU,ne.reject=nU,ne.remove=qe,ne.rest=yU,ne.reverse=Xe,ne.sampleSize=aU,ne.set=x8,ne.setWith=E8,ne.shuffle=oU,ne.slice=dt,ne.sortBy=lU,ne.sortedUniq=$t,ne.sortedUniqBy=qt,ne.split=W8,ne.spread=mU,ne.tail=Sr,ne.take=wt,ne.takeRight=Lt,ne.takeRightWhile=Fn,ne.takeWhile=xn,ne.tap=I6,ne.throttle=bU,ne.thru=Em,ne.toArray=YA,ne.toPairs=eP,ne.toPairsIn=tP,ne.toPath=Cz,ne.toPlainObject=KA,ne.transform=O8,ne.unary=_U,ne.union=xi,ne.unionBy=Yr,ne.unionWith=ui,ne.uniq=fo,ne.uniqBy=ws,ne.uniqWith=su,ne.unset=S8,ne.unzip=Fa,ne.unzipWith=ep,ne.update=C8,ne.updateWith=T8,ne.values=Wd,ne.valuesIn=A8,ne.without=wm,ne.words=iP,ne.wrap=wU,ne.xor=Ud,ne.xorBy=tp,ne.xorWith=zd,ne.zip=qd,ne.zipObject=xm,ne.zipObjectDeep=Gd,ne.zipWith=Vd,ne.entries=eP,ne.entriesIn=tP,ne.extend=ZA,ne.extendWith=Rm,mw(ne,ne),ne.add=Az,ne.attempt=aP,ne.camelCase=I8,ne.capitalize=rP,ne.ceil=Pz,ne.clamp=P8,ne.clone=EU,ne.cloneDeep=SU,ne.cloneDeepWith=CU,ne.cloneWith=OU,ne.conformsTo=TU,ne.deburr=nP,ne.defaultTo=sz,ne.divide=Rz,ne.endsWith=D8,ne.eq=No,ne.escape=M8,ne.escapeRegExp=L8,ne.every=q6,ne.find=V6,ne.findIndex=bm,ne.findKey=n8,ne.findLast=$6,ne.findLastIndex=Fd,ne.findLastKey=i8,ne.floor=kz,ne.forEach=LA,ne.forEachRight=NA,ne.forIn=a8,ne.forInRight=o8,ne.forOwn=s8,ne.forOwnRight=u8,ne.get=hw,ne.gt=AU,ne.gte=PU,ne.has=f8,ne.hasIn=vw,ne.head=_m,ne.identity=_a,ne.includes=K6,ne.indexOf=aw,ne.inRange=R8,ne.invoke=v8,ne.isArguments=Jc,ne.isArray=Kt,ne.isArrayBuffer=RU,ne.isArrayLike=ma,ne.isArrayLikeObject=Bn,ne.isBoolean=kU,ne.isBuffer=pl,ne.isDate=IU,ne.isElement=DU,ne.isEmpty=MU,ne.isEqual=LU,ne.isEqualWith=NU,ne.isError=fw,ne.isFinite=jU,ne.isFunction=uu,ne.isInteger=VA,ne.isLength=Am,ne.isMap=$A,ne.isMatch=FU,ne.isMatchWith=BU,ne.isNaN=UU,ne.isNative=zU,ne.isNil=GU,ne.isNull=qU,ne.isNumber=WA,ne.isObject=En,ne.isObjectLike=In,ne.isPlainObject=rp,ne.isRegExp=dw,ne.isSafeInteger=VU,ne.isSet=HA,ne.isString=Pm,ne.isSymbol=Ba,ne.isTypedArray=$d,ne.isUndefined=$U,ne.isWeakMap=WU,ne.isWeakSet=HU,ne.join=P,ne.kebabCase=N8,ne.last=L,ne.lastIndexOf=V,ne.lowerCase=j8,ne.lowerFirst=F8,ne.lt=YU,ne.lte=XU,ne.max=Iz,ne.maxBy=Dz,ne.mean=Mz,ne.meanBy=Lz,ne.min=Nz,ne.minBy=jz,ne.stubArray=_w,ne.stubFalse=ww,ne.stubObject=xz,ne.stubString=Ez,ne.stubTrue=Oz,ne.multiply=Fz,ne.nth=K,ne.noConflict=vz,ne.noop=bw,ne.now=Sm,ne.pad=B8,ne.padEnd=U8,ne.padStart=z8,ne.parseInt=q8,ne.random=k8,ne.reduce=tU,ne.reduceRight=rU,ne.repeat=G8,ne.replace=V8,ne.result=w8,ne.round=Bz,ne.runInContext=Se,ne.sample=iU,ne.size=sU,ne.snakeCase=$8,ne.some=uU,ne.sortedIndex=pt,ne.sortedIndexBy=Rt,ne.sortedIndexOf=$e,ne.sortedLastIndex=Je,ne.sortedLastIndexBy=Ct,ne.sortedLastIndexOf=st,ne.startCase=H8,ne.startsWith=Y8,ne.subtract=Uz,ne.sum=zz,ne.sumBy=qz,ne.template=X8,ne.times=Sz,ne.toFinite=lu,ne.toInteger=tr,ne.toLength=XA,ne.toLower=K8,ne.toNumber=ho,ne.toSafeInteger=KU,ne.toString=zr,ne.toUpper=Z8,ne.trim=Q8,ne.trimEnd=J8,ne.trimStart=ez,ne.truncate=tz,ne.unescape=rz,ne.uniqueId=Tz,ne.upperCase=nz,ne.upperFirst=pw,ne.each=LA,ne.eachRight=NA,ne.first=_m,mw(ne,function(){var E={};return Ma(ne,function(T,D){er.call(ne.prototype,D)||(E[D]=T)}),E}(),{chain:!1}),ne.VERSION=n,_t(["bind","bindKey","curry","curryRight","partial","partialRight"],function(E){ne[E].placeholder=ne}),_t(["drop","take"],function(E,T){fr.prototype[E]=function(D){D=D===t?1:kn(tr(D),0);var q=this.__filtered__&&!T?new fr(this):this.clone();return q.__filtered__?q.__takeCount__=kr(D,q.__takeCount__):q.__views__.push({size:kr(D,H),type:E+(q.__dir__<0?"Right":"")}),q},fr.prototype[E+"Right"]=function(D){return this.reverse()[E](D).reverse()}}),_t(["filter","map","takeWhile"],function(E,T){var D=T+1,q=D==N||D==z;fr.prototype[E]=function(X){var ae=this.clone();return ae.__iteratees__.push({iteratee:Pt(X,3),type:D}),ae.__filtered__=ae.__filtered__||q,ae}}),_t(["head","last"],function(E,T){var D="take"+(T?"Right":"");fr.prototype[E]=function(){return this[D](1).value()[0]}}),_t(["initial","tail"],function(E,T){var D="drop"+(T?"":"Right");fr.prototype[E]=function(){return this.__filtered__?new fr(this):this[D](1)}}),fr.prototype.compact=function(){return this.filter(_a)},fr.prototype.find=function(E){return this.filter(E).head()},fr.prototype.findLast=function(E){return this.reverse().find(E)},fr.prototype.invokeMap=Qt(function(E,T){return typeof E=="function"?new fr(this):this.map(function(D){return ul(D,E,T)})}),fr.prototype.reject=function(E){return this.filter(Tm(Pt(E)))},fr.prototype.slice=function(E,T){E=tr(E);var D=this;return D.__filtered__&&(E>0||T<0)?new fr(D):(E<0?D=D.takeRight(-E):E&&(D=D.drop(E)),T!==t&&(T=tr(T),D=T<0?D.dropRight(-T):D.take(T-E)),D)},fr.prototype.takeRightWhile=function(E){return this.reverse().takeWhile(E).reverse()},fr.prototype.toArray=function(){return this.take(H)},Ma(fr.prototype,function(E,T){var D=/^(?:filter|find|map|reject)|While$/.test(T),q=/^(?:head|last)$/.test(T),X=ne[q?"take"+(T=="last"?"Right":""):T],ae=q||/^find/.test(T);X&&(ne.prototype[T]=function(){var ye=this.__wrapped__,_e=q?[1]:arguments,Te=ye instanceof fr,Ue=_e[0],Ge=Te||Kt(ye),He=function(pr){var Er=X.apply(ne,jn([pr],_e));return q&&ct?Er[0]:Er};Ge&&D&&typeof Ue=="function"&&Ue.length!=1&&(Te=Ge=!1);var ct=this.__chain__,gt=!!this.__actions__.length,Bt=ae&&!ct,ir=Te&&!gt;if(!ae&&Ge){ye=ir?ye:new fr(this);var Ut=E.apply(ye,_e);return Ut.__actions__.push({func:Em,args:[He],thisArg:t}),new Mt(Ut,ct)}return Bt&&ir?E.apply(this,_e):(Ut=this.thru(He),Bt?q?Ut.value()[0]:Ut.value():Ut)})}),_t(["pop","push","shift","sort","splice","unshift"],function(E){var T=Jt[E],D=/^(?:push|sort|unshift)$/.test(E)?"tap":"thru",q=/^(?:pop|shift)$/.test(E);ne.prototype[E]=function(){var X=arguments;if(q&&!this.__chain__){var ae=this.value();return T.apply(Kt(ae)?ae:[],X)}return this[D](function(ye){return T.apply(Kt(ye)?ye:[],X)})}}),Ma(fr.prototype,function(E,T){var D=ne[T];if(D){var q=D.name+"";er.call(fs,q)||(fs[q]=[]),fs[q].push({name:T,func:D})}}),fs[Id(t,y).name]=[{name:"wrapper",func:t}],fr.prototype.clone=L_,fr.prototype.reverse=Mc,fr.prototype.value=Ey,ne.prototype.at=D6,ne.prototype.chain=M6,ne.prototype.commit=L6,ne.prototype.next=N6,ne.prototype.plant=F6,ne.prototype.reverse=B6,ne.prototype.toJSON=ne.prototype.valueOf=ne.prototype.value=U6,ne.prototype.first=ne.prototype.head,To&&(ne.prototype[To]=j6),ne},Ku=Xu();ai?((ai.exports=Ku)._=Ku,Gu._=Ku):wn._=Ku}).call(Lr)})(a0,a0.exports);var mn=a0.exports,MK=e_;function e_(){var r={};r._next=r._prev=r,this._sentinel=r}e_.prototype.dequeue=function(){var r=this._sentinel,e=r._prev;if(e!==r)return D4(e),e};e_.prototype.enqueue=function(r){var e=this._sentinel;r._prev&&r._next&&D4(r),r._next=e._next,e._next._prev=r,e._next=r,r._prev=e};e_.prototype.toString=function(){for(var r=[],e=this._sentinel,t=e._prev;t!==e;)r.push(JSON.stringify(t,LK)),t=t._prev;return"["+r.join(", ")+"]"};function D4(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function LK(r,e){if(r!=="_next"&&r!=="_prev")return e}var _u=mn,NK=Oo.Graph,jK=MK,FK=UK,BK=_u.constant(1);function UK(r,e){if(r.nodeCount()<=1)return[];var t=qK(r,e||BK),n=zK(t.graph,t.buckets,t.zeroIdx);return _u.flatten(_u.map(n,function(i){return r.outEdges(i.v,i.w)}),!0)}function zK(r,e,t){for(var n=[],i=e[e.length-1],a=e[0],o;r.nodeCount();){for(;o=a.dequeue();)LS(r,e,t,o);for(;o=i.dequeue();)LS(r,e,t,o);if(r.nodeCount()){for(var s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){n=n.concat(LS(r,e,t,o,!0));break}}}return n}function LS(r,e,t,n,i){var a=i?[]:void 0;return _u.forEach(r.inEdges(n.v),function(o){var s=r.edge(o),u=r.node(o.v);i&&a.push({v:o.v,w:o.w}),u.out-=s,KC(e,t,u)}),_u.forEach(r.outEdges(n.v),function(o){var s=r.edge(o),u=o.w,l=r.node(u);l.in-=s,KC(e,t,l)}),r.removeNode(n.v),a}function qK(r,e){var t=new NK,n=0,i=0;_u.forEach(r.nodes(),function(s){t.setNode(s,{v:s,in:0,out:0})}),_u.forEach(r.edges(),function(s){var u=t.edge(s.v,s.w)||0,l=e(s),c=u+l;t.setEdge(s.v,s.w,c),i=Math.max(i,t.node(s.v).out+=l),n=Math.max(n,t.node(s.w).in+=l)});var a=_u.range(i+n+3).map(function(){return new jK}),o=n+1;return _u.forEach(t.nodes(),function(s){KC(a,o,t.node(s))}),{graph:t,buckets:a,zeroIdx:o}}function KC(r,e,t){t.out?t.in?r[t.out-t.in+e].enqueue(t):r[r.length-1].enqueue(t):r[0].enqueue(t)}var vf=mn,GK=FK,VK={run:$K,undo:HK};function $K(r){var e=r.graph().acyclicer==="greedy"?GK(r,t(r)):WK(r);vf.forEach(e,function(n){var i=r.edge(n);r.removeEdge(n),i.forwardName=n.name,i.reversed=!0,r.setEdge(n.w,n.v,i,vf.uniqueId("rev"))});function t(n){return function(i){return n.edge(i).weight}}}function WK(r){var e=[],t={},n={};function i(a){vf.has(n,a)||(n[a]=!0,t[a]=!0,vf.forEach(r.outEdges(a),function(o){vf.has(t,o.w)?e.push(o):i(o.w)}),delete t[a])}return vf.forEach(r.nodes(),i),e}function HK(r){vf.forEach(r.edges(),function(e){var t=r.edge(e);if(t.reversed){r.removeEdge(e);var n=t.forwardName;delete t.reversed,delete t.forwardName,r.setEdge(e.w,e.v,t,n)}})}var jr=mn,M4=Oo.Graph,Ca={addDummyNode:L4,simplify:YK,asNonCompoundGraph:XK,successorWeights:KK,predecessorWeights:ZK,intersectRect:QK,buildLayerMatrix:JK,normalizeRanks:eZ,removeEmptyRanks:tZ,addBorderNode:rZ,maxRank:N4,partition:nZ,time:iZ,notime:aZ};function L4(r,e,t,n){var i;do i=jr.uniqueId(n);while(r.hasNode(i));return t.dummy=e,r.setNode(i,t),i}function YK(r){var e=new M4().setGraph(r.graph());return jr.forEach(r.nodes(),function(t){e.setNode(t,r.node(t))}),jr.forEach(r.edges(),function(t){var n=e.edge(t.v,t.w)||{weight:0,minlen:1},i=r.edge(t);e.setEdge(t.v,t.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),e}function XK(r){var e=new M4({multigraph:r.isMultigraph()}).setGraph(r.graph());return jr.forEach(r.nodes(),function(t){r.children(t).length||e.setNode(t,r.node(t))}),jr.forEach(r.edges(),function(t){e.setEdge(t,r.edge(t))}),e}function KK(r){var e=jr.map(r.nodes(),function(t){var n={};return jr.forEach(r.outEdges(t),function(i){n[i.w]=(n[i.w]||0)+r.edge(i).weight}),n});return jr.zipObject(r.nodes(),e)}function ZK(r){var e=jr.map(r.nodes(),function(t){var n={};return jr.forEach(r.inEdges(t),function(i){n[i.v]=(n[i.v]||0)+r.edge(i).weight}),n});return jr.zipObject(r.nodes(),e)}function QK(r,e){var t=r.x,n=r.y,i=e.x-t,a=e.y-n,o=r.width/2,s=r.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var u,l;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),u=s*i/a,l=s):(i<0&&(o=-o),u=o,l=o*a/i),{x:t+u,y:n+l}}function JK(r){var e=jr.map(jr.range(N4(r)+1),function(){return[]});return jr.forEach(r.nodes(),function(t){var n=r.node(t),i=n.rank;jr.isUndefined(i)||(e[i][n.order]=t)}),e}function eZ(r){var e=jr.min(jr.map(r.nodes(),function(t){return r.node(t).rank}));jr.forEach(r.nodes(),function(t){var n=r.node(t);jr.has(n,"rank")&&(n.rank-=e)})}function tZ(r){var e=jr.min(jr.map(r.nodes(),function(a){return r.node(a).rank})),t=[];jr.forEach(r.nodes(),function(a){var o=r.node(a).rank-e;t[o]||(t[o]=[]),t[o].push(a)});var n=0,i=r.graph().nodeRankFactor;jr.forEach(t,function(a,o){jr.isUndefined(a)&&o%i!==0?--n:n&&jr.forEach(a,function(s){r.node(s).rank+=n})})}function rZ(r,e,t,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=t,i.order=n),L4(r,"border",i,e)}function N4(r){return jr.max(jr.map(r.nodes(),function(e){var t=r.node(e).rank;if(!jr.isUndefined(t))return t}))}function nZ(r,e){var t={lhs:[],rhs:[]};return jr.forEach(r,function(n){e(n)?t.lhs.push(n):t.rhs.push(n)}),t}function iZ(r,e){var t=jr.now();try{return e()}finally{console.log(r+" time: "+(jr.now()-t)+"ms")}}function aZ(r,e){return e()}var j4=mn,oZ=Ca,sZ={run:uZ,undo:cZ};function uZ(r){r.graph().dummyChains=[],j4.forEach(r.edges(),function(e){lZ(r,e)})}function lZ(r,e){var t=e.v,n=r.node(t).rank,i=e.w,a=r.node(i).rank,o=e.name,s=r.edge(e),u=s.labelRank;if(a!==n+1){r.removeEdge(e);var l,c,f;for(f=0,++n;n<a;++f,++n)s.points=[],c={width:0,height:0,edgeLabel:s,edgeObj:e,rank:n},l=oZ.addDummyNode(r,"edge",c,"_d"),n===u&&(c.width=s.width,c.height=s.height,c.dummy="edge-label",c.labelpos=s.labelpos),r.setEdge(t,l,{weight:s.weight},o),f===0&&r.graph().dummyChains.push(l),t=l;r.setEdge(t,i,{weight:s.weight},o)}}function cZ(r){j4.forEach(r.graph().dummyChains,function(e){var t=r.node(e),n=t.edgeLabel,i;for(r.setEdge(t.edgeObj,n);t.dummy;)i=r.successors(e)[0],r.removeNode(e),n.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(n.x=t.x,n.y=t.y,n.width=t.width,n.height=t.height),e=i,t=r.node(e)})}var Wm=mn,t_={longestPath:fZ,slack:dZ};function fZ(r){var e={};function t(n){var i=r.node(n);if(Wm.has(e,n))return i.rank;e[n]=!0;var a=Wm.min(Wm.map(r.outEdges(n),function(o){return t(o.w)-r.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}Wm.forEach(r.sources(),t)}function dZ(r,e){return r.node(e.w).rank-r.node(e.v).rank-r.edge(e).minlen}var o0=mn,hZ=Oo.Graph,s0=t_.slack,F4=vZ;function vZ(r){var e=new hZ({directed:!1}),t=r.nodes()[0],n=r.nodeCount();e.setNode(t,{});for(var i,a;pZ(e,r)<n;)i=gZ(e,r),a=e.hasNode(i.v)?s0(r,i):-s0(r,i),yZ(e,r,a);return e}function pZ(r,e){function t(n){o0.forEach(e.nodeEdges(n),function(i){var a=i.v,o=n===a?i.w:a;!r.hasNode(o)&&!s0(e,i)&&(r.setNode(o,{}),r.setEdge(n,o,{}),t(o))})}return o0.forEach(r.nodes(),t),r.nodeCount()}function gZ(r,e){return o0.minBy(e.edges(),function(t){if(r.hasNode(t.v)!==r.hasNode(t.w))return s0(e,t)})}function yZ(r,e,t){o0.forEach(r.nodes(),function(n){e.node(n).rank+=t})}var Pu=mn,mZ=F4,bZ=t_.slack,_Z=t_.longestPath,wZ=Oo.alg.preorder,xZ=Oo.alg.postorder,EZ=Ca.simplify,OZ=Bf;Bf.initLowLimValues=zT;Bf.initCutValues=UT;Bf.calcCutValue=B4;Bf.leaveEdge=z4;Bf.enterEdge=q4;Bf.exchangeEdges=G4;function Bf(r){r=EZ(r),_Z(r);var e=mZ(r);zT(e),UT(e,r);for(var t,n;t=z4(e);)n=q4(e,r,t),G4(e,r,t,n)}function UT(r,e){var t=xZ(r,r.nodes());t=t.slice(0,t.length-1),Pu.forEach(t,function(n){SZ(r,e,n)})}function SZ(r,e,t){var n=r.node(t),i=n.parent;r.edge(t,i).cutvalue=B4(r,e,t)}function B4(r,e,t){var n=r.node(t),i=n.parent,a=!0,o=e.edge(t,i),s=0;return o||(a=!1,o=e.edge(i,t)),s=o.weight,Pu.forEach(e.nodeEdges(t),function(u){var l=u.v===t,c=l?u.w:u.v;if(c!==i){var f=l===a,d=e.edge(u).weight;if(s+=f?d:-d,TZ(r,t,c)){var h=r.edge(t,c).cutvalue;s+=f?-h:h}}}),s}function zT(r,e){arguments.length<2&&(e=r.nodes()[0]),U4(r,{},1,e)}function U4(r,e,t,n,i){var a=t,o=r.node(n);return e[n]=!0,Pu.forEach(r.neighbors(n),function(s){Pu.has(e,s)||(t=U4(r,e,t,s,n))}),o.low=a,o.lim=t++,i?o.parent=i:delete o.parent,t}function z4(r){return Pu.find(r.edges(),function(e){return r.edge(e).cutvalue<0})}function q4(r,e,t){var n=t.v,i=t.w;e.hasEdge(n,i)||(n=t.w,i=t.v);var a=r.node(n),o=r.node(i),s=a,u=!1;a.lim>o.lim&&(s=o,u=!0);var l=Pu.filter(e.edges(),function(c){return u===CL(r,r.node(c.v),s)&&u!==CL(r,r.node(c.w),s)});return Pu.minBy(l,function(c){return bZ(e,c)})}function G4(r,e,t,n){var i=t.v,a=t.w;r.removeEdge(i,a),r.setEdge(n.v,n.w,{}),zT(r),UT(r,e),CZ(r,e)}function CZ(r,e){var t=Pu.find(r.nodes(),function(i){return!e.node(i).parent}),n=wZ(r,t);n=n.slice(1),Pu.forEach(n,function(i){var a=r.node(i).parent,o=e.edge(i,a),s=!1;o||(o=e.edge(a,i),s=!0),e.node(i).rank=e.node(a).rank+(s?o.minlen:-o.minlen)})}function TZ(r,e,t){return r.hasEdge(e,t)}function CL(r,e,t){return t.low<=e.lim&&e.lim<=t.lim}var AZ=t_,V4=AZ.longestPath,PZ=F4,RZ=OZ,kZ=IZ;function IZ(r){switch(r.graph().ranker){case"network-simplex":TL(r);break;case"tight-tree":MZ(r);break;case"longest-path":DZ(r);break;default:TL(r)}}var DZ=V4;function MZ(r){V4(r),PZ(r)}function TL(r){RZ(r)}var ZC=mn,LZ=NZ;function NZ(r){var e=FZ(r);ZC.forEach(r.graph().dummyChains,function(t){for(var n=r.node(t),i=n.edgeObj,a=jZ(r,e,i.v,i.w),o=a.path,s=a.lca,u=0,l=o[u],c=!0;t!==i.w;){if(n=r.node(t),c){for(;(l=o[u])!==s&&r.node(l).maxRank<n.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<o.length-1&&r.node(l=o[u+1]).minRank<=n.rank;)u++;l=o[u]}r.setParent(t,l),t=r.successors(t)[0]}})}function jZ(r,e,t,n){var i=[],a=[],o=Math.min(e[t].low,e[n].low),s=Math.max(e[t].lim,e[n].lim),u,l;u=t;do u=r.parent(u),i.push(u);while(u&&(e[u].low>o||s>e[u].lim));for(l=u,u=n;(u=r.parent(u))!==l;)a.push(u);return{path:i.concat(a.reverse()),lca:l}}function FZ(r){var e={},t=0;function n(i){var a=t;ZC.forEach(r.children(i),n),e[i]={low:a,lim:t++}}return ZC.forEach(r.children(),n),e}var wu=mn,QC=Ca,BZ={run:UZ,cleanup:GZ};function UZ(r){var e=QC.addDummyNode(r,"root",{},"_root"),t=zZ(r),n=wu.max(wu.values(t))-1,i=2*n+1;r.graph().nestingRoot=e,wu.forEach(r.edges(),function(o){r.edge(o).minlen*=i});var a=qZ(r)+1;wu.forEach(r.children(),function(o){$4(r,e,i,a,n,t,o)}),r.graph().nodeRankFactor=i}function $4(r,e,t,n,i,a,o){var s=r.children(o);if(!s.length){o!==e&&r.setEdge(e,o,{weight:0,minlen:t});return}var u=QC.addBorderNode(r,"_bt"),l=QC.addBorderNode(r,"_bb"),c=r.node(o);r.setParent(u,o),c.borderTop=u,r.setParent(l,o),c.borderBottom=l,wu.forEach(s,function(f){$4(r,e,t,n,i,a,f);var d=r.node(f),h=d.borderTop?d.borderTop:f,v=d.borderBottom?d.borderBottom:f,p=d.borderTop?n:2*n,g=h!==v?1:i-a[o]+1;r.setEdge(u,h,{weight:p,minlen:g,nestingEdge:!0}),r.setEdge(v,l,{weight:p,minlen:g,nestingEdge:!0})}),r.parent(o)||r.setEdge(e,u,{weight:0,minlen:i+a[o]})}function zZ(r){var e={};function t(n,i){var a=r.children(n);a&&a.length&&wu.forEach(a,function(o){t(o,i+1)}),e[n]=i}return wu.forEach(r.children(),function(n){t(n,1)}),e}function qZ(r){return wu.reduce(r.edges(),function(e,t){return e+r.edge(t).weight},0)}function GZ(r){var e=r.graph();r.removeNode(e.nestingRoot),delete e.nestingRoot,wu.forEach(r.edges(),function(t){var n=r.edge(t);n.nestingEdge&&r.removeEdge(t)})}var NS=mn,VZ=Ca,$Z=WZ;function WZ(r){function e(t){var n=r.children(t),i=r.node(t);if(n.length&&NS.forEach(n,e),NS.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)AL(r,"borderLeft","_bl",t,i,a),AL(r,"borderRight","_br",t,i,a)}}NS.forEach(r.children(),e)}function AL(r,e,t,n,i,a){var o={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],u=VZ.addDummyNode(r,"border",o,t);i[e][a]=u,r.setParent(u,n),s&&r.setEdge(s,u,{weight:1})}var Ds=mn,HZ={adjust:YZ,undo:XZ};function YZ(r){var e=r.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&W4(r)}function XZ(r){var e=r.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&KZ(r),(e==="lr"||e==="rl")&&(ZZ(r),W4(r))}function W4(r){Ds.forEach(r.nodes(),function(e){PL(r.node(e))}),Ds.forEach(r.edges(),function(e){PL(r.edge(e))})}function PL(r){var e=r.width;r.width=r.height,r.height=e}function KZ(r){Ds.forEach(r.nodes(),function(e){jS(r.node(e))}),Ds.forEach(r.edges(),function(e){var t=r.edge(e);Ds.forEach(t.points,jS),Ds.has(t,"y")&&jS(t)})}function jS(r){r.y=-r.y}function ZZ(r){Ds.forEach(r.nodes(),function(e){FS(r.node(e))}),Ds.forEach(r.edges(),function(e){var t=r.edge(e);Ds.forEach(t.points,FS),Ds.has(t,"x")&&FS(t)})}function FS(r){var e=r.x;r.x=r.y,r.y=e}var hu=mn,QZ=JZ;function JZ(r){var e={},t=hu.filter(r.nodes(),function(s){return!r.children(s).length}),n=hu.max(hu.map(t,function(s){return r.node(s).rank})),i=hu.map(hu.range(n+1),function(){return[]});function a(s){if(!hu.has(e,s)){e[s]=!0;var u=r.node(s);i[u.rank].push(s),hu.forEach(r.successors(s),a)}}var o=hu.sortBy(t,function(s){return r.node(s).rank});return hu.forEach(o,a),i}var ml=mn,eQ=tQ;function tQ(r,e){for(var t=0,n=1;n<e.length;++n)t+=rQ(r,e[n-1],e[n]);return t}function rQ(r,e,t){for(var n=ml.zipObject(t,ml.map(t,function(l,c){return c})),i=ml.flatten(ml.map(e,function(l){return ml.sortBy(ml.map(r.outEdges(l),function(c){return{pos:n[c.w],weight:r.edge(c).weight}}),"pos")}),!0),a=1;a<t.length;)a<<=1;var o=2*a-1;a-=1;var s=ml.map(new Array(o),function(){return 0}),u=0;return ml.forEach(i.forEach(function(l){var c=l.pos+a;s[c]+=l.weight;for(var f=0;c>0;)c%2&&(f+=s[c+1]),c=c-1>>1,s[c]+=l.weight;u+=l.weight*f})),u}var RL=mn,nQ=iQ;function iQ(r,e){return RL.map(e,function(t){var n=r.inEdges(t);if(n.length){var i=RL.reduce(n,function(a,o){var s=r.edge(o),u=r.node(o.v);return{sum:a.sum+s.weight*u.order,weight:a.weight+s.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:t}})}var Wa=mn,aQ=oQ;function oQ(r,e){var t={};Wa.forEach(r,function(i,a){var o=t[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};Wa.isUndefined(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),Wa.forEach(e.edges(),function(i){var a=t[i.v],o=t[i.w];!Wa.isUndefined(a)&&!Wa.isUndefined(o)&&(o.indegree++,a.out.push(t[i.w]))});var n=Wa.filter(t,function(i){return!i.indegree});return sQ(n)}function sQ(r){var e=[];function t(a){return function(o){o.merged||(Wa.isUndefined(o.barycenter)||Wa.isUndefined(a.barycenter)||o.barycenter>=a.barycenter)&&uQ(a,o)}}function n(a){return function(o){o.in.push(a),--o.indegree===0&&r.push(o)}}for(;r.length;){var i=r.pop();e.push(i),Wa.forEach(i.in.reverse(),t(i)),Wa.forEach(i.out,n(i))}return Wa.map(Wa.filter(e,function(a){return!a.merged}),function(a){return Wa.pick(a,["vs","i","barycenter","weight"])})}function uQ(r,e){var t=0,n=0;r.weight&&(t+=r.barycenter*r.weight,n+=r.weight),e.weight&&(t+=e.barycenter*e.weight,n+=e.weight),r.vs=e.vs.concat(r.vs),r.barycenter=t/n,r.weight=n,r.i=Math.min(e.i,r.i),e.merged=!0}var Ap=mn,lQ=Ca,cQ=fQ;function fQ(r,e){var t=lQ.partition(r,function(c){return Ap.has(c,"barycenter")}),n=t.lhs,i=Ap.sortBy(t.rhs,function(c){return-c.i}),a=[],o=0,s=0,u=0;n.sort(dQ(!!e)),u=kL(a,i,u),Ap.forEach(n,function(c){u+=c.vs.length,a.push(c.vs),o+=c.barycenter*c.weight,s+=c.weight,u=kL(a,i,u)});var l={vs:Ap.flatten(a,!0)};return s&&(l.barycenter=o/s,l.weight=s),l}function kL(r,e,t){for(var n;e.length&&(n=Ap.last(e)).i<=t;)e.pop(),r.push(n.vs),t++;return t}function dQ(r){return function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i}}var Rl=mn,hQ=nQ,vQ=aQ,pQ=cQ,gQ=H4;function H4(r,e,t,n){var i=r.children(e),a=r.node(e),o=a?a.borderLeft:void 0,s=a?a.borderRight:void 0,u={};o&&(i=Rl.filter(i,function(v){return v!==o&&v!==s}));var l=hQ(r,i);Rl.forEach(l,function(v){if(r.children(v.v).length){var p=H4(r,v.v,t,n);u[v.v]=p,Rl.has(p,"barycenter")&&mQ(v,p)}});var c=vQ(l,t);yQ(c,u);var f=pQ(c,n);if(o&&(f.vs=Rl.flatten([o,f.vs,s],!0),r.predecessors(o).length)){var d=r.node(r.predecessors(o)[0]),h=r.node(r.predecessors(s)[0]);Rl.has(f,"barycenter")||(f.barycenter=0,f.weight=0),f.barycenter=(f.barycenter*f.weight+d.order+h.order)/(f.weight+2),f.weight+=2}return f}function yQ(r,e){Rl.forEach(r,function(t){t.vs=Rl.flatten(t.vs.map(function(n){return e[n]?e[n].vs:n}),!0)})}function mQ(r,e){Rl.isUndefined(r.barycenter)?(r.barycenter=e.barycenter,r.weight=e.weight):(r.barycenter=(r.barycenter*r.weight+e.barycenter*e.weight)/(r.weight+e.weight),r.weight+=e.weight)}var Pp=mn,bQ=Oo.Graph,_Q=wQ;function wQ(r,e,t){var n=xQ(r),i=new bQ({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(a){return r.node(a)});return Pp.forEach(r.nodes(),function(a){var o=r.node(a),s=r.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,s||n),Pp.forEach(r[t](a),function(u){var l=u.v===a?u.w:u.v,c=i.edge(l,a),f=Pp.isUndefined(c)?0:c.weight;i.setEdge(l,a,{weight:r.edge(u).weight+f})}),Pp.has(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i}function xQ(r){for(var e;r.hasNode(e=Pp.uniqueId("_root")););return e}var EQ=mn,OQ=SQ;function SQ(r,e,t){var n={},i;EQ.forEach(t,function(a){for(var o=r.parent(a),s,u;o;){if(s=r.parent(o),s?(u=n[s],n[s]=o):(u=i,i=o),u&&u!==o){e.setEdge(u,o);return}o=s}})}var zl=mn,CQ=QZ,TQ=eQ,AQ=gQ,PQ=_Q,RQ=OQ,kQ=Oo.Graph,IL=Ca,IQ=DQ;function DQ(r){var e=IL.maxRank(r),t=DL(r,zl.range(1,e+1),"inEdges"),n=DL(r,zl.range(e-1,-1,-1),"outEdges"),i=CQ(r);ML(r,i);for(var a=Number.POSITIVE_INFINITY,o,s=0,u=0;u<4;++s,++u){MQ(s%2?t:n,s%4>=2),i=IL.buildLayerMatrix(r);var l=TQ(r,i);l<a&&(u=0,o=zl.cloneDeep(i),a=l)}ML(r,o)}function DL(r,e,t){return zl.map(e,function(n){return PQ(r,n,t)})}function MQ(r,e){var t=new kQ;zl.forEach(r,function(n){var i=n.graph().root,a=AQ(n,i,t,e);zl.forEach(a.vs,function(o,s){n.node(o).order=s}),RQ(n,t,a.vs)})}function ML(r,e){zl.forEach(e,function(t){zl.forEach(t,function(n,i){r.node(n).order=i})})}var Yt=mn,LQ=Oo.Graph,NQ=Ca,jQ={positionX:YQ};function FQ(r,e){var t={};function n(i,a){var o=0,s=0,u=i.length,l=Yt.last(a);return Yt.forEach(a,function(c,f){var d=UQ(r,c),h=d?r.node(d).order:u;(d||c===l)&&(Yt.forEach(a.slice(s,f+1),function(v){Yt.forEach(r.predecessors(v),function(p){var g=r.node(p),y=g.order;(y<o||h<y)&&!(g.dummy&&r.node(v).dummy)&&Y4(t,p,v)})}),s=f+1,o=h)}),a}return Yt.reduce(e,n),t}function BQ(r,e){var t={};if(r.nodeCount()>1e3)return t;function n(a,o,s,u,l){var c;Yt.forEach(Yt.range(o,s),function(f){c=a[f],r.node(c).dummy&&Yt.forEach(r.predecessors(c),function(d){var h=r.node(d);h.dummy&&(h.order<u||h.order>l)&&Y4(t,d,c)})})}function i(a,o){var s=-1,u,l=0;return Yt.forEach(o,function(c,f){if(r.node(c).dummy==="border"){var d=r.predecessors(c);d.length&&(u=r.node(d[0]).order,n(o,l,f,s,u),l=f,s=u)}n(o,l,o.length,u,a.length)}),o}return Yt.reduce(e,i),t}function UQ(r,e){if(r.node(e).dummy)return Yt.find(r.predecessors(e),function(t){return r.node(t).dummy})}function Y4(r,e,t){if(e>t){var n=e;e=t,t=n}var i=r[e];i||(r[e]=i={}),i[t]=!0}function zQ(r,e,t){if(e>t){var n=e;e=t,t=n}return Yt.has(r[e],t)}function qQ(r,e,t,n){var i={},a={},o={};return Yt.forEach(e,function(s){Yt.forEach(s,function(u,l){i[u]=u,a[u]=u,o[u]=l})}),Yt.forEach(e,function(s){var u=-1;Yt.forEach(s,function(l){var c=n(l);if(c.length){c=Yt.sortBy(c,function(p){return o[p]});for(var f=(c.length-1)/2,d=Math.floor(f),h=Math.ceil(f);d<=h;++d){var v=c[d];a[l]===l&&u<o[v]&&!zQ(t,l,v)&&(a[v]=l,a[l]=i[l]=i[v],u=o[v])}}})}),{root:i,align:a}}function GQ(r,e,t,n,i){var a={},o=VQ(r,e,t,i),s=i?"borderLeft":"borderRight";function u(f,d){for(var h=o.nodes(),v=h.pop(),p={};v;)p[v]?f(v):(p[v]=!0,h.push(v),h=h.concat(d(v))),v=h.pop()}function l(f){a[f]=o.inEdges(f).reduce(function(d,h){return Math.max(d,a[h.v]+o.edge(h))},0)}function c(f){var d=o.outEdges(f).reduce(function(v,p){return Math.min(v,a[p.w]-o.edge(p))},Number.POSITIVE_INFINITY),h=r.node(f);d!==Number.POSITIVE_INFINITY&&h.borderType!==s&&(a[f]=Math.max(a[f],d))}return u(l,o.predecessors.bind(o)),u(c,o.successors.bind(o)),Yt.forEach(n,function(f){a[f]=a[t[f]]}),a}function VQ(r,e,t,n){var i=new LQ,a=r.graph(),o=XQ(a.nodesep,a.edgesep,n);return Yt.forEach(e,function(s){var u;Yt.forEach(s,function(l){var c=t[l];if(i.setNode(c),u){var f=t[u],d=i.edge(f,c);i.setEdge(f,c,Math.max(o(r,l,u),d||0))}u=l})}),i}function $Q(r,e){return Yt.minBy(Yt.values(e),function(t){var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Yt.forIn(t,function(a,o){var s=KQ(r,o)/2;n=Math.max(a+s,n),i=Math.min(a-s,i)}),n-i})}function WQ(r,e){var t=Yt.values(e),n=Yt.min(t),i=Yt.max(t);Yt.forEach(["u","d"],function(a){Yt.forEach(["l","r"],function(o){var s=a+o,u=r[s],l;if(u!==e){var c=Yt.values(u);l=o==="l"?n-Yt.min(c):i-Yt.max(c),l&&(r[s]=Yt.mapValues(u,function(f){return f+l}))}})})}function HQ(r,e){return Yt.mapValues(r.ul,function(t,n){if(e)return r[e.toLowerCase()][n];var i=Yt.sortBy(Yt.map(r,n));return(i[1]+i[2])/2})}function YQ(r){var e=NQ.buildLayerMatrix(r),t=Yt.merge(FQ(r,e),BQ(r,e)),n={},i;Yt.forEach(["u","d"],function(o){i=o==="u"?e:Yt.values(e).reverse(),Yt.forEach(["l","r"],function(s){s==="r"&&(i=Yt.map(i,function(f){return Yt.values(f).reverse()}));var u=(o==="u"?r.predecessors:r.successors).bind(r),l=qQ(r,i,t,u),c=GQ(r,i,l.root,l.align,s==="r");s==="r"&&(c=Yt.mapValues(c,function(f){return-f})),n[o+s]=c})});var a=$Q(r,n);return WQ(n,a),HQ(n,r.graph().align)}function XQ(r,e,t){return function(n,i,a){var o=n.node(i),s=n.node(a),u=0,l;if(u+=o.width/2,Yt.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":l=-o.width/2;break;case"r":l=o.width/2;break}if(l&&(u+=t?l:-l),l=0,u+=(o.dummy?e:r)/2,u+=(s.dummy?e:r)/2,u+=s.width/2,Yt.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":l=s.width/2;break;case"r":l=-s.width/2;break}return l&&(u+=t?l:-l),l=0,u}}function KQ(r,e){return r.node(e).width}var Rp=mn,X4=Ca,ZQ=jQ.positionX,QQ=JQ;function JQ(r){r=X4.asNonCompoundGraph(r),eJ(r),Rp.forEach(ZQ(r),function(e,t){r.node(t).x=e})}function eJ(r){var e=X4.buildLayerMatrix(r),t=r.graph().ranksep,n=0;Rp.forEach(e,function(i){var a=Rp.max(Rp.map(i,function(o){return r.node(o).height}));Rp.forEach(i,function(o){r.node(o).y=n+a/2}),n+=a+t})}var ur=mn,LL=VK,NL=sZ,tJ=kZ,rJ=Ca.normalizeRanks,nJ=LZ,iJ=Ca.removeEmptyRanks,jL=BZ,aJ=$Z,FL=HZ,oJ=IQ,sJ=QQ,Jl=Ca,uJ=Oo.Graph,lJ=cJ;function cJ(r,e){var t=e&&e.debugTiming?Jl.time:Jl.notime,n=t("layout",function(){return n=t("  buildLayoutGraph",function(){return wJ(r)}),t("  runLayout",function(){fJ(n,t)}),t("  updateInputGraph",function(){dJ(r,n)}),n});return n}function fJ(r,e){e("    makeSpaceForEdgeLabels",function(){xJ(r)}),e("    removeSelfEdges",function(){kJ(r)}),e("    acyclic",function(){LL.run(r)}),e("    nestingGraph.run",function(){jL.run(r)}),e("    rank",function(){tJ(Jl.asNonCompoundGraph(r))}),e("    injectEdgeLabelProxies",function(){EJ(r)}),e("    removeEmptyRanks",function(){iJ(r)}),e("    nestingGraph.cleanup",function(){jL.cleanup(r)}),e("    normalizeRanks",function(){rJ(r)}),e("    assignRankMinMax",function(){OJ(r)}),e("    removeEdgeLabelProxies",function(){SJ(r)}),e("    normalize.run",function(){NL.run(r)}),e("    parentDummyChains",function(){nJ(r)}),e("    addBorderSegments",function(){aJ(r)}),e("    order",function(){oJ(r)}),e("    insertSelfEdges",function(){IJ(r)}),e("    adjustCoordinateSystem",function(){FL.adjust(r)}),e("    position",function(){sJ(r)}),e("    positionSelfEdges",function(){DJ(r)}),e("    removeBorderNodes",function(){RJ(r)}),e("    normalize.undo",function(){NL.undo(r)}),e("    fixupEdgeLabelCoords",function(){AJ(r)}),e("    undoCoordinateSystem",function(){FL.undo(r)}),e("    translateGraph",function(){CJ(r)}),e("    assignNodeIntersects",function(){TJ(r)}),e("    reversePoints",function(){PJ(r)}),e("    acyclic.undo",function(){LL.undo(r)})}function dJ(r,e){ur.forEach(r.nodes(),function(t){var n=r.node(t),i=e.node(t);n&&(n.x=i.x,n.y=i.y,e.children(t).length&&(n.width=i.width,n.height=i.height))}),ur.forEach(r.edges(),function(t){var n=r.edge(t),i=e.edge(t);n.points=i.points,ur.has(i,"x")&&(n.x=i.x,n.y=i.y)}),r.graph().width=e.graph().width,r.graph().height=e.graph().height}var hJ=["nodesep","edgesep","ranksep","marginx","marginy"],vJ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},pJ=["acyclicer","ranker","rankdir","align"],gJ=["width","height"],yJ={width:0,height:0},mJ=["minlen","weight","width","height","labeloffset"],bJ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_J=["labelpos"];function wJ(r){var e=new uJ({multigraph:!0,compound:!0}),t=US(r.graph());return e.setGraph(ur.merge({},vJ,BS(t,hJ),ur.pick(t,pJ))),ur.forEach(r.nodes(),function(n){var i=US(r.node(n));e.setNode(n,ur.defaults(BS(i,gJ),yJ)),e.setParent(n,r.parent(n))}),ur.forEach(r.edges(),function(n){var i=US(r.edge(n));e.setEdge(n,ur.merge({},bJ,BS(i,mJ),ur.pick(i,_J)))}),e}function xJ(r){var e=r.graph();e.ranksep/=2,ur.forEach(r.edges(),function(t){var n=r.edge(t);n.minlen*=2,n.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?n.width+=n.labeloffset:n.height+=n.labeloffset)})}function EJ(r){ur.forEach(r.edges(),function(e){var t=r.edge(e);if(t.width&&t.height){var n=r.node(e.v),i=r.node(e.w),a={rank:(i.rank-n.rank)/2+n.rank,e};Jl.addDummyNode(r,"edge-proxy",a,"_ep")}})}function OJ(r){var e=0;ur.forEach(r.nodes(),function(t){var n=r.node(t);n.borderTop&&(n.minRank=r.node(n.borderTop).rank,n.maxRank=r.node(n.borderBottom).rank,e=ur.max(e,n.maxRank))}),r.graph().maxRank=e}function SJ(r){ur.forEach(r.nodes(),function(e){var t=r.node(e);t.dummy==="edge-proxy"&&(r.edge(t.e).labelRank=t.rank,r.removeNode(e))})}function CJ(r){var e=Number.POSITIVE_INFINITY,t=0,n=Number.POSITIVE_INFINITY,i=0,a=r.graph(),o=a.marginx||0,s=a.marginy||0;function u(l){var c=l.x,f=l.y,d=l.width,h=l.height;e=Math.min(e,c-d/2),t=Math.max(t,c+d/2),n=Math.min(n,f-h/2),i=Math.max(i,f+h/2)}ur.forEach(r.nodes(),function(l){u(r.node(l))}),ur.forEach(r.edges(),function(l){var c=r.edge(l);ur.has(c,"x")&&u(c)}),e-=o,n-=s,ur.forEach(r.nodes(),function(l){var c=r.node(l);c.x-=e,c.y-=n}),ur.forEach(r.edges(),function(l){var c=r.edge(l);ur.forEach(c.points,function(f){f.x-=e,f.y-=n}),ur.has(c,"x")&&(c.x-=e),ur.has(c,"y")&&(c.y-=n)}),a.width=t-e+o,a.height=i-n+s}function TJ(r){ur.forEach(r.edges(),function(e){var t=r.edge(e),n=r.node(e.v),i=r.node(e.w),a,o;t.points?(a=t.points[0],o=t.points[t.points.length-1]):(t.points=[],a=i,o=n),t.points.unshift(Jl.intersectRect(n,a)),t.points.push(Jl.intersectRect(i,o))})}function AJ(r){ur.forEach(r.edges(),function(e){var t=r.edge(e);if(ur.has(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function PJ(r){ur.forEach(r.edges(),function(e){var t=r.edge(e);t.reversed&&t.points.reverse()})}function RJ(r){ur.forEach(r.nodes(),function(e){if(r.children(e).length){var t=r.node(e),n=r.node(t.borderTop),i=r.node(t.borderBottom),a=r.node(ur.last(t.borderLeft)),o=r.node(ur.last(t.borderRight));t.width=Math.abs(o.x-a.x),t.height=Math.abs(i.y-n.y),t.x=a.x+t.width/2,t.y=n.y+t.height/2}}),ur.forEach(r.nodes(),function(e){r.node(e).dummy==="border"&&r.removeNode(e)})}function kJ(r){ur.forEach(r.edges(),function(e){if(e.v===e.w){var t=r.node(e.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e,label:r.edge(e)}),r.removeEdge(e)}})}function IJ(r){var e=Jl.buildLayerMatrix(r);ur.forEach(e,function(t){var n=0;ur.forEach(t,function(i,a){var o=r.node(i);o.order=a+n,ur.forEach(o.selfEdges,function(s){Jl.addDummyNode(r,"selfedge",{width:s.label.width,height:s.label.height,rank:o.rank,order:a+ ++n,e:s.e,label:s.label},"_se")}),delete o.selfEdges})})}function DJ(r){ur.forEach(r.nodes(),function(e){var t=r.node(e);if(t.dummy==="selfedge"){var n=r.node(t.e.v),i=n.x+n.width/2,a=n.y,o=t.x-i,s=n.height/2;r.setEdge(t.e,t.label),r.removeNode(e),t.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],t.label.x=t.x,t.label.y=t.y}})}function BS(r,e){return ur.mapValues(ur.pick(r,e),Number)}function US(r){var e={};return ur.forEach(r,function(t,n){e[n.toLowerCase()]=t}),e}var Hm=mn,MJ=Ca,LJ=Oo.Graph,NJ={debugOrdering:jJ};function jJ(r){var e=MJ.buildLayerMatrix(r),t=new LJ({compound:!0,multigraph:!0}).setGraph({});return Hm.forEach(r.nodes(),function(n){t.setNode(n,{label:n}),t.setParent(n,"layer"+r.node(n).rank)}),Hm.forEach(r.edges(),function(n){t.setEdge(n.v,n.w,{},n.name)}),Hm.forEach(e,function(n,i){var a="layer"+i;t.setNode(a,{rank:"same"}),Hm.reduce(n,function(o,s){return t.setEdge(o,s,{style:"invis"}),s})}),t}var FJ="0.8.14",BJ={graphlib:Oo,layout:lJ,debug:NJ,util:{time:Ca.time,notime:Ca.notime},version:FJ};const K4=U0(BJ);var Z4=function(){};Z4.prototype={fit:function(r){var e,t,n,i=r.length,a,o=i>0?r[0].width:0,s=i>0?r[0].height:0;for(this.root={x:0,y:0,width:o,height:s},e=0;e<i;e++)n=r[e],(t=this.findNode(this.root,n.width,n.height))?(a=this.splitNode(t,n.width,n.height),n.x=a.x,n.y=a.y):(a=this.growNode(n.width,n.height),n.x=a.x,n.y=a.y)},findNode:function(r,e,t){return r.used?this.findNode(r.right,e,t)||this.findNode(r.down,e,t):e<=r.width&&t<=r.height?r:null},splitNode:function(r,e,t){return r.used=!0,r.down={x:r.x,y:r.y+t,width:r.width,height:r.height-t},r.right={x:r.x+e,y:r.y,width:r.width-e,height:t},r},growNode:function(r,e){var t=r<=this.root.width,n=e<=this.root.height,i=n&&this.root.height>=this.root.width+r,a=t&&this.root.width>=this.root.height+e;return i?this.growRight(r,e):a?this.growDown(r,e):n?this.growRight(r,e):t?this.growDown(r,e):null},growRight:function(r,e){this.root={used:!0,x:0,y:0,width:this.root.width+r,height:this.root.height,down:this.root,right:{x:this.root.width,y:0,width:r,height:this.root.height}};var t;return(t=this.findNode(this.root,r,e))?this.splitNode(t,r,e):null},growDown:function(r,e){this.root={used:!0,x:0,y:0,width:this.root.width,height:this.root.height+e,down:{x:0,y:this.root.height,width:this.root.width,height:e},right:this.root};var t;return(t=this.findNode(this.root,r,e))?this.splitNode(t,r,e):null}};var UJ=Z4,zJ=UJ,qJ=function(r,e){e=e||{};var t=new zJ,n=e.inPlace||!1,i=r.map(function(u){return n?u:{width:u.width,height:u.height,item:u}});i=i.sort(function(u,l){return l.width*l.height-u.width*u.height}),t.fit(i);var a=i.reduce(function(u,l){return Math.max(u,l.x+l.width)},0),o=i.reduce(function(u,l){return Math.max(u,l.y+l.height)},0),s={width:a,height:o};return n||(s.items=i),s};const GJ=U0(qJ),VJ="tight-tree",vu=100,Q4="up",qT="down",$J="left",J4="right",WJ={[Q4]:"BT",[qT]:"TB",[$J]:"RL",[J4]:"LR"},HJ="bin",YJ=25,XJ=1/.38,KJ=r=>r===Q4||r===qT,ZJ=r=>r===qT||r===J4,zS=r=>{let e=null,t=null,n=null,i=null,a=null,o=null,s=null,u=null;for(const l of r.nodes()){const c=r.node(l);(a===null||c.x<a)&&(a=c.x),(o===null||c.y<o)&&(o=c.y),(s===null||c.x>s)&&(s=c.x),(u===null||c.y>u)&&(u=c.y);const f=Math.ceil(c.width/2);(e===null||c.x-f<e)&&(e=c.x-f),(t===null||c.y-f<t)&&(t=c.y-f),(n===null||c.x+f>n)&&(n=c.x+f),(i===null||c.y+f>i)&&(i=c.y+f)}return{minX:e,minY:t,maxX:n,maxY:i,minCenterX:a,minCenterY:o,maxCenterX:s,maxCenterY:u,width:n-e,height:i-t,xOffset:a-e,yOffset:o-t}},eF=r=>{const e=new K4.graphlib.Graph;return e.setGraph({}),e.setDefaultEdgeLabel(()=>({})),e.graph().nodesep=75*r,e.graph().ranksep=75*r,e},BL=(r,e,t)=>{const{rank:n}=t.node(r);let i=null,a=null;for(const o of e){const{rank:s}=t.node(o);if(!(o===r||s>=n))if(s===n-1){i=s,a=o;break}else(i===null&&a===null||s>i)&&(i=s,a=o)}return a},QJ=(r,e)=>{let t=BL(r,e.predecessors(r),e);return t===null&&(t=BL(r,e.successors(r),e)),t},JJ=(r,e)=>{const t=[],n=DK.alg.components(r);if(n.length>1)for(const i of n){const a=eF(e);for(const o of i){const s=r.node(o);a.setNode(o,{width:s.width,height:s.height});const u=r.outEdges(o);if(u)for(const l of u)a.setEdge(l.v,l.w)}t.push(a)}else t.push(r);return t},UL=(r,e,t)=>{r.graph().ranker=VJ,r.graph().rankdir=WJ[e];const n=K4.layout(r);for(const i of n.nodes()){const a=QJ(i,n);a!==null&&(t[i]=a)}},qS=(r,e)=>Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)),eee=r=>{const e=[r[0]];let t={p1:r[0],p2:r[1]},n=qS(t.p1,t.p2);for(let i=2;i<r.length;i++){let a={p1:r[i-1],p2:r[i]},o=qS(a.p1,a.p2);const s={p1:t.p1,p2:a.p2},u=qS(s.p1,s.p2);o+n-u<.1&&(e.pop(),a=s,o=u),e.push(a.p1),t=a,n=o}return e.push(r[r.length-1]),e},tee=(r,e,t,n,i,a,o=1)=>{const s=eF(o),u={},l={x:0,y:0},c=r.length;for(const m of r){const _=t[m.id];l.x+=(_==null?void 0:_.x)||0,l.y+=(_==null?void 0:_.y)||0;const x=(m.size||YJ)*XJ*o;s.setNode(m.id,{width:x,height:x})}const f=c?[l.x/c,l.y/c]:[0,0],d={};for(const m of n)if(e[m.from]&&e[m.to]&&m.from!==m.to){const _=m.from<m.to?`${m.from}-${m.to}`:`${m.to}-${m.from}`;d[_]||(d[_]=1,s.setEdge(m.from,m.to))}const h=JJ(s,o);if(h.length>1){h.forEach(w=>UL(w,i,u));const m=KJ(i),_=ZJ(i),x=h.filter(w=>w.nodeCount()===1),C=h.filter(w=>w.nodeCount()!==1);if(a===HJ){C.sort((B,U)=>U.nodeCount()-B.nodeCount());const A=m?({width:B,height:U,...W})=>({...W,width:B+vu,height:U+vu}):({width:B,height:U,...W})=>({...W,width:U+vu,height:B+vu}),k=C.map(zS).map(A),R=x.map(zS).map(A),I=k.concat(R);GJ(I,{inPlace:!0});const M=Math.floor(vu/2),N=m?"x":"y",F=m?"y":"x";if(!_){const B=m?"y":"x",U=m?"height":"width",W=I.reduce((H,J)=>H===null?J[B]:Math.min(J[B],H[U]||0),null),Y=I.reduce((H,J)=>H===null?J[B]+J[U]:Math.max(J[B]+J[U],H[U]||0),null);I.forEach(H=>{H[B]=W+(Y-(H[B]+H[U]))})}const z=(B,U)=>{for(const W of B.nodes()){const Y=B.node(W),H=s.node(W);H.x=Y.x-U.xOffset+U[N]+M,H.y=Y.y-U.yOffset+U[F]+M}};for(let B=0;B<C.length;B++){const U=C[B],W=k[B];z(U,W)}for(let B=0;B<x.length;B++){const U=x[B],W=R[B];z(U,W)}}else{C.sort(_?(U,W)=>W.nodeCount()-U.nodeCount():(U,W)=>U.nodeCount()-W.nodeCount());const w=C.map(zS),O=x.reduce((U,W)=>U+s.node(W.nodes()[0]).width,0),A=x.reduce((U,W)=>Math.max(U,s.node(W.nodes()[0]).width),0),k=x.length>0?O+(x.length-1)*vu:0,R=w.reduce((U,{width:W})=>Math.max(U,W),0),I=Math.max(R,k),M=w.reduce((U,{height:W})=>Math.max(U,W),0),N=Math.max(M,k);let F=0;const z=()=>{for(let U=0;U<C.length;U++){const W=C[U],Y=w[U],H=Math.floor(m?(I-Y.width)/2:(N-Y.height)/2);for(const J of W.nodes()){const le=W.node(J),fe=s.node(J);m?(fe.x=le.x-Y.minX+H,fe.y=le.y-Y.minY+F):(fe.x=le.x-Y.minX+F,fe.y=le.y-Y.minY+H)}for(const J of W.edges()){const le=W.edge(J),fe=s.edge(J);le.points&&le.points.length>3&&(fe.points=le.points.map(({x:ue,y:ge})=>({x:ue-Y.minX+(m?H:F),y:ge-Y.minY+(m?F:H)})))}F+=(m?Y.height:Y.width)+vu}},B=()=>{const U=Math.floor(((m?I:N)-k)/2);F+=Math.floor(A/2);let W=U;for(const Y of x){const H=Y.nodes()[0],J=s.node(H);m?(J.x=W+Math.floor(J.width/2),J.y=F):(J.x=F,J.y=W+Math.floor(J.width/2)),W+=vu+J.width}F=A+vu};_?(z(),B()):(B(),z())}}else UL(s,i,u);l.x=0,l.y=0;const v={};for(const m of s.nodes()){const _=s.node(m);l.x+=_.x||0,l.y+=_.y||0,v[m]={x:_.x,y:_.y}}const p=c?[l.x/c,l.y/c]:[0,0],g=f[0]-p[0],y=f[1]-p[1];for(const m in v)v[m].x+=g,v[m].y+=y;const b={};for(const m of s.edges()){const _=s.edge(m);if(_.points&&_.points.length>3){const x=eee(_.points);for(const C of x)C.x+=g,C.y+=y;b[`${m.v}-${m.w}`]={points:[...x],from:{x:v[m.v].x,y:v[m.v].y},to:{x:v[m.w].x,y:v[m.w].y}},b[`${m.w}-${m.v}`]={points:x.reverse(),from:{x:v[m.w].x,y:v[m.w].y},to:{x:v[m.v].x,y:v[m.v].y}}}}return{positions:v,parents:u,waypoints:b}};class ree{start(){}postMessage(e){const{nodes:t,nodeIds:n,idToPosition:i,rels:a,direction:o,packing:s,pixelRatio:u,forcedDelay:l=0}=e,c=tee(t,n,i,a,o,s,u);l?setTimeout(()=>{this.onmessage({data:c})},l):this.onmessage({data:c})}onmessage(){}close(){}}const nee={port:new ree},iee=()=>new SharedWorker(new URL("/assets/HierarchicalLayout.worker-DVl9SQVB.js",import.meta.url),{type:"module",name:"HierarchicalLayout"}),aee=Object.freeze(Object.defineProperty({__proto__:null,coseBilkentLayoutFallbackWorker:EH,createCoseBilkentLayoutWorker:OH,createHierarchicalLayoutWorker:iee,hierarchicalLayoutFallbackWorker:nee},Symbol.toStringTag,{value:"Module"})),oee="modulepreload",see=function(r){return"/"+r},zL={},qo=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(u=>{if(u=see(u),u in zL)return;zL[u]=!0;const l=u.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${c}`))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":oee,l||(f.as="script"),f.crossOrigin="",f.href=u,s&&f.setAttribute("nonce",s),document.head.appendChild(f),l)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return e().catch(a)})};var JC=function(r,e){return JC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},JC(r,e)};function Aa(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");JC(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ke=function(){return Ke=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ke.apply(this,arguments)};function tF(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function mt(r,e,t,n){function i(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function s(c){try{l(n.next(c))}catch(f){o(f)}}function u(c){try{l(n.throw(c))}catch(f){o(f)}}function l(c){c.done?a(c.value):i(c.value).then(s,u)}l((n=n.apply(r,e||[])).next())})}function bt(r,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){t.label=l[1];break}if(l[0]===6&&t.label<a[1]){t.label=a[1],a=l;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(l);break}a[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Jn(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return r.concat(a||Array.prototype.slice.call(e))}function e2(r,e,t){e.split&&(e=e.split("."));for(var n=0,i=e.length,a=r,o,s;n<i&&(s=""+e[n++],!(s==="__proto__"||s==="constructor"||s==="prototype"));)a=a[s]=n===i?t:typeof(o=a[s])==typeof e?o:e[n]*0!==0||~(""+e[n]).indexOf(".")?{}:[]}var uee=function(r,e){return Object.keys(r).filter(function(t){return e(t,r[t])}).reduce(function(t,n){return t[n]=r[n],t},{})},Cf=function(r){Aa(e,r);function e(t,n){var i=r.call(this,"".concat(t," ").concat(n))||this;return i.field=t,i}return e}(Error);function ec(r){return typeof r=="string"}function t2(r){return typeof r=="number"}function Sh(r){return typeof r=="function"}function lee(r){return r!=null}function Go(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var GT="is not a string",VT="is not an object",cee="is nil";function fee(r){if(!lee(r))throw new Cf("Event",cee);if(typeof r!="object")throw new Cf("Event",VT)}function dee(r){if(!ec(r.type))throw new Cf(".type",GT)}function hee(r){if(!ec(r.event))throw new Cf(".event",GT)}function vee(r){if(!Go(r.properties))throw new Cf(".properties",VT)}function pee(r){if(!Go(r.traits))throw new Cf(".traits",VT)}function gee(r){if(!ec(r.messageId))throw new Cf(".messageId",GT)}function yee(r){fee(r),dee(r),gee(r),r.type==="track"&&(hee(r),vee(r)),["group","identify"].includes(r.type)&&pee(r)}var mee=function(){function r(e){var t,n;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(t=e.onEventMethodCall)!==null&&t!==void 0?t:function(){},this.onFinishedEvent=(n=e.onFinishedEvent)!==null&&n!==void 0?n:function(){}}return r}(),bee=function(){function r(e){this.settings=new mee(e)}return r.prototype.track=function(e,t,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(Ke(Ke({},this.baseEvent()),{event:e,type:"track",properties:t??{},options:Ke({},n),integrations:Ke({},i)}))},r.prototype.page=function(e,t,n,i,a){var o;this.settings.onEventMethodCall({type:"page",options:i});var s={type:"page",properties:Ke({},n),options:Ke({},i),integrations:Ke({},a)};return e!==null&&(s.category=e,s.properties=(o=s.properties)!==null&&o!==void 0?o:{},s.properties.category=e),t!==null&&(s.name=t),this.normalize(Ke(Ke({},this.baseEvent()),s))},r.prototype.screen=function(e,t,n,i,a){this.settings.onEventMethodCall({type:"screen",options:i});var o={type:"screen",properties:Ke({},n),options:Ke({},i),integrations:Ke({},a)};return e!==null&&(o.category=e),t!==null&&(o.name=t),this.normalize(Ke(Ke({},this.baseEvent()),o))},r.prototype.identify=function(e,t,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(Ke(Ke({},this.baseEvent()),{type:"identify",userId:e,traits:t??{},options:Ke({},n),integrations:i}))},r.prototype.group=function(e,t,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(Ke(Ke({},this.baseEvent()),{type:"group",traits:t??{},options:Ke({},n),integrations:Ke({},i),groupId:e}))},r.prototype.alias=function(e,t,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var a={userId:e,type:"alias",options:Ke({},n),integrations:Ke({},i)};return t!==null&&(a.previousId=t),e===void 0?this.normalize(Ke(Ke({},a),this.baseEvent())):this.normalize(Ke(Ke({},this.baseEvent()),a))},r.prototype.baseEvent=function(){return{integrations:{},options:{}}},r.prototype.context=function(e){var t,n=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var i=Object.keys(e),a=(t=e.context)!==null&&t!==void 0?t:{},o={};return i.forEach(function(s){s!=="context"&&(n.includes(s)?e2(o,s,e[s]):e2(a,s,e[s]))}),[a,o]},r.prototype.normalize=function(e){var t,n,i=Object.keys((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(d,h){var v,p;return Ke(Ke({},d),(v={},v[h]=!!(!((p=e.integrations)===null||p===void 0)&&p[h]),v))},{});e.options=uee(e.options||{},function(d,h){return h!==void 0});var a=Ke(Ke({},i),(n=e.options)===null||n===void 0?void 0:n.integrations),o=e.options?this.context(e.options):[],s=o[0],u=o[1],l=e.options,c=tF(e,["options"]),f=Ke(Ke(Ke(Ke({timestamp:new Date},c),{context:s,integrations:a}),u),{messageId:l.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),yee(f),f},r}();function _ee(r,e){return new Promise(function(t,n){var i=setTimeout(function(){n(Error("Promise timed out"))},e);r.then(function(a){return clearTimeout(i),t(a)}).catch(n)})}function wee(r){return new Promise(function(e){return setTimeout(e,r)})}function xee(r,e,t){var n=function(){try{return Promise.resolve(e(r))}catch(i){return Promise.reject(i)}};return wee(t).then(function(){return _ee(n(),1e3)}).catch(function(i){r==null||r.log("warn","Callback Error",{error:i}),r==null||r.stats.increment("callback_error")}).then(function(){return r})}var rF=function(){var r,e,t=!1,n=new Promise(function(i,a){r=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t=!0,i.apply(void 0,o)},e=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];t=!0,a.apply(void 0,o)}});return{resolve:r,reject:e,promise:n,isSettled:function(){return t}}},$T=function(){function r(e){var t;this.callbacks={},this.warned=!1,this.maxListeners=(t=e==null?void 0:e.maxListeners)!==null&&t!==void 0?t:10}return r.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},r.prototype.on=function(e,t){return this.callbacks[e]?(this.callbacks[e].push(t),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[t],this},r.prototype.once=function(e,t){var n=this,i=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];n.off(e,i),t.apply(n,a)};return this.on(e,i),this},r.prototype.off=function(e,t){var n,i=(n=this.callbacks[e])!==null&&n!==void 0?n:[],a=i.filter(function(o){return o!==t});return this.callbacks[e]=a,this},r.prototype.emit=function(e){for(var t=this,n,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];var o=(n=this.callbacks[e])!==null&&n!==void 0?n:[];return o.forEach(function(s){s.apply(t,i)}),this},r}();function Eee(r){var e=Math.random()+1,t=r.minTimeout,n=t===void 0?500:t,i=r.factor,a=i===void 0?2:i,o=r.attempt,s=r.maxTimeout,u=s===void 0?1/0:s;return Math.min(e*n*Math.pow(a,o),u)}var nF="onRemoveFromFuture",WT=function(r){Aa(e,r);function e(t,n,i){var a=r.call(this)||this;return a.future=[],a.maxAttempts=t,a.queue=n,a.seen=i??{},a}return e.prototype.push=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=n.map(function(o){var s=t.updateAttempts(o);return s>t.maxAttempts||t.includes(o)?!1:(t.queue.push(o),!0)});return this.queue=this.queue.sort(function(o,s){return t.getAttempts(o)-t.getAttempts(s)}),a},e.prototype.pushWithBackoff=function(t,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(t)===0)return this.push(t)[0];var a=this.updateAttempts(t);if(a>this.maxAttempts||this.includes(t))return!1;var o=Eee({attempt:a-1});return n>0&&o<n&&(o=n),setTimeout(function(){i.queue.push(t),i.future=i.future.filter(function(s){return s.id!==t.id}),i.emit(nF)},o),this.future.push(t),!0},e.prototype.getAttempts=function(t){var n;return(n=this.seen[t.id])!==null&&n!==void 0?n:0},e.prototype.updateAttempts=function(t){return this.seen[t.id]=this.getAttempts(t)+1,this.getAttempts(t)},e.prototype.includes=function(t){return this.queue.includes(t)||this.future.includes(t)||!!this.queue.find(function(n){return n.id===t.id})||!!this.future.find(function(n){return n.id===t.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}($T),pf=256,Db=[],Ym;for(;pf--;)Db[pf]=(pf+256).toString(16).substring(1);function HT(){var r=0,e,t="";if(!Ym||pf+16>256){for(Ym=Array(r=256);r--;)Ym[r]=256*Math.random()|0;r=pf=0}for(;r<16;r++)e=Ym[pf+r],r==6?t+=Db[e&15|64]:r==8?t+=Db[e&63|128]:t+=Db[e],r&1&&r>1&&r<11&&(t+="-");return pf++,t}var Oee=function(){function r(){this._logs=[]}return r.prototype.log=function(e,t,n){var i=new Date;this._logs.push({level:e,message:t,time:i,extras:n})},Object.defineProperty(r.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),r.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(t,n){var i,a,o,s=Ke(Ke({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete s.time;var u=(o=(a=n.time)===null||a===void 0?void 0:a.toISOString())!==null&&o!==void 0?o:"";return t[u]&&(u="".concat(u,"-").concat(Math.random())),Ke(Ke({},t),(i={},i[u]=s,i))},{});console.table?console.table(e):console.log(e)}else this.logs.forEach(function(t){var n=t.level,i=t.message,a=t.extras;n==="info"||n==="debug"?console.log(i,a??""):console[n](i,a??"")});this._logs=[]},r}(),See=function(r){var e={gauge:"g",counter:"c"};return e[r]},iF=function(){function r(){this.metrics=[]}return r.prototype.increment=function(e,t,n){t===void 0&&(t=1),this.metrics.push({metric:e,value:t,tags:n??[],type:"counter",timestamp:Date.now()})},r.prototype.gauge=function(e,t,n){this.metrics.push({metric:e,value:t,tags:n??[],type:"gauge",timestamp:Date.now()})},r.prototype.flush=function(){var e=this.metrics.map(function(t){return Ke(Ke({},t),{tags:t.tags.join(",")})});console.table?console.table(e):console.log(e),this.metrics=[]},r.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:See(e.type),e:e.timestamp}})},r}(),Cee=function(r){Aa(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e}(iF),Lh=function(){function r(e){var t,n,i;this.retry=(t=e.retry)!==null&&t!==void 0?t:!0,this.type=(n=e.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=e.reason)!==null&&i!==void 0?i:""}return r}(),u0=function(){function r(e,t,n,i){t===void 0&&(t=HT()),n===void 0&&(n=new Cee),i===void 0&&(i=new Oee),this.attempts=0,this.event=e,this._id=t,this.logger=i,this.stats=n}return r.system=function(){},r.prototype.isSame=function(e){return e.id===this.id},r.prototype.cancel=function(e){throw e||new Lh({reason:"Context Cancel"})},r.prototype.log=function(e,t,n){this.logger.log(e,t,n)},Object.defineProperty(r.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),r.prototype.updateEvent=function(e,t){var n;if(e.split(".")[0]==="integrations"){var i=e.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return e2(this.event,e,t),this.event},r.prototype.failedDelivery=function(){return this._failedDelivery},r.prototype.setFailedDelivery=function(e){this._failedDelivery=e},r.prototype.logs=function(){return this.logger.logs},r.prototype.flush=function(){this.logger.flush(),this.stats.flush()},r.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},r}();function Tee(r,e){var t={};return r.forEach(function(n){var i,a=void 0;{var o=n[e];a=typeof o!="string"?JSON.stringify(o):o}a!==void 0&&(t[a]=Jn(Jn([],(i=t[a])!==null&&i!==void 0?i:[],!0),[n],!1))}),t}var Aee=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},Pee=function(){var r,e,t=0;return{done:function(){return r},run:function(n){var i=n();return Aee(i)&&(++t===1&&(r=new Promise(function(a){return e=a})),i.finally(function(){return--t===0&&e()})),i}}};function Ree(r){return mt(this,void 0,void 0,function(){var e;return bt(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function qp(r,e){r.log("debug","plugin",{plugin:e.name});var t=new Date().getTime(),n=e[r.event.type];if(n===void 0)return Promise.resolve(r);var i=Ree(function(){return n.apply(e,[r])}).then(function(a){var o=new Date().getTime()-t;return a.stats.gauge("plugin_time",o,["plugin:".concat(e.name)]),a}).catch(function(a){if(a instanceof Lh&&a.type==="middleware_cancellation")throw a;return a instanceof Lh?(r.log("warn",a.type,{plugin:e.name,error:a}),a):(r.log("error","plugin Error",{plugin:e.name,error:a}),r.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),a)});return i}function kee(r,e){return qp(r,e).then(function(t){if(t instanceof u0)return t;r.log("debug","Context canceled"),r.stats.increment("context_canceled"),r.cancel(t)})}var Iee=function(r){Aa(e,r);function e(t){var n=r.call(this)||this;return n.criticalTasks=Pee(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=t,n.queue.on(nF,function(){n.scheduleFlush(0)}),n}return e.prototype.register=function(t,n,i){return mt(this,void 0,void 0,function(){var a,o,s=this;return bt(this,function(u){switch(u.label){case 0:return this.plugins.push(n),a=function(l){s.failedInitializations.push(n.name),s.emit("initialization_failure",n),console.warn(n.name,l),t.log("warn","Failed to load destination",{plugin:n.name,error:l}),s.plugins=s.plugins.filter(function(c){return c!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(t,i).catch(a),[3,4]):[3,1];case 1:return u.trys.push([1,3,,4]),[4,n.load(t,i)];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),a(o),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,n,i){return mt(this,void 0,void 0,function(){var a;return bt(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(t,i))]:[3,2];case 1:o.sent(),o.label=2;case 2:return this.plugins=this.plugins.filter(function(s){return s.name!==n.name}),[3,4];case 3:return a=o.sent(),t.log("warn","Failed to unload destination",{plugin:n.name,error:a}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return mt(this,void 0,void 0,function(){var n;return bt(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),n=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,n]})})},e.prototype.subscribeToDelivery=function(t){return mt(this,void 0,void 0,function(){var n=this;return bt(this,function(i){return[2,new Promise(function(a){var o=function(s,u){s.isSame(t)&&(n.off("flush",o),a(s))};n.on("flush",o)})]})})},e.prototype.dispatchSingle=function(t){return mt(this,void 0,void 0,function(){var n=this;return bt(this,function(i){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(a){var o=n.enqueuRetry(a,t);return o?n.subscribeToDelivery(t):(t.setFailedDelivery({reason:a}),t)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(t){var n=this;t===void 0&&(t=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return mt(this,void 0,void 0,function(){var n,i,a,o;return bt(this,function(s){switch(s.label){case 0:return[4,this.criticalTasks.done()];case 1:s.sent(),n=Date.now(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=s.sent(),i=Date.now()-n,this.emit("delivery_success",t),t.stats.gauge("delivered",i),t.log("debug","Delivered",t.event),[2,t];case 4:throw a=s.sent(),o=a,t.log("error","Failed to deliver",o),this.emit("delivery_failure",t,o),t.stats.increment("delivery_failed"),a;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,n){var i=!(t instanceof Lh)||t.retry;return i?this.queue.pushWithBackoff(n):!1},e.prototype.flush=function(){return mt(this,void 0,void 0,function(){var t,n,i;return bt(this,function(a){switch(a.label){case 0:if(this.queue.length===0)return[2,[]];if(t=this.queue.pop(),!t)return[2,[]];t.attempts=this.queue.getAttempts(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=a.sent(),this.emit("flush",t,!0),[3,4];case 3:return n=a.sent(),i=this.enqueuRetry(n,t),i||(t.setFailedDelivery({reason:n}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var n=this.plugins.filter(function(h){var v,p,g;if(h.type!=="destination"&&h.name!=="Segment.io")return!0;var y=void 0;return(v=h.alternativeNames)===null||v===void 0||v.forEach(function(b){t[b]!==void 0&&(y=t[b])}),(g=(p=t[h.name])!==null&&p!==void 0?p:y)!==null&&g!==void 0?g:(h.name==="Segment.io"?!0:t.All)!==!1}),i=Tee(n,"type"),a=i.before,o=a===void 0?[]:a,s=i.enrichment,u=s===void 0?[]:s,l=i.destination,c=l===void 0?[]:l,f=i.after,d=f===void 0?[]:f;return{before:o,enrichment:u,destinations:c,after:d}},e.prototype.flushOne=function(t){var n,i;return mt(this,void 0,void 0,function(){var a,o,s,u,l,c,v,f,d,h,v,p,g,y,b;return bt(this,function(m){switch(m.label){case 0:if(!this.isReady())throw new Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),a=this.availableExtensions((n=t.event.integrations)!==null&&n!==void 0?n:{}),o=a.before,s=a.enrichment,u=0,l=o,m.label=1;case 1:return u<l.length?(c=l[u],[4,kee(t,c)]):[3,4];case 2:v=m.sent(),v instanceof u0&&(t=v),this.emit("message_enriched",t,c),m.label=3;case 3:return u++,[3,1];case 4:f=0,d=s,m.label=5;case 5:return f<d.length?(h=d[f],[4,qp(t,h)]):[3,8];case 6:v=m.sent(),v instanceof u0&&(t=v),this.emit("message_enriched",t,h),m.label=7;case 7:return f++,[3,5];case 8:return p=this.availableExtensions((i=t.event.integrations)!==null&&i!==void 0?i:{}),g=p.destinations,y=p.after,[4,new Promise(function(_,x){setTimeout(function(){var C=g.map(function(w){return qp(t,w)});Promise.all(C).then(_).catch(x)},0)})];case 9:return m.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),b=y.map(function(_){return qp(t,_)}),[4,Promise.all(b)];case 10:return m.sent(),[2,t]}})})},e}($T),Dee=function(r,e){var t=Date.now()-r;return Math.max((e??300)-t,0)};function Mee(r,e,t,n){return mt(this,void 0,void 0,function(){var i,a;return bt(this,function(o){switch(o.label){case 0:return t.emit("dispatch_start",r),i=Date.now(),e.isEmpty()?[4,e.dispatchSingle(r)]:[3,2];case 1:return a=o.sent(),[3,4];case 2:return[4,e.dispatch(r)];case 3:a=o.sent(),o.label=4;case 4:return n!=null&&n.callback?[4,xee(a,n.callback,Dee(i,n.timeout))]:[3,6];case 5:a=o.sent(),o.label=6;case 6:return n!=null&&n.debug&&a.flush(),[2,a]}})})}function Lee(r,e,t,n){var i,a=[r,e,t,n],o=Go(r)?r.event:r;if(!o||!ec(o))throw new Error("Event missing");var s=Go(r)?(i=r.properties)!==null&&i!==void 0?i:{}:Go(e)?e:{},u={};Sh(t)||(u=t??{}),Go(r)&&!Sh(e)&&(u=e??{});var l=a.find(Sh);return[o,s,u,l]}function qL(r,e,t,n,i){var a,o,s=null,u=null,l=[r,e,t,n,i],c=l.filter(ec);c.length===1?ec(l[1])?(u=l[1],s=null):(u=c[0],s=null):c.length===2&&(typeof l[0]=="string"&&(s=l[0]),typeof l[1]=="string"&&(u=l[1]));var f=l.find(Sh),d=l.filter(Go);return d.length===1?Go(l[2])?(o={},a=l[2]):Go(l[3])?(a={},o=l[3]):(a=d[0],o={}):d.length===2&&(a=d[0],o=d[1]),[s,u,a??(a={}),o??(o={}),f]}var GL=function(r){return function(){for(var e,t,n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];for(var o={},s=["callback","options","traits","id"],u=0,l=i;u<l.length;u++){var c=l[u],f=s.pop();if(f==="id"){if(ec(c)||t2(c)){o.id=c.toString();continue}if(c==null)continue;f=s.pop()}if((f==="traits"||f==="options")&&(c==null||Go(c))&&(o[f]=c),Sh(c)){o.callback=c;break}}return[(e=o.id)!==null&&e!==void 0?e:r.id(),(t=o.traits)!==null&&t!==void 0?t:{},(n=o.options)!==null&&n!==void 0?n:{},o.callback]}};function Nee(r,e,t,n){t2(r)&&(r=r.toString()),t2(e)&&(e=e.toString());var i=[r,e,t,n],a=i.filter(ec),o=a[0],s=o===void 0?r:o,u=a[1],l=u===void 0?null:u,c=i.filter(Go)[0],f=c===void 0?{}:c,d=i.find(Sh);return[s,l,f,d]}function YT(){return typeof window<"u"}function joe(){return!YT()}function jee(){return YT()?window.navigator.onLine:!0}function Ig(){return!jee()}function Fee(r,e){return e=e||{},new Promise(function(t,n){var i=new XMLHttpRequest,a=[],o=[],s={},u=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:u,headers:{keys:function(){return a},entries:function(){return o},get:function(c){return s[c.toLowerCase()]},has:function(c){return c.toLowerCase()in s}}}};for(var l in i.open(e.method||"get",r,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(c,f,d){a.push(f=f.toLowerCase()),o.push([f,d]),s[f]=s[f]?s[f]+","+d:d}),t(u())},i.onerror=n,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}var XT=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},r_=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=XT();return(t&&t.fetch||Fee).apply(void 0,r)},n_="1.81.1",aF="api.segment.io/v1",Bee=function(r,e,t){var n=e.reduce(function(i,a){var o=a.split(":"),s=o[0],u=o[1];return i[s]=u,i},{});return{type:"Counter",metric:r,value:1,tags:Ke(Ke({},n),{library:"analytics.js",library_version:"npm:next-".concat(n_)})}};function GS(r){console.error("Error sending segment performance metrics",r)}var Uee=function(){function r(e){var t=this,n,i,a,o,s;if(this.host=(n=e==null?void 0:e.host)!==null&&n!==void 0?n:aF,this.sampleRate=(i=e==null?void 0:e.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(a=e==null?void 0:e.flushTimer)!==null&&a!==void 0?a:30*1e3,this.maxQueueSize=(o=e==null?void 0:e.maxQueueSize)!==null&&o!==void 0?o:20,this.protocol=(s=e==null?void 0:e.protocol)!==null&&s!==void 0?s:"https",this.queue=[],this.sampleRate>0){var u=!1,l=function(){u||(u=!0,t.flush().catch(GS),u=!1,setTimeout(l,t.flushTimer))};l()}}return r.prototype.increment=function(e,t){if(e.includes("analytics_js.")&&t.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=Bee(e,t);this.queue.push(n),e.includes("error")&&this.flush().catch(GS)}},r.prototype.flush=function(){return mt(this,void 0,void 0,function(){var e=this;return bt(this,function(t){switch(t.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){GS(n),e.sampleRate=0})];case 1:return t.sent(),[2]}})})},r.prototype.send=function(){return mt(this,void 0,void 0,function(){var e,t,n;return bt(this,function(i){return e={series:this.queue},this.queue=[],t={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,r_(n,{headers:t,body:JSON.stringify(e),method:"POST"})]})})},r}(),Xm,oF=function(r){Aa(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.initRemoteMetrics=function(t){Xm=new Uee(t)},e.prototype.increment=function(t,n,i){r.prototype.increment.call(this,t,n,i),Xm==null||Xm.increment(t,i??[])},e}(iF),Ou=function(r){Aa(e,r);function e(t,n){return r.call(this,t,n,new oF)||this}return e.system=function(){return new this({type:"track",event:"system"})},e}(u0);function zee(r){return Object.prototype.toString.call(r).slice(8,-1).toLowerCase()==="object"}var sF="bpc",uF=function(r,e,t,n,i,a){return{__t:sF,c:e,p:n,u:r,s:t,t:i,r:a}},qee=Object.keys(uF("","","","","",""));function Gee(r){if(!zee(r)||r.__t!==sF)return!1;for(var e in r)if(!qee.includes(e))return!1;return!0}var Vee=function(r,e){return r.indexOf("?")>-1?r:r+e},$ee=function(r){var e=r.indexOf("#");return e===-1?r:r.slice(0,e)},Wee=function(r){try{return new URL(r).pathname}catch{return r[0]==="/"?r:"/"+r}},lF=function(r){var e=r.c,t=r.p,n=r.s,i=r.u,a=r.r,o=r.t,s=e?Wee(e):t,u=e?Vee(e,n):$ee(i);return{path:s,referrer:a,search:n,title:o,url:u}},cF=function(){var r=document.querySelector("link[rel='canonical']");return uF(location.href,r&&r.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},Hee=function(){return lF(cF())};function Yee(r,e){return Object.assign.apply(Object,Jn([{}],e.map(function(t){var n;if(r&&Object.prototype.hasOwnProperty.call(r,t))return n={},n[t]=r[t],n}),!1))}var rh=function(r,e){e===void 0&&(e=Hee());var t=r.context,n;r.type==="page"&&(n=r.properties&&Yee(r.properties,Object.keys(e)),r.properties=Ke(Ke(Ke({},e),r.properties),r.name?{name:r.name}:{})),t.page=Ke(Ke(Ke({},e),n),t.page)},Xee=function(r){Aa(e,r);function e(t){var n=r.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(HT())},onEventMethodCall:function(i){var a=i.options;n.maybeUpdateAnonId(a)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=t,n}return e.prototype.maybeUpdateAnonId=function(t){t!=null&&t.anonymousId&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(t,n,i,a,o){var s=r.prototype.track.call(this,t,n,i,a);return rh(s,o),s},e.prototype.page=function(t,n,i,a,o,s){var u=r.prototype.page.call(this,t,n,i,a,o);return rh(u,s),u},e.prototype.screen=function(t,n,i,a,o,s){var u=r.prototype.screen.call(this,t,n,i,a,o);return rh(u,s),u},e.prototype.identify=function(t,n,i,a,o){var s=r.prototype.identify.call(this,t,n,i,a);return rh(s,o),s},e.prototype.group=function(t,n,i,a,o){var s=r.prototype.group.call(this,t,n,i,a);return rh(s,o),s},e.prototype.alias=function(t,n,i,a,o){var s=r.prototype.alias.call(this,t,n,i,a);return rh(s,o),s},e}(bee),Kee=function(r){return"addMiddleware"in r&&r.type==="destination"},Ls={getItem:function(){},setItem:function(){},removeItem:function(){}};try{Ls=YT()&&window.localStorage?window.localStorage:Ls}catch(r){console.warn("Unable to access localStorage",r)}function fF(r){var e=Ls.getItem(r);return(e?JSON.parse(e):[]).map(function(t){return new Ou(t.event,t.id)})}function Zee(r,e){var t=fF(r),n=Jn(Jn([],e,!0),t,!0),i=n.reduce(function(a,o){var s;return Ke(Ke({},a),(s={},s[o.id]=o,s))},{});Ls.setItem(r,JSON.stringify(Object.values(i)))}function dF(r){var e=Ls.getItem(r);return e?JSON.parse(e):{}}function Qee(r,e){var t=dF(r);Ls.setItem(r,JSON.stringify(Ke(Ke({},t),e)))}function VL(r){Ls.removeItem(r)}var Jee=function(){return new Date().getTime()};function r2(r,e,t){t===void 0&&(t=0);var n=50,i="persisted-queue:v1:".concat(r,":lock"),a=function(l){return new Date().getTime()>l},o=Ls.getItem(i),s=o?JSON.parse(o):null,u=s===null||a(s);if(u){Ls.setItem(i,JSON.stringify(Jee()+n)),e(),Ls.removeItem(i);return}!u&&t<3?setTimeout(function(){r2(r,e,t+1)},n):console.error("Unable to retrieve lock")}var KT=function(r){Aa(e,r);function e(t,n){var i=r.call(this,t,[])||this,a="persisted-queue:v1:".concat(n,":items"),o="persisted-queue:v1:".concat(n,":seen"),s=[],u={};return r2(n,function(){try{s=fF(a),u=dF(o),VL(a),VL(o),i.queue=Jn(Jn([],s,!0),i.queue,!0),i.seen=Ke(Ke({},u),i.seen)}catch(l){console.error(l)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var l=Jn(Jn([],i.queue,!0),i.future,!0);try{r2(n,function(){Zee(a,l),Qee(o,i.seen)})}catch(c){console.error(c)}}}),i}return e}(WT),ete=function(r){Aa(e,r);function e(t){return r.call(this,typeof t=="string"?new KT(4,t):t)||this}return e.prototype.flush=function(){return mt(this,void 0,void 0,function(){return bt(this,function(t){return Ig()?[2,[]]:[2,r.prototype.flush.call(this)]})})},e}(Iee);function ZT(r){for(var e=r.constructor.prototype,t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++){var i=n[t];if(i!=="constructor"){var a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i);a&&typeof a.value=="function"&&(r[i]=r[i].bind(r))}}return r}/*! js-cookie v3.0.1 | MIT */function Km(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)r[n]=t[n]}return r}var tte={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n2(r,e){function t(i,a,o){if(!(typeof document>"u")){o=Km({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,o[u]!==!0&&(s+="="+o[u].split(";")[0]));return document.cookie=i+"="+r.write(a,i)+s}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var a=document.cookie?document.cookie.split("; "):[],o={},s=0;s<a.length;s++){var u=a[s].split("="),l=u.slice(1).join("=");try{var c=decodeURIComponent(u[0]);if(o[c]=r.read(l,c),i===c)break}catch{}}return i?o[i]:o}}return Object.create({set:t,get:n,remove:function(i,a){t(i,"",Km({},a,{expires:-1}))},withAttributes:function(i){return n2(this.converter,Km({},this.attributes,i))},withConverter:function(i){return n2(Km({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(r)}})}var mu=n2(tte,{path:"/"});function rte(r){var e=r.hostname,t=e.split("."),n=t[t.length-1],i=[];if(t.length===4&&parseInt(n,10)>0||t.length<=1)return i;for(var a=t.length-2;a>=0;--a)i.push(t.slice(a).join("."));return i}function nte(r){try{return new URL(r)}catch{return}}function hF(r){var e=nte(r);if(e)for(var t=rte(e),n=0;n<t.length;++n){var i="__tld__",a=t[n],o={domain:"."+a};try{if(mu.set(i,"1",o),mu.get(i))return mu.remove(i,o),a}catch{return}}}var ite=365,vF=function(){function r(e){e===void 0&&(e=r.defaults),this.options=Ke(Ke({},r.defaults),e)}return Object.defineProperty(r,"defaults",{get:function(){return{maxage:ite,domain:hF(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),r.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},r.prototype.get=function(e){var t;try{var n=mu.get(e);if(n==null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return null}},r.prototype.set=function(e,t){typeof t=="string"?mu.set(e,t,this.opts()):t===null?mu.remove(e,this.opts()):mu.set(e,JSON.stringify(t),this.opts())},r.prototype.remove=function(e){return mu.remove(e,this.opts())},r}(),ate=function(){function r(){}return r.prototype.localStorageWarning=function(e,t){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(t))},r.prototype.get=function(e){var t;try{var n=localStorage.getItem(e);if(n===null)return null;try{return(t=JSON.parse(n))!==null&&t!==void 0?t:null}catch{return n??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},r.prototype.set=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch{this.localStorageWarning(e,"full")}},r.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},r}(),QT=function(){function r(){this.cache={}}return r.prototype.get=function(e){var t;return(t=this.cache[e])!==null&&t!==void 0?t:null},r.prototype.set=function(e,t){this.cache[e]=t},r.prototype.remove=function(e){delete this.cache[e]},r}(),Oa={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function pF(r){return r&&r.stores&&Array.isArray(r.stores)&&r.stores.every(function(e){return Object.values(Oa).includes(e)})}function ote(r){return typeof r=="object"&&r.name!==void 0}var VS=function(r,e,t,n){console.warn("".concat(r.constructor.name,": Can't ").concat(e,' key "').concat(t,'" | Err: ').concat(n))},gf=function(){function r(e){this.stores=e}return r.prototype.get=function(e){for(var t=null,n=0,i=this.stores;n<i.length;n++){var a=i[n];try{if(t=a.get(e),t!=null)return t}catch(o){VS(a,"get",e,o)}}return null},r.prototype.set=function(e,t){this.stores.forEach(function(n){try{n.set(e,t)}catch(i){VS(n,"set",e,i)}})},r.prototype.clear=function(e){this.stores.forEach(function(t){try{t.remove(e)}catch(n){VS(t,"remove",e,n)}})},r.prototype.getAndSync=function(e){var t=this.get(e),n=typeof t=="number"?t.toString():t;return this.set(e,n),n},r}();function i2(r){var e=r.map(function(t){var n,i;switch(ote(t)?(n=t.name,i=t.settings):n=t,n){case Oa.Cookie:return new vF(i);case Oa.LocalStorage:return new ate;case Oa.Memory:return new QT;default:throw new Error("Unknown Store Type: ".concat(t))}});return e}function gF(r,e){return r.map(function(t){return e&&t===Oa.Cookie?{name:t,settings:e}:t})}var rf={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},yF=function(){function r(e,t){e===void 0&&(e=rf);var n=this,i,a,o,s;this.options={},this.id=function(l){if(n.options.disable)return null;var c=n.identityStore.getAndSync(n.idKey);if(l!==void 0){n.identityStore.set(n.idKey,l);var f=l!==c&&c!==null&&l!==null;f&&n.anonymousId(null)}var d=n.identityStore.getAndSync(n.idKey);if(d)return d;var h=n.legacyUserStore.get(rf.cookie.oldKey);return h?typeof h=="object"?h.id:h:null},this.anonymousId=function(l){var c,f;if(n.options.disable)return null;if(l===void 0){var d=(c=n.identityStore.getAndSync(n.anonKey))!==null&&c!==void 0?c:(f=n.legacySIO())===null||f===void 0?void 0:f[0];if(d)return d}return l===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,l??HT()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(l){var c;if(!n.options.disable)return l===null&&(l={}),l&&n.traitsStore.set(n.traitsKey,l??{}),(c=n.traitsStore.get(n.traitsKey))!==null&&c!==void 0?c:{}},this.options=Ke(Ke({},rf),e),this.cookieOptions=t,this.idKey=(a=(i=e.cookie)===null||i===void 0?void 0:i.key)!==null&&a!==void 0?a:rf.cookie.key,this.traitsKey=(s=(o=e.localStorage)===null||o===void 0?void 0:o.key)!==null&&s!==void 0?s:rf.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,t),this.legacyUserStore=this.createStorage(this.options,t,function(l){return l===Oa.Cookie}),this.traitsStore=this.createStorage(this.options,t,function(l){return l!==Oa.Cookie});var u=this.legacyUserStore.get(rf.cookie.oldKey);u&&typeof u=="object"&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),ZT(this)}return r.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var t=e.split("----"),n=t[0],i=t[1];return[n,i]},r.prototype.identify=function(e,t){if(!this.options.disable){t=t??{};var n=this.id();(n===null||n===e)&&(t=Ke(Ke({},this.traits()),t)),e&&this.id(e),this.traits(t)}},r.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},r.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},r.prototype.load=function(){return new r(this.options,this.cookieOptions)},r.prototype.save=function(){return!0},r.prototype.createStorage=function(e,t,n){var i=[Oa.LocalStorage,Oa.Cookie,Oa.Memory];return e.disable?new gf([]):e.persist?(e.storage!==void 0&&e.storage!==null&&pF(e.storage)&&(i=e.storage.stores),e.localStorageFallbackDisabled&&(i=i.filter(function(a){return a!==Oa.LocalStorage})),n&&(i=i.filter(n)),new gf(i2(gF(i,t)))):new gf([new QT])},r.defaults=rf,r}(),$L={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},ste=function(r){Aa(e,r);function e(t,n){t===void 0&&(t=$L);var i=r.call(this,Ke(Ke({},$L),t),n)||this;return i.anonymousId=function(a){},ZT(i),i}return e}(yF),JT="analytics";function mF(){return window[JT]}function ute(r){JT=r}function lte(r){window[JT]=r}var cte=function(r){return typeof r=="object"&&r!==null&&"then"in r&&typeof r.then=="function"},bF=function(r,e,t){t.getAndRemove(r).forEach(function(n){i_(e,n).catch(console.error)})},fte=function(r,e){return mt(void 0,void 0,void 0,function(){var t,n,i;return bt(this,function(a){switch(a.label){case 0:t=0,n=e.getAndRemove("addSourceMiddleware"),a.label=1;case 1:return t<n.length?(i=n[t],[4,i_(r,i).catch(console.error)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},dte=function(r,e){return mt(void 0,void 0,void 0,function(){var t,n,i;return bt(this,function(a){switch(a.label){case 0:t=0,n=e.getAndRemove("register"),a.label=1;case 1:return t<n.length?(i=n[t],[4,i_(r,i).catch(console.error)]):[3,4];case 2:a.sent(),a.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},hte=bF.bind(void 0,"on"),vte=bF.bind(void 0,"setAnonymousId"),pte=function(r,e){Object.keys(e.calls).forEach(function(t){e.getAndRemove(t).forEach(function(n){setTimeout(function(){i_(r,n).catch(console.error)},0)})})},nh=function(r){if(_F(r)){var e=r.pop();return lF(e)}},_F=function(r){var e=r[r.length-1];return Gee(e)},a2=function(){function r(e,t,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=e,this.resolve=n,this.reject=i,this.called=!1,this.args=t}return r}(),gte=function(){function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(r.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),r.prototype.get=function(e){var t;return(t=this.calls[e])!==null&&t!==void 0?t:[]},r.prototype.getAndRemove=function(e){var t=this.get(e);return this.calls[e]=[],t},r.prototype.add=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach(function(i){var a=["track","screen","alias","group","page","identify"];a.includes(i.method)&&!_F(i.args)&&(i.args=Jn(Jn([],i.args,!0),[cF()],!1)),e.calls[i.method]?e.calls[i.method].push(i):e.calls[i.method]=[i]})},r.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},r.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},r.prototype._pushSnippetWindowBuffer=function(){},r}();function i_(r,e){return mt(this,void 0,void 0,function(){var t,n;return bt(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,t=r[e.method].apply(r,e.args),cte(t)?[4,t]:[3,2]);case 1:i.sent(),i.label=2;case 2:return e.resolve(t),[3,4];case 3:return n=i.sent(),e.reject(n),[3,4];case 4:return[2]}})})}var yte=function(){function r(e){var t=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=n_,this._preInitBuffer=new gte,this._promise=e(this._preInitBuffer),this._promise.then(function(n){var i=n[0],a=n[1];t.instance=i,t.ctx=a}).catch(function(){})}return r.prototype.then=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).then.apply(e,t)},r.prototype.catch=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).catch.apply(e,t)},r.prototype.finally=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._promise).finally.apply(e,t)},r.prototype._createMethod=function(e){var t=this;return function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(t.instance){var o=(n=t.instance)[e].apply(n,i);return Promise.resolve(o)}return new Promise(function(s,u){t._preInitBuffer.add(new a2(e,i,s,u))})}},r.prototype._createChainableMethod=function(e){var t=this;return function(){for(var n,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return t.instance?((n=t.instance)[e].apply(n,i),t):(t._preInitBuffer.add(new a2(e,i)),t)}},r}(),Tl={},qs={},eA={},wF={exports:{}};(function(r){r.exports=e(t),r.exports.find=r.exports,r.exports.replace=function(s,u,l,c){return e(i).call(this,s,u,l,c),s},r.exports.del=function(s,u,l){return e(n).call(this,s,u,null,l),s};function e(s){return function(u,l,c,f){var d=f&&o(f.normalizer)?f.normalizer:a;l=d(l);for(var h,v=!1;!v;)p();function p(){for(h in u){var g=d(h);if(l.indexOf(g)===0){var y=l.substr(g.length);if(y.charAt(0)==="."||y.length===0){l=y.substr(1);var b=u[h];if(b==null){v=!0;return}if(!l.length){v=!0;return}u=b;return}}}h=void 0,v=!0}if(h)return u==null?u:s(u,h,c)}}function t(s,u){if(s.hasOwnProperty(u))return s[u]}function n(s,u){return s.hasOwnProperty(u)&&delete s[u],s}function i(s,u,l){return s.hasOwnProperty(u)&&(s[u]=l),s}function a(s){return s.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function o(s){return typeof s=="function"}})(wF);var a_=wF.exports,mte=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(eA,"__esModule",{value:!0});var bl=mte(a_);function ih(r,e){return function(){var t=this.traits(),n=this.properties?this.properties():{};return bl.default(t,"address."+r)||bl.default(t,r)||(e?bl.default(t,"address."+e):null)||(e?bl.default(t,e):null)||bl.default(n,"address."+r)||bl.default(n,r)||(e?bl.default(n,"address."+e):null)||(e?bl.default(n,e):null)}}function bte(r){r.zip=ih("postalCode","zip"),r.country=ih("country"),r.street=ih("street"),r.state=ih("state"),r.city=ih("city"),r.region=ih("region")}eA.default=bte;var o_={};Object.defineProperty(o_,"__esModule",{value:!0});o_.clone=void 0;function o2(r){if(typeof r!="object")return r;if(Object.prototype.toString.call(r)==="[object Object]"){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=o2(r[t]));return e}else return Array.isArray(r)?r.map(o2):r}o_.clone=o2;var tA={};Object.defineProperty(tA,"__esModule",{value:!0});var _te={Salesforce:!0};function wte(r){return!_te[r]}tA.default=wte;var s_={},xF=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;s_.parse=function(r){var e=[1,5,6,7,11,12],t=xF.exec(r),n=0;if(!t)return new Date(r);for(var i=0,a;a=e[i];i++)t[a]=parseInt(t[a],10)||0;t[2]=parseInt(t[2],10)||1,t[3]=parseInt(t[3],10)||1,t[2]--,t[8]=t[8]?(t[8]+"00").substring(0,3):0,t[4]===" "?n=new Date().getTimezoneOffset():t[9]!=="Z"&&t[10]&&(n=t[11]*60+t[12],t[10]==="+"&&(n=0-n));var o=Date.UTC(t[1],t[2],t[3],t[5],t[6]+n,t[7],t[8]);return new Date(o)};s_.is=function(r,e){return typeof r!="string"||e&&/^\d{4}-\d{2}-\d{2}/.test(r)===!1?!1:xF.test(r)};var rA={},xte=/\d{13}/;rA.is=function(r){return xte.test(r)};rA.parse=function(r){return r=parseInt(r,10),new Date(r)};var nA={},Ete=/\d{10}/;nA.is=function(r){return Ete.test(r)};nA.parse=function(r){var e=parseInt(r,10)*1e3;return new Date(e)};var WL=s_,HL=rA,YL=nA,Ote=Object.prototype,EF=Ote.toString;function Ste(r){return EF.call(r)==="[object Date]"}function Cte(r){return EF.call(r)==="[object Number]"}var iA=function(e){return Ste(e)?e:Cte(e)?new Date(Tte(e)):WL.is(e)?WL.parse(e):HL.is(e)?HL.parse(e):YL.is(e)?YL.parse(e):new Date(e)};function Tte(r){return r<315576e5?r*1e3:r}var XL=s_,Ate=aA;function aA(r,e){return e===void 0&&(e=!0),r&&typeof r=="object"?Pte(r,e):Array.isArray(r)?Rte(r,e):XL.is(r,e)?XL.parse(r):r}function Pte(r,e){return Object.keys(r).forEach(function(t){r[t]=aA(r[t],e)}),r}function Rte(r,e){return r.forEach(function(t,n){r[n]=aA(t,e)}),r}var ny=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qs,"__esModule",{value:!0});qs.Facade=void 0;var kte=ny(eA),Nh=o_,Ite=ny(tA),Dte=ny(iA),s2=ny(a_),Mte=ny(Ate);function Ya(r,e){e=e||{},this.raw=Nh.clone(r),"clone"in e||(e.clone=!0),e.clone&&(r=Nh.clone(r)),"traverse"in e||(e.traverse=!0),"timestamp"in r?r.timestamp=Dte.default(r.timestamp):r.timestamp=new Date,e.traverse&&Mte.default(r),this.opts=e,this.obj=r}qs.Facade=Ya;var gn=Ya.prototype;gn.proxy=function(r){var e=r.split(".");r=e.shift();var t=this[r]||this.obj[r];return t&&(typeof t=="function"&&(t=t.call(this)||{}),e.length===0?this.opts.clone?u2(t):t:(t=s2.default(t,e.join(".")),this.opts.clone?u2(t):t))};gn.field=function(r){var e=this.obj[r];return this.opts.clone?u2(e):e};Ya.proxy=function(r){return function(){return this.proxy(r)}};Ya.field=function(r){return function(){return this.field(r)}};Ya.multi=function(r){return function(){var e=this.proxy(r+"s");if(Array.isArray(e))return e;var t=this.proxy(r);return t&&(t=[this.opts.clone?Nh.clone(t):t]),t||[]}};Ya.one=function(r){return function(){var e=this.proxy(r);if(e)return e;var t=this.proxy(r+"s");if(Array.isArray(t))return t[0]}};gn.json=function(){var r=this.opts.clone?Nh.clone(this.obj):this.obj;return this.type&&(r.type=this.type()),r};gn.rawEvent=function(){return this.raw};gn.options=function(r){var e=this.obj.options||this.obj.context||{},t=this.opts.clone?Nh.clone(e):e;if(!r)return t;if(this.enabled(r)){var n=this.integrations(),i=n[r]||s2.default(n,r);return typeof i!="object"&&(i=s2.default(this.options(),r)),typeof i=="object"?i:{}}};gn.context=gn.options;gn.enabled=function(r){var e=this.proxy("options.providers.all");typeof e!="boolean"&&(e=this.proxy("options.all")),typeof e!="boolean"&&(e=this.proxy("integrations.all")),typeof e!="boolean"&&(e=!0);var t=e&&Ite.default(r),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(r)&&(t=n.providers[r]),n.hasOwnProperty(r)){var i=n[r];typeof i=="boolean"?t=i:t=!0}return!!t};gn.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};gn.active=function(){var r=this.proxy("options.active");return r==null&&(r=!0),r};gn.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};gn.sessionId=gn.anonymousId;gn.groupId=Ya.proxy("options.groupId");gn.traits=function(r){var e=this.proxy("options.traits")||{},t=this.userId();r=r||{},t&&(e.id=t);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=this[n]==null?this.proxy("options.traits."+n):this[n]();if(i==null)continue;e[r[n]]=i,delete e[n]}return e};gn.library=function(){var r=this.proxy("options.library");return r?typeof r=="string"?{name:r,version:null}:r:{name:"unknown",version:null}};gn.device=function(){var r=this.proxy("context.device");(typeof r!="object"||r===null)&&(r={});var e=this.library().name;return r.type||(e.indexOf("ios")>-1&&(r.type="ios"),e.indexOf("android")>-1&&(r.type="android")),r};gn.userAgent=Ya.proxy("context.userAgent");gn.timezone=Ya.proxy("context.timezone");gn.timestamp=Ya.field("timestamp");gn.channel=Ya.field("channel");gn.ip=Ya.proxy("context.ip");gn.userId=Ya.field("userId");kte.default(gn);function u2(r){return Nh.clone(r)}var u_={},l2={exports:{}};typeof Object.create=="function"?l2.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:l2.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Uf=l2.exports,Lte=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(u_,"__esModule",{value:!0});u_.Alias=void 0;var Nte=Lte(Uf),OF=qs;function Ko(r,e){OF.Facade.call(this,r,e)}u_.Alias=Ko;Nte.default(Ko,OF.Facade);Ko.prototype.action=function(){return"alias"};Ko.prototype.type=Ko.prototype.action;Ko.prototype.previousId=function(){return this.field("previousId")||this.field("from")};Ko.prototype.from=Ko.prototype.previousId;Ko.prototype.userId=function(){return this.field("userId")||this.field("to")};Ko.prototype.to=Ko.prototype.userId;var l_={},Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});var jte=/.+\@.+\..+/;function Fte(r){return jte.test(r)}Zh.default=Fte;var oA=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(l_,"__esModule",{value:!0});l_.Group=void 0;var Bte=oA(Uf),Ute=oA(Zh),zte=oA(iA),Qh=qs;function sA(r,e){Qh.Facade.call(this,r,e)}l_.Group=sA;Bte.default(sA,Qh.Facade);var Zo=sA.prototype;Zo.action=function(){return"group"};Zo.type=Zo.action;Zo.groupId=Qh.Facade.field("groupId");Zo.created=function(){var r=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(r)return zte.default(r)};Zo.email=function(){var r=this.proxy("traits.email");if(r)return r;var e=this.groupId();if(Ute.default(e))return e};Zo.traits=function(r){var e=this.properties(),t=this.groupId();r=r||{},t&&(e.id=t);for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)){var i=this[n]==null?this.proxy("traits."+n):this[n]();if(i==null)continue;e[r[n]]=i,delete e[n]}return e};Zo.name=Qh.Facade.proxy("traits.name");Zo.industry=Qh.Facade.proxy("traits.industry");Zo.employees=Qh.Facade.proxy("traits.employees");Zo.properties=function(){return this.field("traits")||this.field("properties")||{}};var iy={},c_=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(iy,"__esModule",{value:!0});iy.Identify=void 0;var Gs=qs,Ch=c_(a_),qte=c_(Uf),Gte=c_(Zh),SF=c_(iA),yf=function(r){return r.trim()};function uA(r,e){Gs.Facade.call(this,r,e)}iy.Identify=uA;qte.default(uA,Gs.Facade);var yn=uA.prototype;yn.action=function(){return"identify"};yn.type=yn.action;yn.traits=function(r){var e=this.field("traits")||{},t=this.userId();r=r||{},t&&(e.id=t);for(var n in r){var i=this[n]==null?this.proxy("traits."+n):this[n]();i!=null&&(e[r[n]]=i,n!==r[n]&&delete e[n])}return e};yn.email=function(){var r=this.proxy("traits.email");if(r)return r;var e=this.userId();if(Gte.default(e))return e};yn.created=function(){var r=this.proxy("traits.created")||this.proxy("traits.createdAt");if(r)return SF.default(r)};yn.companyCreated=function(){var r=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(r)return SF.default(r)};yn.companyName=function(){return this.proxy("traits.company.name")};yn.name=function(){var r=this.proxy("traits.name");if(typeof r=="string")return yf(r);var e=this.firstName(),t=this.lastName();if(e&&t)return yf(e+" "+t)};yn.firstName=function(){var r=this.proxy("traits.firstName");if(typeof r=="string")return yf(r);var e=this.proxy("traits.name");if(typeof e=="string")return yf(e).split(" ")[0]};yn.lastName=function(){var r=this.proxy("traits.lastName");if(typeof r=="string")return yf(r);var e=this.proxy("traits.name");if(typeof e=="string"){var t=yf(e).indexOf(" ");if(t!==-1)return yf(e.substr(t+1))}};yn.uid=function(){return this.userId()||this.username()||this.email()};yn.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};yn.age=function(){var r=this.birthday(),e=Ch.default(this.traits(),"age");if(e!=null)return e;if(r instanceof Date){var t=new Date;return t.getFullYear()-r.getFullYear()}};yn.avatar=function(){var r=this.traits();return Ch.default(r,"avatar")||Ch.default(r,"photoUrl")||Ch.default(r,"avatarUrl")};yn.position=function(){var r=this.traits();return Ch.default(r,"position")||Ch.default(r,"jobTitle")};yn.username=Gs.Facade.proxy("traits.username");yn.website=Gs.Facade.one("traits.website");yn.websites=Gs.Facade.multi("traits.website");yn.phone=Gs.Facade.one("traits.phone");yn.phones=Gs.Facade.multi("traits.phone");yn.address=Gs.Facade.proxy("traits.address");yn.gender=Gs.Facade.proxy("traits.gender");yn.birthday=Gs.Facade.proxy("traits.birthday");var Jh={},lA=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.Track=void 0;var Vte=lA(Uf),gi=qs,$te=iy,Wte=lA(Zh),CF=lA(a_);function cA(r,e){gi.Facade.call(this,r,e)}Jh.Track=cA;Vte.default(cA,gi.Facade);var nr=cA.prototype;nr.action=function(){return"track"};nr.type=nr.action;nr.event=gi.Facade.field("event");nr.value=gi.Facade.proxy("properties.value");nr.category=gi.Facade.proxy("properties.category");nr.id=gi.Facade.proxy("properties.id");nr.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};nr.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};nr.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};nr.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};nr.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};nr.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};nr.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};nr.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};nr.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};nr.sku=gi.Facade.proxy("properties.sku");nr.tax=gi.Facade.proxy("properties.tax");nr.name=gi.Facade.proxy("properties.name");nr.price=gi.Facade.proxy("properties.price");nr.total=gi.Facade.proxy("properties.total");nr.repeat=gi.Facade.proxy("properties.repeat");nr.coupon=gi.Facade.proxy("properties.coupon");nr.shipping=gi.Facade.proxy("properties.shipping");nr.discount=gi.Facade.proxy("properties.discount");nr.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};nr.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};nr.description=gi.Facade.proxy("properties.description");nr.plan=gi.Facade.proxy("properties.plan");nr.subtotal=function(){var r=CF.default(this.properties(),"subtotal"),e=this.total()||this.revenue();if(r)return r;if(!e)return 0;if(this.total()){var t=this.tax();t&&(e-=t),t=this.shipping(),t&&(e-=t),t=this.discount(),t&&(e+=t)}return e};nr.products=function(){var r=this.properties(),e=CF.default(r,"products");return Array.isArray(e)?e.filter(function(t){return t!==null}):[]};nr.quantity=function(){var r=this.obj.properties||{};return r.quantity||1};nr.currency=function(){var r=this.obj.properties||{};return r.currency||"USD"};nr.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};nr.query=gi.Facade.proxy("options.query");nr.properties=function(r){var e=this.field("properties")||{};r=r||{};for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=this[t]==null?this.proxy("properties."+t):this[t]();if(n==null)continue;e[r[t]]=n,delete e[t]}return e};nr.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};nr.email=function(){var r=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(r)return r;var e=this.userId();if(Wte.default(e))return e};nr.revenue=function(){var r=this.proxy("properties.revenue"),e=this.event(),t=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!r&&e&&e.match(t)&&(r=this.proxy("properties.total")),Hte(r)};nr.cents=function(){var r=this.revenue();return typeof r!="number"?this.value()||0:r*100};nr.identify=function(){var r=this.json();return r.traits=this.traits(),new $te.Identify(r,this.opts)};function Hte(r){if(r){if(typeof r=="number")return r;if(typeof r=="string"&&(r=r.replace(/\$/g,""),r=parseFloat(r),!isNaN(r)))return r}}var ay={},TF=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ay,"__esModule",{value:!0});ay.Page=void 0;var Yte=TF(Uf),zf=qs,Xte=Jh,Kte=TF(Zh);function fA(r,e){zf.Facade.call(this,r,e)}ay.Page=fA;Yte.default(fA,zf.Facade);var Ta=fA.prototype;Ta.action=function(){return"page"};Ta.type=Ta.action;Ta.category=zf.Facade.field("category");Ta.name=zf.Facade.field("name");Ta.title=zf.Facade.proxy("properties.title");Ta.path=zf.Facade.proxy("properties.path");Ta.url=zf.Facade.proxy("properties.url");Ta.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};Ta.properties=function(r){var e=this.field("properties")||{},t=this.category(),n=this.name();r=r||{},t&&(e.category=t),n&&(e.name=n);for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){var a=this[i]==null?this.proxy("properties."+i):this[i]();if(a==null)continue;e[r[i]]=a,i!==r[i]&&delete e[i]}return e};Ta.email=function(){var r=this.proxy("context.traits.email")||this.proxy("properties.email");if(r)return r;var e=this.userId();if(Kte.default(e))return e};Ta.fullName=function(){var r=this.category(),e=this.name();return e&&r?r+" "+e:e};Ta.event=function(r){return r?"Viewed "+r+" Page":"Loaded a Page"};Ta.track=function(r){var e=this.json();return e.event=this.event(r),e.timestamp=this.timestamp(),e.properties=this.properties(),new Xte.Track(e,this.opts)};var f_={},Zte=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(f_,"__esModule",{value:!0});f_.Screen=void 0;var Qte=Zte(Uf),AF=ay,Jte=Jh;function Tf(r,e){AF.Page.call(this,r,e)}f_.Screen=Tf;Qte.default(Tf,AF.Page);Tf.prototype.action=function(){return"screen"};Tf.prototype.type=Tf.prototype.action;Tf.prototype.event=function(r){return r?"Viewed "+r+" Screen":"Loaded a Screen"};Tf.prototype.track=function(r){var e=this.json();return e.event=this.event(r),e.timestamp=this.timestamp(),e.properties=this.properties(),new Jte.Track(e,this.opts)};var d_={},ere=Lr&&Lr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(d_,"__esModule",{value:!0});d_.Delete=void 0;var tre=ere(Uf),PF=qs;function dA(r,e){PF.Facade.call(this,r,e)}d_.Delete=dA;tre.default(dA,PF.Facade);dA.prototype.type=function(){return"delete"};(function(r){var e=Lr&&Lr.__assign||function(){return e=Object.assign||function(c){for(var f,d=1,h=arguments.length;d<h;d++){f=arguments[d];for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v])}return c},e.apply(this,arguments)};Object.defineProperty(r,"__esModule",{value:!0}),r.Delete=r.Screen=r.Page=r.Track=r.Identify=r.Group=r.Alias=r.Facade=void 0;var t=qs;Object.defineProperty(r,"Facade",{enumerable:!0,get:function(){return t.Facade}});var n=u_;Object.defineProperty(r,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=l_;Object.defineProperty(r,"Group",{enumerable:!0,get:function(){return i.Group}});var a=iy;Object.defineProperty(r,"Identify",{enumerable:!0,get:function(){return a.Identify}});var o=Jh;Object.defineProperty(r,"Track",{enumerable:!0,get:function(){return o.Track}});var s=ay;Object.defineProperty(r,"Page",{enumerable:!0,get:function(){return s.Page}});var u=f_;Object.defineProperty(r,"Screen",{enumerable:!0,get:function(){return u.Screen}});var l=d_;Object.defineProperty(r,"Delete",{enumerable:!0,get:function(){return l.Delete}}),r.default=e(e({},t.Facade),{Alias:n.Alias,Group:i.Group,Identify:a.Identify,Track:o.Track,Page:s.Page,Screen:u.Screen,Delete:l.Delete})})(Tl);function l0(r,e){var t=new Tl.Facade(r,e);return r.type==="track"&&(t=new Tl.Track(r,e)),r.type==="identify"&&(t=new Tl.Identify(r,e)),r.type==="page"&&(t=new Tl.Page(r,e)),r.type==="alias"&&(t=new Tl.Alias(r,e)),r.type==="group"&&(t=new Tl.Group(r,e)),r.type==="screen"&&(t=new Tl.Screen(r,e)),Object.defineProperty(t,"obj",{value:r,writable:!0}),t}var rre=function(r){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,r(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;r(e)})},RF=function(r){Aa(e,r);function e(t,n){var i=r.call(this,t)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return e}(Error),kF=function(r){return Ke({"Content-Type":"text/plain"},typeof r=="function"?r():r)},nre=500,ire=64;function hA(r){var e=encodeURI(JSON.stringify(r)).split(/%..|./).length-1;return e/1024}function are(r){return hA(r)>=nre-50}function ore(r){return hA(r)>=ire-10}function sre(r){var e=[],t=0;return r.forEach(function(n){var i=hA(e[t]);i>=64&&t++,e[t]?e[t].push(n):e[t]=[n]}),e}function ure(r,e){var t,n,i=[],a=!1,o=(t=e==null?void 0:e.size)!==null&&t!==void 0?t:10,s=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:5e3,u=0;function l(v){var p;if(v.length!==0){var g=(p=v[0])===null||p===void 0?void 0:p.writeKey,y=v.map(function(b){var m=b;m.sentAt;var _=tF(m,["sentAt"]);return _});return r_("https://".concat(r,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||a,headers:kF(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:g,batch:y,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(b){var m;if(b.status>=500)throw new Error("Bad response from server: ".concat(b.status));if(b.status===429){var _=(m=b.headers)===null||m===void 0?void 0:m.get("x-ratelimit-reset"),x=typeof _=="string"?parseInt(_)*1e3:s;throw new RF("Rate limit exceeded: ".concat(b.status),x)}})}}function c(v){var p;return v===void 0&&(v=1),mt(this,void 0,void 0,function(){var g;return bt(this,function(y){return i.length?(g=i,i=[],[2,(p=l(g))===null||p===void 0?void 0:p.catch(function(b){var m,_=Ou.system();_.log("error","Error sending batch",b),v<=((m=e==null?void 0:e.maxRetries)!==null&&m!==void 0?m:10)&&(b.name==="RateLimitError"&&(u=b.retryTimeout),i.push.apply(i,g),i.map(function(x){if("_metadata"in x){var C=x;C._metadata=Ke(Ke({},C._metadata),{retryCount:v})}}),d(v+1))})]):[2]})})}var f;function d(v){v===void 0&&(v=1),!f&&(f=setTimeout(function(){f=void 0,c(v).catch(console.error)},u||s),u=0)}rre(function(v){if(a=v,a&&i.length){var p=sre(i).map(l);Promise.all(p).catch(console.error)}});function h(v,p){return mt(this,void 0,void 0,function(){var g;return bt(this,function(y){return i.push(p),g=i.length>=o||are(i)||(e==null?void 0:e.keepalive)&&ore(i),[2,g||a?c():d()]})})}return{dispatch:h}}function lre(r){function e(t,n){return r_(t,{credentials:r==null?void 0:r.credentials,keepalive:r==null?void 0:r.keepalive,headers:kF(r==null?void 0:r.headers),method:"post",body:JSON.stringify(n),priority:r==null?void 0:r.priority}).then(function(i){var a;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var o=(a=i.headers)===null||a===void 0?void 0:a.get("x-ratelimit-reset"),s=o?parseInt(o)*1e3:5e3;throw new RF("Rate limit exceeded: ".concat(i.status),s)}})}return{dispatch:e}}function cre(r,e,t,n,i){var a,o=r.user();delete e.options,e.writeKey=t==null?void 0:t.apiKey,e.userId=e.userId||o.id(),e.anonymousId=e.anonymousId||o.anonymousId(),e.sentAt=new Date;var s=r.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s}),i!=null&&(i.attempts>1&&(e._metadata=Ke(Ke({},e._metadata),{retryCount:i.attempts})),i.attempts++);var u=[],l=[];for(var c in n){var f=n[c];c==="Segment.io"&&u.push(c),f.bundlingStatus==="bundled"&&u.push(c),f.bundlingStatus==="unbundled"&&l.push(c)}for(var d=0,h=(t==null?void 0:t.unbundledIntegrations)||[];d<h.length;d++){var v=h[d];l.includes(v)||l.push(v)}var p=(a=t==null?void 0:t.maybeBundledConfigIds)!==null&&a!==void 0?a:{},g=[];return u.sort().forEach(function(y){var b;((b=p[y])!==null&&b!==void 0?b:[]).forEach(function(m){g.push(m)})}),(t==null?void 0:t.addBundledMetadata)!==!1&&(e._metadata=Ke(Ke({},e._metadata),{bundled:u.sort(),unbundled:l.sort(),bundledIds:g})),e}var fre=function(r,e){return mt(void 0,void 0,void 0,function(){var t;return bt(this,function(n){return t=function(i){return mt(void 0,void 0,void 0,function(){var a;return bt(this,function(o){switch(o.label){case 0:return r(i)?(a=t,[4,e()]):[3,2];case 1:return[2,a.apply(void 0,[o.sent()])];case 2:return[2]}})})},[2,t(void 0)]})})};function dre(r,e){return mt(this,void 0,void 0,function(){var t,n=this;return bt(this,function(i){switch(i.label){case 0:return t=[],Ig()?[2,e]:[4,fre(function(){return e.length>0&&!Ig()},function(){return mt(n,void 0,void 0,function(){var a,o,s;return bt(this,function(u){switch(u.label){case 0:return a=e.pop(),a?[4,qp(a,r)]:[2];case 1:return o=u.sent(),s=o instanceof Ou,s||t.push(a),[2]}})})})];case 1:return i.sent(),t.map(function(a){return e.pushWithBackoff(a)}),[2,e]}})})}function ah(r,e,t,n){var i=this;r||setTimeout(function(){return mt(i,void 0,void 0,function(){var a,o;return bt(this,function(s){switch(s.label){case 0:return a=!0,[4,dre(t,e)];case 1:return o=s.sent(),a=!1,e.todo>0&&n(a,o,t,n),[2]}})})},Math.random()*5e3)}function hre(r,e){var t,n,i,a,o=r.user();return e.previousId=(i=(n=(t=e.previousId)!==null&&t!==void 0?t:e.from)!==null&&n!==void 0?n:o.id())!==null&&i!==void 0?i:o.anonymousId(),e.userId=(a=e.userId)!==null&&a!==void 0?a:e.to,delete e.from,delete e.to,e}var vre=function(r){return r.name==="Segment.io"};function pre(r,e,t){var n,i,a;window.addEventListener("pagehide",function(){s.push.apply(s,Array.from(u)),u.clear()});var o=(n=e==null?void 0:e.apiKey)!==null&&n!==void 0?n:"",s=r.options.disableClientPersistence?new WT(r.queue.queue.maxAttempts,[]):new KT(r.queue.queue.maxAttempts,"".concat(o,":dest-Segment.io")),u=new Set,l=!1,c=(i=e==null?void 0:e.apiHost)!==null&&i!==void 0?i:aF,f=(a=e==null?void 0:e.protocol)!==null&&a!==void 0?a:"https",d="".concat(f,"://").concat(c),h=e==null?void 0:e.deliveryStrategy,v=h&&"strategy"in h&&h.strategy==="batching"?ure(c,h.config):lre(h==null?void 0:h.config);function p(y){return mt(this,void 0,void 0,function(){var b,m;return bt(this,function(_){return Ig()?(s.push(y),ah(l,s,g,ah),[2,y]):(u.add(y),b=y.event.type.charAt(0),m=l0(y.event).json(),y.event.type==="track"&&delete m.traits,y.event.type==="alias"&&(m=hre(r,m)),s.getAttempts(y)>=s.maxAttempts?(u.delete(y),[2,y]):[2,v.dispatch("".concat(d,"/").concat(b),cre(r,m,e,t,y)).then(function(){return y}).catch(function(x){if(y.log("error","Error sending event",x),x.name==="RateLimitError"){var C=x.retryTimeout;s.pushWithBackoff(y,C)}else s.pushWithBackoff(y);return ah(l,s,g,ah),y}).finally(function(){u.delete(y)})])})})}var g={metadata:{writeKey:o,apiHost:c,protocol:f},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:p,identify:p,page:p,alias:p,group:p,screen:p};return s.todo&&ah(l,s,g,ah),g}var Al="This is being deprecated and will be not be available in future releases of Analytics JS",$S=XT(),WS=$S==null?void 0:$S.analytics;function gre(r,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=e?10:1,i=t?new WT(n,[]):new KT(n,r);return new ete(i)}var yre=function(){function r(e,t){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var a;return(a=t.plugins.find(vre))===null||a===void 0?void 0:a.metadata},this.writeKey=e.writeKey;var i={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(n=e.cdnSettings)!==null&&n!==void 0?n:i,this.cdnURL=e.cdnURL}return Object.defineProperty(r.prototype,"apiHost",{get:function(){var e,t;return(t=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||t===void 0?void 0:t.apiHost},enumerable:!1,configurable:!0}),r}();function Ss(){console.warn(Al)}var IF=function(r){Aa(e,r);function e(t,n,i,a,o){var s=this,u,l;s=r.call(this)||this,s._debug=!1,s.initialized=!1,s.user=function(){return s._user},s.init=s.initialize.bind(s),s.log=Ss,s.addIntegrationMiddleware=Ss,s.listeners=Ss,s.addEventListener=Ss,s.removeAllListeners=Ss,s.removeListener=Ss,s.removeEventListener=Ss,s.hasListeners=Ss,s.add=Ss,s.addIntegration=Ss;var c=n==null?void 0:n.cookie,f=(u=n==null?void 0:n.disableClientPersistence)!==null&&u!==void 0?u:!1;s.queue=i??gre("".concat(t.writeKey,":event-queue"),n==null?void 0:n.retryQueue,f),s.settings=new yre(t,s.queue);var d=n==null?void 0:n.storage;return s._universalStorage=s.createStore(f,d,c),s._user=a??new yF(Ke({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.user),c).load(),s._group=o??new ste(Ke({persist:!f,storage:n==null?void 0:n.storage},n==null?void 0:n.group),c).load(),s.eventFactory=new Xee(s._user),s.integrations=(l=n==null?void 0:n.integrations)!==null&&l!==void 0?l:{},s.options=n??{},ZT(s),s}return e.prototype.createStore=function(t,n,i){return t?new gf([new QT]):n&&pF(n)?new gf(i2(gF(n.stores,i))):new gf(i2([Oa.LocalStorage,{name:Oa.Cookie,settings:i},Oa.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f=this;return bt(this,function(d){return i=nh(t),a=Lee.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=this.eventFactory.track(o,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(h){return f.emit("track",o,h.event.properties,h.event.options),h})]})})},e.prototype.page=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d=this;return bt(this,function(h){return i=nh(t),a=qL.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=a[4],f=this.eventFactory.page(o,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return d.emit("page",o,s,v.event.properties,v.event.options),v})]})})},e.prototype.identify=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f=this;return bt(this,function(d){return i=nh(t),a=GL(this._user).apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],this._user.identify(o,s),c=this.eventFactory.identify(this._user.id(),this._user.traits(),u,this.integrations,i),[2,this._dispatch(c,l).then(function(h){return f.emit("identify",h.event.userId,h.event.traits,h.event.options),h})]})})},e.prototype.group=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=nh(n);if(n.length===0)return this._group;var o=GL(this._group).apply(void 0,n),s=o[0],u=o[1],l=o[2],c=o[3];this._group.identify(s,u);var f=this._group.id(),d=this._group.traits(),h=this.eventFactory.group(f,d,l,this.integrations,a);return this._dispatch(h,c).then(function(v){return t.emit("group",v.event.groupId,v.event.traits,v.event.options),v})},e.prototype.alias=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f=this;return bt(this,function(d){return i=nh(t),a=Nee.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=this.eventFactory.alias(o,s,u,this.integrations,i),[2,this._dispatch(c,l).then(function(h){return f.emit("alias",o,s,h.event.options),h})]})})},e.prototype.screen=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o,s,u,l,c,f,d=this;return bt(this,function(h){return i=nh(t),a=qL.apply(void 0,t),o=a[0],s=a[1],u=a[2],l=a[3],c=a[4],f=this.eventFactory.screen(o,s,u,l,this.integrations,i),[2,this._dispatch(f,c).then(function(v){return d.emit("screen",o,s,v.event.properties,v.event.options),v})]})})},e.prototype.trackClick=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a;return bt(this,function(o){switch(o.label){case 0:return[4,qo(()=>import("./auto-track-CzPdj8tA.js"),[])];case 1:return i=o.sent(),[2,(a=i.link).call.apply(a,Jn([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a;return bt(this,function(o){switch(o.label){case 0:return[4,qo(()=>import("./auto-track-CzPdj8tA.js"),[])];case 1:return i=o.sent(),[2,(a=i.link).call.apply(a,Jn([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a;return bt(this,function(o){switch(o.label){case 0:return[4,qo(()=>import("./auto-track-CzPdj8tA.js"),[])];case 1:return i=o.sent(),[2,(a=i.form).call.apply(a,Jn([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a;return bt(this,function(o){switch(o.label){case 0:return[4,qo(()=>import("./auto-track-CzPdj8tA.js"),[])];case 1:return i=o.sent(),[2,(a=i.form).call.apply(a,Jn([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o=this;return bt(this,function(s){switch(s.label){case 0:return i=Ou.system(),a=t.map(function(u){return o.queue.register(i,u,o)}),[4,Promise.all(a)];case 1:return s.sent(),[2,i]}})})},e.prototype.deregister=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return mt(this,void 0,void 0,function(){var i,a,o=this;return bt(this,function(s){switch(s.label){case 0:return i=Ou.system(),a=t.map(function(u){var l=o.queue.plugins.find(function(c){return c.name===u});if(l)return o.queue.deregister(i,l,o);i.log("warn","plugin ".concat(u," not found"))}),[4,Promise.all(a)];case 1:return s.sent(),[2,i]}})})},e.prototype.debug=function(t){return t===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,n){return mt(this,void 0,void 0,function(){var i;return bt(this,function(a){return i=new Ou(t),i.stats.increment("analytics_js.invoke",1,[t.type]),Ig()&&!this.options.retryQueue?[2,i]:[2,Mee(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return mt(this,void 0,void 0,function(){var n=this;return bt(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return mt(n,void 0,void 0,function(){var a,o,s;return bt(this,function(u){switch(u.label){case 0:return[4,qo(()=>Promise.resolve().then(()=>Mre),void 0)];case 1:return a=u.sent().sourceMiddlewarePlugin,o={},this.queue.plugins.forEach(function(l){if(l.type==="destination")return o[l.name]=!0}),s=a(t,o),[4,this.register(s)];case 2:return u.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(Kee).forEach(function(a){(t==="*"||a.name.toLowerCase()===t.toLowerCase())&&a.addMiddleware.apply(a,n)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return mt(this,void 0,void 0,function(){var n;return bt(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,qo(()=>import("./index-DyKOlD5r.js"),[])];case 1:return n=i.sent().queryString,[2,n(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return t===void 0&&(t=function(n){return n}),mt(this,void 0,void 0,function(){return bt(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return t(i),i})]})})},e.prototype.noConflict=function(){return console.warn(Al),lte(WS??this),this},e.prototype.normalize=function(t){return console.warn(Al),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(Al),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return n_},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,n){return mt(this,void 0,void 0,function(){return bt(this,function(i){return console.warn(Al),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return mt(this,void 0,void 0,function(){return bt(this,function(n){switch(n.label){case 0:return console.warn(Al),[4,this.page({path:t})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(Al),(t=this._plugins)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(Al);var t=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var a="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),o=window[a];if(!o)return n;var s=o.Integration;return s?(n[i.name]=s,n):(n[i.name]=o,n)},{});return t},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var n=this,i=t.shift();i&&!n[i]||n[i].apply(this,t)},e}($T),KL=function(r){Aa(e,r);function e(){var t=r.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return t.initialized=!0,t}return e}(IF),ZL={};function DF(){return typeof process>"u"||!ZL?{}:ZL}var mre=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,bre=function(){var r,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(t){var n,i=(n=t.getAttribute("src"))!==null&&n!==void 0?n:"",a=mre.exec(i);a&&a[1]&&(r=a[1])}),r},Mb,_re=function(){var r,e=Mb??((r=mF())===null||r===void 0?void 0:r._cdn);return e},wre=function(r){var e=mF();e&&(e._cdn=r),Mb=r},vA=function(){var r=_re();if(r)return r;var e=bre();return e||"https://cdn.segment.com"},Foe=function(){var r=vA();return"".concat(r,"/next-integrations")};function xre(r,e){var t,n=Object.entries((t=e.integrations)!==null&&t!==void 0?t:{}).reduce(function(i,a){var o,s,u=a[0],l=a[1];return typeof l=="object"?Ke(Ke({},i),(o={},o[u]=l,o)):Ke(Ke({},i),(s={},s[u]={},s))},{});return Object.entries(r.integrations).reduce(function(i,a){var o,s=a[0],u=a[1];return Ke(Ke({},i),(o={},o[s]=Ke(Ke({},u),n[s]),o))},{})}function Ere(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch{return r}}function Ore(r){return mt(this,void 0,void 0,function(){var e;return bt(this,function(t){return e=navigator.userAgentData,e?r?[2,e.getHighEntropyValues(r).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var dp;function Sre(){if(dp)return dp;var r=hF(window.location.href);return dp={expires:31536e6,secure:!1,path:"/"},r&&(dp.domain=r),dp}function Cre(r){var e={btid:"dataxu",urid:"millennial-media"};r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&");for(var t=r.split("&"),n=0,i=t;n<i.length;n++){var a=i[n],o=a.split("="),s=o[0],u=o[1];if(e[s])return{id:u,type:e[s]}}}function Tre(r){return r.startsWith("?")&&(r=r.substring(1)),r=r.replace(/\?/g,"&"),r.split("&").reduce(function(e,t){var n=t.split("="),i=n[0],a=n[1],o=a===void 0?"":a;if(i.includes("utm_")&&i.length>4){var s=i.slice(4);s==="campaign"&&(s="name"),e[s]=Ere(o)}return e},{})}function Are(){var r=mu.get("_ga");if(r&&r.startsWith("amp"))return r}function Pre(r,e,t){var n,i=new gf(t?[]:[new vF(Sre())]),a=i.get("s:context.referrer"),o=(n=Cre(r))!==null&&n!==void 0?n:a;o&&(e&&(e.referrer=Ke(Ke({},e.referrer),o)),i.set("s:context.referrer",o))}var Rre=function(r){try{var e=new URLSearchParams;return Object.entries(r).forEach(function(t){var n=t[0],i=t[1];Array.isArray(i)?i.forEach(function(a){return e.append(n,a)}):e.append(n,i)}),e.toString()}catch{return""}},kre=function(){function r(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(t,n){return mt(e,void 0,void 0,function(){var i;return bt(this,function(a){switch(a.label){case 0:this.instance=n,a.label=1;case 1:return a.trys.push([1,3,,4]),i=this,[4,Ore(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=a.sent(),[3,4];case 3:return a.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(t){var n,i,a=t.event.context,o=a.page.search||"",s=typeof o=="object"?Rre(o):o;a.userAgent=navigator.userAgent,a.userAgentData=e.userAgentData;var u=navigator.userLanguage||navigator.language;typeof a.locale>"u"&&typeof u<"u"&&(a.locale=u),(n=a.library)!==null&&n!==void 0||(a.library={name:"analytics.js",version:"".concat("npm:next","-").concat(n_)}),s&&!a.campaign&&(a.campaign=Tre(s));var l=Are();l&&(a.amp={id:l}),Pre(s,a,(i=e.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{a.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return t},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return r}(),Ire=new kre;function MF(r){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(t){return t.src===r})}function HS(r,e){var t=MF(r);if(t!==void 0){var n=t==null?void 0:t.getAttribute("status");if(n==="loaded")return Promise.resolve(t);if(n==="loading")return new Promise(function(i,a){t.addEventListener("load",function(){return i(t)}),t.addEventListener("error",function(o){return a(o)})})}return new Promise(function(i,a){var o,s=window.document.createElement("script");s.type="text/javascript",s.src=r,s.async=!0,s.setAttribute("status","loading");for(var u=0,l=Object.entries({});u<l.length;u++){var c=l[u],f=c[0],d=c[1];s.setAttribute(f,d)}s.onload=function(){s.onerror=s.onload=null,s.setAttribute("status","loaded"),i(s)},s.onerror=function(){s.onerror=s.onload=null,s.setAttribute("status","error"),a(new Error("Failed to load ".concat(r)))};var h=window.document.querySelector("script");h?(o=h.parentElement)===null||o===void 0||o.insertBefore(s,h):window.document.head.appendChild(s)})}function Boe(r){var e=MF(r);return e!==void 0&&e.remove(),Promise.resolve()}function LF(r,e,t){return mt(this,void 0,void 0,function(){function n(l,c){return mt(this,void 0,void 0,function(){var f,d,h;return bt(this,function(v){switch(v.label){case 0:return f=!1,d=null,[4,c({payload:l0(l,{clone:!0,traverse:!1}),integration:r,next:function(p){f=!0,p===null&&(d=null),p&&(d=p.obj)}})];case 1:return v.sent(),!f&&d!==null&&(d=d,d.integrations=Ke(Ke({},l.integrations),(h={},h[r]=!1,h))),[2,d]}})})}var i,a,o,s,u;return bt(this,function(l){switch(l.label){case 0:i=l0(e,{clone:!0,traverse:!1}).rawEvent(),a=0,o=t,l.label=1;case 1:return a<o.length?(s=o[a],[4,n(i,s)]):[3,4];case 2:if(u=l.sent(),u===null)return[2,null];i=u,l.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})}function Dre(r,e){function t(n){return mt(this,void 0,void 0,function(){var i;return bt(this,function(a){switch(a.label){case 0:return i=!1,[4,r({payload:l0(n.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(o){i=!0,o&&(n.event=o.obj)}})];case 1:if(a.sent(),!i)throw new Lh({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(r.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:t,page:t,screen:t,identify:t,alias:t,group:t}}const Mre=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:LF,sourceMiddlewarePlugin:Dre},Symbol.toStringTag,{value:"Module"}));function Zm(r,e){var t=e.methodName,n=e.integrationName,i=e.type,a=e.didError,o=a===void 0?!1:a;r.stats.increment("analytics_js.integration.invoke".concat(o?".error":""),1,["method:".concat(t),"integration_name:".concat(n),"type:".concat(i)])}var Lre=function(){function r(e,t){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=rF(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=t,this.name=e,this.type=t.type,this.alternativeNames.push(t.name)}return r.prototype.addMiddleware=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.type==="destination"&&(e=this.middleware).push.apply(e,t)},r.prototype.transform=function(e){return mt(this,void 0,void 0,function(){var t;return bt(this,function(n){switch(n.label){case 0:return[4,LF(this.name,e.event,this.middleware)];case 1:return t=n.sent(),t===null&&e.cancel(new Lh({retry:!1,reason:"dropped by destination middleware"})),[2,new Ou(t)]}})})},r.prototype._createMethod=function(e){var t=this;return function(n){return mt(t,void 0,void 0,function(){var i,a;return bt(this,function(o){switch(o.label){case 0:return this.action[e]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!o.sent())throw new Error("Something prevented the destination from getting ready");return Zm(n,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](i)];case 4:return o.sent(),[3,6];case 5:throw a=o.sent(),Zm(n,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),a;case 6:return[2,n]}})})}},r.prototype.isLoaded=function(){return this.action.isLoaded()},r.prototype.ready=function(){return mt(this,void 0,void 0,function(){return bt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},r.prototype.load=function(e,t){return mt(this,void 0,void 0,function(){var n,i,a,o;return bt(this,function(s){switch(s.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];s.label=1;case 1:return s.trys.push([1,3,,4]),Zm(e,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(e,t),a=(i=this.loadPromise).resolve,[4,n];case 2:return a.apply(i,[s.sent()]),[2,n];case 3:throw o=s.sent(),Zm(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(o),o;case 4:return[2]}})})},r.prototype.unload=function(e,t){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,e,t)},r}();function Nre(r){if(!Array.isArray(r))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return r.forEach(function(t){e.forEach(function(n){var i;if(t[n]===void 0)throw new Error("Plugin: ".concat((i=t.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function jre(r,e){var t=r[e.creationName],n=r[e.name];return r.All===!1&&!t&&!n||t===!1||n===!1}function Fre(r,e){return mt(this,void 0,void 0,function(){var t,n,i,a,o,s;return bt(this,function(u){switch(u.label){case 0:if(u.trys.push([0,9,,10]),t=new RegExp("https://cdn.segment.(com|build)"),n=vA(),!e)return[3,6];i=r.url.split("/"),a=i[i.length-2],o=r.url.replace(a,btoa(a).replace(/=/g,"")),u.label=1;case 1:return u.trys.push([1,3,,5]),[4,HS(o.replace(t,n))];case 2:return u.sent(),[3,5];case 3:return u.sent(),[4,HS(r.url.replace(t,n))];case 4:return u.sent(),[3,5];case 5:return[3,8];case 6:return[4,HS(r.url.replace(t,n))];case 7:u.sent(),u.label=8;case 8:return typeof window[r.libraryName]=="function"?[2,window[r.libraryName]]:[3,10];case 9:throw s=u.sent(),console.error("Failed to create PluginFactory",r),s;case 10:return[2]}})})}function Bre(r,e,t,n,i,a){var o,s,u;return mt(this,void 0,void 0,function(){var l,c,f,d=this;return bt(this,function(h){switch(h.label){case 0:return l=[],c=(s=(o=r.middlewareSettings)===null||o===void 0?void 0:o.routingRules)!==null&&s!==void 0?s:[],f=((u=r.remotePlugins)!==null&&u!==void 0?u:[]).map(function(v){return mt(d,void 0,void 0,function(){var p,g,y,b,m,_,x;return bt(this,function(C){switch(C.label){case 0:if(jre(e,v))return[2];C.label=1;case 1:return C.trys.push([1,6,,7]),g=a==null?void 0:a.find(function(w){var O=w.pluginName;return O===v.name}),g?[3,3]:[4,Fre(v,n==null?void 0:n.obfuscate)];case 2:g=C.sent(),C.label=3;case 3:return p=g,p?(y=t[v.name],[4,p(Ke(Ke({},v.settings),y))]):[3,5];case 4:b=C.sent(),m=Array.isArray(b)?b:[b],Nre(m),_=c.filter(function(w){return w.destinationName===v.creationName}),m.forEach(function(w){var O=new Lre(v.creationName,w);_.length&&i&&O.addMiddleware(i),l.push(O)}),C.label=5;case 5:return[3,7];case 6:return x=C.sent(),console.warn("Failed to load Remote Plugin",x),[3,7];case 7:return[2]}})})}),[4,Promise.all(f)];case 1:return h.sent(),[2,l.filter(Boolean)]}})})}var YS,QL,Ure=XT(),JL=(YS=(QL=Ure).__SEGMENT_INSPECTOR__)!==null&&YS!==void 0?YS:QL.__SEGMENT_INSPECTOR__={},zre=function(r){var e;return(e=JL.attach)===null||e===void 0?void 0:e.call(JL,r)};function qre(r,e){return r_("".concat(e,"/v1/projects/").concat(r,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(n){throw new Error(n)})}).catch(function(t){throw console.error(t.message),t})}function Gre(r){return DF().NODE_ENV!=="test"&&Object.keys(r.integrations).length>1}function Vre(r){var e,t,n;return DF().NODE_ENV!=="test"&&((n=(t=(e=r.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)>0}function $re(r,e){vte(r,e),hte(r,e)}function Wre(r,e,t){return mt(this,void 0,void 0,function(){return bt(this,function(n){switch(n.label){case 0:return[4,Yre(r,e)];case 1:return n.sent(),pte(r,t),[2]}})})}var Hre=function(){var r,e,t=(r=window.location.hash)!==null&&r!==void 0?r:"",n=(e=window.location.search)!==null&&e!==void 0?e:"",i=n.length?n:t.replace(/(?=#).*(?=\?)/,"");return i},Yre=function(r,e){return mt(void 0,void 0,void 0,function(){return bt(this,function(t){switch(t.label){case 0:return e.includes("ajs_")?[4,r.queryString(e).catch(console.error)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})};function Xre(r,e,t,n,i,a,o){var s,u,l;return i===void 0&&(i=[]),mt(this,void 0,void 0,function(){var c,f,d,h,v,p,g,y,b,m,_,x,C,w,O,A=this;return bt(this,function(k){switch(k.label){case 0:return $re(t,o),c=i==null?void 0:i.filter(function(R){return typeof R=="object"}),f=i==null?void 0:i.filter(function(R){return typeof R=="function"&&typeof R.pluginName=="string"}),Vre(e)?[4,qo(()=>import("./index-SSgaCJsD.js"),[]).then(function(R){return R.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return h=k.sent(),[3,3];case 2:h=void 0,k.label=3;case 3:return d=h,Gre(e)||a.length>0?[4,qo(()=>import("./index-BRcRwJky.js"),__vite__mapDeps([0,1])).then(function(R){return R.ajsDestinations(r,e,t.integrations,n,d,a)})]:[3,5];case 4:return p=k.sent(),[3,6];case 5:p=[],k.label=6;case 6:return v=p,e.legacyVideoPluginsEnabled?[4,qo(()=>import("./index-lw90t9bO.js"),[]).then(function(R){return R.loadLegacyVideoPlugins(t)})]:[3,8];case 7:k.sent(),k.label=8;case 8:return!((s=n.plan)===null||s===void 0)&&s.track?[4,qo(()=>import("./index-wKMuZcJx.js"),__vite__mapDeps([2,1])).then(function(R){var I;return R.schemaFilter((I=n.plan)===null||I===void 0?void 0:I.track,e)})]:[3,10];case 9:return y=k.sent(),[3,11];case 10:y=void 0,k.label=11;case 11:return g=y,b=xre(e,n),[4,Bre(e,t.integrations,b,n,d,f).catch(function(){return[]})];case 12:return m=k.sent(),_=Jn(Jn([Ire],v,!0),m,!0),g&&_.push(g),x=((u=n.integrations)===null||u===void 0?void 0:u.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,x?[3,14]:(w=(C=_).push,[4,pre(t,b["Segment.io"],e.integrations)]);case 13:w.apply(C,[k.sent()]),k.label=14;case 14:return[4,t.register.apply(t,Jn(Jn([],_,!1),c,!1))];case 15:return O=k.sent(),[4,dte(t,o)];case 16:return k.sent(),Object.entries((l=e.enabledMiddleware)!==null&&l!==void 0?l:{}).some(function(R){var I=R[1];return I})?[4,qo(()=>import("./index-BDRt-IGz.js"),[]).then(function(R){var I=R.remoteMiddlewares;return mt(A,void 0,void 0,function(){var M,N;return bt(this,function(F){switch(F.label){case 0:return[4,I(O,e,n.obfuscate)];case 1:return M=F.sent(),N=M.map(function(z){return t.addSourceMiddleware(z)}),[2,Promise.all(N)]}})})})]:[3,18];case 17:k.sent(),k.label=18;case 18:return[4,fte(t,o)];case 19:return k.sent(),[2,O]}})})}function Kre(r,e,t){var n,i,a,o,s,u,l,c,f;return e===void 0&&(e={}),mt(this,void 0,void 0,function(){var d,h,v,p,g,y,b,m,_,x,C;return bt(this,function(w){switch(w.label){case 0:return e.disable===!0?[2,[new KL,Ou.system()]]:(e.globalAnalyticsKey&&ute(e.globalAnalyticsKey),r.cdnURL&&wre(r.cdnURL),e.initialPageview&&t.add(new a2("page",[])),d=Hre(),h=(n=r.cdnURL)!==null&&n!==void 0?n:vA(),(i=r.cdnSettings)!==null&&i!==void 0?(p=i,[3,3]):[3,1]);case 1:return[4,qre(r.writeKey,h)];case 2:p=w.sent(),w.label=3;case 3:return v=p,e.updateCDNSettings&&(v=e.updateCDNSettings(v)),typeof e.disable!="function"?[3,5]:[4,e.disable(v)];case 4:if(g=w.sent(),g)return[2,[new KL,Ou.system()]];w.label=5;case 5:return y=(o=(a=v.integrations["Segment.io"])===null||a===void 0?void 0:a.retryQueue)!==null&&o!==void 0?o:!0,e=Ke({retryQueue:y},e),b=new IF(Ke(Ke({},r),{cdnSettings:v,cdnURL:h}),e),zre(b),m=(s=r.plugins)!==null&&s!==void 0?s:[],_=(u=r.classicIntegrations)!==null&&u!==void 0?u:[],x=(l=e.integrations)===null||l===void 0?void 0:l["Segment.io"],oF.initRemoteMetrics(Ke(Ke({},v.metrics),{host:(c=x==null?void 0:x.apiHost)!==null&&c!==void 0?c:(f=v.metrics)===null||f===void 0?void 0:f.host,protocol:x==null?void 0:x.protocol})),[4,Xre(r.writeKey,v,b,e,m,_,t)];case 6:return C=w.sent(),b.initialized=!0,b.emit("initialize",r,e),[4,Wre(b,d,t)];case 7:return w.sent(),[2,[b,C]]}})})}var Zre=function(r){Aa(e,r);function e(){var t=this,n=rF(),i=n.promise,a=n.resolve;return t=r.call(this,function(o){return i.then(function(s){var u=s[0],l=s[1];return Kre(u,l,o)})})||this,t._resolveLoadStart=function(o,s){return a([o,s])},t}return e.prototype.load=function(t,n){return n===void 0&&(n={}),this._resolveLoadStart(t,n),this},e.load=function(t,n){return n===void 0&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(i){return i[0]})},e}(yte);/*! For license information please see base.mjs.LICENSE.txt */var Qre={5:function(r,e,t){var n=this&&this.__extends||function(){var m=function(_,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(C[O]=w[O])},m(_,x)};return function(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function C(){this.constructor=_}m(_,x),_.prototype=x===null?Object.create(x):(C.prototype=x.prototype,new C)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_OBSERVER=e.SafeSubscriber=e.Subscriber=void 0;var i=t(1018),a=t(8014),o=t(3413),s=t(7315),u=t(1342),l=t(9052),c=t(9155),f=t(9223),d=function(m){function _(x){var C=m.call(this)||this;return C.isStopped=!1,x?(C.destination=x,a.isSubscription(x)&&x.add(C)):C.destination=e.EMPTY_OBSERVER,C}return n(_,m),_.create=function(x,C,w){return new g(x,C,w)},_.prototype.next=function(x){this.isStopped?b(l.nextNotification(x),this):this._next(x)},_.prototype.error=function(x){this.isStopped?b(l.errorNotification(x),this):(this.isStopped=!0,this._error(x))},_.prototype.complete=function(){this.isStopped?b(l.COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},_.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,m.prototype.unsubscribe.call(this),this.destination=null)},_.prototype._next=function(x){this.destination.next(x)},_.prototype._error=function(x){try{this.destination.error(x)}finally{this.unsubscribe()}},_.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},_}(a.Subscription);e.Subscriber=d;var h=Function.prototype.bind;function v(m,_){return h.call(m,_)}var p=function(){function m(_){this.partialObserver=_}return m.prototype.next=function(_){var x=this.partialObserver;if(x.next)try{x.next(_)}catch(C){y(C)}},m.prototype.error=function(_){var x=this.partialObserver;if(x.error)try{x.error(_)}catch(C){y(C)}else y(_)},m.prototype.complete=function(){var _=this.partialObserver;if(_.complete)try{_.complete()}catch(x){y(x)}},m}(),g=function(m){function _(x,C,w){var O,A,k=m.call(this)||this;return i.isFunction(x)||!x?O={next:x??void 0,error:C??void 0,complete:w??void 0}:k&&o.config.useDeprecatedNextContext?((A=Object.create(x)).unsubscribe=function(){return k.unsubscribe()},O={next:x.next&&v(x.next,A),error:x.error&&v(x.error,A),complete:x.complete&&v(x.complete,A)}):O=x,k.destination=new p(O),k}return n(_,m),_}(d);function y(m){o.config.useDeprecatedSynchronousErrorHandling?f.captureError(m):s.reportUnhandledError(m)}function b(m,_){var x=o.config.onStoppedNotification;x&&c.timeoutProvider.setTimeout(function(){return x(m,_)})}e.SafeSubscriber=g,e.EMPTY_OBSERVER={closed:!0,next:u.noop,error:function(m){throw m},complete:u.noop}},45:function(r,e){var t=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function a(o){this.position=0,this.length=o}return a.prototype.getUInt8=function(o){throw new Error("Not implemented")},a.prototype.getInt8=function(o){throw new Error("Not implemented")},a.prototype.getFloat64=function(o){throw new Error("Not implemented")},a.prototype.getVarInt=function(o){throw new Error("Not implemented")},a.prototype.putUInt8=function(o,s){throw new Error("Not implemented")},a.prototype.putInt8=function(o,s){throw new Error("Not implemented")},a.prototype.putFloat64=function(o,s){throw new Error("Not implemented")},a.prototype.getInt16=function(o){return this.getInt8(o)<<8|this.getUInt8(o+1)},a.prototype.getUInt16=function(o){return this.getUInt8(o)<<8|this.getUInt8(o+1)},a.prototype.getInt32=function(o){return this.getInt8(o)<<24|this.getUInt8(o+1)<<16|this.getUInt8(o+2)<<8|this.getUInt8(o+3)},a.prototype.getUInt32=function(o){return this.getUInt8(o)<<24|this.getUInt8(o+1)<<16|this.getUInt8(o+2)<<8|this.getUInt8(o+3)},a.prototype.getInt64=function(o){return this.getInt8(o)<<56|this.getUInt8(o+1)<<48|this.getUInt8(o+2)<<40|this.getUInt8(o+3)<<32|this.getUInt8(o+4)<<24|this.getUInt8(o+5)<<16|this.getUInt8(o+6)<<8|this.getUInt8(o+7)},a.prototype.getSlice=function(o,s){return new i(o,s,this)},a.prototype.putInt16=function(o,s){this.putInt8(o,s>>8),this.putUInt8(o+1,255&s)},a.prototype.putUInt16=function(o,s){this.putUInt8(o,s>>8&255),this.putUInt8(o+1,255&s)},a.prototype.putInt32=function(o,s){this.putInt8(o,s>>24),this.putUInt8(o+1,s>>16&255),this.putUInt8(o+2,s>>8&255),this.putUInt8(o+3,255&s)},a.prototype.putUInt32=function(o,s){this.putUInt8(o,s>>24&255),this.putUInt8(o+1,s>>16&255),this.putUInt8(o+2,s>>8&255),this.putUInt8(o+3,255&s)},a.prototype.putInt64=function(o,s){this.putInt8(o,s>>48),this.putUInt8(o+1,s>>42&255),this.putUInt8(o+2,s>>36&255),this.putUInt8(o+3,s>>30&255),this.putUInt8(o+4,s>>24&255),this.putUInt8(o+5,s>>16&255),this.putUInt8(o+6,s>>8&255),this.putUInt8(o+7,255&s)},a.prototype.putVarInt=function(o,s){for(var u=0;s>1;){var l=s%128;s>=128&&(l+=128),s/=128,this.putUInt8(o+u,l),u+=1}return u},a.prototype.putBytes=function(o,s){for(var u=0,l=s.remaining();u<l;u++)this.putUInt8(o+u,s.readUInt8())},a.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},a.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},a.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},a.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},a.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},a.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},a.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},a.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},a.prototype.readVarInt=function(){var o=this.getVarInt(this.position);return this._updatePos(o.length),o.value},a.prototype.writeUInt8=function(o){this.putUInt8(this._updatePos(1),o)},a.prototype.writeInt8=function(o){this.putInt8(this._updatePos(1),o)},a.prototype.writeInt16=function(o){this.putInt16(this._updatePos(2),o)},a.prototype.writeInt32=function(o){this.putInt32(this._updatePos(4),o)},a.prototype.writeUInt32=function(o){this.putUInt32(this._updatePos(4),o)},a.prototype.writeInt64=function(o){this.putInt64(this._updatePos(8),o)},a.prototype.writeFloat64=function(o){this.putFloat64(this._updatePos(8),o)},a.prototype.writeVarInt=function(o){var s=this.putVarInt(this.position,o);this._updatePos(s)},a.prototype.writeBytes=function(o){this.putBytes(this._updatePos(o.remaining()),o)},a.prototype.readSlice=function(o){return this.getSlice(this._updatePos(o),o)},a.prototype._updatePos=function(o){var s=this.position;return this.position+=o,s},a.prototype.remaining=function(){return this.length-this.position},a.prototype.hasRemaining=function(){return this.remaining()>0},a.prototype.reset=function(){this.position=0},a.prototype.toString=function(){return this.constructor.name+"( position="+this.position+` )
  `+this.toHex()},a.prototype.toHex=function(){for(var o="",s=0;s<this.length;s++){var u=this.getUInt8(s).toString(16);u.length===1&&(u="0"+u),o+=u,s!==this.length-1&&(o+=" ")}return o},a}();e.default=n;var i=function(a){function o(s,u,l){var c=a.call(this,u)||this;return c._start=s,c._inner=l,c}return t(o,a),o.prototype.putUInt8=function(s,u){this._inner.putUInt8(this._start+s,u)},o.prototype.getUInt8=function(s){return this._inner.getUInt8(this._start+s)},o.prototype.putInt8=function(s,u){this._inner.putInt8(this._start+s,u)},o.prototype.putFloat64=function(s,u){this._inner.putFloat64(this._start+s,u)},o.prototype.getInt8=function(s){return this._inner.getInt8(this._start+s)},o.prototype.getFloat64=function(s){return this._inner.getFloat64(this._start+s)},o}(n)},93:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var t="__isBrokenObject__",n="__reason__";e.createBrokenObject=function(i,a){a===void 0&&(a={});var o=function(){throw i};return new Proxy(a,{get:function(s,u){return u===t||(u===n?i:void(u!=="toJSON"&&o()))},set:o,apply:o,construct:o,defineProperty:o,deleteProperty:o,getOwnPropertyDescriptor:o,getPrototypeOf:o,has:o,isExtensible:o,ownKeys:o,preventExtensions:o,setPrototypeOf:o})},e.isBrokenObject=function(i){return i!==null&&typeof i=="object"&&i[t]===!0},e.getBrokenObjectReason=function(i){return i[n]}},95:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncSubject=void 0;var i=function(a){function o(){var s=a!==null&&a.apply(this,arguments)||this;return s._value=null,s._hasValue=!1,s._isComplete=!1,s}return n(o,a),o.prototype._checkFinalizedStatuses=function(s){var u=this,l=u.hasError,c=u._hasValue,f=u._value,d=u.thrownError,h=u.isStopped,v=u._isComplete;l?s.error(d):(h||v)&&(c&&s.next(f),s.complete())},o.prototype.next=function(s){this.isStopped||(this._value=s,this._hasValue=!0)},o.prototype.complete=function(){var s=this,u=s._hasValue,l=s._value;s._isComplete||(this._isComplete=!0,u&&a.prototype.next.call(this,l),a.prototype.complete.call(this))},o}(t(2483).Subject);e.AsyncSubject=i},137:r=>{r.exports=class{constructor(e,t,n,i){let a;if(typeof e=="object"){let o=e;e=o.k_p,t=o.k_i,n=o.k_d,i=o.dt,a=o.i_max}this.k_p=typeof e=="number"?e:1,this.k_i=t||0,this.k_d=n||0,this.dt=i||0,this.i_max=a||0,this.sumError=0,this.lastError=0,this.lastTime=0,this.target=0}setTarget(e){this.target=e}update(e){this.currentValue=e;let t=this.dt;if(!t){let a=Date.now();t=this.lastTime===0?0:(a-this.lastTime)/1e3,this.lastTime=a}typeof t=="number"&&t!==0||(t=1);let n=this.target-this.currentValue;if(this.sumError=this.sumError+n*t,this.i_max>0&&Math.abs(this.sumError)>this.i_max){let a=this.sumError>0?1:-1;this.sumError=a*this.i_max}let i=(n-this.lastError)/t;return this.lastError=n,this.k_p*n+this.k_i*this.sumError+this.k_d*i}reset(){this.sumError=0,this.lastError=0,this.lastTime=0}}},182:function(r,e,t){var n=this&&this.__extends||function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(f[h]=d[h])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualAction=e.VirtualTimeScheduler=void 0;var i=t(5267),a=t(8014),o=function(u){function l(c,f){c===void 0&&(c=s),f===void 0&&(f=1/0);var d=u.call(this,c,function(){return d.frame})||this;return d.maxFrames=f,d.frame=0,d.index=-1,d}return n(l,u),l.prototype.flush=function(){for(var c,f,d=this.actions,h=this.maxFrames;(f=d[0])&&f.delay<=h&&(d.shift(),this.frame=f.delay,!(c=f.execute(f.state,f.delay))););if(c){for(;f=d.shift();)f.unsubscribe();throw c}},l.frameTimeFactor=10,l}(t(5648).AsyncScheduler);e.VirtualTimeScheduler=o;var s=function(u){function l(c,f,d){d===void 0&&(d=c.index+=1);var h=u.call(this,c,f)||this;return h.scheduler=c,h.work=f,h.index=d,h.active=!0,h.index=c.index=d,h}return n(l,u),l.prototype.schedule=function(c,f){if(f===void 0&&(f=0),Number.isFinite(f)){if(!this.id)return u.prototype.schedule.call(this,c,f);this.active=!1;var d=new l(this.scheduler,this.work);return this.add(d),d.schedule(c,f)}return a.Subscription.EMPTY},l.prototype.requestAsyncId=function(c,f,d){d===void 0&&(d=0),this.delay=c.frame+d;var h=c.actions;return h.push(this),h.sort(l.sortActions),1},l.prototype.recycleAsyncId=function(c,f,d){},l.prototype._execute=function(c,f){if(this.active===!0)return u.prototype._execute.call(this,c,f)},l.sortActions=function(c,f){return c.delay===f.delay?c.index===f.index?0:c.index>f.index?1:-1:c.delay>f.delay?1:-1},l}(i.AsyncAction);e.VirtualAction=s},187:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=void 0;var n=t(7286),i=t(3638);e.zipAll=function(a){return i.joinAllInternals(n.zip,a)}},206:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=n(t(4151));e.Rediscovery=i.default;var a=n(t(9018));e.RoutingTable=a.default,e.default=i.default},245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.not=void 0,e.not=function(t,n){return function(i,a){return!t.call(n,i,a)}}},269:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=void 0;var n=t(3865),i=t(1107),a=t(7843);e.startWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=i.popScheduler(o);return a.operate(function(l,c){(u?n.concat(o,l,u):n.concat(o,l)).subscribe(c)})}},326:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_8=e.BOLT_PROTOCOL_V5_7=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0,e.FETCH_ALL=-1,e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,e.DEFAULT_POOL_MAX_SIZE=100,e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,e.ACCESS_MODE_READ="READ",e.ACCESS_MODE_WRITE="WRITE",e.BOLT_PROTOCOL_V1=1,e.BOLT_PROTOCOL_V2=2,e.BOLT_PROTOCOL_V3=3,e.BOLT_PROTOCOL_V4_0=4,e.BOLT_PROTOCOL_V4_1=4.1,e.BOLT_PROTOCOL_V4_2=4.2,e.BOLT_PROTOCOL_V4_3=4.3,e.BOLT_PROTOCOL_V4_4=4.4,e.BOLT_PROTOCOL_V5_0=5,e.BOLT_PROTOCOL_V5_1=5.1,e.BOLT_PROTOCOL_V5_2=5.2,e.BOLT_PROTOCOL_V5_3=5.3,e.BOLT_PROTOCOL_V5_4=5.4,e.BOLT_PROTOCOL_V5_5=5.5,e.BOLT_PROTOCOL_V5_6=5.6,e.BOLT_PROTOCOL_V5_7=5.7,e.BOLT_PROTOCOL_V5_8=5.8,e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},347:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromEventPattern=void 0;var n=t(4662),i=t(1018),a=t(1251);e.fromEventPattern=function o(s,u,l){return l?o(s,u).pipe(a.mapOneOrManyArgs(l)):new n.Observable(function(c){var f=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];return c.next(h.length===1?h[0]:h)},d=s(f);return i.isFunction(u)?function(){return u(f,d)}:void 0})}},361:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var d,h,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(d=v.next()).done;)p.push(d.value)}catch(g){h={error:g}}finally{try{d&&!d.done&&(f=v.return)&&f.call(v)}finally{if(h)throw h.error}}return p},i=this&&this.__spreadArray||function(l,c){for(var f=0,d=c.length,h=l.length;f<d;f++,h++)l[h]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var a=t(7843),o=t(7302),s=t(1107),u=t(4917);e.merge=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l),d=s.popNumber(l,1/0);return a.operate(function(h,v){o.mergeAll(d)(u.from(i([h],n(l)),f)).subscribe(v)})}},373:function(r,e,t){var n=this&&this.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(h[p]=v[p])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function h(){this.constructor=f}c(f,d),f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),i=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var a=i(t(45)),o=t(5319),s=i(t(5553)),u=function(c){function f(d,h){var v=c.call(this,0)||this;return v._bufferSize=h||1400,v._ch=d,v._buffer=(0,o.alloc)(v._bufferSize),v._currentChunkStart=0,v._chunkOpen=!1,v}return n(f,c),f.prototype.putUInt8=function(d,h){this._ensure(1),this._buffer.writeUInt8(h)},f.prototype.putInt8=function(d,h){this._ensure(1),this._buffer.writeInt8(h)},f.prototype.putFloat64=function(d,h){this._ensure(8),this._buffer.writeFloat64(h)},f.prototype.putBytes=function(d,h){for(;h.remaining()>0;)this._ensure(1),this._buffer.remaining()>h.remaining()?this._buffer.writeBytes(h):this._buffer.writeBytes(h.readSlice(this._buffer.remaining()));return this},f.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var d=this._buffer;this._buffer=null,this._ch.write(d.getSlice(0,d.position)),this._buffer=(0,o.alloc)(this._bufferSize),this._chunkOpen=!1}return this},f.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},f.prototype._ensure=function(d){var h=this._chunkOpen?d:d+2;this._buffer.remaining()<h&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},f.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var d=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,d),this._chunkOpen=!1}},f}(a.default);e.Chunker=u;var l=function(){function c(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return c.prototype.AWAITING_CHUNK=function(f){return f.remaining()>=2?this._onHeader(f.readUInt16()):(this._partialChunkHeader=f.readUInt8()<<8,this.IN_HEADER)},c.prototype.IN_HEADER=function(f){return this._onHeader(65535&(this._partialChunkHeader|f.readUInt8()))},c.prototype.IN_CHUNK=function(f){return this._chunkSize<=f.remaining()?(this._currentMessage.push(f.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=f.remaining(),this._currentMessage.push(f.readSlice(f.remaining())),this.IN_CHUNK)},c.prototype.CLOSED=function(f){},c.prototype._onHeader=function(f){if(f===0){var d=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:d=this._currentMessage[0];break;default:d=new s.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(d),this.AWAITING_CHUNK}return this._chunkSize=f,this.IN_CHUNK},c.prototype.write=function(f){for(;f.hasRemaining();)this._state=this._state(f)},c}();e.Dechunker=l},378:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=void 0;var n=t(7843),i=t(3111);e.defaultIfEmpty=function(a){return n.operate(function(o,s){var u=!1;o.subscribe(i.createOperatorSubscriber(s,function(l){u=!0,s.next(l)},function(){u||s.next(a),s.complete()}))})}},397:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var n=t(9305);t(9014),e.assertTxConfigIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i&&!i.isEmpty()){var s=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw a(s.message),o.onError(s),s}},e.assertDatabaseIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw a(s.message),o.onError(s),s}},e.assertImpersonatedUserIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i){var s=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(i,"."));throw a(s.message),o.onError(s),s}},e.assertNotificationFilterIsEmpty=function(i,a,o){if(a===void 0&&(a=function(){}),i!==void 0){var s=(0,n.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(n.json.stringify(i),"."));throw a(s.message),o.onError(s),s}}},407:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,d=1,h=arguments.length;d<h;d++)for(var v in f=arguments[d])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h,v,p=d.call(c),g=[];try{for(;(f===void 0||f-- >0)&&!(h=p.next()).done;)g.push(h.value)}catch(y){v={error:y}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(v)throw v.error}}return g};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var a=t(6587),o=function(c,f,d,h,v){this.scheme=c,this.host=f,this.port=d,this.hostAndPort=h,this.query=v};function s(c,f,d){if((c=(c??"").trim())==="")throw new Error("Illegal empty ".concat(f," in URL query '").concat(d,"'"));return c}function u(c){var f=c.charAt(0)==="[",d=c.charAt(c.length-1)==="]";if(f||d){if(f&&d)return c;throw new Error("Illegal IPv6 address ".concat(c))}return"[".concat(c,"]")}function l(c){return c==="http"?7474:c==="https"?7473:7687}e.Url=o,e.parseDatabaseUrl=function(c){var f;(0,a.assertString)(c,"URL");var d,h=function(x){return(x=x.trim()).includes("://")?{schemeMissing:!1,url:x}:{schemeMissing:!0,url:"none://".concat(x)}}(c),v=function(x){function C(A,k){var R=A.indexOf(k);return R>=0?[A.substring(0,R),A[R],A.substring(R+1)]:[A,"",""]}var w,O={};return(w=C(x,":"))[1]===":"&&(O.scheme=decodeURIComponent(w[0]),x=w[2]),(w=C(x,"#"))[1]==="#"&&(O.fragment=decodeURIComponent(w[2]),x=w[0]),(w=C(x,"?"))[1]==="?"&&(O.query=w[2],x=w[0]),x.startsWith("//")?(w=C(x.substr(2),"/"),(O=n(n({},O),function(A){var k,R={};(k=function(F,z){var B=F.lastIndexOf(z);return B>=0?[F.substring(0,B),F[B],F.substring(B+1)]:["","",F]}(A,"@"))[1]==="@"&&(R.userInfo=decodeURIComponent(k[0]),A=k[2]);var I=i(function(F,z,B){var U=C(F,z),W=C(U[2],B);return[W[0],W[2]]}(A,"[","]"),2),M=I[0],N=I[1];return M!==""?(R.host=M,k=C(N,":")):(k=C(A,":"),R.host=k[0]),k[1]===":"&&(R.port=k[2]),R}(w[0]))).path=w[1]+w[2]):O.path=x,O}(h.url),p=h.schemeMissing?null:function(x){return x!=null?((x=x.trim()).charAt(x.length-1)===":"&&(x=x.substring(0,x.length-1)),x):null}(v.scheme),g=function(x){if(x==null)throw new Error("Unable to extract host from null or undefined URL");return x.trim()}(v.host),y=function(x){if(x===""||x==null)throw new Error("Illegal host ".concat(x));return x.includes(":")?u(x):x}(g),b=function(x,C){var w=typeof x=="string"?parseInt(x,10):x;return w==null||isNaN(w)?l(C):w}(v.port,p),m="".concat(y,":").concat(b),_=function(x,C){var w=x!=null?function(A){return((A=(A??"").trim())==null?void 0:A.charAt(0))==="?"&&(A=A.substring(1,A.length)),A}(x):null,O={};return w!=null&&w.split("&").forEach(function(A){var k=A.split("=");if(k.length!==2)throw new Error("Invalid parameters: '".concat(k.toString(),"' in URL '").concat(C,"'."));var R=s(k[0],"key",C),I=s(k[1],"value",C);if(O[R]!==void 0)throw new Error("Duplicated query parameters with key '".concat(R,"' in URL '").concat(C,"'"));O[R]=I}),O}((f=v.query)!==null&&f!==void 0?f:typeof(d=v.resourceName)!="string"?null:i(d.split("?"),2)[1],c);return new o(p,g,b,m,_)},e.formatIPv4Address=function(c,f){return"".concat(c,":").concat(f)},e.formatIPv6Address=function(c,f){var d=u(c);return"".concat(d,":").concat(f)},e.defaultPortForScheme=l},481:(r,e,t)=>{r.exports=t(137)},489:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeInterval=e.timeInterval=void 0;var n=t(7961),i=t(7843),a=t(3111);e.timeInterval=function(s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=s.now();u.subscribe(a.createOperatorSubscriber(l,function(f){var d=s.now(),h=d-c;c=d,l.next(new o(f,h))}))})};var o=function(s,u){this.value=s,this.interval=u};e.TimeInterval=o},490:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=void 0;var n=t(7843),i=t(3111),a=t(1342);e.ignoreElements=function(){return n.operate(function(o,s){o.subscribe(i.createOperatorSubscriber(s,a.noop))})}},582:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=void 0;var n=t(7843),i=t(3111),a=t(9445);e.sequenceEqual=function(o,s){return s===void 0&&(s=function(u,l){return u===l}),n.operate(function(u,l){var c={buffer:[],complete:!1},f={buffer:[],complete:!1},d=function(v){l.next(v),l.complete()},h=function(v,p){var g=i.createOperatorSubscriber(l,function(y){var b=p.buffer,m=p.complete;b.length===0?m?d(!1):v.buffer.push(y):!s(y,b.shift())&&d(!1)},function(){v.complete=!0;var y=p.complete,b=p.buffer;y&&d(b.length===0),g==null||g.unsubscribe()});return g};u.subscribe(h(c,f)),a.innerFrom(o).subscribe(h(f,c))})}},614:function(r,e){var t=this&&this.__awaiter||function(i,a,o,s){return new(o||(o=Promise))(function(u,l){function c(h){try{d(s.next(h))}catch(v){l(v)}}function f(h){try{d(s.throw(h))}catch(v){l(v)}}function d(h){var v;h.done?u(h.value):(v=h.value,v instanceof o?v:new o(function(p){p(v)})).then(c,f)}d((s=s.apply(i,a||[])).next())})},n=this&&this.__generator||function(i,a){var o,s,u,l,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return l={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function f(d){return function(h){return function(v){if(o)throw new TypeError("Generator is already executing.");for(;l&&(l=0,v[0]&&(c=0)),c;)try{if(o=1,s&&(u=2&v[0]?s.return:v[0]?s.throw||((u=s.return)&&u.call(s),0):s.next)&&!(u=u.call(s,v[1])).done)return u;switch(s=0,u&&(v=[2&v[0],u.value]),v[0]){case 0:case 1:u=v;break;case 4:return c.label++,{value:v[1],done:!1};case 5:c.label++,s=v[1],v=[0];continue;case 7:v=c.ops.pop(),c.trys.pop();continue;default:if(!((u=(u=c.trys).length>0&&u[u.length-1])||v[0]!==6&&v[0]!==2)){c=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){c.label=v[1];break}if(v[0]===6&&c.label<u[1]){c.label=u[1],u=v;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(v);break}u[2]&&c.ops.pop(),c.trys.pop();continue}v=a.call(i,c)}catch(p){v=[6,p],s=0}finally{o=u=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([d,h])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(i){return t(this,void 0,void 0,function(){return n(this,function(a){return[2,i]})})}}},715:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){this._offset=i||0}return n.prototype.next=function(i){if(i===0)return-1;var a=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),a%i},n}();e.default=t},754:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,d,h,v){v===void 0&&(v=h);var p=Object.getOwnPropertyDescriptor(d,h);p&&!("get"in p?!d.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(f,v,p)}:function(f,d,h,v){v===void 0&&(v=h),f[v]=d[h]}),i=this&&this.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),a=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var h in f)h!=="default"&&Object.prototype.hasOwnProperty.call(f,h)&&n(d,f,h);return i(d,f),d};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var o=a(t(6587)),s=t(9691),u=t(3371),l=function(){function f(d,h){(function(v){v!=null&&o.assertObject(v,"Transaction config")})(d),this.timeout=function(v,p){if(o.isObject(v)&&v.timeout!=null){o.assertNumberOrInteger(v.timeout,"Transaction timeout"),function(y){return typeof y.timeout=="number"&&!Number.isInteger(y.timeout)}(v)&&(p==null?void 0:p.isInfoEnabled())===!0&&(p==null||p.info("Transaction timeout expected to be an integer, got: ".concat(v.timeout,". The value will be rounded up.")));var g=(0,u.int)(v.timeout,{ceilFloat:!0});if(g.isNegative())throw(0,s.newError)("Transaction timeout should not be negative");return g}return null}(d,h),this.metadata=function(v){if(o.isObject(v)&&v.metadata!=null){var p=v.metadata;if(o.assertObject(p,"config.metadata"),Object.keys(p).length!==0)return p}return null}(d)}return f.empty=function(){return c},f.prototype.isEmpty=function(){return Object.values(this).every(function(d){return d==null})},f}();e.TxConfig=l;var c=new l({})},766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publish=void 0;var n=t(2483),i=t(9247),a=t(1483);e.publish=function(o){return o?function(s){return a.connect(o)(s)}:function(s){return i.multicast(new n.Subject)(s)}}},783:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;var n=t(7843),i=t(3111);e.filter=function(a,o){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){return a.call(o,c,l++)&&u.next(c)}))})}},827:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AsapScheduler=void 0;var i=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return n(o,a),o.prototype.flush=function(s){this._active=!0;var u=this._scheduled;this._scheduled=void 0;var l,c=this.actions;s=s||c.shift();do if(l=s.execute(s.state,s.delay))break;while((s=c[0])&&s.id===u&&c.shift());if(this._active=!1,l){for(;(s=c[0])&&s.id===u&&c.shift();)s.unsubscribe();throw l}},o}(t(5648).AsyncScheduler);e.AsapScheduler=i},844:function(r,e,t){var n=this&&this.__extends||function(){var h=function(v,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])},h(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function g(){this.constructor=v}h(v,p),v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),i=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(1711)),o=t(397),s=i(t(7449)),u=i(t(3321)),l=i(t(7021)),c=t(9014),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_0,d=function(h){function v(){return h!==null&&h.apply(this,arguments)||this}return n(v,h),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(g){return g(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.initialize=function(p){var g=this,y=p===void 0?{}:p,b=y.userAgent,m=(y.boltAgent,y.authToken),_=y.notificationFilter,x=y.onError,C=y.onComplete,w=new c.LoginObserver({onError:function(O){return g._onLoginError(O,x)},onCompleted:function(O){return g._onLoginCompleted(O,m,C)}});return(0,o.assertNotificationFilterIsEmpty)(_,this._onProtocolError,w),this.write(l.default.hello(b,m,this._serversideRouting),w,!0),w},v}(a.default);e.default=d},846:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.take=void 0;var n=t(8616),i=t(7843),a=t(3111);e.take=function(o){return o<=0?function(){return n.EMPTY}:i.operate(function(s,u){var l=0;s.subscribe(a.createOperatorSubscriber(u,function(c){++l<=o&&(u.next(c),o<=l&&u.complete())}))})}},854:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAsyncIterable=void 0;var n=t(4662),i=t(7110);e.scheduleAsyncIterable=function(a,o){if(!a)throw new Error("Iterable cannot be null");return new n.Observable(function(s){i.executeSchedule(s,o,function(){var u=a[Symbol.asyncIterator]();i.executeSchedule(s,o,function(){u.next().then(function(l){l.done?s.complete():s.next(l.value)})},0,!0)})})}},914:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0;var n=t(7961),i=t(8766),a=t(4092);e.delay=function(o,s){s===void 0&&(s=n.asyncScheduler);var u=a.timer(o,s);return i.delayWhen(function(){return u})}},934:function(r,e,t){var n=this&&this.__extends||function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},p(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=g}p(g,y),g.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(p){for(var g,y=1,b=arguments.length;y<b;y++)for(var m in g=arguments[y])Object.prototype.hasOwnProperty.call(g,m)&&(p[m]=g[m]);return p},i.apply(this,arguments)},a=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(6345)),s=a(t(3019)),u=a(t(3321)),l=a(t(7021)),c=t(9014),f=t(9305).internal.constants,d=f.BOLT_PROTOCOL_V5_2,h=f.FETCH_ALL,v=function(p){function g(){return p!==null&&p.apply(this,arguments)||this}return n(g,p),Object.defineProperty(g.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"transformer",{get:function(){var y=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(b){return b(y._config,y._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),g.prototype.initialize=function(y){var b=this,m=y===void 0?{}:y,_=m.userAgent,x=(m.boltAgent,m.authToken),C=m.notificationFilter,w=m.onError,O=m.onComplete,A={},k=new c.LoginObserver({onError:function(R){return b._onLoginError(R,w)},onCompleted:function(R){return A.metadata=R,b._onLoginCompleted(R)}});return this.write(l.default.hello5x2(_,C,this._serversideRouting),k,!1),this.logon({authToken:x,onComplete:function(R){return O(i(i({},R),A.metadata))},onError:w,flush:!0})},g.prototype.beginTransaction=function(y){var b=y===void 0?{}:y,m=b.bookmarks,_=b.txConfig,x=b.database,C=b.mode,w=b.impersonatedUser,O=b.notificationFilter,A=b.beforeError,k=b.afterError,R=b.beforeComplete,I=b.afterComplete,M=new c.ResultStreamObserver({server:this._server,beforeError:A,afterError:k,beforeComplete:R,afterComplete:I});return M.prepareToHandleSingleResponse(),this.write(l.default.begin({bookmarks:m,txConfig:_,database:x,mode:C,impersonatedUser:w,notificationFilter:O}),M,!0),M},g.prototype.run=function(y,b,m){var _=m===void 0?{}:m,x=_.bookmarks,C=_.txConfig,w=_.database,O=_.mode,A=_.impersonatedUser,k=_.notificationFilter,R=_.beforeKeys,I=_.afterKeys,M=_.beforeError,N=_.afterError,F=_.beforeComplete,z=_.afterComplete,B=_.flush,U=B===void 0||B,W=_.reactive,Y=W!==void 0&&W,H=_.fetchSize,J=H===void 0?h:H,le=_.highRecordWatermark,fe=le===void 0?Number.MAX_VALUE:le,ue=_.lowRecordWatermark,ge=ue===void 0?Number.MAX_VALUE:ue,ve=new c.ResultStreamObserver({server:this._server,reactive:Y,fetchSize:J,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:R,afterKeys:I,beforeError:M,afterError:N,beforeComplete:F,afterComplete:z,highRecordWatermark:fe,lowRecordWatermark:ge}),de=Y;return this.write(l.default.runWithMetadata(y,b,{bookmarks:x,txConfig:C,database:w,mode:O,impersonatedUser:A,notificationFilter:k}),ve,de&&U),Y||this.write(l.default.pull({n:J}),ve,U),ve},g}(o.default);e.default=v},983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=void 0;var n=t(5471),i=t(9445),a=t(7843),o=t(1983),s=t(1018);e.mergeMap=function u(l,c,f){return f===void 0&&(f=1/0),s.isFunction(c)?u(function(d,h){return n.map(function(v,p){return c(d,v,h,p)})(i.innerFrom(l(d,h)))},f):(typeof c=="number"&&(f=c),a.operate(function(d,h){return o.mergeInternals(d,h,l,f)}))}},1004:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.of=void 0;var n=t(1107),i=t(4917);e.of=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var s=n.popScheduler(a);return i.from(a,s)}},1018:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=void 0,e.isFunction=function(t){return typeof t=="function"}},1038:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.count=void 0;var n=t(9139);e.count=function(i){return n.reduce(function(a,o,s){return!i||i(o,s)?a+1:a},0)}},1048:(r,e,t)=>{const n=t(7991),i=t(9318),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(j){return+j!=j&&(j=0),u.alloc(+j)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function s(j){if(j>o)throw new RangeError('The value "'+j+'" is invalid for option "size"');const G=new Uint8Array(j);return Object.setPrototypeOf(G,u.prototype),G}function u(j,G,$){if(typeof j=="number"){if(typeof G=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(j)}return l(j,G,$)}function l(j,G,$){if(typeof j=="string")return function(he,xe){if(typeof xe=="string"&&xe!==""||(xe="utf8"),!u.isEncoding(xe))throw new TypeError("Unknown encoding: "+xe);const Ne=0|p(he,xe);let We=s(Ne);const ot=We.write(he,xe);return ot!==Ne&&(We=We.slice(0,ot)),We}(j,G);if(ArrayBuffer.isView(j))return function(he){if(pe(he,Uint8Array)){const xe=new Uint8Array(he);return h(xe.buffer,xe.byteOffset,xe.byteLength)}return d(he)}(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(pe(j,ArrayBuffer)||j&&pe(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(pe(j,SharedArrayBuffer)||j&&pe(j.buffer,SharedArrayBuffer)))return h(j,G,$);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const te=j.valueOf&&j.valueOf();if(te!=null&&te!==j)return u.from(te,G,$);const ce=function(he){if(u.isBuffer(he)){const xe=0|v(he.length),Ne=s(xe);return Ne.length===0||he.copy(Ne,0,0,xe),Ne}return he.length!==void 0?typeof he.length!="number"||Oe(he.length)?s(0):d(he):he.type==="Buffer"&&Array.isArray(he.data)?d(he.data):void 0}(j);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return u.from(j[Symbol.toPrimitive]("string"),G,$);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function c(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function f(j){return c(j),s(j<0?0:0|v(j))}function d(j){const G=j.length<0?0:0|v(j.length),$=s(G);for(let te=0;te<G;te+=1)$[te]=255&j[te];return $}function h(j,G,$){if(G<0||j.byteLength<G)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<G+($||0))throw new RangeError('"length" is outside of buffer bounds');let te;return te=G===void 0&&$===void 0?new Uint8Array(j):$===void 0?new Uint8Array(j,G):new Uint8Array(j,G,$),Object.setPrototypeOf(te,u.prototype),te}function v(j){if(j>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|j}function p(j,G){if(u.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||pe(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const $=j.length,te=arguments.length>2&&arguments[2]===!0;if(!te&&$===0)return 0;let ce=!1;for(;;)switch(G){case"ascii":case"latin1":case"binary":return $;case"utf8":case"utf-8":return Q(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*$;case"hex":return $>>>1;case"base64":return re(j).length;default:if(ce)return te?-1:Q(j).length;G=(""+G).toLowerCase(),ce=!0}}function g(j,G,$){let te=!1;if((G===void 0||G<0)&&(G=0),G>this.length||(($===void 0||$>this.length)&&($=this.length),$<=0)||($>>>=0)<=(G>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return N(this,G,$);case"utf8":case"utf-8":return k(this,G,$);case"ascii":return I(this,G,$);case"latin1":case"binary":return M(this,G,$);case"base64":return A(this,G,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,G,$);default:if(te)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),te=!0}}function y(j,G,$){const te=j[G];j[G]=j[$],j[$]=te}function b(j,G,$,te,ce){if(j.length===0)return-1;if(typeof $=="string"?(te=$,$=0):$>2147483647?$=2147483647:$<-2147483648&&($=-2147483648),Oe($=+$)&&($=ce?0:j.length-1),$<0&&($=j.length+$),$>=j.length){if(ce)return-1;$=j.length-1}else if($<0){if(!ce)return-1;$=0}if(typeof G=="string"&&(G=u.from(G,te)),u.isBuffer(G))return G.length===0?-1:m(j,G,$,te,ce);if(typeof G=="number")return G&=255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(j,G,$):Uint8Array.prototype.lastIndexOf.call(j,G,$):m(j,[G],$,te,ce);throw new TypeError("val must be string, number or Buffer")}function m(j,G,$,te,ce){let he,xe=1,Ne=j.length,We=G.length;if(te!==void 0&&((te=String(te).toLowerCase())==="ucs2"||te==="ucs-2"||te==="utf16le"||te==="utf-16le")){if(j.length<2||G.length<2)return-1;xe=2,Ne/=2,We/=2,$/=2}function ot(Ze,et){return xe===1?Ze[et]:Ze.readUInt16BE(et*xe)}if(ce){let Ze=-1;for(he=$;he<Ne;he++)if(ot(j,he)===ot(G,Ze===-1?0:he-Ze)){if(Ze===-1&&(Ze=he),he-Ze+1===We)return Ze*xe}else Ze!==-1&&(he-=he-Ze),Ze=-1}else for($+We>Ne&&($=Ne-We),he=$;he>=0;he--){let Ze=!0;for(let et=0;et<We;et++)if(ot(j,he+et)!==ot(G,et)){Ze=!1;break}if(Ze)return he}return-1}function _(j,G,$,te){$=Number($)||0;const ce=j.length-$;te?(te=Number(te))>ce&&(te=ce):te=ce;const he=G.length;let xe;for(te>he/2&&(te=he/2),xe=0;xe<te;++xe){const Ne=parseInt(G.substr(2*xe,2),16);if(Oe(Ne))return xe;j[$+xe]=Ne}return xe}function x(j,G,$,te){return se(Q(G,j.length-$),j,$,te)}function C(j,G,$,te){return se(function(ce){const he=[];for(let xe=0;xe<ce.length;++xe)he.push(255&ce.charCodeAt(xe));return he}(G),j,$,te)}function w(j,G,$,te){return se(re(G),j,$,te)}function O(j,G,$,te){return se(function(ce,he){let xe,Ne,We;const ot=[];for(let Ze=0;Ze<ce.length&&!((he-=2)<0);++Ze)xe=ce.charCodeAt(Ze),Ne=xe>>8,We=xe%256,ot.push(We),ot.push(Ne);return ot}(G,j.length-$),j,$,te)}function A(j,G,$){return G===0&&$===j.length?n.fromByteArray(j):n.fromByteArray(j.slice(G,$))}function k(j,G,$){$=Math.min(j.length,$);const te=[];let ce=G;for(;ce<$;){const he=j[ce];let xe=null,Ne=he>239?4:he>223?3:he>191?2:1;if(ce+Ne<=$){let We,ot,Ze,et;switch(Ne){case 1:he<128&&(xe=he);break;case 2:We=j[ce+1],(192&We)==128&&(et=(31&he)<<6|63&We,et>127&&(xe=et));break;case 3:We=j[ce+1],ot=j[ce+2],(192&We)==128&&(192&ot)==128&&(et=(15&he)<<12|(63&We)<<6|63&ot,et>2047&&(et<55296||et>57343)&&(xe=et));break;case 4:We=j[ce+1],ot=j[ce+2],Ze=j[ce+3],(192&We)==128&&(192&ot)==128&&(192&Ze)==128&&(et=(15&he)<<18|(63&We)<<12|(63&ot)<<6|63&Ze,et>65535&&et<1114112&&(xe=et))}}xe===null?(xe=65533,Ne=1):xe>65535&&(xe-=65536,te.push(xe>>>10&1023|55296),xe=56320|1023&xe),te.push(xe),ce+=Ne}return function(he){const xe=he.length;if(xe<=R)return String.fromCharCode.apply(String,he);let Ne="",We=0;for(;We<xe;)Ne+=String.fromCharCode.apply(String,he.slice(We,We+=R));return Ne}(te)}e.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=function(){try{const j=new Uint8Array(1),G={foo:function(){return 42}};return Object.setPrototypeOf(G,Uint8Array.prototype),Object.setPrototypeOf(j,G),j.foo()===42}catch{return!1}}(),u.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(j,G,$){return l(j,G,$)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array),u.alloc=function(j,G,$){return function(te,ce,he){return c(te),te<=0?s(te):ce!==void 0?typeof he=="string"?s(te).fill(ce,he):s(te).fill(ce):s(te)}(j,G,$)},u.allocUnsafe=function(j){return f(j)},u.allocUnsafeSlow=function(j){return f(j)},u.isBuffer=function(j){return j!=null&&j._isBuffer===!0&&j!==u.prototype},u.compare=function(j,G){if(pe(j,Uint8Array)&&(j=u.from(j,j.offset,j.byteLength)),pe(G,Uint8Array)&&(G=u.from(G,G.offset,G.byteLength)),!u.isBuffer(j)||!u.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===G)return 0;let $=j.length,te=G.length;for(let ce=0,he=Math.min($,te);ce<he;++ce)if(j[ce]!==G[ce]){$=j[ce],te=G[ce];break}return $<te?-1:te<$?1:0},u.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(j,G){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(j.length===0)return u.alloc(0);let $;if(G===void 0)for(G=0,$=0;$<j.length;++$)G+=j[$].length;const te=u.allocUnsafe(G);let ce=0;for($=0;$<j.length;++$){let he=j[$];if(pe(he,Uint8Array))ce+he.length>te.length?(u.isBuffer(he)||(he=u.from(he)),he.copy(te,ce)):Uint8Array.prototype.set.call(te,he,ce);else{if(!u.isBuffer(he))throw new TypeError('"list" argument must be an Array of Buffers');he.copy(te,ce)}ce+=he.length}return te},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<j;G+=2)y(this,G,G+1);return this},u.prototype.swap32=function(){const j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<j;G+=4)y(this,G,G+3),y(this,G+1,G+2);return this},u.prototype.swap64=function(){const j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<j;G+=8)y(this,G,G+7),y(this,G+1,G+6),y(this,G+2,G+5),y(this,G+3,G+4);return this},u.prototype.toString=function(){const j=this.length;return j===0?"":arguments.length===0?k(this,0,j):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(j){if(!u.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||u.compare(this,j)===0},u.prototype.inspect=function(){let j="";const G=e.INSPECT_MAX_BYTES;return j=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(j+=" ... "),"<Buffer "+j+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(j,G,$,te,ce){if(pe(j,Uint8Array)&&(j=u.from(j,j.offset,j.byteLength)),!u.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(G===void 0&&(G=0),$===void 0&&($=j?j.length:0),te===void 0&&(te=0),ce===void 0&&(ce=this.length),G<0||$>j.length||te<0||ce>this.length)throw new RangeError("out of range index");if(te>=ce&&G>=$)return 0;if(te>=ce)return-1;if(G>=$)return 1;if(this===j)return 0;let he=(ce>>>=0)-(te>>>=0),xe=($>>>=0)-(G>>>=0);const Ne=Math.min(he,xe),We=this.slice(te,ce),ot=j.slice(G,$);for(let Ze=0;Ze<Ne;++Ze)if(We[Ze]!==ot[Ze]){he=We[Ze],xe=ot[Ze];break}return he<xe?-1:xe<he?1:0},u.prototype.includes=function(j,G,$){return this.indexOf(j,G,$)!==-1},u.prototype.indexOf=function(j,G,$){return b(this,j,G,$,!0)},u.prototype.lastIndexOf=function(j,G,$){return b(this,j,G,$,!1)},u.prototype.write=function(j,G,$,te){if(G===void 0)te="utf8",$=this.length,G=0;else if($===void 0&&typeof G=="string")te=G,$=this.length,G=0;else{if(!isFinite(G))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");G>>>=0,isFinite($)?($>>>=0,te===void 0&&(te="utf8")):(te=$,$=void 0)}const ce=this.length-G;if(($===void 0||$>ce)&&($=ce),j.length>0&&($<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let he=!1;for(;;)switch(te){case"hex":return _(this,j,G,$);case"utf8":case"utf-8":return x(this,j,G,$);case"ascii":case"latin1":case"binary":return C(this,j,G,$);case"base64":return w(this,j,G,$);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,j,G,$);default:if(he)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),he=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function I(j,G,$){let te="";$=Math.min(j.length,$);for(let ce=G;ce<$;++ce)te+=String.fromCharCode(127&j[ce]);return te}function M(j,G,$){let te="";$=Math.min(j.length,$);for(let ce=G;ce<$;++ce)te+=String.fromCharCode(j[ce]);return te}function N(j,G,$){const te=j.length;(!G||G<0)&&(G=0),(!$||$<0||$>te)&&($=te);let ce="";for(let he=G;he<$;++he)ce+=Ce[j[he]];return ce}function F(j,G,$){const te=j.slice(G,$);let ce="";for(let he=0;he<te.length-1;he+=2)ce+=String.fromCharCode(te[he]+256*te[he+1]);return ce}function z(j,G,$){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+G>$)throw new RangeError("Trying to access beyond buffer length")}function B(j,G,$,te,ce,he){if(!u.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(G>ce||G<he)throw new RangeError('"value" argument is out of bounds');if($+te>j.length)throw new RangeError("Index out of range")}function U(j,G,$,te,ce){ge(G,te,ce,j,$,7);let he=Number(G&BigInt(4294967295));j[$++]=he,he>>=8,j[$++]=he,he>>=8,j[$++]=he,he>>=8,j[$++]=he;let xe=Number(G>>BigInt(32)&BigInt(4294967295));return j[$++]=xe,xe>>=8,j[$++]=xe,xe>>=8,j[$++]=xe,xe>>=8,j[$++]=xe,$}function W(j,G,$,te,ce){ge(G,te,ce,j,$,7);let he=Number(G&BigInt(4294967295));j[$+7]=he,he>>=8,j[$+6]=he,he>>=8,j[$+5]=he,he>>=8,j[$+4]=he;let xe=Number(G>>BigInt(32)&BigInt(4294967295));return j[$+3]=xe,xe>>=8,j[$+2]=xe,xe>>=8,j[$+1]=xe,xe>>=8,j[$]=xe,$+8}function Y(j,G,$,te,ce,he){if($+te>j.length)throw new RangeError("Index out of range");if($<0)throw new RangeError("Index out of range")}function H(j,G,$,te,ce){return G=+G,$>>>=0,ce||Y(j,0,$,4),i.write(j,G,$,te,23,4),$+4}function J(j,G,$,te,ce){return G=+G,$>>>=0,ce||Y(j,0,$,8),i.write(j,G,$,te,52,8),$+8}u.prototype.slice=function(j,G){const $=this.length;(j=~~j)<0?(j+=$)<0&&(j=0):j>$&&(j=$),(G=G===void 0?$:~~G)<0?(G+=$)<0&&(G=0):G>$&&(G=$),G<j&&(G=j);const te=this.subarray(j,G);return Object.setPrototypeOf(te,u.prototype),te},u.prototype.readUintLE=u.prototype.readUIntLE=function(j,G,$){j>>>=0,G>>>=0,$||z(j,G,this.length);let te=this[j],ce=1,he=0;for(;++he<G&&(ce*=256);)te+=this[j+he]*ce;return te},u.prototype.readUintBE=u.prototype.readUIntBE=function(j,G,$){j>>>=0,G>>>=0,$||z(j,G,this.length);let te=this[j+--G],ce=1;for(;G>0&&(ce*=256);)te+=this[j+--G]*ce;return te},u.prototype.readUint8=u.prototype.readUInt8=function(j,G){return j>>>=0,G||z(j,1,this.length),this[j]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(j,G){return j>>>=0,G||z(j,2,this.length),this[j]|this[j+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(j,G){return j>>>=0,G||z(j,2,this.length),this[j]<<8|this[j+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(j,G){return j>>>=0,G||z(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(j,G){return j>>>=0,G||z(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},u.prototype.readBigUInt64LE=Re(function(j){ve(j>>>=0,"offset");const G=this[j],$=this[j+7];G!==void 0&&$!==void 0||de(j,this.length-8);const te=G+256*this[++j]+65536*this[++j]+this[++j]*2**24,ce=this[++j]+256*this[++j]+65536*this[++j]+$*2**24;return BigInt(te)+(BigInt(ce)<<BigInt(32))}),u.prototype.readBigUInt64BE=Re(function(j){ve(j>>>=0,"offset");const G=this[j],$=this[j+7];G!==void 0&&$!==void 0||de(j,this.length-8);const te=G*2**24+65536*this[++j]+256*this[++j]+this[++j],ce=this[++j]*2**24+65536*this[++j]+256*this[++j]+$;return(BigInt(te)<<BigInt(32))+BigInt(ce)}),u.prototype.readIntLE=function(j,G,$){j>>>=0,G>>>=0,$||z(j,G,this.length);let te=this[j],ce=1,he=0;for(;++he<G&&(ce*=256);)te+=this[j+he]*ce;return ce*=128,te>=ce&&(te-=Math.pow(2,8*G)),te},u.prototype.readIntBE=function(j,G,$){j>>>=0,G>>>=0,$||z(j,G,this.length);let te=G,ce=1,he=this[j+--te];for(;te>0&&(ce*=256);)he+=this[j+--te]*ce;return ce*=128,he>=ce&&(he-=Math.pow(2,8*G)),he},u.prototype.readInt8=function(j,G){return j>>>=0,G||z(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},u.prototype.readInt16LE=function(j,G){j>>>=0,G||z(j,2,this.length);const $=this[j]|this[j+1]<<8;return 32768&$?4294901760|$:$},u.prototype.readInt16BE=function(j,G){j>>>=0,G||z(j,2,this.length);const $=this[j+1]|this[j]<<8;return 32768&$?4294901760|$:$},u.prototype.readInt32LE=function(j,G){return j>>>=0,G||z(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},u.prototype.readInt32BE=function(j,G){return j>>>=0,G||z(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},u.prototype.readBigInt64LE=Re(function(j){ve(j>>>=0,"offset");const G=this[j],$=this[j+7];G!==void 0&&$!==void 0||de(j,this.length-8);const te=this[j+4]+256*this[j+5]+65536*this[j+6]+($<<24);return(BigInt(te)<<BigInt(32))+BigInt(G+256*this[++j]+65536*this[++j]+this[++j]*2**24)}),u.prototype.readBigInt64BE=Re(function(j){ve(j>>>=0,"offset");const G=this[j],$=this[j+7];G!==void 0&&$!==void 0||de(j,this.length-8);const te=(G<<24)+65536*this[++j]+256*this[++j]+this[++j];return(BigInt(te)<<BigInt(32))+BigInt(this[++j]*2**24+65536*this[++j]+256*this[++j]+$)}),u.prototype.readFloatLE=function(j,G){return j>>>=0,G||z(j,4,this.length),i.read(this,j,!0,23,4)},u.prototype.readFloatBE=function(j,G){return j>>>=0,G||z(j,4,this.length),i.read(this,j,!1,23,4)},u.prototype.readDoubleLE=function(j,G){return j>>>=0,G||z(j,8,this.length),i.read(this,j,!0,52,8)},u.prototype.readDoubleBE=function(j,G){return j>>>=0,G||z(j,8,this.length),i.read(this,j,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(j,G,$,te){j=+j,G>>>=0,$>>>=0,te||B(this,j,G,$,Math.pow(2,8*$)-1,0);let ce=1,he=0;for(this[G]=255&j;++he<$&&(ce*=256);)this[G+he]=j/ce&255;return G+$},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(j,G,$,te){j=+j,G>>>=0,$>>>=0,te||B(this,j,G,$,Math.pow(2,8*$)-1,0);let ce=$-1,he=1;for(this[G+ce]=255&j;--ce>=0&&(he*=256);)this[G+ce]=j/he&255;return G+$},u.prototype.writeUint8=u.prototype.writeUInt8=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,1,255,0),this[G]=255&j,G+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,2,65535,0),this[G]=255&j,this[G+1]=j>>>8,G+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,2,65535,0),this[G]=j>>>8,this[G+1]=255&j,G+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,4,4294967295,0),this[G+3]=j>>>24,this[G+2]=j>>>16,this[G+1]=j>>>8,this[G]=255&j,G+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,4,4294967295,0),this[G]=j>>>24,this[G+1]=j>>>16,this[G+2]=j>>>8,this[G+3]=255&j,G+4},u.prototype.writeBigUInt64LE=Re(function(j,G=0){return U(this,j,G,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=Re(function(j,G=0){return W(this,j,G,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(j,G,$,te){if(j=+j,G>>>=0,!te){const Ne=Math.pow(2,8*$-1);B(this,j,G,$,Ne-1,-Ne)}let ce=0,he=1,xe=0;for(this[G]=255&j;++ce<$&&(he*=256);)j<0&&xe===0&&this[G+ce-1]!==0&&(xe=1),this[G+ce]=(j/he|0)-xe&255;return G+$},u.prototype.writeIntBE=function(j,G,$,te){if(j=+j,G>>>=0,!te){const Ne=Math.pow(2,8*$-1);B(this,j,G,$,Ne-1,-Ne)}let ce=$-1,he=1,xe=0;for(this[G+ce]=255&j;--ce>=0&&(he*=256);)j<0&&xe===0&&this[G+ce+1]!==0&&(xe=1),this[G+ce]=(j/he|0)-xe&255;return G+$},u.prototype.writeInt8=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,1,127,-128),j<0&&(j=255+j+1),this[G]=255&j,G+1},u.prototype.writeInt16LE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,2,32767,-32768),this[G]=255&j,this[G+1]=j>>>8,G+2},u.prototype.writeInt16BE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,2,32767,-32768),this[G]=j>>>8,this[G+1]=255&j,G+2},u.prototype.writeInt32LE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,4,2147483647,-2147483648),this[G]=255&j,this[G+1]=j>>>8,this[G+2]=j>>>16,this[G+3]=j>>>24,G+4},u.prototype.writeInt32BE=function(j,G,$){return j=+j,G>>>=0,$||B(this,j,G,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[G]=j>>>24,this[G+1]=j>>>16,this[G+2]=j>>>8,this[G+3]=255&j,G+4},u.prototype.writeBigInt64LE=Re(function(j,G=0){return U(this,j,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=Re(function(j,G=0){return W(this,j,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(j,G,$){return H(this,j,G,!0,$)},u.prototype.writeFloatBE=function(j,G,$){return H(this,j,G,!1,$)},u.prototype.writeDoubleLE=function(j,G,$){return J(this,j,G,!0,$)},u.prototype.writeDoubleBE=function(j,G,$){return J(this,j,G,!1,$)},u.prototype.copy=function(j,G,$,te){if(!u.isBuffer(j))throw new TypeError("argument should be a Buffer");if($||($=0),te||te===0||(te=this.length),G>=j.length&&(G=j.length),G||(G=0),te>0&&te<$&&(te=$),te===$||j.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if($<0||$>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),j.length-G<te-$&&(te=j.length-G+$);const ce=te-$;return this===j&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(G,$,te):Uint8Array.prototype.set.call(j,this.subarray($,te),G),ce},u.prototype.fill=function(j,G,$,te){if(typeof j=="string"){if(typeof G=="string"?(te=G,G=0,$=this.length):typeof $=="string"&&(te=$,$=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!u.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(j.length===1){const he=j.charCodeAt(0);(te==="utf8"&&he<128||te==="latin1")&&(j=he)}}else typeof j=="number"?j&=255:typeof j=="boolean"&&(j=Number(j));if(G<0||this.length<G||this.length<$)throw new RangeError("Out of range index");if($<=G)return this;let ce;if(G>>>=0,$=$===void 0?this.length:$>>>0,j||(j=0),typeof j=="number")for(ce=G;ce<$;++ce)this[ce]=j;else{const he=u.isBuffer(j)?j:u.from(j,te),xe=he.length;if(xe===0)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(ce=0;ce<$-G;++ce)this[ce+G]=he[ce%xe]}return this};const le={};function fe(j,G,$){le[j]=class extends ${constructor(){super(),Object.defineProperty(this,"message",{value:G.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(te){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:te,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}function ue(j){let G="",$=j.length;const te=j[0]==="-"?1:0;for(;$>=te+4;$-=3)G=`_${j.slice($-3,$)}${G}`;return`${j.slice(0,$)}${G}`}function ge(j,G,$,te,ce,he){if(j>$||j<G){const xe=typeof G=="bigint"?"n":"";let Ne;throw Ne=G===0||G===BigInt(0)?`>= 0${xe} and < 2${xe} ** ${8*(he+1)}${xe}`:`>= -(2${xe} ** ${8*(he+1)-1}${xe}) and < 2 ** ${8*(he+1)-1}${xe}`,new le.ERR_OUT_OF_RANGE("value",Ne,j)}(function(xe,Ne,We){ve(Ne,"offset"),xe[Ne]!==void 0&&xe[Ne+We]!==void 0||de(Ne,xe.length-(We+1))})(te,ce,he)}function ve(j,G){if(typeof j!="number")throw new le.ERR_INVALID_ARG_TYPE(G,"number",j)}function de(j,G,$){throw Math.floor(j)!==j?(ve(j,$),new le.ERR_OUT_OF_RANGE("offset","an integer",j)):G<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${G}`,j)}fe("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fe("ERR_INVALID_ARG_TYPE",function(j,G){return`The "${j}" argument must be of type number. Received type ${typeof G}`},TypeError),fe("ERR_OUT_OF_RANGE",function(j,G,$){let te=`The value of "${j}" is out of range.`,ce=$;return Number.isInteger($)&&Math.abs($)>2**32?ce=ue(String($)):typeof $=="bigint"&&(ce=String($),($>BigInt(2)**BigInt(32)||$<-(BigInt(2)**BigInt(32)))&&(ce=ue(ce)),ce+="n"),te+=` It must be ${G}. Received ${ce}`,te},RangeError);const ie=/[^+/0-9A-Za-z-_]/g;function Q(j,G){let $;G=G||1/0;const te=j.length;let ce=null;const he=[];for(let xe=0;xe<te;++xe){if($=j.charCodeAt(xe),$>55295&&$<57344){if(!ce){if($>56319){(G-=3)>-1&&he.push(239,191,189);continue}if(xe+1===te){(G-=3)>-1&&he.push(239,191,189);continue}ce=$;continue}if($<56320){(G-=3)>-1&&he.push(239,191,189),ce=$;continue}$=65536+(ce-55296<<10|$-56320)}else ce&&(G-=3)>-1&&he.push(239,191,189);if(ce=null,$<128){if((G-=1)<0)break;he.push($)}else if($<2048){if((G-=2)<0)break;he.push($>>6|192,63&$|128)}else if($<65536){if((G-=3)<0)break;he.push($>>12|224,$>>6&63|128,63&$|128)}else{if(!($<1114112))throw new Error("Invalid code point");if((G-=4)<0)break;he.push($>>18|240,$>>12&63|128,$>>6&63|128,63&$|128)}}return he}function re(j){return n.toByteArray(function(G){if((G=(G=G.split("=")[0]).trim().replace(ie,"")).length<2)return"";for(;G.length%4!=0;)G+="=";return G}(j))}function se(j,G,$,te){let ce;for(ce=0;ce<te&&!(ce+$>=G.length||ce>=j.length);++ce)G[ce+$]=j[ce];return ce}function pe(j,G){return j instanceof G||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===G.name}function Oe(j){return j!=j}const Ce=function(){const j="0123456789abcdef",G=new Array(256);for(let $=0;$<16;++$){const te=16*$;for(let ce=0;ce<16;++ce)G[te+ce]=j[$]+j[ce]}return G}();function Re(j){return typeof BigInt>"u"?be:j}function be(){throw new Error("BigInt not supported")}},1053:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.rawPolyfilledDiagnosticRecord=void 0,e.rawPolyfilledDiagnosticRecord={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"},Object.freeze(e.rawPolyfilledDiagnosticRecord)},1074:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isValidDate=void 0,e.isValidDate=function(t){return t instanceof Date&&!isNaN(t)}},1092:function(r,e,t){var n=this&&this.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(y[m]=b[m])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function y(){this.constructor=p}v(p,g),p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(6377)),o=i(t(6161)),s=i(t(3321)),u=i(t(7021)),l=t(9014),c=t(9305).internal.constants,f=c.BOLT_PROTOCOL_V5_8,d=c.FETCH_ALL,h=function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new s.default(Object.values(o.default).map(function(y){return y(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.run=function(g,y,b){var m=b===void 0?{}:b,_=m.bookmarks,x=m.txConfig,C=m.database,w=m.mode,O=m.impersonatedUser,A=m.notificationFilter,k=m.beforeKeys,R=m.afterKeys,I=m.beforeError,M=m.afterError,N=m.beforeComplete,F=m.afterComplete,z=m.flush,B=z===void 0||z,U=m.reactive,W=U!==void 0&&U,Y=m.fetchSize,H=Y===void 0?d:Y,J=m.highRecordWatermark,le=J===void 0?Number.MAX_VALUE:J,fe=m.lowRecordWatermark,ue=fe===void 0?Number.MAX_VALUE:fe,ge=m.onDb,ve=new l.ResultStreamObserver({server:this._server,reactive:W,fetchSize:H,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:k,afterKeys:R,beforeError:I,afterError:M,beforeComplete:N,afterComplete:F,highRecordWatermark:le,lowRecordWatermark:ue,enrichMetadata:this._enrichMetadata,onDb:ge}),de=W;return this.write(u.default.runWithMetadata5x5(g,y,{bookmarks:_,txConfig:x,database:C,mode:w,impersonatedUser:O,notificationFilter:A}),ve,de&&B),W||this.write(u.default.pull({n:H}),ve,B),ve},p}(a.default);e.default=h},1103:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;var n=t(4662),i=t(1018);e.throwError=function(a,o){var s=i.isFunction(a)?a:function(){return a},u=function(l){return l.error(s())};return new n.Observable(o?function(l){return o.schedule(u,0,l)}:u)}},1107:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.popNumber=e.popScheduler=e.popResultSelector=void 0;var n=t(1018),i=t(8613);function a(o){return o[o.length-1]}e.popResultSelector=function(o){return n.isFunction(a(o))?o.pop():void 0},e.popScheduler=function(o){return i.isScheduler(a(o))?o.pop():void 0},e.popNumber=function(o,s){return typeof a(o)=="number"?o.pop():s}},1116:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=void 0;var n=t(3327),i=t(1018);e.isInteropObservable=function(a){return i.isFunction(a[n.observable])}},1141:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=void 0;var n=t(2483),i=t(7843),a=t(3111),o=t(9445);e.windowWhen=function(s){return i.operate(function(u,l){var c,f,d=function(v){c.error(v),l.error(v)},h=function(){var v;f==null||f.unsubscribe(),c==null||c.complete(),c=new n.Subject,l.next(c.asObservable());try{v=o.innerFrom(s())}catch(p){return void d(p)}v.subscribe(f=a.createOperatorSubscriber(l,h,h,d))};h(),u.subscribe(a.createOperatorSubscriber(l,function(v){return c.next(v)},function(){c.complete(),l.complete()},d,function(){f==null||f.unsubscribe(),c=null}))})}},1175:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(3448));e.default=n({},a.default)},1187:function(r,e,t){var n=this&&this.__awaiter||function(F,z,B,U){return new(B||(B=Promise))(function(W,Y){function H(fe){try{le(U.next(fe))}catch(ue){Y(ue)}}function J(fe){try{le(U.throw(fe))}catch(ue){Y(ue)}}function le(fe){var ue;fe.done?W(fe.value):(ue=fe.value,ue instanceof B?ue:new B(function(ge){ge(ue)})).then(H,J)}le((U=U.apply(F,z||[])).next())})},i=this&&this.__generator||function(F,z){var B,U,W,Y,H={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return Y={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function J(le){return function(fe){return function(ue){if(B)throw new TypeError("Generator is already executing.");for(;Y&&(Y=0,ue[0]&&(H=0)),H;)try{if(B=1,U&&(W=2&ue[0]?U.return:ue[0]?U.throw||((W=U.return)&&W.call(U),0):U.next)&&!(W=W.call(U,ue[1])).done)return W;switch(U=0,W&&(ue=[2&ue[0],W.value]),ue[0]){case 0:case 1:W=ue;break;case 4:return H.label++,{value:ue[1],done:!1};case 5:H.label++,U=ue[1],ue=[0];continue;case 7:ue=H.ops.pop(),H.trys.pop();continue;default:if(!((W=(W=H.trys).length>0&&W[W.length-1])||ue[0]!==6&&ue[0]!==2)){H=0;continue}if(ue[0]===3&&(!W||ue[1]>W[0]&&ue[1]<W[3])){H.label=ue[1];break}if(ue[0]===6&&H.label<W[1]){H.label=W[1],W=ue;break}if(W&&H.label<W[2]){H.label=W[2],H.ops.push(ue);break}W[2]&&H.ops.pop(),H.trys.pop();continue}ue=z.call(F,H)}catch(ge){ue=[6,ge],U=0}finally{B=W=0}if(5&ue[0])throw ue[1];return{value:ue[0]?ue[1]:void 0,done:!0}}([le,fe])}}},a=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(e,"__esModule",{value:!0}),e.UnboundRelationship=e.Relationship=e.Node=e.Record=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ResultSummary=e.RxResult=e.RxManagedTransaction=e.RxTransaction=e.RxSession=e.EagerResult=e.Result=e.ManagedTransaction=e.Transaction=e.Session=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetryableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Integer=e.Point=e.PathSegment=e.Path=void 0;var o=t(7857);Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return o.Driver}});var s=a(t(3659)),u=t(9305);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return u.authTokenManagers}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isRetryableError",{enumerable:!0,get:function(){return u.isRetryableError}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return u.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return u.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return u.isPathSegment}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return u.isRelationship}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return u.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return u.GqlStatusObject}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return u.EagerResult}}),Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return u.auth}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return u.ManagedTransaction}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return u.bookmarkManager}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return u.routing}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return u.resultTransformers}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return u.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return u.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return u.notificationSeverityLevel}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return u.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return u.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return u.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return u.clientCertificateProviders}});var l=t(6672),c=a(t(3466));e.RxSession=c.default;var f=a(t(5742));e.RxTransaction=f.default;var d=a(t(1530));e.RxManagedTransaction=d.default;var h=a(t(3057));e.RxResult=h.default;var v=u.internal.util,p=v.ENCRYPTION_ON,g=v.assertString,y=v.isEmptyObjectOrNull,b=u.internal.serverAddress.ServerAddress,m=u.internal.urlUtil,_="neo4j-javascript/"+s.default;function x(F,z,B){B===void 0&&(B={}),g(F,"Bolt URL");var U,W=m.parseDatabaseUrl(F),Y=!1,H=!1;switch(W.scheme){case"bolt":break;case"bolt+s":H=!0,U="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":H=!0,U="TRUST_ALL_CERTIFICATES";break;case"neo4j":Y=!0;break;case"neo4j+s":H=!0,U="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",Y=!0;break;case"neo4j+ssc":H=!0,U="TRUST_ALL_CERTIFICATES",Y=!0;break;default:throw new Error("Unknown scheme: ".concat(W.scheme))}if(H){if("encrypted"in B||"trust"in B)throw new Error("Encryption/trust can only be configured either through URL or config, not both");B.encrypted=p,B.trust=U,B.clientCertificate=(0,u.resolveCertificateProvider)(B.clientCertificate)}var J=function(ue){if(typeof(ge=ue)=="object"&&ge!=null&&"getToken"in ge&&"handleSecurityException"in ge&&typeof ge.getToken=="function"&&typeof ge.handleSecurityException=="function")return ue;var ge,ve=ue;return(ve=ve||{}).scheme=ve.scheme||"none",(0,u.staticAuthTokenManager)({authToken:ve})}(z);B.userAgent=B.userAgent||_,B.boltAgent=u.internal.boltAgent.fromVersion(s.default);var le=b.fromUrl(W.hostAndPort),fe={address:le,typename:Y?"Routing":"Direct",routing:Y};return new o.Driver(fe,B,function(){if(Y)return function(ue,ge,ve,de){return new l.RoutingConnectionProvider({id:ue,config:ge,log:ve,hostNameResolver:de,authTokenManager:J,address:le,userAgent:ge.userAgent,boltAgent:ge.boltAgent,routingContext:W.query})};if(!y(W.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(F,"'"));return function(ue,ge,ve){return new l.DirectConnectionProvider({id:ue,config:ge,log:ve,authTokenManager:J,address:le,userAgent:ge.userAgent,boltAgent:ge.boltAgent})}}())}function C(F,z){return n(this,void 0,void 0,function(){var B;return i(this,function(U){switch(U.label){case 0:B=x(F,{scheme:"none",principal:"",credentials:""},z),U.label=1;case 1:return U.trys.push([1,,3,5]),[4,B.getNegotiatedProtocolVersion()];case 2:return U.sent(),[2,!0];case 3:return[4,B.close()];case 4:return U.sent(),[7];case 5:return[2]}})})}e.driver=x,e.hasReachableServer=C;var w={console:function(F){return{level:F,logger:function(z,B){return console.log("".concat(t.g.Date.now()," ").concat(z.toUpperCase()," ").concat(B))}}}};e.logging=w;var O={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,EagerResult:u.EagerResult,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};e.types=O;var A={READ:o.READ,WRITE:o.WRITE};e.session=A;var k={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};e.integer=k;var R={isPoint:u.isPoint};e.spatial=R;var I={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};e.temporal=I;var M={isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship};e.graph=M;var N={authTokenManagers:u.authTokenManagers,driver:x,hasReachableServer:C,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,isNode:u.isNode,isPath:u.isPath,isPathSegment:u.isPathSegment,isRelationship:u.isRelationship,isUnboundRelationship:u.isUnboundRelationship,integer:k,Neo4jError:u.Neo4jError,isRetryableError:u.isRetryableError,auth:u.auth,logging:w,types:O,session:A,routing:u.routing,error:u.error,graph:M,spatial:R,temporal:I,Driver:o.Driver,Session:u.Session,Transaction:u.Transaction,ManagedTransaction:u.ManagedTransaction,Result:u.Result,EagerResult:u.EagerResult,RxSession:c.default,RxTransaction:f.default,RxManagedTransaction:d.default,RxResult:h.default,ResultSummary:u.ResultSummary,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,GqlStatusObject:u.GqlStatusObject,ServerInfo:u.ServerInfo,Record:u.Record,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,Path:u.Path,PathSegment:u.PathSegment,Point:u.Point,Integer:u.Integer,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,bookmarkManager:u.bookmarkManager,resultTransformers:u.resultTransformers,notificationCategory:u.notificationCategory,notificationSeverityLevel:u.notificationSeverityLevel,notificationFilterDisabledCategory:u.notificationFilterDisabledCategory,notificationFilterMinimumSeverityLevel:u.notificationFilterMinimumSeverityLevel,clientCertificateProviders:u.clientCertificateProviders};e.default=N},1226:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,d,h=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=h.next()).done;)v.push(f.value)}catch(p){d={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(d)throw d.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,d=u.length;c<f;c++,d++)u[d]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=e.onErrorResumeNextWith=void 0;var a=t(8535),o=t(6102);function s(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=a.argsOrArgArray(u);return function(f){return o.onErrorResumeNext.apply(void 0,i([f],n(c)))}}e.onErrorResumeNextWith=s,e.onErrorResumeNext=s},1242:function(r,e,t){var n=this&&this.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaySubject=void 0;var i=t(2483),a=t(9568),o=function(s){function u(l,c,f){l===void 0&&(l=1/0),c===void 0&&(c=1/0),f===void 0&&(f=a.dateTimestampProvider);var d=s.call(this)||this;return d._bufferSize=l,d._windowTime=c,d._timestampProvider=f,d._buffer=[],d._infiniteTimeWindow=!0,d._infiniteTimeWindow=c===1/0,d._bufferSize=Math.max(1,l),d._windowTime=Math.max(1,c),d}return n(u,s),u.prototype.next=function(l){var c=this,f=c.isStopped,d=c._buffer,h=c._infiniteTimeWindow,v=c._timestampProvider,p=c._windowTime;f||(d.push(l),!h&&d.push(v.now()+p)),this._trimBuffer(),s.prototype.next.call(this,l)},u.prototype._subscribe=function(l){this._throwIfClosed(),this._trimBuffer();for(var c=this._innerSubscribe(l),f=this._infiniteTimeWindow,d=this._buffer.slice(),h=0;h<d.length&&!l.closed;h+=f?1:2)l.next(d[h]);return this._checkFinalizedStatuses(l),c},u.prototype._trimBuffer=function(){var l=this,c=l._bufferSize,f=l._timestampProvider,d=l._buffer,h=l._infiniteTimeWindow,v=(h?1:2)*c;if(c<1/0&&v<d.length&&d.splice(0,d.length-v),!h){for(var p=f.now(),g=0,y=1;y<d.length&&d[y]<=p;y+=2)g=y;g&&d.splice(0,g+1)}},u}(i.Subject);e.ReplaySubject=o},1251:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,d=l.call(s),h=[];try{for(;(u===void 0||u-- >0)&&!(c=d.next()).done;)h.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(f)throw f.error}}return h},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.mapOneOrManyArgs=void 0;var a=t(5471),o=Array.isArray;e.mapOneOrManyArgs=function(s){return a.map(function(u){return function(l,c){return o(c)?l.apply(void 0,i([],n(c))):l(c)}(s,u)})}},1293:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.QueueScheduler=void 0;var i=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return n(o,a),o}(t(5648).AsyncScheduler);e.QueueScheduler=i},1342:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noop=void 0,e.noop=function(){}},1358:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isAsyncIterable=void 0;var n=t(1018);e.isAsyncIterable=function(i){return Symbol.asyncIterator&&n.isFunction(i==null?void 0:i[Symbol.asyncIterator])}},1409:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.beginTransaction=function(i){throw new Error("Not implemented")},n.prototype.run=function(i,a,o){throw new Error("Not implemented")},n.prototype.commitTransaction=function(i){throw new Error("Not implemented")},n.prototype.rollbackTransaction=function(i){throw new Error("Not implemented")},n.prototype.resetAndFlush=function(){throw new Error("Not implemented")},n.prototype.isOpen=function(){throw new Error("Not implemented")},n.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},n}();e.default=t},1415:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.max=void 0;var n=t(9139),i=t(1018);e.max=function(a){return n.reduce(i.isFunction(a)?function(o,s){return a(o,s)>0?o:s}:function(o,s){return o>s?o:s})}},1439:function(r,e,t){var n=this&&this.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var v,p,g=h.call(f),y=[];try{for(;(d===void 0||d-- >0)&&!(v=g.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,d){for(var h=0,v=d.length,p=f.length;h<v;h++,p++)f[p]=d[h];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallbackInternals=void 0;var a=t(8613),o=t(4662),s=t(8960),u=t(1251),l=t(5184),c=t(95);e.bindCallbackInternals=function f(d,h,v,p){if(v){if(!a.isScheduler(v))return function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return f(d,h,p).apply(this,g).pipe(u.mapOneOrManyArgs(v))};p=v}return p?function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];return f(d,h).apply(this,g).pipe(s.subscribeOn(p),l.observeOn(p))}:function(){for(var g=this,y=[],b=0;b<arguments.length;b++)y[b]=arguments[b];var m=new c.AsyncSubject,_=!0;return new o.Observable(function(x){var C=m.subscribe(x);if(_){_=!1;var w=!1,O=!1;h.apply(g,i(i([],n(y)),[function(){for(var A=[],k=0;k<arguments.length;k++)A[k]=arguments[k];if(d){var R=A.shift();if(R!=null)return void m.error(R)}m.next(1<A.length?A:A[0]),O=!0,w&&m.complete()}])),O&&m.complete(),w=!0}return C})}}},1483:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connect=void 0;var n=t(2483),i=t(9445),a=t(7843),o=t(6824),s={connector:function(){return new n.Subject}};e.connect=function(u,l){l===void 0&&(l=s);var c=l.connector;return a.operate(function(f,d){var h=c();i.innerFrom(u(o.fromSubscribable(h))).subscribe(d),d.add(f.subscribe(h))})}},1505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SequenceError=void 0;var n=t(5568);e.SequenceError=n.createErrorClass(function(i){return function(a){i(this),this.name="SequenceError",this.message=a}})},1517:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var n=t(4027),i={value:!0,enumerable:!1,configurable:!1,writable:!1},a="__isNode__",o="__isRelationship__",s="__isUnboundRelationship__",u="__isPath__",l="__isPathSegment__";function c(y,b){return y!=null&&y[b]===!0}var f=function(){function y(b,m,_,x){this.identity=b,this.labels=m,this.properties=_,this.elementId=g(x,function(){return b.toString()})}return y.prototype.toString=function(){for(var b="("+this.elementId,m=0;m<this.labels.length;m++)b+=":"+this.labels[m];var _=Object.keys(this.properties);if(_.length>0){for(b+=" {",m=0;m<_.length;m++)m>0&&(b+=","),b+=_[m]+":"+(0,n.stringify)(this.properties[_[m]]);b+="}"}return b+")"},y}();e.Node=f,Object.defineProperty(f.prototype,a,i),e.isNode=function(y){return c(y,a)};var d=function(){function y(b,m,_,x,C,w,O,A){this.identity=b,this.start=m,this.end=_,this.type=x,this.properties=C,this.elementId=g(w,function(){return b.toString()}),this.startNodeElementId=g(O,function(){return m.toString()}),this.endNodeElementId=g(A,function(){return _.toString()})}return y.prototype.toString=function(){var b="("+this.startNodeElementId+")-[:"+this.type,m=Object.keys(this.properties);if(m.length>0){b+=" {";for(var _=0;_<m.length;_++)_>0&&(b+=","),b+=m[_]+":"+(0,n.stringify)(this.properties[m[_]]);b+="}"}return b+"]->("+this.endNodeElementId+")"},y}();e.Relationship=d,Object.defineProperty(d.prototype,o,i),e.isRelationship=function(y){return c(y,o)};var h=function(){function y(b,m,_,x){this.identity=b,this.type=m,this.properties=_,this.elementId=g(x,function(){return b.toString()})}return y.prototype.bind=function(b,m){return new d(this.identity,b,m,this.type,this.properties,this.elementId)},y.prototype.bindTo=function(b,m){return new d(this.identity,b.identity,m.identity,this.type,this.properties,this.elementId,b.elementId,m.elementId)},y.prototype.toString=function(){var b="-[:"+this.type,m=Object.keys(this.properties);if(m.length>0){b+=" {";for(var _=0;_<m.length;_++)_>0&&(b+=","),b+=m[_]+":"+(0,n.stringify)(this.properties[m[_]]);b+="}"}return b+"]->"},y}();e.UnboundRelationship=h,Object.defineProperty(h.prototype,s,i),e.isUnboundRelationship=function(y){return c(y,s)};var v=function(y,b,m){this.start=y,this.relationship=b,this.end=m};e.PathSegment=v,Object.defineProperty(v.prototype,l,i),e.isPathSegment=function(y){return c(y,l)};var p=function(y,b,m){this.start=y,this.end=b,this.segments=m,this.length=m.length};function g(y,b){return y??b()}e.Path=p,Object.defineProperty(p.prototype,u,i),e.isPath=function(y){return c(y,u)}},1518:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=void 0;var n=t(7843),i=t(3111);e.pairwise=function(){return n.operate(function(a,o){var s,u=!1;a.subscribe(i.createOperatorSubscriber(o,function(l){var c=s;s=l,u&&o.next([c,l]),u=!0}))})}},1530:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),n(t(3057)),n(t(5742));var i=function(){function a(o){var s=o.run;this._run=s}return a.fromTransaction=function(o){return new a({run:o.run.bind(o)})},a.prototype.run=function(o,s){return this._run(o,s)},a}();e.default=i},1551:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=void 0;var n=t(2752);e.exhaust=n.exhaustAll},1554:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=e.TimeoutError=void 0;var n=t(7961),i=t(1074),a=t(7843),o=t(9445),s=t(5568),u=t(3111),l=t(7110);function c(f){throw new e.TimeoutError(f)}e.TimeoutError=s.createErrorClass(function(f){return function(d){d===void 0&&(d=null),f(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=d}}),e.timeout=function(f,d){var h=i.isValidDate(f)?{first:f}:typeof f=="number"?{each:f}:f,v=h.first,p=h.each,g=h.with,y=g===void 0?c:g,b=h.scheduler,m=b===void 0?d??n.asyncScheduler:b,_=h.meta,x=_===void 0?null:_;if(v==null&&p==null)throw new TypeError("No timeout provided.");return a.operate(function(C,w){var O,A,k=null,R=0,I=function(M){A=l.executeSchedule(w,m,function(){try{O.unsubscribe(),o.innerFrom(y({meta:x,lastValue:k,seen:R})).subscribe(w)}catch(N){w.error(N)}},M)};O=C.subscribe(u.createOperatorSubscriber(w,function(M){A==null||A.unsubscribe(),R++,w.next(k=M),p>0&&I(p)},void 0,void 0,function(){A!=null&&A.closed||A==null||A.unsubscribe(),k=null})),!R&&I(v!=null?typeof v=="number"?v:+v-m.now():p)})}},1573:function(r,e,t){var n=this&&this.__awaiter||function(h,v,p,g){return new(p||(p=Promise))(function(y,b){function m(C){try{x(g.next(C))}catch(w){b(w)}}function _(C){try{x(g.throw(C))}catch(w){b(w)}}function x(C){var w;C.done?y(C.value):(w=C.value,w instanceof p?w:new p(function(O){O(w)})).then(m,_)}x((g=g.apply(h,v||[])).next())})},i=this&&this.__generator||function(h,v){var p,g,y,b,m={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(x){return function(C){return function(w){if(p)throw new TypeError("Generator is already executing.");for(;b&&(b=0,w[0]&&(m=0)),m;)try{if(p=1,g&&(y=2&w[0]?g.return:w[0]?g.throw||((y=g.return)&&y.call(g),0):g.next)&&!(y=y.call(g,w[1])).done)return y;switch(g=0,y&&(w=[2&w[0],y.value]),w[0]){case 0:case 1:y=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,g=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(!((y=(y=m.trys).length>0&&y[y.length-1])||w[0]!==6&&w[0]!==2)){m=0;continue}if(w[0]===3&&(!y||w[1]>y[0]&&w[1]<y[3])){m.label=w[1];break}if(w[0]===6&&m.label<y[1]){m.label=y[1],y=w;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(w);break}y[2]&&m.ops.pop(),m.trys.pop();continue}w=v.call(h,m)}catch(O){w=[6,O],g=0}finally{p=y=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([x,C])}}},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(8917)),s=t(9691),u=new(function(){function h(){}return h.prototype.eagerResultTransformer=function(){return l},h.prototype.eager=function(){return l},h.prototype.mappedResultTransformer=function(v){return c(v)},h.prototype.mapped=function(v){return c(v)},h.prototype.first=function(){return f},h.prototype.summary=function(){return d},h}());function l(h){return n(this,void 0,void 0,function(){var v,p,g,y;return i(this,function(b){switch(b.label){case 0:return[4,h];case 1:return v=b.sent(),p=v.summary,g=v.records,[4,h.keys()];case 2:return y=b.sent(),[2,new o.default(y,g,p)]}})})}function c(h){var v=this;if(h==null||h.collect==null&&h.map==null)throw(0,s.newError)("Requires a map or/and a collect functions.");return function(p){return n(v,void 0,void 0,function(){return i(this,function(g){switch(g.label){case 0:return[4,new Promise(function(y,b){var m={records:[],keys:[]};p.subscribe({onKeys:function(_){m.keys=_},onNext:function(_){if(h.map!=null){var x=h.map(_);x!==void 0&&m.records.push(x)}else m.records.push(_)},onCompleted:function(_){if(h.collect!=null)y(h.collect(m.records,_,m.keys));else{var x={records:m.records,summary:_,keys:m.keys};y(x)}},onError:function(_){b(_)}})})];case 1:return[2,g.sent()]}})})}}function f(h){return n(this,void 0,void 0,function(){var v,p,g,y;return i(this,function(b){switch(b.label){case 0:return[4,(v=h[Symbol.asyncIterator]()).next()];case 1:p=b.sent(),g=p.value,y=p.done,b.label=2;case 2:return b.trys.push([2,,3,6]),y===!0?[2,void 0]:[2,g];case 3:return v.return==null?[3,5]:[4,v.return()];case 4:b.sent(),b.label=5;case 5:return[7];case 6:return[2]}})})}function d(h){return n(this,void 0,void 0,function(){return i(this,function(v){switch(v.label){case 0:return[4,h.summary()];case 1:return[2,v.sent()]}})})}Object.freeze(u),e.default=u},1637:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.BehaviorSubject=void 0;var i=function(a){function o(s){var u=a.call(this)||this;return u._value=s,u}return n(o,a),Object.defineProperty(o.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),o.prototype._subscribe=function(s){var u=a.prototype._subscribe.call(this,s);return!u.closed&&s.next(this._value),u},o.prototype.getValue=function(){var s=this,u=s.hasError,l=s.thrownError,c=s._value;if(u)throw l;return this._throwIfClosed(),c},o.prototype.next=function(s){a.prototype.next.call(this,this._value=s)},o}(t(2483).Subject);e.BehaviorSubject=i},1656:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduled=void 0;var n=t(9567),i=t(9589),a=t(6985),o=t(8808),s=t(854),u=t(1116),l=t(7629),c=t(8046),f=t(6368),d=t(1358),h=t(7614),v=t(9137),p=t(4953);e.scheduled=function(g,y){if(g!=null){if(u.isInteropObservable(g))return n.scheduleObservable(g,y);if(c.isArrayLike(g))return a.scheduleArray(g,y);if(l.isPromise(g))return i.schedulePromise(g,y);if(d.isAsyncIterable(g))return s.scheduleAsyncIterable(g,y);if(f.isIterable(g))return o.scheduleIterable(g,y);if(v.isReadableStreamLike(g))return p.scheduleReadableStreamLike(g,y)}throw h.createInvalidObservableTypeError(g)}},1699:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783),a=t(9445);e.partition=function(o,s,u){return[i.filter(s,u)(a.innerFrom(o)),i.filter(n.not(s,u))(a.innerFrom(o))]}},1711:function(r,e,t){var n=this&&this.__extends||function(){var m=function(_,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(C[O]=w[O])},m(_,x)};return function(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function C(){this.constructor=_}m(_,x),_.prototype=x===null?Object.create(x):(C.prototype=x.prototype,new C)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(m){for(var _,x=1,C=arguments.length;x<C;x++)for(var w in _=arguments[x])Object.prototype.hasOwnProperty.call(_,w)&&(m[w]=_[w]);return m},i.apply(this,arguments)},a=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(9054)),s=t(9305),u=a(t(7021)),l=t(9014),c=t(397),f=a(t(7518)),d=a(t(5045)),h=a(t(3321)),v=s.internal.constants,p=v.BOLT_PROTOCOL_V4_4,g=v.FETCH_ALL,y=s.internal.bookmarks.Bookmarks,b=function(m){function _(){return m!==null&&m.apply(this,arguments)||this}return n(_,m),Object.defineProperty(_.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var x=this;return this._transformer===void 0&&(this._transformer=new h.default(Object.values(f.default).map(function(C){return C(x._config,x._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.requestRoutingInformation=function(x){var C=x.routingContext,w=C===void 0?{}:C,O=x.databaseName,A=O===void 0?null:O,k=x.impersonatedUser,R=k===void 0?null:k,I=x.sessionContext,M=I===void 0?{}:I,N=x.onError,F=x.onCompleted,z=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:N,onCompleted:F}),B=M.bookmarks||y.empty();return this.write(u.default.routeV4x4(w,B.values(),{databaseName:A,impersonatedUser:R}),z,!0),z},_.prototype.run=function(x,C,w){var O=w===void 0?{}:w,A=O.bookmarks,k=O.txConfig,R=O.database,I=O.mode,M=O.impersonatedUser,N=O.notificationFilter,F=O.beforeKeys,z=O.afterKeys,B=O.beforeError,U=O.afterError,W=O.beforeComplete,Y=O.afterComplete,H=O.flush,J=H===void 0||H,le=O.reactive,fe=le!==void 0&&le,ue=O.fetchSize,ge=ue===void 0?g:ue,ve=O.highRecordWatermark,de=ve===void 0?Number.MAX_VALUE:ve,ie=O.lowRecordWatermark,Q=ie===void 0?Number.MAX_VALUE:ie,re=new l.ResultStreamObserver({server:this._server,reactive:fe,fetchSize:ge,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:F,afterKeys:z,beforeError:B,afterError:U,beforeComplete:W,afterComplete:Y,highRecordWatermark:de,lowRecordWatermark:Q});(0,c.assertNotificationFilterIsEmpty)(N,this._onProtocolError,re);var se=fe;return this.write(u.default.runWithMetadata(x,C,{bookmarks:A,txConfig:k,database:R,mode:I,impersonatedUser:M}),re,se&&J),fe||this.write(u.default.pull({n:ge}),re,J),re},_.prototype.beginTransaction=function(x){var C=x===void 0?{}:x,w=C.bookmarks,O=C.txConfig,A=C.database,k=C.mode,R=C.impersonatedUser,I=C.notificationFilter,M=C.beforeError,N=C.afterError,F=C.beforeComplete,z=C.afterComplete,B=new l.ResultStreamObserver({server:this._server,beforeError:M,afterError:N,beforeComplete:F,afterComplete:z});return B.prepareToHandleSingleResponse(),(0,c.assertNotificationFilterIsEmpty)(I,this._onProtocolError,B),this.write(u.default.begin({bookmarks:w,txConfig:O,database:A,mode:k,impersonatedUser:R}),B,!0),B},_.prototype._applyUtcPatch=function(){var x=this;this._transformer=new h.default(Object.values(i(i({},f.default),d.default)).map(function(C){return C(x._config,x._log)}))},_}(o.default);e.default=b},1731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sample=void 0;var n=t(9445),i=t(7843),a=t(1342),o=t(3111);e.sample=function(s){return i.operate(function(u,l){var c=!1,f=null;u.subscribe(o.createOperatorSubscriber(l,function(d){c=!0,f=d})),n.innerFrom(s).subscribe(o.createOperatorSubscriber(l,function(){if(c){c=!1;var d=f;f=null,l.next(d)}},a.noop))})}},1751:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=void 0;var n=t(4662),i=t(1018);e.isObservable=function(a){return!!a&&(a instanceof n.Observable||i.isFunction(a.lift)&&i.isFunction(a.subscribe))}},1759:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NotFoundError=void 0;var n=t(5568);e.NotFoundError=n.createErrorClass(function(i){return function(a){i(this),this.name="NotFoundError",this.message=a}})},1776:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,d=l.call(s),h=[];try{for(;(u===void 0||u-- >0)&&!(c=d.next()).done;)h.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(f)throw f.error}}return h},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.endWith=void 0;var a=t(3865),o=t(1004);e.endWith=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return function(l){return a.concat(l,o.of.apply(void 0,i([],n(s))))}}},1803:r=>{var e,t,n=document.attachEvent,i=!1;function a(m){var _=m.__resizeTriggers__,x=_.firstElementChild,C=_.lastElementChild,w=x.firstElementChild;C.scrollLeft=C.scrollWidth,C.scrollTop=C.scrollHeight,w.style.width=x.offsetWidth+1+"px",w.style.height=x.offsetHeight+1+"px",x.scrollLeft=x.scrollWidth,x.scrollTop=x.scrollHeight}function o(m){var _=this;a(this),this.__resizeRAF__&&u(this.__resizeRAF__),this.__resizeRAF__=s(function(){(function(x){return x.offsetWidth!=x.__resizeLast__.width||x.offsetHeight!=x.__resizeLast__.height})(_)&&(_.__resizeLast__.width=_.offsetWidth,_.__resizeLast__.height=_.offsetHeight,_.__resizeListeners__.forEach(function(x){x.call(_,m)}))})}if(!n){var s=(t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(m){return window.setTimeout(m,20)},function(m){return t(m)}),u=(e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(m){return e(m)}),l=!1,c="",f="animationstart",d="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),v=document.createElement("fakeelement");if(v.style.animationName!==void 0&&(l=!0),l===!1){for(var p=0;p<d.length;p++)if(v.style[d[p]+"AnimationName"]!==void 0){c="-"+d[p].toLowerCase()+"-",f=h[p],l=!0;break}}var g="resizeanim",y="@"+c+"keyframes "+g+" { from { opacity: 0; } to { opacity: 0; } } ",b=c+"animation: 1ms "+g+"; "}r.exports=function(m,_){return n?m.attachEvent("onresize",_):(m.__resizeTriggers__||(getComputedStyle(m).position=="static"&&(m.style.position="relative"),function(){if(!i){var x=(y||"")+".resize-triggers { "+(b||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',C=document.head||document.getElementsByTagName("head")[0],w=document.createElement("style");w.type="text/css",w.styleSheet?w.styleSheet.cssText=x:w.appendChild(document.createTextNode(x)),C.appendChild(w),i=!0}}(),m.__resizeLast__={},m.__resizeListeners__=[],(m.__resizeTriggers__=document.createElement("div")).className="resize-triggers",m.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',m.appendChild(m.__resizeTriggers__),a(m),m.addEventListener("scroll",o,!0),f&&m.__resizeTriggers__.addEventListener(f,function(x){x.animationName==g&&a(m)})),m.__resizeListeners__.push(_)),function(){n?m.detachEvent("onresize",_):(m.__resizeListeners__.splice(m.__resizeListeners__.indexOf(_),1),m.__resizeListeners__.length||(m.removeEventListener("scroll",o),m.__resizeTriggers__=!m.removeChild(m.__resizeTriggers__)))}}},1839:function(r,e,t){var n=this&&this.__awaiter||function(u,l,c,f){return new(c||(c=Promise))(function(d,h){function v(y){try{g(f.next(y))}catch(b){h(b)}}function p(y){try{g(f.throw(y))}catch(b){h(b)}}function g(y){var b;y.done?d(y.value):(b=y.value,b instanceof c?b:new c(function(m){m(b)})).then(v,p)}g((f=f.apply(u,l||[])).next())})},i=this&&this.__generator||function(u,l){var c,f,d,h,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(y){return function(b){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,b[0]&&(v=0)),v;)try{if(c=1,f&&(d=2&b[0]?f.return:b[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,b[1])).done)return d;switch(f=0,d&&(b=[2&b[0],d.value]),b[0]){case 0:case 1:d=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((d=(d=v.trys).length>0&&d[d.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){v.label=b[1];break}if(b[0]===6&&v.label<d[1]){v.label=d[1],d=b;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(b);break}d[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(m){b=[6,m],f=0}finally{c=d=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([g,y])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),o=t(6781),s=function(){function u(l){var c=l.authTokenManager,f=l.userAgent,d=l.boltAgent;this._authTokenManager=c||(0,a.staticAuthTokenManager)({}),this._userAgent=f,this._boltAgent=d}return u.prototype.authenticate=function(l){var c=l.connection,f=l.auth,d=l.skipReAuth,h=l.waitReAuth,v=l.forceReAuth;return n(this,void 0,void 0,function(){var p,g;return i(this,function(y){switch(y.label){case 0:return f==null?[3,3]:(p=c.supportsReAuth===!0&&(!o.object.equals(c.authToken,f)&&d!==!0||v===!0),c.authToken==null||p?[4,c.connect(this._userAgent,this._boltAgent,f,h||!1)]:[3,2]);case 1:case 5:return[2,y.sent()];case 2:case 6:return[2,c];case 3:return[4,this._authTokenManager.getToken()];case 4:return g=y.sent(),o.object.equals(g,c.authToken)?[3,6]:[4,c.connect(this._userAgent,this._boltAgent,g,!1)]}})})},u.prototype.handleError=function(l){var c=l.connection,f=l.code;return!(!c||!f.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(c.authToken,f)},u}();e.default=s},1866:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(I){for(var M,N=1,F=arguments.length;N<F;N++)for(var z in M=arguments[N])Object.prototype.hasOwnProperty.call(M,z)&&(I[z]=M[z]);return I},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(I,M,N,F){F===void 0&&(F=N);var z=Object.getOwnPropertyDescriptor(M,N);z&&!("get"in z?!M.__esModule:z.writable||z.configurable)||(z={enumerable:!0,get:function(){return M[N]}}),Object.defineProperty(I,F,z)}:function(I,M,N,F){F===void 0&&(F=N),I[F]=M[N]}),a=this&&this.__setModuleDefault||(Object.create?function(I,M){Object.defineProperty(I,"default",{enumerable:!0,value:M})}:function(I,M){I.default=M}),o=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var M={};if(I!=null)for(var N in I)N!=="default"&&Object.prototype.hasOwnProperty.call(I,N)&&i(M,I,N);return a(M,I),M},s=this&&this.__read||function(I,M){var N=typeof Symbol=="function"&&I[Symbol.iterator];if(!N)return I;var F,z,B=N.call(I),U=[];try{for(;(M===void 0||M-- >0)&&!(F=B.next()).done;)U.push(F.value)}catch(W){z={error:W}}finally{try{F&&!F.done&&(N=B.return)&&N.call(B)}finally{if(z)throw z.error}}return U},u=this&&this.__spreadArray||function(I,M,N){if(N||arguments.length===2)for(var F,z=0,B=M.length;z<B;z++)!F&&z in M||(F||(F=Array.prototype.slice.call(M,0,z)),F[z]=M[z]);return I.concat(F||Array.prototype.slice.call(M))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var l=o(t(4027)),c=t(6995),f=t(1053),d={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"}},h={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=h,Object.freeze(h);var v=Object.values(h),p={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=p,Object.freeze(p);var g=Object.values(p),y=p;e.notificationClassification=y;var b=function(I){this.code=I.code,this.title=I.title,this.description=I.description,this.severity=I.severity,this.position=A(I.position),this.severityLevel=k(I.severity),this.rawSeverityLevel=I.severity,this.category=R(I.category),this.rawCategory=I.category};e.Notification=b;var m=function(){function I(M){var N;this.gqlStatus=M.gql_status,this.statusDescription=M.status_description,this.diagnosticRecord=(N=M.diagnostic_record)!==null&&N!==void 0?N:{},this.position=this.diagnosticRecord._position!=null?A(this.diagnosticRecord._position):void 0,this.severity=k(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=R(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=M.neo4j_code!=null,Object.freeze(this)}return Object.defineProperty(I.prototype,"diagnosticRecordAsJsonString",{get:function(){return l.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),I}();function _(I){var M,N,F;if(I.neo4j_code!=null)return new b({code:I.neo4j_code,title:I.title,description:I.description,severity:(M=I.diagnostic_record)===null||M===void 0?void 0:M._severity,category:(N=I.diagnostic_record)===null||N===void 0?void 0:N._classification,position:(F=I.diagnostic_record)===null||F===void 0?void 0:F._position})}function x(I){var M,N=I.severity===h.WARNING?d.WARNING:d.INFORMATION,F={gql_status:N.gql_status,status_description:(M=I.description)!==null&&M!==void 0?M:N.status_description,neo4j_code:I.code,title:I.title,diagnostic_record:n({},f.rawPolyfilledDiagnosticRecord)};return I.severity!=null&&(F.diagnostic_record._severity=I.severity),I.category!=null&&(F.diagnostic_record._classification=I.category),I.position!=null&&(F.diagnostic_record._position=I.position),new m(F)}e.GqlStatusObject=m,e.polyfillNotification=_,e.polyfillGqlStatusObject=x;var C={SUCCESS:new m({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA:new m({gql_status:"02000",status_description:"note: no data",diagnostic_record:f.rawPolyfilledDiagnosticRecord}),NO_DATA_UNKNOWN_SUBCONDITION:new m(n(n({},d.NO_DATA),{diagnostic_record:f.rawPolyfilledDiagnosticRecord})),OMITTED_RESULT:new m({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:f.rawPolyfilledDiagnosticRecord})};Object.freeze(C),e.buildGqlStatusObjectFromMetadata=function(I){var M,N;if(I.statuses!=null)return I.statuses.map(function(B){return new m(B)});var F,z=((F=I.stream_summary)==null?void 0:F.have_records_streamed)===!0?C.SUCCESS:(F==null?void 0:F.has_keys)===!1?C.OMITTED_RESULT:(F==null?void 0:F.pulled)===!0?C.NO_DATA:C.NO_DATA_UNKNOWN_SUBCONDITION;return u([z],s((N=(M=I.notifications)===null||M===void 0?void 0:M.map(x))!==null&&N!==void 0?N:[]),!1).sort(function(B,U){return O(B)-O(U)})};var w=Object.freeze({"02":0,"01":1,"00":2});function O(I){var M,N,F=(M=I.gqlStatus)===null||M===void 0?void 0:M.slice(0,2);return(N=w[F])!==null&&N!==void 0?N:9999}function A(I){return I==null?{}:{offset:c.util.toNumber(I.offset),line:c.util.toNumber(I.line),column:c.util.toNumber(I.column)}}function k(I){return v.includes(I)?I:h.UNKNOWN}function R(I){return g.includes(I)?I:y.UNKNOWN}e.buildNotificationsFromMetadata=function(I){return I.notifications!=null?I.notifications.map(function(M){return new b(M)}):I.statuses!=null?I.statuses.map(_).filter(function(M){return M!=null}):[]},e.default=b},1964:(r,e)=>{function t(){return typeof Symbol=="function"&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=e.getSymbolIterator=void 0,e.getSymbolIterator=t,e.iterator=t()},1967:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9691),i=t(4027),a={basic:function(s,u,l){return l!=null?{scheme:"basic",principal:s,credentials:u,realm:l}:{scheme:"basic",principal:s,credentials:u}},kerberos:function(s){return{scheme:"kerberos",principal:"",credentials:s}},bearer:function(s){return{scheme:"bearer",credentials:s}},none:function(){return{scheme:"none"}},custom:function(s,u,l,c,f){var d={scheme:c,principal:s};if(o(u)&&(d.credentials=u),o(l)&&(d.realm=l),o(f)){try{(0,i.stringify)(f)}catch(h){throw(0,n.newError)("Circular references in custom auth token parameters",void 0,h)}d.parameters=f}return d}};function o(s){return!(s==null||s===""||Object.getPrototypeOf(s)===Object.prototype&&Object.keys(s).length===0)}e.default=a},1983:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeInternals=void 0;var n=t(9445),i=t(7110),a=t(3111);e.mergeInternals=function(o,s,u,l,c,f,d,h){var v=[],p=0,g=0,y=!1,b=function(){!y||v.length||p||s.complete()},m=function(x){return p<l?_(x):v.push(x)},_=function(x){f&&s.next(x),p++;var C=!1;n.innerFrom(u(x,g++)).subscribe(a.createOperatorSubscriber(s,function(w){c==null||c(w),f?m(w):s.next(w)},function(){C=!0},void 0,function(){if(C)try{p--;for(var w=function(){var O=v.shift();d?i.executeSchedule(s,d,function(){return _(O)}):_(O)};v.length&&p<l;)w();b()}catch(O){s.error(O)}}))};return o.subscribe(a.createOperatorSubscriber(s,m,function(){y=!0,b()})),function(){h==null||h()}}},1985:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var t={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=t,Object.freeze(t);var n={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=n,Object.freeze(n);var i=n;e.notificationFilterDisabledClassification=i,e.default=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")}},2007:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var t=function(){function i(){}return i.prototype.release=function(){throw new Error("Not implemented")},i}();e.Releasable=t;var n=function(){function i(){}return i.prototype.acquireConnection=function(a){throw Error("Not implemented")},i.prototype.supportsMultiDb=function(){throw Error("Not implemented")},i.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},i.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},i.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},i.prototype.SSREnabled=function(){return!1},i.prototype.verifyConnectivityAndGetServerInfo=function(a){throw Error("Not implemented")},i.prototype.verifyAuthentication=function(a){throw Error("Not implemented")},i.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},i.prototype.close=function(){throw Error("Not implemented")},i}();e.default=n},2063:r=>{r.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},2066:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(1175));e.default=n({},a.default)},2069:function(r,e,t){var n=this&&this.__awaiter||function(h,v,p,g){return new(p||(p=Promise))(function(y,b){function m(C){try{x(g.next(C))}catch(w){b(w)}}function _(C){try{x(g.throw(C))}catch(w){b(w)}}function x(C){var w;C.done?y(C.value):(w=C.value,w instanceof p?w:new p(function(O){O(w)})).then(m,_)}x((g=g.apply(h,v||[])).next())})},i=this&&this.__generator||function(h,v){var p,g,y,b,m={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return b={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function _(x){return function(C){return function(w){if(p)throw new TypeError("Generator is already executing.");for(;b&&(b=0,w[0]&&(m=0)),m;)try{if(p=1,g&&(y=2&w[0]?g.return:w[0]?g.throw||((y=g.return)&&y.call(g),0):g.next)&&!(y=y.call(g,w[1])).done)return y;switch(g=0,y&&(w=[2&w[0],y.value]),w[0]){case 0:case 1:y=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,g=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(!((y=(y=m.trys).length>0&&y[y.length-1])||w[0]!==6&&w[0]!==2)){m=0;continue}if(w[0]===3&&(!y||w[1]>y[0]&&w[1]<y[3])){m.label=w[1];break}if(w[0]===6&&m.label<y[1]){m.label=y[1],y=w;break}if(y&&m.label<y[2]){m.label=y[2],m.ops.push(w);break}y[2]&&m.ops.pop(),m.trys.pop();continue}w=v.call(h,m)}catch(O){w=[6,O],g=0}finally{p=y=0}if(5&w[0])throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}([x,C])}}},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var o=a(t(1967)),s=t(6995),u=function(){function h(){}return h.prototype.getToken=function(){throw new Error("Not Implemented")},h.prototype.handleSecurityException=function(v,p){throw new Error("Not implemented")},h}();e.default=u,e.AuthTokenAndExpiration=function(){this.token=o.default.none(),this.expiration=void 0};var l=new(function(){function h(){}return h.prototype.bearer=function(v){var p=v.tokenProvider;if(typeof p!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof p));return new f(p,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},h.prototype.basic=function(v){var p=this,g=v.tokenProvider;if(typeof g!="function")throw new TypeError("tokenProvider should be function, but got: ".concat(typeof g));return new f(function(){return n(p,void 0,void 0,function(){var y;return i(this,function(b){switch(b.label){case 0:return y={},[4,g()];case 1:return[2,(y.token=b.sent(),y)]}})})},["Neo.ClientError.Security.Unauthorized"])},h}());e.authTokenManagers=l,Object.freeze(l),e.staticAuthTokenManager=function(h){var v=h.authToken;return new d(v)};var c=function(){function h(v){v===void 0&&(v=[]),this._subscribers=v}return h.prototype.subscribe=function(v){this._subscribers.push(v)},h.prototype.onCompleted=function(v){this._subscribers.forEach(function(p){return p.onCompleted(v)})},h.prototype.onError=function(v){this._subscribers.forEach(function(p){return p.onError(v)})},h}(),f=function(){function h(v,p,g,y){this._tokenProvider=v,this._handledSecurityCodes=p,this._currentAuthData=g,this._refreshObservable=y}return h.prototype.getToken=function(){var v;return n(this,void 0,void 0,function(){return i(this,function(p){switch(p.label){case 0:return this._currentAuthData===void 0||this._currentAuthData.expiration!==void 0&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:p.sent(),p.label=2;case 2:return[2,(v=this._currentAuthData)===null||v===void 0?void 0:v.token]}})})},h.prototype.handleSecurityException=function(v,p){var g;return!!this._handledSecurityCodes.includes(p)&&(s.util.equals(v,(g=this._currentAuthData)===null||g===void 0?void 0:g.token)&&this._scheduleRefreshAuthToken(),!0)},h.prototype._scheduleRefreshAuthToken=function(v){var p=this;this._refreshObservable===void 0&&(this._currentAuthData=void 0,this._refreshObservable=new c,Promise.resolve(this._tokenProvider()).then(function(g){var y;p._currentAuthData=g,(y=p._refreshObservable)===null||y===void 0||y.onCompleted(g)}).catch(function(g){var y;(y=p._refreshObservable)===null||y===void 0||y.onError(g)}).finally(function(){p._refreshObservable=void 0})),v!==void 0&&this._refreshObservable.subscribe(v)},h.prototype._refreshAuthToken=function(){return n(this,void 0,void 0,function(){var v=this;return i(this,function(p){switch(p.label){case 0:return[4,new Promise(function(g,y){v._scheduleRefreshAuthToken({onCompleted:g,onError:y})})];case 1:return[2,p.sent()]}})})},h}(),d=function(){function h(v){this._authToken=v}return h.prototype.getToken=function(){return this._authToken},h.prototype.handleSecurityException=function(v,p){return!1},h}()},2072:function(r,e,t){var n=this&&this.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(h[p]=v[p])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function h(){this.constructor=f}c(f,d),f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}(),i=this&&this.__createBinding||(Object.create?function(c,f,d,h){h===void 0&&(h=d);var v=Object.getOwnPropertyDescriptor(f,d);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(c,h,v)}:function(c,f,d,h){h===void 0&&(h=d),c[h]=f[d]}),a=this&&this.__setModuleDefault||(Object.create?function(c,f){Object.defineProperty(c,"default",{enumerable:!0,value:f})}:function(c,f){c.default=f}),o=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var f={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&i(f,c,d);return a(f,c),f};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var s=o(t(5361)),u=function(c){function f(){return c!==null&&c.apply(this,arguments)||this}return n(f,c),f.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},f}(s.Packer);e.Packer=u;var l=function(c){function f(d,h){return d===void 0&&(d=!1),h===void 0&&(h=!1),c.call(this,d,h)||this}return n(f,c),f}(s.Unpacker);e.Unpacker=l},2129:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=void 0;var n=t(7843),i=t(3111);e.takeWhile=function(a,o){return o===void 0&&(o=!1),n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){var f=a(c,l++);(f||o)&&u.next(c),!f&&u.complete()}))})}},2171:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.partition=void 0;var n=t(245),i=t(783);e.partition=function(a,o){return function(s){return[i.filter(a,o)(s),i.filter(n.not(a,o))(s)]}}},2199:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return n(o,a),o.prototype.resolve=function(s){return this._resolveToItself(s)},o}(t(9305).internal.resolver.BaseHostNameResolver);e.default=i},2204:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(3019));e.default=n({},a.default)},2343:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=void 0;var n=t(9139),i=t(7843),a=function(o,s){return o.push(s),o};e.toArray=function(){return i.operate(function(o,s){n.reduce(a,[])(o).subscribe(s)})}},2360:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=void 0;var n=t(7800),i=t(7843),a=t(3111);e.materialize=function(){return i.operate(function(o,s){o.subscribe(a.createOperatorSubscriber(s,function(u){s.next(n.Notification.createNext(u))},function(){s.next(n.Notification.createComplete()),s.complete()},function(u){s.next(n.Notification.createError(u)),s.complete()}))})}},2363:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.error.SERVICE_UNAVAILABLE,a=n.error.SESSION_EXPIRED,o=function(){function u(l,c,f,d){this._errorCode=l,this._handleUnavailability=c||s,this._handleWriteFailure=f||s,this._handleSecurityError=d||s}return u.create=function(l){return new u(l.errorCode,l.handleUnavailability,l.handleWriteFailure,l.handleSecurityError)},u.prototype.errorCode=function(){return this._errorCode},u.prototype.handleAndTransformError=function(l,c,f){return function(d){return d!=null&&d.code!=null&&d.code.startsWith("Neo.ClientError.Security.")}(l)?this._handleSecurityError(l,c,f):function(d){return!!d&&(d.code===a||d.code===i||d.code==="Neo.TransientError.General.DatabaseUnavailable")}(l)?this._handleUnavailability(l,c,f):function(d){return!!d&&(d.code==="Neo.ClientError.Cluster.NotALeader"||d.code==="Neo.ClientError.General.ForbiddenOnReadOnlyDatabase")}(l)?this._handleWriteFailure(l,c,f):l},u}();function s(u){return u}e.default=o},2481:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=n.internal.util,a=i.ENCRYPTION_OFF,o=i.ENCRYPTION_ON,s=n.error.SERVICE_UNAVAILABLE,u=[null,void 0,!0,!1,o,a],l=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function(c,f,d,h){this.address=c,this.encrypted=function(v){var p=v.encrypted;if(u.indexOf(p)===-1)throw(0,n.newError)("Illegal value of the encrypted setting ".concat(p,". Expected one of ").concat(u));return p}(f),this.trust=function(v){var p=v.trust;if(l.indexOf(p)===-1)throw(0,n.newError)("Illegal value of the trust setting ".concat(p,". Expected one of ").concat(l));return p}(f),this.trustedCertificates=function(v){return v.trustedCertificates||[]}(f),this.knownHostsPath=function(v){return v.knownHosts||null}(f),this.connectionErrorCode=d||s,this.connectionTimeout=f.connectionTimeout,this.clientCertificate=h}},2483:function(r,e,t){var n=this&&this.__extends||function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},d(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=h}d(h,v),h.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),i=this&&this.__values||function(d){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&d[h],p=0;if(v)return v.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AnonymousSubject=e.Subject=void 0;var a=t(4662),o=t(8014),s=t(9686),u=t(7479),l=t(9223),c=function(d){function h(){var v=d.call(this)||this;return v.closed=!1,v.currentObservers=null,v.observers=[],v.isStopped=!1,v.hasError=!1,v.thrownError=null,v}return n(h,d),h.prototype.lift=function(v){var p=new f(this,this);return p.operator=v,p},h.prototype._throwIfClosed=function(){if(this.closed)throw new s.ObjectUnsubscribedError},h.prototype.next=function(v){var p=this;l.errorContext(function(){var g,y;if(p._throwIfClosed(),!p.isStopped){p.currentObservers||(p.currentObservers=Array.from(p.observers));try{for(var b=i(p.currentObservers),m=b.next();!m.done;m=b.next())m.value.next(v)}catch(_){g={error:_}}finally{try{m&&!m.done&&(y=b.return)&&y.call(b)}finally{if(g)throw g.error}}}})},h.prototype.error=function(v){var p=this;l.errorContext(function(){if(p._throwIfClosed(),!p.isStopped){p.hasError=p.isStopped=!0,p.thrownError=v;for(var g=p.observers;g.length;)g.shift().error(v)}})},h.prototype.complete=function(){var v=this;l.errorContext(function(){if(v._throwIfClosed(),!v.isStopped){v.isStopped=!0;for(var p=v.observers;p.length;)p.shift().complete()}})},h.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(h.prototype,"observed",{get:function(){var v;return((v=this.observers)===null||v===void 0?void 0:v.length)>0},enumerable:!1,configurable:!0}),h.prototype._trySubscribe=function(v){return this._throwIfClosed(),d.prototype._trySubscribe.call(this,v)},h.prototype._subscribe=function(v){return this._throwIfClosed(),this._checkFinalizedStatuses(v),this._innerSubscribe(v)},h.prototype._innerSubscribe=function(v){var p=this,g=this,y=g.hasError,b=g.isStopped,m=g.observers;return y||b?o.EMPTY_SUBSCRIPTION:(this.currentObservers=null,m.push(v),new o.Subscription(function(){p.currentObservers=null,u.arrRemove(m,v)}))},h.prototype._checkFinalizedStatuses=function(v){var p=this,g=p.hasError,y=p.thrownError,b=p.isStopped;g?v.error(y):b&&v.complete()},h.prototype.asObservable=function(){var v=new a.Observable;return v.source=this,v},h.create=function(v,p){return new f(v,p)},h}(a.Observable);e.Subject=c;var f=function(d){function h(v,p){var g=d.call(this)||this;return g.destination=v,g.source=p,g}return n(h,d),h.prototype.next=function(v){var p,g;(g=(p=this.destination)===null||p===void 0?void 0:p.next)===null||g===void 0||g.call(p,v)},h.prototype.error=function(v){var p,g;(g=(p=this.destination)===null||p===void 0?void 0:p.error)===null||g===void 0||g.call(p,v)},h.prototype.complete=function(){var v,p;(p=(v=this.destination)===null||v===void 0?void 0:v.complete)===null||p===void 0||p.call(v)},h.prototype._subscribe=function(v){var p,g;return(g=(p=this.source)===null||p===void 0?void 0:p.subscribe(v))!==null&&g!==void 0?g:o.EMPTY_SUBSCRIPTION},h}(c);e.AnonymousSubject=f},2533:function(r,e,t){var n=this&&this.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}(),i=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(715)),o=function(s){function u(l){var c=s.call(this)||this;return c._readersIndex=new a.default,c._writersIndex=new a.default,c._connectionPool=l,c}return n(u,s),u.prototype.selectReader=function(l){return this._select(l,this._readersIndex)},u.prototype.selectWriter=function(l){return this._select(l,this._writersIndex)},u.prototype._select=function(l,c){var f=l.length;if(f===0)return null;var d=c.next(f),h=d,v=null,p=Number.MAX_SAFE_INTEGER;do{var g=l[h],y=this._connectionPool.activeResourceCount(g);y<p&&(v=g,p=y),h===f-1?h=0:h++}while(h!==d);return v},u}(i(t(4311)).default);e.default=o},2539:function(r,e,t){var n=this&&this.__extends||function(){var x=function(C,w){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,A){O.__proto__=A}||function(O,A){for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(O[k]=A[k])},x(C,w)};return function(C,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function O(){this.constructor=C}x(C,w),C.prototype=w===null?Object.create(w):(O.prototype=w.prototype,new O)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(x){for(var C,w=1,O=arguments.length;w<O;w++)for(var A in C=arguments[w])Object.prototype.hasOwnProperty.call(C,A)&&(x[A]=C[A]);return x},i.apply(this,arguments)},a=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(5642)),s=a(t(7021)),u=t(397),l=t(9014),c=a(t(2066)),f=a(t(3321)),d=t(9305),h=(d.internal.bookmarks.Bookmarks,d.internal.constants),v=h.BOLT_PROTOCOL_V4_0,p=h.FETCH_ALL,g=d.internal.txConfig.TxConfig,y="context",b="database",m="CALL dbms.routing.getRoutingTable($".concat(y,", $").concat(b,")"),_=function(x){function C(){return x!==null&&x.apply(this,arguments)||this}return n(C,x),Object.defineProperty(C.prototype,"version",{get:function(){return v},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(O){return O(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),C.prototype.beginTransaction=function(w){var O=w===void 0?{}:w,A=O.bookmarks,k=O.txConfig,R=O.database,I=O.impersonatedUser,M=O.notificationFilter,N=O.mode,F=O.beforeError,z=O.afterError,B=O.beforeComplete,U=O.afterComplete,W=new l.ResultStreamObserver({server:this._server,beforeError:F,afterError:z,beforeComplete:B,afterComplete:U});return W.prepareToHandleSingleResponse(),(0,u.assertImpersonatedUserIsEmpty)(I,this._onProtocolError,W),(0,u.assertNotificationFilterIsEmpty)(M,this._onProtocolError,W),this.write(s.default.begin({bookmarks:A,txConfig:k,database:R,mode:N}),W,!0),W},C.prototype.run=function(w,O,A){var k=A===void 0?{}:A,R=k.bookmarks,I=k.txConfig,M=k.database,N=k.impersonatedUser,F=k.notificationFilter,z=k.mode,B=k.beforeKeys,U=k.afterKeys,W=k.beforeError,Y=k.afterError,H=k.beforeComplete,J=k.afterComplete,le=k.flush,fe=le===void 0||le,ue=k.reactive,ge=ue!==void 0&&ue,ve=k.fetchSize,de=ve===void 0?p:ve,ie=k.highRecordWatermark,Q=ie===void 0?Number.MAX_VALUE:ie,re=k.lowRecordWatermark,se=re===void 0?Number.MAX_VALUE:re,pe=new l.ResultStreamObserver({server:this._server,reactive:ge,fetchSize:de,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:B,afterKeys:U,beforeError:W,afterError:Y,beforeComplete:H,afterComplete:J,highRecordWatermark:Q,lowRecordWatermark:se});(0,u.assertImpersonatedUserIsEmpty)(N,this._onProtocolError,pe),(0,u.assertNotificationFilterIsEmpty)(F,this._onProtocolError,pe);var Oe=ge;return this.write(s.default.runWithMetadata(w,O,{bookmarks:R,txConfig:I,database:M,mode:z}),pe,Oe&&fe),ge||this.write(s.default.pull({n:de}),pe,fe),pe},C.prototype._requestMore=function(w,O,A){this.write(s.default.pull({stmtId:w,n:O}),A,!0)},C.prototype._requestDiscard=function(w,O){this.write(s.default.discard({stmtId:w}),O,!0)},C.prototype._noOp=function(){},C.prototype.requestRoutingInformation=function(w){var O,A=w.routingContext,k=A===void 0?{}:A,R=w.databaseName,I=R===void 0?null:R,M=w.sessionContext,N=M===void 0?{}:M,F=w.onError,z=w.onCompleted,B=this.run(m,((O={})[y]=k,O[b]=I,O),i(i({},N),{txConfig:g.empty()}));return new l.ProcedureRouteObserver({resultObserver:B,onProtocolError:this._onProtocolError,onError:F,onCompleted:z})},C}(o.default);e.default=_},2551:function(r,e,t){var n=this&&this.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var v,p,g=h.call(f),y=[];try{for(;(d===void 0||d-- >0)&&!(v=g.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,d){for(var h=0,v=d.length,p=f.length;h<v;h++,p++)f[p]=d[h];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=void 0;var a=t(3247),o=t(7843),s=t(8535),u=t(1251),l=t(2706),c=t(1107);e.combineLatest=function f(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var v=c.popResultSelector(d);return v?l.pipe(f.apply(void 0,i([],n(d))),u.mapOneOrManyArgs(v)):o.operate(function(p,g){a.combineLatestInit(i([p],n(s.argsOrArgArray(d))))(g)})}},2578:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305);function i(){}function a(u){return u}var o={onNext:i,onCompleted:i,onError:i},s=function(){function u(l){var c=l===void 0?{}:l,f=c.transformMetadata,d=c.enrichErrorMetadata,h=c.log,v=c.observer;this._pendingObservers=[],this._log=h,this._transformMetadata=f||a,this._enrichErrorMetadata=d||a,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:a},v)}return Object.defineProperty(u.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),u.prototype.handleResponse=function(l){var c=l.fields[0];switch(l.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(n.json.stringify(l))),this._currentObserver.onNext(c);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(n.json.stringify(l)));try{var f=this._transformMetadata(c);this._currentObserver.onCompleted(f)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(n.json.stringify(l)));try{this._currentFailure=this._handleErrorPayload(this._enrichErrorMetadata(c)),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(n.json.stringify(l)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,n.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,n.newError)("Unknown Bolt protocol message: "+l))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(u.prototype,"_observersCount",{get:function(){return this._currentObserver==null?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),u.prototype._queueObserver=function(l){return(l=l||o).onCompleted=l.onCompleted||i,l.onError=l.onError||i,l.onNext=l.onNext||i,this._currentObserver===void 0?this._currentObserver=l:this._pendingObservers.push(l),this._observer.onObserversCountChange(this._observersCount),!0},u.prototype._notifyErrorToObservers=function(l){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(l);this._pendingObservers.length>0;){var c=this._pendingObservers.shift();c&&c.onError&&c.onError(l)}},u.prototype.hasOngoingObservableRequests=function(){return this._currentObserver!=null||this._pendingObservers.length>0},u.prototype._resetFailure=function(){this._currentFailure=null},u.prototype._handleErrorPayload=function(l){var c,f=(c=l.code)==="Neo.TransientError.Transaction.Terminated"?"Neo.ClientError.Transaction.Terminated":c==="Neo.TransientError.Transaction.LockClientStopped"?"Neo.ClientError.Transaction.LockClientStopped":c,d=l.cause!=null?this._handleErrorCause(l.cause):void 0,h=(0,n.newError)(l.message,f,d,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(h)},u.prototype._handleErrorCause=function(l){var c=l.cause!=null?this._handleErrorCause(l.cause):void 0,f=(0,n.newGQLError)(l.message,c,l.gql_status,l.description,l.diagnostic_record);return this._observer.onErrorApplyTransformation(f)},u}();e.default=s},2628:function(r,e,t){var n=this&&this.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameAction=void 0;var i=t(5267),a=t(9507),o=function(s){function u(l,c){var f=s.call(this,l,c)||this;return f.scheduler=l,f.work=c,f}return n(u,s),u.prototype.requestAsyncId=function(l,c,f){return f===void 0&&(f=0),f!==null&&f>0?s.prototype.requestAsyncId.call(this,l,c,f):(l.actions.push(this),l._scheduled||(l._scheduled=a.animationFrameProvider.requestAnimationFrame(function(){return l.flush(void 0)})))},u.prototype.recycleAsyncId=function(l,c,f){var d;if(f===void 0&&(f=0),f!=null?f>0:this.delay>0)return s.prototype.recycleAsyncId.call(this,l,c,f);var h=l.actions;c!=null&&c===l._scheduled&&((d=h[h.length-1])===null||d===void 0?void 0:d.id)!==c&&(a.animationFrameProvider.cancelAnimationFrame(c),l._scheduled=void 0)},u}(i.AsyncAction);e.AnimationFrameAction=o},2669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.min=void 0;var n=t(9139),i=t(1018);e.min=function(a){return n.reduce(i.isFunction(a)?function(o,s){return a(o,s)<0?o:s}:function(o,s){return o<s?o:s})}},2696:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var t=function(){function a(){}return a.prototype.subscribe=function(o){i(o,o.onKeys,[]),i(o,o.onCompleted,{})},a.prototype.cancel=function(){},a.prototype.pause=function(){},a.prototype.resume=function(){},a.prototype.prepareToHandleSingleResponse=function(){},a.prototype.markCompleted=function(){},a.prototype.onError=function(o){throw new Error("CompletedObserver not supposed to call onError",{cause:o})},a}();e.CompletedObserver=t;var n=function(){function a(o){var s=o.error,u=o.onError;this._error=s,this._beforeError=u,this._observers=[],this.onError(s)}return a.prototype.subscribe=function(o){i(o,o.onError,this._error),this._observers.push(o)},a.prototype.onError=function(o){i(this,this._beforeError,o),this._observers.forEach(function(s){return i(s,s.onError,o)})},a.prototype.cancel=function(){},a.prototype.pause=function(){},a.prototype.resume=function(){},a.prototype.markCompleted=function(){},a.prototype.prepareToHandleSingleResponse=function(){},a}();function i(a,o,s){o!=null&&o.bind(a)(s)}e.FailedObserver=n},2706:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pipeFromArray=e.pipe=void 0;var n=t(6640);function i(a){return a.length===0?n.identity:a.length===1?a[0]:function(o){return a.reduce(function(s,u){return u(s)},o)}}e.pipe=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];return i(a)},e.pipeFromArray=i},2713:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindCallback=void 0;var n=t(1439);e.bindCallback=function(i,a,o){return n.bindCallbackInternals(!1,i,a,o)}},2752:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustAll=void 0;var n=t(4753),i=t(6640);e.exhaustAll=function(){return n.exhaustMap(i.identity)}},2823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EmptyError=void 0;var n=t(5568);e.EmptyError=n.createErrorClass(function(i){return function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}})},2833:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.merge=void 0;var n=t(7302),i=t(9445),a=t(8616),o=t(1107),s=t(4917);e.merge=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=o.popScheduler(u),f=o.popNumber(u,1/0),d=u;return d.length?d.length===1?i.innerFrom(d[0]):n.mergeAll(f)(s.from(d,c)):a.EMPTY}},2857:function(r,e,t){var n=this&&this.__extends||function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},d(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=h}d(h,v),h.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(8320)),o=i(t(7168)),s=t(9305),u=i(t(3448)),l=i(t(3321)),c=s.internal.constants.BOLT_PROTOCOL_V2,f=function(d){function h(){return d!==null&&d.apply(this,arguments)||this}return n(h,d),h.prototype._createPacker=function(v){return new o.default.Packer(v)},h.prototype._createUnpacker=function(v,p){return new o.default.Unpacker(v,p)},Object.defineProperty(h.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),h}(a.default);e.default=f},2886:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.queue=e.queueScheduler=void 0;var n=t(4212),i=t(1293);e.queueScheduler=new i.QueueScheduler(n.QueueAction),e.queue=e.queueScheduler},2906:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,d){d===void 0&&(d=f);var h=Object.getOwnPropertyDescriptor(c,f);h&&!("get"in h?!c.__esModule:h.writable||h.configurable)||(h={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,d,h)}:function(l,c,f,d){d===void 0&&(d=f),l[d]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c},o=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var s=a(t(7589));e.PoolConfig=s.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return s.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return s.DEFAULT_MAX_SIZE}});var u=o(t(6842));e.Pool=u.default,e.default=u.default},3001:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){this.maxSize=i,this.pruneCount=Math.max(Math.round(.01*i*Math.log(i)),1),this.map=new Map}return n.prototype.set=function(i,a){this.map.set(i,{database:a,lastUsed:Date.now()}),this._pruneCache()},n.prototype.get=function(i){var a=this.map.get(i);if(a!==void 0)return a.lastUsed=Date.now(),a.database},n.prototype.delete=function(i){this.map.delete(i)},n.prototype._pruneCache=function(){if(this.map.size>this.maxSize)for(var i=Array.from(this.map.entries()).sort(function(o,s){return o[1].lastUsed-s[1].lastUsed}),a=0;a<this.pruneCount;a++)this.map.delete(i[a][0])},n}();e.default=t},3019:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(9994));e.default=n({},a.default)},3057:function(r,e,t){var n=this&&this.__awaiter||function(c,f,d,h){return new(d||(d=Promise))(function(v,p){function g(m){try{b(h.next(m))}catch(_){p(_)}}function y(m){try{b(h.throw(m))}catch(_){p(_)}}function b(m){var _;m.done?v(m.value):(_=m.value,_ instanceof d?_:new d(function(x){x(_)})).then(g,y)}b((h=h.apply(c,f||[])).next())})},i=this&&this.__generator||function(c,f){var d,h,v,p,g={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(b){return function(m){return function(_){if(d)throw new TypeError("Generator is already executing.");for(;p&&(p=0,_[0]&&(g=0)),g;)try{if(d=1,h&&(v=2&_[0]?h.return:_[0]?h.throw||((v=h.return)&&v.call(h),0):h.next)&&!(v=v.call(h,_[1])).done)return v;switch(h=0,v&&(_=[2&_[0],v.value]),_[0]){case 0:case 1:v=_;break;case 4:return g.label++,{value:_[1],done:!1};case 5:g.label++,h=_[1],_=[0];continue;case 7:_=g.ops.pop(),g.trys.pop();continue;default:if(!((v=(v=g.trys).length>0&&v[v.length-1])||_[0]!==6&&_[0]!==2)){g=0;continue}if(_[0]===3&&(!v||_[1]>v[0]&&_[1]<v[3])){g.label=_[1];break}if(_[0]===6&&g.label<v[1]){g.label=v[1],v=_;break}if(v&&g.label<v[2]){g.label=v[2],g.ops.push(_);break}v[2]&&g.ops.pop(),g.trys.pop();continue}_=f.call(c,g)}catch(x){_=[6,x],h=0}finally{d=v=0}if(5&_[0])throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}([b,m])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(9305),o=t(8813),s=t(9419),u=function(){function c(f,d){var h=f.pipe((0,s.publishReplay)(1),(0,s.refCount)());this._result=h,this._keys=h.pipe((0,s.mergeMap)(function(v){return(0,o.from)(v.keys())}),(0,s.publishReplay)(1),(0,s.refCount)()),this._records=void 0,this._controls=new l,this._summary=new o.ReplaySubject,this._state=d||0}return c.prototype.keys=function(){return this._keys},c.prototype.records=function(){var f=this,d=this._result.pipe((0,s.mergeMap)(function(h){return new o.Observable(function(v){return f._startStreaming({result:h,recordsObserver:v})})}));return d.push=function(){return f._push()},d},c.prototype.consume=function(){var f=this;return this._result.pipe((0,s.mergeMap)(function(d){return new o.Observable(function(h){return f._startStreaming({result:d,summaryObserver:h})})}))},c.prototype.pause=function(){this._controls.pause()},c.prototype.resume=function(){return this._controls.resume()},c.prototype.push=function(){return this._controls.push()},c.prototype._startStreaming=function(f){var d=f===void 0?{}:f,h=d.result,v=d.recordsObserver,p=v===void 0?null:v,g=d.summaryObserver,y=g===void 0?null:g,b=[];return y&&b.push(this._summary.subscribe(y)),this._state<1?(this._state=1,this._setupRecordsStream(h),p?b.push(this._records.subscribe(p)):h._cancel(),b.push({unsubscribe:function(){h._cancel&&h._cancel()}})):p&&p.error((0,a.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){b.forEach(function(m){return m.unsubscribe()})}},c.prototype._toObservable=function(){var f=this;return new o.Observable(function(d){f._result.subscribe({complete:function(){return d.complete()},next:function(h){return d.next(new c(function(v){return new o.Observable(function(p){p.next(v),p.complete()})}(h)),f._state)},error:function(h){return d.error(h)}})})},c.prototype._setupRecordsStream=function(f){var d=this;return this._records||(this._records=function(h,v,p){var g=this;p===void 0&&(p=new l);var y=new o.Subject,b=function(_){return n(g,void 0,void 0,function(){var x,C,w,O;return i(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,3,4]),p.pushing=!0,[4,_];case 1:return x=A.sent(),C=x.done,w=x.value,C?(y.complete(),v.complete()):(y.next(w),p.paused||b(h.next()).catch(function(){})),[3,4];case 2:return O=A.sent(),y.error(O),v.error(O),[3,4];case 3:return p.pushing=!1,[7];case 4:return[2]}})})};function m(_){return n(this,void 0,void 0,function(){return i(this,function(x){switch(x.label){case 0:return[4,b(h.next(_))];case 1:return x.sent(),[2]}})})}return p.pusher=m,m(),y}(f[Symbol.asyncIterator](),{complete:function(){return n(d,void 0,void 0,function(){var h,v;return i(this,function(p){switch(p.label){case 0:return this._state=2,v=(h=this._summary).next,[4,f.summary()];case 1:return v.apply(h,[p.sent()]),this._summary.complete(),[2]}})})},error:function(h){d._state=2,d._summary.error(h)}},this._controls)),this._records},c}();e.default=u;var l=function(){function c(f){f===void 0&&(f=function(){return n(d,void 0,void 0,function(){return i(this,function(h){return[2]})})});var d=this;this._paused=!1,this._pushing=!1,this._push=f}return c.prototype.pause=function(){this._paused=!0},Object.defineProperty(c.prototype,"paused",{get:function(){return this._paused},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"pushing",{get:function(){return this._pushing},set:function(f){this._pushing=f},enumerable:!1,configurable:!0}),c.prototype.resume=function(){return n(this,void 0,void 0,function(){var f;return i(this,function(d){switch(d.label){case 0:return f=this._paused,this._paused=!1,!f||this._pushing?[3,2]:[4,this._push()];case 1:d.sent(),d.label=2;case 2:return[2]}})})},c.prototype.push=function(){return n(this,void 0,void 0,function(){return i(this,function(f){switch(f.label){case 0:return this.pause(),[4,this._push()];case 1:return[2,f.sent()]}})})},Object.defineProperty(c.prototype,"pusher",{get:function(){return this._push},set:function(f){this._push=f},enumerable:!1,configurable:!0}),c}()},3110:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrames=void 0;var n=t(4662),i=t(4746),a=t(9507);function o(u){return new n.Observable(function(l){var c=u||i.performanceTimestampProvider,f=c.now(),d=0,h=function(){l.closed||(d=a.animationFrameProvider.requestAnimationFrame(function(v){d=0;var p=c.now();l.next({timestamp:u?p:v,elapsed:p-f}),h()}))};return h(),function(){d&&a.animationFrameProvider.cancelAnimationFrame(d)}})}e.animationFrames=function(u){return u?o(u):s};var s=o()},3111:function(r,e,t){var n=this&&this.__extends||function(){var o=function(s,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},o(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}o(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorSubscriber=e.createOperatorSubscriber=void 0;var i=t(5);e.createOperatorSubscriber=function(o,s,u,l,c){return new a(o,s,u,l,c)};var a=function(o){function s(u,l,c,f,d,h){var v=o.call(this,u)||this;return v.onFinalize=d,v.shouldUnsubscribe=h,v._next=l?function(p){try{l(p)}catch(g){u.error(g)}}:o.prototype._next,v._error=f?function(p){try{f(p)}catch(g){u.error(g)}finally{this.unsubscribe()}}:o.prototype._error,v._complete=c?function(){try{c()}catch(p){u.error(p)}finally{this.unsubscribe()}}:o.prototype._complete,v}return n(s,o),s.prototype.unsubscribe=function(){var u;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var l=this.closed;o.prototype.unsubscribe.call(this),!l&&((u=this.onFinalize)===null||u===void 0||u.call(this))}},s}(i.Subscriber);e.OperatorSubscriber=a},3133:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=void 0;var n=t(1242),i=t(8977);e.shareReplay=function(a,o,s){var u,l,c,f,d=!1;return a&&typeof a=="object"?(u=a.bufferSize,f=u===void 0?1/0:u,l=a.windowTime,o=l===void 0?1/0:l,d=(c=a.refCount)!==void 0&&c,s=a.scheduler):f=a??1/0,i.share({connector:function(){return new n.ReplaySubject(f,o,s)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:d})}},3146:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.audit=void 0;var n=t(7843),i=t(9445),a=t(3111);e.audit=function(o){return n.operate(function(s,u){var l=!1,c=null,f=null,d=!1,h=function(){if(f==null||f.unsubscribe(),f=null,l){l=!1;var p=c;c=null,u.next(p)}d&&u.complete()},v=function(){f=null,d&&u.complete()};s.subscribe(a.createOperatorSubscriber(u,function(p){l=!0,c=p,f||i.innerFrom(o(p)).subscribe(f=a.createOperatorSubscriber(u,h,v))},function(){d=!0,(!l||!f||f.closed)&&u.complete()}))})}},3206:(r,e,t)=>{r.exports=function(w){var O,A,k,R=0,I=0,M=u,N=[],F=[],z=1,B=0,U=0,W=!1,Y=!1,H="",J=a,le=n;(w=w||{}).version==="300 es"&&(J=s,le=o);var fe={},ue={};for(R=0;R<J.length;R++)fe[J[R]]=!0;for(R=0;R<le.length;R++)ue[le[R]]=!0;return function(j){return F=[],j!==null?function(G){var $;for(R=0,G.toString&&(G=G.toString()),H+=G.replace(/\r\n/g,`
`),k=H.length;O=H[R],R<k;){switch($=R,M){case c:R=re();break;case f:R=Q();break;case d:R=ie();break;case h:R=se();break;case v:R=Ce();break;case x:R=Oe();break;case p:R=Re();break;case l:R=be();break;case m:R=de();break;case u:R=ve()}$!==R&&(H[$]===`
`?(B=0,++z):++B)}return I+=R,H=H.slice(R),F}(j):(N.length&&ge(N.join("")),M=_,ge("(eof)"),F)};function ge(j){j.length&&F.push({type:C[M],data:j,position:U,line:z,column:B})}function ve(){return N=N.length?[]:N,A==="/"&&O==="*"?(U=I+R-1,M=c,A=O,R+1):A==="/"&&O==="/"?(U=I+R-1,M=f,A=O,R+1):O==="#"?(M=d,U=I+R,R):/\s/.test(O)?(M=m,U=I+R,R):(W=/\d/.test(O),Y=/[^\w_]/.test(O),U=I+R,M=W?v:Y?h:l,R)}function de(){return/[^\s]/g.test(O)?(ge(N.join("")),M=u,R):(N.push(O),A=O,R+1)}function ie(){return O!=="\r"&&O!==`
`||A==="\\"?(N.push(O),A=O,R+1):(ge(N.join("")),M=u,R)}function Q(){return ie()}function re(){return O==="/"&&A==="*"?(N.push(O),ge(N.join("")),M=u,R+1):(N.push(O),A=O,R+1)}function se(){if(A==="."&&/\d/.test(O))return M=p,R;if(A==="/"&&O==="*")return M=c,R;if(A==="/"&&O==="/")return M=f,R;if(O==="."&&N.length){for(;pe(N););return M=p,R}if(O===";"||O===")"||O==="("){if(N.length)for(;pe(N););return ge(O),M=u,R+1}var j=N.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||j){for(;pe(N););return M=u,R}return N.push(O),A=O,R+1}function pe(j){for(var G,$,te=0;;){if(G=i.indexOf(j.slice(0,j.length+te).join("")),$=i[G],G===-1){if(te--+j.length>0)continue;$=j.slice(0,1).join("")}return ge($),U+=$.length,(N=N.slice($.length)).length}}function Oe(){return/[^a-fA-F0-9]/.test(O)?(ge(N.join("")),M=u,R):(N.push(O),A=O,R+1)}function Ce(){return O==="."||/[eE]/.test(O)?(N.push(O),M=p,A=O,R+1):O==="x"&&N.length===1&&N[0]==="0"?(M=x,N.push(O),A=O,R+1):/[^\d]/.test(O)?(ge(N.join("")),M=u,R):(N.push(O),A=O,R+1)}function Re(){return O==="f"&&(N.push(O),A=O,R+=1),/[eE]/.test(O)?(N.push(O),A=O,R+1):(O!=="-"&&O!=="+"||!/[eE]/.test(A))&&/[^\d]/.test(O)?(ge(N.join("")),M=u,R):(N.push(O),A=O,R+1)}function be(){if(/[^\d\w_]/.test(O)){var j=N.join("");return M=ue[j]?b:fe[j]?y:g,ge(N.join("")),M=u,R}return N.push(O),A=O,R+1}};var n=t(4704),i=t(2063),a=t(7192),o=t(8784),s=t(5592),u=999,l=9999,c=0,f=1,d=2,h=3,v=4,p=5,g=6,y=7,b=8,m=9,_=10,x=11,C=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3218:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=void 0;var n=t(5471);e.mapTo=function(i){return n.map(function(){return i})}},3229:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationFrameScheduler=void 0;var i=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return n(o,a),o.prototype.flush=function(s){var u;this._active=!0,s?u=s.id:(u=this._scheduled,this._scheduled=void 0);var l,c=this.actions;s=s||c.shift();do if(l=s.execute(s.state,s.delay))break;while((s=c[0])&&s.id===u&&c.shift());if(this._active=!1,l){for(;(s=c[0])&&s.id===u&&c.shift();)s.unsubscribe();throw l}},o}(t(5648).AsyncScheduler);e.AnimationFrameScheduler=i},3231:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=void 0;var n=t(7961),i=t(3146),a=t(4092);e.auditTime=function(o,s){return s===void 0&&(s=n.asyncScheduler),i.audit(function(){return a.timer(o,s)})}},3247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestInit=e.combineLatest=void 0;var n=t(4662),i=t(7360),a=t(4917),o=t(6640),s=t(1251),u=t(1107),l=t(6013),c=t(3111),f=t(7110);function d(v,p,g){return g===void 0&&(g=o.identity),function(y){h(p,function(){for(var b=v.length,m=new Array(b),_=b,x=b,C=function(O){h(p,function(){var A=a.from(v[O],p),k=!1;A.subscribe(c.createOperatorSubscriber(y,function(R){m[O]=R,k||(k=!0,x--),x||y.next(g(m.slice()))},function(){--_||y.complete()}))},y)},w=0;w<b;w++)C(w)},y)}}function h(v,p,g){v?f.executeSchedule(g,v,p):p()}e.combineLatest=function(){for(var v=[],p=0;p<arguments.length;p++)v[p]=arguments[p];var g=u.popScheduler(v),y=u.popResultSelector(v),b=i.argsArgArrayOrObject(v),m=b.args,_=b.keys;if(m.length===0)return a.from([],g);var x=new n.Observable(d(m,g,_?function(C){return l.createObject(_,C)}:o.identity));return y?x.pipe(s.mapOneOrManyArgs(y)):x},e.combineLatestInit=d},3269:(r,e,t)=>{var n=t(6931),i=t(9975),a=Object.hasOwnProperty,o=Object.create(null);for(var s in n)a.call(n,s)&&(o[n[s]]=s);var u=r.exports={to:{},get:{}};function l(f,d,h){return Math.min(Math.max(d,f),h)}function c(f){var d=Math.round(f).toString(16).toUpperCase();return d.length<2?"0"+d:d}u.get=function(f){var d,h;switch(f.substring(0,3).toLowerCase()){case"hsl":d=u.get.hsl(f),h="hsl";break;case"hwb":d=u.get.hwb(f),h="hwb";break;default:d=u.get.rgb(f),h="rgb"}return d?{model:h,value:d}:null},u.get.rgb=function(f){if(!f)return null;var d,h,v,p=[0,0,0,1];if(d=f.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(v=d[2],d=d[1],h=0;h<3;h++){var g=2*h;p[h]=parseInt(d.slice(g,g+2),16)}v&&(p[3]=parseInt(v,16)/255)}else if(d=f.match(/^#([a-f0-9]{3,4})$/i)){for(v=(d=d[1])[3],h=0;h<3;h++)p[h]=parseInt(d[h]+d[h],16);v&&(p[3]=parseInt(v+v,16)/255)}else if(d=f.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(h=0;h<3;h++)p[h]=parseInt(d[h+1],0);d[4]&&(d[5]?p[3]=.01*parseFloat(d[4]):p[3]=parseFloat(d[4]))}else{if(!(d=f.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(d=f.match(/^(\w+)$/))?d[1]==="transparent"?[0,0,0,0]:a.call(n,d[1])?((p=n[d[1]])[3]=1,p):null:null;for(h=0;h<3;h++)p[h]=Math.round(2.55*parseFloat(d[h+1]));d[4]&&(d[5]?p[3]=.01*parseFloat(d[4]):p[3]=parseFloat(d[4]))}for(h=0;h<3;h++)p[h]=l(p[h],0,255);return p[3]=l(p[3],0,1),p},u.get.hsl=function(f){if(!f)return null;var d=f.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(d){var h=parseFloat(d[4]);return[(parseFloat(d[1])%360+360)%360,l(parseFloat(d[2]),0,100),l(parseFloat(d[3]),0,100),l(isNaN(h)?1:h,0,1)]}return null},u.get.hwb=function(f){if(!f)return null;var d=f.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(d){var h=parseFloat(d[4]);return[(parseFloat(d[1])%360+360)%360,l(parseFloat(d[2]),0,100),l(parseFloat(d[3]),0,100),l(isNaN(h)?1:h,0,1)]}return null},u.to.hex=function(){var f=i(arguments);return"#"+c(f[0])+c(f[1])+c(f[2])+(f[3]<1?c(Math.round(255*f[3])):"")},u.to.rgb=function(){var f=i(arguments);return f.length<4||f[3]===1?"rgb("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+")":"rgba("+Math.round(f[0])+", "+Math.round(f[1])+", "+Math.round(f[2])+", "+f[3]+")"},u.to.rgb.percent=function(){var f=i(arguments),d=Math.round(f[0]/255*100),h=Math.round(f[1]/255*100),v=Math.round(f[2]/255*100);return f.length<4||f[3]===1?"rgb("+d+"%, "+h+"%, "+v+"%)":"rgba("+d+"%, "+h+"%, "+v+"%, "+f[3]+")"},u.to.hsl=function(){var f=i(arguments);return f.length<4||f[3]===1?"hsl("+f[0]+", "+f[1]+"%, "+f[2]+"%)":"hsla("+f[0]+", "+f[1]+"%, "+f[2]+"%, "+f[3]+")"},u.to.hwb=function(){var f=i(arguments),d="";return f.length>=4&&f[3]!==1&&(d=", "+f[3]),"hwb("+f[0]+", "+f[1]+"%, "+f[2]+"%"+d+")"},u.to.keyword=function(f){return o[f.slice(0,3)]}},3274:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=void 0;var n=t(3879),i=t(1018);e.switchMapTo=function(a,o){return i.isFunction(o)?n.switchMap(function(){return a},o):n.switchMap(function(){return a})}},3321:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var n=t(7168),i=t(9305).internal.objectUtil,a=function(){function s(u){this._transformers=u,this._transformersPerSignature=new Map(u.map(function(l){return[l.signature,l]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return s.prototype.fromStructure=function(u){try{return u instanceof n.structure.Structure&&this._transformersPerSignature.has(u.signature)?(0,this._transformersPerSignature.get(u.signature).fromStructure)(u):u}catch(l){return i.createBrokenObject(l)}},s.prototype.toStructure=function(u){var l=this._transformers.find(function(c){return(0,c.isTypeInstance)(u)});return l!==void 0?l.toStructure(u):u},s}();e.default=a;var o=function(){function s(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,d=u.isTypeInstance;this.signature=l,this.isTypeInstance=d,this.fromStructure=c,this.toStructure=f,Object.freeze(this)}return s.prototype.extendsWith=function(u){var l=u.signature,c=u.fromStructure,f=u.toStructure,d=u.isTypeInstance;return new s({signature:l||this.signature,fromStructure:c||this.fromStructure,toStructure:f||this.toStructure,isTypeInstance:d||this.isTypeInstance})},s}();e.TypeTransformer=o},3327:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observable=void 0,e.observable=typeof Symbol=="function"&&Symbol.observable||"@@observable"},3371:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var n=t(9691),i=new Map,a=function(){function p(g,y){this.low=g??0,this.high=y??0}return p.prototype.inSafeRange=function(){return this.greaterThanOrEqual(p.MIN_SAFE_VALUE)&&this.lessThanOrEqual(p.MAX_SAFE_VALUE)},p.prototype.toInt=function(){return this.low},p.prototype.toNumber=function(){return this.high*s+(this.low>>>0)},p.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(s)+BigInt(this.low>>>0);var g=this.negate();return BigInt(-1)*(BigInt(g.high>>>0)*BigInt(s)+BigInt(g.low>>>0))},p.prototype.toNumberOrInfinity=function(){return this.lessThan(p.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(p.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},p.prototype.toString=function(g){if((g=g??10)<2||g>36)throw RangeError("radix out of range: "+g.toString());if(this.isZero())return"0";var y;if(this.isNegative()){if(this.equals(p.MIN_VALUE)){var b=p.fromNumber(g),m=this.div(b);return y=m.multiply(b).subtract(this),m.toString(g)+y.toInt().toString(g)}return"-"+this.negate().toString(g)}var _=p.fromNumber(Math.pow(g,6));y=this;for(var x="";;){var C=y.div(_),w=(y.subtract(C.multiply(_)).toInt()>>>0).toString(g);if((y=C).isZero())return w+x;for(;w.length<6;)w="0"+w;x=""+w+x}},p.prototype.valueOf=function(){return this.toBigInt()},p.prototype.getHighBits=function(){return this.high},p.prototype.getLowBits=function(){return this.low},p.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(p.MIN_VALUE)?64:this.negate().getNumBitsAbs();var g=this.high!==0?this.high:this.low,y=0;for(y=31;y>0&&!(g&1<<y);y--);return this.high!==0?y+33:y+1},p.prototype.isZero=function(){return this.high===0&&this.low===0},p.prototype.isNegative=function(){return this.high<0},p.prototype.isPositive=function(){return this.high>=0},p.prototype.isOdd=function(){return!(1&~this.low)},p.prototype.isEven=function(){return!(1&this.low)},p.prototype.equals=function(g){var y=p.fromValue(g);return this.high===y.high&&this.low===y.low},p.prototype.notEquals=function(g){return!this.equals(g)},p.prototype.lessThan=function(g){return this.compare(g)<0},p.prototype.lessThanOrEqual=function(g){return this.compare(g)<=0},p.prototype.greaterThan=function(g){return this.compare(g)>0},p.prototype.greaterThanOrEqual=function(g){return this.compare(g)>=0},p.prototype.compare=function(g){var y=p.fromValue(g);if(this.equals(y))return 0;var b=this.isNegative(),m=y.isNegative();return b&&!m?-1:!b&&m?1:this.subtract(y).isNegative()?-1:1},p.prototype.negate=function(){return this.equals(p.MIN_VALUE)?p.MIN_VALUE:this.not().add(p.ONE)},p.prototype.add=function(g){var y=p.fromValue(g),b=this.high>>>16,m=65535&this.high,_=this.low>>>16,x=65535&this.low,C=y.high>>>16,w=65535&y.high,O=y.low>>>16,A=0,k=0,R=0,I=0;return R+=(I+=x+(65535&y.low))>>>16,I&=65535,k+=(R+=_+O)>>>16,R&=65535,A+=(k+=m+w)>>>16,k&=65535,A+=b+C,A&=65535,p.fromBits(R<<16|I,A<<16|k)},p.prototype.subtract=function(g){var y=p.fromValue(g);return this.add(y.negate())},p.prototype.multiply=function(g){if(this.isZero())return p.ZERO;var y=p.fromValue(g);if(y.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return y.isOdd()?p.MIN_VALUE:p.ZERO;if(y.equals(p.MIN_VALUE))return this.isOdd()?p.MIN_VALUE:p.ZERO;if(this.isNegative())return y.isNegative()?this.negate().multiply(y.negate()):this.negate().multiply(y).negate();if(y.isNegative())return this.multiply(y.negate()).negate();if(this.lessThan(l)&&y.lessThan(l))return p.fromNumber(this.toNumber()*y.toNumber());var b=this.high>>>16,m=65535&this.high,_=this.low>>>16,x=65535&this.low,C=y.high>>>16,w=65535&y.high,O=y.low>>>16,A=65535&y.low,k=0,R=0,I=0,M=0;return I+=(M+=x*A)>>>16,M&=65535,R+=(I+=_*A)>>>16,I&=65535,R+=(I+=x*O)>>>16,I&=65535,k+=(R+=m*A)>>>16,R&=65535,k+=(R+=_*O)>>>16,R&=65535,k+=(R+=x*w)>>>16,R&=65535,k+=b*A+m*O+_*w+x*C,k&=65535,p.fromBits(I<<16|M,k<<16|R)},p.prototype.div=function(g){var y,b,m,_=p.fromValue(g);if(_.isZero())throw(0,n.newError)("division by zero");if(this.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return _.equals(p.ONE)||_.equals(p.NEG_ONE)?p.MIN_VALUE:_.equals(p.MIN_VALUE)?p.ONE:(y=this.shiftRight(1).div(_).shiftLeft(1)).equals(p.ZERO)?_.isNegative()?p.ONE:p.NEG_ONE:(b=this.subtract(_.multiply(y)),m=y.add(b.div(_)));if(_.equals(p.MIN_VALUE))return p.ZERO;if(this.isNegative())return _.isNegative()?this.negate().div(_.negate()):this.negate().div(_).negate();if(_.isNegative())return this.div(_.negate()).negate();for(m=p.ZERO,b=this;b.greaterThanOrEqual(_);){y=Math.max(1,Math.floor(b.toNumber()/_.toNumber()));for(var x=Math.ceil(Math.log(y)/Math.LN2),C=x<=48?1:Math.pow(2,x-48),w=p.fromNumber(y),O=w.multiply(_);O.isNegative()||O.greaterThan(b);)y-=C,O=(w=p.fromNumber(y)).multiply(_);w.isZero()&&(w=p.ONE),m=m.add(w),b=b.subtract(O)}return m},p.prototype.modulo=function(g){var y=p.fromValue(g);return this.subtract(this.div(y).multiply(y))},p.prototype.not=function(){return p.fromBits(~this.low,~this.high)},p.prototype.and=function(g){var y=p.fromValue(g);return p.fromBits(this.low&y.low,this.high&y.high)},p.prototype.or=function(g){var y=p.fromValue(g);return p.fromBits(this.low|y.low,this.high|y.high)},p.prototype.xor=function(g){var y=p.fromValue(g);return p.fromBits(this.low^y.low,this.high^y.high)},p.prototype.shiftLeft=function(g){var y=p.toNumber(g);return(y&=63)==0?p.ZERO:y<32?p.fromBits(this.low<<y,this.high<<y|this.low>>>32-y):p.fromBits(0,this.low<<y-32)},p.prototype.shiftRight=function(g){var y=p.toNumber(g),b=p.toNumber(g);return(y&=63)==0?p.ZERO:b<32?p.fromBits(this.low>>>y|this.high<<32-y,this.high>>y):p.fromBits(this.high>>y-32,this.high>=0?0:-1)},p.isInteger=function(g){return(g==null?void 0:g.__isInteger__)===!0},p.fromInt=function(g){var y;if((g|=0)>=-128&&g<128&&(y=i.get(g))!=null)return y;var b=new p(g,g<0?-1:0);return g>=-128&&g<128&&i.set(g,b),b},p.fromBits=function(g,y){return new p(g,y)},p.fromNumber=function(g){return isNaN(g)||!isFinite(g)?p.ZERO:g<=-u?p.MIN_VALUE:g+1>=u?p.MAX_VALUE:g<0?p.fromNumber(-g).negate():new p(g%s|0,g/s|0)},p.fromString=function(g,y,b){var m,_=(b===void 0?{}:b).strictStringValidation;if(g.length===0)throw(0,n.newError)("number format error: empty string");if(g==="NaN"||g==="Infinity"||g==="+Infinity"||g==="-Infinity")return p.ZERO;if((y=y??10)<2||y>36)throw(0,n.newError)("radix out of range: "+y.toString());if((m=g.indexOf("-"))>0)throw(0,n.newError)('number format error: interior "-" character: '+g);if(m===0)return p.fromString(g.substring(1),y).negate();for(var x=p.fromNumber(Math.pow(y,8)),C=p.ZERO,w=0;w<g.length;w+=8){var O=Math.min(8,g.length-w),A=g.substring(w,w+O),k=parseInt(A,y);if(_===!0&&!o(A,k,y))throw(0,n.newError)('number format error: "'.concat(A,'" is NaN in radix ').concat(y,": ").concat(g));if(O<8){var R=p.fromNumber(Math.pow(y,O));C=C.multiply(R).add(p.fromNumber(k))}else C=(C=C.multiply(x)).add(p.fromNumber(k))}return C},p.fromValue=function(g,y){return y===void 0&&(y={}),g instanceof p?g:typeof g=="number"?(y.ceilFloat===!0&&(g=Math.ceil(g)),p.fromNumber(g)):typeof g=="string"?p.fromString(g,void 0,y):typeof g=="bigint"?p.fromString(g.toString()):new p(g.low,g.high)},p.toNumber=function(g){switch(typeof g){case"number":return g;case"bigint":return Number(g);default:return p.fromValue(g).toNumber()}},p.toString=function(g,y){return p.fromValue(g).toString(y)},p.inSafeRange=function(g){return p.fromValue(g).inSafeRange()},p.ZERO=p.fromInt(0),p.ONE=p.fromInt(1),p.NEG_ONE=p.fromInt(-1),p.MAX_VALUE=p.fromBits(-1,2147483647),p.MIN_VALUE=p.fromBits(0,-2147483648),p.MIN_SAFE_VALUE=p.fromBits(1,-2097152),p.MAX_SAFE_VALUE=p.fromBits(-1,2097151),p.__isInteger__=!0,p}();function o(p,g,y){return!Number.isNaN(p)&&!Number.isNaN(g)&&function(b,m,_){var x=b.toString(m),C=Math.max(_-x.length,0),w="0".repeat(C);return"".concat(w).concat(x)}(g,y,p.length)===p.toLowerCase()}Object.defineProperty(a.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var s=4294967296,u=s*s/2,l=a.fromInt(1<<24),c=a.fromValue;e.int=c;var f=a.isInteger;e.isInt=f;var d=a.inSafeRange;e.inSafeRange=d;var h=a.toNumber;e.toNumber=h;var v=a.toString;e.toString=v,e.default=a},3389:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(i){return Promise.resolve([i])},n}();e.default=t},3399:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(9238));e.default=n({},a.default)},3413:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0,e.config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3448:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(g){for(var y,b=1,m=arguments.length;b<m;b++)for(var _ in y=arguments[b])Object.prototype.hasOwnProperty.call(y,_)&&(g[_]=y[_]);return g},n.apply(this,arguments)},i=this&&this.__read||function(g,y){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var m,_,x=b.call(g),C=[];try{for(;(y===void 0||y-- >0)&&!(m=x.next()).done;)C.push(m.value)}catch(w){_={error:w}}finally{try{m&&!m.done&&(b=x.return)&&b.call(x)}finally{if(_)throw _.error}}return C},a=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9305),s=t(7168),u=t(3321),l=t(5973),c=a(t(6661)),f=o.internal.temporalUtil,d=f.dateToEpochDay,h=f.localDateTimeToEpochSecond,v=f.localTimeToNanoOfDay;function p(g,y,b){if(!y&&!b)return g;var m=function(w){return b?w.toBigInt():w.toNumberOrInfinity()},_=Object.create(Object.getPrototypeOf(g));for(var x in g)if(Object.prototype.hasOwnProperty.call(g,x)===!0){var C=g[x];_[x]=(0,o.isInt)(C)?m(C):C}return Object.freeze(_),_}e.default=n(n({},c.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:88,isTypeInstance:function(g){return(0,o.isPoint)(g)&&(g.z===null||g.z===void 0)},toStructure:function(g){return new s.structure.Structure(88,[(0,o.int)(g.srid),g.x,g.y])},fromStructure:function(g){s.structure.verifyStructSize("Point2D",3,g.size);var y=i(g.fields,3),b=y[0],m=y[1],_=y[2];return new o.Point(b,m,_,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:89,isTypeInstance:function(g){return(0,o.isPoint)(g)&&g.z!==null&&g.z!==void 0},toStructure:function(g){return new s.structure.Structure(89,[(0,o.int)(g.srid),g.x,g.y,g.z])},fromStructure:function(g){s.structure.verifyStructSize("Point3D",4,g.size);var y=i(g.fields,4),b=y[0],m=y[1],_=y[2],x=y[3];return new o.Point(b,m,_,x)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:69,isTypeInstance:o.isDuration,toStructure:function(g){var y=(0,o.int)(g.months),b=(0,o.int)(g.days),m=(0,o.int)(g.seconds),_=(0,o.int)(g.nanoseconds);return new s.structure.Structure(69,[y,b,m,_])},fromStructure:function(g){s.structure.verifyStructSize("Duration",4,g.size);var y=i(g.fields,4),b=y[0],m=y[1],_=y[2],x=y[3];return new o.Duration(b,m,_,x)}})},createLocalTimeTransformer:function(g){var y=g.disableLosslessIntegers,b=g.useBigInt;return new u.TypeTransformer({signature:116,isTypeInstance:o.isLocalTime,toStructure:function(m){var _=v(m.hour,m.minute,m.second,m.nanosecond);return new s.structure.Structure(116,[_])},fromStructure:function(m){s.structure.verifyStructSize("LocalTime",1,m.size);var _=i(m.fields,1)[0];return p((0,l.nanoOfDayToLocalTime)(_),y,b)}})},createTimeTransformer:function(g){var y=g.disableLosslessIntegers,b=g.useBigInt;return new u.TypeTransformer({signature:84,isTypeInstance:o.isTime,toStructure:function(m){var _=v(m.hour,m.minute,m.second,m.nanosecond),x=(0,o.int)(m.timeZoneOffsetSeconds);return new s.structure.Structure(84,[_,x])},fromStructure:function(m){s.structure.verifyStructSize("Time",2,m.size);var _=i(m.fields,2),x=_[0],C=_[1],w=(0,l.nanoOfDayToLocalTime)(x);return p(new o.Time(w.hour,w.minute,w.second,w.nanosecond,C),y,b)}})},createDateTransformer:function(g){var y=g.disableLosslessIntegers,b=g.useBigInt;return new u.TypeTransformer({signature:68,isTypeInstance:o.isDate,toStructure:function(m){var _=d(m.year,m.month,m.day);return new s.structure.Structure(68,[_])},fromStructure:function(m){s.structure.verifyStructSize("Date",1,m.size);var _=i(m.fields,1)[0];return p((0,l.epochDayToDate)(_),y,b)}})},createLocalDateTimeTransformer:function(g){var y=g.disableLosslessIntegers,b=g.useBigInt;return new u.TypeTransformer({signature:100,isTypeInstance:o.isLocalDateTime,toStructure:function(m){var _=h(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),x=(0,o.int)(m.nanosecond);return new s.structure.Structure(100,[_,x])},fromStructure:function(m){s.structure.verifyStructSize("LocalDateTime",2,m.size);var _=i(m.fields,2),x=_[0],C=_[1];return p((0,l.epochSecondAndNanoToLocalDateTime)(x,C),y,b)}})},createDateTimeWithZoneIdTransformer:function(g){var y=g.disableLosslessIntegers,b=g.useBigInt;return new u.TypeTransformer({signature:102,isTypeInstance:function(m){return(0,o.isDateTime)(m)&&m.timeZoneId!=null},toStructure:function(m){var _=h(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),x=(0,o.int)(m.nanosecond),C=m.timeZoneId;return new s.structure.Structure(102,[_,x,C])},fromStructure:function(m){s.structure.verifyStructSize("DateTimeWithZoneId",3,m.size);var _=i(m.fields,3),x=_[0],C=_[1],w=_[2],O=(0,l.epochSecondAndNanoToLocalDateTime)(x,C);return p(new o.DateTime(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond,null,w),y,b)}})},createDateTimeWithOffsetTransformer:function(g){var y=g.disableLosslessIntegers,b=g.useBigInt;return new u.TypeTransformer({signature:70,isTypeInstance:function(m){return(0,o.isDateTime)(m)&&m.timeZoneId==null},toStructure:function(m){var _=h(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond),x=(0,o.int)(m.nanosecond),C=(0,o.int)(m.timeZoneOffsetSeconds);return new s.structure.Structure(70,[_,x,C])},fromStructure:function(m){s.structure.verifyStructSize("DateTimeWithZoneOffset",3,m.size);var _=i(m.fields,3),x=_[0],C=_[1],w=_[2],O=(0,l.epochSecondAndNanoToLocalDateTime)(x,C);return p(new o.DateTime(O.year,O.month,O.day,O.hour,O.minute,O.second,O.nanosecond,w,null),y,b)}})}})},3466:function(r,e,t){var n=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),a=t(9419),o=n(t(3057)),s=t(9305),u=n(t(5742)),l=n(t(1530)),c=n(t(9823)),f=s.internal.constants,d=f.ACCESS_MODE_READ,h=f.ACCESS_MODE_WRITE,v=f.TELEMETRY_APIS,p=s.internal.txConfig.TxConfig,g=function(){function y(b){var m=b===void 0?{}:b,_=m.session,x=m.config,C=m.log;this._session=_,this._retryLogic=function(w){var O=w&&w.maxTransactionRetryTime?w.maxTransactionRetryTime:null;return new c.default({maxRetryTimeout:O})}(x),this._log=C}return y.prototype.run=function(b,m,_){var x=this;return new o.default(new i.Observable(function(C){try{C.next(x._session.run(b,m,_)),C.complete()}catch(w){C.error(w)}return function(){}}))},y.prototype.beginTransaction=function(b){return this._beginTransaction(this._session._mode,b,{api:v.UNMANAGED_TRANSACTION})},y.prototype.readTransaction=function(b,m){return this._runTransaction(d,b,m)},y.prototype.writeTransaction=function(b,m){return this._runTransaction(h,b,m)},y.prototype.executeRead=function(b,m){return this._executeInTransaction(d,b,m)},y.prototype.executeWrite=function(b,m){return this._executeInTransaction(h,b,m)},y.prototype._executeInTransaction=function(b,m,_){return this._runTransaction(b,m,_,function(x){return new l.default({run:x.run.bind(x)})})},y.prototype.close=function(){var b=this;return new i.Observable(function(m){b._session.close().then(function(){m.complete()}).catch(function(_){return m.error(_)})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype.lastBookmark=function(){return this.lastBookmarks()},y.prototype.lastBookmarks=function(){return this._session.lastBookmarks()},y.prototype._beginTransaction=function(b,m,_){var x=this,C=p.empty();return m&&(C=new p(m,this._log)),new i.Observable(function(w){try{x._session._beginTransaction(b,C,_).then(function(O){w.next(new u.default(O)),w.complete()}).catch(function(O){return w.error(O)})}catch(O){w.error(O)}return function(){}})},y.prototype._runTransaction=function(b,m,_,x){var C=this;x===void 0&&(x=function(A){return A});var w=p.empty();_&&(w=new p(_));var O={apiTelemetryConfig:{api:v.MANAGED_TRANSACTION,onTelemetrySuccess:function(){O.apiTelemetryConfig=void 0}}};return this._retryLogic.retry((0,i.of)(1).pipe((0,a.mergeMap)(function(){return C._beginTransaction(b,w,O.apiTelemetryConfig)}),(0,a.mergeMap)(function(A){return(0,i.defer)(function(){try{return m(x(A))}catch(k){return(0,i.throwError)(function(){return k})}}).pipe((0,a.catchError)(function(k){return A.rollback().pipe((0,a.concatWith)((0,i.throwError)(function(){return k})))}),(0,a.concatWith)(A.commit()))})))},y}();e.default=g},3473:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),a=t(9305),o=n(t(1048)),s=new(t(8888)).StringDecoder("utf8");e.default={encode:function(u){return new i.default(function(l){return typeof o.default.Buffer.from=="function"?o.default.Buffer.from(l,"utf8"):new o.default.Buffer(l,"utf8")}(u))},decode:function(u,l){if(Object.prototype.hasOwnProperty.call(u,"_buffer"))return function(c,f){var d=c.position,h=d+f;return c.position=Math.min(h,c.length),c._buffer.toString("utf8",d,h)}(u,l);if(Object.prototype.hasOwnProperty.call(u,"_buffers"))return function(c,f){return function(d,h){var v=h,p=d.position;return d._updatePos(Math.min(h,d.length-p)),d._buffers.reduce(function(g,y){if(v<=0)return g;if(p>=y.length)return p-=y.length,"";y._updatePos(p-y.position);var b=Math.min(y.length-p,v),m=y.readSlice(b);return y._updatePos(b),v=Math.max(v-m.length,0),p=0,g+function(_){return s.write(_._buffer)}(m)},"")+s.end()}(c,f)}(u,l);throw(0,a.newError)("Don't know how to decode strings from '".concat(u,"'"))}}},3488:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(a,o,s,u){u===void 0&&(u=s);var l=Object.getOwnPropertyDescriptor(o,s);l&&!("get"in l?!o.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(a,u,l)}:function(a,o,s,u){u===void 0&&(u=s),a[u]=o[s]}),i=this&&this.__exportStar||function(a,o){for(var s in a)s==="default"||Object.prototype.hasOwnProperty.call(o,s)||n(o,a,s)};Object.defineProperty(e,"__esModule",{value:!0}),i(t(5837),e)},3545:function(r,e,t){var n=this&&this.__extends||function(){var y=function(b,m){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,x){_.__proto__=x}||function(_,x){for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(_[C]=x[C])},y(b,m)};return function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function _(){this.constructor=b}y(b,m),b.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}}(),i=this&&this.__awaiter||function(y,b,m,_){return new(m||(m=Promise))(function(x,C){function w(k){try{A(_.next(k))}catch(R){C(R)}}function O(k){try{A(_.throw(k))}catch(R){C(R)}}function A(k){var R;k.done?x(k.value):(R=k.value,R instanceof m?R:new m(function(I){I(R)})).then(w,O)}A((_=_.apply(y,b||[])).next())})},a=this&&this.__generator||function(y,b){var m,_,x,C,w={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return C={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function O(A){return function(k){return function(R){if(m)throw new TypeError("Generator is already executing.");for(;C&&(C=0,R[0]&&(w=0)),w;)try{if(m=1,_&&(x=2&R[0]?_.return:R[0]?_.throw||((x=_.return)&&x.call(_),0):_.next)&&!(x=x.call(_,R[1])).done)return x;switch(_=0,x&&(R=[2&R[0],x.value]),R[0]){case 0:case 1:x=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,_=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(!((x=(x=w.trys).length>0&&x[x.length-1])||R[0]!==6&&R[0]!==2)){w=0;continue}if(R[0]===3&&(!x||R[1]>x[0]&&R[1]<x[3])){w.label=R[1];break}if(R[0]===6&&w.label<x[1]){w.label=x[1],x=R;break}if(x&&w.label<x[2]){w.label=x[2],w.ops.push(R);break}x[2]&&w.ops.pop(),w.trys.pop();continue}R=b.call(y,w)}catch(I){R=[6,I],_=0}finally{m=x=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([A,k])}}},o=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(8987)),u=t(7721),l=t(9305),c=l.internal.constants,f=c.BOLT_PROTOCOL_V3,d=c.BOLT_PROTOCOL_V4_0,h=c.BOLT_PROTOCOL_V4_4,v=c.BOLT_PROTOCOL_V5_1,p=l.error.SERVICE_UNAVAILABLE,g=function(y){function b(m){var _=m.id,x=m.config,C=m.log,w=m.address,O=m.userAgent,A=m.boltAgent,k=m.authTokenManager,R=m.newPool,I=y.call(this,{id:_,config:x,log:C,userAgent:O,boltAgent:A,authTokenManager:k,newPool:R})||this;return I._address=w,I}return n(b,y),b.prototype.acquireConnection=function(m){var _=m===void 0?{}:m,x=(_.accessMode,_.database),C=(_.bookmarks,_.auth),w=_.forceReAuth;return i(this,void 0,void 0,function(){var O,A,k=this;return a(this,function(R){switch(R.label){case 0:return O=u.ConnectionErrorHandler.create({errorCode:p,handleSecurityError:function(I,M,N){return k._handleSecurityError(I,M,N,x)}}),[4,this._connectionPool.acquire({auth:C,forceReAuth:w},this._address)];case 1:return A=R.sent(),C?[4,this._verifyStickyConnection({auth:C,connection:A,address:this._address})]:[3,3];case 2:return R.sent(),[2,A];case 3:return[2,new u.DelegateConnection(A,O)]}})})},b.prototype._handleSecurityError=function(m,_,x,C){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(_," for database '").concat(C,"' because of an error ").concat(m.code," '").concat(m.message,"'")),y.prototype._handleSecurityError.call(this,m,_,x)},b.prototype._hasProtocolVersion=function(m){return i(this,void 0,void 0,function(){var _,x;return a(this,function(C){switch(C.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return _=C.sent(),x=_.protocol()?_.protocol().version:null,[4,_.close()];case 2:return C.sent(),x?[2,m(x)]:[2,!1]}})})},b.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return a(this,function(m){switch(m.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=d})];case 1:return[2,m.sent()]}})})},b.prototype.getNegotiatedProtocolVersion=function(){var m=this;return new Promise(function(_,x){m._hasProtocolVersion(_).catch(x)})},b.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return a(this,function(m){switch(m.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=f})];case 1:return[2,m.sent()]}})})},b.prototype.supportsUserImpersonation=function(){return i(this,void 0,void 0,function(){return a(this,function(m){switch(m.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=h})];case 1:return[2,m.sent()]}})})},b.prototype.supportsSessionAuth=function(){return i(this,void 0,void 0,function(){return a(this,function(m){switch(m.label){case 0:return[4,this._hasProtocolVersion(function(_){return _>=v})];case 1:return[2,m.sent()]}})})},b.prototype.verifyAuthentication=function(m){var _=m.auth;return i(this,void 0,void 0,function(){var x=this;return a(this,function(C){return[2,this._verifyAuthentication({auth:_,getAddress:function(){return x._address}})]})})},b.prototype.verifyConnectivityAndGetServerInfo=function(){return i(this,void 0,void 0,function(){return a(this,function(m){switch(m.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,m.sent()]}})})},b}(s.default);e.default=g},3555:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=void 0;var n=t(7843);e.finalize=function(i){return n.operate(function(a,o){try{a.subscribe(o)}finally{o.add(i)}})}},3618:function(r,e,t){var n=this&&this.__extends||function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},p(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=g}p(g,y),g.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}(),i=this&&this.__awaiter||function(p,g,y,b){return new(y||(y=Promise))(function(m,_){function x(O){try{w(b.next(O))}catch(A){_(A)}}function C(O){try{w(b.throw(O))}catch(A){_(A)}}function w(O){var A;O.done?m(O.value):(A=O.value,A instanceof y?A:new y(function(k){k(A)})).then(x,C)}w((b=b.apply(p,g||[])).next())})},a=this&&this.__generator||function(p,g){var y,b,m,_,x={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(w){return function(O){return function(A){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(x=0)),x;)try{if(y=1,b&&(m=2&A[0]?b.return:A[0]?b.throw||((m=b.return)&&m.call(b),0):b.next)&&!(m=m.call(b,A[1])).done)return m;switch(b=0,m&&(A=[2&A[0],m.value]),A[0]){case 0:case 1:m=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,b=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(!((m=(m=x.trys).length>0&&m[m.length-1])||A[0]!==6&&A[0]!==2)){x=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){x.label=A[1];break}if(A[0]===6&&x.label<m[1]){x.label=m[1],m=A;break}if(m&&x.label<m[2]){x.label=m[2],x.ops.push(A);break}m[2]&&x.ops.pop(),x.trys.pop();continue}A=g.call(p,x)}catch(k){A=[6,k],b=0}finally{y=m=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([w,O])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var o=t(9691),s=t(6587),u=t(326),l=t(9730),c=t(4883),f=function(){function p(g){var y=g.mode,b=g.database,m=b===void 0?"":b,_=g.bookmarks,x=g.connectionProvider,C=g.impersonatedUser,w=g.onDatabaseNameResolved,O=g.getConnectionAcquistionBookmarks,A=g.auth,k=g.log;this._mode=y??u.ACCESS_MODE_WRITE,this._closed=!1,this._database=m!=null?(0,s.assertString)(m,"database"):"",this._bookmarks=_??l.Bookmarks.empty(),this._connectionProvider=x,this._impersonatedUser=C,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=w,this._auth=A,this._log=k,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=O??function(){return Promise.resolve(l.Bookmarks.empty())}}return p.prototype.mode=function(){return this._mode},p.prototype.database=function(){return this._database},p.prototype.setDatabase=function(g){this._database=g},p.prototype.bookmarks=function(){return this._bookmarks},p.prototype.connectionProvider=function(){return this._connectionProvider},p.prototype.referenceCount=function(){return this._referenceCount},p.prototype.initializeConnection=function(g){return this._referenceCount!==0||this._connectionProvider==null?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider,g),this._referenceCount++,!0)},p.prototype._createConnectionPromise=function(g,y){return i(this,void 0,void 0,function(){var b,m,_;return a(this,function(x){switch(x.label){case 0:return m=(b=g).acquireConnection,_={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,m.apply(b,[(_.bookmarks=x.sent(),_.impersonatedUser=this._impersonatedUser,_.onDatabaseNameResolved=this._onDatabaseNameResolved,_.auth=this._auth,_.homeDb=y,_)])];case 2:return[2,x.sent()]}})})},p.prototype._getBookmarks=function(){return i(this,void 0,void 0,function(){return a(this,function(g){switch(g.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,g.sent()]}})})},p.prototype.getConnection=function(){return this._connectionPromise},p.prototype.releaseConnection=function(){return this._referenceCount===0?this._connectionPromise:(this._referenceCount--,this._referenceCount===0?this._releaseConnection():this._connectionPromise)},p.prototype.close=function(g){return this._closed=!0,this._referenceCount===0?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(g))},p.prototype.log=function(){return this._log},p.prototype._releaseConnection=function(g){return this._connectionPromise=this._connectionPromise.then(function(y){return y!=null?y.isOpen()&&(y.hasOngoingObservableRequests()||g===!0)?y.resetAndFlush().catch(v).then(function(){return y.release().then(function(){return null})}):y.release().then(function(){return null}):Promise.resolve(null)}).catch(this._logError),this._connectionPromise},p.prototype._logError=function(g){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(g,". Stacktrace: ").concat(g.stack)),null},p}();e.ConnectionHolder=f;var d=function(p){function g(y){var b=p.call(this,{mode:y.mode(),database:y.database(),bookmarks:y.bookmarks(),getConnectionAcquistionBookmarks:y._getConnectionAcquistionBookmarks,connectionProvider:y.connectionProvider(),log:y.log()})||this;return b._connectionHolder=y,b}return n(g,p),g.prototype.initializeConnection=function(){return this._connectionHolder.referenceCount()!==0},g.prototype.getConnection=function(){return this._connectionHolder.getConnection()},g.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},g.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},g}(f);e.ReadOnlyConnectionHolder=d,e.default=d;var h=new(function(p){function g(){return p.call(this,{log:c.Logger.create({})})||this}return n(g,p),g.prototype.mode=function(){},g.prototype.database=function(){},g.prototype.initializeConnection=function(){return!0},g.prototype.getConnection=function(){return i(this,void 0,void 0,function(){return a(this,function(y){switch(y.label){case 0:return[4,Promise.reject((0,o.newError)("This connection holder does not serve connections"))];case 1:return[2,y.sent()]}})})},g.prototype.releaseConnection=function(){return i(this,void 0,void 0,function(){return a(this,function(y){switch(y.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,y.sent()]}})})},g.prototype.close=function(){return i(this,void 0,void 0,function(){return a(this,function(y){switch(y.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,y.sent()]}})})},g}(f));function v(p){return null}e.EMPTY_CONNECTION_HOLDER=h},3638:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.joinAllInternals=void 0;var n=t(6640),i=t(1251),a=t(2706),o=t(983),s=t(2343);e.joinAllInternals=function(u,l){return a.pipe(s.toArray(),o.mergeMap(function(c){return u(c)}),l?i.mapOneOrManyArgs(l):n.identity)}},3659:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.28.1"},3692:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asap=e.asapScheduler=void 0;var n=t(5006),i=t(827);e.asapScheduler=new i.AsapScheduler(n.AsapAction),e.asap=e.asapScheduler},3862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrame=e.animationFrameScheduler=void 0;var n=t(2628),i=t(3229);e.animationFrameScheduler=new i.AnimationFrameScheduler(n.AnimationFrameAction),e.animationFrame=e.animationFrameScheduler},3865:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var n=t(8158),i=t(1107),a=t(4917);e.concat=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n.concatAll()(a.from(o,i.popScheduler(o)))}},3879:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=void 0;var n=t(9445),i=t(7843),a=t(3111);e.switchMap=function(o,s){return i.operate(function(u,l){var c=null,f=0,d=!1,h=function(){return d&&!c&&l.complete()};u.subscribe(a.createOperatorSubscriber(l,function(v){c==null||c.unsubscribe();var p=0,g=f++;n.innerFrom(o(v,g)).subscribe(c=a.createOperatorSubscriber(l,function(y){return l.next(s?s(v,y,g,p++):y)},function(){c=null,h()}))},function(){d=!0,h()}))})}},3951:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=n(t(6245)),a=n(t(2199)),o=n(t(614));e.Channel=i.default,e.HostNameResolver=a.default,e.ClientCertificatesLoader=o.default},3964:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tap=void 0;var n=t(1018),i=t(7843),a=t(3111),o=t(6640);e.tap=function(s,u,l){var c=n.isFunction(s)||u||l?{next:s,error:u,complete:l}:s;return c?i.operate(function(f,d){var h;(h=c.subscribe)===null||h===void 0||h.call(c);var v=!0;f.subscribe(a.createOperatorSubscriber(d,function(p){var g;(g=c.next)===null||g===void 0||g.call(c,p),d.next(p)},function(){var p;v=!1,(p=c.complete)===null||p===void 0||p.call(c),d.complete()},function(p){var g;v=!1,(g=c.error)===null||g===void 0||g.call(c,p),d.error(p)},function(){var p,g;v&&((p=c.unsubscribe)===null||p===void 0||p.call(c)),(g=c.finalize)===null||g===void 0||g.call(c)}))}):o.identity}},3982:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skip=void 0;var n=t(783);e.skip=function(i){return n.filter(function(a,o){return i<=o})}},4027:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var n=t(93);e.stringify=function(i,a){return JSON.stringify(i,function(o,s){return(0,n.isBrokenObject)(s)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(s)}:typeof s=="bigint"?"".concat(s,"n"):(a==null?void 0:a.sortedElements)!==!0||typeof s!="object"||Array.isArray(s)?(a==null?void 0:a.useCustomToString)!==!0||typeof s!="object"||Array.isArray(s)||typeof s.toString!="function"||s.toString===Object.prototype.toString?s:s==null?void 0:s.toString():Object.keys(s).sort().reduce(function(u,l){return u[l]=s[l],u},{})})}},4092:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timer=void 0;var n=t(4662),i=t(7961),a=t(8613),o=t(1074);e.timer=function(s,u,l){s===void 0&&(s=0),l===void 0&&(l=i.async);var c=-1;return u!=null&&(a.isScheduler(u)?l=u:c=u),new n.Observable(function(f){var d=o.isValidDate(s)?+s-l.now():s;d<0&&(d=0);var h=0;return l.schedule(function(){f.closed||(f.next(h++),0<=c?this.schedule(void 0,c):f.complete())},d)})}},4132:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(a){function o(s){var u=a.call(this)||this;return u._connection=s,u}return n(o,a),o.prototype.acquireConnection=function(s){var u=s===void 0?{}:s,l=(u.accessMode,u.database,u.bookmarks,this._connection);return this._connection=null,Promise.resolve(l)},o}(t(9305).ConnectionProvider);e.default=i},4151:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(9018)),a=(t(9305),function(){function o(s){this._routingContext=s}return o.prototype.lookupRoutingTableOnRouter=function(s,u,l,c){var f=this;return s._acquireConnection(function(d){return f._requestRawRoutingTable(d,s,u,l,c).then(function(h){return h.isNull?null:i.default.fromRawRoutingTable(u,l,h)})})},o.prototype._requestRawRoutingTable=function(s,u,l,c,f){var d=this;return new Promise(function(h,v){s.protocol().requestRoutingInformation({routingContext:d._routingContext,databaseName:l,impersonatedUser:f,sessionContext:{bookmarks:u._lastBookmarks,mode:u._mode,database:u._database,afterComplete:u._onComplete},onCompleted:h,onError:v})})},o}());e.default=a},4209:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iif=void 0;var n=t(9353);e.iif=function(i,a,o){return n.defer(function(){return i()?a:o})}},4212:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.QueueAction=void 0;var i=function(a){function o(s,u){var l=a.call(this,s,u)||this;return l.scheduler=s,l.work=u,l}return n(o,a),o.prototype.schedule=function(s,u){return u===void 0&&(u=0),u>0?a.prototype.schedule.call(this,s,u):(this.delay=u,this.state=s,this.scheduler.flush(this),this)},o.prototype.execute=function(s,u){return u>0||this.closed?a.prototype.execute.call(this,s,u):this._execute(s,u)},o.prototype.requestAsyncId=function(s,u,l){return l===void 0&&(l=0),l!=null&&l>0||l==null&&this.delay>0?a.prototype.requestAsyncId.call(this,s,u,l):(s.flush(this),0)},o}(t(5267).AsyncAction);e.QueueAction=i},4271:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,d){function h(g){try{p(c.next(g))}catch(y){d(y)}}function v(g){try{p(c.throw(g))}catch(y){d(y)}}function p(g){var y;g.done?f(g.value):(y=g.value,y instanceof l?y:new l(function(b){b(y)})).then(h,v)}p((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,d,h={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return d={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function v(p){return function(g){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(h=0)),h;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return h.label++,{value:y[1],done:!1};case 5:h.label++,c=y[1],y=[0];continue;case 7:y=h.ops.pop(),h.trys.pop();continue;default:if(!((f=(f=h.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){h=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){h.label=y[1];break}if(y[0]===6&&h.label<f[1]){h.label=f[1],f=y;break}if(f&&h.label<f[2]){h.label=f[2],h.ops.push(y);break}f[2]&&h.ops.pop(),h.trys.pop();continue}y=u.call(s,h)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([p,g])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7452),o=function(){function s(u){var l=u.clientCertificateProvider,c=u.loader;this._clientCertificateProvider=l,this._loader=c||a.ClientCertificatesLoader,this._clientCertificate=null}return s.prototype.getClientCertificate=function(){return n(this,void 0,void 0,function(){var u,l,c=this;return i(this,function(f){switch(f.label){case 0:return(u=this._clientCertificateProvider!=null)?(l=this._clientCertificate==null)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:l=f.sent(),f.label=2;case 2:u=l,f.label=3;case 3:return u&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then(function(d){return c._clientCertificate=d,c._clientCertificate}).catch(function(d){throw c._clientCertificate=null,d})),[2,this._clientCertificate]}})})},s}();e.default=o},4311:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(){}return n.prototype.selectReader=function(i){throw new Error("Abstract function")},n.prototype.selectWriter=function(i){throw new Error("Abstract function")},n}();e.default=t},4325:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(2204));e.default=n({},a.default)},4360:r=>{r.exports=function(e){for(var t=[],n=0;n<e.length;n++)e[n].type!=="eof"&&t.push(e[n].data);return t.join("")}},4408:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=void 0;var n=t(7843),i=t(1983);e.mergeScan=function(a,o,s){return s===void 0&&(s=1/0),n.operate(function(u,l){var c=o;return i.mergeInternals(u,l,function(f,d){return a(c,f,d)},s,function(f){c=f},!1,void 0,function(){return c=null})})}},4440:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,d=l.call(s),h=[];try{for(;(u===void 0||u-- >0)&&!(c=d.next()).done;)h.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(f)throw f.error}}return h},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.race=void 0;var a=t(8535),o=t(5600);e.race=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return o.raceWith.apply(void 0,i([],n(a.argsOrArgArray(s))))}},4455:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=n(t(4311));e.LoadBalancingStrategy=i.default;var a=n(t(2533));e.LeastConnectedLoadBalancingStrategy=a.default,e.default=a.default},4461:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=void 0;var n=t(7843),i=t(1342),a=t(3111),o=t(9445);e.debounce=function(s){return n.operate(function(u,l){var c=!1,f=null,d=null,h=function(){if(d==null||d.unsubscribe(),d=null,c){c=!1;var v=f;f=null,l.next(v)}};u.subscribe(a.createOperatorSubscriber(l,function(v){d==null||d.unsubscribe(),c=!0,f=v,d=a.createOperatorSubscriber(l,h,i.noop),o.innerFrom(s(v)).subscribe(d)},function(){h(),l.complete()},void 0,function(){f=d=null}))})}},4520:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=void 0;var n=t(7057),i=t(783),a=t(4869),o=t(378),s=t(846);e.elementAt=function(u,l){if(u<0)throw new n.ArgumentOutOfRangeError;var c=arguments.length>=2;return function(f){return f.pipe(i.filter(function(d,h){return h===u}),s.take(1),c?o.defaultIfEmpty(l):a.throwIfEmpty(function(){return new n.ArgumentOutOfRangeError}))}}},4531:function(r,e){var t=this&&this.__awaiter||function(a,o,s,u){return new(s||(s=Promise))(function(l,c){function f(v){try{h(u.next(v))}catch(p){c(p)}}function d(v){try{h(u.throw(v))}catch(p){c(p)}}function h(v){var p;v.done?l(v.value):(p=v.value,p instanceof s?p:new s(function(g){g(p)})).then(f,d)}h((u=u.apply(a,o||[])).next())})},n=this&&this.__generator||function(a,o){var s,u,l,c,f={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return c={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function d(h){return function(v){return function(p){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(f=0)),f;)try{if(s=1,u&&(l=2&p[0]?u.return:p[0]?u.throw||((l=u.return)&&l.call(u),0):u.next)&&!(l=l.call(u,p[1])).done)return l;switch(u=0,l&&(p=[2&p[0],l.value]),p[0]){case 0:case 1:l=p;break;case 4:return f.label++,{value:p[1],done:!1};case 5:f.label++,u=p[1],p=[0];continue;case 7:p=f.ops.pop(),f.trys.pop();continue;default:if(!((l=(l=f.trys).length>0&&l[l.length-1])||p[0]!==6&&p[0]!==2)){f=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){f.label=p[1];break}if(p[0]===6&&f.label<l[1]){f.label=l[1],l=p;break}if(l&&f.label<l[2]){f.label=l[2],f.ops.push(p);break}l[2]&&f.ops.pop(),f.trys.pop();continue}p=o.call(a,f)}catch(g){p=[6,g],u=0}finally{s=l=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([h,v])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function a(o){var s=o.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=s}return a.prototype.check=function(o){return t(this,void 0,void 0,function(){var s;return n(this,function(u){switch(u.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(o)?[2,!0]:(s=Date.now()-o.idleTimestamp,this._connectionLivenessCheckTimeout===0||s>this._connectionLivenessCheckTimeout?[4,o.resetAndFlush().then(function(){return!0})]:[3,2]);case 1:return[2,u.sent()];case 2:return[2,!0]}})})},Object.defineProperty(a.prototype,"_isCheckDisabled",{get:function(){return this._connectionLivenessCheckTimeout==null||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),a.prototype._isNewlyCreatedConnection=function(o){return o.authToken==null},a}();e.default=i},4569:function(r,e,t){var n,i=this&&this.__extends||function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(f[h]=d[h])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}(),a=this&&this.__assign||function(){return a=Object.assign||function(u){for(var l,c=1,f=arguments.length;c<f;c++)for(var d in l=arguments[c])Object.prototype.hasOwnProperty.call(l,d)&&(u[d]=l[d]);return u},a.apply(this,arguments)},o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0});var s=function(u){function l(c){var f=c.connectionHolder,d=c.onClose,h=c.onBookmarks,v=c.onConnection,p=c.reactive,g=c.fetchSize,y=c.impersonatedUser,b=c.highRecordWatermark,m=c.lowRecordWatermark,_=c.notificationFilter,x=c.apiTelemetryConfig,C=c.onDbCallback,w=u.call(this,{connectionHolder:f,onClose:d,onBookmarks:h,onConnection:v,reactive:p,fetchSize:g,impersonatedUser:y,highRecordWatermark:b,lowRecordWatermark:m,notificationFilter:_,apiTelemetryConfig:x})||this;return w[n]="TransactionPromise",w._onDbCallback=C,w}return i(l,u),l.prototype.then=function(c,f){return this._getOrCreateBeginPromise().then(c,f)},l.prototype.catch=function(c){return this._getOrCreateBeginPromise().catch(c)},l.prototype.finally=function(c){return this._getOrCreateBeginPromise().finally(c)},l.prototype._getOrCreateBeginPromise=function(){var c=this;return this._beginPromise==null&&(this._beginPromise=new Promise(function(f,d){c._resolve=f,c._reject=d,c._beginError!=null&&d(c._beginError),c._beginMetadata!=null&&f(c._toTransaction())})),this._beginPromise},l.prototype._toTransaction=function(){return a(a({},this),{run:u.prototype.run.bind(this),commit:u.prototype.commit.bind(this),rollback:u.prototype.rollback.bind(this),close:u.prototype.close.bind(this),isOpen:u.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},l.prototype._begin=function(c,f){return u.prototype._begin.call(this,c,f,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this),onDB:this._onDbCallback})},l.prototype._onBeginError=function(c){this._beginError=c,this._reject!=null&&this._reject(c)},l.prototype._onBeginMetadata=function(c){this._beginMetadata=c??{},this._resolve!=null&&this._resolve(this._toTransaction())},l}(o(t(9473)).default);n=Symbol.toStringTag,e.default=s},4596:function(r,e,t){var n=this&&this.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(y[m]=b[m])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function y(){this.constructor=p}v(p,g),p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(2539)),o=i(t(7021)),s=t(9014),u=t(9305),l=t(397),c=i(t(7521)),f=i(t(3321)),d=u.internal.constants.BOLT_PROTOCOL_V4_1,h=function(v){function p(g,y,b,m,_,x,C){m===void 0&&(m=function(){return null});var w=v.call(this,g,y,b,m,_,x)||this;return w._serversideRouting=C,w}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(y){return y(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(g){var y=this,b=g===void 0?{}:g,m=b.userAgent,_=(b.boltAgent,b.authToken),x=b.notificationFilter,C=b.onError,w=b.onComplete,O=new s.LoginObserver({onError:function(A){return y._onLoginError(A,C)},onCompleted:function(A){return y._onLoginCompleted(A,_,w)}});return(0,l.assertNotificationFilterIsEmpty)(x,this._onProtocolError,O),this.write(o.default.hello(m,_,this._serversideRouting),O,!0),O},p}(a.default);e.default=h},4662:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;var n=t(5),i=t(8014),a=t(3327),o=t(2706),s=t(3413),u=t(1018),l=t(9223),c=function(){function d(h){h&&(this._subscribe=h)}return d.prototype.lift=function(h){var v=new d;return v.source=this,v.operator=h,v},d.prototype.subscribe=function(h,v,p){var g,y=this,b=(g=h)&&g instanceof n.Subscriber||function(m){return m&&u.isFunction(m.next)&&u.isFunction(m.error)&&u.isFunction(m.complete)}(g)&&i.isSubscription(g)?h:new n.SafeSubscriber(h,v,p);return l.errorContext(function(){var m=y,_=m.operator,x=m.source;b.add(_?_.call(b,x):x?y._subscribe(b):y._trySubscribe(b))}),b},d.prototype._trySubscribe=function(h){try{return this._subscribe(h)}catch(v){h.error(v)}},d.prototype.forEach=function(h,v){var p=this;return new(v=f(v))(function(g,y){var b=new n.SafeSubscriber({next:function(m){try{h(m)}catch(_){y(_),b.unsubscribe()}},error:y,complete:g});p.subscribe(b)})},d.prototype._subscribe=function(h){var v;return(v=this.source)===null||v===void 0?void 0:v.subscribe(h)},d.prototype[a.observable]=function(){return this},d.prototype.pipe=function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];return o.pipeFromArray(h)(this)},d.prototype.toPromise=function(h){var v=this;return new(h=f(h))(function(p,g){var y;v.subscribe(function(b){return y=b},function(b){return g(b)},function(){return p(y)})})},d.create=function(h){return new d(h)},d}();function f(d){var h;return(h=d??s.config.Promise)!==null&&h!==void 0?h:Promise}e.Observable=c},4671:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Action=void 0;var i=function(a){function o(s,u){return a.call(this)||this}return n(o,a),o.prototype.schedule=function(s,u){return this},o}(t(8014).Subscription);e.Action=i},4704:r=>{r.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},4721:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=void 0;var n=t(7843),i=t(3111);e.skipWhile=function(a){return n.operate(function(o,s){var u=!1,l=0;o.subscribe(i.createOperatorSubscriber(s,function(c){return(u||(u=!a(c,l++)))&&s.next(c)}))})}},4746:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.performanceTimestampProvider=void 0,e.performanceTimestampProvider={now:function(){return(e.performanceTimestampProvider.delegate||performance).now()},delegate:void 0}},4753:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=void 0;var n=t(5471),i=t(9445),a=t(7843),o=t(3111);e.exhaustMap=function s(u,l){return l?function(c){return c.pipe(s(function(f,d){return i.innerFrom(u(f,d)).pipe(n.map(function(h,v){return l(f,h,d,v)}))}))}:a.operate(function(c,f){var d=0,h=null,v=!1;c.subscribe(o.createOperatorSubscriber(f,function(p){h||(h=o.createOperatorSubscriber(f,void 0,function(){h=null,v&&f.complete()}),i.innerFrom(u(p,d++)).subscribe(h))},function(){v=!0,!h&&f.complete()}))})}},4780:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=void 0;var n=t(7843),i=t(3111),a=t(9445),o=t(1342);e.takeUntil=function(s){return n.operate(function(u,l){a.innerFrom(s).subscribe(i.createOperatorSubscriber(l,function(){return l.complete()},o.noop)),!l.closed&&u.subscribe(l)})}},4820:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,d,h,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(y){return function(b){if(c)throw new TypeError("Generator is already executing.");for(;h&&(h=0,b[0]&&(v=0)),v;)try{if(c=1,f&&(d=2&b[0]?f.return:b[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,b[1])).done)return d;switch(f=0,d&&(b=[2&b[0],d.value]),b[0]){case 0:case 1:d=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((d=(d=v.trys).length>0&&d[d.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){v.label=b[1];break}if(b[0]===6&&v.label<d[1]){v.label=d[1],d=b;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(b);break}d[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(m){b=[6,m],f=0}finally{c=d=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([g,y])}}},i=this&&this.__values||function(u){var l=typeof Symbol=="function"&&Symbol.iterator,c=l&&u[l],f=0;if(c)return c.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,d,h=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=h.next()).done;)v.push(f.value)}catch(p){d={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(d)throw d.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var o=t(9691),s=function(){function u(l,c,f){this.keys=l,this.length=l.length,this._fields=c,this._fieldLookup=f??function(d){var h={};return d.forEach(function(v,p){h[v]=p}),h}(l)}return u.prototype.forEach=function(l){var c,f;try{for(var d=i(this.entries()),h=d.next();!h.done;h=d.next()){var v=a(h.value,2),p=v[0];l(v[1],p,this)}}catch(g){c={error:g}}finally{try{h&&!h.done&&(f=d.return)&&f.call(d)}finally{if(c)throw c.error}}},u.prototype.map=function(l){var c,f,d=[];try{for(var h=i(this.entries()),v=h.next();!v.done;v=h.next()){var p=a(v.value,2),g=p[0],y=p[1];d.push(l(y,g,this))}}catch(b){c={error:b}}finally{try{v&&!v.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}return d},u.prototype.entries=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,[this.keys[l],this._fields[l]]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.values=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype[Symbol.iterator]=function(){var l;return n(this,function(c){switch(c.label){case 0:l=0,c.label=1;case 1:return l<this.keys.length?[4,this._fields[l]]:[3,4];case 2:c.sent(),c.label=3;case 3:return l++,[3,1];case 4:return[2]}})},u.prototype.toObject=function(){var l,c,f={};try{for(var d=i(this.entries()),h=d.next();!h.done;h=d.next()){var v=a(h.value,2),p=v[0],g=v[1];f[p]=g}}catch(y){l={error:y}}finally{try{h&&!h.done&&(c=d.return)&&c.call(d)}finally{if(l)throw l.error}}return f},u.prototype.get=function(l){var c;if(typeof l!="number"){if((c=this._fieldLookup[l])===void 0)throw(0,o.newError)("This record has no field with key '".concat(l.toString(),"', available keys are: [")+this.keys.toString()+"].")}else c=l;if(c>this._fields.length-1||c<0)throw(0,o.newError)("This record has no field with index '"+c.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[c]},u.prototype.has=function(l){return typeof l=="number"?l>=0&&l<this._fields.length:this._fieldLookup[l]!==void 0},u}();e.default=s},4862:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=void 0;var n=t(7961),i=t(1074),a=t(1554);e.timeoutWith=function(o,s,u){var l,c,f;if(u=u??n.async,i.isValidDate(o)?l=o:typeof o=="number"&&(c=o),!s)throw new TypeError("No observable provided to switch to");if(f=function(){return s},l==null&&c==null)throw new TypeError("No timeout provided.");return a.timeout({first:l,each:c,scheduler:u,with:f})}},4869:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=void 0;var n=t(2823),i=t(7843),a=t(3111);function o(){return new n.EmptyError}e.throwIfEmpty=function(s){return s===void 0&&(s=o),i.operate(function(u,l){var c=!1;u.subscribe(a.createOperatorSubscriber(l,function(f){c=!0,l.next(f)},function(){return c?l.complete():l.error(s())}))})}},4883:function(r,e,t){var n,i=this&&this.__extends||function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},p(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=g}p(g,y),g.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var a=t(9691),o="error",s="warn",u="info",l="debug",c=u,f=((n={})[o]=0,n[s]=1,n[u]=2,n[l]=3,n),d=function(){function p(g,y){this._level=g,this._loggerFunction=y}return p.create=function(g){if((g==null?void 0:g.logging)!=null){var y=g.logging,b=function(_){if((_==null?void 0:_.level)!=null){var x=_.level,C=f[x];if(C==null&&C!==0)throw(0,a.newError)("Illegal logging level: ".concat(x,". Supported levels are: ").concat(Object.keys(f).toString()));return x}return c}(y),m=function(_){var x,C;if((_==null?void 0:_.logger)!=null){var w=_.logger;if(w!=null&&typeof w=="function")return w}throw(0,a.newError)("Illegal logger function: ".concat((C=(x=_==null?void 0:_.logger)===null||x===void 0?void 0:x.toString())!==null&&C!==void 0?C:"undefined"))}(y);return new p(b,m)}return this.noOp()},p.noOp=function(){return h},p.prototype.isErrorEnabled=function(){return v(this._level,o)},p.prototype.error=function(g){this.isErrorEnabled()&&this._loggerFunction(o,g)},p.prototype.isWarnEnabled=function(){return v(this._level,s)},p.prototype.warn=function(g){this.isWarnEnabled()&&this._loggerFunction(s,g)},p.prototype.isInfoEnabled=function(){return v(this._level,u)},p.prototype.info=function(g){this.isInfoEnabled()&&this._loggerFunction(u,g)},p.prototype.isDebugEnabled=function(){return v(this._level,l)},p.prototype.debug=function(g){this.isDebugEnabled()&&this._loggerFunction(l,g)},p}();e.Logger=d;var h=new(function(p){function g(){return p.call(this,u,function(y,b){})||this}return i(g,p),g.prototype.isErrorEnabled=function(){return!1},g.prototype.error=function(y){},g.prototype.isWarnEnabled=function(){return!1},g.prototype.warn=function(y){},g.prototype.isInfoEnabled=function(){return!1},g.prototype.info=function(y){},g.prototype.isDebugEnabled=function(){return!1},g.prototype.debug=function(y){},g}(d));function v(p,g){return f[p]>=f[g]}},4912:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=void 0;var n=t(5471);e.pluck=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=i.length;if(o===0)throw new Error("list of properties cannot be empty.");return n.map(function(s){for(var u=s,l=0;l<o;l++){var c=u==null?void 0:u[i[l]];if(c===void 0)return;u=c}return u})}},4917:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.from=void 0;var n=t(1656),i=t(9445);e.from=function(a,o){return o?n.scheduled(a,o):i.innerFrom(a)}},4953:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleReadableStreamLike=void 0;var n=t(854),i=t(9137);e.scheduleReadableStreamLike=function(a,o){return n.scheduleAsyncIterable(i.readableStreamLikeToAsyncGenerator(a),o)}},5006:function(r,e,t){var n=this&&this.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AsapAction=void 0;var i=t(5267),a=t(6293),o=function(s){function u(l,c){var f=s.call(this,l,c)||this;return f.scheduler=l,f.work=c,f}return n(u,s),u.prototype.requestAsyncId=function(l,c,f){return f===void 0&&(f=0),f!==null&&f>0?s.prototype.requestAsyncId.call(this,l,c,f):(l.actions.push(this),l._scheduled||(l._scheduled=a.immediateProvider.setImmediate(l.flush.bind(l,void 0))))},u.prototype.recycleAsyncId=function(l,c,f){var d;if(f===void 0&&(f=0),f!=null?f>0:this.delay>0)return s.prototype.recycleAsyncId.call(this,l,c,f);var h=l.actions;c!=null&&((d=h[h.length-1])===null||d===void 0?void 0:d.id)!==c&&(a.immediateProvider.clearImmediate(c),l._scheduled===c&&(l._scheduled=void 0))},u}(i.AsyncAction);e.AsapAction=o},5022:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(m,_,x,C){C===void 0&&(C=x);var w=Object.getOwnPropertyDescriptor(_,x);w&&!("get"in w?!_.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return _[x]}}),Object.defineProperty(m,C,w)}:function(m,_,x,C){C===void 0&&(C=x),m[C]=_[x]}),i=this&&this.__setModuleDefault||(Object.create?function(m,_){Object.defineProperty(m,"default",{enumerable:!0,value:_})}:function(m,_){m.default=_}),a=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var _={};if(m!=null)for(var x in m)x!=="default"&&Object.prototype.hasOwnProperty.call(m,x)&&n(_,m,x);return i(_,m),_};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var o=a(t(3371)),s=t(9691),u=t(6587),l=function(){function m(_,x){this._minNumber=_,this._maxNumber=x,this._minInteger=(0,o.int)(_),this._maxInteger=(0,o.int)(x)}return m.prototype.contains=function(_){if((0,o.isInt)(_)&&_ instanceof o.default)return _.greaterThanOrEqual(this._minInteger)&&_.lessThanOrEqual(this._maxInteger);if(typeof _=="bigint"){var x=(0,o.int)(_);return x.greaterThanOrEqual(this._minInteger)&&x.lessThanOrEqual(this._maxInteger)}return _>=this._minNumber&&_<=this._maxNumber},m.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},m}();function c(m,_,x){m=(0,o.int)(m),_=(0,o.int)(_),x=(0,o.int)(x);var C=m.multiply(365);return C=(C=(C=m.greaterThanOrEqual(0)?C.add(m.add(3).div(4).subtract(m.add(99).div(100)).add(m.add(399).div(400))):C.subtract(m.div(-4).subtract(m.div(-100)).add(m.div(-400)))).add(_.multiply(367).subtract(362).div(12))).add(x.subtract(1)),_.greaterThan(2)&&(C=C.subtract(1),function(w){return!(!(w=(0,o.int)(w)).modulo(4).equals(0)||w.modulo(100).equals(0)&&!w.modulo(400).equals(0))}(m)||(C=C.subtract(1))),C.subtract(e.DAYS_0000_TO_1970)}function f(m,_){return m===1?_%400==0||_%4==0&&_%100!=0?29:28:[0,2,4,6,7,9,11].includes(m)?31:30}e.YEAR_RANGE=new l(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new l(1,12),e.DAY_OF_MONTH_RANGE=new l(1,31),e.HOUR_OF_DAY_RANGE=new l(0,23),e.MINUTE_OF_HOUR_RANGE=new l(0,59),e.SECOND_OF_MINUTE_RANGE=new l(0,59),e.NANOSECOND_OF_SECOND_RANGE=new l(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(m,_){return(0,o.int)(m).add(p(_,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(m){return g(m,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(m,_,x,C){m=(0,o.int)(m),_=(0,o.int)(_),x=(0,o.int)(x),C=(0,o.int)(C);var w=m.multiply(e.NANOS_PER_HOUR);return(w=(w=w.add(_.multiply(e.NANOS_PER_MINUTE))).add(x.multiply(e.NANOS_PER_SECOND))).add(C)},e.localDateTimeToEpochSecond=function(m,_,x,C,w,O,A){var k=c(m,_,x),R=function(I,M,N){I=(0,o.int)(I),M=(0,o.int)(M),N=(0,o.int)(N);var F=I.multiply(e.SECONDS_PER_HOUR);return(F=F.add(M.multiply(e.SECONDS_PER_MINUTE))).add(N)}(C,w,O);return k.multiply(e.SECONDS_PER_DAY).add(R)},e.dateToEpochDay=c,e.durationToIsoString=function(m,_,x,C){var w=b(m),O=b(_),A=function(k,R){var I,M;k=(0,o.int)(k),R=(0,o.int)(R);var N=k.isNegative(),F=R.greaterThan(0);return I=N&&F?k.equals(-1)?"-0":k.add(1).toString():k.toString(),F&&(M=y(N?R.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):R.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND))),M!=null?I+M:I}(x,C);return"P".concat(w,"M").concat(O,"DT").concat(A,"S")},e.timeToIsoString=function(m,_,x,C){var w=b(m,2),O=b(_,2),A=b(x,2),k=y(C);return"".concat(w,":").concat(O,":").concat(A).concat(k)},e.timeZoneOffsetToIsoString=function(m){if((m=(0,o.int)(m)).equals(0))return"Z";var _=m.isNegative();_&&(m=m.multiply(-1));var x=_?"-":"+",C=b(m.div(e.SECONDS_PER_HOUR),2),w=b(m.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),O=m.modulo(e.SECONDS_PER_MINUTE),A=O.equals(0)?null:b(O,2);return A!=null?"".concat(x).concat(C,":").concat(w,":").concat(A):"".concat(x).concat(C,":").concat(w)},e.dateToIsoString=function(m,_,x){var C=function(A){var k=(0,o.int)(A);return k.isNegative()||k.greaterThan(9999)?b(k,6,{usePositiveSign:!0}):b(k,4)}(m),w=b(_,2),O=b(x,2);return"".concat(C,"-").concat(w,"-").concat(O)},e.isoStringToStandardDate=function(m){return new Date(m)},e.toStandardDate=function(m){return new Date(m)},e.newDate=function(m){return new Date(m)},e.totalNanoseconds=function(m,_){return function(x,C){return x instanceof o.default?x.add(C):typeof x=="bigint"?x+BigInt(C):x+C}(_=_??0,m.getMilliseconds()*e.NANOS_PER_MILLISECOND)},e.timeZoneOffsetInSeconds=function(m){var _=m.getSeconds()-m.getUTCSeconds(),x=m.getMinutes()-m.getUTCMinutes(),C=m.getHours()-m.getUTCHours(),w=function(O){return O.getMonth()===O.getUTCMonth()?O.getDate()-O.getUTCDate():O.getFullYear()>O.getUTCFullYear()||O.getMonth()>O.getUTCMonth()&&O.getFullYear()===O.getUTCFullYear()?O.getDate()+f(O.getUTCMonth(),O.getUTCFullYear())-O.getUTCDate():O.getDate()-(O.getUTCDate()+f(O.getMonth(),O.getFullYear()))}(m);return C*e.SECONDS_PER_HOUR+x*e.SECONDS_PER_MINUTE+_+w*e.SECONDS_PER_DAY},e.assertValidYear=function(m){return v(m,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(m){return v(m,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(m){return v(m,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(m){return v(m,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(m){return v(m,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(m){return v(m,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(m){return v(m,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var d=new Map,h=function(m,_){return(0,s.newError)("".concat(_,' is expected to be a valid ZoneId but was: "').concat(m,'"'))};function v(m,_,x){if((0,u.assertNumberOrInteger)(m,x),!_.contains(m))throw(0,s.newError)("".concat(x," is expected to be in range ").concat(_.toString()," but was: ").concat(m.toString()));return m}function p(m,_){m=(0,o.int)(m),_=(0,o.int)(_);var x=m.div(_);return m.isPositive()!==_.isPositive()&&x.multiply(_).notEquals(m)&&(x=x.subtract(1)),x}function g(m,_){return m=(0,o.int)(m),_=(0,o.int)(_),m.subtract(p(m,_).multiply(_))}function y(m){return(m=(0,o.int)(m)).equals(0)?"":"."+b(m,9)}function b(m,_,x){var C=(m=(0,o.int)(m)).isNegative();C&&(m=m.negate());var w=m.toString();if(_!=null)for(;w.length<_;)w="0"+w;return C?"-"+w:(x==null?void 0:x.usePositiveSign)===!0?"+"+w:w}e.assertValidZoneId=function(m,_){var x=d.get(_);if(x!==!0){if(x===!1)throw h(_,m);try{Intl.DateTimeFormat(void 0,{timeZone:_}),d.set(_,!0)}catch{throw d.set(_,!1),h(_,m)}}},e.floorDiv=p,e.floorMod=g},5045:function(r,e,t){var n=this&&this.__read||function(v,p){var g=typeof Symbol=="function"&&v[Symbol.iterator];if(!g)return v;var y,b,m=g.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=m.next()).done;)_.push(y.value)}catch(x){b={error:x}}finally{try{y&&!y.done&&(g=m.return)&&g.call(m)}finally{if(b)throw b.error}}return _},i=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(7168),o=t(9305),s=i(t(7518)),u=t(5973),l=t(6492),c=o.internal.temporalUtil.localDateTimeToEpochSecond,f=new Map;function d(v,p,g){var y=function(x){if(!f.has(x)){var C=new Intl.DateTimeFormat("en-US",{timeZone:x,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});f.set(x,C)}return f.get(x)}(v),b=(0,o.int)(p).multiply(1e3).add((0,o.int)(g).div(1e6)).toNumber(),m=y.formatToParts(b).reduce(function(x,C){return C.type==="era"?x.adjustEra=C.value.toUpperCase()==="B"?function(w){return w.subtract(1).negate()}:l.identity:C.type==="hour"?x.hour=(0,o.int)(C.value).modulo(24):C.type!=="literal"&&(x[C.type]=(0,o.int)(C.value)),x},{});m.year=m.adjustEra(m.year);var _=c(m.year,m.month,m.day,m.hour,m.minute,m.second,m.nanosecond);return m.timeZoneOffsetSeconds=_.subtract(p),m.hour=m.hour.modulo(24),m}function h(v,p,g){if(!p&&!g)return v;var y=function(x){return g?x.toBigInt():x.toNumberOrInfinity()},b=Object.create(Object.getPrototypeOf(v));for(var m in v)if(Object.prototype.hasOwnProperty.call(v,m)===!0){var _=v[m];b[m]=(0,o.isInt)(_)?y(_):_}return Object.freeze(b),b}e.default={createDateTimeWithZoneIdTransformer:function(v,p){var g=v.disableLosslessIntegers,y=v.useBigInt;return s.default.createDateTimeWithZoneIdTransformer(v).extendsWith({signature:105,fromStructure:function(b){a.structure.verifyStructSize("DateTimeWithZoneId",3,b.size);var m=n(b.fields,3),_=m[0],x=m[1],C=m[2],w=d(C,_,x);return h(new o.DateTime(w.year,w.month,w.day,w.hour,w.minute,w.second,(0,o.int)(x),w.timeZoneOffsetSeconds,C),g,y)},toStructure:function(b){var m=c(b.year,b.month,b.day,b.hour,b.minute,b.second,b.nanosecond),_=b.timeZoneOffsetSeconds!=null?b.timeZoneOffsetSeconds:function(O,A,k){var R=d(O,A,k),I=c(R.year,R.month,R.day,R.hour,R.minute,R.second,k).subtract(A),M=A.subtract(I),N=d(O,M,k);return c(N.year,N.month,N.day,N.hour,N.minute,N.second,k).subtract(M)}(b.timeZoneId,m,b.nanosecond);b.timeZoneOffsetSeconds==null&&p.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var x=m.subtract(_),C=(0,o.int)(b.nanosecond),w=b.timeZoneId;return new a.structure.Structure(105,[x,C,w])}})},createDateTimeWithOffsetTransformer:function(v){var p=v.disableLosslessIntegers,g=v.useBigInt;return s.default.createDateTimeWithOffsetTransformer(v).extendsWith({signature:73,toStructure:function(y){var b=c(y.year,y.month,y.day,y.hour,y.minute,y.second,y.nanosecond),m=(0,o.int)(y.nanosecond),_=(0,o.int)(y.timeZoneOffsetSeconds),x=b.subtract(_);return new a.structure.Structure(73,[x,m,_])},fromStructure:function(y){a.structure.verifyStructSize("DateTimeWithZoneOffset",3,y.size);var b=n(y.fields,3),m=b[0],_=b[1],x=b[2],C=(0,o.int)(m).add(x),w=(0,u.epochSecondAndNanoToLocalDateTime)(C,_);return h(new o.DateTime(w.year,w.month,w.day,w.hour,w.minute,w.second,w.nanosecond,x,null),p,g)}})}}},5184:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=void 0;var n=t(7110),i=t(7843),a=t(3111);e.observeOn=function(o,s){return s===void 0&&(s=0),i.operate(function(u,l){u.subscribe(a.createOperatorSubscriber(l,function(c){return n.executeSchedule(l,o,function(){return l.next(c)},s)},function(){return n.executeSchedule(l,o,function(){return l.complete()},s)},function(c){return n.executeSchedule(l,o,function(){return l.error(c)},s)}))})}},5250:function(r,e,t){var n;r=t.nmd(r),(function(){var i,a="Expected a function",o="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,f=9007199254740991,d=NaN,h=4294967295,v=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],p="[object Arguments]",g="[object Array]",y="[object Boolean]",b="[object Date]",m="[object Error]",_="[object Function]",x="[object GeneratorFunction]",C="[object Map]",w="[object Number]",O="[object Object]",A="[object Promise]",k="[object RegExp]",R="[object Set]",I="[object String]",M="[object Symbol]",N="[object WeakMap]",F="[object ArrayBuffer]",z="[object DataView]",B="[object Float32Array]",U="[object Float64Array]",W="[object Int8Array]",Y="[object Int16Array]",H="[object Int32Array]",J="[object Uint8Array]",le="[object Uint8ClampedArray]",fe="[object Uint16Array]",ue="[object Uint32Array]",ge=/\b__p \+= '';/g,ve=/\b(__p \+=) '' \+/g,de=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ie=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,re=RegExp(ie.source),se=RegExp(Q.source),pe=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,Ce=/<%=([\s\S]+?)%>/g,Re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,be=/^\w*$/,j=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,G=/[\\^$.*+?()[\]{}|]/g,$=RegExp(G.source),te=/^\s+/,ce=/\s/,he=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,We=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ot=/[()=,{}\[\]\/\s]/,Ze=/\\(\\)?/g,et=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qe=/\w*$/,Ye=/^[-+]0x[0-9a-f]+$/i,Ie=/^0b[01]+$/i,ee=/^\[object .+?Constructor\]$/,we=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,De=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Me=/($^)/,it=/['\n\r\u2028\u2029\\]/g,Fe="\\ud800-\\udfff",ut="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",rt="\\u2700-\\u27bf",ft="a-z\\xdf-\\xf6\\xf8-\\xff",Ot="A-Z\\xc0-\\xd6\\xd8-\\xde",yt="\\ufe0e\\ufe0f",nt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="["+Fe+"]",St="["+nt+"]",lr="["+ut+"]",ar="\\d+",Gt="["+rt+"]",At="["+ft+"]",hr="[^"+Fe+nt+ar+rt+ft+Ot+"]",or="\\ud83c[\\udffb-\\udfff]",Fr="[^"+Fe+"]",nn="(?:\\ud83c[\\udde6-\\uddff]){2}",Dt="[\\ud800-\\udbff][\\udc00-\\udfff]",yr="["+Ot+"]",Wr="\\u200d",Qr="(?:"+At+"|"+hr+")",Cn="(?:"+yr+"|"+hr+")",bn="(?:['’](?:d|ll|m|re|s|t|ve))?",Or="(?:['’](?:D|LL|M|RE|S|T|VE))?",Rr="(?:"+lr+"|"+or+")?",xr="["+yt+"]?",Ii=xr+Rr+"(?:"+Wr+"(?:"+[Fr,nn,Dt].join("|")+")"+xr+Rr+")*",qn="(?:"+[Gt,nn,Dt].join("|")+")"+Ii,Qo="(?:"+[Fr+lr+"?",lr,nn,Dt,kt].join("|")+")",Vs=RegExp("['’]","g"),Xa=RegExp(lr,"g"),So=RegExp(or+"(?="+or+")|"+Qo+Ii,"g"),Ka=RegExp([yr+"?"+At+"+"+bn+"(?="+[St,yr,"$"].join("|")+")",Cn+"+"+Or+"(?="+[St,yr+Qr,"$"].join("|")+")",yr+"?"+Qr+"+"+bn,yr+"+"+Or,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ar,qn].join("|"),"g"),$s=RegExp("["+Wr+Fe+ut+yt+"]"),Ws=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Hs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ua=-1,mr={};mr[B]=mr[U]=mr[W]=mr[Y]=mr[H]=mr[J]=mr[le]=mr[fe]=mr[ue]=!0,mr[p]=mr[g]=mr[F]=mr[y]=mr[z]=mr[b]=mr[m]=mr[_]=mr[C]=mr[w]=mr[O]=mr[k]=mr[R]=mr[I]=mr[N]=!1;var cr={};cr[p]=cr[g]=cr[F]=cr[z]=cr[y]=cr[b]=cr[B]=cr[U]=cr[W]=cr[Y]=cr[H]=cr[C]=cr[w]=cr[O]=cr[k]=cr[R]=cr[I]=cr[M]=cr[J]=cr[le]=cr[fe]=cr[ue]=!0,cr[m]=cr[_]=cr[N]=!1;var Jo={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},es=parseFloat,uc=parseInt,ri=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,ts=typeof self=="object"&&self&&self.Object===Object&&self,an=ri||ts||Function("return this")(),Pa=e&&!e.nodeType&&e,_n=Pa&&r&&!r.nodeType&&r,Nu=_n&&_n.exports===Pa,Ys=Nu&&ri.process,Mn=function(){try{return _n&&_n.require&&_n.require("util").types||Ys&&Ys.binding&&Ys.binding("util")}catch{}}(),lc=Mn&&Mn.isArrayBuffer,$f=Mn&&Mn.isDate,cc=Mn&&Mn.isMap,fc=Mn&&Mn.isRegExp,ju=Mn&&Mn.isSet,Wf=Mn&&Mn.isTypedArray;function ni(ke,Ve,Be){switch(Be.length){case 0:return ke.call(Ve);case 1:return ke.call(Ve,Be[0]);case 2:return ke.call(Ve,Be[0],Be[1]);case 3:return ke.call(Ve,Be[0],Be[1],Be[2])}return ke.apply(Ve,Be)}function dc(ke,Ve,Be,lt){for(var _t=-1,br=ke==null?0:ke.length;++_t<br;){var Tn=ke[_t];Ve(lt,Tn,Be(Tn),ke)}return lt}function ii(ke,Ve){for(var Be=-1,lt=ke==null?0:ke.length;++Be<lt&&Ve(ke[Be],Be,ke)!==!1;);return ke}function rs(ke,Ve){for(var Be=ke==null?0:ke.length;Be--&&Ve(ke[Be],Be,ke)!==!1;);return ke}function hc(ke,Ve){for(var Be=-1,lt=ke==null?0:ke.length;++Be<lt;)if(!Ve(ke[Be],Be,ke))return!1;return!0}function Ra(ke,Ve){for(var Be=-1,lt=ke==null?0:ke.length,_t=0,br=[];++Be<lt;){var Tn=ke[Be];Ve(Tn,Be,ke)&&(br[_t++]=Tn)}return br}function Fu(ke,Ve){return!(ke==null||!ke.length)&&ns(ke,Ve,0)>-1}function Bu(ke,Ve,Be){for(var lt=-1,_t=ke==null?0:ke.length;++lt<_t;)if(Be(Ve,ke[lt]))return!0;return!1}function $r(ke,Ve){for(var Be=-1,lt=ke==null?0:ke.length,_t=Array(lt);++Be<lt;)_t[Be]=Ve(ke[Be],Be,ke);return _t}function ka(ke,Ve){for(var Be=-1,lt=Ve.length,_t=ke.length;++Be<lt;)ke[_t+Be]=Ve[Be];return ke}function Uu(ke,Ve,Be,lt){var _t=-1,br=ke==null?0:ke.length;for(lt&&br&&(Be=ke[++_t]);++_t<br;)Be=Ve(Be,ke[_t],_t,ke);return Be}function tv(ke,Ve,Be,lt){var _t=ke==null?0:ke.length;for(lt&&_t&&(Be=ke[--_t]);_t--;)Be=Ve(Be,ke[_t],_t,ke);return Be}function vc(ke,Ve){for(var Be=-1,lt=ke==null?0:ke.length;++Be<lt;)if(Ve(ke[Be],Be,ke))return!0;return!1}var rv=gc("length");function pc(ke,Ve,Be){var lt;return Be(ke,function(_t,br,Tn){if(Ve(_t,br,Tn))return lt=br,!1}),lt}function zu(ke,Ve,Be,lt){for(var _t=ke.length,br=Be+(lt?1:-1);lt?br--:++br<_t;)if(Ve(ke[br],br,ke))return br;return-1}function ns(ke,Ve,Be){return Ve==Ve?function(lt,_t,br){for(var Tn=br-1,Yn=lt.length;++Tn<Yn;)if(lt[Tn]===_t)return Tn;return-1}(ke,Ve,Be):zu(ke,Hf,Be)}function nv(ke,Ve,Be,lt){for(var _t=Be-1,br=ke.length;++_t<br;)if(lt(ke[_t],Ve))return _t;return-1}function Hf(ke){return ke!=ke}function qu(ke,Ve){var Be=ke==null?0:ke.length;return Be?mc(ke,Ve)/Be:d}function gc(ke){return function(Ve){return Ve==null?i:Ve[ke]}}function yc(ke){return function(Ve){return ke==null?i:ke[Ve]}}function Yf(ke,Ve,Be,lt,_t){return _t(ke,function(br,Tn,Yn){Be=lt?(lt=!1,br):Ve(Be,br,Tn,Yn)}),Be}function mc(ke,Ve){for(var Be,lt=-1,_t=ke.length;++lt<_t;){var br=Ve(ke[lt]);br!==i&&(Be=Be===i?br:Be+br)}return Be}function bc(ke,Ve){for(var Be=-1,lt=Array(ke);++Be<ke;)lt[Be]=Ve(Be);return lt}function Br(ke){return ke&&ke.slice(0,Za(ke)+1).replace(te,"")}function Zt(ke){return function(Ve){return ke(Ve)}}function _c(ke,Ve){return $r(Ve,function(Be){return ke[Be]})}function Xs(ke,Ve){return ke.has(Ve)}function Xf(ke,Ve){for(var Be=-1,lt=ke.length;++Be<lt&&ns(Ve,ke[Be],0)>-1;);return Be}function Kf(ke,Ve){for(var Be=ke.length;Be--&&ns(Ve,ke[Be],0)>-1;);return Be}var iv=yc({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),av=yc({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Zf(ke){return"\\"+Jo[ke]}function is(ke){return $s.test(ke)}function wn(ke){var Ve=-1,Be=Array(ke.size);return ke.forEach(function(lt,_t){Be[++Ve]=[_t,lt]}),Be}function Gu(ke,Ve){return function(Be){return ke(Ve(Be))}}function ai(ke,Ve){for(var Be=-1,lt=ke.length,_t=0,br=[];++Be<lt;){var Tn=ke[Be];Tn!==Ve&&Tn!==s||(ke[Be]=s,br[_t++]=Be)}return br}function Ks(ke){var Ve=-1,Be=Array(ke.size);return ke.forEach(function(lt){Be[++Ve]=lt}),Be}function wc(ke){var Ve=-1,Be=Array(ke.size);return ke.forEach(function(lt){Be[++Ve]=[lt,lt]}),Be}function Ln(ke){return is(ke)?function(Ve){for(var Be=So.lastIndex=0;So.test(Ve);)++Be;return Be}(ke):rv(ke)}function Nn(ke){return is(ke)?function(Ve){return Ve.match(So)||[]}(ke):function(Ve){return Ve.split("")}(ke)}function Za(ke){for(var Ve=ke.length;Ve--&&ce.test(ke.charAt(Ve)););return Ve}var la=yc({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Vi=function ke(Ve){var Be,lt=(Ve=Ve==null?an:Vi.defaults(an.Object(),Ve,Vi.pick(an,Hs))).Array,_t=Ve.Date,br=Ve.Error,Tn=Ve.Function,Yn=Ve.Math,Ur=Ve.Object,xc=Ve.RegExp,Jr=Ve.String,jn=Ve.TypeError,Vu=lt.prototype,S_=Tn.prototype,as=Ur.prototype,Qf=Ve["__core-js_shared__"],Jf=S_.toString,Nr=as.hasOwnProperty,uy=0,Ec=(Be=/[^.]+$/.exec(Qf&&Qf.keys&&Qf.keys.IE_PROTO||""))?"Symbol(src)_1."+Be:"",Co=as.toString,C_=Jf.call(Ur),ly=an._,cy=xc("^"+Jf.call(Nr).replace(G,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$u=Nu?Ve.Buffer:i,Qa=Ve.Symbol,Oc=Ve.Uint8Array,fy=$u?$u.allocUnsafe:i,Wu=Gu(Ur.getPrototypeOf,Ur),ed=Ur.create,dy=as.propertyIsEnumerable,Sc=Vu.splice,Di=Qa?Qa.isConcatSpreadable:i,Zs=Qa?Qa.iterator:i,Ia=Qa?Qa.toStringTag:i,Cc=function(){try{var S=Po(Ur,"defineProperty");return S({},"",{}),S}catch{}}(),hy=Ve.clearTimeout!==an.clearTimeout&&Ve.clearTimeout,T_=_t&&_t.now!==an.Date.now&&_t.now,A_=Ve.setTimeout!==an.setTimeout&&Ve.setTimeout,td=Yn.ceil,rd=Yn.floor,ov=Ur.getOwnPropertySymbols,Hu=$u?$u.isBuffer:i,vy=Ve.isFinite,P_=Vu.join,sv=Gu(Ur.keys,Ur),An=Yn.max,on=Yn.min,nd=_t.now,R_=Ve.parseInt,py=Yn.random,k_=Vu.reverse,os=Po(Ve,"DataView"),yi=Po(Ve,"Map"),id=Po(Ve,"Promise"),Yu=Po(Ve,"Set"),Tc=Po(Ve,"WeakMap"),Ac=Po(Ur,"create"),ad=Tc&&new Tc,Xu={},Ku=ko(os),Se=ko(yi),je=ko(id),Le=ko(Yu),ht=ko(Tc),zt=Qa?Qa.prototype:i,vr=zt?zt.valueOf:i,Pn=zt?zt.toString:i;function Z(S){if(ln(S)&&!Vt(S)&&!(S instanceof Jt)){if(S instanceof sn)return S;if(Nr.call(S,"__wrapped__"))return Av(S)}return new sn(S)}var ss=function(){function S(){}return function(P){if(!en(P))return{};if(ed)return ed(P);S.prototype=P;var L=new S;return S.prototype=i,L}}();function od(){}function sn(S,P){this.__wrapped__=S,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=i}function Jt(S){this.__wrapped__=S,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=h,this.__views__=[]}function Qs(S){var P=-1,L=S==null?0:S.length;for(this.clear();++P<L;){var V=S[P];this.set(V[0],V[1])}}function Mi(S){var P=-1,L=S==null?0:S.length;for(this.clear();++P<L;){var V=S[P];this.set(V[0],V[1])}}function ca(S){var P=-1,L=S==null?0:S.length;for(this.clear();++P<L;){var V=S[P];this.set(V[0],V[1])}}function Ja(S){var P=-1,L=S==null?0:S.length;for(this.__data__=new ca;++P<L;)this.add(S[P])}function er(S){var P=this.__data__=new Mi(S);this.size=P.size}function gy(S,P){var L=Vt(S),V=!L&&uo(S),K=!L&&!V&&ja(S),oe=!L&&!V&&!K&&bs(S),me=L||V||K||oe,Ee=me?bc(S.length,Jr):[],Ae=Ee.length;for(var ze in S)!P&&!Nr.call(S,ze)||me&&(ze=="length"||K&&(ze=="offset"||ze=="parent")||oe&&(ze=="buffer"||ze=="byteLength"||ze=="byteOffset")||Ro(ze,Ae))||Ee.push(ze);return Ee}function uv(S){var P=S.length;return P?S[ds(0,P-1)]:i}function sd(S,P){return Gc(mi(S),ls(P,0,S.length))}function I_(S){return Gc(mi(S))}function lv(S,P,L){(L!==i&&!va(S[P],L)||L===i&&!(P in S))&&eo(S,P,L)}function Pc(S,P,L){var V=S[P];Nr.call(S,P)&&va(V,L)&&(L!==i||P in S)||eo(S,P,L)}function Js(S,P){for(var L=S.length;L--;)if(va(S[L][0],P))return L;return-1}function us(S,P,L,V){return Li(S,function(K,oe,me){P(V,K,L(K),me)}),V}function Rc(S,P){return S&&no(P,$n(P),S)}function eo(S,P,L){P=="__proto__"&&Cc?Cc(S,P,{configurable:!0,enumerable:!0,value:L,writable:!0}):S[P]=L}function Zu(S,P){for(var L=-1,V=P.length,K=lt(V),oe=S==null;++L<V;)K[L]=oe?i:zv(S,P[L]);return K}function ls(S,P,L){return S==S&&(L!==i&&(S=S<=L?S:L),P!==i&&(S=S>=P?S:P)),S}function $i(S,P,L,V,K,oe){var me,Ee=1&P,Ae=2&P,ze=4&P;if(L&&(me=K?L(S,V,K,oe):L(S)),me!==i)return me;if(!en(S))return S;var qe=Vt(S);if(qe){if(me=function($e){var Je=$e.length,Ct=new $e.constructor(Je);return Je&&typeof $e[0]=="string"&&Nr.call($e,"index")&&(Ct.index=$e.index,Ct.input=$e.input),Ct}(S),!Ee)return mi(S,me)}else{var Xe=Xn(S),dt=Xe==_||Xe==x;if(ja(S))return Ay(S,Ee);if(Xe==O||Xe==p||dt&&!K){if(me=Ae||dt?{}:Ny(S),!Ee)return Ae?function($e,Je){return no($e,ul($e),Je)}(S,function($e,Je){return $e&&no(Je,si(Je),$e)}(me,S)):function($e,Je){return no($e,Ev($e),Je)}(S,Rc(me,S))}else{if(!cr[Xe])return K?S:{};me=function($e,Je,Ct){var st,$t=$e.constructor;switch(Je){case F:return mv($e);case y:case b:return new $t(+$e);case z:return function(qt,Sr){var wt=Sr?mv(qt.buffer):qt.buffer;return new qt.constructor(wt,qt.byteOffset,qt.byteLength)}($e,Ct);case B:case U:case W:case Y:case H:case J:case le:case fe:case ue:return Py($e,Ct);case C:return new $t;case w:case I:return new $t($e);case k:return function(qt){var Sr=new qt.constructor(qt.source,Qe.exec(qt));return Sr.lastIndex=qt.lastIndex,Sr}($e);case R:return new $t;case M:return st=$e,vr?Ur(vr.call(st)):{}}}(S,Xe,Ee)}}oe||(oe=new er);var pt=oe.get(S);if(pt)return pt;oe.set(S,me),lo(S)?S.forEach(function($e){me.add($i($e,P,L,$e,S,oe))}):sm(S)&&S.forEach(function($e,Je){me.set(Je,$i($e,P,L,Je,S,oe))});var Rt=qe?i:(ze?Ae?Ao:sl:Ae?si:$n)(S);return ii(Rt||S,function($e,Je){Rt&&($e=S[Je=$e]),Pc(me,Je,$i($e,P,L,Je,S,oe))}),me}function kc(S,P,L){var V=L.length;if(S==null)return!V;for(S=Ur(S);V--;){var K=L[V],oe=P[K],me=S[K];if(me===i&&!(K in S)||!oe(me))return!1}return!0}function cv(S,P,L){if(typeof S!="function")throw new jn(a);return ll(function(){S.apply(i,L)},P)}function To(S,P,L,V){var K=-1,oe=Fu,me=!0,Ee=S.length,Ae=[],ze=P.length;if(!Ee)return Ae;L&&(P=$r(P,Zt(L))),V?(oe=Bu,me=!1):P.length>=200&&(oe=Xs,me=!1,P=new Ja(P));e:for(;++K<Ee;){var qe=S[K],Xe=L==null?qe:L(qe);if(qe=V||qe!==0?qe:0,me&&Xe==Xe){for(var dt=ze;dt--;)if(P[dt]===Xe)continue e;Ae.push(qe)}else oe(P,Xe,V)||Ae.push(qe)}return Ae}Z.templateSettings={escape:pe,evaluate:Oe,interpolate:Ce,variable:"",imports:{_:Z}},Z.prototype=od.prototype,Z.prototype.constructor=Z,sn.prototype=ss(od.prototype),sn.prototype.constructor=sn,Jt.prototype=ss(od.prototype),Jt.prototype.constructor=Jt,Qs.prototype.clear=function(){this.__data__=Ac?Ac(null):{},this.size=0},Qs.prototype.delete=function(S){var P=this.has(S)&&delete this.__data__[S];return this.size-=P?1:0,P},Qs.prototype.get=function(S){var P=this.__data__;if(Ac){var L=P[S];return L===o?i:L}return Nr.call(P,S)?P[S]:i},Qs.prototype.has=function(S){var P=this.__data__;return Ac?P[S]!==i:Nr.call(P,S)},Qs.prototype.set=function(S,P){var L=this.__data__;return this.size+=this.has(S)?0:1,L[S]=Ac&&P===i?o:P,this},Mi.prototype.clear=function(){this.__data__=[],this.size=0},Mi.prototype.delete=function(S){var P=this.__data__,L=Js(P,S);return!(L<0||(L==P.length-1?P.pop():Sc.call(P,L,1),--this.size,0))},Mi.prototype.get=function(S){var P=this.__data__,L=Js(P,S);return L<0?i:P[L][1]},Mi.prototype.has=function(S){return Js(this.__data__,S)>-1},Mi.prototype.set=function(S,P){var L=this.__data__,V=Js(L,S);return V<0?(++this.size,L.push([S,P])):L[V][1]=P,this},ca.prototype.clear=function(){this.size=0,this.__data__={hash:new Qs,map:new(yi||Mi),string:new Qs}},ca.prototype.delete=function(S){var P=xd(this,S).delete(S);return this.size-=P?1:0,P},ca.prototype.get=function(S){return xd(this,S).get(S)},ca.prototype.has=function(S){return xd(this,S).has(S)},ca.prototype.set=function(S,P){var L=xd(this,S),V=L.size;return L.set(S,P),this.size+=L.size==V?0:1,this},Ja.prototype.add=Ja.prototype.push=function(S){return this.__data__.set(S,o),this},Ja.prototype.has=function(S){return this.__data__.has(S)},er.prototype.clear=function(){this.__data__=new Mi,this.size=0},er.prototype.delete=function(S){var P=this.__data__,L=P.delete(S);return this.size=P.size,L},er.prototype.get=function(S){return this.__data__.get(S)},er.prototype.has=function(S){return this.__data__.has(S)},er.prototype.set=function(S,P){var L=this.__data__;if(L instanceof Mi){var V=L.__data__;if(!yi||V.length<199)return V.push([S,P]),this.size=++L.size,this;L=this.__data__=new ca(V)}return L.set(S,P),this.size=L.size,this};var Li=al(to),Ic=al(cd,!0);function D_(S,P){var L=!0;return Li(S,function(V,K,oe){return L=!!P(V,K,oe)}),L}function ud(S,P,L){for(var V=-1,K=S.length;++V<K;){var oe=S[V],me=P(oe);if(me!=null&&(Ee===i?me==me&&!_i(me):L(me,Ee)))var Ee=me,Ae=oe}return Ae}function yy(S,P){var L=[];return Li(S,function(V,K,oe){P(V,K,oe)&&L.push(V)}),L}function Rn(S,P,L,V,K){var oe=-1,me=S.length;for(L||(L=Fc),K||(K=[]);++oe<me;){var Ee=S[oe];P>0&&L(Ee)?P>1?Rn(Ee,P-1,L,V,K):ka(K,Ee):V||(K[K.length]=Ee)}return K}var Qu=Lc(),ld=Lc(!0);function to(S,P){return S&&Qu(S,P,$n)}function cd(S,P){return S&&ld(S,P,$n)}function fd(S,P){return Ra(P,function(L){return Do(S[L])})}function eu(S,P){for(var L=0,V=(P=Ni(P,S)).length;S!=null&&L<V;)S=S[so(P[L++])];return L&&L==V?S:i}function kn(S,P,L){var V=P(S);return Vt(S)?V:ka(V,L(S))}function kr(S){return S==null?S===i?"[object Undefined]":"[object Null]":Ia&&Ia in Ur(S)?function(P){var L=Nr.call(P,Ia),V=P[Ia];try{P[Ia]=i;var K=!0}catch{}var oe=Co.call(P);return K&&(L?P[Ia]=V:delete P[Ia]),oe}(S):function(P){return Co.call(P)}(S)}function fv(S,P){return S>P}function M_(S,P){return S!=null&&Nr.call(S,P)}function my(S,P){return S!=null&&P in Ur(S)}function dv(S,P,L){for(var V=L?Bu:Fu,K=S[0].length,oe=S.length,me=oe,Ee=lt(oe),Ae=1/0,ze=[];me--;){var qe=S[me];me&&P&&(qe=$r(qe,Zt(P))),Ae=on(qe.length,Ae),Ee[me]=!L&&(P||K>=120&&qe.length>=120)?new Ja(me&&qe):i}qe=S[0];var Xe=-1,dt=Ee[0];e:for(;++Xe<K&&ze.length<Ae;){var pt=qe[Xe],Rt=P?P(pt):pt;if(pt=L||pt!==0?pt:0,!(dt?Xs(dt,Rt):V(ze,Rt,L))){for(me=oe;--me;){var $e=Ee[me];if(!($e?Xs($e,Rt):V(S[me],Rt,L)))continue e}dt&&dt.push(Rt),ze.push(pt)}}return ze}function tu(S,P,L){var V=(S=Fy(S,P=Ni(P,S)))==null?S:S[so(un(P))];return V==null?i:ni(V,S,L)}function Ju(S){return ln(S)&&kr(S)==p}function ru(S,P,L,V,K){return S===P||(S==null||P==null||!ln(S)&&!ln(P)?S!=S&&P!=P:function(oe,me,Ee,Ae,ze,qe){var Xe=Vt(oe),dt=Vt(me),pt=Xe?g:Xn(oe),Rt=dt?g:Xn(me),$e=(pt=pt==p?O:pt)==O,Je=(Rt=Rt==p?O:Rt)==O,Ct=pt==Rt;if(Ct&&ja(oe)){if(!ja(me))return!1;Xe=!0,$e=!1}if(Ct&&!$e)return qe||(qe=new er),Xe||bs(oe)?Ma(oe,me,Ee,Ae,ze,qe):function(wt,Lt,Fn,xn,xi,Yr,ui){switch(Fn){case z:if(wt.byteLength!=Lt.byteLength||wt.byteOffset!=Lt.byteOffset)return!1;wt=wt.buffer,Lt=Lt.buffer;case F:return!(wt.byteLength!=Lt.byteLength||!Yr(new Oc(wt),new Oc(Lt)));case y:case b:case w:return va(+wt,+Lt);case m:return wt.name==Lt.name&&wt.message==Lt.message;case k:case I:return wt==Lt+"";case C:var fo=wn;case R:var ws=1&xn;if(fo||(fo=Ks),wt.size!=Lt.size&&!ws)return!1;var su=ui.get(wt);if(su)return su==Lt;xn|=2,ui.set(wt,Lt);var Fa=Ma(fo(wt),fo(Lt),xn,xi,Yr,ui);return ui.delete(wt),Fa;case M:if(vr)return vr.call(wt)==vr.call(Lt)}return!1}(oe,me,pt,Ee,Ae,ze,qe);if(!(1&Ee)){var st=$e&&Nr.call(oe,"__wrapped__"),$t=Je&&Nr.call(me,"__wrapped__");if(st||$t){var qt=st?oe.value():oe,Sr=$t?me.value():me;return qe||(qe=new er),ze(qt,Sr,Ee,Ae,qe)}}return!!Ct&&(qe||(qe=new er),function(wt,Lt,Fn,xn,xi,Yr){var ui=1&Fn,fo=sl(wt),ws=fo.length;if(ws!=sl(Lt).length&&!ui)return!1;for(var su=ws;su--;){var Fa=fo[su];if(!(ui?Fa in Lt:Nr.call(Lt,Fa)))return!1}var ep=Yr.get(wt),wm=Yr.get(Lt);if(ep&&wm)return ep==Lt&&wm==wt;var Ud=!0;Yr.set(wt,Lt),Yr.set(Lt,wt);for(var tp=ui;++su<ws;){var zd=wt[Fa=fo[su]],qd=Lt[Fa];if(xn)var xm=ui?xn(qd,zd,Fa,Lt,wt,Yr):xn(zd,qd,Fa,wt,Lt,Yr);if(!(xm===i?zd===qd||xi(zd,qd,Fn,xn,Yr):xm)){Ud=!1;break}tp||(tp=Fa=="constructor")}if(Ud&&!tp){var Gd=wt.constructor,Vd=Lt.constructor;Gd==Vd||!("constructor"in wt)||!("constructor"in Lt)||typeof Gd=="function"&&Gd instanceof Gd&&typeof Vd=="function"&&Vd instanceof Vd||(Ud=!1)}return Yr.delete(wt),Yr.delete(Lt),Ud}(oe,me,Ee,Ae,ze,qe))}(S,P,L,V,ru,K))}function cs(S,P,L,V){var K=L.length,oe=K,me=!V;if(S==null)return!oe;for(S=Ur(S);K--;){var Ee=L[K];if(me&&Ee[2]?Ee[1]!==S[Ee[0]]:!(Ee[0]in S))return!1}for(;++K<oe;){var Ae=(Ee=L[K])[0],ze=S[Ae],qe=Ee[1];if(me&&Ee[2]){if(ze===i&&!(Ae in S))return!1}else{var Xe=new er;if(V)var dt=V(ze,qe,Ae,S,P,Xe);if(!(dt===i?ru(qe,ze,3,V,Xe):dt))return!1}}return!0}function el(S){return!(!en(S)||(P=S,Ec&&Ec in P))&&(Do(S)?cy:ee).test(ko(S));var P}function tl(S){return typeof S=="function"?S:S==null?Fi:typeof S=="object"?Vt(S)?wy(S[0],S[1]):_y(S):mm(S)}function rl(S){if(!Uc(S))return sv(S);var P=[];for(var L in Ur(S))Nr.call(S,L)&&L!="constructor"&&P.push(L);return P}function fs(S,P){return S<P}function by(S,P){var L=-1,V=ji(S)?lt(S.length):[];return Li(S,function(K,oe,me){V[++L]=P(K,oe,me)}),V}function _y(S){var P=xv(S);return P.length==1&&P[0][2]?Ov(P[0][0],P[0][1]):function(L){return L===S||cs(L,S,P)}}function wy(S,P){return Bc(S)&&jy(P)?Ov(so(S),P):function(L){var V=zv(L,S);return V===i&&V===P?qv(L,S):ru(P,V,3)}}function dd(S,P,L,V,K){S!==P&&Qu(P,function(oe,me){if(K||(K=new er),en(oe))(function(Ae,ze,qe,Xe,dt,pt,Rt){var $e=zc(Ae,qe),Je=zc(ze,qe),Ct=Rt.get(Je);if(Ct)lv(Ae,qe,Ct);else{var st=pt?pt($e,Je,qe+"",Ae,ze,Rt):i,$t=st===i;if($t){var qt=Vt(Je),Sr=!qt&&ja(Je),wt=!qt&&!Sr&&bs(Je);st=Je,qt||Sr||wt?Vt($e)?st=$e:fn($e)?st=mi($e):Sr?($t=!1,st=Ay(Je,!0)):wt?($t=!1,st=Py(Je,!0)):st=[]:Xc(Je)||uo(Je)?(st=$e,uo($e)?st=Ld($e):en($e)&&!Do($e)||(st=Ny(Je))):$t=!1}$t&&(Rt.set(Je,st),dt(st,Je,Xe,pt,Rt),Rt.delete(Je)),lv(Ae,qe,st)}})(S,P,me,L,dd,V,K);else{var Ee=V?V(zc(S,me),oe,me+"",S,P,K):i;Ee===i&&(Ee=oe),lv(S,me,Ee)}},si)}function xy(S,P){var L=S.length;if(L)return Ro(P+=P<0?L:0,L)?S[P]:i}function Dc(S,P,L){P=P.length?$r(P,function(oe){return Vt(oe)?function(me){return eu(me,oe.length===1?oe[0]:oe)}:oe}):[Fi];var V=-1;P=$r(P,Zt(It()));var K=by(S,function(oe,me,Ee){var Ae=$r(P,function(ze){return ze(oe)});return{criteria:Ae,index:++V,value:oe}});return function(oe){var me=oe.length;for(oe.sort(function(Ee,Ae){return function(ze,qe,Xe){for(var dt=-1,pt=ze.criteria,Rt=qe.criteria,$e=pt.length,Je=Xe.length;++dt<$e;){var Ct=Ry(pt[dt],Rt[dt]);if(Ct)return dt>=Je?Ct:Ct*(Xe[dt]=="desc"?-1:1)}return ze.index-qe.index}(Ee,Ae,L)});me--;)oe[me]=oe[me].value;return oe}(K)}function nl(S,P,L){for(var V=-1,K=P.length,oe={};++V<K;){var me=P[V],Ee=eu(S,me);L(Ee,me)&&Mc(oe,Ni(me,S),Ee)}return oe}function hd(S,P,L,V){var K=V?nv:ns,oe=-1,me=P.length,Ee=S;for(S===P&&(P=mi(P)),L&&(Ee=$r(S,Zt(L)));++oe<me;)for(var Ae=0,ze=P[oe],qe=L?L(ze):ze;(Ae=K(Ee,qe,Ae,V))>-1;)Ee!==S&&Sc.call(Ee,Ae,1),Sc.call(S,Ae,1);return S}function ne(S,P){for(var L=S?P.length:0,V=L-1;L--;){var K=P[L];if(L==V||K!==oe){var oe=K;Ro(K)?Sc.call(S,K,1):vv(S,K)}}return S}function ds(S,P){return S+rd(py()*(P-S+1))}function il(S,P){var L="";if(!S||P<1||P>f)return L;do P%2&&(L+=S),(P=rd(P/2))&&(S+=S);while(P);return L}function Mt(S,P){return Sd(Od(S,P,Fi),S+"")}function fr(S){return uv(vl(S))}function L_(S,P){var L=vl(S);return Gc(L,ls(P,0,L.length))}function Mc(S,P,L,V){if(!en(S))return S;for(var K=-1,oe=(P=Ni(P,S)).length,me=oe-1,Ee=S;Ee!=null&&++K<oe;){var Ae=so(P[K]),ze=L;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return S;if(K!=me){var qe=Ee[Ae];(ze=V?V(qe,Ae,Ee):i)===i&&(ze=en(qe)?qe:Ro(P[K+1])?[]:{})}Pc(Ee,Ae,ze),Ee=Ee[Ae]}return S}var Ey=ad?function(S,P){return ad.set(S,P),S}:Fi,nu=Cc?function(S,P){return Cc(S,"toString",{configurable:!0,enumerable:!1,value:Lo(P),writable:!0})}:Fi;function N_(S){return Gc(vl(S))}function fa(S,P,L){var V=-1,K=S.length;P<0&&(P=-P>K?0:K+P),(L=L>K?K:L)<0&&(L+=K),K=P>L?0:L-P>>>0,P>>>=0;for(var oe=lt(K);++V<K;)oe[V]=S[V+P];return oe}function j_(S,P){var L;return Li(S,function(V,K,oe){return!(L=P(V,K,oe))}),!!L}function vd(S,P,L){var V=0,K=S==null?V:S.length;if(typeof P=="number"&&P==P&&K<=2147483647){for(;V<K;){var oe=V+K>>>1,me=S[oe];me!==null&&!_i(me)&&(L?me<=P:me<P)?V=oe+1:K=oe}return K}return hv(S,P,Fi,L)}function hv(S,P,L,V){var K=0,oe=S==null?0:S.length;if(oe===0)return 0;for(var me=(P=L(P))!=P,Ee=P===null,Ae=_i(P),ze=P===i;K<oe;){var qe=rd((K+oe)/2),Xe=L(S[qe]),dt=Xe!==i,pt=Xe===null,Rt=Xe==Xe,$e=_i(Xe);if(me)var Je=V||Rt;else Je=ze?Rt&&(V||dt):Ee?Rt&&dt&&(V||!pt):Ae?Rt&&dt&&!pt&&(V||!$e):!pt&&!$e&&(V?Xe<=P:Xe<P);Je?K=qe+1:oe=qe}return on(oe,4294967294)}function ro(S,P){for(var L=-1,V=S.length,K=0,oe=[];++L<V;){var me=S[L],Ee=P?P(me):me;if(!L||!va(Ee,Ae)){var Ae=Ee;oe[K++]=me===0?0:me}}return oe}function Oy(S){return typeof S=="number"?S:_i(S)?d:+S}function Wi(S){if(typeof S=="string")return S;if(Vt(S))return $r(S,Wi)+"";if(_i(S))return Pn?Pn.call(S):"";var P=S+"";return P=="0"&&1/S==-1/0?"-0":P}function hs(S,P,L){var V=-1,K=Fu,oe=S.length,me=!0,Ee=[],Ae=Ee;if(L)me=!1,K=Bu;else if(oe>=200){var ze=P?null:bd(S);if(ze)return Ks(ze);me=!1,K=Xs,Ae=new Ja}else Ae=P?[]:Ee;e:for(;++V<oe;){var qe=S[V],Xe=P?P(qe):qe;if(qe=L||qe!==0?qe:0,me&&Xe==Xe){for(var dt=Ae.length;dt--;)if(Ae[dt]===Xe)continue e;P&&Ae.push(Xe),Ee.push(qe)}else K(Ae,Xe,L)||(Ae!==Ee&&Ae.push(Xe),Ee.push(qe))}return Ee}function vv(S,P){return(S=Fy(S,P=Ni(P,S)))==null||delete S[so(un(P))]}function Sy(S,P,L,V){return Mc(S,P,L(eu(S,P)),V)}function da(S,P,L,V){for(var K=S.length,oe=V?K:-1;(V?oe--:++oe<K)&&P(S[oe],oe,S););return L?fa(S,V?0:oe,V?oe+1:K):fa(S,V?oe+1:0,V?K:oe)}function Cy(S,P){var L=S;return L instanceof Jt&&(L=L.value()),Uu(P,function(V,K){return K.func.apply(K.thisArg,ka([V],K.args))},L)}function pv(S,P,L){var V=S.length;if(V<2)return V?hs(S[0]):[];for(var K=-1,oe=lt(V);++K<V;)for(var me=S[K],Ee=-1;++Ee<V;)Ee!=K&&(oe[K]=To(oe[K]||me,S[Ee],P,L));return hs(Rn(oe,1),P,L)}function Ty(S,P,L){for(var V=-1,K=S.length,oe=P.length,me={};++V<K;){var Ee=V<oe?P[V]:i;L(me,S[V],Ee)}return me}function gv(S){return fn(S)?S:[]}function yv(S){return typeof S=="function"?S:Fi}function Ni(S,P){return Vt(S)?S:Bc(S,P)?[S]:Tv(Cr(S))}var F_=Mt;function vs(S,P,L){var V=S.length;return L=L===i?V:L,!P&&L>=V?S:fa(S,P,L)}var ha=hy||function(S){return an.clearTimeout(S)};function Ay(S,P){if(P)return S.slice();var L=S.length,V=fy?fy(L):new S.constructor(L);return S.copy(V),V}function mv(S){var P=new S.constructor(S.byteLength);return new Oc(P).set(new Oc(S)),P}function Py(S,P){var L=P?mv(S.buffer):S.buffer;return new S.constructor(L,S.byteOffset,S.length)}function Ry(S,P){if(S!==P){var L=S!==i,V=S===null,K=S==S,oe=_i(S),me=P!==i,Ee=P===null,Ae=P==P,ze=_i(P);if(!Ee&&!ze&&!oe&&S>P||oe&&me&&Ae&&!Ee&&!ze||V&&me&&Ae||!L&&Ae||!K)return 1;if(!V&&!oe&&!ze&&S<P||ze&&L&&K&&!V&&!oe||Ee&&L&&K||!me&&K||!Ae)return-1}return 0}function ky(S,P,L,V){for(var K=-1,oe=S.length,me=L.length,Ee=-1,Ae=P.length,ze=An(oe-me,0),qe=lt(Ae+ze),Xe=!V;++Ee<Ae;)qe[Ee]=P[Ee];for(;++K<me;)(Xe||K<oe)&&(qe[L[K]]=S[K]);for(;ze--;)qe[Ee++]=S[K++];return qe}function bv(S,P,L,V){for(var K=-1,oe=S.length,me=-1,Ee=L.length,Ae=-1,ze=P.length,qe=An(oe-Ee,0),Xe=lt(qe+ze),dt=!V;++K<qe;)Xe[K]=S[K];for(var pt=K;++Ae<ze;)Xe[pt+Ae]=P[Ae];for(;++me<Ee;)(dt||K<oe)&&(Xe[pt+L[me]]=S[K++]);return Xe}function mi(S,P){var L=-1,V=S.length;for(P||(P=lt(V));++L<V;)P[L]=S[L];return P}function no(S,P,L,V){var K=!L;L||(L={});for(var oe=-1,me=P.length;++oe<me;){var Ee=P[oe],Ae=V?V(L[Ee],S[Ee],Ee,L,S):i;Ae===i&&(Ae=S[Ee]),K?eo(L,Ee,Ae):Pc(L,Ee,Ae)}return L}function pd(S,P){return function(L,V){var K=Vt(L)?dc:us,oe=P?P():{};return K(L,S,It(V,2),oe)}}function ps(S){return Mt(function(P,L){var V=-1,K=L.length,oe=K>1?L[K-1]:i,me=K>2?L[2]:i;for(oe=S.length>3&&typeof oe=="function"?(K--,oe):i,me&&bi(L[0],L[1],me)&&(oe=K<3?i:oe,K=1),P=Ur(P);++V<K;){var Ee=L[V];Ee&&S(P,Ee,V,oe)}return P})}function al(S,P){return function(L,V){if(L==null)return L;if(!ji(L))return S(L,V);for(var K=L.length,oe=P?K:-1,me=Ur(L);(P?oe--:++oe<K)&&V(me[oe],oe,me)!==!1;);return L}}function Lc(S){return function(P,L,V){for(var K=-1,oe=Ur(P),me=V(P),Ee=me.length;Ee--;){var Ae=me[S?Ee:++K];if(L(oe[Ae],Ae,oe)===!1)break}return P}}function Iy(S){return function(P){var L=is(P=Cr(P))?Nn(P):i,V=L?L[0]:P.charAt(0),K=L?vs(L,1).join(""):P.slice(1);return V[S]()+K}}function iu(S){return function(P){return Uu(Qc(Wv(P).replace(Vs,"")),S,"")}}function Nc(S){return function(){var P=arguments;switch(P.length){case 0:return new S;case 1:return new S(P[0]);case 2:return new S(P[0],P[1]);case 3:return new S(P[0],P[1],P[2]);case 4:return new S(P[0],P[1],P[2],P[3]);case 5:return new S(P[0],P[1],P[2],P[3],P[4]);case 6:return new S(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new S(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var L=ss(S.prototype),V=S.apply(L,P);return en(V)?V:L}}function io(S){return function(P,L,V){var K=Ur(P);if(!ji(P)){var oe=It(L,3);P=$n(P),L=function(Ee){return oe(K[Ee],Ee,K)}}var me=S(P,L,V);return me>-1?K[oe?P[me]:me]:i}}function gd(S){return La(function(P){var L=P.length,V=L,K=sn.prototype.thru;for(S&&P.reverse();V--;){var oe=P[V];if(typeof oe!="function")throw new jn(a);if(K&&!me&&Vn(oe)=="wrapper")var me=new sn([],!0)}for(V=me?V:L;++V<L;){var Ee=Vn(oe=P[V]),Ae=Ee=="wrapper"?wd(oe):i;me=Ae&&Ed(Ae[0])&&Ae[1]==424&&!Ae[4].length&&Ae[9]==1?me[Vn(Ae[0])].apply(me,Ae[3]):oe.length==1&&Ed(oe)?me[Ee]():me.thru(oe)}return function(){var ze=arguments,qe=ze[0];if(me&&ze.length==1&&Vt(qe))return me.plant(qe).value();for(var Xe=0,dt=L?P[Xe].apply(this,ze):qe;++Xe<L;)dt=P[Xe].call(this,dt);return dt}})}function ao(S,P,L,V,K,oe,me,Ee,Ae,ze){var qe=P&l,Xe=1&P,dt=2&P,pt=24&P,Rt=512&P,$e=dt?i:Nc(S);return function Je(){for(var Ct=arguments.length,st=lt(Ct),$t=Ct;$t--;)st[$t]=arguments[$t];if(pt)var qt=gs(Je),Sr=function(xn,xi){for(var Yr=xn.length,ui=0;Yr--;)xn[Yr]===xi&&++ui;return ui}(st,qt);if(V&&(st=ky(st,V,K,pt)),oe&&(st=bv(st,oe,me,pt)),Ct-=Sr,pt&&Ct<ze){var wt=ai(st,qt);return _v(S,P,ao,Je.placeholder,L,st,wt,Ee,Ae,ze-Ct)}var Lt=Xe?L:this,Fn=dt?Lt[S]:S;return Ct=st.length,Ee?st=function(xn,xi){for(var Yr=xn.length,ui=on(xi.length,Yr),fo=mi(xn);ui--;){var ws=xi[ui];xn[ui]=Ro(ws,Yr)?fo[ws]:i}return xn}(st,Ee):Rt&&Ct>1&&st.reverse(),qe&&Ae<Ct&&(st.length=Ae),this&&this!==an&&this instanceof Je&&(Fn=$e||Nc(Fn)),Fn.apply(Lt,st)}}function Hi(S,P){return function(L,V){return function(K,oe,me,Ee){return to(K,function(Ae,ze,qe){oe(Ee,me(Ae),ze,qe)}),Ee}(L,S,P(V),{})}}function yd(S,P){return function(L,V){var K;if(L===i&&V===i)return P;if(L!==i&&(K=L),V!==i){if(K===i)return V;typeof L=="string"||typeof V=="string"?(L=Wi(L),V=Wi(V)):(L=Oy(L),V=Oy(V)),K=S(L,V)}return K}}function md(S){return La(function(P){return P=$r(P,Zt(It())),Mt(function(L){var V=this;return S(P,function(K){return ni(K,V,L)})})})}function jc(S,P){var L=(P=P===i?" ":Wi(P)).length;if(L<2)return L?il(P,S):P;var V=il(P,td(S/Ln(P)));return is(P)?vs(Nn(V),0,S).join(""):V.slice(0,S)}function ol(S){return function(P,L,V){return V&&typeof V!="number"&&bi(P,L,V)&&(L=V=i),P=ga(P),L===i?(L=P,P=0):L=ga(L),function(K,oe,me,Ee){for(var Ae=-1,ze=An(td((oe-K)/(me||1)),0),qe=lt(ze);ze--;)qe[Ee?ze:++Ae]=K,K+=me;return qe}(P,L,V=V===i?P<L?1:-1:ga(V),S)}}function Da(S){return function(P,L){return typeof P=="string"&&typeof L=="string"||(P=ya(P),L=ya(L)),S(P,L)}}function _v(S,P,L,V,K,oe,me,Ee,Ae,ze){var qe=8&P;P|=qe?u:64,4&(P&=~(qe?64:u))||(P&=-4);var Xe=[S,P,K,qe?oe:i,qe?me:i,qe?i:oe,qe?i:me,Ee,Ae,ze],dt=L.apply(i,Xe);return Ed(S)&&Sv(dt,Xe),dt.placeholder=V,qc(dt,S,P)}function wv(S){var P=Yn[S];return function(L,V){if(L=ya(L),(V=V==null?0:on(Ht(V),292))&&vy(L)){var K=(Cr(L)+"e").split("e");return+((K=(Cr(P(K[0]+"e"+(+K[1]+V)))+"e").split("e"))[0]+"e"+(+K[1]-V))}return P(L)}}var bd=Yu&&1/Ks(new Yu([,-0]))[1]==c?function(S){return new Yu(S)}:Qv;function Dy(S){return function(P){var L=Xn(P);return L==C?wn(P):L==R?wc(P):function(V,K){return $r(K,function(oe){return[oe,V[oe]]})}(P,S(P))}}function oo(S,P,L,V,K,oe,me,Ee){var Ae=2&P;if(!Ae&&typeof S!="function")throw new jn(a);var ze=V?V.length:0;if(ze||(P&=-97,V=K=i),me=me===i?me:An(Ht(me),0),Ee=Ee===i?Ee:Ht(Ee),ze-=K?K.length:0,64&P){var qe=V,Xe=K;V=K=i}var dt=Ae?i:wd(S),pt=[S,P,L,V,K,qe,Xe,oe,me,Ee];if(dt&&function($e,Je){var Ct=$e[1],st=Je[1],$t=Ct|st,qt=$t<131,Sr=st==l&&Ct==8||st==l&&Ct==256&&$e[7].length<=Je[8]||st==384&&Je[7].length<=Je[8]&&Ct==8;if(!qt&&!Sr)return $e;1&st&&($e[2]=Je[2],$t|=1&Ct?0:4);var wt=Je[3];if(wt){var Lt=$e[3];$e[3]=Lt?ky(Lt,wt,Je[4]):wt,$e[4]=Lt?ai($e[3],s):Je[4]}(wt=Je[5])&&(Lt=$e[5],$e[5]=Lt?bv(Lt,wt,Je[6]):wt,$e[6]=Lt?ai($e[5],s):Je[6]),(wt=Je[7])&&($e[7]=wt),st&l&&($e[8]=$e[8]==null?Je[8]:on($e[8],Je[8])),$e[9]==null&&($e[9]=Je[9]),$e[0]=Je[0],$e[1]=$t}(pt,dt),S=pt[0],P=pt[1],L=pt[2],V=pt[3],K=pt[4],!(Ee=pt[9]=pt[9]===i?Ae?0:S.length:An(pt[9]-ze,0))&&24&P&&(P&=-25),P&&P!=1)Rt=P==8||P==16?function($e,Je,Ct){var st=Nc($e);return function $t(){for(var qt=arguments.length,Sr=lt(qt),wt=qt,Lt=gs($t);wt--;)Sr[wt]=arguments[wt];var Fn=qt<3&&Sr[0]!==Lt&&Sr[qt-1]!==Lt?[]:ai(Sr,Lt);return(qt-=Fn.length)<Ct?_v($e,Je,ao,$t.placeholder,i,Sr,Fn,i,i,Ct-qt):ni(this&&this!==an&&this instanceof $t?st:$e,this,Sr)}}(S,P,Ee):P!=u&&P!=33||K.length?ao.apply(i,pt):function($e,Je,Ct,st){var $t=1&Je,qt=Nc($e);return function Sr(){for(var wt=-1,Lt=arguments.length,Fn=-1,xn=st.length,xi=lt(xn+Lt),Yr=this&&this!==an&&this instanceof Sr?qt:$e;++Fn<xn;)xi[Fn]=st[Fn];for(;Lt--;)xi[Fn++]=arguments[++wt];return ni(Yr,$t?Ct:this,xi)}}(S,P,L,V);else var Rt=function($e,Je,Ct){var st=1&Je,$t=Nc($e);return function qt(){return(this&&this!==an&&this instanceof qt?$t:$e).apply(st?Ct:this,arguments)}}(S,P,L);return qc((dt?Ey:Sv)(Rt,pt),S,P)}function Gn(S,P,L,V){return S===i||va(S,as[L])&&!Nr.call(V,L)?P:S}function _d(S,P,L,V,K,oe){return en(S)&&en(P)&&(oe.set(P,S),dd(S,P,i,_d,oe),oe.delete(P)),S}function My(S){return Xc(S)?i:S}function Ma(S,P,L,V,K,oe){var me=1&L,Ee=S.length,Ae=P.length;if(Ee!=Ae&&!(me&&Ae>Ee))return!1;var ze=oe.get(S),qe=oe.get(P);if(ze&&qe)return ze==P&&qe==S;var Xe=-1,dt=!0,pt=2&L?new Ja:i;for(oe.set(S,P),oe.set(P,S);++Xe<Ee;){var Rt=S[Xe],$e=P[Xe];if(V)var Je=me?V($e,Rt,Xe,P,S,oe):V(Rt,$e,Xe,S,P,oe);if(Je!==i){if(Je)continue;dt=!1;break}if(pt){if(!vc(P,function(Ct,st){if(!Xs(pt,st)&&(Rt===Ct||K(Rt,Ct,L,V,oe)))return pt.push(st)})){dt=!1;break}}else if(Rt!==$e&&!K(Rt,$e,L,V,oe)){dt=!1;break}}return oe.delete(S),oe.delete(P),dt}function La(S){return Sd(Od(S,i,zy),S+"")}function sl(S){return kn(S,$n,Ev)}function Ao(S){return kn(S,si,ul)}var wd=ad?function(S){return ad.get(S)}:Qv;function Vn(S){for(var P=S.name+"",L=Xu[P],V=Nr.call(Xu,P)?L.length:0;V--;){var K=L[V],oe=K.func;if(oe==null||oe==S)return K.name}return P}function gs(S){return(Nr.call(Z,"placeholder")?Z:S).placeholder}function It(){var S=Z.iteratee||Kv;return S=S===Kv?tl:S,arguments.length?S(arguments[0],arguments[1]):S}function xd(S,P){var L,V,K=S.__data__;return((V=typeof(L=P))=="string"||V=="number"||V=="symbol"||V=="boolean"?L!=="__proto__":L===null)?K[typeof P=="string"?"string":"hash"]:K.map}function xv(S){for(var P=$n(S),L=P.length;L--;){var V=P[L],K=S[V];P[L]=[V,K,jy(K)]}return P}function Po(S,P){var L=function(V,K){return V==null?i:V[K]}(S,P);return el(L)?L:i}var Ev=ov?function(S){return S==null?[]:(S=Ur(S),Ra(ov(S),function(P){return dy.call(S,P)}))}:Fd,ul=ov?function(S){for(var P=[];S;)ka(P,Ev(S)),S=Wu(S);return P}:Fd,Xn=kr;function Ly(S,P,L){for(var V=-1,K=(P=Ni(P,S)).length,oe=!1;++V<K;){var me=so(P[V]);if(!(oe=S!=null&&L(S,me)))break;S=S[me]}return oe||++V!=K?oe:!!(K=S==null?0:S.length)&&pa(K)&&Ro(me,K)&&(Vt(S)||uo(S))}function Ny(S){return typeof S.constructor!="function"||Uc(S)?{}:ss(Wu(S))}function Fc(S){return Vt(S)||uo(S)||!!(Di&&S&&S[Di])}function Ro(S,P){var L=typeof S;return!!(P=P??f)&&(L=="number"||L!="symbol"&&Pe.test(S))&&S>-1&&S%1==0&&S<P}function bi(S,P,L){if(!en(L))return!1;var V=typeof P;return!!(V=="number"?ji(L)&&Ro(P,L.length):V=="string"&&P in L)&&va(L[P],S)}function Bc(S,P){if(Vt(S))return!1;var L=typeof S;return!(L!="number"&&L!="symbol"&&L!="boolean"&&S!=null&&!_i(S))||be.test(S)||!Re.test(S)||P!=null&&S in Ur(P)}function Ed(S){var P=Vn(S),L=Z[P];if(typeof L!="function"||!(P in Jt.prototype))return!1;if(S===L)return!0;var V=wd(L);return!!V&&S===V[0]}(os&&Xn(new os(new ArrayBuffer(1)))!=z||yi&&Xn(new yi)!=C||id&&Xn(id.resolve())!=A||Yu&&Xn(new Yu)!=R||Tc&&Xn(new Tc)!=N)&&(Xn=function(S){var P=kr(S),L=P==O?S.constructor:i,V=L?ko(L):"";if(V)switch(V){case Ku:return z;case Se:return C;case je:return A;case Le:return R;case ht:return N}return P});var B_=Qf?Do:Bd;function Uc(S){var P=S&&S.constructor;return S===(typeof P=="function"&&P.prototype||as)}function jy(S){return S==S&&!en(S)}function Ov(S,P){return function(L){return L!=null&&L[S]===P&&(P!==i||S in Ur(L))}}function Od(S,P,L){return P=An(P===i?S.length-1:P,0),function(){for(var V=arguments,K=-1,oe=An(V.length-P,0),me=lt(oe);++K<oe;)me[K]=V[P+K];K=-1;for(var Ee=lt(P+1);++K<P;)Ee[K]=V[K];return Ee[P]=L(me),ni(S,this,Ee)}}function Fy(S,P){return P.length<2?S:eu(S,fa(P,0,-1))}function zc(S,P){if((P!=="constructor"||typeof S[P]!="function")&&P!="__proto__")return S[P]}var Sv=By(Ey),ll=A_||function(S,P){return an.setTimeout(S,P)},Sd=By(nu);function qc(S,P,L){var V=P+"";return Sd(S,function(K,oe){var me=oe.length;if(!me)return K;var Ee=me-1;return oe[Ee]=(me>1?"& ":"")+oe[Ee],oe=oe.join(me>2?", ":" "),K.replace(he,`{
/* [wrapped with `+oe+`] */
`)}(V,function(K,oe){return ii(v,function(me){var Ee="_."+me[0];oe&me[1]&&!Fu(K,Ee)&&K.push(Ee)}),K.sort()}(function(K){var oe=K.match(xe);return oe?oe[1].split(Ne):[]}(V),L)))}function By(S){var P=0,L=0;return function(){var V=nd(),K=16-(V-L);if(L=V,K>0){if(++P>=800)return arguments[0]}else P=0;return S.apply(i,arguments)}}function Gc(S,P){var L=-1,V=S.length,K=V-1;for(P=P===i?V:P;++L<P;){var oe=ds(L,K),me=S[oe];S[oe]=S[L],S[L]=me}return S.length=P,S}var Cd,Cv,Tv=(Cd=kd(function(S){var P=[];return S.charCodeAt(0)===46&&P.push(""),S.replace(j,function(L,V,K,oe){P.push(K?oe.replace(Ze,"$1"):V||L)}),P},function(S){return Cv.size===500&&Cv.clear(),S}),Cv=Cd.cache,Cd);function so(S){if(typeof S=="string"||_i(S))return S;var P=S+"";return P=="0"&&1/S==-1/0?"-0":P}function ko(S){if(S!=null){try{return Jf.call(S)}catch{}try{return S+""}catch{}}return""}function Av(S){if(S instanceof Jt)return S.clone();var P=new sn(S.__wrapped__,S.__chain__);return P.__actions__=mi(S.__actions__),P.__index__=S.__index__,P.__values__=S.__values__,P}var Pv=Mt(function(S,P){return fn(S)?To(S,Rn(P,1,fn,!0)):[]}),U_=Mt(function(S,P){var L=un(P);return fn(L)&&(L=i),fn(S)?To(S,Rn(P,1,fn,!0),It(L,2)):[]}),Rv=Mt(function(S,P){var L=un(P);return fn(L)&&(L=i),fn(S)?To(S,Rn(P,1,fn,!0),i,L):[]});function Qt(S,P,L){var V=S==null?0:S.length;if(!V)return-1;var K=L==null?0:Ht(L);return K<0&&(K=An(V+K,0)),zu(S,It(P,3),K)}function Uy(S,P,L){var V=S==null?0:S.length;if(!V)return-1;var K=V-1;return L!==i&&(K=Ht(L),K=L<0?An(V+K,0):on(K,V-1)),zu(S,It(P,3),K,!0)}function zy(S){return S!=null&&S.length?Rn(S,1):[]}function cl(S){return S&&S.length?S[0]:i}var qy=Mt(function(S){var P=$r(S,gv);return P.length&&P[0]===S[0]?dv(P):[]}),z_=Mt(function(S){var P=un(S),L=$r(S,gv);return P===un(L)?P=i:L.pop(),L.length&&L[0]===S[0]?dv(L,It(P,2)):[]}),q_=Mt(function(S){var P=un(S),L=$r(S,gv);return(P=typeof P=="function"?P:i)&&L.pop(),L.length&&L[0]===S[0]?dv(L,i,P):[]});function un(S){var P=S==null?0:S.length;return P?S[P-1]:i}var G_=Mt(Vc);function Vc(S,P){return S&&S.length&&P&&P.length?hd(S,P):S}var kv=La(function(S,P){var L=S==null?0:S.length,V=Zu(S,P);return ne(S,$r(P,function(K){return Ro(K,L)?+K:K}).sort(Ry)),V});function Td(S){return S==null?S:k_.call(S)}var Gy=Mt(function(S){return hs(Rn(S,1,fn,!0))}),Yi=Mt(function(S){var P=un(S);return fn(P)&&(P=i),hs(Rn(S,1,fn,!0),It(P,2))}),ys=Mt(function(S){var P=un(S);return P=typeof P=="function"?P:i,hs(Rn(S,1,fn,!0),i,P)});function $c(S){if(!S||!S.length)return[];var P=0;return S=Ra(S,function(L){if(fn(L))return P=An(L.length,P),!0}),bc(P,function(L){return $r(S,gc(L))})}function Iv(S,P){if(!S||!S.length)return[];var L=$c(S);return P==null?L:$r(L,function(V){return ni(P,i,V)})}var Ad=Mt(function(S,P){return fn(S)?To(S,P):[]}),Vy=Mt(function(S){return pv(Ra(S,fn))}),Dv=Mt(function(S){var P=un(S);return fn(P)&&(P=i),pv(Ra(S,fn),It(P,2))}),$y=Mt(function(S){var P=un(S);return P=typeof P=="function"?P:i,pv(Ra(S,fn),i,P)}),Mv=Mt($c),Lv=Mt(function(S){var P=S.length,L=P>1?S[P-1]:i;return L=typeof L=="function"?(S.pop(),L):i,Iv(S,L)});function Io(S){var P=Z(S);return P.__chain__=!0,P}function Pd(S,P){return P(S)}var ms=La(function(S){var P=S.length,L=P?S[0]:0,V=this.__wrapped__,K=function(oe){return Zu(oe,S)};return!(P>1||this.__actions__.length)&&V instanceof Jt&&Ro(L)?((V=V.slice(L,+L+(P?1:0))).__actions__.push({func:Pd,args:[K],thisArg:i}),new sn(V,this.__chain__).thru(function(oe){return P&&!oe.length&&oe.push(i),oe})):this.thru(K)}),Wy=pd(function(S,P,L){Nr.call(S,L)?++S[L]:eo(S,L,1)}),Hy=io(Qt),Nv=io(Uy);function Yy(S,P){return(Vt(S)?ii:Li)(S,It(P,3))}function Xy(S,P){return(Vt(S)?rs:Ic)(S,It(P,3))}var V_=pd(function(S,P,L){Nr.call(S,L)?S[L].push(P):eo(S,L,[P])}),Ky=Mt(function(S,P,L){var V=-1,K=typeof P=="function",oe=ji(S)?lt(S.length):[];return Li(S,function(me){oe[++V]=K?ni(P,me,L):tu(me,P,L)}),oe}),Zy=pd(function(S,P,L){eo(S,L,P)});function Rd(S,P){return(Vt(S)?$r:by)(S,It(P,3))}var Qy=pd(function(S,P,L){S[L?0:1].push(P)},function(){return[[],[]]}),Jy=Mt(function(S,P){if(S==null)return[];var L=P.length;return L>1&&bi(S,P[0],P[1])?P=[]:L>2&&bi(P[0],P[1],P[2])&&(P=[P[0]]),Dc(S,Rn(P,1),[])}),Kn=T_||function(){return an.Date.now()};function Na(S,P,L){return P=L?i:P,P=S&&P==null?S.length:P,oo(S,l,i,i,i,i,P)}function em(S,P){var L;if(typeof P!="function")throw new jn(a);return S=Ht(S),function(){return--S>0&&(L=P.apply(this,arguments)),S<=1&&(P=i),L}}var jv=Mt(function(S,P,L){var V=1;if(L.length){var K=ai(L,gs(jv));V|=u}return oo(S,V,P,L,K)}),Wc=Mt(function(S,P,L){var V=3;if(L.length){var K=ai(L,gs(Wc));V|=u}return oo(P,V,S,L,K)});function au(S,P,L){var V,K,oe,me,Ee,Ae,ze=0,qe=!1,Xe=!1,dt=!0;if(typeof S!="function")throw new jn(a);function pt(st){var $t=V,qt=K;return V=K=i,ze=st,me=S.apply(qt,$t)}function Rt(st){var $t=st-Ae;return Ae===i||$t>=P||$t<0||Xe&&st-ze>=oe}function $e(){var st=Kn();if(Rt(st))return Je(st);Ee=ll($e,function($t){var qt=P-($t-Ae);return Xe?on(qt,oe-($t-ze)):qt}(st))}function Je(st){return Ee=i,dt&&V?pt(st):(V=K=i,me)}function Ct(){var st=Kn(),$t=Rt(st);if(V=arguments,K=this,Ae=st,$t){if(Ee===i)return function(qt){return ze=qt,Ee=ll($e,P),qe?pt(qt):me}(Ae);if(Xe)return ha(Ee),Ee=ll($e,P),pt(Ae)}return Ee===i&&(Ee=ll($e,P)),me}return P=ya(P)||0,en(L)&&(qe=!!L.leading,oe=(Xe="maxWait"in L)?An(ya(L.maxWait)||0,P):oe,dt="trailing"in L?!!L.trailing:dt),Ct.cancel=function(){Ee!==i&&ha(Ee),ze=0,V=Ae=K=Ee=i},Ct.flush=function(){return Ee===i?me:Je(Kn())},Ct}var tm=Mt(function(S,P){return cv(S,1,P)}),rm=Mt(function(S,P,L){return cv(S,ya(P)||0,L)});function kd(S,P){if(typeof S!="function"||P!=null&&typeof P!="function")throw new jn(a);var L=function(){var V=arguments,K=P?P.apply(this,V):V[0],oe=L.cache;if(oe.has(K))return oe.get(K);var me=S.apply(this,V);return L.cache=oe.set(K,me)||oe,me};return L.cache=new(kd.Cache||ca),L}function Hc(S){if(typeof S!="function")throw new jn(a);return function(){var P=arguments;switch(P.length){case 0:return!S.call(this);case 1:return!S.call(this,P[0]);case 2:return!S.call(this,P[0],P[1]);case 3:return!S.call(this,P[0],P[1],P[2])}return!S.apply(this,P)}}kd.Cache=ca;var fl=F_(function(S,P){var L=(P=P.length==1&&Vt(P[0])?$r(P[0],Zt(It())):$r(Rn(P,1),Zt(It()))).length;return Mt(function(V){for(var K=-1,oe=on(V.length,L);++K<oe;)V[K]=P[K].call(this,V[K]);return ni(S,this,V)})}),ou=Mt(function(S,P){var L=ai(P,gs(ou));return oo(S,u,i,P,L)}),nm=Mt(function(S,P){var L=ai(P,gs(nm));return oo(S,64,i,P,L)}),im=La(function(S,P){return oo(S,256,i,i,i,P)});function va(S,P){return S===P||S!=S&&P!=P}var Id=Da(fv),am=Da(function(S,P){return S>=P}),uo=Ju(function(){return arguments}())?Ju:function(S){return ln(S)&&Nr.call(S,"callee")&&!dy.call(S,"callee")},Vt=lt.isArray,Dd=lc?Zt(lc):function(S){return ln(S)&&kr(S)==F};function ji(S){return S!=null&&pa(S.length)&&!Do(S)}function fn(S){return ln(S)&&ji(S)}var ja=Hu||Bd,om=$f?Zt($f):function(S){return ln(S)&&kr(S)==b};function Yc(S){if(!ln(S))return!1;var P=kr(S);return P==m||P=="[object DOMException]"||typeof S.message=="string"&&typeof S.name=="string"&&!Xc(S)}function Do(S){if(!en(S))return!1;var P=kr(S);return P==_||P==x||P=="[object AsyncFunction]"||P=="[object Proxy]"}function Fv(S){return typeof S=="number"&&S==Ht(S)}function pa(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=f}function en(S){var P=typeof S;return S!=null&&(P=="object"||P=="function")}function ln(S){return S!=null&&typeof S=="object"}var sm=cc?Zt(cc):function(S){return ln(S)&&Xn(S)==C};function Bv(S){return typeof S=="number"||ln(S)&&kr(S)==w}function Xc(S){if(!ln(S)||kr(S)!=O)return!1;var P=Wu(S);if(P===null)return!0;var L=Nr.call(P,"constructor")&&P.constructor;return typeof L=="function"&&L instanceof L&&Jf.call(L)==C_}var Uv=fc?Zt(fc):function(S){return ln(S)&&kr(S)==k},lo=ju?Zt(ju):function(S){return ln(S)&&Xn(S)==R};function dl(S){return typeof S=="string"||!Vt(S)&&ln(S)&&kr(S)==I}function _i(S){return typeof S=="symbol"||ln(S)&&kr(S)==M}var bs=Wf?Zt(Wf):function(S){return ln(S)&&pa(S.length)&&!!mr[kr(S)]},Md=Da(fs),hl=Da(function(S,P){return S<=P});function Pt(S){if(!S)return[];if(ji(S))return dl(S)?Nn(S):mi(S);if(Zs&&S[Zs])return function(L){for(var V,K=[];!(V=L.next()).done;)K.push(V.value);return K}(S[Zs]());var P=Xn(S);return(P==C?wn:P==R?Ks:vl)(S)}function ga(S){return S?(S=ya(S))===c||S===-1/0?17976931348623157e292*(S<0?-1:1):S==S?S:0:S===0?S:0}function Ht(S){var P=ga(S),L=P%1;return P==P?L?P-L:P:0}function _s(S){return S?ls(Ht(S),0,h):0}function ya(S){if(typeof S=="number")return S;if(_i(S))return d;if(en(S)){var P=typeof S.valueOf=="function"?S.valueOf():S;S=en(P)?P+"":P}if(typeof S!="string")return S===0?S:+S;S=Br(S);var L=Ie.test(S);return L||we.test(S)?uc(S.slice(2),L?2:8):Ye.test(S)?d:+S}function Ld(S){return no(S,si(S))}function Cr(S){return S==null?"":Wi(S)}var oi=ps(function(S,P){if(Uc(P)||ji(P))no(P,$n(P),S);else for(var L in P)Nr.call(P,L)&&Pc(S,L,P[L])}),um=ps(function(S,P){no(P,si(P),S)}),Nd=ps(function(S,P,L,V){no(P,si(P),S,V)}),lm=ps(function(S,P,L,V){no(P,$n(P),S,V)}),$_=La(Zu),cm=Mt(function(S,P){S=Ur(S);var L=-1,V=P.length,K=V>2?P[2]:i;for(K&&bi(P[0],P[1],K)&&(V=1);++L<V;)for(var oe=P[L],me=si(oe),Ee=-1,Ae=me.length;++Ee<Ae;){var ze=me[Ee],qe=S[ze];(qe===i||va(qe,as[ze])&&!Nr.call(S,ze))&&(S[ze]=oe[ze])}return S}),W_=Mt(function(S){return S.push(i,_d),ni(fm,i,S)});function zv(S,P,L){var V=S==null?i:eu(S,P);return V===i?L:V}function qv(S,P){return S!=null&&Ly(S,P,my)}var Mo=Hi(function(S,P,L){P!=null&&typeof P.toString!="function"&&(P=Co.call(P)),S[P]=L},Lo(Fi)),wi=Hi(function(S,P,L){P!=null&&typeof P.toString!="function"&&(P=Co.call(P)),Nr.call(S,P)?S[P].push(L):S[P]=[L]},It),Gv=Mt(tu);function $n(S){return ji(S)?gy(S):rl(S)}function si(S){return ji(S)?gy(S,!0):function(P){if(!en(P))return function(oe){var me=[];if(oe!=null)for(var Ee in Ur(oe))me.push(Ee);return me}(P);var L=Uc(P),V=[];for(var K in P)(K!="constructor"||!L&&Nr.call(P,K))&&V.push(K);return V}(S)}var H_=ps(function(S,P,L){dd(S,P,L)}),fm=ps(function(S,P,L,V){dd(S,P,L,V)}),Kc=La(function(S,P){var L={};if(S==null)return L;var V=!1;P=$r(P,function(oe){return oe=Ni(oe,S),V||(V=oe.length>1),oe}),no(S,Ao(S),L),V&&(L=$i(L,7,My));for(var K=P.length;K--;)vv(L,P[K]);return L}),dm=La(function(S,P){return S==null?{}:function(L,V){return nl(L,V,function(K,oe){return qv(L,oe)})}(S,P)});function Vv(S,P){if(S==null)return{};var L=$r(Ao(S),function(V){return[V]});return P=It(P),nl(S,L,function(V,K){return P(V,K[0])})}var hm=Dy($n),vm=Dy(si);function vl(S){return S==null?[]:_c(S,$n(S))}var Y_=iu(function(S,P,L){return P=P.toLowerCase(),S+(L?$v(P):P)});function $v(S){return jd(Cr(S).toLowerCase())}function Wv(S){return(S=Cr(S))&&S.replace(De,iv).replace(Xa,"")}var X_=iu(function(S,P,L){return S+(L?"-":"")+P.toLowerCase()}),Hv=iu(function(S,P,L){return S+(L?" ":"")+P.toLowerCase()}),pm=Iy("toLowerCase"),Zc=iu(function(S,P,L){return S+(L?"_":"")+P.toLowerCase()}),Yv=iu(function(S,P,L){return S+(L?" ":"")+jd(P)}),gm=iu(function(S,P,L){return S+(L?" ":"")+P.toUpperCase()}),jd=Iy("toUpperCase");function Qc(S,P,L){return S=Cr(S),(P=L?i:P)===i?function(V){return Ws.test(V)}(S)?function(V){return V.match(Ka)||[]}(S):function(V){return V.match(We)||[]}(S):S.match(P)||[]}var Xv=Mt(function(S,P){try{return ni(S,i,P)}catch(L){return Yc(L)?L:new br(L)}}),co=La(function(S,P){return ii(P,function(L){L=so(L),eo(S,L,jv(S[L],S))}),S});function Lo(S){return function(){return S}}var K_=gd(),ym=gd(!0);function Fi(S){return S}function Kv(S){return tl(typeof S=="function"?S:$i(S,1))}var Z_=Mt(function(S,P){return function(L){return tu(L,S,P)}}),Q_=Mt(function(S,P){return function(L){return tu(S,L,P)}});function Zv(S,P,L){var V=$n(P),K=fd(P,V);L!=null||en(P)&&(K.length||!V.length)||(L=P,P=S,S=this,K=fd(P,$n(P)));var oe=!(en(L)&&"chain"in L&&!L.chain),me=Do(S);return ii(K,function(Ee){var Ae=P[Ee];S[Ee]=Ae,me&&(S.prototype[Ee]=function(){var ze=this.__chain__;if(oe||ze){var qe=S(this.__wrapped__);return(qe.__actions__=mi(this.__actions__)).push({func:Ae,args:arguments,thisArg:S}),qe.__chain__=ze,qe}return Ae.apply(S,ka([this.value()],arguments))})}),S}function Qv(){}var J_=md($r),ew=md(hc),tw=md(vc);function mm(S){return Bc(S)?gc(so(S)):function(P){return function(L){return eu(L,P)}}(S)}var rw=ol(),bm=ol(!0);function Fd(){return[]}function Bd(){return!1}var Jv,nw=yd(function(S,P){return S+P},0),iw=wv("ceil"),_m=yd(function(S,P){return S/P},1),aw=wv("floor"),ow=yd(function(S,P){return S*P},1),sw=wv("round"),uw=yd(function(S,P){return S-P},0);return Z.after=function(S,P){if(typeof P!="function")throw new jn(a);return S=Ht(S),function(){if(--S<1)return P.apply(this,arguments)}},Z.ary=Na,Z.assign=oi,Z.assignIn=um,Z.assignInWith=Nd,Z.assignWith=lm,Z.at=$_,Z.before=em,Z.bind=jv,Z.bindAll=co,Z.bindKey=Wc,Z.castArray=function(){if(!arguments.length)return[];var S=arguments[0];return Vt(S)?S:[S]},Z.chain=Io,Z.chunk=function(S,P,L){P=(L?bi(S,P,L):P===i)?1:An(Ht(P),0);var V=S==null?0:S.length;if(!V||P<1)return[];for(var K=0,oe=0,me=lt(td(V/P));K<V;)me[oe++]=fa(S,K,K+=P);return me},Z.compact=function(S){for(var P=-1,L=S==null?0:S.length,V=0,K=[];++P<L;){var oe=S[P];oe&&(K[V++]=oe)}return K},Z.concat=function(){var S=arguments.length;if(!S)return[];for(var P=lt(S-1),L=arguments[0],V=S;V--;)P[V-1]=arguments[V];return ka(Vt(L)?mi(L):[L],Rn(P,1))},Z.cond=function(S){var P=S==null?0:S.length,L=It();return S=P?$r(S,function(V){if(typeof V[1]!="function")throw new jn(a);return[L(V[0]),V[1]]}):[],Mt(function(V){for(var K=-1;++K<P;){var oe=S[K];if(ni(oe[0],this,V))return ni(oe[1],this,V)}})},Z.conforms=function(S){return function(P){var L=$n(P);return function(V){return kc(V,P,L)}}($i(S,1))},Z.constant=Lo,Z.countBy=Wy,Z.create=function(S,P){var L=ss(S);return P==null?L:Rc(L,P)},Z.curry=function S(P,L,V){var K=oo(P,8,i,i,i,i,i,L=V?i:L);return K.placeholder=S.placeholder,K},Z.curryRight=function S(P,L,V){var K=oo(P,16,i,i,i,i,i,L=V?i:L);return K.placeholder=S.placeholder,K},Z.debounce=au,Z.defaults=cm,Z.defaultsDeep=W_,Z.defer=tm,Z.delay=rm,Z.difference=Pv,Z.differenceBy=U_,Z.differenceWith=Rv,Z.drop=function(S,P,L){var V=S==null?0:S.length;return V?fa(S,(P=L||P===i?1:Ht(P))<0?0:P,V):[]},Z.dropRight=function(S,P,L){var V=S==null?0:S.length;return V?fa(S,0,(P=V-(P=L||P===i?1:Ht(P)))<0?0:P):[]},Z.dropRightWhile=function(S,P){return S&&S.length?da(S,It(P,3),!0,!0):[]},Z.dropWhile=function(S,P){return S&&S.length?da(S,It(P,3),!0):[]},Z.fill=function(S,P,L,V){var K=S==null?0:S.length;return K?(L&&typeof L!="number"&&bi(S,P,L)&&(L=0,V=K),function(oe,me,Ee,Ae){var ze=oe.length;for((Ee=Ht(Ee))<0&&(Ee=-Ee>ze?0:ze+Ee),(Ae=Ae===i||Ae>ze?ze:Ht(Ae))<0&&(Ae+=ze),Ae=Ee>Ae?0:_s(Ae);Ee<Ae;)oe[Ee++]=me;return oe}(S,P,L,V)):[]},Z.filter=function(S,P){return(Vt(S)?Ra:yy)(S,It(P,3))},Z.flatMap=function(S,P){return Rn(Rd(S,P),1)},Z.flatMapDeep=function(S,P){return Rn(Rd(S,P),c)},Z.flatMapDepth=function(S,P,L){return L=L===i?1:Ht(L),Rn(Rd(S,P),L)},Z.flatten=zy,Z.flattenDeep=function(S){return S!=null&&S.length?Rn(S,c):[]},Z.flattenDepth=function(S,P){return S!=null&&S.length?Rn(S,P=P===i?1:Ht(P)):[]},Z.flip=function(S){return oo(S,512)},Z.flow=K_,Z.flowRight=ym,Z.fromPairs=function(S){for(var P=-1,L=S==null?0:S.length,V={};++P<L;){var K=S[P];V[K[0]]=K[1]}return V},Z.functions=function(S){return S==null?[]:fd(S,$n(S))},Z.functionsIn=function(S){return S==null?[]:fd(S,si(S))},Z.groupBy=V_,Z.initial=function(S){return S!=null&&S.length?fa(S,0,-1):[]},Z.intersection=qy,Z.intersectionBy=z_,Z.intersectionWith=q_,Z.invert=Mo,Z.invertBy=wi,Z.invokeMap=Ky,Z.iteratee=Kv,Z.keyBy=Zy,Z.keys=$n,Z.keysIn=si,Z.map=Rd,Z.mapKeys=function(S,P){var L={};return P=It(P,3),to(S,function(V,K,oe){eo(L,P(V,K,oe),V)}),L},Z.mapValues=function(S,P){var L={};return P=It(P,3),to(S,function(V,K,oe){eo(L,K,P(V,K,oe))}),L},Z.matches=function(S){return _y($i(S,1))},Z.matchesProperty=function(S,P){return wy(S,$i(P,1))},Z.memoize=kd,Z.merge=H_,Z.mergeWith=fm,Z.method=Z_,Z.methodOf=Q_,Z.mixin=Zv,Z.negate=Hc,Z.nthArg=function(S){return S=Ht(S),Mt(function(P){return xy(P,S)})},Z.omit=Kc,Z.omitBy=function(S,P){return Vv(S,Hc(It(P)))},Z.once=function(S){return em(2,S)},Z.orderBy=function(S,P,L,V){return S==null?[]:(Vt(P)||(P=P==null?[]:[P]),Vt(L=V?i:L)||(L=L==null?[]:[L]),Dc(S,P,L))},Z.over=J_,Z.overArgs=fl,Z.overEvery=ew,Z.overSome=tw,Z.partial=ou,Z.partialRight=nm,Z.partition=Qy,Z.pick=dm,Z.pickBy=Vv,Z.property=mm,Z.propertyOf=function(S){return function(P){return S==null?i:eu(S,P)}},Z.pull=G_,Z.pullAll=Vc,Z.pullAllBy=function(S,P,L){return S&&S.length&&P&&P.length?hd(S,P,It(L,2)):S},Z.pullAllWith=function(S,P,L){return S&&S.length&&P&&P.length?hd(S,P,i,L):S},Z.pullAt=kv,Z.range=rw,Z.rangeRight=bm,Z.rearg=im,Z.reject=function(S,P){return(Vt(S)?Ra:yy)(S,Hc(It(P,3)))},Z.remove=function(S,P){var L=[];if(!S||!S.length)return L;var V=-1,K=[],oe=S.length;for(P=It(P,3);++V<oe;){var me=S[V];P(me,V,S)&&(L.push(me),K.push(V))}return ne(S,K),L},Z.rest=function(S,P){if(typeof S!="function")throw new jn(a);return Mt(S,P=P===i?P:Ht(P))},Z.reverse=Td,Z.sampleSize=function(S,P,L){return P=(L?bi(S,P,L):P===i)?1:Ht(P),(Vt(S)?sd:L_)(S,P)},Z.set=function(S,P,L){return S==null?S:Mc(S,P,L)},Z.setWith=function(S,P,L,V){return V=typeof V=="function"?V:i,S==null?S:Mc(S,P,L,V)},Z.shuffle=function(S){return(Vt(S)?I_:N_)(S)},Z.slice=function(S,P,L){var V=S==null?0:S.length;return V?(L&&typeof L!="number"&&bi(S,P,L)?(P=0,L=V):(P=P==null?0:Ht(P),L=L===i?V:Ht(L)),fa(S,P,L)):[]},Z.sortBy=Jy,Z.sortedUniq=function(S){return S&&S.length?ro(S):[]},Z.sortedUniqBy=function(S,P){return S&&S.length?ro(S,It(P,2)):[]},Z.split=function(S,P,L){return L&&typeof L!="number"&&bi(S,P,L)&&(P=L=i),(L=L===i?h:L>>>0)?(S=Cr(S))&&(typeof P=="string"||P!=null&&!Uv(P))&&!(P=Wi(P))&&is(S)?vs(Nn(S),0,L):S.split(P,L):[]},Z.spread=function(S,P){if(typeof S!="function")throw new jn(a);return P=P==null?0:An(Ht(P),0),Mt(function(L){var V=L[P],K=vs(L,0,P);return V&&ka(K,V),ni(S,this,K)})},Z.tail=function(S){var P=S==null?0:S.length;return P?fa(S,1,P):[]},Z.take=function(S,P,L){return S&&S.length?fa(S,0,(P=L||P===i?1:Ht(P))<0?0:P):[]},Z.takeRight=function(S,P,L){var V=S==null?0:S.length;return V?fa(S,(P=V-(P=L||P===i?1:Ht(P)))<0?0:P,V):[]},Z.takeRightWhile=function(S,P){return S&&S.length?da(S,It(P,3),!1,!0):[]},Z.takeWhile=function(S,P){return S&&S.length?da(S,It(P,3)):[]},Z.tap=function(S,P){return P(S),S},Z.throttle=function(S,P,L){var V=!0,K=!0;if(typeof S!="function")throw new jn(a);return en(L)&&(V="leading"in L?!!L.leading:V,K="trailing"in L?!!L.trailing:K),au(S,P,{leading:V,maxWait:P,trailing:K})},Z.thru=Pd,Z.toArray=Pt,Z.toPairs=hm,Z.toPairsIn=vm,Z.toPath=function(S){return Vt(S)?$r(S,so):_i(S)?[S]:mi(Tv(Cr(S)))},Z.toPlainObject=Ld,Z.transform=function(S,P,L){var V=Vt(S),K=V||ja(S)||bs(S);if(P=It(P,4),L==null){var oe=S&&S.constructor;L=K?V?new oe:[]:en(S)&&Do(oe)?ss(Wu(S)):{}}return(K?ii:to)(S,function(me,Ee,Ae){return P(L,me,Ee,Ae)}),L},Z.unary=function(S){return Na(S,1)},Z.union=Gy,Z.unionBy=Yi,Z.unionWith=ys,Z.uniq=function(S){return S&&S.length?hs(S):[]},Z.uniqBy=function(S,P){return S&&S.length?hs(S,It(P,2)):[]},Z.uniqWith=function(S,P){return P=typeof P=="function"?P:i,S&&S.length?hs(S,i,P):[]},Z.unset=function(S,P){return S==null||vv(S,P)},Z.unzip=$c,Z.unzipWith=Iv,Z.update=function(S,P,L){return S==null?S:Sy(S,P,yv(L))},Z.updateWith=function(S,P,L,V){return V=typeof V=="function"?V:i,S==null?S:Sy(S,P,yv(L),V)},Z.values=vl,Z.valuesIn=function(S){return S==null?[]:_c(S,si(S))},Z.without=Ad,Z.words=Qc,Z.wrap=function(S,P){return ou(yv(P),S)},Z.xor=Vy,Z.xorBy=Dv,Z.xorWith=$y,Z.zip=Mv,Z.zipObject=function(S,P){return Ty(S||[],P||[],Pc)},Z.zipObjectDeep=function(S,P){return Ty(S||[],P||[],Mc)},Z.zipWith=Lv,Z.entries=hm,Z.entriesIn=vm,Z.extend=um,Z.extendWith=Nd,Zv(Z,Z),Z.add=nw,Z.attempt=Xv,Z.camelCase=Y_,Z.capitalize=$v,Z.ceil=iw,Z.clamp=function(S,P,L){return L===i&&(L=P,P=i),L!==i&&(L=(L=ya(L))==L?L:0),P!==i&&(P=(P=ya(P))==P?P:0),ls(ya(S),P,L)},Z.clone=function(S){return $i(S,4)},Z.cloneDeep=function(S){return $i(S,5)},Z.cloneDeepWith=function(S,P){return $i(S,5,P=typeof P=="function"?P:i)},Z.cloneWith=function(S,P){return $i(S,4,P=typeof P=="function"?P:i)},Z.conformsTo=function(S,P){return P==null||kc(S,P,$n(P))},Z.deburr=Wv,Z.defaultTo=function(S,P){return S==null||S!=S?P:S},Z.divide=_m,Z.endsWith=function(S,P,L){S=Cr(S),P=Wi(P);var V=S.length,K=L=L===i?V:ls(Ht(L),0,V);return(L-=P.length)>=0&&S.slice(L,K)==P},Z.eq=va,Z.escape=function(S){return(S=Cr(S))&&se.test(S)?S.replace(Q,av):S},Z.escapeRegExp=function(S){return(S=Cr(S))&&$.test(S)?S.replace(G,"\\$&"):S},Z.every=function(S,P,L){var V=Vt(S)?hc:D_;return L&&bi(S,P,L)&&(P=i),V(S,It(P,3))},Z.find=Hy,Z.findIndex=Qt,Z.findKey=function(S,P){return pc(S,It(P,3),to)},Z.findLast=Nv,Z.findLastIndex=Uy,Z.findLastKey=function(S,P){return pc(S,It(P,3),cd)},Z.floor=aw,Z.forEach=Yy,Z.forEachRight=Xy,Z.forIn=function(S,P){return S==null?S:Qu(S,It(P,3),si)},Z.forInRight=function(S,P){return S==null?S:ld(S,It(P,3),si)},Z.forOwn=function(S,P){return S&&to(S,It(P,3))},Z.forOwnRight=function(S,P){return S&&cd(S,It(P,3))},Z.get=zv,Z.gt=Id,Z.gte=am,Z.has=function(S,P){return S!=null&&Ly(S,P,M_)},Z.hasIn=qv,Z.head=cl,Z.identity=Fi,Z.includes=function(S,P,L,V){S=ji(S)?S:vl(S),L=L&&!V?Ht(L):0;var K=S.length;return L<0&&(L=An(K+L,0)),dl(S)?L<=K&&S.indexOf(P,L)>-1:!!K&&ns(S,P,L)>-1},Z.indexOf=function(S,P,L){var V=S==null?0:S.length;if(!V)return-1;var K=L==null?0:Ht(L);return K<0&&(K=An(V+K,0)),ns(S,P,K)},Z.inRange=function(S,P,L){return P=ga(P),L===i?(L=P,P=0):L=ga(L),function(V,K,oe){return V>=on(K,oe)&&V<An(K,oe)}(S=ya(S),P,L)},Z.invoke=Gv,Z.isArguments=uo,Z.isArray=Vt,Z.isArrayBuffer=Dd,Z.isArrayLike=ji,Z.isArrayLikeObject=fn,Z.isBoolean=function(S){return S===!0||S===!1||ln(S)&&kr(S)==y},Z.isBuffer=ja,Z.isDate=om,Z.isElement=function(S){return ln(S)&&S.nodeType===1&&!Xc(S)},Z.isEmpty=function(S){if(S==null)return!0;if(ji(S)&&(Vt(S)||typeof S=="string"||typeof S.splice=="function"||ja(S)||bs(S)||uo(S)))return!S.length;var P=Xn(S);if(P==C||P==R)return!S.size;if(Uc(S))return!rl(S).length;for(var L in S)if(Nr.call(S,L))return!1;return!0},Z.isEqual=function(S,P){return ru(S,P)},Z.isEqualWith=function(S,P,L){var V=(L=typeof L=="function"?L:i)?L(S,P):i;return V===i?ru(S,P,i,L):!!V},Z.isError=Yc,Z.isFinite=function(S){return typeof S=="number"&&vy(S)},Z.isFunction=Do,Z.isInteger=Fv,Z.isLength=pa,Z.isMap=sm,Z.isMatch=function(S,P){return S===P||cs(S,P,xv(P))},Z.isMatchWith=function(S,P,L){return L=typeof L=="function"?L:i,cs(S,P,xv(P),L)},Z.isNaN=function(S){return Bv(S)&&S!=+S},Z.isNative=function(S){if(B_(S))throw new br("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return el(S)},Z.isNil=function(S){return S==null},Z.isNull=function(S){return S===null},Z.isNumber=Bv,Z.isObject=en,Z.isObjectLike=ln,Z.isPlainObject=Xc,Z.isRegExp=Uv,Z.isSafeInteger=function(S){return Fv(S)&&S>=-9007199254740991&&S<=f},Z.isSet=lo,Z.isString=dl,Z.isSymbol=_i,Z.isTypedArray=bs,Z.isUndefined=function(S){return S===i},Z.isWeakMap=function(S){return ln(S)&&Xn(S)==N},Z.isWeakSet=function(S){return ln(S)&&kr(S)=="[object WeakSet]"},Z.join=function(S,P){return S==null?"":P_.call(S,P)},Z.kebabCase=X_,Z.last=un,Z.lastIndexOf=function(S,P,L){var V=S==null?0:S.length;if(!V)return-1;var K=V;return L!==i&&(K=(K=Ht(L))<0?An(V+K,0):on(K,V-1)),P==P?function(oe,me,Ee){for(var Ae=Ee+1;Ae--;)if(oe[Ae]===me)return Ae;return Ae}(S,P,K):zu(S,Hf,K,!0)},Z.lowerCase=Hv,Z.lowerFirst=pm,Z.lt=Md,Z.lte=hl,Z.max=function(S){return S&&S.length?ud(S,Fi,fv):i},Z.maxBy=function(S,P){return S&&S.length?ud(S,It(P,2),fv):i},Z.mean=function(S){return qu(S,Fi)},Z.meanBy=function(S,P){return qu(S,It(P,2))},Z.min=function(S){return S&&S.length?ud(S,Fi,fs):i},Z.minBy=function(S,P){return S&&S.length?ud(S,It(P,2),fs):i},Z.stubArray=Fd,Z.stubFalse=Bd,Z.stubObject=function(){return{}},Z.stubString=function(){return""},Z.stubTrue=function(){return!0},Z.multiply=ow,Z.nth=function(S,P){return S&&S.length?xy(S,Ht(P)):i},Z.noConflict=function(){return an._===this&&(an._=ly),this},Z.noop=Qv,Z.now=Kn,Z.pad=function(S,P,L){S=Cr(S);var V=(P=Ht(P))?Ln(S):0;if(!P||V>=P)return S;var K=(P-V)/2;return jc(rd(K),L)+S+jc(td(K),L)},Z.padEnd=function(S,P,L){S=Cr(S);var V=(P=Ht(P))?Ln(S):0;return P&&V<P?S+jc(P-V,L):S},Z.padStart=function(S,P,L){S=Cr(S);var V=(P=Ht(P))?Ln(S):0;return P&&V<P?jc(P-V,L)+S:S},Z.parseInt=function(S,P,L){return L||P==null?P=0:P&&(P=+P),R_(Cr(S).replace(te,""),P||0)},Z.random=function(S,P,L){if(L&&typeof L!="boolean"&&bi(S,P,L)&&(P=L=i),L===i&&(typeof P=="boolean"?(L=P,P=i):typeof S=="boolean"&&(L=S,S=i)),S===i&&P===i?(S=0,P=1):(S=ga(S),P===i?(P=S,S=0):P=ga(P)),S>P){var V=S;S=P,P=V}if(L||S%1||P%1){var K=py();return on(S+K*(P-S+es("1e-"+((K+"").length-1))),P)}return ds(S,P)},Z.reduce=function(S,P,L){var V=Vt(S)?Uu:Yf,K=arguments.length<3;return V(S,It(P,4),L,K,Li)},Z.reduceRight=function(S,P,L){var V=Vt(S)?tv:Yf,K=arguments.length<3;return V(S,It(P,4),L,K,Ic)},Z.repeat=function(S,P,L){return P=(L?bi(S,P,L):P===i)?1:Ht(P),il(Cr(S),P)},Z.replace=function(){var S=arguments,P=Cr(S[0]);return S.length<3?P:P.replace(S[1],S[2])},Z.result=function(S,P,L){var V=-1,K=(P=Ni(P,S)).length;for(K||(K=1,S=i);++V<K;){var oe=S==null?i:S[so(P[V])];oe===i&&(V=K,oe=L),S=Do(oe)?oe.call(S):oe}return S},Z.round=sw,Z.runInContext=ke,Z.sample=function(S){return(Vt(S)?uv:fr)(S)},Z.size=function(S){if(S==null)return 0;if(ji(S))return dl(S)?Ln(S):S.length;var P=Xn(S);return P==C||P==R?S.size:rl(S).length},Z.snakeCase=Zc,Z.some=function(S,P,L){var V=Vt(S)?vc:j_;return L&&bi(S,P,L)&&(P=i),V(S,It(P,3))},Z.sortedIndex=function(S,P){return vd(S,P)},Z.sortedIndexBy=function(S,P,L){return hv(S,P,It(L,2))},Z.sortedIndexOf=function(S,P){var L=S==null?0:S.length;if(L){var V=vd(S,P);if(V<L&&va(S[V],P))return V}return-1},Z.sortedLastIndex=function(S,P){return vd(S,P,!0)},Z.sortedLastIndexBy=function(S,P,L){return hv(S,P,It(L,2),!0)},Z.sortedLastIndexOf=function(S,P){if(S!=null&&S.length){var L=vd(S,P,!0)-1;if(va(S[L],P))return L}return-1},Z.startCase=Yv,Z.startsWith=function(S,P,L){return S=Cr(S),L=L==null?0:ls(Ht(L),0,S.length),P=Wi(P),S.slice(L,L+P.length)==P},Z.subtract=uw,Z.sum=function(S){return S&&S.length?mc(S,Fi):0},Z.sumBy=function(S,P){return S&&S.length?mc(S,It(P,2)):0},Z.template=function(S,P,L){var V=Z.templateSettings;L&&bi(S,P,L)&&(P=i),S=Cr(S),P=Nd({},P,V,Gn);var K,oe,me=Nd({},P.imports,V.imports,Gn),Ee=$n(me),Ae=_c(me,Ee),ze=0,qe=P.interpolate||Me,Xe="__p += '",dt=xc((P.escape||Me).source+"|"+qe.source+"|"+(qe===Ce?et:Me).source+"|"+(P.evaluate||Me).source+"|$","g"),pt="//# sourceURL="+(Nr.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ua+"]")+`
`;S.replace(dt,function(Je,Ct,st,$t,qt,Sr){return st||(st=$t),Xe+=S.slice(ze,Sr).replace(it,Zf),Ct&&(K=!0,Xe+=`' +
__e(`+Ct+`) +
'`),qt&&(oe=!0,Xe+=`';
`+qt+`;
__p += '`),st&&(Xe+=`' +
((__t = (`+st+`)) == null ? '' : __t) +
'`),ze=Sr+Je.length,Je}),Xe+=`';
`;var Rt=Nr.call(P,"variable")&&P.variable;if(Rt){if(ot.test(Rt))throw new br("Invalid `variable` option passed into `_.template`")}else Xe=`with (obj) {
`+Xe+`
}
`;Xe=(oe?Xe.replace(ge,""):Xe).replace(ve,"$1").replace(de,"$1;"),Xe="function("+(Rt||"obj")+`) {
`+(Rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(oe?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Xe+`return __p
}`;var $e=Xv(function(){return Tn(Ee,pt+"return "+Xe).apply(i,Ae)});if($e.source=Xe,Yc($e))throw $e;return $e},Z.times=function(S,P){if((S=Ht(S))<1||S>f)return[];var L=h,V=on(S,h);P=It(P),S-=h;for(var K=bc(V,P);++L<S;)P(L);return K},Z.toFinite=ga,Z.toInteger=Ht,Z.toLength=_s,Z.toLower=function(S){return Cr(S).toLowerCase()},Z.toNumber=ya,Z.toSafeInteger=function(S){return S?ls(Ht(S),-9007199254740991,f):S===0?S:0},Z.toString=Cr,Z.toUpper=function(S){return Cr(S).toUpperCase()},Z.trim=function(S,P,L){if((S=Cr(S))&&(L||P===i))return Br(S);if(!S||!(P=Wi(P)))return S;var V=Nn(S),K=Nn(P);return vs(V,Xf(V,K),Kf(V,K)+1).join("")},Z.trimEnd=function(S,P,L){if((S=Cr(S))&&(L||P===i))return S.slice(0,Za(S)+1);if(!S||!(P=Wi(P)))return S;var V=Nn(S);return vs(V,0,Kf(V,Nn(P))+1).join("")},Z.trimStart=function(S,P,L){if((S=Cr(S))&&(L||P===i))return S.replace(te,"");if(!S||!(P=Wi(P)))return S;var V=Nn(S);return vs(V,Xf(V,Nn(P))).join("")},Z.truncate=function(S,P){var L=30,V="...";if(en(P)){var K="separator"in P?P.separator:K;L="length"in P?Ht(P.length):L,V="omission"in P?Wi(P.omission):V}var oe=(S=Cr(S)).length;if(is(S)){var me=Nn(S);oe=me.length}if(L>=oe)return S;var Ee=L-Ln(V);if(Ee<1)return V;var Ae=me?vs(me,0,Ee).join(""):S.slice(0,Ee);if(K===i)return Ae+V;if(me&&(Ee+=Ae.length-Ee),Uv(K)){if(S.slice(Ee).search(K)){var ze,qe=Ae;for(K.global||(K=xc(K.source,Cr(Qe.exec(K))+"g")),K.lastIndex=0;ze=K.exec(qe);)var Xe=ze.index;Ae=Ae.slice(0,Xe===i?Ee:Xe)}}else if(S.indexOf(Wi(K),Ee)!=Ee){var dt=Ae.lastIndexOf(K);dt>-1&&(Ae=Ae.slice(0,dt))}return Ae+V},Z.unescape=function(S){return(S=Cr(S))&&re.test(S)?S.replace(ie,la):S},Z.uniqueId=function(S){var P=++uy;return Cr(S)+P},Z.upperCase=gm,Z.upperFirst=jd,Z.each=Yy,Z.eachRight=Xy,Z.first=cl,Zv(Z,(Jv={},to(Z,function(S,P){Nr.call(Z.prototype,P)||(Jv[P]=S)}),Jv),{chain:!1}),Z.VERSION="4.17.21",ii(["bind","bindKey","curry","curryRight","partial","partialRight"],function(S){Z[S].placeholder=Z}),ii(["drop","take"],function(S,P){Jt.prototype[S]=function(L){L=L===i?1:An(Ht(L),0);var V=this.__filtered__&&!P?new Jt(this):this.clone();return V.__filtered__?V.__takeCount__=on(L,V.__takeCount__):V.__views__.push({size:on(L,h),type:S+(V.__dir__<0?"Right":"")}),V},Jt.prototype[S+"Right"]=function(L){return this.reverse()[S](L).reverse()}}),ii(["filter","map","takeWhile"],function(S,P){var L=P+1,V=L==1||L==3;Jt.prototype[S]=function(K){var oe=this.clone();return oe.__iteratees__.push({iteratee:It(K,3),type:L}),oe.__filtered__=oe.__filtered__||V,oe}}),ii(["head","last"],function(S,P){var L="take"+(P?"Right":"");Jt.prototype[S]=function(){return this[L](1).value()[0]}}),ii(["initial","tail"],function(S,P){var L="drop"+(P?"":"Right");Jt.prototype[S]=function(){return this.__filtered__?new Jt(this):this[L](1)}}),Jt.prototype.compact=function(){return this.filter(Fi)},Jt.prototype.find=function(S){return this.filter(S).head()},Jt.prototype.findLast=function(S){return this.reverse().find(S)},Jt.prototype.invokeMap=Mt(function(S,P){return typeof S=="function"?new Jt(this):this.map(function(L){return tu(L,S,P)})}),Jt.prototype.reject=function(S){return this.filter(Hc(It(S)))},Jt.prototype.slice=function(S,P){S=Ht(S);var L=this;return L.__filtered__&&(S>0||P<0)?new Jt(L):(S<0?L=L.takeRight(-S):S&&(L=L.drop(S)),P!==i&&(L=(P=Ht(P))<0?L.dropRight(-P):L.take(P-S)),L)},Jt.prototype.takeRightWhile=function(S){return this.reverse().takeWhile(S).reverse()},Jt.prototype.toArray=function(){return this.take(h)},to(Jt.prototype,function(S,P){var L=/^(?:filter|find|map|reject)|While$/.test(P),V=/^(?:head|last)$/.test(P),K=Z[V?"take"+(P=="last"?"Right":""):P],oe=V||/^find/.test(P);K&&(Z.prototype[P]=function(){var me=this.__wrapped__,Ee=V?[1]:arguments,Ae=me instanceof Jt,ze=Ee[0],qe=Ae||Vt(me),Xe=function(Ct){var st=K.apply(Z,ka([Ct],Ee));return V&&dt?st[0]:st};qe&&L&&typeof ze=="function"&&ze.length!=1&&(Ae=qe=!1);var dt=this.__chain__,pt=!!this.__actions__.length,Rt=oe&&!dt,$e=Ae&&!pt;if(!oe&&qe){me=$e?me:new Jt(this);var Je=S.apply(me,Ee);return Je.__actions__.push({func:Pd,args:[Xe],thisArg:i}),new sn(Je,dt)}return Rt&&$e?S.apply(this,Ee):(Je=this.thru(Xe),Rt?V?Je.value()[0]:Je.value():Je)})}),ii(["pop","push","shift","sort","splice","unshift"],function(S){var P=Vu[S],L=/^(?:push|sort|unshift)$/.test(S)?"tap":"thru",V=/^(?:pop|shift)$/.test(S);Z.prototype[S]=function(){var K=arguments;if(V&&!this.__chain__){var oe=this.value();return P.apply(Vt(oe)?oe:[],K)}return this[L](function(me){return P.apply(Vt(me)?me:[],K)})}}),to(Jt.prototype,function(S,P){var L=Z[P];if(L){var V=L.name+"";Nr.call(Xu,V)||(Xu[V]=[]),Xu[V].push({name:P,func:L})}}),Xu[ao(i,2).name]=[{name:"wrapper",func:i}],Jt.prototype.clone=function(){var S=new Jt(this.__wrapped__);return S.__actions__=mi(this.__actions__),S.__dir__=this.__dir__,S.__filtered__=this.__filtered__,S.__iteratees__=mi(this.__iteratees__),S.__takeCount__=this.__takeCount__,S.__views__=mi(this.__views__),S},Jt.prototype.reverse=function(){if(this.__filtered__){var S=new Jt(this);S.__dir__=-1,S.__filtered__=!0}else(S=this.clone()).__dir__*=-1;return S},Jt.prototype.value=function(){var S=this.__wrapped__.value(),P=this.__dir__,L=Vt(S),V=P<0,K=L?S.length:0,oe=function(Sr,wt,Lt){for(var Fn=-1,xn=Lt.length;++Fn<xn;){var xi=Lt[Fn],Yr=xi.size;switch(xi.type){case"drop":Sr+=Yr;break;case"dropRight":wt-=Yr;break;case"take":wt=on(wt,Sr+Yr);break;case"takeRight":Sr=An(Sr,wt-Yr)}}return{start:Sr,end:wt}}(0,K,this.__views__),me=oe.start,Ee=oe.end,Ae=Ee-me,ze=V?Ee:me-1,qe=this.__iteratees__,Xe=qe.length,dt=0,pt=on(Ae,this.__takeCount__);if(!L||!V&&K==Ae&&pt==Ae)return Cy(S,this.__actions__);var Rt=[];e:for(;Ae--&&dt<pt;){for(var $e=-1,Je=S[ze+=P];++$e<Xe;){var Ct=qe[$e],st=Ct.iteratee,$t=Ct.type,qt=st(Je);if($t==2)Je=qt;else if(!qt){if($t==1)continue e;break e}}Rt[dt++]=Je}return Rt},Z.prototype.at=ms,Z.prototype.chain=function(){return Io(this)},Z.prototype.commit=function(){return new sn(this.value(),this.__chain__)},Z.prototype.next=function(){this.__values__===i&&(this.__values__=Pt(this.value()));var S=this.__index__>=this.__values__.length;return{done:S,value:S?i:this.__values__[this.__index__++]}},Z.prototype.plant=function(S){for(var P,L=this;L instanceof od;){var V=Av(L);V.__index__=0,V.__values__=i,P?K.__wrapped__=V:P=V;var K=V;L=L.__wrapped__}return K.__wrapped__=S,P},Z.prototype.reverse=function(){var S=this.__wrapped__;if(S instanceof Jt){var P=S;return this.__actions__.length&&(P=new Jt(this)),(P=P.reverse()).__actions__.push({func:Pd,args:[Td],thisArg:i}),new sn(P,this.__chain__)}return this.thru(Td)},Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function(){return Cy(this.__wrapped__,this.__actions__)},Z.prototype.first=Z.prototype.head,Zs&&(Z.prototype[Zs]=function(){return this}),Z}();an._=Vi,(n=(function(){return Vi}).call(e,t,e,r))===i||(r.exports=n)}).call(this)},5267:function(r,e,t){var n=this&&this.__extends||function(){var u=function(l,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(f[h]=d[h])},u(l,c)};return function(l,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");function f(){this.constructor=l}u(l,c),l.prototype=c===null?Object.create(c):(f.prototype=c.prototype,new f)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAction=void 0;var i=t(4671),a=t(5649),o=t(7479),s=function(u){function l(c,f){var d=u.call(this,c,f)||this;return d.scheduler=c,d.work=f,d.pending=!1,d}return n(l,u),l.prototype.schedule=function(c,f){var d;if(f===void 0&&(f=0),this.closed)return this;this.state=c;var h=this.id,v=this.scheduler;return h!=null&&(this.id=this.recycleAsyncId(v,h,f)),this.pending=!0,this.delay=f,this.id=(d=this.id)!==null&&d!==void 0?d:this.requestAsyncId(v,this.id,f),this},l.prototype.requestAsyncId=function(c,f,d){return d===void 0&&(d=0),a.intervalProvider.setInterval(c.flush.bind(c,this),d)},l.prototype.recycleAsyncId=function(c,f,d){if(d===void 0&&(d=0),d!=null&&this.delay===d&&this.pending===!1)return f;f!=null&&a.intervalProvider.clearInterval(f)},l.prototype.execute=function(c,f){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var d=this._execute(c,f);if(d)return d;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},l.prototype._execute=function(c,f){var d,h=!1;try{this.work(c)}catch(v){h=!0,d=v||new Error("Scheduled action threw falsy error")}if(h)return this.unsubscribe(),d},l.prototype.unsubscribe=function(){if(!this.closed){var c=this.id,f=this.scheduler,d=f.actions;this.work=this.state=this.scheduler=null,this.pending=!1,o.arrRemove(d,this),c!=null&&(this.id=this.recycleAsyncId(f,c,null)),this.delay=null,u.prototype.unsubscribe.call(this)}},l}(i.Action);e.AsyncAction=s},5319:function(r,e,t){var n=this&&this.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}(),i=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var a=i(t(1048)),o=function(s){function u(l){var c=this,f=function(d){return d instanceof a.default.Buffer?d:typeof d=="number"&&typeof a.default.Buffer.alloc=="function"?a.default.Buffer.alloc(d):new a.default.Buffer(d)}(l);return(c=s.call(this,f.length)||this)._buffer=f,c}return n(u,s),u.prototype.getUInt8=function(l){return this._buffer.readUInt8(l)},u.prototype.getInt8=function(l){return this._buffer.readInt8(l)},u.prototype.getFloat64=function(l){return this._buffer.readDoubleBE(l)},u.prototype.getVarInt=function(l){for(var c=0,f=this._buffer.readInt8(l+c),d=f%128;f/128>=1;)c+=1,d+=(f=this._buffer.readInt8(l+c))%128;return{length:c+1,value:d}},u.prototype.putUInt8=function(l,c){this._buffer.writeUInt8(c,l)},u.prototype.putInt8=function(l,c){this._buffer.writeInt8(c,l)},u.prototype.putFloat64=function(l,c){this._buffer.writeDoubleBE(c,l)},u.prototype.putBytes=function(l,c){if(c instanceof u){var f=Math.min(c.length-c.position,this.length-l);c._buffer.copy(this._buffer,l,c.position,c.position+f),c.position+=f}else s.prototype.putBytes.call(this,l,c)},u.prototype.getSlice=function(l,c){return new u(this._buffer.slice(l,l+c))},u}(i(t(7174)).default);e.default=o,e.alloc=function(s){return new o(s)}},5337:function(r,e,t){var n=this&&this.__read||function(v,p){var g=typeof Symbol=="function"&&v[Symbol.iterator];if(!g)return v;var y,b,m=g.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=m.next()).done;)_.push(y.value)}catch(x){b={error:x}}finally{try{y&&!y.done&&(g=m.return)&&g.call(m)}finally{if(b)throw b.error}}return _};Object.defineProperty(e,"__esModule",{value:!0}),e.fromEvent=void 0;var i=t(9445),a=t(4662),o=t(983),s=t(8046),u=t(1018),l=t(1251),c=["addListener","removeListener"],f=["addEventListener","removeEventListener"],d=["on","off"];function h(v,p){return function(g){return function(y){return v[g](p,y)}}}e.fromEvent=function v(p,g,y,b){if(u.isFunction(y)&&(b=y,y=void 0),b)return v(p,g,y).pipe(l.mapOneOrManyArgs(b));var m=n(function(C){return u.isFunction(C.addEventListener)&&u.isFunction(C.removeEventListener)}(p)?f.map(function(C){return function(w){return p[C](g,w,y)}}):function(C){return u.isFunction(C.addListener)&&u.isFunction(C.removeListener)}(p)?c.map(h(p,g)):function(C){return u.isFunction(C.on)&&u.isFunction(C.off)}(p)?d.map(h(p,g)):[],2),_=m[0],x=m[1];if(!_&&s.isArrayLike(p))return o.mergeMap(function(C){return v(C,g,y)})(i.innerFrom(p));if(!_)throw new TypeError("Invalid event target");return new a.Observable(function(C){var w=function(){for(var O=[],A=0;A<arguments.length;A++)O[A]=arguments[A];return C.next(1<O.length?O:O[0])};return _(w),function(){return x(w)}})}},5348:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(7521));e.default=n({},a.default)},5361:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var n=t(7452),i=t(6781),a=t(7665),o=t(9305),s=o.error.PROTOCOL_ERROR,u=function(){function c(f){this._ch=f,this._byteArraysSupported=!0}return c.prototype.packable=function(f,d){var h,v=this;d===void 0&&(d=i.functional.identity);try{f=d(f)}catch(y){return function(){throw y}}if(f===null)return function(){return v._ch.writeUInt8(192)};if(f===!0)return function(){return v._ch.writeUInt8(195)};if(f===!1)return function(){return v._ch.writeUInt8(194)};if(typeof f=="number")return function(){return v.packFloat(f)};if(typeof f=="string")return function(){return v.packString(f)};if(typeof f=="bigint")return function(){return v.packInteger((0,o.int)(f))};if((0,o.isInt)(f))return function(){return v.packInteger(f)};if(f instanceof Int8Array)return function(){return v.packBytes(f)};if(f instanceof Array)return function(){v.packListHeader(f.length);for(var y=0;y<f.length;y++)v.packable(f[y]===void 0?null:f[y],d)()};if((h=f)!=null&&typeof h[Symbol.iterator]=="function")return this.packableIterable(f,d);if(f instanceof a.Structure){for(var p=[],g=0;g<f.fields.length;g++)p[g]=this.packable(f.fields[g],d);return function(){return v.packStruct(f.signature,p)}}return typeof f=="object"?function(){for(var y=Object.keys(f),b=0,m=0;m<y.length;m++)f[y[m]]!==void 0&&b++;for(v.packMapHeader(b),m=0;m<y.length;m++){var _=y[m];f[_]!==void 0&&(v.packString(_),v.packable(f[_],d)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(f))},c.prototype.packableIterable=function(f,d){try{var h=Array.from(f);return this.packable(h,d)}catch(v){throw(0,o.newError)("Cannot pack given iterable, ".concat(v.message,": ").concat(f))}},c.prototype.packStruct=function(f,d){d=d||[],this.packStructHeader(d.length,f);for(var h=0;h<d.length;h++)d[h]()},c.prototype.packInteger=function(f){var d=f.high,h=f.low;f.greaterThanOrEqual(-16)&&f.lessThan(128)?this._ch.writeInt8(h):f.greaterThanOrEqual(-128)&&f.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(h)):f.greaterThanOrEqual(-32768)&&f.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(h)):f.greaterThanOrEqual(-2147483648)&&f.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(h)):(this._ch.writeUInt8(203),this._ch.writeInt32(d),this._ch.writeInt32(h))},c.prototype.packFloat=function(f){this._ch.writeUInt8(193),this._ch.writeFloat64(f)},c.prototype.packString=function(f){var d=n.utf8.encode(f),h=d.length;if(h<16)this._ch.writeUInt8(128|h),this._ch.writeBytes(d);else if(h<256)this._ch.writeUInt8(208),this._ch.writeUInt8(h),this._ch.writeBytes(d);else if(h<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(h/256|0),this._ch.writeUInt8(h%256),this._ch.writeBytes(d);else{if(!(h<4294967296))throw(0,o.newError)("UTF-8 strings of size "+h+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((h/16777216|0)%256),this._ch.writeUInt8((h/65536|0)%256),this._ch.writeUInt8((h/256|0)%256),this._ch.writeUInt8(h%256),this._ch.writeBytes(d)}},c.prototype.packListHeader=function(f){if(f<16)this._ch.writeUInt8(144|f);else if(f<256)this._ch.writeUInt8(212),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,o.newError)("Lists of size "+f+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packBytes=function(f){if(!this._byteArraysSupported)throw(0,o.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(f.length);for(var d=0;d<f.length;d++)this._ch.writeInt8(f[d])},c.prototype.packBytesHeader=function(f){if(f<256)this._ch.writeUInt8(204),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,o.newError)("Byte arrays of size "+f+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packMapHeader=function(f){if(f<16)this._ch.writeUInt8(160|f);else if(f<256)this._ch.writeUInt8(216),this._ch.writeUInt8(f);else if(f<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(f/256|0),this._ch.writeUInt8(f%256);else{if(!(f<4294967296))throw(0,o.newError)("Maps of size "+f+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((f/16777216|0)%256),this._ch.writeUInt8((f/65536|0)%256),this._ch.writeUInt8((f/256|0)%256),this._ch.writeUInt8(f%256)}},c.prototype.packStructHeader=function(f,d){if(f<16)this._ch.writeUInt8(176|f),this._ch.writeUInt8(d);else if(f<256)this._ch.writeUInt8(220),this._ch.writeUInt8(f),this._ch.writeUInt8(d);else{if(!(f<65536))throw(0,o.newError)("Structures of size "+f+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(f/256|0),this._ch.writeUInt8(f%256)}},c.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},c.prototype._nonPackableValue=function(f){return function(){throw(0,o.newError)(f,s)}},c}();e.Packer=u;var l=function(){function c(f,d){f===void 0&&(f=!1),d===void 0&&(d=!1),this._disableLosslessIntegers=f,this._useBigInt=d}return c.prototype.unpack=function(f,d){d===void 0&&(d=i.functional.identity);var h=f.readUInt8(),v=240&h,p=15&h;if(h===192)return null;var g=this._unpackBoolean(h);if(g!==null)return g;var y=this._unpackNumberOrInteger(h,f);if(y!==null){if((0,o.isInt)(y)){if(this._useBigInt)return y.toBigInt();if(this._disableLosslessIntegers)return y.toNumberOrInfinity()}return y}var b=this._unpackString(h,v,p,f);if(b!==null)return b;var m=this._unpackList(h,v,p,f,d);if(m!==null)return m;var _=this._unpackByteArray(h,f);if(_!==null)return _;var x=this._unpackMap(h,v,p,f,d);if(x!==null)return x;var C=this._unpackStruct(h,v,p,f,d);if(C!==null)return C;throw(0,o.newError)("Unknown packed value with marker "+h.toString(16))},c.prototype.unpackInteger=function(f){var d=f.readUInt8(),h=this._unpackInteger(d,f);if(h==null)throw(0,o.newError)("Unable to unpack integer value with marker "+d.toString(16));return h},c.prototype._unpackBoolean=function(f){return f===195||f!==194&&null},c.prototype._unpackNumberOrInteger=function(f,d){return f===193?d.readFloat64():this._unpackInteger(f,d)},c.prototype._unpackInteger=function(f,d){if(f>=0&&f<128)return(0,o.int)(f);if(f>=240&&f<256)return(0,o.int)(f-256);if(f===200)return(0,o.int)(d.readInt8());if(f===201)return(0,o.int)(d.readInt16());if(f===202){var h=d.readInt32();return(0,o.int)(h)}if(f===203){var v=d.readInt32(),p=d.readInt32();return new o.Integer(p,v)}return null},c.prototype._unpackString=function(f,d,h,v){return d===128?n.utf8.decode(v,h):f===208?n.utf8.decode(v,v.readUInt8()):f===209?n.utf8.decode(v,v.readUInt16()):f===210?n.utf8.decode(v,v.readUInt32()):null},c.prototype._unpackList=function(f,d,h,v,p){return d===144?this._unpackListWithSize(h,v,p):f===212?this._unpackListWithSize(v.readUInt8(),v,p):f===213?this._unpackListWithSize(v.readUInt16(),v,p):f===214?this._unpackListWithSize(v.readUInt32(),v,p):null},c.prototype._unpackListWithSize=function(f,d,h){for(var v=[],p=0;p<f;p++)v.push(this.unpack(d,h));return v},c.prototype._unpackByteArray=function(f,d){return f===204?this._unpackByteArrayWithSize(d.readUInt8(),d):f===205?this._unpackByteArrayWithSize(d.readUInt16(),d):f===206?this._unpackByteArrayWithSize(d.readUInt32(),d):null},c.prototype._unpackByteArrayWithSize=function(f,d){for(var h=new Int8Array(f),v=0;v<f;v++)h[v]=d.readInt8();return h},c.prototype._unpackMap=function(f,d,h,v,p){return d===160?this._unpackMapWithSize(h,v,p):f===216?this._unpackMapWithSize(v.readUInt8(),v,p):f===217?this._unpackMapWithSize(v.readUInt16(),v,p):f===218?this._unpackMapWithSize(v.readUInt32(),v,p):null},c.prototype._unpackMapWithSize=function(f,d,h){for(var v={},p=0;p<f;p++)v[this.unpack(d,h)]=this.unpack(d,h);return v},c.prototype._unpackStruct=function(f,d,h,v,p){return d===176?this._unpackStructWithSize(h,v,p):f===220?this._unpackStructWithSize(v.readUInt8(),v,p):f===221?this._unpackStructWithSize(v.readUInt16(),v,p):null},c.prototype._unpackStructWithSize=function(f,d,h){for(var v=d.readUInt8(),p=new a.Structure(v,[]),g=0;g<f;g++)p.fields.push(this.unpack(d,h));return h(p)},c}();e.Unpacker=l},5365:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=void 0;var n=t(7843),i=t(3111),a=t(1342),o=t(9445);e.distinct=function(s,u){return n.operate(function(l,c){var f=new Set;l.subscribe(i.createOperatorSubscriber(c,function(d){var h=s?s(d):d;f.has(h)||(f.add(h),c.next(d))})),u&&o.innerFrom(u).subscribe(i.createOperatorSubscriber(c,function(){return f.clear()},a.noop))})}},5382:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.single=void 0;var n=t(2823),i=t(1505),a=t(1759),o=t(7843),s=t(3111);e.single=function(u){return o.operate(function(l,c){var f,d=!1,h=!1,v=0;l.subscribe(s.createOperatorSubscriber(c,function(p){h=!0,u&&!u(p,v++,l)||(d&&c.error(new i.SequenceError("Too many matching values")),d=!0,f=p)},function(){d?(c.next(f),c.complete()):c.error(h?new a.NotFoundError("No matching values"):new n.EmptyError)}))})}},5442:function(r,e,t){var n=this&&this.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var v,p,g=h.call(f),y=[];try{for(;(d===void 0||d-- >0)&&!(v=g.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,d){for(var h=0,v=d.length,p=f.length;h<v;h++,p++)f[p]=d[h];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=void 0;var a=t(7843),o=t(3111),s=t(9445),u=t(6640),l=t(1342),c=t(1107);e.withLatestFrom=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];var h=c.popResultSelector(f);return a.operate(function(v,p){for(var g=f.length,y=new Array(g),b=f.map(function(){return!1}),m=!1,_=function(C){s.innerFrom(f[C]).subscribe(o.createOperatorSubscriber(p,function(w){y[C]=w,m||b[C]||(b[C]=!0,(m=b.every(u.identity))&&(b=null))},l.noop))},x=0;x<g;x++)_(x);v.subscribe(o.createOperatorSubscriber(p,function(C){if(m){var w=i([C],n(y));p.next(h?h.apply(void 0,i([],n(w))):w)}}))})}},5459:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(R,I,M,N){N===void 0&&(N=M);var F=Object.getOwnPropertyDescriptor(I,M);F&&!("get"in F?!I.__esModule:F.writable||F.configurable)||(F={enumerable:!0,get:function(){return I[M]}}),Object.defineProperty(R,N,F)}:function(R,I,M,N){N===void 0&&(N=M),R[N]=I[M]}),i=this&&this.__setModuleDefault||(Object.create?function(R,I){Object.defineProperty(R,"default",{enumerable:!0,value:I})}:function(R,I){R.default=I}),a=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var I={};if(R!=null)for(var M in R)M!=="default"&&Object.prototype.hasOwnProperty.call(R,M)&&n(I,R,M);return i(I,R),I},o=this&&this.__read||function(R,I){var M=typeof Symbol=="function"&&R[Symbol.iterator];if(!M)return R;var N,F,z=M.call(R),B=[];try{for(;(I===void 0||I-- >0)&&!(N=z.next()).done;)B.push(N.value)}catch(U){F={error:U}}finally{try{N&&!N.done&&(M=z.return)&&M.call(z)}finally{if(F)throw F.error}}return B};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var s=a(t(5022)),u=t(6587),l=t(9691),c=a(t(3371)),f={value:!0,enumerable:!1,configurable:!1,writable:!1},d="__isDuration__",h="__isLocalTime__",v="__isTime__",p="__isDate__",g="__isLocalDateTime__",y="__isDateTime__",b=function(){function R(I,M,N,F){this.months=(0,u.assertNumberOrInteger)(I,"Months"),this.days=(0,u.assertNumberOrInteger)(M,"Days"),(0,u.assertNumberOrInteger)(N,"Seconds"),(0,u.assertNumberOrInteger)(F,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(N,F),this.nanoseconds=s.normalizeNanosecondsForDuration(F),Object.freeze(this)}return R.prototype.toString=function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},R}();e.Duration=b,Object.defineProperty(b.prototype,d,f),e.isDuration=function(R){return O(R,d)};var m=function(){function R(I,M,N,F){this.hour=s.assertValidHour(I),this.minute=s.assertValidMinute(M),this.second=s.assertValidSecond(N),this.nanosecond=s.assertValidNanosecond(F),Object.freeze(this)}return R.fromStandardDate=function(I,M){k(I,M);var N=s.totalNanoseconds(I,M);return new R(I.getHours(),I.getMinutes(),I.getSeconds(),N instanceof c.default?N.toInt():typeof N=="bigint"?(0,c.int)(N).toInt():N)},R.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},R}();e.LocalTime=m,Object.defineProperty(m.prototype,h,f),e.isLocalTime=function(R){return O(R,h)};var _=function(){function R(I,M,N,F,z){this.hour=s.assertValidHour(I),this.minute=s.assertValidMinute(M),this.second=s.assertValidSecond(N),this.nanosecond=s.assertValidNanosecond(F),this.timeZoneOffsetSeconds=(0,u.assertNumberOrInteger)(z,"Time zone offset in seconds"),Object.freeze(this)}return R.fromStandardDate=function(I,M){return k(I,M),new R(I.getHours(),I.getMinutes(),I.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(I,M)),s.timeZoneOffsetInSeconds(I))},R.prototype.toString=function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},R}();e.Time=_,Object.defineProperty(_.prototype,v,f),e.isTime=function(R){return O(R,v)};var x=function(){function R(I,M,N){this.year=s.assertValidYear(I),this.month=s.assertValidMonth(M),this.day=s.assertValidDay(N),Object.freeze(this)}return R.fromStandardDate=function(I){return k(I),new R(I.getFullYear(),I.getMonth()+1,I.getDate())},R.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},R.prototype.toString=function(){return s.dateToIsoString(this.year,this.month,this.day)},R}();e.Date=x,Object.defineProperty(x.prototype,p,f),e.isDate=function(R){return O(R,p)};var C=function(){function R(I,M,N,F,z,B,U){this.year=s.assertValidYear(I),this.month=s.assertValidMonth(M),this.day=s.assertValidDay(N),this.hour=s.assertValidHour(F),this.minute=s.assertValidMinute(z),this.second=s.assertValidSecond(B),this.nanosecond=s.assertValidNanosecond(U),Object.freeze(this)}return R.fromStandardDate=function(I,M){return k(I,M),new R(I.getFullYear(),I.getMonth()+1,I.getDate(),I.getHours(),I.getMinutes(),I.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(I,M)))},R.prototype.toStandardDate=function(){return s.isoStringToStandardDate(this.toString())},R.prototype.toString=function(){return A(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},R}();e.LocalDateTime=C,Object.defineProperty(C.prototype,g,f),e.isLocalDateTime=function(R){return O(R,g)};var w=function(){function R(I,M,N,F,z,B,U,W,Y){this.year=s.assertValidYear(I),this.month=s.assertValidMonth(M),this.day=s.assertValidDay(N),this.hour=s.assertValidHour(F),this.minute=s.assertValidMinute(z),this.second=s.assertValidSecond(B),this.nanosecond=s.assertValidNanosecond(U);var H=o(function(fe,ue){var ge=fe!=null,ve=ue!=null&&ue!=="";if(!ge&&!ve)throw(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(fe," and id: ").concat(ue));var de=[void 0,void 0];return ge&&((0,u.assertNumberOrInteger)(fe,"Time zone offset in seconds"),de[0]=fe),ve&&((0,u.assertString)(ue,"Time zone ID"),s.assertValidZoneId("Time zone ID",ue),de[1]=ue),de}(W,Y),2),J=H[0],le=H[1];this.timeZoneOffsetSeconds=J,this.timeZoneId=le??void 0,Object.freeze(this)}return R.fromStandardDate=function(I,M){return k(I,M),new R(I.getFullYear(),I.getMonth()+1,I.getDate(),I.getHours(),I.getMinutes(),I.getSeconds(),(0,c.toNumber)(s.totalNanoseconds(I,M)),s.timeZoneOffsetInSeconds(I),null)},R.prototype.toStandardDate=function(){return s.toStandardDate(this._toUTC())},R.prototype.toString=function(){var I;return A(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneOffsetSeconds!=null?s.timeZoneOffsetToIsoString((I=this.timeZoneOffsetSeconds)!==null&&I!==void 0?I:0):"")+(this.timeZoneId!=null?"[".concat(this.timeZoneId,"]"):"")},R.prototype._toUTC=function(){var I;if(this.timeZoneOffsetSeconds===void 0)throw new Error("Requires DateTime created with time zone offset");var M=s.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract((I=this.timeZoneOffsetSeconds)!==null&&I!==void 0?I:0);return(0,c.int)(M).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},R}();function O(R,I){return R!=null&&R[I]===!0}function A(R,I,M,N,F,z,B){return s.dateToIsoString(R,I,M)+"T"+s.timeToIsoString(N,F,z,B)}function k(R,I){(0,u.assertValidDate)(R,"Standard date"),I!=null&&(0,u.assertNumberOrInteger)(I,"Nanosecond")}e.DateTime=w,Object.defineProperty(w.prototype,y,f),e.isDateTime=function(R){return O(R,y)}},5471:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;var n=t(7843),i=t(3111);e.map=function(a,o){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){u.next(a.call(o,c,l++))}))})}},5477:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.window=void 0;var n=t(2483),i=t(7843),a=t(3111),o=t(1342),s=t(9445);e.window=function(u){return i.operate(function(l,c){var f=new n.Subject;c.next(f.asObservable());var d=function(h){f.error(h),c.error(h)};return l.subscribe(a.createOperatorSubscriber(c,function(h){return f==null?void 0:f.next(h)},function(){f.complete(),c.complete()},d)),s.innerFrom(u).subscribe(a.createOperatorSubscriber(c,function(){f.complete(),c.next(f=new n.Subject)},o.noop,d)),function(){f==null||f.unsubscribe(),f=null}})}},5481:function(r,e,t){var n=this&&this.__awaiter||function(x,C,w,O){return new(w||(w=Promise))(function(A,k){function R(N){try{M(O.next(N))}catch(F){k(F)}}function I(N){try{M(O.throw(N))}catch(F){k(F)}}function M(N){var F;N.done?A(N.value):(F=N.value,F instanceof w?F:new w(function(z){z(F)})).then(R,I)}M((O=O.apply(x,C||[])).next())})},i=this&&this.__generator||function(x,C){var w,O,A,k,R={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return k={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function I(M){return function(N){return function(F){if(w)throw new TypeError("Generator is already executing.");for(;k&&(k=0,F[0]&&(R=0)),R;)try{if(w=1,O&&(A=2&F[0]?O.return:F[0]?O.throw||((A=O.return)&&A.call(O),0):O.next)&&!(A=A.call(O,F[1])).done)return A;switch(O=0,A&&(F=[2&F[0],A.value]),F[0]){case 0:case 1:A=F;break;case 4:return R.label++,{value:F[1],done:!1};case 5:R.label++,O=F[1],F=[0];continue;case 7:F=R.ops.pop(),R.trys.pop();continue;default:if(!((A=(A=R.trys).length>0&&A[A.length-1])||F[0]!==6&&F[0]!==2)){R=0;continue}if(F[0]===3&&(!A||F[1]>A[0]&&F[1]<A[3])){R.label=F[1];break}if(F[0]===6&&R.label<A[1]){R.label=A[1],A=F;break}if(A&&R.label<A[2]){R.label=A[2],R.ops.push(F);break}A[2]&&R.ops.pop(),R.trys.pop();continue}F=C.call(x,R)}catch(z){F=[6,z],O=0}finally{w=A=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([M,N])}}},a=this&&this.__read||function(x,C){var w=typeof Symbol=="function"&&x[Symbol.iterator];if(!w)return x;var O,A,k=w.call(x),R=[];try{for(;(C===void 0||C-- >0)&&!(O=k.next()).done;)R.push(O.value)}catch(I){A={error:I}}finally{try{O&&!O.done&&(w=k.return)&&w.call(k)}finally{if(A)throw A.error}}return R},o=this&&this.__spreadArray||function(x,C,w){if(w||arguments.length===2)for(var O,A=0,k=C.length;A<k;A++)!O&&A in C||(O||(O=Array.prototype.slice.call(C,0,A)),O[A]=C[A]);return x.concat(O||Array.prototype.slice.call(C))},s=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(2696),l=t(6587),c=t(326),f=t(9691),d=s(t(9512)),h=t(3618),v=t(6189),p=t(9730),g=t(754),y=s(t(4569)),b=s(t(5909)),m=t(6030),_=function(){function x(C){var w,O=C.mode,A=C.connectionProvider,k=C.bookmarks,R=C.database,I=C.config,M=C.reactive,N=C.fetchSize,F=C.impersonatedUser,z=C.bookmarkManager,B=C.notificationFilter,U=C.auth,W=C.log,Y=C.homeDatabaseCallback;this._mode=O,this._database=R,this._reactive=M,this._fetchSize=N,this._homeDatabaseCallback=Y,this._auth=U,this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new h.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:U,database:R,bookmarks:k,connectionProvider:A,impersonatedUser:F,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:W}),this._writeConnectionHolder=new h.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:U,database:R,bookmarks:k,connectionProvider:A,impersonatedUser:F,onDatabaseNameResolved:this._onDatabaseNameResolved.bind(this),getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:W}),this._open=!0,this._hasTx=!1,this._impersonatedUser=F,this._lastBookmarks=k??p.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(J){var le,fe=(le=J==null?void 0:J.maxTransactionRetryTime)!==null&&le!==void 0?le:null;return new v.TransactionExecutor(fe)}(I),this._databaseNameResolved=this._database!=="";var H=this._calculateWatermaks();this._lowRecordWatermark=H.low,this._highRecordWatermark=H.high,this._results=[],this._bookmarkManager=z,this._notificationFilter=B,this._log=W,this._databaseGuess=I==null?void 0:I.cachedHomeDatabase,this._isRoutingSession=(w=I==null?void 0:I.routingDriver)!==null&&w!==void 0&&w}return x.prototype.run=function(C,w,O){var A=this,k=(0,l.validateQueryAndParameters)(C,w),R=k.validatedQuery,I=k.params,M=O!=null?new g.TxConfig(O,this._log):g.TxConfig.empty(),N=this._run(R,I,function(F){return n(A,void 0,void 0,function(){var z,B=this;return i(this,function(U){switch(U.label){case 0:return[4,this._bookmarks()];case 1:return z=U.sent(),this._assertSessionIsOpen(),[2,F.run(R,I,{bookmarks:z,txConfig:M,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(W){return B._onCompleteCallback(W,z)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,onDb:this._onDatabaseNameResolved.bind(this)})]}})})});return this._results.push(N),N},x.prototype._run=function(C,w,O){var A=this._acquireAndConsumeConnection(O),k=A.connectionHolder,R=A.resultPromise.catch(function(M){return Promise.resolve(new u.FailedObserver({error:M}))}),I={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new d.default(R,C,w,k,I)},x.prototype._acquireConnection=function(C){var w=this,O=this._acquireAndConsumeConnection(C),A=O.connectionHolder;return O.resultPromise.then(function(k){return n(w,void 0,void 0,function(){return i(this,function(R){switch(R.label){case 0:return[4,A.releaseConnection()];case 1:return R.sent(),[2,k]}})})})},x.prototype._acquireAndConsumeConnection=function(C){var w,O=this._connectionHolderWithMode(this._mode);return w=this._open?!this._hasTx&&O.initializeConnection(this._databaseGuess)?O.getConnection().then(function(A){return C(A)}):Promise.reject((0,f.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,f.newError)("Cannot run query in a closed session.")),{connectionHolder:O,resultPromise:w}},x.prototype.beginTransaction=function(C){var w=C,O=g.TxConfig.empty();return w!=null&&(O=new g.TxConfig(w,this._log)),this._beginTransaction(this._mode,O,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},x.prototype._beginTransaction=function(C,w,O){var A=this;if(!this._open)throw(0,f.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,f.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var k=x._validateSessionMode(C),R=this._connectionHolderWithMode(k);R.initializeConnection(this._databaseGuess),this._hasTx=!0;var I=new y.default({connectionHolder:R,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(M,N,F){return A._updateBookmarks(M,N,F)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:O,onDbCallback:this._onDatabaseNameResolved.bind(this)});return I._begin(function(){return A._bookmarks()},w),I},x.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,f.newError)("You cannot run more transactions on a closed session.")},x.prototype._transactionClosed=function(){this._hasTx=!1},x.prototype.lastBookmark=function(){return this.lastBookmarks()},x.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},x.prototype._bookmarks=function(){var C;return n(this,void 0,void 0,function(){var w;return i(this,function(O){switch(O.label){case 0:return[4,(C=this._bookmarkManager)===null||C===void 0?void 0:C.getBookmarks()];case 1:return(w=O.sent())===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(o(o([],a(w),!1),a(this._configuredBookmarks),!1))]}})})},x.prototype.readTransaction=function(C,w){var O=new g.TxConfig(w,this._log);return this._runTransaction(c.ACCESS_MODE_READ,O,C)},x.prototype.writeTransaction=function(C,w){var O=new g.TxConfig(w,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,O,C)},x.prototype._runTransaction=function(C,w,O){var A=this;return this._transactionExecutor.execute(function(k){return A._beginTransaction(C,w,k)},O)},x.prototype.executeRead=function(C,w){var O=new g.TxConfig(w,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,O,C)},x.prototype.executeWrite=function(C,w){var O=new g.TxConfig(w,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,O,C)},x.prototype._executeInTransaction=function(C,w,O){var A=this;return this._transactionExecutor.execute(function(k){return A._beginTransaction(C,w,k)},O,b.default.fromTransaction)},x.prototype._onDatabaseNameResolved=function(C){if(this._isRoutingSession&&(this._databaseGuess=C,!this._databaseNameResolved)){var w=C??"";this._database=w,this._readConnectionHolder.setDatabase(w),this._writeConnectionHolder.setDatabase(w),this._databaseNameResolved=!0,this._homeDatabaseCallback!=null&&this._homeDatabaseCallback((0,m.cacheKey)(this._auth,this._impersonatedUser),C)}},x.prototype._getConnectionAcquistionBookmarks=function(){var C;return n(this,void 0,void 0,function(){var w;return i(this,function(O){switch(O.label){case 0:return[4,(C=this._bookmarkManager)===null||C===void 0?void 0:C.getBookmarks()];case 1:return(w=O.sent())===void 0?[2,this._lastBookmarks]:[2,new p.Bookmarks(o(o([],a(this._configuredBookmarks),!1),a(w),!1))]}})})},x.prototype._updateBookmarks=function(C,w,O){var A,k,R;C==null||C.isEmpty()||((A=this._bookmarkManager)===null||A===void 0||A.updateBookmarks((k=w==null?void 0:w.values())!==null&&k!==void 0?k:[],(R=C==null?void 0:C.values())!==null&&R!==void 0?R:[]).catch(function(){}),this._lastBookmarks=C,this._configuredBookmarks=p.Bookmarks.empty())},x.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(C){switch(C.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(w){return w._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return C.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:C.sent(),C.label=3;case 3:return[2]}})})},x.prototype[Symbol.asyncDispose]=function(){return this.close()},x.prototype._connectionHolderWithMode=function(C){if(C===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(C===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,f.newError)("Unknown access mode: "+C)},x.prototype._onCompleteCallback=function(C,w){this._updateBookmarks(new p.Bookmarks(C.bookmark),w,C.db)},x.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},x.prototype._configureTransactionExecutor=function(C,w){this._transactionExecutor.pipelineBegin=C,this._transactionExecutor.telemetryApi=w},x._validateSessionMode=function(C){var w=C??c.ACCESS_MODE_WRITE;if(w!==c.ACCESS_MODE_READ&&w!==c.ACCESS_MODE_WRITE)throw(0,f.newError)("Illegal session mode "+w);return w},x}();e.default=_},5510:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.every=void 0;var n=t(7843),i=t(3111);e.every=function(a,o){return n.operate(function(s,u){var l=0;s.subscribe(i.createOperatorSubscriber(u,function(c){a.call(o,c,l++,s)||(u.next(!1),u.complete())},function(){u.next(!0),u.complete()}))})}},5553:function(r,e,t){var n=this&&this.__extends||function(){var s=function(u,l){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(c[d]=f[d])},s(u,l)};return function(u,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");function c(){this.constructor=u}s(u,l),u.prototype=l===null?Object.create(l):(c.prototype=l.prototype,new c)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=t(7174),a=t(5319),o=function(s){function u(l){for(var c=this,f=0,d=0;d<l.length;d++)f+=l[d].length;return(c=s.call(this,f)||this)._buffers=l,c}return n(u,s),u.prototype.getUInt8=function(l){for(var c=0;c<this._buffers.length;c++){var f=this._buffers[c];if(!(l>=f.length))return f.getUInt8(l);l-=f.length}},u.prototype.getInt8=function(l){for(var c=0;c<this._buffers.length;c++){var f=this._buffers[c];if(!(l>=f.length))return f.getInt8(l);l-=f.length}},u.prototype.getFloat64=function(l){for(var c=(0,a.alloc)(8),f=0;f<8;f++)c.putUInt8(f,this.getUInt8(l+f));return c.getFloat64(0)},u}(i.BaseBuffer);e.default=o},5568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createErrorClass=void 0,e.createErrorClass=function(t){var n=t(function(i){Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}},5572:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=void 0;var i=t(7843),a=t(3111),o=t(7479);e.bufferCount=function(s,u){return u===void 0&&(u=null),u=u??s,i.operate(function(l,c){var f=[],d=0;l.subscribe(a.createOperatorSubscriber(c,function(h){var v,p,g,y,b=null;d++%u===0&&f.push([]);try{for(var m=n(f),_=m.next();!_.done;_=m.next())(w=_.value).push(h),s<=w.length&&(b=b??[]).push(w)}catch(O){v={error:O}}finally{try{_&&!_.done&&(p=m.return)&&p.call(m)}finally{if(v)throw v.error}}if(b)try{for(var x=n(b),C=x.next();!C.done;C=x.next()){var w=C.value;o.arrRemove(f,w),c.next(w)}}catch(O){g={error:O}}finally{try{C&&!C.done&&(y=x.return)&&y.call(x)}finally{if(g)throw g.error}}},function(){var h,v;try{for(var p=n(f),g=p.next();!g.done;g=p.next()){var y=g.value;c.next(y)}}catch(b){h={error:b}}finally{try{g&&!g.done&&(v=p.return)&&v.call(p)}finally{if(h)throw h.error}}c.complete()},void 0,function(){f=null}))})}},5584:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.raceInit=e.race=void 0;var n=t(4662),i=t(9445),a=t(8535),o=t(3111);function s(u){return function(l){for(var c=[],f=function(h){c.push(i.innerFrom(u[h]).subscribe(o.createOperatorSubscriber(l,function(v){if(c){for(var p=0;p<c.length;p++)p!==h&&c[p].unsubscribe();c=null}l.next(v)})))},d=0;c&&!l.closed&&d<u.length;d++)f(d)}}e.race=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return(u=a.argsOrArgArray(u)).length===1?i.innerFrom(u[0]):new n.Observable(s(u))},e.raceInit=s},5592:(r,e,t)=>{var n=t(7192);n=n.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),r.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},5600:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,d,h=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=h.next()).done;)v.push(f.value)}catch(p){d={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(d)throw d.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,d=u.length;c<f;c++,d++)u[d]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.raceWith=void 0;var a=t(5584),o=t(7843),s=t(6640);e.raceWith=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];return u.length?o.operate(function(c,f){a.raceInit(i([c],n(u)))(f)}):s.identity}},5636:(r,e,t)=>{var n=t(1048),i=n.Buffer;function a(s,u){for(var l in s)u[l]=s[l]}function o(s,u,l){return i(s,u,l)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=n:(a(n,e),e.Buffer=o),o.prototype=Object.create(i.prototype),a(i,o),o.from=function(s,u,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return i(s,u,l)},o.alloc=function(s,u,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var c=i(s);return u!==void 0?typeof l=="string"?c.fill(u,l):c.fill(u):c.fill(0),c},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return i(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}},5642:function(r,e,t){var n=this&&this.__extends||function(){var m=function(_,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,w){C.__proto__=w}||function(C,w){for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(C[O]=w[O])},m(_,x)};return function(_,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function C(){this.constructor=_}m(_,x),_.prototype=x===null?Object.create(x):(C.prototype=x.prototype,new C)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(m){for(var _,x=1,C=arguments.length;x<C;x++)for(var w in _=arguments[x])Object.prototype.hasOwnProperty.call(_,w)&&(m[w]=_[w]);return m},i.apply(this,arguments)},a=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(2857)),s=a(t(7021)),u=t(397),l=t(9014),c=a(t(1175)),f=a(t(3321)),d=t(9305),h=(d.internal.bookmarks.Bookmarks,d.internal.constants.BOLT_PROTOCOL_V3),v=d.internal.txConfig.TxConfig,p="context",g="CALL dbms.cluster.routing.getRoutingTable($".concat(p,")"),y=new l.StreamObserver,b=function(m){function _(){return m!==null&&m.apply(this,arguments)||this}return n(_,m),Object.defineProperty(_.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var x=this;return this._transformer===void 0&&(this._transformer=new f.default(Object.values(c.default).map(function(C){return C(x._config,x._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.transformMetadata=function(x){return"t_first"in x&&(x.result_available_after=x.t_first,delete x.t_first),"t_last"in x&&(x.result_consumed_after=x.t_last,delete x.t_last),x},_.prototype.initialize=function(x){var C=this,w=x===void 0?{}:x,O=w.userAgent,A=(w.boltAgent,w.authToken),k=w.notificationFilter,R=w.onError,I=w.onComplete,M=new l.LoginObserver({onError:function(N){return C._onLoginError(N,R)},onCompleted:function(N){return C._onLoginCompleted(N,A,I)}});return(0,u.assertNotificationFilterIsEmpty)(k,this._onProtocolError,M),this.write(s.default.hello(O,A),M,!0),M},_.prototype.prepareToClose=function(){this.write(s.default.goodbye(),y,!0)},_.prototype.beginTransaction=function(x){var C=x===void 0?{}:x,w=C.bookmarks,O=C.txConfig,A=C.database,k=C.impersonatedUser,R=C.notificationFilter,I=C.mode,M=C.beforeError,N=C.afterError,F=C.beforeComplete,z=C.afterComplete,B=new l.ResultStreamObserver({server:this._server,beforeError:M,afterError:N,beforeComplete:F,afterComplete:z});return B.prepareToHandleSingleResponse(),(0,u.assertDatabaseIsEmpty)(A,this._onProtocolError,B),(0,u.assertImpersonatedUserIsEmpty)(k,this._onProtocolError,B),(0,u.assertNotificationFilterIsEmpty)(R,this._onProtocolError,B),this.write(s.default.begin({bookmarks:w,txConfig:O,mode:I}),B,!0),B},_.prototype.commitTransaction=function(x){var C=x===void 0?{}:x,w=C.beforeError,O=C.afterError,A=C.beforeComplete,k=C.afterComplete,R=new l.ResultStreamObserver({server:this._server,beforeError:w,afterError:O,beforeComplete:A,afterComplete:k});return R.prepareToHandleSingleResponse(),this.write(s.default.commit(),R,!0),R},_.prototype.rollbackTransaction=function(x){var C=x===void 0?{}:x,w=C.beforeError,O=C.afterError,A=C.beforeComplete,k=C.afterComplete,R=new l.ResultStreamObserver({server:this._server,beforeError:w,afterError:O,beforeComplete:A,afterComplete:k});return R.prepareToHandleSingleResponse(),this.write(s.default.rollback(),R,!0),R},_.prototype.run=function(x,C,w){var O=w===void 0?{}:w,A=O.bookmarks,k=O.txConfig,R=O.database,I=O.impersonatedUser,M=O.notificationFilter,N=O.mode,F=O.beforeKeys,z=O.afterKeys,B=O.beforeError,U=O.afterError,W=O.beforeComplete,Y=O.afterComplete,H=O.flush,J=H===void 0||H,le=O.highRecordWatermark,fe=le===void 0?Number.MAX_VALUE:le,ue=O.lowRecordWatermark,ge=ue===void 0?Number.MAX_VALUE:ue,ve=new l.ResultStreamObserver({server:this._server,beforeKeys:F,afterKeys:z,beforeError:B,afterError:U,beforeComplete:W,afterComplete:Y,highRecordWatermark:fe,lowRecordWatermark:ge});return(0,u.assertDatabaseIsEmpty)(R,this._onProtocolError,ve),(0,u.assertImpersonatedUserIsEmpty)(I,this._onProtocolError,ve),(0,u.assertNotificationFilterIsEmpty)(M,this._onProtocolError,ve),this.write(s.default.runWithMetadata(x,C,{bookmarks:A,txConfig:k,mode:N}),ve,!1),this.write(s.default.pullAll(),ve,J),ve},_.prototype.requestRoutingInformation=function(x){var C,w=x.routingContext,O=w===void 0?{}:w,A=x.sessionContext,k=A===void 0?{}:A,R=x.onError,I=x.onCompleted,M=this.run(g,((C={})[p]=O,C),i(i({},k),{txConfig:v.empty()}));return new l.ProcedureRouteObserver({resultObserver:M,onProtocolError:this._onProtocolError,onError:R,onCompleted:I})},_}(o.default);e.default=b},5648:function(r,e,t){var n=this&&this.__extends||function(){var o=function(s,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},o(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}o(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncScheduler=void 0;var i=t(8986),a=function(o){function s(u,l){l===void 0&&(l=i.Scheduler.now);var c=o.call(this,u,l)||this;return c.actions=[],c._active=!1,c}return n(s,o),s.prototype.flush=function(u){var l=this.actions;if(this._active)l.push(u);else{var c;this._active=!0;do if(c=u.execute(u.state,u.delay))break;while(u=l.shift());if(this._active=!1,c){for(;u=l.shift();)u.unsubscribe();throw c}}},s}(i.Scheduler);e.AsyncScheduler=a},5649:function(r,e){var t=this&&this.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s,u,l=o.call(i),c=[];try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,a){for(var o=0,s=a.length,u=i.length;o<s;o++,u++)i[u]=a[o];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.intervalProvider=void 0,e.intervalProvider={setInterval:function(i,a){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var u=e.intervalProvider.delegate;return u!=null&&u.setInterval?u.setInterval.apply(u,n([i,a],t(o))):setInterval.apply(void 0,n([i,a],t(o)))},clearInterval:function(i){var a=e.intervalProvider.delegate;return((a==null?void 0:a.clearInterval)||clearInterval)(i)},delegate:void 0}},5742:function(r,e,t){var n=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(8813),a=n(t(3057)),o=(n(t(9305)),function(){function s(u){this._txc=u}return s.prototype.run=function(u,l){var c=this;return new a.default(new i.Observable(function(f){try{f.next(c._txc.run(u,l)),f.complete()}catch(d){f.error(d)}return function(){}}))},s.prototype.commit=function(){var u=this;return new i.Observable(function(l){u._txc.commit().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.rollback=function(){var u=this;return new i.Observable(function(l){u._txc.rollback().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s.prototype.isOpen=function(){return this._txc.isOpen()},s.prototype.close=function(){var u=this;return new i.Observable(function(l){u._txc.close().then(function(){l.complete()}).catch(function(c){return l.error(c)})})},s}());e.default=o},5788:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnsubscriptionError=void 0;var n=t(5568);e.UnsubscriptionError=n.createErrorClass(function(i){return function(a){i(this),this.message=a?a.length+` errors occurred during unsubscription:
`+a.map(function(o,s){return s+1+") "+o.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=a}})},5815:function(r,e,t){var n=this&&this.__extends||function(){var g=function(y,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(m[x]=_[x])},g(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function m(){this.constructor=y}g(y,b),y.prototype=b===null?Object.create(b):(m.prototype=b.prototype,new m)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(g){for(var y,b=1,m=arguments.length;b<m;b++)for(var _ in y=arguments[b])Object.prototype.hasOwnProperty.call(y,_)&&(g[_]=y[_]);return g},i.apply(this,arguments)},a=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(9744)),s=a(t(9238)),u=a(t(3321)),l=a(t(7021)),c=t(9014),f=t(9305).internal.constants,d=f.BOLT_PROTOCOL_V5_5,h=f.FETCH_ALL,v=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),p=function(g){function y(){return g!==null&&g.apply(this,arguments)||this}return n(y,g),Object.defineProperty(y.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var b=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(m){return m(b._config,b._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.initialize=function(b){var m=this,_=b===void 0?{}:b,x=_.userAgent,C=_.boltAgent,w=_.authToken,O=_.notificationFilter,A=_.onError,k=_.onComplete,R={},I=new c.LoginObserver({onError:function(M){return m._onLoginError(M,A)},onCompleted:function(M){return R.metadata=M,m._onLoginCompleted(M)}});return this.write(l.default.hello5x5(x,C,O,this._serversideRouting),I,!1),this.logon({authToken:w,onComplete:function(M){return k(i(i({},M),R.metadata))},onError:A,flush:!0})},y.prototype.beginTransaction=function(b){var m=b===void 0?{}:b,_=m.bookmarks,x=m.txConfig,C=m.database,w=m.mode,O=m.impersonatedUser,A=m.notificationFilter,k=m.beforeError,R=m.afterError,I=m.beforeComplete,M=m.afterComplete,N=new c.ResultStreamObserver({server:this._server,beforeError:k,afterError:R,beforeComplete:I,afterComplete:M});return N.prepareToHandleSingleResponse(),this.write(l.default.begin5x5({bookmarks:_,txConfig:x,database:C,mode:w,impersonatedUser:O,notificationFilter:A}),N,!0),N},y.prototype.run=function(b,m,_){var x=_===void 0?{}:_,C=x.bookmarks,w=x.txConfig,O=x.database,A=x.mode,k=x.impersonatedUser,R=x.notificationFilter,I=x.beforeKeys,M=x.afterKeys,N=x.beforeError,F=x.afterError,z=x.beforeComplete,B=x.afterComplete,U=x.flush,W=U===void 0||U,Y=x.reactive,H=Y!==void 0&&Y,J=x.fetchSize,le=J===void 0?h:J,fe=x.highRecordWatermark,ue=fe===void 0?Number.MAX_VALUE:fe,ge=x.lowRecordWatermark,ve=ge===void 0?Number.MAX_VALUE:ge,de=new c.ResultStreamObserver({server:this._server,reactive:H,fetchSize:le,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:I,afterKeys:M,beforeError:N,afterError:F,beforeComplete:z,afterComplete:B,highRecordWatermark:ue,lowRecordWatermark:ve,enrichMetadata:this._enrichMetadata}),ie=H;return this.write(l.default.runWithMetadata5x5(b,m,{bookmarks:C,txConfig:w,database:O,mode:A,impersonatedUser:k,notificationFilter:R}),de,ie&&W),H||this.write(l.default.pull({n:le}),de,W),de},y.prototype._enrichMetadata=function(b){return Array.isArray(b.statuses)&&(b.statuses=b.statuses.map(function(m){return i(i({},m),{description:m.neo4j_code!=null?m.status_description:m.description,diagnostic_record:m.diagnostic_record!==null?i(i({},v),m.diagnostic_record):null})})),b},y}(o.default);e.default=p},5837:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,n){n===void 0&&(n=function(){return{get userAgent(){}}});var i=n(),a=i.userAgent!=null?i.userAgent.split("(")[1].split(")")[0]:void 0,o=i.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:a,languageDetails:o}}},5880:function(r,e,t){var n,i;n=function(){var a=function(){},o="undefined",s=typeof window!==o&&typeof window.navigator!==o&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],l={},c=null;function f(b,m){var _=b[m];if(typeof _.bind=="function")return _.bind(b);try{return Function.prototype.bind.call(_,b)}catch{return function(){return Function.prototype.apply.apply(_,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(){for(var b=this.getLevel(),m=0;m<u.length;m++){var _=u[m];this[_]=m<b?a:this.methodFactory(_,b,this.name)}if(this.log=this.debug,typeof console===o&&b<this.levels.SILENT)return"No console available for logging"}function v(b){return function(){typeof console!==o&&(h.call(this),this[b].apply(this,arguments))}}function p(b,m,_){return function(x){return x==="debug"&&(x="log"),typeof console!==o&&(x==="trace"&&s?d:console[x]!==void 0?f(console,x):console.log!==void 0?f(console,"log"):a)}(b)||v.apply(this,arguments)}function g(b,m){var _,x,C,w=this,O="loglevel";function A(){var I;if(typeof window!==o&&O){try{I=window.localStorage[O]}catch{}if(typeof I===o)try{var M=window.document.cookie,N=encodeURIComponent(O),F=M.indexOf(N+"=");F!==-1&&(I=/^([^;]+)/.exec(M.slice(F+N.length+1))[1])}catch{}return w.levels[I]===void 0&&(I=void 0),I}}function k(I){var M=I;if(typeof M=="string"&&w.levels[M.toUpperCase()]!==void 0&&(M=w.levels[M.toUpperCase()]),typeof M=="number"&&M>=0&&M<=w.levels.SILENT)return M;throw new TypeError("log.setLevel() called with invalid level: "+I)}typeof b=="string"?O+=":"+b:typeof b=="symbol"&&(O=void 0),w.name=b,w.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},w.methodFactory=m||p,w.getLevel=function(){return C??x??_},w.setLevel=function(I,M){return C=k(I),M!==!1&&function(N){var F=(u[N]||"silent").toUpperCase();if(typeof window!==o&&O){try{return void(window.localStorage[O]=F)}catch{}try{window.document.cookie=encodeURIComponent(O)+"="+F+";"}catch{}}}(C),h.call(w)},w.setDefaultLevel=function(I){x=k(I),A()||w.setLevel(I,!1)},w.resetLevel=function(){C=null,function(){if(typeof window!==o&&O){try{window.localStorage.removeItem(O)}catch{}try{window.document.cookie=encodeURIComponent(O)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),h.call(w)},w.enableAll=function(I){w.setLevel(w.levels.TRACE,I)},w.disableAll=function(I){w.setLevel(w.levels.SILENT,I)},w.rebuild=function(){if(c!==w&&(_=k(c.getLevel())),h.call(w),c===w)for(var I in l)l[I].rebuild()},_=k(c?c.getLevel():"WARN");var R=A();R!=null&&(C=k(R)),h.call(w)}(c=new g).getLogger=function(b){if(typeof b!="symbol"&&typeof b!="string"||b==="")throw new TypeError("You must supply a name when creating a logger.");var m=l[b];return m||(m=l[b]=new g(b,c.methodFactory)),m};var y=typeof window!==o?window.log:void 0;return c.noConflict=function(){return typeof window!==o&&window.log===c&&(window.log=y),c},c.getLoggers=function(){return l},c.default=c,c},(i=n.call(e,t,e,r))===void 0||(r.exports=i)},5909:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function n(i){var a=i.run;this._run=a}return n.fromTransaction=function(i){return new n({run:i.run.bind(i)})},n.prototype.run=function(i,a){return this._run(i,a)},n}();e.default=t},5918:function(r,e,t){var n=this&&this.__read||function(s,u){var l=typeof Symbol=="function"&&s[Symbol.iterator];if(!l)return s;var c,f,d=l.call(s),h=[];try{for(;(u===void 0||u-- >0)&&!(c=d.next()).done;)h.push(c.value)}catch(v){f={error:v}}finally{try{c&&!c.done&&(l=d.return)&&l.call(d)}finally{if(f)throw f.error}}return h},i=this&&this.__spreadArray||function(s,u){for(var l=0,c=u.length,f=s.length;l<c;l++,f++)s[f]=u[l];return s};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var a=t(7286),o=t(7843);e.zip=function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];return o.operate(function(l,c){a.zip.apply(void 0,i([l],n(s))).subscribe(c)})}},5973:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var n=t(9305),i=n.internal.temporalUtil,a=i.DAYS_0000_TO_1970,o=i.DAYS_PER_400_YEAR_CYCLE,s=i.NANOS_PER_HOUR,u=i.NANOS_PER_MINUTE,l=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,f=i.floorDiv,d=i.floorMod;function h(p){var g=(p=(0,n.int)(p)).add(a).subtract(60),y=(0,n.int)(0);if(g.lessThan(0)){var b=g.add(1).div(o).subtract(1);y=b.multiply(400),g=g.add(b.multiply(-o))}var m=g.multiply(400).add(591).div(o),_=g.subtract(m.multiply(365).add(m.div(4)).subtract(m.div(100)).add(m.div(400)));_.lessThan(0)&&(m=m.subtract(1),_=g.subtract(m.multiply(365).add(m.div(4)).subtract(m.div(100)).add(m.div(400)))),m=m.add(y);var x=_,C=x.multiply(5).add(2).div(153),w=C.add(2).modulo(12).add(1),O=x.subtract(C.multiply(306).add(5).div(10)).add(1);return m=m.add(C.div(10)),new n.Date(m,w,O)}function v(p){var g=(p=(0,n.int)(p)).div(s),y=(p=p.subtract(g.multiply(s))).div(u),b=(p=p.subtract(y.multiply(u))).div(l),m=p.subtract(b.multiply(l));return new n.LocalTime(g,y,b,m)}e.epochDayToDate=h,e.nanoOfDayToLocalTime=v,e.epochSecondAndNanoToLocalDateTime=function(p,g){var y=f(p,c),b=d(p,c).multiply(l).add(g),m=h(y),_=v(b);return new n.LocalDateTime(m.year,m.month,m.day,_.hour,_.minute,_.second,_.nanosecond)}},6013:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createObject=void 0,e.createObject=function(t,n){return t.reduce(function(i,a,o){return i[a]=n[o],i},{})}},6030:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cacheKey=void 0;var n=t(4027);e.cacheKey=function(i,a){var o;return a!=null?"basic:"+a:i===void 0?"DEFAULT":i.scheme==="basic"?"basic:"+((o=i.principal)!==null&&o!==void 0?o:""):i.scheme==="kerberos"?"kerberos:"+i.credentials:i.scheme==="bearer"?"bearer:"+i.credentials:i.scheme==="none"?"none":(0,n.stringify)(i,{sortedElements:!0})}},6033:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var n=t(6995),i=t(1866),a=function(){function f(d,h,v,p){var g,y,b;this.query={text:d,parameters:h},this.queryType=v.type,this.counters=new u((g=v.stats)!==null&&g!==void 0?g:{}),this.updateStatistics=this.counters,this.plan=(v.plan!=null||v.profile!=null)&&new o((y=v.plan)!==null&&y!==void 0?y:v.profile),this.profile=v.profile!=null&&new s(v.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(v),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(v),this.server=new l(v.server,p),this.resultConsumedAfter=v.result_consumed_after,this.resultAvailableAfter=v.result_available_after,this.database={name:(b=v.db)!==null&&b!==void 0?b:null}}return f.prototype.hasPlan=function(){return this.plan instanceof o},f.prototype.hasProfile=function(){return this.profile instanceof s},f}(),o=function f(d){this.operatorType=d.operatorType,this.identifiers=d.identifiers,this.arguments=d.args,this.children=d.children!=null?d.children.map(function(h){return new f(h)}):[]};e.Plan=o;var s=function(){function f(d){this.operatorType=d.operatorType,this.identifiers=d.identifiers,this.arguments=d.args,this.dbHits=c("dbHits",d),this.rows=c("rows",d),this.pageCacheMisses=c("pageCacheMisses",d),this.pageCacheHits=c("pageCacheHits",d),this.pageCacheHitRatio=c("pageCacheHitRatio",d),this.time=c("time",d),this.children=d.children!=null?d.children.map(function(h){return new f(h)}):[]}return f.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},f}();e.ProfiledPlan=s,e.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var u=function(){function f(d){var h=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(d).forEach(function(v){var p=v.replace(/(-\w)/g,function(g){return g[1].toUpperCase()});p in h._stats?h._stats[p]=n.util.toNumber(d[v]):p==="systemUpdates"?h._systemUpdates=n.util.toNumber(d[v]):p==="containsSystemUpdates"?h._containsSystemUpdates=d[v]:p==="containsUpdates"&&(h._containsUpdates=d[v])}),this._stats=Object.freeze(this._stats)}return f.prototype.containsUpdates=function(){var d=this;return this._containsUpdates!==void 0?this._containsUpdates:Object.keys(this._stats).reduce(function(h,v){return h+d._stats[v]},0)>0},f.prototype.updates=function(){return this._stats},f.prototype.containsSystemUpdates=function(){return this._containsSystemUpdates!==void 0?this._containsSystemUpdates:this._systemUpdates>0},f.prototype.systemUpdates=function(){return this._systemUpdates},f}();e.QueryStatistics=u;var l=function(f,d){f!=null&&(this.address=f.address,this.agent=f.version),this.protocolVersion=d};function c(f,d,h){if(h===void 0&&(h=0),d!==!1&&f in d){var v=d[f];return n.util.toNumber(v)}return h}e.ServerInfo=l,e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=a},6038:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},6086:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=void 0;var n=t(7961),i=t(1731),a=t(6472);e.sampleTime=function(o,s){return s===void 0&&(s=n.asyncScheduler),i.sample(a.interval(o,s))}},6102:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=void 0;var n=t(4662),i=t(8535),a=t(3111),o=t(1342),s=t(9445);e.onErrorResumeNext=function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=i.argsOrArgArray(u);return new n.Observable(function(f){var d=0,h=function(){if(d<c.length){var v=void 0;try{v=s.innerFrom(c[d++])}catch{return void h()}var p=new a.OperatorSubscriber(f,void 0,o.noop,o.noop);v.subscribe(p),p.add(h)}else f.complete()};h()})}},6106:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=void 0;var n=t(95),i=t(8918);e.publishLast=function(){return function(a){var o=new n.AsyncSubject;return new i.ConnectableObservable(a,function(){return o})}}},6161:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(6248));e.default=n({},a.default)},6189:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(v){for(var p,g=1,y=arguments.length;g<y;g++)for(var b in p=arguments[g])Object.prototype.hasOwnProperty.call(p,b)&&(v[b]=p[b]);return v},n.apply(this,arguments)},i=this&&this.__awaiter||function(v,p,g,y){return new(g||(g=Promise))(function(b,m){function _(w){try{C(y.next(w))}catch(O){m(O)}}function x(w){try{C(y.throw(w))}catch(O){m(O)}}function C(w){var O;w.done?b(w.value):(O=w.value,O instanceof g?O:new g(function(A){A(O)})).then(_,x)}C((y=y.apply(v,p||[])).next())})},a=this&&this.__generator||function(v,p){var g,y,b,m,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return m={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function x(C){return function(w){return function(O){if(g)throw new TypeError("Generator is already executing.");for(;m&&(m=0,O[0]&&(_=0)),_;)try{if(g=1,y&&(b=2&O[0]?y.return:O[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,O[1])).done)return b;switch(y=0,b&&(O=[2&O[0],b.value]),O[0]){case 0:case 1:b=O;break;case 4:return _.label++,{value:O[1],done:!1};case 5:_.label++,y=O[1],O=[0];continue;case 7:O=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||O[0]!==6&&O[0]!==2)){_=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){_.label=O[1];break}if(O[0]===6&&_.label<b[1]){_.label=b[1],b=O;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(O);break}b[2]&&_.ops.pop(),_.trys.pop();continue}O=p.call(v,_)}catch(A){O=[6,A],y=0}finally{g=b=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([C,w])}}},o=this&&this.__read||function(v,p){var g=typeof Symbol=="function"&&v[Symbol.iterator];if(!g)return v;var y,b,m=g.call(v),_=[];try{for(;(p===void 0||p-- >0)&&!(y=m.next()).done;)_.push(y.value)}catch(x){b={error:x}}finally{try{y&&!y.done&&(g=m.return)&&g.call(m)}finally{if(b)throw b.error}}return _},s=this&&this.__spreadArray||function(v,p,g){if(g||arguments.length===2)for(var y,b=0,m=p.length;b<m;b++)!y&&b in p||(y||(y=Array.prototype.slice.call(p,0,b)),y[b]=p[b]);return v.concat(y||Array.prototype.slice.call(p))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var u=t(9691),l=t(326);function c(v,p){for(var g=[],y=2;y<arguments.length;y++)g[y-2]=arguments[y];return setTimeout.apply(void 0,s([v,p],o(g),!1))}function f(v){return clearTimeout(v)}var d=function(){function v(p,g,y,b,m){m===void 0&&(m={setTimeout:c,clearTimeout:f}),this._maxRetryTimeMs=h(p,3e4),this._initialRetryDelayMs=h(g,1e3),this._multiplier=h(y,2),this._jitterFactor=h(b,.2),this._setTimeout=m.setTimeout,this._clearTimeout=m.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=l.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return v.prototype.execute=function(p,g,y){var b=this,m={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){m.apiTransactionConfig=void 0}}};return new Promise(function(_,x){b._executeTransactionInsidePromise(p,g,_,x,y,m).catch(x)}).catch(function(_){var x=Date.now(),C=b._initialRetryDelayMs;return b._retryTransactionPromise(p,g,_,x,C,y,m)})},v.prototype.close=function(){var p=this;this._inFlightTimeoutIds.forEach(function(g){return p._clearTimeout(g)}),this._inFlightTimeoutIds=[]},v.prototype._retryTransactionPromise=function(p,g,y,b,m,_,x){var C=this;return Date.now()-b>this._maxRetryTimeMs||!(0,u.isRetriableError)(y)?Promise.reject(y):new Promise(function(w,O){var A=C._computeDelayWithJitter(m),k=C._setTimeout(function(){C._inFlightTimeoutIds=C._inFlightTimeoutIds.filter(function(R){return R!==k}),C._executeTransactionInsidePromise(p,g,w,O,_,x).catch(O)},A);C._inFlightTimeoutIds.push(k)}).catch(function(w){var O=m*C._multiplier;return C._retryTransactionPromise(p,g,w,b,O,_,x)})},v.prototype._executeTransactionInsidePromise=function(p,g,y,b,m,_){return i(this,void 0,void 0,function(){var x,C,w,O,A,k,R=this;return a(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),C=p((_==null?void 0:_.apiTransactionConfig)!=null?n({},_==null?void 0:_.apiTransactionConfig):void 0),this.pipelineBegin?(w=C,[3,3]):[3,1];case 1:return[4,C];case 2:w=I.sent(),I.label=3;case 3:return x=w,[3,5];case 4:return O=I.sent(),b(O),[2];case 5:return A=m??function(M){return M},k=A(x),this._safeExecuteTransactionWork(k,g).then(function(M){return R._handleTransactionWorkSuccess(M,x,y,b)}).catch(function(M){return R._handleTransactionWorkFailure(M,x,b)}),[2]}})})},v.prototype._safeExecuteTransactionWork=function(p,g){try{var y=g(p);return Promise.resolve(y)}catch(b){return Promise.reject(b)}},v.prototype._handleTransactionWorkSuccess=function(p,g,y,b){g.isOpen()?g.commit().then(function(){y(p)}).catch(function(m){b(m)}):y(p)},v.prototype._handleTransactionWorkFailure=function(p,g,y){g.isOpen()?g.rollback().catch(function(b){}).then(function(){return y(p)}).catch(y):y(p)},v.prototype._computeDelayWithJitter=function(p){var g=p*this._jitterFactor,y=p-g,b=p+g;return Math.random()*(b-y)+y},v.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,u.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,u.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,u.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,u.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},v}();function h(v,p){return v??p}e.TransactionExecutor=d},6245:function(r,e,t){var n=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(t(5319)),a=t(9305),o=a.internal.util,s=o.ENCRYPTION_OFF,u=o.ENCRYPTION_ON,l=function(){function f(d,h,v){h===void 0&&(h=c),v===void 0&&(v=function(_){return new WebSocket(_)});var p=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=d,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var g=function(_,x){var C=function(k){return k.encrypted===!0||k.encrypted===u}(_),w=function(k){return k.encrypted===!1||k.encrypted===s}(_),O=_.trust,A=function(k){var R=typeof k=="function"?k():"";return R&&R.toLowerCase().indexOf("https")>=0}(x);return function(k,R,I){I===null||(k&&!I?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):R&&I&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(C,w,A),w?{scheme:"ws",error:null}:A?{scheme:"wss",error:null}:C?O&&O!=="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"?{scheme:null,error:(0,a.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+O+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s+'"` in the driver configuration.')}:{scheme:"wss",error:null}:{scheme:"ws",error:null}}(d,h),y=g.scheme,b=g.error;if(b)this._error=b;else{this._ws=function(_,x,C){var w=_+"://"+x.asHostPort();try{return C(w)}catch(A){if(function(k,R){return k.name==="SyntaxError"&&(I=R.asHostPort()).charAt(0)==="["&&I.indexOf("]")!==-1;var I}(A,x)){var O=function(k,R){var I=R.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(k,"://").concat(I,":").concat(R.port())}(_,x);return C(O)}throw A}}(y,d.address,v),this._ws.binaryType="arraybuffer";var m=this;this._ws.onclose=function(_){_&&!_.wasClean&&m._handleConnectionError(),m._open=!1},this._ws.onopen=function(){m._clearConnectionTimeout();var _=m._pending;m._pending=null;for(var x=0;x<_.length;x++)m.write(_[x])},this._ws.onmessage=function(_){if(p._resetTimeout(),m.onmessage){var x=new i.default(_.data);m.onmessage(x)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return f.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,a.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,a.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},f.prototype.write=function(d){if(this._pending!==null)this._pending.push(d);else{if(!(d instanceof i.default))throw(0,a.newError)("Don't know how to send buffer: "+d);try{this._ws.send(d._buffer)}catch(h){if(this._ws.readyState===1)throw h;this._handleConnectionError()}}},f.prototype.close=function(){var d=this;return this._closingPromise===null&&(this._closingPromise=new Promise(function(h,v){d._clearConnectionTimeout(),d._ws&&d._ws.readyState!==3?(d._open=!1,d.stopReceiveTimeout(),d._ws.onclose=function(){h()},d._ws.close()):h()})),this._closingPromise},f.prototype.setupReceiveTimeout=function(d){this._receiveTimeout=d},f.prototype.stopReceiveTimeout=function(){this._receiveTimeout!==null&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,this._receiveTimeoutId!=null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},f.prototype.startReceiveTimeout=function(){this._open&&this._receiveTimeout!==null&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},f.prototype._resetTimeout=function(){var d=this;this._receiveTimeoutStarted&&(this._receiveTimeoutId!==null&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){d._receiveTimeoutId=null,d._timedout=!0,d.stopReceiveTimeout(),d._error=(0,a.newError)("Connection lost. Server didn't respond in ".concat(d._receiveTimeout,"ms"),d._config.connectionErrorCode),d.close(),d.onerror&&d.onerror(d._error)},this._receiveTimeout))},f.prototype._setupConnectionTimeout=function(){var d=this,h=this._config.connectionTimeout;if(h){var v=this._ws;return setTimeout(function(){v.readyState!==1&&(d._connectionTimeoutFired=!0,v.close())},h)}return null},f.prototype._clearConnectionTimeout=function(){var d=this._connectionTimeoutId;(d||d===0)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(d))},f}();function c(){return typeof window<"u"&&window.location?window.location.protocol:null}e.default=l},6248:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(3399));e.default=n({},a.default)},6293:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,d,h=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=h.next()).done;)v.push(f.value)}catch(p){d={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(d)throw d.error}}return v},i=this&&this.__spreadArray||function(u,l){for(var c=0,f=l.length,d=u.length;c<f;c++,d++)u[d]=l[c];return u};Object.defineProperty(e,"__esModule",{value:!0}),e.immediateProvider=void 0;var a=t(7245),o=a.Immediate.setImmediate,s=a.Immediate.clearImmediate;e.immediateProvider={setImmediate:function(){for(var u=[],l=0;l<arguments.length;l++)u[l]=arguments[l];var c=e.immediateProvider.delegate;return((c==null?void 0:c.setImmediate)||o).apply(void 0,i([],n(u)))},clearImmediate:function(u){var l=e.immediateProvider.delegate;return((l==null?void 0:l.clearImmediate)||s)(u)},delegate:void 0}},6345:function(r,e,t){var n=this&&this.__extends||function(){var v=function(p,g){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,b){y.__proto__=b}||function(y,b){for(var m in b)Object.prototype.hasOwnProperty.call(b,m)&&(y[m]=b[m])},v(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function y(){this.constructor=p}v(p,g),p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(v){for(var p,g=1,y=arguments.length;g<y;g++)for(var b in p=arguments[g])Object.prototype.hasOwnProperty.call(p,b)&&(v[b]=p[b]);return v},i.apply(this,arguments)},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(844)),s=t(397),u=a(t(9994)),l=a(t(3321)),c=a(t(7021)),f=t(9014),d=t(9305).internal.constants.BOLT_PROTOCOL_V5_1,h=function(v){function p(){return v!==null&&v.apply(this,arguments)||this}return n(p,v),Object.defineProperty(p.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var g=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(u.default).map(function(y){return y(g._config,g._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),p.prototype.initialize=function(g){var y=this,b=g===void 0?{}:g,m=b.userAgent,_=(b.boltAgent,b.authToken),x=b.notificationFilter,C=b.onError,w=b.onComplete,O={},A=new f.LoginObserver({onError:function(k){return y._onLoginError(k,C)},onCompleted:function(k){return O.metadata=k,y._onLoginCompleted(k)}});return(0,s.assertNotificationFilterIsEmpty)(x,this._onProtocolError,A),this.write(c.default.hello5x1(m,this._serversideRouting),A,!1),this.logon({authToken:_,onComplete:function(k){return w(i(i({},k),O.metadata))},onError:C,flush:!0})},p.prototype.logon=function(g){var y=this,b=g===void 0?{}:g,m=b.authToken,_=b.onComplete,x=b.onError,C=b.flush,w=new f.LoginObserver({onCompleted:function(){return y._onLoginCompleted(null,m,_)},onError:function(O){return y._onLoginError(O,x)}});return this.write(c.default.logon(m),w,C),w},p.prototype.logoff=function(g){var y=g===void 0?{}:g,b=y.onComplete,m=y.onError,_=y.flush,x=new f.LogoffObserver({onCompleted:b,onError:m});return this.write(c.default.logoff(),x,_),x},p}(o.default);e.default=h},6368:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=void 0;var n=t(1964),i=t(1018);e.isIterable=function(a){return i.isFunction(a==null?void 0:a[n.iterator])}},6377:function(r,e,t){var n=this&&this.__extends||function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},d(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=h}d(h,v),h.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(d){for(var h,v=1,p=arguments.length;v<p;v++)for(var g in h=arguments[v])Object.prototype.hasOwnProperty.call(h,g)&&(d[g]=h[g]);return d},i.apply(this,arguments)},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(6890)),s=a(t(6248)),u=a(t(3321)),l=t(9305).internal.constants.BOLT_PROTOCOL_V5_7,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),f=function(d){function h(){return d!==null&&d.apply(this,arguments)||this}return n(h,d),Object.defineProperty(h.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),h.prototype.enrichErrorMetadata=function(v){return i(i({},v),{cause:v.cause!==null&&v.cause!==void 0?this.enrichErrorMetadata(v.cause):null,code:v.neo4j_code,diagnostic_record:v.diagnostic_record!==null?i(i({},c),v.diagnostic_record):null})},h}(o.default);e.default=f},6384:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scanInternals=void 0;var n=t(3111);e.scanInternals=function(i,a,o,s,u){return function(l,c){var f=o,d=a,h=0;l.subscribe(n.createOperatorSubscriber(c,function(v){var p=h++;d=f?i(d,v,p):(f=!0,v),s&&c.next(d)},u&&function(){f&&c.next(d),c.complete()}))}}},6385:function(r,e,t){var n=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),t(7666);var i=function(a){function o(s){var u=a.call(this)||this;return u._errorHandler=s,u}return n(o,a),Object.defineProperty(o.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(o.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(s){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.connect=function(s,u,l,c){throw new Error("not implemented")},o.prototype.write=function(s,u,l){throw new Error("not implemented")},o.prototype.close=function(){throw new Error("not implemented")},o.prototype.handleAndTransformError=function(s,u){return this._errorHandler?this._errorHandler.handleAndTransformError(s,u,this):s},o}(t(9305).Connection);e.default=i},6445:function(r,e,t){var n=this&&this.__extends||function(){var f=function(d,h){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,p){v.__proto__=p}||function(v,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(v[g]=p[g])},f(d,h)};return function(d,h){if(typeof h!="function"&&h!==null)throw new TypeError("Class extends value "+String(h)+" is not a constructor or null");function v(){this.constructor=d}f(d,h),d.prototype=h===null?Object.create(h):(v.prototype=h.prototype,new v)}}(),i=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(4596)),o=t(9305),s=i(t(5348)),u=i(t(3321)),l=o.internal.constants.BOLT_PROTOCOL_V4_2,c=function(f){function d(){return f!==null&&f.apply(this,arguments)||this}return n(d,f),Object.defineProperty(d.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var h=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(v){return v(h._config,h._log)}))),this._transformer},enumerable:!1,configurable:!0}),d}(a.default);e.default=c},6472:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.interval=void 0;var n=t(7961),i=t(4092);e.interval=function(a,o){return a===void 0&&(a=0),o===void 0&&(o=n.asyncScheduler),a<0&&(a=0),i.timer(a,a,o)}},6492:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var n=t(9305);e.identity=function(i){return i},e.reuseOngoingRequest=function(i,a){a===void 0&&(a=null);var o=new Map;return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=n.json.stringify(s);if(o.has(l))return o.get(l);var c=i.apply(a,s);return o.set(l,c),c.finally(function(){o.delete(l)})}}},6505:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=void 0;var n=t(9568),i=t(5471);e.timestamp=function(a){return a===void 0&&(a=n.dateTimestampProvider),i.map(function(o){return{value:o,timestamp:a.now()}})}},6544:function(r,e,t){var n=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),a=n(t(8320)),o=n(t(2857)),s=n(t(5642)),u=n(t(2539)),l=n(t(4596)),c=n(t(6445)),f=n(t(9054)),d=n(t(1711)),h=n(t(844)),v=n(t(6345)),p=n(t(934)),g=n(t(9125)),y=n(t(9744)),b=n(t(5815)),m=n(t(6890)),_=n(t(6377)),x=n(t(1092)),C=(t(7452),n(t(2578)));e.default=function(w){var O=w===void 0?{}:w,A=O.version,k=O.chunker,R=O.dechunker,I=O.channel,M=O.disableLosslessIntegers,N=O.useBigInt,F=O.serversideRouting,z=O.server,B=O.log,U=O.observer;return function(W,Y,H,J,le,fe,ue,ge){switch(W){case 1:return new a.default(Y,H,J,fe,ge,ue);case 2:return new o.default(Y,H,J,fe,ge,ue);case 3:return new s.default(Y,H,J,fe,ge,ue);case 4:return new u.default(Y,H,J,fe,ge,ue);case 4.1:return new l.default(Y,H,J,fe,ge,ue,le);case 4.2:return new c.default(Y,H,J,fe,ge,ue,le);case 4.3:return new f.default(Y,H,J,fe,ge,ue,le);case 4.4:return new d.default(Y,H,J,fe,ge,ue,le);case 5:return new h.default(Y,H,J,fe,ge,ue,le);case 5.1:return new v.default(Y,H,J,fe,ge,ue,le);case 5.2:return new p.default(Y,H,J,fe,ge,ue,le);case 5.3:return new g.default(Y,H,J,fe,ge,ue,le);case 5.4:return new y.default(Y,H,J,fe,ge,ue,le);case 5.5:return new b.default(Y,H,J,fe,ge,ue,le);case 5.6:return new m.default(Y,H,J,fe,ge,ue,le);case 5.7:return new _.default(Y,H,J,fe,ge,ue,le);case 5.8:return new x.default(Y,H,J,fe,ge,ue,le);default:throw(0,i.newError)("Unknown Bolt protocol version: "+W)}}(A,z,k,{disableLosslessIntegers:M,useBigInt:N},F,function(W){var Y=new C.default({transformMetadata:W.transformMetadata.bind(W),enrichErrorMetadata:W.enrichErrorMetadata.bind(W),log:B,observer:U});return I.onerror=U.onError.bind(U),I.onmessage=function(H){return R.write(H)},R.onmessage=function(H){try{Y.handleResponse(W.unpack(H))}catch(J){return U.onError(J)}},Y},U.onProtocolError.bind(U),B)}},6566:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=void 0;var n=t(9445),i=t(2483),a=t(7843),o=t(3111);e.repeatWhen=function(s){return a.operate(function(u,l){var c,f,d=!1,h=!1,v=!1,p=function(){return v&&h&&(l.complete(),!0)},g=function(){v=!1,c=u.subscribe(o.createOperatorSubscriber(l,void 0,function(){v=!0,!p()&&(f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(o.createOperatorSubscriber(l,function(){c?g():d=!0},function(){h=!0,p()}))),f).next()})),d&&(c.unsubscribe(),c=null,d=!1,g())};g()})}},6586:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=void 0;var n=t(983),i=t(1018);e.mergeMapTo=function(a,o,s){return s===void 0&&(s=1/0),i.isFunction(o)?n.mergeMap(function(){return a},o,s):(typeof o=="number"&&(s=o),n.mergeMap(function(){return a},s))}},6587:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(d,h,v,p){p===void 0&&(p=v);var g=Object.getOwnPropertyDescriptor(h,v);g&&!("get"in g?!h.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return h[v]}}),Object.defineProperty(d,p,g)}:function(d,h,v,p){p===void 0&&(p=v),d[p]=h[v]}),i=this&&this.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),a=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var v in d)v!=="default"&&Object.prototype.hasOwnProperty.call(d,v)&&n(h,d,v);return i(h,d),h},o=this&&this.__values||function(d){var h=typeof Symbol=="function"&&Symbol.iterator,v=h&&d[h],p=0;if(v)return v.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var s=a(t(3371)),u=t(4027);function l(d){return typeof d=="object"&&!Array.isArray(d)&&d!==null}function c(d,h){if(!f(d))throw new TypeError((0,u.stringify)(h)+" expected to be string but was: "+(0,u.stringify)(d));return d}function f(d){return Object.prototype.toString.call(d)==="[object String]"}e.ENCRYPTION_ON="ENCRYPTION_ON",e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(d){if(d===null)return!0;if(!l(d))return!1;for(var h in d)if(d[h]!==void 0)return!1;return!0},e.isObject=l,e.validateQueryAndParameters=function(d,h,v){var p,g,y="",b=h??{},m=(p=v==null?void 0:v.skipAsserts)!==null&&p!==void 0&&p;return typeof d=="string"?y=d:d instanceof String?y=d.toString():typeof d=="object"&&d.text!=null&&(y=d.text,b=(g=d.parameters)!==null&&g!==void 0?g:{}),m||(function(_){if(c(_,"Cypher query"),_.trim().length===0)throw new TypeError("Cypher query is expected to be a non-empty string.")}(y),function(_){if(!l(_)){var x=_.constructor!=null?" "+_.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(x," ").concat(JSON.stringify(_)))}}(b)),{validatedQuery:y,params:b}},e.assertObject=function(d,h){if(!l(d))throw new TypeError(h+" expected to be an object but was: "+(0,u.stringify)(d));return d},e.assertString=c,e.assertNumber=function(d,h){if(typeof d!="number")throw new TypeError(h+" expected to be a number but was: "+(0,u.stringify)(d));return d},e.assertNumberOrInteger=function(d,h){if(typeof d!="number"&&typeof d!="bigint"&&!(0,s.isInt)(d))throw new TypeError(h+" expected to be either a number or an Integer object but was: "+(0,u.stringify)(d));return d},e.assertValidDate=function(d,h){if(Object.prototype.toString.call(d)!=="[object Date]")throw new TypeError(h+" expected to be a standard JavaScript Date but was: "+(0,u.stringify)(d));if(Number.isNaN(d.getTime()))throw new TypeError(h+" expected to be valid JavaScript Date but its time was NaN: "+(0,u.stringify)(d));return d},e.isString=f,e.equals=function d(h,v){var p,g;if(h===v)return!0;if(h===null||v===null)return!1;if(typeof h=="object"&&typeof v=="object"){var y=Object.keys(h),b=Object.keys(v);if(y.length!==b.length)return!1;try{for(var m=o(y),_=m.next();!_.done;_=m.next()){var x=_.value;if(!d(h[x],v[x]))return!1}}catch(C){p={error:C}}finally{try{_&&!_.done&&(g=m.return)&&g.call(m)}finally{if(p)throw p.error}}return!0}return!1},e.toNumber=function(d){return d instanceof s.default?d.toNumber():typeof d=="bigint"?(0,s.int)(d).toNumber():d}},6625:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=void 0;var n=t(6728);e.combineAll=n.combineLatestAll},6637:function(r,e,t){var n=this&&this.__values||function(f){var d=typeof Symbol=="function"&&Symbol.iterator,h=d&&f[d],v=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=void 0;var i=t(2483),a=t(8014),o=t(7843),s=t(9445),u=t(3111),l=t(1342),c=t(7479);e.windowToggle=function(f,d){return o.operate(function(h,v){var p=[],g=function(y){for(;0<p.length;)p.shift().error(y);v.error(y)};s.innerFrom(f).subscribe(u.createOperatorSubscriber(v,function(y){var b=new i.Subject;p.push(b);var m,_=new a.Subscription;try{m=s.innerFrom(d(y))}catch(x){return void g(x)}v.next(b.asObservable()),_.add(m.subscribe(u.createOperatorSubscriber(v,function(){c.arrRemove(p,b),b.complete(),_.unsubscribe()},l.noop,g)))},l.noop)),h.subscribe(u.createOperatorSubscriber(v,function(y){var b,m,_=p.slice();try{for(var x=n(_),C=x.next();!C.done;C=x.next())C.value.next(y)}catch(w){b={error:w}}finally{try{C&&!C.done&&(m=x.return)&&m.call(x)}finally{if(b)throw b.error}}},function(){for(;0<p.length;)p.shift().complete();v.complete()},g,function(){for(;0<p.length;)p.shift().unsubscribe()}))})}},6640:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.identity=void 0,e.identity=function(t){return t}},6661:function(r,e,t){var n=this&&this.__read||function(u,l){var c=typeof Symbol=="function"&&u[Symbol.iterator];if(!c)return u;var f,d,h=c.call(u),v=[];try{for(;(l===void 0||l-- >0)&&!(f=h.next()).done;)v.push(f.value)}catch(p){d={error:p}}finally{try{f&&!f.done&&(c=h.return)&&c.call(h)}finally{if(d)throw d.error}}return v};Object.defineProperty(e,"__esModule",{value:!0});var i=t(9305),a=t(7168),o=t(3321),s=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new o.TypeTransformer({signature:78,isTypeInstance:function(u){return u instanceof i.Node},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("Node",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],d=l[2];return new i.Node(c,f,d)}})},createRelationshipTransformer:function(){return new o.TypeTransformer({signature:82,isTypeInstance:function(u){return u instanceof i.Relationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("Relationship",5,u.size);var l=n(u.fields,5),c=l[0],f=l[1],d=l[2],h=l[3],v=l[4];return new i.Relationship(c,f,d,h,v)}})},createUnboundRelationshipTransformer:function(){return new o.TypeTransformer({signature:114,isTypeInstance:function(u){return u instanceof i.UnboundRelationship},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("UnboundRelationship",3,u.size);var l=n(u.fields,3),c=l[0],f=l[1],d=l[2];return new i.UnboundRelationship(c,f,d)}})},createPathTransformer:function(){return new o.TypeTransformer({signature:80,isTypeInstance:function(u){return u instanceof i.Path},toStructure:function(u){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(u),s)},fromStructure:function(u){a.structure.verifyStructSize("Path",3,u.size);for(var l=n(u.fields,3),c=l[0],f=l[1],d=l[2],h=[],v=c[0],p=0;p<d.length;p+=2){var g=c[d[p+1]],y=(0,i.toNumber)(d[p]),b=void 0;y>0?(b=f[y-1])instanceof i.UnboundRelationship&&(f[y-1]=b=b.bindTo(v,g)):(b=f[-y-1])instanceof i.UnboundRelationship&&(f[-y-1]=b=b.bindTo(g,v)),h.push(new i.PathSegment(v,b,g)),v=g}return new i.Path(c[0],c[c.length-1],h)}})}}},6672:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(s,u,l,c){c===void 0&&(c=l);var f=Object.getOwnPropertyDescriptor(u,l);f&&!("get"in f?!u.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(s,c,f)}:function(s,u,l,c){c===void 0&&(c=l),s[c]=u[l]}),i=this&&this.__setModuleDefault||(Object.create?function(s,u){Object.defineProperty(s,"default",{enumerable:!0,value:u})}:function(s,u){s.default=u}),a=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var u={};if(s!=null)for(var l in s)l!=="default"&&Object.prototype.hasOwnProperty.call(s,l)&&n(u,s,l);return i(u,s),u},o=this&&this.__exportStar||function(s,u){for(var l in s)l==="default"||Object.prototype.hasOwnProperty.call(u,l)||n(u,s,l)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=a(t(4455)),e.bolt=a(t(7666)),e.buf=a(t(7174)),e.channel=a(t(7452)),e.packstream=a(t(7168)),o(t(9689),e)},6702:function(r,e){var t=this&&this.__values||function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],o=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(n,i){var a,o;if(n===i)return!0;if(n===null||i===null)return!1;if(typeof n=="object"&&typeof i=="object"){var s=Object.keys(n),u=Object.keys(i);if(s.length!==u.length)return!1;try{for(var l=t(s),c=l.next();!c.done;c=l.next()){var f=c.value;if(n[f]!==i[f])return!1}}catch(d){a={error:d}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(a)throw a.error}}return!0}return!1}},6728:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestAll=void 0;var n=t(3247),i=t(3638);e.combineLatestAll=function(a){return i.joinAllInternals(n.combineLatest,a)}},6746:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=void 0;var i=t(2483),a=t(7843),o=t(3111);e.windowCount=function(s,u){u===void 0&&(u=0);var l=u>0?u:s;return a.operate(function(c,f){var d=[new i.Subject],h=0;f.next(d[0].asObservable()),c.subscribe(o.createOperatorSubscriber(f,function(v){var p,g;try{for(var y=n(d),b=y.next();!b.done;b=y.next())b.value.next(v)}catch(x){p={error:x}}finally{try{b&&!b.done&&(g=y.return)&&g.call(y)}finally{if(p)throw p.error}}var m=h-s+1;if(m>=0&&m%l===0&&d.shift().complete(),++h%l===0){var _=new i.Subject;d.push(_),f.next(_.asObservable())}},function(){for(;d.length>0;)d.shift().complete();f.complete()},function(v){for(;d.length>0;)d.shift().error(v);f.error(v)},function(){d=null}))})}},6755:function(r,e){var t=this&&this.__awaiter||function(l,c,f,d){return new(f||(f=Promise))(function(h,v){function p(b){try{y(d.next(b))}catch(m){v(m)}}function g(b){try{y(d.throw(b))}catch(m){v(m)}}function y(b){var m;b.done?h(b.value):(m=b.value,m instanceof f?m:new f(function(_){_(m)})).then(p,g)}y((d=d.apply(l,c||[])).next())})},n=this&&this.__generator||function(l,c){var f,d,h,v,p={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return v={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function g(y){return function(b){return function(m){if(f)throw new TypeError("Generator is already executing.");for(;v&&(v=0,m[0]&&(p=0)),p;)try{if(f=1,d&&(h=2&m[0]?d.return:m[0]?d.throw||((h=d.return)&&h.call(d),0):d.next)&&!(h=h.call(d,m[1])).done)return h;switch(d=0,h&&(m=[2&m[0],h.value]),m[0]){case 0:case 1:h=m;break;case 4:return p.label++,{value:m[1],done:!1};case 5:p.label++,d=m[1],m=[0];continue;case 7:m=p.ops.pop(),p.trys.pop();continue;default:if(!((h=(h=p.trys).length>0&&h[h.length-1])||m[0]!==6&&m[0]!==2)){p=0;continue}if(m[0]===3&&(!h||m[1]>h[0]&&m[1]<h[3])){p.label=m[1];break}if(m[0]===6&&p.label<h[1]){p.label=h[1],h=m;break}if(h&&p.label<h[2]){p.label=h[2],p.ops.push(m);break}h[2]&&p.ops.pop(),p.trys.pop();continue}m=c.call(l,p)}catch(_){m=[6,_],d=0}finally{f=h=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([y,b])}}},i=this&&this.__values||function(l){var c=typeof Symbol=="function"&&Symbol.iterator,f=c&&l[c],d=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var d,h,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(d=v.next()).done;)p.push(d.value)}catch(g){h={error:g}}finally{try{d&&!d.done&&(f=v.return)&&f.call(v)}finally{if(h)throw h.error}}return p},o=this&&this.__spreadArray||function(l,c,f){if(f||arguments.length===2)for(var d,h=0,v=c.length;h<v;h++)!d&&h in c||(d||(d=Array.prototype.slice.call(c,0,h)),d[h]=c[h]);return l.concat(d||Array.prototype.slice.call(c))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var s=function(){function l(){throw new Error("Not implemented")}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){return n(this,function(d){throw new Error("Not implemented")})})},l.prototype.getBookmarks=function(){return t(this,void 0,void 0,function(){return n(this,function(c){throw new Error("Not implemented")})})},l}();e.default=s,e.bookmarkManager=function(l){l===void 0&&(l={});var c=new Set(l.initialBookmarks);return new u(c,l.bookmarksSupplier,l.bookmarksConsumer)};var u=function(){function l(c,f,d){this._bookmarks=c,this._bookmarksSupplier=f,this._bookmarksConsumer=d}return l.prototype.updateBookmarks=function(c,f){return t(this,void 0,void 0,function(){var d,h,v,p,g,y,b,m,_,x;return n(this,function(C){switch(C.label){case 0:d=this._bookmarks;try{for(h=i(c),v=h.next();!v.done;v=h.next())y=v.value,d.delete(y)}catch(w){b={error:w}}finally{try{v&&!v.done&&(m=h.return)&&m.call(h)}finally{if(b)throw b.error}}try{for(p=i(f),g=p.next();!g.done;g=p.next())y=g.value,d.add(y)}catch(w){_={error:w}}finally{try{g&&!g.done&&(x=p.return)&&x.call(p)}finally{if(_)throw _.error}}return typeof this._bookmarksConsumer!="function"?[3,2]:[4,this._bookmarksConsumer(o([],a(d),!1))];case 1:C.sent(),C.label=2;case 2:return[2]}})})},l.prototype.getBookmarks=function(){var c;return t(this,void 0,void 0,function(){var f,d,h,v,p,g,y;return n(this,function(b){switch(b.label){case 0:return f=new Set(this._bookmarks),typeof this._bookmarksSupplier!="function"?[3,2]:[4,this._bookmarksSupplier()];case 1:d=(c=b.sent())!==null&&c!==void 0?c:[];try{for(h=i(d),v=h.next();!v.done;v=h.next())p=v.value,f.add(p)}catch(m){g={error:m}}finally{try{v&&!v.done&&(y=h.return)&&y.call(h)}finally{if(g)throw g.error}}b.label=2;case 2:return[2,o([],a(f),!1)]}})})},l}()},6781:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(o,s,u,l){l===void 0&&(l=u);var c=Object.getOwnPropertyDescriptor(s,u);c&&!("get"in c?!s.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,l,c)}:function(o,s,u,l){l===void 0&&(l=u),o[l]=s[u]}),i=this&&this.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),a=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&n(s,o,u);return i(s,o),s};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=a(t(6492)),e.object=a(t(6702))},6804:r=>{r.exports=function(i,a){Array.isArray(a)||(a=[a]);var o=function(l){for(var c=-1,f=0;f<l.length;f++){var d=l[f];if(d.type==="preprocessor")/^#(extension|version)/.test(d.data)&&(c=Math.max(c,f));else if(d.type==="keyword"&&d.data==="precision"){var h=n(l,f);if(h===-1)throw new Error("precision statement not followed by any semicolons!");c=Math.max(c,h)}}return c+1}(i),s=o>0?i[o-1]:null;s&&t.test(s.data)&&i.splice(o++,0,e),i.splice.apply(i,[o,0].concat(a));var u=o+a.length;return i[u]&&/[^\r\n]$/.test(i[u].data)&&i.splice(u,0,e),i};var e={data:`
`,type:"whitespace"},t=/[^\r\n]$/;function n(i,a){for(var o=a;o<i.length;o++)if(i[o].type==="operator"&&i[o].data===";")return o;return-1}},6824:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromSubscribable=void 0;var n=t(4662);e.fromSubscribable=function(i){return new n.Observable(function(a){return i.subscribe(a)})}},6842:function(r,e,t){var n=this&&this.__awaiter||function(v,p,g,y){return new(g||(g=Promise))(function(b,m){function _(w){try{C(y.next(w))}catch(O){m(O)}}function x(w){try{C(y.throw(w))}catch(O){m(O)}}function C(w){var O;w.done?b(w.value):(O=w.value,O instanceof g?O:new g(function(A){A(O)})).then(_,x)}C((y=y.apply(v,p||[])).next())})},i=this&&this.__generator||function(v,p){var g,y,b,m,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return m={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function x(C){return function(w){return function(O){if(g)throw new TypeError("Generator is already executing.");for(;m&&(m=0,O[0]&&(_=0)),_;)try{if(g=1,y&&(b=2&O[0]?y.return:O[0]?y.throw||((b=y.return)&&b.call(y),0):y.next)&&!(b=b.call(y,O[1])).done)return b;switch(y=0,b&&(O=[2&O[0],b.value]),O[0]){case 0:case 1:b=O;break;case 4:return _.label++,{value:O[1],done:!1};case 5:_.label++,y=O[1],O=[0];continue;case 7:O=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||O[0]!==6&&O[0]!==2)){_=0;continue}if(O[0]===3&&(!b||O[1]>b[0]&&O[1]<b[3])){_.label=O[1];break}if(O[0]===6&&_.label<b[1]){_.label=b[1],b=O;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(O);break}b[2]&&_.ops.pop(),_.trys.pop();continue}O=p.call(v,_)}catch(A){O=[6,A],y=0}finally{g=b=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}([C,w])}}},a=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(7589)),s=t(9691),u=t(4883),l=function(){function v(p){var g=p.create,y=g===void 0?function(B,U,W){return n(z,void 0,void 0,function(){return i(this,function(Y){switch(Y.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,Y.sent()]}})})}:g,b=p.destroy,m=b===void 0?function(B){return n(z,void 0,void 0,function(){return i(this,function(U){switch(U.label){case 0:return[4,Promise.resolve()];case 1:return[2,U.sent()]}})})}:b,_=p.validateOnAcquire,x=_===void 0?function(B,U){return!0}:_,C=p.validateOnRelease,w=C===void 0?function(B){return!0}:C,O=p.installIdleObserver,A=O===void 0?function(B,U){}:O,k=p.removeIdleObserver,R=k===void 0?function(B){}:k,I=p.config,M=I===void 0?o.default.defaultConfig():I,N=p.log,F=N===void 0?u.Logger.noOp():N,z=this;this._create=y,this._destroy=m,this._validateOnAcquire=x,this._validateOnRelease=w,this._installIdleObserver=A,this._removeIdleObserver=R,this._maxSize=M.maxSize,this._acquisitionTimeout=M.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=F,this._closed=!1}return v.prototype.acquire=function(p,g,y){return n(this,void 0,void 0,function(){var b,m,_=this;return i(this,function(x){switch(x.label){case 0:return b=g.asKey(),(m=this._acquireRequests)[b]==null&&(m[b]=[]),[4,new Promise(function(C,w){var O=setTimeout(function(){var k=m[b];if(k!=null&&(m[b]=k.filter(function(M){return M!==A})),!A.isCompleted()){var R=_.activeResourceCount(g),I=_.has(g)?_._pools[b].length:0;A.reject((0,s.newError)("Connection acquisition timed out in ".concat(_._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(R,", Idle conn count = ").concat(I,".")))}},_._acquisitionTimeout);typeof O=="object"&&O.unref();var A=new d(b,p,y,C,w,O,_._log);m[b].push(A),_._processPendingAcquireRequests(g)})];case 1:return[2,x.sent()]}})})},v.prototype.purge=function(p){return n(this,void 0,void 0,function(){return i(this,function(g){switch(g.label){case 0:return[4,this._purgeKey(p.asKey())];case 1:return[2,g.sent()]}})})},v.prototype.apply=function(p,g){var y=p.asKey();y in this._pools&&this._pools[y].apply(g)},v.prototype.close=function(){return n(this,void 0,void 0,function(){var p=this;return i(this,function(g){switch(g.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(y){return n(p,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return[4,this._purgeKey(y)];case 1:return[2,b.sent()]}})})})).then()];case 1:return[2,g.sent()]}})})},v.prototype.keepAll=function(p){return n(this,void 0,void 0,function(){var g,y,b,m=this;return i(this,function(_){switch(_.label){case 0:return g=p.map(function(x){return x.asKey()}),y=Object.keys(this._pools),b=y.filter(function(x){return!g.includes(x)}),[4,Promise.all(b.map(function(x){return n(m,void 0,void 0,function(){return i(this,function(C){switch(C.label){case 0:return[4,this._purgeKey(x)];case 1:return[2,C.sent()]}})})})).then()];case 1:return[2,_.sent()]}})})},v.prototype.has=function(p){return p.asKey()in this._pools},v.prototype.activeResourceCount=function(p){var g;return(g=this._activeResourceCounts[p.asKey()])!==null&&g!==void 0?g:0},v.prototype._getOrInitializePoolFor=function(p){var g=this._pools[p];return g==null&&(g=new h,this._pools[p]=g,this._pendingCreates[p]=0),g},v.prototype._acquire=function(p,g,y){return n(this,void 0,void 0,function(){var b,m,_,x,C,w,O,A=this;return i(this,function(k){switch(k.label){case 0:if(this._closed)throw(0,s.newError)("Pool is closed, it is no more able to serve requests.");if(b=g.asKey(),m=this._getOrInitializePoolFor(b),y)return[3,10];k.label=1;case 1:if(!(m.length>0))return[3,10];if((_=m.pop())==null)return[3,1];c(b,this._activeResourceCounts),this._removeIdleObserver!=null&&this._removeIdleObserver(_),x=!1,k.label=2;case 2:return k.trys.push([2,4,,6]),[4,this._validateOnAcquire(p,_)];case 3:return x=k.sent(),[3,6];case 4:return C=k.sent(),f(b,this._activeResourceCounts),m.removeInUse(_),[4,this._destroy(_)];case 5:throw k.sent(),C;case 6:return x?(this._log.isDebugEnabled()&&this._log.debug("".concat(_," acquired from the pool ").concat(b)),[2,{resource:_,pool:m}]):[3,7];case 7:return f(b,this._activeResourceCounts),m.removeInUse(_),[4,this._destroy(_)];case 8:k.sent(),k.label=9;case 9:return[3,1];case 10:if(this._maxSize>0&&this.activeResourceCount(g)+this._pendingCreates[b]>=this._maxSize)return[2,{resource:null,pool:m}];this._pendingCreates[b]=this._pendingCreates[b]+1,k.label=11;case 11:return k.trys.push([11,,15,16]),this.activeResourceCount(g)+m.length>=this._maxSize&&y?(O=m.pop())==null?[3,13]:(this._removeIdleObserver!=null&&this._removeIdleObserver(O),m.removeInUse(O),[4,this._destroy(O)]):[3,13];case 12:k.sent(),k.label=13;case 13:return[4,this._create(p,g,function(R,I){return n(A,void 0,void 0,function(){return i(this,function(M){switch(M.label){case 0:return[4,this._release(R,I,m)];case 1:return[2,M.sent()]}})})})];case 14:return w=k.sent(),m.pushInUse(w),c(b,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(w," created for the pool ").concat(b)),[3,16];case 15:return this._pendingCreates[b]=this._pendingCreates[b]-1,[7];case 16:return[2,{resource:w,pool:m}]}})})},v.prototype._release=function(p,g,y){return n(this,void 0,void 0,function(){var b,m=this;return i(this,function(_){switch(_.label){case 0:b=p.asKey(),_.label=1;case 1:return _.trys.push([1,,9,10]),y.isActive()?[4,this._validateOnRelease(g)]:[3,6];case 2:return _.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(g," destroyed and can't be released to the pool ").concat(b," because it is not functional")),y.removeInUse(g),[4,this._destroy(g)]);case 3:return _.sent(),[3,5];case 4:this._installIdleObserver!=null&&this._installIdleObserver(g,{onError:function(x){m._log.debug("Idle connection ".concat(g," destroyed because of error: ").concat(x));var C=m._pools[b];C!=null&&(m._pools[b]=C.filter(function(w){return w!==g}),C.removeInUse(g)),m._destroy(g).catch(function(){})}}),y.push(g),this._log.isDebugEnabled()&&this._log.debug("".concat(g," released to the pool ").concat(b)),_.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(g," destroyed and can't be released to the pool ").concat(b," because pool has been purged")),y.removeInUse(g),[4,this._destroy(g)];case 7:_.sent(),_.label=8;case 8:return[3,10];case 9:return f(b,this._activeResourceCounts),this._processPendingAcquireRequests(p),[7];case 10:return[2]}})})},v.prototype._purgeKey=function(p){return n(this,void 0,void 0,function(){var g,y,b;return i(this,function(m){switch(m.label){case 0:if(g=this._pools[p],y=[],g==null)return[3,2];for(;g.length>0;)(b=g.pop())!=null&&(this._removeIdleObserver!=null&&this._removeIdleObserver(b),y.push(this._destroy(b)));return g.close(),delete this._pools[p],[4,Promise.all(y)];case 1:m.sent(),m.label=2;case 2:return[2]}})})},v.prototype._processPendingAcquireRequests=function(p){var g=this,y=p.asKey(),b=this._acquireRequests[y];if(b!=null){var m=b.shift();m!=null?this._acquire(m.context,p,m.requireNew).catch(function(_){return m.reject(_),{resource:null,pool:null}}).then(function(_){var x=_.resource,C=_.pool;x!=null&&C!=null?m.isCompleted()?g._release(p,x,C).catch(function(w){g._log.isDebugEnabled()&&g._log.debug("".concat(x," could not be release back to the pool. Cause: ").concat(w))}):m.resolve(x):m.isCompleted()||(g._acquireRequests[y]==null&&(g._acquireRequests[y]=[]),g._acquireRequests[y].unshift(m))}).catch(function(_){return m.reject(_)}):delete this._acquireRequests[y]}},v}();function c(v,p){var g,y=(g=p[v])!==null&&g!==void 0?g:0;p[v]=y+1}function f(v,p){var g,y=((g=p[v])!==null&&g!==void 0?g:0)-1;y>0?p[v]=y:delete p[v]}var d=function(){function v(p,g,y,b,m,_,x){this._key=p,this._context=g,this._resolve=b,this._reject=m,this._timeoutId=_,this._log=x,this._completed=!1,this._config=y??{}}return Object.defineProperty(v.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"requireNew",{get:function(){var p;return(p=this._config.requireNew)!==null&&p!==void 0&&p},enumerable:!1,configurable:!0}),v.prototype.isCompleted=function(){return this._completed},v.prototype.resolve=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(p," acquired from the pool ").concat(this._key)),this._resolve(p))},v.prototype.reject=function(p){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(p))},v}(),h=function(){function v(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return v.prototype.isActive=function(){return this._active},v.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},v.prototype.filter=function(p){return this._elements=this._elements.filter(p),this},v.prototype.apply=function(p){this._elements.forEach(p),this._elementsInUse.forEach(p)},Object.defineProperty(v.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),v.prototype.pop=function(){var p=this._elements.pop();return p!=null&&this._elementsInUse.add(p),p},v.prototype.push=function(p){return this._elementsInUse.delete(p),this._elements.push(p)},v.prototype.pushInUse=function(p){this._elementsInUse.add(p)},v.prototype.removeInUse=function(p){this._elementsInUse.delete(p)},v}();e.default=l},6872:function(r,e){var t=this&&this.__extends||function(){var a=function(o,s){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,l){u.__proto__=l}||function(u,l){for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(u[c]=l[c])},a(o,s)};return function(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function u(){this.constructor=o}a(o,s),o.prototype=s===null?Object.create(s):(u.prototype=s.prototype,new u)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var n=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=n;var i=function(a){function o(){return a!==null&&a.apply(this,arguments)||this}return t(o,a),o}(n);e.InternalConfig=i},6890:function(r,e,t){var n=this&&this.__extends||function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},d(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=h}d(h,v),h.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(d){for(var h,v=1,p=arguments.length;v<p;v++)for(var g in h=arguments[v])Object.prototype.hasOwnProperty.call(h,g)&&(d[g]=h[g]);return d},i.apply(this,arguments)},a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(5815)),s=a(t(3399)),u=a(t(3321)),l=t(9305).internal.constants.BOLT_PROTOCOL_V5_6,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),f=function(d){function h(){return d!==null&&d.apply(this,arguments)||this}return n(h,d),Object.defineProperty(h.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),h.prototype._enrichMetadata=function(v){return Array.isArray(v.statuses)&&(v.statuses=v.statuses.map(function(p){return i(i({},p),{diagnostic_record:p.diagnostic_record!==null?i(i({},c),p.diagnostic_record):null})})),v},h}(o.default);e.default=f},6894:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.lastValueFrom=void 0;var n=t(2823);e.lastValueFrom=function(i,a){var o=typeof a=="object";return new Promise(function(s,u){var l,c=!1;i.subscribe({next:function(f){l=f,c=!0},error:u,complete:function(){c?s(l):o?s(a.defaultValue):u(new n.EmptyError)}})})}},6902:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.flatMap=void 0;var n=t(983);e.flatMap=n.mergeMap},6931:r=>{r.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},6985:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleArray=void 0;var n=t(4662);e.scheduleArray=function(i,a){return new n.Observable(function(o){var s=0;return a.schedule(function(){s===i.length?o.complete():(o.next(i[s++]),o.closed||this.schedule())})})}},6995:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(x,C,w,O){O===void 0&&(O=w);var A=Object.getOwnPropertyDescriptor(C,w);A&&!("get"in A?!C.__esModule:A.writable||A.configurable)||(A={enumerable:!0,get:function(){return C[w]}}),Object.defineProperty(x,O,A)}:function(x,C,w,O){O===void 0&&(O=w),x[O]=C[w]}),i=this&&this.__setModuleDefault||(Object.create?function(x,C){Object.defineProperty(x,"default",{enumerable:!0,value:C})}:function(x,C){x.default=C}),a=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var C={};if(x!=null)for(var w in x)w!=="default"&&Object.prototype.hasOwnProperty.call(x,w)&&n(C,x,w);return i(C,x),C};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var o=a(t(6587));e.util=o;var s=a(t(5022));e.temporalUtil=s;var u=a(t(2696));e.observer=u;var l=a(t(9730));e.bookmarks=l;var c=a(t(326));e.constants=c;var f=a(t(3618));e.connectionHolder=f;var d=a(t(754));e.txConfig=d;var h=a(t(6189));e.transactionExecutor=h;var v=a(t(4883));e.logger=v;var p=a(t(407));e.urlUtil=p;var g=a(t(7509));e.serverAddress=g;var y=a(t(9470));e.resolver=y;var b=a(t(93));e.objectUtil=b;var m=a(t(3488));e.boltAgent=m;var _=a(t(2906));e.pool=_},7021:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var n=t(9305),i=n.internal.constants,a=i.ACCESS_MODE_READ,o=i.FETCH_ALL,s=n.internal.util.assertString,u=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=u;var l=function(){function m(_,x,C){this.signature=_,this.fields=x,this.toString=C}return m.init=function(_,x){return new m(1,[_,x],function(){return"INIT ".concat(_," {...}")})},m.run=function(_,x){return new m(16,[_,x],function(){return"RUN ".concat(_," ").concat(n.json.stringify(x))})},m.pullAll=function(){return v},m.reset=function(){return p},m.hello=function(_,x,C,w){C===void 0&&(C=null),w===void 0&&(w=null);var O=Object.assign({user_agent:_},x);return C&&(O.routing=C),w&&(O.patch_bolt=w),new m(1,[O],function(){return"HELLO {user_agent: '".concat(_,"', ...}")})},m.hello5x1=function(_,x){x===void 0&&(x=null);var C={user_agent:_};return x&&(C.routing=x),new m(1,[C],function(){return"HELLO {user_agent: '".concat(_,"', ...}")})},m.hello5x2=function(_,x,C){x===void 0&&(x=null),C===void 0&&(C=null);var w={user_agent:_};return d(w,x),C&&(w.routing=C),new m(1,[w],function(){return"HELLO ".concat(n.json.stringify(w))})},m.hello5x3=function(_,x,C,w){C===void 0&&(C=null),w===void 0&&(w=null);var O={};return _&&(O.user_agent=_),x&&(O.bolt_agent={product:x.product,platform:x.platform,language:x.language,language_details:x.languageDetails}),d(O,C),w&&(O.routing=w),new m(1,[O],function(){return"HELLO ".concat(n.json.stringify(O))})},m.hello5x5=function(_,x,C,w){C===void 0&&(C=null),w===void 0&&(w=null);var O={};return _&&(O.user_agent=_),x&&(O.bolt_agent={product:x.product,platform:x.platform,language:x.language,language_details:x.languageDetails}),h(O,C),w&&(O.routing=w),new m(1,[O],function(){return"HELLO ".concat(n.json.stringify(O))})},m.logon=function(_){return new m(106,[_],function(){return"LOGON { ... }"})},m.logoff=function(){return new m(107,[],function(){return"LOGOFF"})},m.begin=function(_){var x=_===void 0?{}:_,C=c(x.bookmarks,x.txConfig,x.database,x.mode,x.impersonatedUser,x.notificationFilter);return new m(17,[C],function(){return"BEGIN ".concat(n.json.stringify(C))})},m.begin5x5=function(_){var x=_===void 0?{}:_,C=c(x.bookmarks,x.txConfig,x.database,x.mode,x.impersonatedUser,x.notificationFilter,{appendNotificationFilter:h});return new m(17,[C],function(){return"BEGIN ".concat(n.json.stringify(C))})},m.commit=function(){return g},m.rollback=function(){return y},m.runWithMetadata=function(_,x,C){var w=C===void 0?{}:C,O=c(w.bookmarks,w.txConfig,w.database,w.mode,w.impersonatedUser,w.notificationFilter);return new m(16,[_,x,O],function(){return"RUN ".concat(_," ").concat(n.json.stringify(x)," ").concat(n.json.stringify(O))})},m.runWithMetadata5x5=function(_,x,C){var w=C===void 0?{}:C,O=c(w.bookmarks,w.txConfig,w.database,w.mode,w.impersonatedUser,w.notificationFilter,{appendNotificationFilter:h});return new m(16,[_,x,O],function(){return"RUN ".concat(_," ").concat(n.json.stringify(x)," ").concat(n.json.stringify(O))})},m.goodbye=function(){return b},m.pull=function(_){var x=_===void 0?{}:_,C=x.stmtId,w=C===void 0?-1:C,O=x.n,A=f(w??-1,(O===void 0?o:O)||o);return new m(63,[A],function(){return"PULL ".concat(n.json.stringify(A))})},m.discard=function(_){var x=_===void 0?{}:_,C=x.stmtId,w=C===void 0?-1:C,O=x.n,A=f(w??-1,(O===void 0?o:O)||o);return new m(47,[A],function(){return"DISCARD ".concat(n.json.stringify(A))})},m.telemetry=function(_){var x=_.api,C=(0,n.int)(x);return new m(84,[C],function(){return"TELEMETRY ".concat(C.toString())})},m.route=function(_,x,C){return _===void 0&&(_={}),x===void 0&&(x=[]),C===void 0&&(C=null),new m(102,[_,x,C],function(){return"ROUTE ".concat(n.json.stringify(_)," ").concat(n.json.stringify(x)," ").concat(C)})},m.routeV4x4=function(_,x,C){_===void 0&&(_={}),x===void 0&&(x=[]),C===void 0&&(C={});var w={};return C.databaseName&&(w.db=C.databaseName),C.impersonatedUser&&(w.imp_user=C.impersonatedUser),new m(102,[_,x,w],function(){return"ROUTE ".concat(n.json.stringify(_)," ").concat(n.json.stringify(x)," ").concat(n.json.stringify(w))})},m}();function c(m,_,x,C,w,O,A){var k;A===void 0&&(A={});var R={};return m.isEmpty()||(R.bookmarks=m.values()),_.timeout!==null&&(R.tx_timeout=_.timeout),_.metadata&&(R.tx_metadata=_.metadata),x&&(R.db=s(x,"database")),w&&(R.imp_user=s(w,"impersonatedUser")),C===a&&(R.mode="r"),((k=A.appendNotificationFilter)!==null&&k!==void 0?k:d)(R,O),R}function f(m,_){var x={n:(0,n.int)(_)};return m!==-1&&(x.qid=(0,n.int)(m)),x}function d(m,_){_&&(_.minimumSeverityLevel&&(m.notifications_minimum_severity=_.minimumSeverityLevel),_.disabledCategories&&(m.notifications_disabled_categories=_.disabledCategories),_.disabledClassifications&&(m.notifications_disabled_categories=_.disabledClassifications))}function h(m,_){_&&(_.minimumSeverityLevel&&(m.notifications_minimum_severity=_.minimumSeverityLevel),_.disabledCategories&&(m.notifications_disabled_classifications=_.disabledCategories),_.disabledClassifications&&(m.notifications_disabled_classifications=_.disabledClassifications))}e.default=l;var v=new l(63,[],function(){return"PULL_ALL"}),p=new l(15,[],function(){return"RESET"}),g=new l(18,[],function(){return"COMMIT"}),y=new l(19,[],function(){return"ROLLBACK"}),b=new l(2,[],function(){return"GOODBYE"})},7041:function(r,e,t){var n=this&&this.__awaiter||function(s,u,l,c){return new(l||(l=Promise))(function(f,d){function h(g){try{p(c.next(g))}catch(y){d(y)}}function v(g){try{p(c.throw(g))}catch(y){d(y)}}function p(g){var y;g.done?f(g.value):(y=g.value,y instanceof l?y:new l(function(b){b(y)})).then(h,v)}p((c=c.apply(s,u||[])).next())})},i=this&&this.__generator||function(s,u){var l,c,f,d,h={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return d={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function v(p){return function(g){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;d&&(d=0,y[0]&&(h=0)),h;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return h.label++,{value:y[1],done:!1};case 5:h.label++,c=y[1],y=[0];continue;case 7:y=h.ops.pop(),h.trys.pop();continue;default:if(!((f=(f=h.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){h=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){h.label=y[1];break}if(y[0]===6&&h.label<f[1]){h.label=f[1],f=y;break}if(f&&h.label<f[2]){h.label=f[2],h.ops.push(y);break}f[2]&&h.ops.pop(),h.trys.pop();continue}y=u.call(s,h)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([p,g])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=t(326),o=function(){function s(u){this._createSession=u}return s.prototype.execute=function(u,l,c){return n(this,void 0,void 0,function(){var f,d,h=this;return i(this,function(v){switch(v.label){case 0:f=this._createSession({database:u.database,bookmarkManager:u.bookmarkManager,impersonatedUser:u.impersonatedUser,auth:u.auth}),p=u.signal,g="abort",y=function(){return n(h,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return[4,f.close()];case 1:return[2,b.sent()]}})})},typeof(p==null?void 0:p.addEventListener)=="function"&&p.addEventListener(g,y),d={uninstall:function(){typeof(p==null?void 0:p.removeEventListener)=="function"&&p.removeEventListener(g,y)}},f._configureTransactionExecutor(!0,a.TELEMETRY_APIS.EXECUTE_QUERY),v.label=1;case 1:return v.trys.push([1,,3,5]),[4,(u.routing==="READ"?f.executeRead.bind(f):f.executeWrite.bind(f))(function(b){return n(h,void 0,void 0,function(){var m;return i(this,function(_){switch(_.label){case 0:return m=b.run(l,c),[4,u.resultTransformer(m)];case 1:return[2,_.sent()]}})})},u.transactionConfig)];case 2:return[2,v.sent()];case 3:return d.uninstall(),[4,f.close()];case 4:return v.sent(),[7];case 5:return[2]}var p,g,y})})},s}();e.default=o},7045:(r,e,t)=>{var n=t(3206);r.exports=function(i,a){var o=n(a),s=[];return(s=s.concat(o(i))).concat(o(null))}},7057:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArgumentOutOfRangeError=void 0;var n=t(5568);e.ArgumentOutOfRangeError=n.createErrorClass(function(i){return function(){i(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})},7093:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var n=t(6587),i="__isPoint__",a=function(){function s(u,l,c,f){this.srid=(0,n.assertNumberOrInteger)(u,"SRID"),this.x=(0,n.assertNumber)(l,"X coordinate"),this.y=(0,n.assertNumber)(c,"Y coordinate"),this.z=f==null?f:(0,n.assertNumber)(f,"Z coordinate"),Object.freeze(this)}return s.prototype.toString=function(){return this.z==null||isNaN(this.z)?"Point{srid=".concat(o(this.srid),", x=").concat(o(this.x),", y=").concat(o(this.y),"}"):"Point{srid=".concat(o(this.srid),", x=").concat(o(this.x),", y=").concat(o(this.y),", z=").concat(o(this.z),"}")},s}();function o(s){return Number.isInteger(s)?s.toString()+".0":s.toString()}e.Point=a,Object.defineProperty(a.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(s){return s!=null&&s[i]===!0}},7101:r=>{r.exports=function(e){return!(!e||typeof e=="string")&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String"))}},7110:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.executeSchedule=void 0,e.executeSchedule=function(t,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!1);var s=n.schedule(function(){i(),o?t.add(this.schedule(null,a)):this.unsubscribe()},a);if(t.add(s),!o)return s}},7168:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,d){d===void 0&&(d=f);var h=Object.getOwnPropertyDescriptor(c,f);h&&!("get"in h?!c.__esModule:h.writable||h.configurable)||(h={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,d,h)}:function(l,c,f,d){d===void 0&&(d=f),l[d]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var o=a(t(5361));e.v1=o;var s=a(t(2072));e.v2=s;var u=a(t(7665));e.structure=u,e.default=s},7174:function(r,e,t){var n=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=n(t(45));e.BaseBuffer=i.default,e.default=i.default},7192:r=>{r.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7210:function(r,e,t){var n=this&&this.__values||function(f){var d=typeof Symbol=="function"&&Symbol.iterator,h=d&&f[d],v=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=void 0;var i=t(8014),a=t(7843),o=t(3111),s=t(7479),u=t(7961),l=t(1107),c=t(7110);e.bufferTime=function(f){for(var d,h,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var g=(d=l.popScheduler(v))!==null&&d!==void 0?d:u.asyncScheduler,y=(h=v[0])!==null&&h!==void 0?h:null,b=v[1]||1/0;return a.operate(function(m,_){var x=[],C=!1,w=function(k){var R=k.buffer;k.subs.unsubscribe(),s.arrRemove(x,k),_.next(R),C&&O()},O=function(){if(x){var k=new i.Subscription;_.add(k);var R={buffer:[],subs:k};x.push(R),c.executeSchedule(k,g,function(){return w(R)},f)}};y!==null&&y>=0?c.executeSchedule(_,g,O,y,!0):C=!0,O();var A=o.createOperatorSubscriber(_,function(k){var R,I,M=x.slice();try{for(var N=n(M),F=N.next();!F.done;F=N.next()){var z=F.value,B=z.buffer;B.push(k),b<=B.length&&w(z)}}catch(U){R={error:U}}finally{try{F&&!F.done&&(I=N.return)&&I.call(N)}finally{if(R)throw R.error}}},function(){for(;x!=null&&x.length;)_.next(x.shift().buffer);A==null||A.unsubscribe(),_.complete(),_.unsubscribe()},void 0,function(){return x=null});m.subscribe(A)})}},7220:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=void 0;var n=t(1637),i=t(8918);e.publishBehavior=function(a){return function(o){var s=new n.BehaviorSubject(a);return new i.ConnectableObservable(o,function(){return s})}}},7245:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TestTools=e.Immediate=void 0;var t,n=1,i={};function a(o){return o in i&&(delete i[o],!0)}e.Immediate={setImmediate:function(o){var s=n++;return i[s]=!0,t||(t=Promise.resolve()),t.then(function(){return a(s)&&o()}),s},clearImmediate:function(o){a(o)}},e.TestTools={pending:function(){return Object.keys(i).length}}},7264:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(k){for(var R,I=1,M=arguments.length;I<M;I++)for(var N in R=arguments[I])Object.prototype.hasOwnProperty.call(R,N)&&(k[N]=R[N]);return k},n.apply(this,arguments)},i=this&&this.__awaiter||function(k,R,I,M){return new(I||(I=Promise))(function(N,F){function z(W){try{U(M.next(W))}catch(Y){F(Y)}}function B(W){try{U(M.throw(W))}catch(Y){F(Y)}}function U(W){var Y;W.done?N(W.value):(Y=W.value,Y instanceof I?Y:new I(function(H){H(Y)})).then(z,B)}U((M=M.apply(k,R||[])).next())})},a=this&&this.__generator||function(k,R){var I,M,N,F,z={label:0,sent:function(){if(1&N[0])throw N[1];return N[1]},trys:[],ops:[]};return F={next:B(0),throw:B(1),return:B(2)},typeof Symbol=="function"&&(F[Symbol.iterator]=function(){return this}),F;function B(U){return function(W){return function(Y){if(I)throw new TypeError("Generator is already executing.");for(;F&&(F=0,Y[0]&&(z=0)),z;)try{if(I=1,M&&(N=2&Y[0]?M.return:Y[0]?M.throw||((N=M.return)&&N.call(M),0):M.next)&&!(N=N.call(M,Y[1])).done)return N;switch(M=0,N&&(Y=[2&Y[0],N.value]),Y[0]){case 0:case 1:N=Y;break;case 4:return z.label++,{value:Y[1],done:!1};case 5:z.label++,M=Y[1],Y=[0];continue;case 7:Y=z.ops.pop(),z.trys.pop();continue;default:if(!((N=(N=z.trys).length>0&&N[N.length-1])||Y[0]!==6&&Y[0]!==2)){z=0;continue}if(Y[0]===3&&(!N||Y[1]>N[0]&&Y[1]<N[3])){z.label=Y[1];break}if(Y[0]===6&&z.label<N[1]){z.label=N[1],N=Y;break}if(N&&z.label<N[2]){z.label=N[2],z.ops.push(Y);break}N[2]&&z.ops.pop(),z.trys.pop();continue}Y=R.call(k,z)}catch(H){Y=[6,H],M=0}finally{I=N=0}if(5&Y[0])throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}([U,W])}}},o=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var s=t(9730),u=o(t(8341)),l=t(326),c=t(4883),f=o(t(5481)),d=t(6587),h=t(6755),v=o(t(1573)),p=o(t(7041)),g=t(9691),y=o(t(3001)),b=t(6030),m=l.ACCESS_MODE_READ;e.READ=m;var _=l.ACCESS_MODE_WRITE;e.WRITE=_;var x=0;e.SessionConfig=function(){this.defaultAccessMode=_,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};var C={WRITE:"WRITE",READ:"READ"};e.routing=C,Object.freeze(C),e.QueryConfig=function(){this.routing=C.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};var w=function(){function k(R,I,M,N,F){I===void 0&&(I={}),N===void 0&&(N=function(B){return new f.default(B)}),F===void 0&&(F=function(B){return new p.default(B)}),function(B){B.maxConnectionLifetime=O(B.maxConnectionLifetime,36e5),B.maxConnectionPoolSize=O(B.maxConnectionPoolSize,l.DEFAULT_POOL_MAX_SIZE),B.connectionAcquisitionTimeout=O(B.connectionAcquisitionTimeout,l.DEFAULT_POOL_ACQUISITION_TIMEOUT),B.fetchSize=A(B.fetchSize,1e3),B.connectionTimeout=function(U){var W=parseInt(U.connectionTimeout,10);return W===0||!isNaN(W)&&W<0?null:isNaN(W)?l.DEFAULT_CONNECTION_TIMEOUT_MILLIS:W}(B),B.connectionLivenessCheckTimeout=function(U){if(U!=null){var W=parseInt(U,10);if(W<0||Number.isNaN(W))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(W));return W}}(B.connectionLivenessCheckTimeout)}(I);var z=c.Logger.create(I);(function(B,U){var W,Y,H=B.resolver;if(H!=null&&typeof H!="function")throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof H));if(B.connectionAcquisitionTimeout<B.connectionTimeout&&U.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),((W=B.notificationFilter)===null||W===void 0?void 0:W.disabledCategories)!=null&&((Y=B.notificationFilter)===null||Y===void 0?void 0:Y.disabledClassifications)!=null)throw new Error(`The notificationFilter can't have both "disabledCategories" and  "disabledClassifications" configured at the same time.`)})(I,z),this._id=x++,this._meta=R,this._config=I,this._log=z,this._createConnectionProvider=M,this._createSession=N,this._defaultExecuteQueryBookmarkManager=(0,h.bookmarkManager)(),this._queryExecutor=F(this.session.bind(this)),this._connectionProvider=null,this.homeDatabaseCache=new y.default(1e4),this._afterConstruction()}return Object.defineProperty(k.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),k.prototype.executeQuery=function(R,I,M){var N,F,z;return M===void 0&&(M={}),i(this,void 0,void 0,function(){var B,U,W;return a(this,function(Y){switch(Y.label){case 0:if(B=M.bookmarkManager===null?void 0:(N=M.bookmarkManager)!==null&&N!==void 0?N:this.executeQueryBookmarkManager,U=(F=M.resultTransformer)!==null&&F!==void 0?F:v.default.eagerResultTransformer(),(W=(z=M.routing)!==null&&z!==void 0?z:C.WRITE)!==C.READ&&W!==C.WRITE)throw(0,g.newError)('Illegal query routing config: "'.concat(W,'"'));return[4,this._queryExecutor.execute({resultTransformer:U,bookmarkManager:B,routing:W,database:M.database,impersonatedUser:M.impersonatedUser,transactionConfig:M.transactionConfig,auth:M.auth,signal:M.signal},R,I)];case 1:return[2,Y.sent()]}})})},k.prototype.verifyConnectivity=function(R){var I=(R===void 0?{}:R).database,M=I===void 0?"":I;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:M,accessMode:m})},k.prototype.verifyAuthentication=function(R){var I=R===void 0?{}:R,M=I.database,N=I.auth;return i(this,void 0,void 0,function(){return a(this,function(F){switch(F.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:M??"system",auth:N,accessMode:m})];case 1:return[2,F.sent()]}})})},k.prototype.getServerInfo=function(R){var I=(R===void 0?{}:R).database,M=I===void 0?"":I;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:M,accessMode:m})},k.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},k.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},k.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},k.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},k.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},k.prototype.isEncrypted=function(){return this._isEncrypted()},k.prototype._supportsRouting=function(){return this._meta.routing},k.prototype._isEncrypted=function(){return this._config.encrypted===d.ENCRYPTION_ON||this._config.encrypted===!0},k.prototype._getTrust=function(){return this._config.trust},k.prototype.session=function(R){var I=R===void 0?{}:R,M=I.defaultAccessMode,N=M===void 0?_:M,F=I.bookmarks,z=I.database,B=z===void 0?"":z,U=I.impersonatedUser,W=I.fetchSize,Y=I.bookmarkManager,H=I.notificationFilter,J=I.auth;return this._newSession({defaultAccessMode:N,bookmarkOrBookmarks:F,database:B,reactive:!1,impersonatedUser:U,fetchSize:A(W,this._config.fetchSize),bookmarkManager:Y,notificationFilter:H,auth:J})},k.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),this._connectionProvider!=null?this._connectionProvider.close():Promise.resolve()},k.prototype[Symbol.asyncDispose]=function(){return this.close()},k.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},k.prototype._homeDatabaseCallback=function(R,I){this.homeDatabaseCache.set(R,I)},k.prototype._newSession=function(R){var I=R.defaultAccessMode,M=R.bookmarkOrBookmarks,N=R.database,F=R.reactive,z=R.impersonatedUser,B=R.fetchSize,U=R.bookmarkManager,W=R.notificationFilter,Y=R.auth,H=f.default._validateSessionMode(I),J=this._getOrCreateConnectionProvider(),le=this.homeDatabaseCache.get((0,b.cacheKey)(Y,z)),fe=this._homeDatabaseCallback.bind(this),ue=M!=null?new s.Bookmarks(M):s.Bookmarks.empty();return this._createSession({mode:H,database:N??"",connectionProvider:J,bookmarks:ue,config:n({cachedHomeDatabase:le,routingDriver:this._supportsRouting()},this._config),reactive:F,impersonatedUser:z,fetchSize:B,bookmarkManager:U,notificationFilter:W,auth:Y,log:this._log,homeDatabaseCallback:fe})},k.prototype._getOrCreateConnectionProvider=function(){var R;return this._connectionProvider==null&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(R=this._config,new u.default(R.resolver)))),this._connectionProvider},k}();function O(k,R){var I=parseInt(k,10);return I>0||I===0?I:I<0?Number.MAX_SAFE_INTEGER:R}function A(k,R){var I=parseInt(k,10);if(I>0||I===l.FETCH_ALL)return I;if(I===0||I<0)throw new Error("The fetch size can only be a positive value or ".concat(l.FETCH_ALL," for ALL. However fetchSize = ").concat(I));return R}e.Driver=w,e.default=w},7286:function(r,e,t){var n=this&&this.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var v,p,g=h.call(f),y=[];try{for(;(d===void 0||d-- >0)&&!(v=g.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(p)throw p.error}}return y},i=this&&this.__spreadArray||function(f,d){for(var h=0,v=d.length,p=f.length;h<v;h++,p++)f[p]=d[h];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.zip=void 0;var a=t(4662),o=t(9445),s=t(8535),u=t(8616),l=t(3111),c=t(1107);e.zip=function(){for(var f=[],d=0;d<arguments.length;d++)f[d]=arguments[d];var h=c.popResultSelector(f),v=s.argsOrArgArray(f);return v.length?new a.Observable(function(p){var g=v.map(function(){return[]}),y=v.map(function(){return!1});p.add(function(){g=y=null});for(var b=function(_){o.innerFrom(v[_]).subscribe(l.createOperatorSubscriber(p,function(x){if(g[_].push(x),g.every(function(w){return w.length})){var C=g.map(function(w){return w.shift()});p.next(h?h.apply(void 0,i([],n(C))):C),g.some(function(w,O){return!w.length&&y[O]})&&p.complete()}},function(){y[_]=!0,!g[_].length&&p.complete()}))},m=0;!p.closed&&m<v.length;m++)b(m);return function(){g=y=null}}):u.EMPTY}},7302:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=void 0;var n=t(983),i=t(6640);e.mergeAll=function(a){return a===void 0&&(a=1/0),n.mergeMap(i.identity,a)}},7315:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reportUnhandledError=void 0;var n=t(3413),i=t(9155);e.reportUnhandledError=function(a){i.timeoutProvider.setTimeout(function(){var o=n.config.onUnhandledError;if(!o)throw a;o(a)})}},7331:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(5348));e.default=n({},a.default)},7360:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsArgArrayOrObject=void 0;var t=Array.isArray,n=Object.getPrototypeOf,i=Object.prototype,a=Object.keys;e.argsArgArrayOrObject=function(o){if(o.length===1){var s=o[0];if(t(s))return{args:s,keys:null};if((l=s)&&typeof l=="object"&&n(l)===i){var u=a(s);return{args:u.map(function(c){return s[c]}),keys:u}}}var l;return{args:o,keys:null}}},7372:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=void 0;var n=t(7843),i=t(3111),a=t(9445),o=t(1342);e.skipUntil=function(s){return n.operate(function(u,l){var c=!1,f=i.createOperatorSubscriber(l,function(){f==null||f.unsubscribe(),c=!0},o.noop);a.innerFrom(s).subscribe(f),u.subscribe(i.createOperatorSubscriber(l,function(d){return c&&l.next(d)}))})}},7428:function(r,e,t){var n=this&&this.__extends||function(){var ve=function(de,ie){return ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,re){Q.__proto__=re}||function(Q,re){for(var se in re)Object.prototype.hasOwnProperty.call(re,se)&&(Q[se]=re[se])},ve(de,ie)};return function(de,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Class extends value "+String(ie)+" is not a constructor or null");function Q(){this.constructor=de}ve(de,ie),de.prototype=ie===null?Object.create(ie):(Q.prototype=ie.prototype,new Q)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(ve){for(var de,ie=1,Q=arguments.length;ie<Q;ie++)for(var re in de=arguments[ie])Object.prototype.hasOwnProperty.call(de,re)&&(ve[re]=de[re]);return ve},i.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(ve,de,ie,Q){Q===void 0&&(Q=ie);var re=Object.getOwnPropertyDescriptor(de,ie);re&&!("get"in re?!de.__esModule:re.writable||re.configurable)||(re={enumerable:!0,get:function(){return de[ie]}}),Object.defineProperty(ve,Q,re)}:function(ve,de,ie,Q){Q===void 0&&(Q=ie),ve[Q]=de[ie]}),o=this&&this.__setModuleDefault||(Object.create?function(ve,de){Object.defineProperty(ve,"default",{enumerable:!0,value:de})}:function(ve,de){ve.default=de}),s=this&&this.__importStar||function(ve){if(ve&&ve.__esModule)return ve;var de={};if(ve!=null)for(var ie in ve)ie!=="default"&&Object.prototype.hasOwnProperty.call(ve,ie)&&a(de,ve,ie);return o(de,ve),de},u=this&&this.__awaiter||function(ve,de,ie,Q){return new(ie||(ie=Promise))(function(re,se){function pe(Re){try{Ce(Q.next(Re))}catch(be){se(be)}}function Oe(Re){try{Ce(Q.throw(Re))}catch(be){se(be)}}function Ce(Re){var be;Re.done?re(Re.value):(be=Re.value,be instanceof ie?be:new ie(function(j){j(be)})).then(pe,Oe)}Ce((Q=Q.apply(ve,de||[])).next())})},l=this&&this.__generator||function(ve,de){var ie,Q,re,se,pe={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return se={next:Oe(0),throw:Oe(1),return:Oe(2)},typeof Symbol=="function"&&(se[Symbol.iterator]=function(){return this}),se;function Oe(Ce){return function(Re){return function(be){if(ie)throw new TypeError("Generator is already executing.");for(;se&&(se=0,be[0]&&(pe=0)),pe;)try{if(ie=1,Q&&(re=2&be[0]?Q.return:be[0]?Q.throw||((re=Q.return)&&re.call(Q),0):Q.next)&&!(re=re.call(Q,be[1])).done)return re;switch(Q=0,re&&(be=[2&be[0],re.value]),be[0]){case 0:case 1:re=be;break;case 4:return pe.label++,{value:be[1],done:!1};case 5:pe.label++,Q=be[1],be=[0];continue;case 7:be=pe.ops.pop(),pe.trys.pop();continue;default:if(!((re=(re=pe.trys).length>0&&re[re.length-1])||be[0]!==6&&be[0]!==2)){pe=0;continue}if(be[0]===3&&(!re||be[1]>re[0]&&be[1]<re[3])){pe.label=be[1];break}if(be[0]===6&&pe.label<re[1]){pe.label=re[1],re=be;break}if(re&&pe.label<re[2]){pe.label=re[2],pe.ops.push(be);break}re[2]&&pe.ops.pop(),pe.trys.pop();continue}be=de.call(ve,pe)}catch(j){be=[6,j],Q=0}finally{ie=re=0}if(5&be[0])throw be[1];return{value:be[0]?be[1]:void 0,done:!0}}([Ce,Re])}}},c=this&&this.__values||function(ve){var de=typeof Symbol=="function"&&Symbol.iterator,ie=de&&ve[de],Q=0;if(ie)return ie.call(ve);if(ve&&typeof ve.length=="number")return{next:function(){return ve&&Q>=ve.length&&(ve=void 0),{value:ve&&ve[Q++],done:!ve}}};throw new TypeError(de?"Object is not iterable.":"Symbol.iterator is not defined.")},f=this&&this.__read||function(ve,de){var ie=typeof Symbol=="function"&&ve[Symbol.iterator];if(!ie)return ve;var Q,re,se=ie.call(ve),pe=[];try{for(;(de===void 0||de-- >0)&&!(Q=se.next()).done;)pe.push(Q.value)}catch(Oe){re={error:Oe}}finally{try{Q&&!Q.done&&(ie=se.return)&&ie.call(se)}finally{if(re)throw re.error}}return pe},d=this&&this.__importDefault||function(ve){return ve&&ve.__esModule?ve:{default:ve}};Object.defineProperty(e,"__esModule",{value:!0});var h=t(9305),v=s(t(206)),p=t(7452),g=d(t(4132)),y=d(t(8987)),b=t(4455),m=t(7721),_=t(6781),x=h.error.SERVICE_UNAVAILABLE,C=h.error.SESSION_EXPIRED,w=h.internal.bookmarks.Bookmarks,O=h.internal.constants,A=O.ACCESS_MODE_READ,k=O.ACCESS_MODE_WRITE,R=O.BOLT_PROTOCOL_V3,I=O.BOLT_PROTOCOL_V4_0,M=O.BOLT_PROTOCOL_V4_4,N=O.BOLT_PROTOCOL_V5_1,F="Neo.ClientError.Database.DatabaseNotFound",z="Neo.ClientError.Transaction.InvalidBookmark",B="Neo.ClientError.Transaction.InvalidBookmarkMixture",U="Neo.ClientError.Security.AuthorizationExpired",W="Neo.ClientError.Statement.ArgumentError",Y="Neo.ClientError.Request.Invalid",H="Neo.ClientError.Statement.TypeError",J="N/A",le=null,fe=(0,h.int)(3e4),ue=function(ve){function de(ie){var Q=ie.id,re=ie.address,se=ie.routingContext,pe=ie.hostNameResolver,Oe=ie.config,Ce=ie.log,Re=ie.userAgent,be=ie.boltAgent,j=ie.authTokenManager,G=ie.routingTablePurgeDelay,$=ie.newPool,te=ve.call(this,{id:Q,config:Oe,log:Ce,userAgent:Re,boltAgent:be,authTokenManager:j,newPool:$},function(ce){return u(te,void 0,void 0,function(){var he,xe;return l(this,function(Ne){switch(Ne.label){case 0:return he=m.createChannelConnection,xe=[ce,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,he.apply(void 0,xe.concat([Ne.sent(),this._routingContext,this._channelSsrCallback.bind(this)]))]}})})})||this;return te._routingContext=i(i({},se),{address:re.toString()}),te._seedRouter=re,te._rediscovery=new v.default(te._routingContext),te._loadBalancingStrategy=new b.LeastConnectedLoadBalancingStrategy(te._connectionPool),te._hostNameResolver=pe,te._dnsResolver=new p.HostNameResolver,te._log=Ce,te._useSeedRouter=!0,te._routingTableRegistry=new ge(G?(0,h.int)(G):fe),te._refreshRoutingTable=_.functional.reuseOngoingRequest(te._refreshRoutingTable,te),te._withSSR=0,te._withoutSSR=0,te}return n(de,ve),de.prototype._createConnectionErrorHandler=function(){return new m.ConnectionErrorHandler(C)},de.prototype._handleUnavailability=function(ie,Q,re){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(Q," for database '").concat(re,"' because of an error ").concat(ie.code," '").concat(ie.message,"'")),this.forget(Q,re||le),ie},de.prototype._handleSecurityError=function(ie,Q,re,se){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(Q," for database '").concat(se,"' because of an error ").concat(ie.code," '").concat(ie.message,"'")),ve.prototype._handleSecurityError.call(this,ie,Q,re,se)},de.prototype._handleWriteFailure=function(ie,Q,re){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(Q," for database '").concat(re,"' because of an error ").concat(ie.code," '").concat(ie.message,"'")),this.forgetWriter(Q,re||le),(0,h.newError)("No longer possible to write to server at "+Q,C,ie)},de.prototype.acquireConnection=function(ie){var Q=ie===void 0?{}:ie,re=Q.accessMode,se=Q.database,pe=Q.bookmarks,Oe=Q.impersonatedUser,Ce=Q.onDatabaseNameResolved,Re=Q.auth,be=Q.homeDb;return u(this,void 0,void 0,function(){var j,G,$,te,ce,he=this;return l(this,function(xe){switch(xe.label){case 0:return j={database:se||le},G=new m.ConnectionErrorHandler(C,function(Ne,We){return he._handleUnavailability(Ne,We,j.database)},function(Ne,We){return he._handleWriteFailure(Ne,We,be??j.database)},function(Ne,We,ot){return he._handleSecurityError(Ne,We,ot,j.database)}),this.SSREnabled()&&be!==void 0&&se===""?!(te=this._routingTableRegistry.get(be,function(){return new v.RoutingTable({database:be})}))||te.isStaleFor(re)?[3,2]:[4,this.getConnectionFromRoutingTable(te,Re,re,G)]:[3,2];case 1:if($=xe.sent(),this.SSREnabled())return[2,$];$.release(),xe.label=2;case 2:return[4,this._freshRoutingTable({accessMode:re,database:j.database,bookmarks:pe,impersonatedUser:Oe,auth:Re,onDatabaseNameResolved:function(Ne){j.database=j.database||Ne,Ce&&Ce(Ne)}})];case 3:return ce=xe.sent(),[2,this.getConnectionFromRoutingTable(ce,Re,re,G)]}})})},de.prototype.getConnectionFromRoutingTable=function(ie,Q,re,se){return u(this,void 0,void 0,function(){var pe,Oe,Ce,Re;return l(this,function(be){switch(be.label){case 0:if(re===A)Oe=this._loadBalancingStrategy.selectReader(ie.readers),pe="read";else{if(re!==k)throw(0,h.newError)("Illegal mode "+re);Oe=this._loadBalancingStrategy.selectWriter(ie.writers),pe="write"}if(!Oe)throw(0,h.newError)("Failed to obtain connection towards ".concat(pe," server. Known routing table is: ").concat(ie),C);be.label=1;case 1:return be.trys.push([1,5,,6]),[4,this._connectionPool.acquire({auth:Q},Oe)];case 2:return Ce=be.sent(),Q?[4,this._verifyStickyConnection({auth:Q,connection:Ce,address:Oe})]:[3,4];case 3:return be.sent(),[2,Ce];case 4:return[2,new m.DelegateConnection(Ce,se)];case 5:throw Re=be.sent(),se.handleAndTransformError(Re,Oe);case 6:return[2]}})})},de.prototype._hasProtocolVersion=function(ie){return u(this,void 0,void 0,function(){var Q,re,se,pe,Oe,Ce;return l(this,function(Re){switch(Re.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:Q=Re.sent(),se=0,Re.label=2;case 2:if(!(se<Q.length))return[3,8];Re.label=3;case 3:return Re.trys.push([3,6,,7]),[4,this._createChannelConnection(Q[se])];case 4:return pe=Re.sent(),Oe=pe.protocol()?pe.protocol().version:null,[4,pe.close()];case 5:return Re.sent(),Oe?[2,ie(Oe)]:[2,!1];case 6:return Ce=Re.sent(),re=Ce,[3,7];case 7:return se++,[3,2];case 8:if(re)throw re;return[2,!1]}})})},de.prototype.supportsMultiDb=function(){return u(this,void 0,void 0,function(){return l(this,function(ie){switch(ie.label){case 0:return[4,this._hasProtocolVersion(function(Q){return Q>=I})];case 1:return[2,ie.sent()]}})})},de.prototype.supportsTransactionConfig=function(){return u(this,void 0,void 0,function(){return l(this,function(ie){switch(ie.label){case 0:return[4,this._hasProtocolVersion(function(Q){return Q>=R})];case 1:return[2,ie.sent()]}})})},de.prototype.supportsUserImpersonation=function(){return u(this,void 0,void 0,function(){return l(this,function(ie){switch(ie.label){case 0:return[4,this._hasProtocolVersion(function(Q){return Q>=M})];case 1:return[2,ie.sent()]}})})},de.prototype.supportsSessionAuth=function(){return u(this,void 0,void 0,function(){return l(this,function(ie){switch(ie.label){case 0:return[4,this._hasProtocolVersion(function(Q){return Q>=N})];case 1:return[2,ie.sent()]}})})},de.prototype.getNegotiatedProtocolVersion=function(){var ie=this;return new Promise(function(Q,re){ie._hasProtocolVersion(Q).catch(re)})},de.prototype.verifyAuthentication=function(ie){var Q=ie.database,re=ie.accessMode,se=ie.auth;return u(this,void 0,void 0,function(){var pe=this;return l(this,function(Oe){return[2,this._verifyAuthentication({auth:se,getAddress:function(){return u(pe,void 0,void 0,function(){var Ce,Re,be;return l(this,function(j){switch(j.label){case 0:return Ce={database:Q||le},[4,this._freshRoutingTable({accessMode:re,database:Ce.database,auth:se,onDatabaseNameResolved:function(G){Ce.database=Ce.database||G}})];case 1:if(Re=j.sent(),(be=re===k?Re.writers:Re.readers).length===0)throw(0,h.newError)("No servers available for database '".concat(Ce.database,"' with access mode '").concat(re,"'"),x);return[2,be[0]]}})})}})]})})},de.prototype.verifyConnectivityAndGetServerInfo=function(ie){var Q=ie.database,re=ie.accessMode;return u(this,void 0,void 0,function(){var se,pe,Oe,Ce,Re,be,j,G,$,te,ce;return l(this,function(he){switch(he.label){case 0:return se={database:Q||le},[4,this._freshRoutingTable({accessMode:re,database:se.database,onDatabaseNameResolved:function(xe){se.database=se.database||xe}})];case 1:pe=he.sent(),Oe=re===k?pe.writers:pe.readers,Ce=(0,h.newError)("No servers available for database '".concat(se.database,"' with access mode '").concat(re,"'"),x),he.label=2;case 2:he.trys.push([2,9,10,11]),Re=c(Oe),be=Re.next(),he.label=3;case 3:if(be.done)return[3,8];j=be.value,he.label=4;case 4:return he.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:j})];case 5:return[2,he.sent()];case 6:return G=he.sent(),Ce=G,[3,7];case 7:return be=Re.next(),[3,3];case 8:return[3,11];case 9:return $=he.sent(),te={error:$},[3,11];case 10:try{be&&!be.done&&(ce=Re.return)&&ce.call(Re)}finally{if(te)throw te.error}return[7];case 11:throw Ce}})})},de.prototype.forget=function(ie,Q){this._routingTableRegistry.apply(Q,{applyWhenExists:function(re){return re.forget(ie)}}),this._connectionPool.purge(ie).catch(function(){})},de.prototype.forgetWriter=function(ie,Q){this._routingTableRegistry.apply(Q,{applyWhenExists:function(re){return re.forgetWriter(ie)}})},de.prototype._freshRoutingTable=function(ie){var Q=ie===void 0?{}:ie,re=Q.accessMode,se=Q.database,pe=Q.bookmarks,Oe=Q.impersonatedUser,Ce=Q.onDatabaseNameResolved,Re=Q.auth,be=this._routingTableRegistry.get(se,function(){return new v.RoutingTable({database:se})});return be.isStaleFor(re)?(this._log.info('Routing table is stale for database: "'.concat(se,'" and access mode: "').concat(re,'": ').concat(be)),this._refreshRoutingTable(be,pe,Oe,Re).then(function(j){return Ce(j.database),j})):be},de.prototype._refreshRoutingTable=function(ie,Q,re,se){var pe=ie.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(pe,ie,Q,re,se):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(pe,ie,Q,re,se)},de.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(ie,Q,re,se,pe){return u(this,void 0,void 0,function(){var Oe,Ce,Re,be,j,G,$;return l(this,function(te){switch(te.label){case 0:return Oe=[],[4,this._fetchRoutingTableUsingSeedRouter(Oe,this._seedRouter,Q,re,se,pe)];case 1:return Ce=f.apply(void 0,[te.sent(),2]),Re=Ce[0],be=Ce[1],Re?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(ie,Q,re,se,pe)];case 3:j=f.apply(void 0,[te.sent(),2]),G=j[0],$=j[1],Re=G,be=$||be,te.label=4;case 4:return[4,this._applyRoutingTableIfPossible(Q,Re,be)];case 5:return[2,te.sent()]}})})},de.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(ie,Q,re,se,pe){return u(this,void 0,void 0,function(){var Oe,Ce,Re,be;return l(this,function(j){switch(j.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(ie,Q,re,se,pe)];case 1:return Oe=f.apply(void 0,[j.sent(),2]),Ce=Oe[0],Re=Oe[1],Ce?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(ie,this._seedRouter,Q,re,se,pe)];case 2:be=f.apply(void 0,[j.sent(),2]),Ce=be[0],Re=be[1],j.label=3;case 3:return[4,this._applyRoutingTableIfPossible(Q,Ce,Re)];case 4:return[2,j.sent()]}})})},de.prototype._fetchRoutingTableUsingKnownRouters=function(ie,Q,re,se,pe){return u(this,void 0,void 0,function(){var Oe,Ce,Re,be;return l(this,function(j){switch(j.label){case 0:return[4,this._fetchRoutingTable(ie,Q,re,se,pe)];case 1:return Oe=f.apply(void 0,[j.sent(),2]),Ce=Oe[0],Re=Oe[1],Ce?[2,[Ce,null]]:(be=ie.length-1,de._forgetRouter(Q,ie,be),[2,[null,Re]])}})})},de.prototype._fetchRoutingTableUsingSeedRouter=function(ie,Q,re,se,pe,Oe){return u(this,void 0,void 0,function(){var Ce,Re;return l(this,function(be){switch(be.label){case 0:return[4,this._resolveSeedRouter(Q)];case 1:return Ce=be.sent(),Re=Ce.filter(function(j){return ie.indexOf(j)<0}),[4,this._fetchRoutingTable(Re,re,se,pe,Oe)];case 2:return[2,be.sent()]}})})},de.prototype._resolveSeedRouter=function(ie){return u(this,void 0,void 0,function(){var Q,re,se=this;return l(this,function(pe){switch(pe.label){case 0:return[4,this._hostNameResolver.resolve(ie)];case 1:return Q=pe.sent(),[4,Promise.all(Q.map(function(Oe){return se._dnsResolver.resolve(Oe)}))];case 2:return re=pe.sent(),[2,[].concat.apply([],re)]}})})},de.prototype._fetchRoutingTable=function(ie,Q,re,se,pe){return u(this,void 0,void 0,function(){var Oe=this;return l(this,function(Ce){return[2,ie.reduce(function(Re,be,j){return u(Oe,void 0,void 0,function(){var G,$,te,ce,he,xe,Ne;return l(this,function(We){switch(We.label){case 0:return[4,Re];case 1:return G=f.apply(void 0,[We.sent(),1]),($=G[0])?[2,[$,null]]:(te=j-1,de._forgetRouter(Q,ie,te),[4,this._createSessionForRediscovery(be,re,se,pe)]);case 2:if(ce=f.apply(void 0,[We.sent(),2]),he=ce[0],xe=ce[1],!he)return[3,8];We.label=3;case 3:return We.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(he,Q.database,be,se)];case 4:return[2,[We.sent(),null]];case 5:return Ne=We.sent(),[2,this._handleRediscoveryError(Ne,be)];case 6:return he.close(),[7];case 7:return[3,9];case 8:return[2,[null,xe]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},de.prototype._createSessionForRediscovery=function(ie,Q,re,se){return u(this,void 0,void 0,function(){var pe,Oe,Ce,Re,be,j=this;return l(this,function(G){switch(G.label){case 0:return G.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:se},ie)];case 1:return pe=G.sent(),se?[4,this._verifyStickyConnection({auth:se,connection:pe,address:ie})]:[3,3];case 2:G.sent(),G.label=3;case 3:return Oe=m.ConnectionErrorHandler.create({errorCode:C,handleSecurityError:function($,te,ce){return j._handleSecurityError($,te,ce)}}),Ce=pe._sticky?new m.DelegateConnection(pe):new m.DelegateConnection(pe,Oe),Re=new g.default(Ce),pe.protocol().version<4?[2,[new h.Session({mode:k,bookmarks:w.empty(),connectionProvider:Re}),null]]:[2,[new h.Session({mode:A,database:"system",bookmarks:Q,connectionProvider:Re,impersonatedUser:re}),null]];case 4:return be=G.sent(),[2,this._handleRediscoveryError(be,ie)];case 5:return[2]}})})},de.prototype._handleRediscoveryError=function(ie,Q){if(function(re){return[F,z,B,W,Y,H,J].includes(re.code)}(ie)||function(re){return re.code.startsWith("Neo.ClientError.Security.")&&![U].includes(re.code)}(ie))throw ie;if(ie.code==="Neo.ClientError.Procedure.ProcedureNotFound")throw(0,h.newError)("Server at ".concat(Q.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),x,ie);return this._log.warn("unable to fetch routing table because of an error ".concat(ie)),[null,ie]},de.prototype._applyRoutingTableIfPossible=function(ie,Q,re){return u(this,void 0,void 0,function(){return l(this,function(se){switch(se.label){case 0:if(!Q)throw(0,h.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(ie),x,re);return Q.writers.length===0&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(Q)];case 1:return se.sent(),[2,Q]}})})},de.prototype._updateRoutingTable=function(ie){return u(this,void 0,void 0,function(){return l(this,function(Q){switch(Q.label){case 0:return[4,this._connectionPool.keepAll(ie.allServers())];case 1:return Q.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(ie),this._log.info("Updated routing table ".concat(ie)),[2]}})})},de._forgetRouter=function(ie,Q,re){var se=Q[re];ie&&se&&ie.forgetRouter(se)},de.prototype._channelSsrCallback=function(ie,Q){if(Q==="OPEN")ie===!0?this._withSSR=this._withSSR+1:this._withoutSSR=this._withoutSSR+1;else{if(Q!=="CLOSE")throw(0,h.newError)("Channel SSR Callback invoked with action other than 'OPEN' or 'CLOSE'");ie===!0?this._withSSR=this._withSSR-1:this._withoutSSR=this._withoutSSR-1}},de.prototype.SSREnabled=function(){return this._withSSR>0&&this._withoutSSR===0},de}(y.default);e.default=ue;var ge=function(){function ve(de){this._tables=new Map,this._routingTablePurgeDelay=de}return ve.prototype.register=function(de){return this._tables.set(de.database,de),this},ve.prototype.apply=function(de,ie){var Q=ie===void 0?{}:ie,re=Q.applyWhenExists,se=Q.applyWhenDontExists,pe=se===void 0?function(){}:se;return this._tables.has(de)?re(this._tables.get(de)):typeof de=="string"||de===null?pe():this._forEach(re),this},ve.prototype.get=function(de,ie){return this._tables.has(de)?this._tables.get(de):typeof ie=="function"?ie():ie},ve.prototype.removeExpired=function(){var de=this;return this._removeIf(function(ie){return ie.isExpiredFor(de._routingTablePurgeDelay)})},ve.prototype._forEach=function(de){var ie,Q;try{for(var re=c(this._tables),se=re.next();!se.done;se=re.next())de(f(se.value,2)[1])}catch(pe){ie={error:pe}}finally{try{se&&!se.done&&(Q=re.return)&&Q.call(re)}finally{if(ie)throw ie.error}}return this},ve.prototype._remove=function(de){return this._tables.delete(de),this},ve.prototype._removeIf=function(de){var ie,Q;try{for(var re=c(this._tables),se=re.next();!se.done;se=re.next()){var pe=f(se.value,2),Oe=pe[0];de(pe[1])&&this._remove(Oe)}}catch(Ce){ie={error:Ce}}finally{try{se&&!se.done&&(Q=re.return)&&Q.call(re)}finally{if(ie)throw ie.error}}return this},ve}()},7441:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=void 0;var n=t(7800),i=t(7843),a=t(3111);e.dematerialize=function(){return i.operate(function(o,s){o.subscribe(a.createOperatorSubscriber(s,function(u){return n.observeNotification(u,s)}))})}},7449:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(c){for(var f,d=1,h=arguments.length;d<h;d++)for(var v in f=arguments[d])Object.prototype.hasOwnProperty.call(f,v)&&(c[v]=f[v]);return c},n.apply(this,arguments)},i=this&&this.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h,v,p=d.call(c),g=[];try{for(;(f===void 0||f-- >0)&&!(h=p.next()).done;)g.push(h.value)}catch(y){v={error:y}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(v)throw v.error}}return g},a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(7168),s=t(9305),u=a(t(7518)),l=a(t(5045));e.default=n(n(n({},u.default),l.default),{createNodeTransformer:function(c){return u.default.createNodeTransformer(c).extendsWith({fromStructure:function(f){o.structure.verifyStructSize("Node",4,f.size);var d=i(f.fields,4),h=d[0],v=d[1],p=d[2],g=d[3];return new s.Node(h,v,p,g)}})},createRelationshipTransformer:function(c){return u.default.createRelationshipTransformer(c).extendsWith({fromStructure:function(f){o.structure.verifyStructSize("Relationship",8,f.size);var d=i(f.fields,8),h=d[0],v=d[1],p=d[2],g=d[3],y=d[4],b=d[5],m=d[6],_=d[7];return new s.Relationship(h,v,p,g,y,b,m,_)}})},createUnboundRelationshipTransformer:function(c){return u.default.createUnboundRelationshipTransformer(c).extendsWith({fromStructure:function(f){o.structure.verifyStructSize("UnboundRelationship",4,f.size);var d=i(f.fields,4),h=d[0],v=d[1],p=d[2],g=d[3];return new s.UnboundRelationship(h,v,p,g)}})}})},7452:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,d){d===void 0&&(d=f);var h=Object.getOwnPropertyDescriptor(c,f);h&&!("get"in h?!c.__esModule:h.writable||h.configurable)||(h={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,d,h)}:function(l,c,f,d){d===void 0&&(d=f),l[d]=c[f]}),i=this&&this.__exportStar||function(l,c){for(var f in l)f==="default"||Object.prototype.hasOwnProperty.call(c,f)||n(c,l,f)},a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(t(3951),e),i(t(373),e);var o=t(2481);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return a(o).default}});var s=t(5319);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return s.alloc}});var u=t(3473);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return a(u).default}})},7479:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.arrRemove=void 0,e.arrRemove=function(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}},7509:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(l,c,f,d){d===void 0&&(d=f);var h=Object.getOwnPropertyDescriptor(c,f);h&&!("get"in h?!c.__esModule:h.writable||h.configurable)||(h={enumerable:!0,get:function(){return c[f]}}),Object.defineProperty(l,d,h)}:function(l,c,f,d){d===void 0&&(d=f),l[d]=c[f]}),i=this&&this.__setModuleDefault||(Object.create?function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}:function(l,c){l.default=c}),a=this&&this.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var f in l)f!=="default"&&Object.prototype.hasOwnProperty.call(l,f)&&n(c,l,f);return i(c,l),c};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var o=t(6587),s=a(t(407)),u=function(){function l(c,f,d,h){this._host=(0,o.assertString)(c,"host"),this._resolved=f!=null?(0,o.assertString)(f,"resolved"):null,this._port=(0,o.assertNumber)(d,"port"),this._hostPort=h,this._stringValue=f!=null?"".concat(h,"(").concat(f,")"):"".concat(h)}return l.prototype.host=function(){return this._host},l.prototype.resolvedHost=function(){return this._resolved!=null?this._resolved:this._host},l.prototype.port=function(){return this._port},l.prototype.resolveWith=function(c){return new l(this._host,c,this._port,this._hostPort)},l.prototype.asHostPort=function(){return this._hostPort},l.prototype.asKey=function(){return this._hostPort},l.prototype.toString=function(){return this._stringValue},l.fromUrl=function(c){var f=s.parseDatabaseUrl(c);return new l(f.host,null,f.port,f.hostAndPort)},l}();e.ServerAddress=u},7518:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(7331));e.default=n({},a.default)},7521:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(2066));e.default=n({},a.default)},7561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=void 0;var n=t(7843),i=t(3111);e.refCount=function(){return n.operate(function(a,o){var s=null;a._refCount++;var u=i.createOperatorSubscriber(o,void 0,void 0,void 0,function(){if(!a||a._refCount<=0||0<--a._refCount)s=null;else{var l=a._connection,c=s;s=null,!l||c&&l!==c||l.unsubscribe(),o.unsubscribe()}});a.subscribe(u),u.closed||(s=a.connect())})}},7579:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.connectable=void 0;var n=t(2483),i=t(4662),a=t(9353),o={connector:function(){return new n.Subject},resetOnDisconnect:!0};e.connectable=function(s,u){u===void 0&&(u=o);var l=null,c=u.connector,f=u.resetOnDisconnect,d=f===void 0||f,h=c(),v=new i.Observable(function(p){return h.subscribe(p)});return v.connect=function(){return l&&!l.closed||(l=a.defer(function(){return s}).subscribe(h),d&&l.add(function(){return h=c()})),l},v}},7589:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var t=100;e.DEFAULT_MAX_SIZE=t;var n=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=n;var i=function(){function s(u,l){this.maxSize=a(u,t),this.acquisitionTimeout=a(l,n)}return s.defaultConfig=function(){return new s(t,n)},s.fromDriverConfig=function(u){return new s(o(u.maxConnectionPoolSize)?u.maxConnectionPoolSize:t,o(u.connectionAcquisitionTimeout)?u.connectionAcquisitionTimeout:n)},s}();function a(s,u){return o(s)?s:u}function o(s){return s===0||s!=null}e.default=i},7601:function(r,e,t){var n=this&&this.__read||function(l,c){var f=typeof Symbol=="function"&&l[Symbol.iterator];if(!f)return l;var d,h,v=f.call(l),p=[];try{for(;(c===void 0||c-- >0)&&!(d=v.next()).done;)p.push(d.value)}catch(g){h={error:g}}finally{try{d&&!d.done&&(f=v.return)&&f.call(v)}finally{if(h)throw h.error}}return p},i=this&&this.__spreadArray||function(l,c){for(var f=0,d=c.length,h=l.length;f<d;f++,h++)l[h]=c[f];return l};Object.defineProperty(e,"__esModule",{value:!0}),e.concat=void 0;var a=t(7843),o=t(8158),s=t(1107),u=t(4917);e.concat=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var f=s.popScheduler(l);return a.operate(function(d,h){o.concatAll()(u.from(i([d],n(l)),f)).subscribe(h)})}},7610:function(r,e,t){var n=this&&this.__generator||function(u,l){var c,f,d,h,v={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(y){return function(b){if(c)throw new TypeError("Generator is already executing.");for(;v;)try{if(c=1,f&&(d=2&b[0]?f.return:b[0]?f.throw||((d=f.return)&&d.call(f),0):f.next)&&!(d=d.call(f,b[1])).done)return d;switch(f=0,d&&(b=[2&b[0],d.value]),b[0]){case 0:case 1:d=b;break;case 4:return v.label++,{value:b[1],done:!1};case 5:v.label++,f=b[1],b=[0];continue;case 7:b=v.ops.pop(),v.trys.pop();continue;default:if(!((d=(d=v.trys).length>0&&d[d.length-1])||b[0]!==6&&b[0]!==2)){v=0;continue}if(b[0]===3&&(!d||b[1]>d[0]&&b[1]<d[3])){v.label=b[1];break}if(b[0]===6&&v.label<d[1]){v.label=d[1],d=b;break}if(d&&v.label<d[2]){v.label=d[2],v.ops.push(b);break}d[2]&&v.ops.pop(),v.trys.pop();continue}b=l.call(u,v)}catch(m){b=[6,m],f=0}finally{c=d=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([g,y])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.generate=void 0;var i=t(6640),a=t(8613),o=t(9353),s=t(8808);e.generate=function(u,l,c,f,d){var h,v,p,g;function y(){var b;return n(this,function(m){switch(m.label){case 0:b=g,m.label=1;case 1:return l&&!l(b)?[3,4]:[4,p(b)];case 2:m.sent(),m.label=3;case 3:return b=c(b),[3,1];case 4:return[2]}})}return arguments.length===1?(g=(h=u).initialState,l=h.condition,c=h.iterate,v=h.resultSelector,p=v===void 0?i.identity:v,d=h.scheduler):(g=u,!f||a.isScheduler(f)?(p=i.identity,d=f):p=f),o.defer(d?function(){return s.scheduleIterable(y(),d)}:y)}},7614:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createInvalidObservableTypeError=void 0,e.createInvalidObservableTypeError=function(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}},7629:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=void 0;var n=t(1018);e.isPromise=function(i){return n.isFunction(i==null?void 0:i.then)}},7640:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=void 0;var n=t(7961),i=t(8941),a=t(4092);e.throttleTime=function(o,s,u){s===void 0&&(s=n.asyncScheduler);var l=a.timer(o,s);return i.throttle(function(){return l},u)}},7661:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expand=void 0;var n=t(7843),i=t(1983);e.expand=function(a,o,s){return o===void 0&&(o=1/0),o=(o||0)<1?1/0:o,n.operate(function(u,l){return i.mergeInternals(u,l,a,o,void 0,!0,s)})}},7665:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var n=t(9305),i=n.error.PROTOCOL_ERROR,a=function(){function o(s,u){this.signature=s,this.fields=u}return Object.defineProperty(o.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),o.prototype.toString=function(){for(var s="",u=0;u<this.fields.length;u++)u>0&&(s+=", "),s+=this.fields[u];return"Structure("+this.signature+", ["+s+"])"},o}();e.Structure=a,e.verifyStructSize=function(o,s,u){if(s!==u)throw(0,n.newError)("Wrong struct size for ".concat(o,", expected ").concat(s," but was ").concat(u),i)},e.default=a},7666:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(c,f,d,h){h===void 0&&(h=d);var v=Object.getOwnPropertyDescriptor(f,d);v&&!("get"in v?!f.__esModule:v.writable||v.configurable)||(v={enumerable:!0,get:function(){return f[d]}}),Object.defineProperty(c,h,v)}:function(c,f,d,h){h===void 0&&(h=d),c[h]=f[d]}),i=this&&this.__exportStar||function(c,f){for(var d in c)d==="default"||Object.prototype.hasOwnProperty.call(f,d)||n(f,c,d)},a=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var o=a(t(8731)),s=a(t(6544)),u=a(t(9054)),l=a(t(7790));i(t(9014),e),e.BoltProtocol=u.default,e.RawRoutingTable=l.default,e.default={handshake:o.default,create:s.default}},7714:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createFind=e.find=void 0;var n=t(7843),i=t(3111);function a(o,s,u){var l=u==="index";return function(c,f){var d=0;c.subscribe(i.createOperatorSubscriber(f,function(h){var v=d++;o.call(s,h,v,c)&&(f.next(l?v:h),f.complete())},function(){f.next(l?-1:void 0),f.complete()}))}}e.find=function(o,s){return n.operate(a(o,s,"value"))},e.createFind=a},7721:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(f,d,h,v){v===void 0&&(v=h);var p=Object.getOwnPropertyDescriptor(d,h);p&&!("get"in p?!d.__esModule:p.writable||p.configurable)||(p={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(f,v,p)}:function(f,d,h,v){v===void 0&&(v=h),f[v]=d[h]}),i=this&&this.__setModuleDefault||(Object.create?function(f,d){Object.defineProperty(f,"default",{enumerable:!0,value:d})}:function(f,d){f.default=d}),a=this&&this.__importStar||function(f){if(f&&f.__esModule)return f;var d={};if(f!=null)for(var h in f)h!=="default"&&Object.prototype.hasOwnProperty.call(f,h)&&n(d,f,h);return i(d,f),d},o=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var s=o(t(6385));e.Connection=s.default;var u=a(t(8031));e.ChannelConnection=u.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});var l=o(t(9857));e.DelegateConnection=l.default;var c=o(t(2363));e.ConnectionErrorHandler=c.default,e.default=s.default},7740:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.pairs=void 0;var n=t(4917);e.pairs=function(i,a){return n.from(Object.entries(i),a)}},7790:function(r,e,t){var n=this&&this.__extends||function(){var l=function(c,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,h){d.__proto__=h}||function(d,h){for(var v in h)Object.prototype.hasOwnProperty.call(h,v)&&(d[v]=h[v])},l(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function d(){this.constructor=c}l(c,f),c.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}(),i=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),i(t(9305));var a=function(){function l(){}return l.ofRecord=function(c){return c===null?l.ofNull():new u(c)},l.ofMessageResponse=function(c){return c===null?l.ofNull():new o(c)},l.ofNull=function(){return new s},Object.defineProperty(l.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),l}();e.default=a;var o=function(l){function c(f){var d=l.call(this)||this;return d._response=f,d}return n(c,l),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return this._response===null},enumerable:!1,configurable:!0}),c}(a),s=function(l){function c(){return l!==null&&l.apply(this,arguments)||this}return n(c,l),Object.defineProperty(c.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),c}(a),u=function(l){function c(f){var d=l.call(this)||this;return d._record=f,d}return n(c,l),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return this._record===null},enumerable:!1,configurable:!0}),c}(a)},7800:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeNotification=e.Notification=e.NotificationKind=void 0;var n,i=t(8616),a=t(1004),o=t(1103),s=t(1018);(n=e.NotificationKind||(e.NotificationKind={})).NEXT="N",n.ERROR="E",n.COMPLETE="C";var u=function(){function c(f,d,h){this.kind=f,this.value=d,this.error=h,this.hasValue=f==="N"}return c.prototype.observe=function(f){return l(this,f)},c.prototype.do=function(f,d,h){var v=this,p=v.kind,g=v.value,y=v.error;return p==="N"?f==null?void 0:f(g):p==="E"?d==null?void 0:d(y):h==null?void 0:h()},c.prototype.accept=function(f,d,h){var v;return s.isFunction((v=f)===null||v===void 0?void 0:v.next)?this.observe(f):this.do(f,d,h)},c.prototype.toObservable=function(){var f=this,d=f.kind,h=f.value,v=f.error,p=d==="N"?a.of(h):d==="E"?o.throwError(function(){return v}):d==="C"?i.EMPTY:0;if(!p)throw new TypeError("Unexpected notification kind "+d);return p},c.createNext=function(f){return new c("N",f)},c.createError=function(f){return new c("E",void 0,f)},c.createComplete=function(){return c.completeNotification},c.completeNotification=new c("C"),c}();function l(c,f){var d,h,v,p=c,g=p.kind,y=p.value,b=p.error;if(typeof g!="string")throw new TypeError('Invalid notification, missing "kind"');g==="N"?(d=f.next)===null||d===void 0||d.call(f,y):g==="E"?(h=f.error)===null||h===void 0||h.call(f,b):(v=f.complete)===null||v===void 0||v.call(f)}e.Notification=u,e.observeNotification=l},7815:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=void 0;var n=t(4662),i=t(9445),a=t(2483),o=t(7843),s=t(3111);e.groupBy=function(u,l,c,f){return o.operate(function(d,h){var v;l&&typeof l!="function"?(c=l.duration,v=l.element,f=l.connector):v=l;var p=new Map,g=function(x){p.forEach(x),x(h)},y=function(x){return g(function(C){return C.error(x)})},b=0,m=!1,_=new s.OperatorSubscriber(h,function(x){try{var C=u(x),w=p.get(C);if(!w){p.set(C,w=f?f():new a.Subject);var O=(k=C,R=w,(I=new n.Observable(function(M){b++;var N=R.subscribe(M);return function(){N.unsubscribe(),--b===0&&m&&_.unsubscribe()}})).key=k,I);if(h.next(O),c){var A=s.createOperatorSubscriber(w,function(){w.complete(),A==null||A.unsubscribe()},void 0,void 0,function(){return p.delete(C)});_.add(i.innerFrom(c(O)).subscribe(A))}}w.next(v?v(x):x)}catch(M){y(M)}var k,R,I},function(){return g(function(x){return x.complete()})},y,function(){return p.clear()},function(){return m=!0,b===0});d.subscribe(_)})}},7835:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retry=void 0;var n=t(7843),i=t(3111),a=t(6640),o=t(4092),s=t(9445);e.retry=function(u){var l;u===void 0&&(u=1/0);var c=(l=u&&typeof u=="object"?u:{count:u}).count,f=c===void 0?1/0:c,d=l.delay,h=l.resetOnSuccess,v=h!==void 0&&h;return f<=0?a.identity:n.operate(function(p,g){var y,b=0,m=function(){var _=!1;y=p.subscribe(i.createOperatorSubscriber(g,function(x){v&&(b=0),g.next(x)},void 0,function(x){if(b++<f){var C=function(){y?(y.unsubscribe(),y=null,m()):_=!0};if(d!=null){var w=typeof d=="number"?o.timer(d):s.innerFrom(d(x,b)),O=i.createOperatorSubscriber(g,function(){O.unsubscribe(),C()},function(){g.complete()});w.subscribe(O)}else C()}else g.error(x)})),_&&(y.unsubscribe(),y=null,m())};m()})}},7843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.operate=e.hasLift=void 0;var n=t(1018);function i(a){return n.isFunction(a==null?void 0:a.lift)}e.hasLift=i,e.operate=function(a){return function(o){if(i(o))return o.lift(function(s){try{return a(s,this)}catch(u){this.error(u)}});throw new TypeError("Unable to lift unknown Observable type")}}},7853:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.using=void 0;var n=t(4662),i=t(9445),a=t(8616);e.using=function(o,s){return new n.Observable(function(u){var l=o(),c=s(l);return(c?i.innerFrom(c):a.EMPTY).subscribe(u),function(){l&&l.unsubscribe()}})}},7857:function(r,e,t){var n=this&&this.__extends||function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},d(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=h}d(h,v),h.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.WRITE=e.READ=e.Driver=void 0;var a=t(9305),o=i(t(3466)),s=a.internal.constants.FETCH_ALL,u=a.driver.READ,l=a.driver.WRITE;e.READ=u,e.WRITE=l;var c=function(d){function h(){return d!==null&&d.apply(this,arguments)||this}return n(h,d),h.prototype.rxSession=function(v){var p=v===void 0?{}:v,g=p.defaultAccessMode,y=g===void 0?l:g,b=p.bookmarks,m=p.database,_=m===void 0?"":m,x=p.fetchSize,C=p.impersonatedUser,w=p.bookmarkManager,O=p.notificationFilter,A=p.auth;return new o.default({session:this._newSession({defaultAccessMode:y,bookmarkOrBookmarks:b,database:_,impersonatedUser:C,auth:A,reactive:!1,fetchSize:f(x,this._config.fetchSize),bookmarkManager:w,notificationFilter:O,log:this._log}),config:this._config,log:this._log})},h}(a.Driver);function f(d,h){var v=parseInt(d,10);if(v>0||v===s)return v;if(v===0||v<0)throw new Error("The fetch size can only be a positive value or ".concat(s," for ALL. However fetchSize = ").concat(v));return h}e.Driver=c,e.default=c},7961:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.async=e.asyncScheduler=void 0;var n=t(5267),i=t(5648);e.asyncScheduler=new i.AsyncScheduler(n.AsyncAction),e.async=e.asyncScheduler},7991:(r,e)=>{e.byteLength=function(c){var f=s(c),d=f[0],h=f[1];return 3*(d+h)/4-h},e.toByteArray=function(c){var f,d,h=s(c),v=h[0],p=h[1],g=new i(function(m,_,x){return 3*(_+x)/4-x}(0,v,p)),y=0,b=p>0?v-4:v;for(d=0;d<b;d+=4)f=n[c.charCodeAt(d)]<<18|n[c.charCodeAt(d+1)]<<12|n[c.charCodeAt(d+2)]<<6|n[c.charCodeAt(d+3)],g[y++]=f>>16&255,g[y++]=f>>8&255,g[y++]=255&f;return p===2&&(f=n[c.charCodeAt(d)]<<2|n[c.charCodeAt(d+1)]>>4,g[y++]=255&f),p===1&&(f=n[c.charCodeAt(d)]<<10|n[c.charCodeAt(d+1)]<<4|n[c.charCodeAt(d+2)]>>2,g[y++]=f>>8&255,g[y++]=255&f),g},e.fromByteArray=function(c){for(var f,d=c.length,h=d%3,v=[],p=16383,g=0,y=d-h;g<y;g+=p)v.push(l(c,g,g+p>y?y:g+p));return h===1?(f=c[d-1],v.push(t[f>>2]+t[f<<4&63]+"==")):h===2&&(f=(c[d-2]<<8)+c[d-1],v.push(t[f>>10]+t[f>>4&63]+t[f<<2&63]+"=")),v.join("")};for(var t=[],n=[],i=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)t[o]=a[o],n[a.charCodeAt(o)]=o;function s(c){var f=c.length;if(f%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=c.indexOf("=");return d===-1&&(d=f),[d,d===f?0:4-d%4]}function u(c){return t[c>>18&63]+t[c>>12&63]+t[c>>6&63]+t[63&c]}function l(c,f,d){for(var h,v=[],p=f;p<d;p+=3)h=(c[p]<<16&16711680)+(c[p+1]<<8&65280)+(255&c[p+2]),v.push(u(h));return v.join("")}n[45]=62,n[95]=63},8014:function(r,e,t){var n=this&&this.__values||function(f){var d=typeof Symbol=="function"&&Symbol.iterator,h=d&&f[d],v=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(f,d){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var v,p,g=h.call(f),y=[];try{for(;(d===void 0||d-- >0)&&!(v=g.next()).done;)y.push(v.value)}catch(b){p={error:b}}finally{try{v&&!v.done&&(h=g.return)&&h.call(g)}finally{if(p)throw p.error}}return y},a=this&&this.__spreadArray||function(f,d){for(var h=0,v=d.length,p=f.length;h<v;h++,p++)f[p]=d[h];return f};Object.defineProperty(e,"__esModule",{value:!0}),e.isSubscription=e.EMPTY_SUBSCRIPTION=e.Subscription=void 0;var o=t(1018),s=t(5788),u=t(7479),l=function(){function f(h){this.initialTeardown=h,this.closed=!1,this._parentage=null,this._finalizers=null}var d;return f.prototype.unsubscribe=function(){var h,v,p,g,y;if(!this.closed){this.closed=!0;var b=this._parentage;if(b)if(this._parentage=null,Array.isArray(b))try{for(var m=n(b),_=m.next();!_.done;_=m.next())_.value.remove(this)}catch(k){h={error:k}}finally{try{_&&!_.done&&(v=m.return)&&v.call(m)}finally{if(h)throw h.error}}else b.remove(this);var x=this.initialTeardown;if(o.isFunction(x))try{x()}catch(k){y=k instanceof s.UnsubscriptionError?k.errors:[k]}var C=this._finalizers;if(C){this._finalizers=null;try{for(var w=n(C),O=w.next();!O.done;O=w.next()){var A=O.value;try{c(A)}catch(k){y=y??[],k instanceof s.UnsubscriptionError?y=a(a([],i(y)),i(k.errors)):y.push(k)}}}catch(k){p={error:k}}finally{try{O&&!O.done&&(g=w.return)&&g.call(w)}finally{if(p)throw p.error}}}if(y)throw new s.UnsubscriptionError(y)}},f.prototype.add=function(h){var v;if(h&&h!==this)if(this.closed)c(h);else{if(h instanceof f){if(h.closed||h._hasParent(this))return;h._addParent(this)}(this._finalizers=(v=this._finalizers)!==null&&v!==void 0?v:[]).push(h)}},f.prototype._hasParent=function(h){var v=this._parentage;return v===h||Array.isArray(v)&&v.includes(h)},f.prototype._addParent=function(h){var v=this._parentage;this._parentage=Array.isArray(v)?(v.push(h),v):v?[v,h]:h},f.prototype._removeParent=function(h){var v=this._parentage;v===h?this._parentage=null:Array.isArray(v)&&u.arrRemove(v,h)},f.prototype.remove=function(h){var v=this._finalizers;v&&u.arrRemove(v,h),h instanceof f&&h._removeParent(this)},f.EMPTY=((d=new f).closed=!0,d),f}();function c(f){o.isFunction(f)?f():f.unsubscribe()}e.Subscription=l,e.EMPTY_SUBSCRIPTION=l.EMPTY,e.isSubscription=function(f){return f instanceof l||f&&"closed"in f&&o.isFunction(f.remove)&&o.isFunction(f.add)&&o.isFunction(f.unsubscribe)}},8015:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=void 0;var n=t(7843),i=t(1342),a=t(3111),o=t(9445);e.buffer=function(s){return n.operate(function(u,l){var c=[];return u.subscribe(a.createOperatorSubscriber(l,function(f){return c.push(f)},function(){l.next(c),l.complete()})),o.innerFrom(s).subscribe(a.createOperatorSubscriber(l,function(){var f=c;c=[],l.next(f)},i.noop)),function(){c=null}})}},8031:function(r,e,t){var n=this&&this.__extends||function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,m){b.__proto__=m}||function(b,m){for(var _ in m)Object.prototype.hasOwnProperty.call(m,_)&&(b[_]=m[_])},p(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function b(){this.constructor=g}p(g,y),g.prototype=y===null?Object.create(y):(b.prototype=y.prototype,new b)}}(),i=this&&this.__awaiter||function(p,g,y,b){return new(y||(y=Promise))(function(m,_){function x(O){try{w(b.next(O))}catch(A){_(A)}}function C(O){try{w(b.throw(O))}catch(A){_(A)}}function w(O){var A;O.done?m(O.value):(A=O.value,A instanceof y?A:new y(function(k){k(A)})).then(x,C)}w((b=b.apply(p,g||[])).next())})},a=this&&this.__generator||function(p,g){var y,b,m,_,x={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(w){return function(O){return function(A){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(x=0)),x;)try{if(y=1,b&&(m=2&A[0]?b.return:A[0]?b.throw||((m=b.return)&&m.call(b),0):b.next)&&!(m=m.call(b,A[1])).done)return m;switch(b=0,m&&(A=[2&A[0],m.value]),A[0]){case 0:case 1:m=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,b=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(!((m=(m=x.trys).length>0&&m[m.length-1])||A[0]!==6&&A[0]!==2)){x=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){x.label=A[1];break}if(A[0]===6&&x.label<m[1]){x.label=m[1],m=A;break}if(m&&x.label<m[2]){x.label=m[2],x.ops.push(A);break}m[2]&&x.ops.pop(),x.trys.pop();continue}A=g.call(p,x)}catch(k){A=[6,k],b=0}finally{y=m=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([w,O])}}},o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var s=t(7452),u=t(9305),l=o(t(6385)),c=o(t(7666)),f=u.error.PROTOCOL_ERROR,d=u.internal.logger.Logger,h=0;e.createChannelConnection=function(p,g,y,b,m,_,x,C){_===void 0&&(_=null),C===void 0&&(C=function(O){return new s.Channel(O)});var w=C(new s.ChannelConfig(p,g,y.errorCode(),m));return c.default.handshake(w,b).then(function(O){var A=O.protocolVersion,k=O.consumeRemainingBuffer,R=new s.Chunker(w),I=new s.Dechunker,M=new v(w,y,p,b,g.disableLosslessIntegers,_,R,g.notificationFilter,function(N){return c.default.create({version:A,channel:w,chunker:R,dechunker:I,disableLosslessIntegers:g.disableLosslessIntegers,useBigInt:g.useBigInt,serversideRouting:_,server:N.server,log:N.logger,observer:{onObserversCountChange:N._handleOngoingRequestsNumberChange.bind(N),onError:N._handleFatalError.bind(N),onFailure:N._resetOnFailure.bind(N),onProtocolError:N._handleProtocolError.bind(N),onErrorApplyTransformation:function(F){return N.handleAndTransformError(F,N._address)}}})},g.telemetryDisabled,x);return k(function(N){return I.write(N)}),M}).catch(function(O){return w.close().then(function(){throw O})})};var v=function(p){function g(y,b,m,_,x,C,w,O,A,k,R){x===void 0&&(x=!1),C===void 0&&(C=null),R===void 0&&(R=function(F){});var I,M,N=p.call(this,b)||this;return N._authToken=null,N._idle=!1,N._reseting=!1,N._resetObservers=[],N._id=h++,N._address=m,N._server={address:m.asHostPort()},N._creationTimestamp=Date.now(),N._disableLosslessIntegers=x,N._ch=y,N._chunker=w,N._log=(I=N,new d((M=_)._level,function(F,z){return M._loggerFunction(F,"".concat(I," ").concat(z))})),N._serversideRouting=C,N._notificationFilter=O,N._telemetryDisabledDriverConfig=k===!0,N._telemetryDisabledConnection=!0,N._ssrCallback=R,N._dbConnectionId=null,N._protocol=A(N),N._isBroken=!1,N._log.isDebugEnabled()&&N._log.debug("created towards ".concat(m)),N}return n(g,p),g.prototype.beginTransaction=function(y){return this._sendTelemetryIfEnabled(y),this._protocol.beginTransaction(y)},g.prototype.run=function(y,b,m){return this._sendTelemetryIfEnabled(m),this._protocol.run(y,b,m)},g.prototype._sendTelemetryIfEnabled=function(y){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||y==null||y.apiTelemetryConfig==null||this._protocol.telemetry({api:y.apiTelemetryConfig.api},{onCompleted:y.apiTelemetryConfig.onTelemetrySuccess,onError:y.beforeError})},g.prototype.commitTransaction=function(y){return this._protocol.commitTransaction(y)},g.prototype.rollbackTransaction=function(y){return this._protocol.rollbackTransaction(y)},g.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(g.prototype,"authToken",{get:function(){return this._authToken},set:function(y){this._authToken=y},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(y){this._dbConnectionId=y},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(y){this._idleTimestamp=y},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),g.prototype.connect=function(y,b,m,_){return i(this,void 0,void 0,function(){var x=this;return a(this,function(C){switch(C.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,u.newError)("Connection does not support re-auth");return this._authToken=m,this._protocol.initialized?[3,2]:[4,this._initialize(y,b,m)];case 1:case 3:return[2,C.sent()];case 2:return _?[4,new Promise(function(w,O){x._protocol.logoff({onError:O}),x._protocol.logon({authToken:m,onError:O,onComplete:function(){return w(x)},flush:!0})})]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:m,flush:!0}),[2,this]}})})},g.prototype._initialize=function(y,b,m){var _=this,x=this;return new Promise(function(C,w){_._protocol.initialize({userAgent:y,boltAgent:b,authToken:m,notificationFilter:_._notificationFilter,onError:function(O){return w(O)},onComplete:function(O){var A;if(O){var k=O.server;_.version&&!k||(_.version=k);var R=O.connection_id;if(_.databaseId||(_.databaseId=R),O.hints){var I=O.hints["connection.recv_timeout_seconds"];if(I!=null){var M=(0,u.toNumber)(I);Number.isInteger(M)&&M>0?_._ch.setupReceiveTimeout(1e3*M):_._log.info("Server located at ".concat(_._address," supplied an invalid connection receive timeout value (").concat(M,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}O.hints["telemetry.enabled"]===!0&&(_._telemetryDisabledConnection=!1),_.SSREnabledHint=O.hints["ssr.enabled"]}_._ssrCallback((A=_.SSREnabledHint)!==null&&A!==void 0&&A,"OPEN")}C(x)}})})},g.prototype.protocol=function(){return this._protocol},Object.defineProperty(g.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"version",{get:function(){return this._server.version},set:function(y){this._server.version=y},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),g.prototype._handleFatalError=function(y){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||y,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(u.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},g.prototype._setIdle=function(y){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(y)},g.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},g.prototype._queueObserver=function(y){return this._protocol.queueObserverIfProtocolIsNotBroken(y)},g.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},g.prototype.resetAndFlush=function(){var y=this;return new Promise(function(b,m){y._reset({onError:function(_){if(y._isBroken)m(_);else{var x=y._handleProtocolError("Received FAILURE as a response for RESET: ".concat(_));m(x)}},onComplete:function(){b()}})})},g.prototype._resetOnFailure=function(){var y=this;this.isOpen()&&this._reset({onError:function(){y._protocol.resetFailure()},onComplete:function(){y._protocol.resetFailure()}})},g.prototype._reset=function(y){var b=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(y):this._protocol.reset({onError:function(_){y.onError(_)},onComplete:function(){y.onComplete()}});else{this._resetObservers.push(y),this._reseting=!0;var m=function(_){b._reseting=!1;var x=b._resetObservers;b._resetObservers=[],x.forEach(_)};this._protocol.reset({onError:function(_){m(function(x){return x.onError(_)})},onComplete:function(){m(function(_){return _.onComplete()})}})}},g.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},g.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},g.prototype._handleOngoingRequestsNumberChange=function(y){this._idle||(y===0?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},g.prototype.close=function(){var y;return i(this,void 0,void 0,function(){return a(this,function(b){switch(b.label){case 0:return this._ssrCallback((y=this.SSREnabledHint)!==null&&y!==void 0&&y,"CLOSE"),this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return b.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},g.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},g.prototype._handleProtocolError=function(y){this._protocol.resetFailure(),this._updateCurrentObserver();var b=(0,u.newError)(y,f);return this._handleFatalError(b),b},g}(l.default);e.default=v},8046:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=void 0,e.isArrayLike=function(t){return t&&typeof t.length=="number"&&typeof t!="function"}},8079:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=void 0;var n=t(7961),i=t(7843),a=t(3111);e.debounceTime=function(o,s){return s===void 0&&(s=n.asyncScheduler),i.operate(function(u,l){var c=null,f=null,d=null,h=function(){if(c){c.unsubscribe(),c=null;var p=f;f=null,l.next(p)}};function v(){var p=d+o,g=s.now();if(g<p)return c=this.schedule(void 0,p-g),void l.add(c);h()}u.subscribe(a.createOperatorSubscriber(l,function(p){f=p,d=s.now(),c||(c=s.schedule(v,o),l.add(c))},function(){h(),l.complete()},void 0,function(){f=c=null}))})}},8118:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=void 0;var n=t(9445),i=t(3111),a=t(7843);e.catchError=function o(s){return a.operate(function(u,l){var c,f=null,d=!1;f=u.subscribe(i.createOperatorSubscriber(l,void 0,void 0,function(h){c=n.innerFrom(s(h,o(s)(u))),f?(f.unsubscribe(),f=null,c.subscribe(l)):d=!0})),d&&(f.unsubscribe(),f=null,c.subscribe(l))})}},8157:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=void 0;var n=t(1242),i=t(9247),a=t(1018);e.publishReplay=function(o,s,u,l){u&&!a.isFunction(u)&&(l=u);var c=a.isFunction(u)?u:void 0;return function(f){return i.multicast(new n.ReplaySubject(o,s,l),c)(f)}}},8158:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=void 0;var n=t(7302);e.concatAll=function(){return n.mergeAll(1)}},8208:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=void 0;var n=t(2483),i=t(7961),a=t(8014),o=t(7843),s=t(3111),u=t(7479),l=t(1107),c=t(7110);e.windowTime=function(f){for(var d,h,v=[],p=1;p<arguments.length;p++)v[p-1]=arguments[p];var g=(d=l.popScheduler(v))!==null&&d!==void 0?d:i.asyncScheduler,y=(h=v[0])!==null&&h!==void 0?h:null,b=v[1]||1/0;return o.operate(function(m,_){var x=[],C=!1,w=function(R){var I=R.window,M=R.subs;I.complete(),M.unsubscribe(),u.arrRemove(x,R),C&&O()},O=function(){if(x){var R=new a.Subscription;_.add(R);var I=new n.Subject,M={window:I,subs:R,seen:0};x.push(M),_.next(I.asObservable()),c.executeSchedule(R,g,function(){return w(M)},f)}};y!==null&&y>=0?c.executeSchedule(_,g,O,y,!0):C=!0,O();var A=function(R){return x.slice().forEach(R)},k=function(R){A(function(I){var M=I.window;return R(M)}),R(_),_.unsubscribe()};return m.subscribe(s.createOperatorSubscriber(_,function(R){A(function(I){I.window.next(R),b<=++I.seen&&w(I)})},function(){return k(function(R){return R.complete()})},function(R){return k(function(I){return I.error(R)})})),function(){x=null}})}},8239:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),d=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)d.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return d},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatestWith=void 0;var a=t(2551);e.combineLatestWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.combineLatest.apply(void 0,i([],n(o)))}},8253:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),d=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)d.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return d},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeWith=void 0;var a=t(361);e.mergeWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.merge.apply(void 0,i([],n(o)))}},8264:function(r,e,t){var n=this&&this.__extends||function(){var y=function(b,m){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,x){_.__proto__=x}||function(_,x){for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(_[C]=x[C])},y(b,m)};return function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function _(){this.constructor=b}y(b,m),b.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(y){for(var b,m=1,_=arguments.length;m<_;m++)for(var x in b=arguments[m])Object.prototype.hasOwnProperty.call(b,x)&&(y[x]=b[x]);return y},i.apply(this,arguments)},a=this&&this.__createBinding||(Object.create?function(y,b,m,_){_===void 0&&(_=m);var x=Object.getOwnPropertyDescriptor(b,m);x&&!("get"in x?!b.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(y,_,x)}:function(y,b,m,_){_===void 0&&(_=m),y[_]=b[m]}),o=this&&this.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),s=this&&this.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&a(b,y,m);return o(b,y),b};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var u=s(t(4027));e.default=function(){this.certfile="",this.keyfile="",this.password=void 0};var l=function(){function y(){}return y.prototype.hasUpdate=function(){throw new Error("Not Implemented")},y.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},y}();e.ClientCertificateProvider=l;var c=function(y){function b(){return y!==null&&y.apply(this,arguments)||this}return n(b,y),b.prototype.updateCertificate=function(m){throw new Error("Not implemented")},b}(l);e.RotatingClientCertificateProvider=c;var f=new(function(){function y(){}return y.prototype.rotating=function(b){var m=b.initialCertificate;if(m==null||!d(m))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(u.stringify(m)));var _=i({},m);return new g(_)},y}());function d(y){return y!=null&&typeof y=="object"&&"certfile"in y&&(h(b=y.certfile)||v(b,h))&&"keyfile"in y&&function(m){function _(x){return typeof x=="string"||x!=null&&typeof x=="object"&&"path"in x&&typeof x.path=="string"&&p("password",x)}return _(m)||v(m,_)}(y.keyfile)&&p("password",y);var b}function h(y){return typeof y=="string"}function v(y,b,m){return m===void 0&&(m=!1),Array.isArray(y)&&(m||y.length>0)&&y.filter(b).length===y.length}function p(y,b){return!(y in b)||b[y]==null||typeof b[y]=="string"}e.clientCertificateProviders=f,Object.freeze(f),e.resolveCertificateProvider=function(y){if(y!=null){if(typeof y=="object"&&"hasUpdate"in y&&"getClientCertificate"in y&&typeof y.getClientCertificate=="function"&&typeof y.hasUpdate=="function")return y;if(d(y)){var b=i({},y);return{getClientCertificate:function(){return b},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(u.stringify(y)))}};var g=function(){function y(b,m){m===void 0&&(m=!1),this._certificate=b,this._updated=m}return y.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},y.prototype.getClientCertificate=function(){return this._certificate},y.prototype.updateCertificate=function(b){if(!d(b))throw new TypeError("certificate should be ClientCertificate, but got ".concat(u.stringify(b)));this._certificate=i({},b),this._updated=!0},y}()},8275:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.first=void 0;var n=t(2823),i=t(783),a=t(846),o=t(378),s=t(4869),u=t(6640);e.first=function(l,c){var f=arguments.length>=2;return function(d){return d.pipe(l?i.filter(function(h,v){return l(h,v,d)}):u.identity,a.take(1),f?o.defaultIfEmpty(c):s.throwIfEmpty(function(){return new n.EmptyError}))}}},8320:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(C){for(var w,O=1,A=arguments.length;O<A;O++)for(var k in w=arguments[O])Object.prototype.hasOwnProperty.call(w,k)&&(C[k]=w[k]);return C},n.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(C,w,O,A){A===void 0&&(A=O);var k=Object.getOwnPropertyDescriptor(w,O);k&&!("get"in k?!w.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return w[O]}}),Object.defineProperty(C,A,k)}:function(C,w,O,A){A===void 0&&(A=O),C[A]=w[O]}),a=this&&this.__setModuleDefault||(Object.create?function(C,w){Object.defineProperty(C,"default",{enumerable:!0,value:w})}:function(C,w){C.default=w}),o=this&&this.__importStar||function(C){if(C&&C.__esModule)return C;var w={};if(C!=null)for(var O in C)O!=="default"&&Object.prototype.hasOwnProperty.call(C,O)&&i(w,C,O);return a(w,C),w},s=this&&this.__importDefault||function(C){return C&&C.__esModule?C:{default:C}};Object.defineProperty(e,"__esModule",{value:!0});var u=t(397),l=(t(7452),t(7168)),c=o(t(7021)),f=t(9014),d=t(9305),h=s(t(6661)),v=s(t(3321)),p=d.internal.bookmarks.Bookmarks,g=d.internal.constants,y=g.ACCESS_MODE_WRITE,b=g.BOLT_PROTOCOL_V1,m=(d.internal.logger.Logger,d.internal.txConfig.TxConfig),_=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),x=function(){function C(w,O,A,k,R,I){var M=A===void 0?{}:A,N=M.disableLosslessIntegers,F=M.useBigInt;k===void 0&&(k=function(){return null}),this._server=w||{},this._chunker=O,this._packer=this._createPacker(O),this._unpacker=this._createUnpacker(N,F),this._responseHandler=k(this),this._log=R,this._onProtocolError=I,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:N,useBigInt:F}}return Object.defineProperty(C.prototype,"transformer",{get:function(){var w=this;return this._transformer===void 0&&(this._transformer=new v.default(Object.values(h.default).map(function(O){return O(w._config,w._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"version",{get:function(){return b},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),C.prototype.packer=function(){return this._packer},C.prototype.packable=function(w){return this._packer.packable(w,this.transformer.toStructure)},C.prototype.unpacker=function(){return this._unpacker},C.prototype.unpack=function(w){return this._unpacker.unpack(w,this.transformer.fromStructure)},C.prototype.transformMetadata=function(w){return w},C.prototype.enrichErrorMetadata=function(w){return n(n({},w),{diagnostic_record:w.diagnostic_record!==null?n(n({},_),w.diagnostic_record):null})},C.prototype.initialize=function(w){var O=this,A=w===void 0?{}:w,k=A.userAgent,R=(A.boltAgent,A.authToken),I=A.notificationFilter,M=A.onError,N=A.onComplete,F=new f.LoginObserver({onError:function(z){return O._onLoginError(z,M)},onCompleted:function(z){return O._onLoginCompleted(z,N)}});return(0,u.assertNotificationFilterIsEmpty)(I,this._onProtocolError,F),this.write(c.default.init(k,R),F,!0),F},C.prototype.logoff=function(w){var O=w===void 0?{}:w,A=O.onComplete,k=O.onError,R=(O.flush,new f.LogoffObserver({onCompleted:A,onError:k})),I=(0,d.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(I.message),R.onError(I),I},C.prototype.logon=function(w){var O=this,A=w===void 0?{}:w,k=A.authToken,R=A.onComplete,I=A.onError,M=(A.flush,new f.LoginObserver({onCompleted:function(){return O._onLoginCompleted({},k,R)},onError:function(F){return O._onLoginError(F,I)}})),N=(0,d.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(N.message),M.onError(N),N},C.prototype.prepareToClose=function(){},C.prototype.beginTransaction=function(w){var O=w===void 0?{}:w,A=O.bookmarks,k=O.txConfig,R=O.database,I=O.mode,M=O.impersonatedUser,N=O.notificationFilter,F=O.beforeError,z=O.afterError,B=O.beforeComplete,U=O.afterComplete;return this.run("BEGIN",A?A.asBeginTransactionParameters():{},{bookmarks:A,txConfig:k,database:R,mode:I,impersonatedUser:M,notificationFilter:N,beforeError:F,afterError:z,beforeComplete:B,afterComplete:U,flush:!1})},C.prototype.commitTransaction=function(w){var O=w===void 0?{}:w,A=O.beforeError,k=O.afterError,R=O.beforeComplete,I=O.afterComplete;return this.run("COMMIT",{},{bookmarks:p.empty(),txConfig:m.empty(),mode:y,beforeError:A,afterError:k,beforeComplete:R,afterComplete:I})},C.prototype.rollbackTransaction=function(w){var O=w===void 0?{}:w,A=O.beforeError,k=O.afterError,R=O.beforeComplete,I=O.afterComplete;return this.run("ROLLBACK",{},{bookmarks:p.empty(),txConfig:m.empty(),mode:y,beforeError:A,afterError:k,beforeComplete:R,afterComplete:I})},C.prototype.run=function(w,O,A){var k=A===void 0?{}:A,R=(k.bookmarks,k.txConfig),I=k.database,M=(k.mode,k.impersonatedUser),N=k.notificationFilter,F=k.beforeKeys,z=k.afterKeys,B=k.beforeError,U=k.afterError,W=k.beforeComplete,Y=k.afterComplete,H=k.flush,J=H===void 0||H,le=k.highRecordWatermark,fe=le===void 0?Number.MAX_VALUE:le,ue=k.lowRecordWatermark,ge=ue===void 0?Number.MAX_VALUE:ue,ve=new f.ResultStreamObserver({server:this._server,beforeKeys:F,afterKeys:z,beforeError:B,afterError:U,beforeComplete:W,afterComplete:Y,highRecordWatermark:fe,lowRecordWatermark:ge});return(0,u.assertTxConfigIsEmpty)(R,this._onProtocolError,ve),(0,u.assertDatabaseIsEmpty)(I,this._onProtocolError,ve),(0,u.assertImpersonatedUserIsEmpty)(M,this._onProtocolError,ve),(0,u.assertNotificationFilterIsEmpty)(N,this._onProtocolError,ve),this.write(c.default.run(w,O),ve,!1),this.write(c.default.pullAll(),ve,J),ve},Object.defineProperty(C.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),C.prototype.reset=function(w){var O=w===void 0?{}:w,A=O.onError,k=O.onComplete,R=new f.ResetObserver({onProtocolError:this._onProtocolError,onError:A,onComplete:k});return this.write(c.default.reset(),R,!0),R},C.prototype.telemetry=function(w,O){w.api;var A=O===void 0?{}:O,k=(A.onError,A.onCompleted),R=new f.CompletedObserver;return k&&k(),R},C.prototype._createPacker=function(w){return new l.v1.Packer(w)},C.prototype._createUnpacker=function(w,O){return new l.v1.Unpacker(w,O)},C.prototype.write=function(w,O,A){if(this.queueObserverIfProtocolIsNotBroken(O)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(w)),this._lastMessageSignature=w.signature;var k=new l.structure.Structure(w.signature,w.fields);this.packable(k)(),this._chunker.messageBoundary(),A&&this._chunker.flush()}},C.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===c.SIGNATURES.HELLO||this._lastMessageSignature===c.SIGNATURES.LOGON},C.prototype.isLastMessageReset=function(){return this._lastMessageSignature===c.SIGNATURES.RESET},C.prototype.notifyFatalError=function(w){return this._fatalError=w,this._responseHandler._notifyErrorToObservers(w)},C.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},C.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},C.prototype.queueObserverIfProtocolIsNotBroken=function(w){return this.isBroken()?(this.notifyFatalErrorToObserver(w),!1):this._responseHandler._queueObserver(w)},C.prototype.isBroken=function(){return!!this._fatalError},C.prototype.notifyFatalErrorToObserver=function(w){w&&w.onError&&w.onError(this._fatalError)},C.prototype.resetFailure=function(){this._responseHandler._resetFailure()},C.prototype._onLoginCompleted=function(w,O,A){if(this._initialized=!0,this._authToken=O,w){var k=w.server;this._server.version||(this._server.version=k)}A&&A(w)},C.prototype._onLoginError=function(w,O){this._onProtocolError(w.message),O&&O(w)},C}();e.default=x},8330:function(r,e,t){var n=this&&this.__values||function(s){var u=typeof Symbol=="function"&&Symbol.iterator,l=u&&s[u],c=0;if(l)return l.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}};throw new TypeError(u?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=void 0;var i=t(8616),a=t(7843),o=t(3111);e.takeLast=function(s){return s<=0?function(){return i.EMPTY}:a.operate(function(u,l){var c=[];u.subscribe(o.createOperatorSubscriber(l,function(f){c.push(f),s<c.length&&c.shift()},function(){var f,d;try{for(var h=n(c),v=h.next();!v.done;v=h.next()){var p=v.value;l.next(p)}}catch(g){f={error:g}}finally{try{v&&!v.done&&(d=h.return)&&d.call(h)}finally{if(f)throw f.error}}l.complete()},void 0,function(){c=null}))})}},8341:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7509);function i(o){return Promise.resolve([o])}var a=function(){function o(s){this._resolverFunction=s??i}return o.prototype.resolve=function(s){var u=this;return new Promise(function(l){return l(u._resolverFunction(s.asHostPort()))}).then(function(l){if(!Array.isArray(l))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(l));return l.map(function(c){return n.ServerAddress.fromUrl(c)})})},o}();e.default=a},8522:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=void 0;var n=t(8616),i=t(7843),a=t(3111),o=t(9445),s=t(4092);e.repeat=function(u){var l,c,f=1/0;return u!=null&&(typeof u=="object"?(l=u.count,f=l===void 0?1/0:l,c=u.delay):f=u),f<=0?function(){return n.EMPTY}:i.operate(function(d,h){var v,p=0,g=function(){if(v==null||v.unsubscribe(),v=null,c!=null){var b=typeof c=="number"?s.timer(c):o.innerFrom(c(p)),m=a.createOperatorSubscriber(h,function(){m.unsubscribe(),y()});b.subscribe(m)}else y()},y=function(){var b=!1;v=d.subscribe(a.createOperatorSubscriber(h,void 0,function(){++p<f?v?g():b=!0:h.complete()})),b&&g()};y()})}},8535:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.argsOrArgArray=void 0;var t=Array.isArray;e.argsOrArgArray=function(n){return n.length===1&&t(n[0])?n[0]:n}},8538:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),d=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)d.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return d},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.zipWith=void 0;var a=t(5918);e.zipWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.zip.apply(void 0,i([],n(o)))}},8561:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindNodeCallback=void 0;var n=t(1439);e.bindNodeCallback=function(i,a,o){return n.bindCallbackInternals(!0,i,a,o)}},8613:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=void 0;var n=t(1018);e.isScheduler=function(i){return i&&n.isFunction(i.schedule)}},8616:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=void 0;var n=t(4662);e.EMPTY=new n.Observable(function(i){return i.complete()}),e.empty=function(i){return i?function(a){return new n.Observable(function(o){return a.schedule(function(){return o.complete()})})}(i):e.EMPTY}},8624:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scan=void 0;var n=t(7843),i=t(6384);e.scan=function(a,o){return n.operate(i.scanInternals(a,o,arguments.length>=2,!0))}},8655:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.never=e.NEVER=void 0;var n=t(4662),i=t(1342);e.NEVER=new n.Observable(i.noop),e.never=function(){return e.NEVER}},8669:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.last=void 0;var n=t(2823),i=t(783),a=t(8330),o=t(4869),s=t(378),u=t(6640);e.last=function(l,c){var f=arguments.length>=2;return function(d){return d.pipe(l?i.filter(function(h,v){return l(h,v,d)}):u.identity,a.takeLast(1),f?s.defaultIfEmpty(c):o.throwIfEmpty(function(){return new n.EmptyError}))}}},8712:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchScan=void 0;var n=t(3879),i=t(7843);e.switchScan=function(a,o){return i.operate(function(s,u){var l=o;return n.switchMap(function(c,f){return a(l,c,f)},function(c,f){return l=f,f})(s).subscribe(u),function(){l=null}})}},8731:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(7452),i=t(9305),a=["5.8","5.7","5.6","5.4","5.3","5.2","5.1","5.0","4.4","4.3","4.2","3.0"];function o(u,l){return{major:u,minor:l}}function s(u){for(var l=[],c=u[3],f=u[2],d=0;d<=u[1];d++)l.push({major:c,minor:f-d});return l}e.default=function(u,l){return function(c,f){var d=this;return new Promise(function(h,v){var p=function(g){v(g)};c.onerror=p.bind(d),c._error&&p(c._error),c.onmessage=function(g){try{var y=function(b,m){var _=[b.readUInt8(),b.readUInt8(),b.readUInt8(),b.readUInt8()];if(_[0]===72&&_[1]===84&&_[2]===84&&_[3]===80)throw m.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return+(_[3]+"."+_[2])}(g,f);h({protocolVersion:y,capabilites:0,buffer:g,consumeRemainingBuffer:function(b){g.hasRemaining()&&b(g.readSlice(g.remaining()))}})}catch(b){v(b)}},c.write(function(g){if(g.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var y=(0,n.alloc)(20);return y.writeInt32(1616949271),g.forEach(function(b){if(b instanceof Array){var m=b[0],_=m.major,x=(C=m.minor)-b[1].minor;y.writeInt32(x<<16|C<<8|_)}else{_=b.major;var C=b.minor;y.writeInt32(C<<8|_)}}),y.reset(),y}([o(255,1),[o(5,8),o(5,0)],[o(4,4),o(4,2)],o(3,0)]))})}(u,l).then(function(c){return c.protocolVersion===255.1?function(f,d){for(var h=d.readVarInt(),v=[],p=0;p<h;p++){var g=[d.readUInt8(),d.readUInt8(),d.readUInt8(),d.readUInt8()];v=v.concat(s(g))}d.readVarInt();var y=0,b=0;for(v.sort(function(_,x){return Number(_.major)!==Number(x.major)?Number(x.major)-Number(_.major):Number(x.minor)-Number(_.minor)}),p=0;p<v.length;p++){var m=v[p];if(a.includes(m.major+"."+m.minor)){y=m.major,b=m.minor;break}}return new Promise(function(_,x){try{var C=(0,n.alloc)(5);C.writeInt32(b<<8|y),C.writeVarInt(0),f.write(C),_({protocolVersion:+(y+"."+b),capabilites:0,consumeRemainingBuffer:function(w){d.hasRemaining()&&w(d.readSlice(d.remaining()))}})}catch(w){x(w)}})}(u,c.buffer):c})}},8766:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=void 0;var n=t(3865),i=t(846),a=t(490),o=t(3218),s=t(983),u=t(9445);e.delayWhen=function l(c,f){return f?function(d){return n.concat(f.pipe(i.take(1),a.ignoreElements()),d.pipe(l(c)))}:s.mergeMap(function(d,h){return u.innerFrom(c(d,h)).pipe(i.take(1),o.mapTo(d))})}},8774:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=void 0;var n=t(3879),i=t(6640);e.switchAll=function(){return n.switchMap(i.identity)}},8784:(r,e,t)=>{var n=t(4704);r.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},8808:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleIterable=void 0;var n=t(4662),i=t(1964),a=t(1018),o=t(7110);e.scheduleIterable=function(s,u){return new n.Observable(function(l){var c;return o.executeSchedule(l,u,function(){c=s[i.iterator](),o.executeSchedule(l,u,function(){var f,d,h;try{d=(f=c.next()).value,h=f.done}catch(v){return void l.error(v)}h?l.complete():l.next(d)},0,!0)}),function(){return a.isFunction(c==null?void 0:c.return)&&c.return()}})}},8813:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(Nn,Za,la,Vi){Vi===void 0&&(Vi=la),Object.defineProperty(Nn,Vi,{enumerable:!0,get:function(){return Za[la]}})}:function(Nn,Za,la,Vi){Vi===void 0&&(Vi=la),Nn[Vi]=Za[la]}),i=this&&this.__exportStar||function(Nn,Za){for(var la in Nn)la==="default"||Object.prototype.hasOwnProperty.call(Za,la)||n(Za,Nn,la)};Object.defineProperty(e,"__esModule",{value:!0}),e.interval=e.iif=e.generate=e.fromEventPattern=e.fromEvent=e.from=e.forkJoin=e.empty=e.defer=e.connectable=e.concat=e.combineLatest=e.bindNodeCallback=e.bindCallback=e.UnsubscriptionError=e.TimeoutError=e.SequenceError=e.ObjectUnsubscribedError=e.NotFoundError=e.EmptyError=e.ArgumentOutOfRangeError=e.firstValueFrom=e.lastValueFrom=e.isObservable=e.identity=e.noop=e.pipe=e.NotificationKind=e.Notification=e.Subscriber=e.Subscription=e.Scheduler=e.VirtualAction=e.VirtualTimeScheduler=e.animationFrameScheduler=e.animationFrame=e.queueScheduler=e.queue=e.asyncScheduler=e.async=e.asapScheduler=e.asap=e.AsyncSubject=e.ReplaySubject=e.BehaviorSubject=e.Subject=e.animationFrames=e.observable=e.ConnectableObservable=e.Observable=void 0,e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.combineLatestWith=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=e.config=e.NEVER=e.EMPTY=e.scheduled=e.zip=e.using=e.timer=e.throwError=e.range=e.race=e.partition=e.pairs=e.onErrorResumeNext=e.of=e.never=e.merge=void 0,e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.pairwise=e.onErrorResumeNextWith=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=e.mergeAll=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=void 0,e.zipWith=e.zipAll=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=void 0;var a=t(4662);Object.defineProperty(e,"Observable",{enumerable:!0,get:function(){return a.Observable}});var o=t(8918);Object.defineProperty(e,"ConnectableObservable",{enumerable:!0,get:function(){return o.ConnectableObservable}});var s=t(3327);Object.defineProperty(e,"observable",{enumerable:!0,get:function(){return s.observable}});var u=t(3110);Object.defineProperty(e,"animationFrames",{enumerable:!0,get:function(){return u.animationFrames}});var l=t(2483);Object.defineProperty(e,"Subject",{enumerable:!0,get:function(){return l.Subject}});var c=t(1637);Object.defineProperty(e,"BehaviorSubject",{enumerable:!0,get:function(){return c.BehaviorSubject}});var f=t(1242);Object.defineProperty(e,"ReplaySubject",{enumerable:!0,get:function(){return f.ReplaySubject}});var d=t(95);Object.defineProperty(e,"AsyncSubject",{enumerable:!0,get:function(){return d.AsyncSubject}});var h=t(3692);Object.defineProperty(e,"asap",{enumerable:!0,get:function(){return h.asap}}),Object.defineProperty(e,"asapScheduler",{enumerable:!0,get:function(){return h.asapScheduler}});var v=t(7961);Object.defineProperty(e,"async",{enumerable:!0,get:function(){return v.async}}),Object.defineProperty(e,"asyncScheduler",{enumerable:!0,get:function(){return v.asyncScheduler}});var p=t(2886);Object.defineProperty(e,"queue",{enumerable:!0,get:function(){return p.queue}}),Object.defineProperty(e,"queueScheduler",{enumerable:!0,get:function(){return p.queueScheduler}});var g=t(3862);Object.defineProperty(e,"animationFrame",{enumerable:!0,get:function(){return g.animationFrame}}),Object.defineProperty(e,"animationFrameScheduler",{enumerable:!0,get:function(){return g.animationFrameScheduler}});var y=t(182);Object.defineProperty(e,"VirtualTimeScheduler",{enumerable:!0,get:function(){return y.VirtualTimeScheduler}}),Object.defineProperty(e,"VirtualAction",{enumerable:!0,get:function(){return y.VirtualAction}});var b=t(8986);Object.defineProperty(e,"Scheduler",{enumerable:!0,get:function(){return b.Scheduler}});var m=t(8014);Object.defineProperty(e,"Subscription",{enumerable:!0,get:function(){return m.Subscription}});var _=t(5);Object.defineProperty(e,"Subscriber",{enumerable:!0,get:function(){return _.Subscriber}});var x=t(7800);Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return x.Notification}}),Object.defineProperty(e,"NotificationKind",{enumerable:!0,get:function(){return x.NotificationKind}});var C=t(2706);Object.defineProperty(e,"pipe",{enumerable:!0,get:function(){return C.pipe}});var w=t(1342);Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return w.noop}});var O=t(6640);Object.defineProperty(e,"identity",{enumerable:!0,get:function(){return O.identity}});var A=t(1751);Object.defineProperty(e,"isObservable",{enumerable:!0,get:function(){return A.isObservable}});var k=t(6894);Object.defineProperty(e,"lastValueFrom",{enumerable:!0,get:function(){return k.lastValueFrom}});var R=t(9060);Object.defineProperty(e,"firstValueFrom",{enumerable:!0,get:function(){return R.firstValueFrom}});var I=t(7057);Object.defineProperty(e,"ArgumentOutOfRangeError",{enumerable:!0,get:function(){return I.ArgumentOutOfRangeError}});var M=t(2823);Object.defineProperty(e,"EmptyError",{enumerable:!0,get:function(){return M.EmptyError}});var N=t(1759);Object.defineProperty(e,"NotFoundError",{enumerable:!0,get:function(){return N.NotFoundError}});var F=t(9686);Object.defineProperty(e,"ObjectUnsubscribedError",{enumerable:!0,get:function(){return F.ObjectUnsubscribedError}});var z=t(1505);Object.defineProperty(e,"SequenceError",{enumerable:!0,get:function(){return z.SequenceError}});var B=t(1554);Object.defineProperty(e,"TimeoutError",{enumerable:!0,get:function(){return B.TimeoutError}});var U=t(5788);Object.defineProperty(e,"UnsubscriptionError",{enumerable:!0,get:function(){return U.UnsubscriptionError}});var W=t(2713);Object.defineProperty(e,"bindCallback",{enumerable:!0,get:function(){return W.bindCallback}});var Y=t(8561);Object.defineProperty(e,"bindNodeCallback",{enumerable:!0,get:function(){return Y.bindNodeCallback}});var H=t(3247);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return H.combineLatest}});var J=t(3865);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return J.concat}});var le=t(7579);Object.defineProperty(e,"connectable",{enumerable:!0,get:function(){return le.connectable}});var fe=t(9353);Object.defineProperty(e,"defer",{enumerable:!0,get:function(){return fe.defer}});var ue=t(8616);Object.defineProperty(e,"empty",{enumerable:!0,get:function(){return ue.empty}});var ge=t(9105);Object.defineProperty(e,"forkJoin",{enumerable:!0,get:function(){return ge.forkJoin}});var ve=t(4917);Object.defineProperty(e,"from",{enumerable:!0,get:function(){return ve.from}});var de=t(5337);Object.defineProperty(e,"fromEvent",{enumerable:!0,get:function(){return de.fromEvent}});var ie=t(347);Object.defineProperty(e,"fromEventPattern",{enumerable:!0,get:function(){return ie.fromEventPattern}});var Q=t(7610);Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return Q.generate}});var re=t(4209);Object.defineProperty(e,"iif",{enumerable:!0,get:function(){return re.iif}});var se=t(6472);Object.defineProperty(e,"interval",{enumerable:!0,get:function(){return se.interval}});var pe=t(2833);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return pe.merge}});var Oe=t(8655);Object.defineProperty(e,"never",{enumerable:!0,get:function(){return Oe.never}});var Ce=t(1004);Object.defineProperty(e,"of",{enumerable:!0,get:function(){return Ce.of}});var Re=t(6102);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Re.onErrorResumeNext}});var be=t(7740);Object.defineProperty(e,"pairs",{enumerable:!0,get:function(){return be.pairs}});var j=t(1699);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return j.partition}});var G=t(5584);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return G.race}});var $=t(9376);Object.defineProperty(e,"range",{enumerable:!0,get:function(){return $.range}});var te=t(1103);Object.defineProperty(e,"throwError",{enumerable:!0,get:function(){return te.throwError}});var ce=t(4092);Object.defineProperty(e,"timer",{enumerable:!0,get:function(){return ce.timer}});var he=t(7853);Object.defineProperty(e,"using",{enumerable:!0,get:function(){return he.using}});var xe=t(7286);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return xe.zip}});var Ne=t(1656);Object.defineProperty(e,"scheduled",{enumerable:!0,get:function(){return Ne.scheduled}});var We=t(8616);Object.defineProperty(e,"EMPTY",{enumerable:!0,get:function(){return We.EMPTY}});var ot=t(8655);Object.defineProperty(e,"NEVER",{enumerable:!0,get:function(){return ot.NEVER}}),i(t(6038),e);var Ze=t(3413);Object.defineProperty(e,"config",{enumerable:!0,get:function(){return Ze.config}});var et=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return et.audit}});var Qe=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return Qe.auditTime}});var Ye=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return Ye.buffer}});var Ie=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return Ie.bufferCount}});var ee=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return ee.bufferTime}});var we=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return we.bufferToggle}});var Pe=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return Pe.bufferWhen}});var De=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return De.catchError}});var Me=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return Me.combineAll}});var it=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return it.combineLatestAll}});var Fe=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return Fe.combineLatestWith}});var ut=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return ut.concatAll}});var rt=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return rt.concatMap}});var ft=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return ft.concatMapTo}});var Ot=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return Ot.concatWith}});var yt=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return yt.connect}});var nt=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return nt.count}});var kt=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return kt.debounce}});var St=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return St.debounceTime}});var lr=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return lr.defaultIfEmpty}});var ar=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return ar.delay}});var Gt=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return Gt.delayWhen}});var At=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return At.dematerialize}});var hr=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return hr.distinct}});var or=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return or.distinctUntilChanged}});var Fr=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return Fr.distinctUntilKeyChanged}});var nn=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return nn.elementAt}});var Dt=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return Dt.endWith}});var yr=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return yr.every}});var Wr=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return Wr.exhaust}});var Qr=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return Qr.exhaustAll}});var Cn=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Cn.exhaustMap}});var bn=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return bn.expand}});var Or=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return Or.filter}});var Rr=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return Rr.finalize}});var xr=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return xr.find}});var Ii=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return Ii.findIndex}});var qn=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return qn.first}});var Qo=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return Qo.groupBy}});var Vs=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return Vs.ignoreElements}});var Xa=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return Xa.isEmpty}});var So=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return So.last}});var Ka=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return Ka.map}});var $s=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return $s.mapTo}});var Ws=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return Ws.materialize}});var Hs=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Hs.max}});var ua=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return ua.mergeAll}});var mr=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return mr.flatMap}});var cr=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return cr.mergeMap}});var Jo=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return Jo.mergeMapTo}});var es=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return es.mergeScan}});var uc=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return uc.mergeWith}});var ri=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return ri.min}});var ts=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return ts.multicast}});var an=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return an.observeOn}});var Pa=t(1226);Object.defineProperty(e,"onErrorResumeNextWith",{enumerable:!0,get:function(){return Pa.onErrorResumeNextWith}});var _n=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return _n.pairwise}});var Nu=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Nu.pluck}});var Ys=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return Ys.publish}});var Mn=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Mn.publishBehavior}});var lc=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return lc.publishLast}});var $f=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return $f.publishReplay}});var cc=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return cc.raceWith}});var fc=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return fc.reduce}});var ju=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return ju.repeat}});var Wf=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Wf.repeatWhen}});var ni=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return ni.retry}});var dc=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return dc.retryWhen}});var ii=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ii.refCount}});var rs=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return rs.sample}});var hc=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return hc.sampleTime}});var Ra=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Ra.scan}});var Fu=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return Fu.sequenceEqual}});var Bu=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return Bu.share}});var $r=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return $r.shareReplay}});var ka=t(5382);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return ka.single}});var Uu=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return Uu.skip}});var tv=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return tv.skipLast}});var vc=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return vc.skipUntil}});var rv=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return rv.skipWhile}});var pc=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return pc.startWith}});var zu=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return zu.subscribeOn}});var ns=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return ns.switchAll}});var nv=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return nv.switchMap}});var Hf=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Hf.switchMapTo}});var qu=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return qu.switchScan}});var gc=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return gc.take}});var yc=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return yc.takeLast}});var Yf=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Yf.takeUntil}});var mc=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return mc.takeWhile}});var bc=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return bc.tap}});var Br=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Br.throttle}});var Zt=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return Zt.throttleTime}});var _c=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return _c.throwIfEmpty}});var Xs=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return Xs.timeInterval}});var Xf=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Xf.timeout}});var Kf=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Kf.timeoutWith}});var iv=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return iv.timestamp}});var av=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return av.toArray}});var Zf=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Zf.window}});var is=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return is.windowCount}});var wn=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return wn.windowTime}});var Gu=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Gu.windowToggle}});var ai=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return ai.windowWhen}});var Ks=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return Ks.withLatestFrom}});var wc=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return wc.zipAll}});var Ln=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return Ln.zipWith}})},8831:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=void 0;var n=t(7843),i=t(1342),a=t(3111),o=t(9445);e.bufferWhen=function(s){return n.operate(function(u,l){var c=null,f=null,d=function(){f==null||f.unsubscribe();var h=c;c=[],h&&l.next(h),o.innerFrom(s()).subscribe(f=a.createOperatorSubscriber(l,d,i.noop))};d(),u.subscribe(a.createOperatorSubscriber(l,function(h){return c==null?void 0:c.push(h)},function(){c&&l.next(c),l.complete()},void 0,function(){return c=f=null}))})}},8888:(r,e,t)=>{var n=t(5636).Buffer,i=n.isEncoding||function(v){switch((v=""+v)&&v.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(v){var p;switch(this.encoding=function(g){var y=function(b){if(!b)return"utf8";for(var m;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(m)return;b=(""+b).toLowerCase(),m=!0}}(g);if(typeof y!="string"&&(n.isEncoding===i||!i(g)))throw new Error("Unknown encoding: "+g);return y||g}(v),this.encoding){case"utf16le":this.text=u,this.end=l,p=4;break;case"utf8":this.fillLast=s,p=4;break;case"base64":this.text=c,this.end=f,p=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(p)}function o(v){return v<=127?0:v>>5==6?2:v>>4==14?3:v>>3==30?4:v>>6==2?-1:-2}function s(v){var p=this.lastTotal-this.lastNeed,g=function(y,b){if((192&b[0])!=128)return y.lastNeed=0,"�";if(y.lastNeed>1&&b.length>1){if((192&b[1])!=128)return y.lastNeed=1,"�";if(y.lastNeed>2&&b.length>2&&(192&b[2])!=128)return y.lastNeed=2,"�"}}(this,v);return g!==void 0?g:this.lastNeed<=v.length?(v.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(v.copy(this.lastChar,p,0,v.length),void(this.lastNeed-=v.length))}function u(v,p){if((v.length-p)%2==0){var g=v.toString("utf16le",p);if(g){var y=g.charCodeAt(g.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=v[v.length-1],v.toString("utf16le",p,v.length-1)}function l(v){var p=v&&v.length?this.write(v):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return p+this.lastChar.toString("utf16le",0,g)}return p}function c(v,p){var g=(v.length-p)%3;return g===0?v.toString("base64",p):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=v[v.length-1]:(this.lastChar[0]=v[v.length-2],this.lastChar[1]=v[v.length-1]),v.toString("base64",p,v.length-g))}function f(v){var p=v&&v.length?this.write(v):"";return this.lastNeed?p+this.lastChar.toString("base64",0,3-this.lastNeed):p}function d(v){return v.toString(this.encoding)}function h(v){return v&&v.length?this.write(v):""}e.StringDecoder=a,a.prototype.write=function(v){if(v.length===0)return"";var p,g;if(this.lastNeed){if((p=this.fillLast(v))===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<v.length?p?p+this.text(v,g):this.text(v,g):p||""},a.prototype.end=function(v){var p=v&&v.length?this.write(v):"";return this.lastNeed?p+"�":p},a.prototype.text=function(v,p){var g=function(b,m,_){var x=m.length-1;if(x<_)return 0;var C=o(m[x]);return C>=0?(C>0&&(b.lastNeed=C-1),C):--x<_||C===-2?0:(C=o(m[x]))>=0?(C>0&&(b.lastNeed=C-2),C):--x<_||C===-2?0:(C=o(m[x]))>=0?(C>0&&(C===2?C=0:b.lastNeed=C-3),C):0}(this,v,p);if(!this.lastNeed)return v.toString("utf8",p);this.lastTotal=g;var y=v.length-(g-this.lastNeed);return v.copy(this.lastChar,0,y),v.toString("utf8",p,y)},a.prototype.fillLast=function(v){if(this.lastNeed<=v.length)return v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);v.copy(this.lastChar,this.lastTotal-this.lastNeed,0,v.length),this.lastNeed-=v.length}},8917:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n,i){this.keys=t,this.records=n,this.summary=i}},8918:function(r,e,t){var n=this&&this.__extends||function(){var c=function(f,d){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,v){h.__proto__=v}||function(h,v){for(var p in v)Object.prototype.hasOwnProperty.call(v,p)&&(h[p]=v[p])},c(f,d)};return function(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");function h(){this.constructor=f}c(f,d),f.prototype=d===null?Object.create(d):(h.prototype=d.prototype,new h)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectableObservable=void 0;var i=t(4662),a=t(8014),o=t(7561),s=t(3111),u=t(7843),l=function(c){function f(d,h){var v=c.call(this)||this;return v.source=d,v.subjectFactory=h,v._subject=null,v._refCount=0,v._connection=null,u.hasLift(d)&&(v.lift=d.lift),v}return n(f,c),f.prototype._subscribe=function(d){return this.getSubject().subscribe(d)},f.prototype.getSubject=function(){var d=this._subject;return d&&!d.isStopped||(this._subject=this.subjectFactory()),this._subject},f.prototype._teardown=function(){this._refCount=0;var d=this._connection;this._subject=this._connection=null,d==null||d.unsubscribe()},f.prototype.connect=function(){var d=this,h=this._connection;if(!h){h=this._connection=new a.Subscription;var v=this.getSubject();h.add(this.source.subscribe(s.createOperatorSubscriber(v,void 0,function(){d._teardown(),v.complete()},function(p){d._teardown(),v.error(p)},function(){return d._teardown()}))),h.closed&&(this._connection=null,h=a.Subscription.EMPTY)}return h},f.prototype.refCount=function(){return o.refCount()(this)},f}(i.Observable);e.ConnectableObservable=l},8937:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=void 0;var n=t(6640),i=t(7843),a=t(3111);function o(s,u){return s===u}e.distinctUntilChanged=function(s,u){return u===void 0&&(u=n.identity),s=s??o,i.operate(function(l,c){var f,d=!0;l.subscribe(a.createOperatorSubscriber(c,function(h){var v=u(h);!d&&s(f,v)||(d=!1,f=v,c.next(h))}))})}},8941:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=void 0;var n=t(7843),i=t(3111),a=t(9445);e.throttle=function(o,s){return n.operate(function(u,l){var c=s??{},f=c.leading,d=f===void 0||f,h=c.trailing,v=h!==void 0&&h,p=!1,g=null,y=null,b=!1,m=function(){y==null||y.unsubscribe(),y=null,v&&(C(),b&&l.complete())},_=function(){y=null,b&&l.complete()},x=function(w){return y=a.innerFrom(o(w)).subscribe(i.createOperatorSubscriber(l,m,_))},C=function(){if(p){p=!1;var w=g;g=null,l.next(w),!b&&x(w)}};u.subscribe(i.createOperatorSubscriber(l,function(w){p=!0,g=w,(!y||y.closed)&&(d?C():x(w))},function(){b=!0,(!(v&&p&&y)||y.closed)&&l.complete()}))})}},8960:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=void 0;var n=t(7843);e.subscribeOn=function(i,a){return a===void 0&&(a=0),n.operate(function(o,s){s.add(i.schedule(function(){return o.subscribe(s)},a))})}},8977:function(r,e,t){var n=this&&this.__read||function(c,f){var d=typeof Symbol=="function"&&c[Symbol.iterator];if(!d)return c;var h,v,p=d.call(c),g=[];try{for(;(f===void 0||f-- >0)&&!(h=p.next()).done;)g.push(h.value)}catch(y){v={error:y}}finally{try{h&&!h.done&&(d=p.return)&&d.call(p)}finally{if(v)throw v.error}}return g},i=this&&this.__spreadArray||function(c,f){for(var d=0,h=f.length,v=c.length;d<h;d++,v++)c[v]=f[d];return c};Object.defineProperty(e,"__esModule",{value:!0}),e.share=void 0;var a=t(9445),o=t(2483),s=t(5),u=t(7843);function l(c,f){for(var d=[],h=2;h<arguments.length;h++)d[h-2]=arguments[h];if(f!==!0){if(f!==!1){var v=new s.SafeSubscriber({next:function(){v.unsubscribe(),c()}});return a.innerFrom(f.apply(void 0,i([],n(d)))).subscribe(v)}}else c()}e.share=function(c){c===void 0&&(c={});var f=c.connector,d=f===void 0?function(){return new o.Subject}:f,h=c.resetOnError,v=h===void 0||h,p=c.resetOnComplete,g=p===void 0||p,y=c.resetOnRefCountZero,b=y===void 0||y;return function(m){var _,x,C,w=0,O=!1,A=!1,k=function(){x==null||x.unsubscribe(),x=void 0},R=function(){k(),_=C=void 0,O=A=!1},I=function(){var M=_;R(),M==null||M.unsubscribe()};return u.operate(function(M,N){w++,A||O||k();var F=C=C??d();N.add(function(){--w!==0||A||O||(x=l(I,b))}),F.subscribe(N),!_&&w>0&&(_=new s.SafeSubscriber({next:function(z){return F.next(z)},error:function(z){A=!0,k(),x=l(R,v,z),F.error(z)},complete:function(){O=!0,k(),x=l(R,g),F.complete()}}),a.innerFrom(M).subscribe(_))})(m)}}},8986:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;var n=t(9568),i=function(){function a(o,s){s===void 0&&(s=a.now),this.schedulerActionCtor=o,this.now=s}return a.prototype.schedule=function(o,s,u){return s===void 0&&(s=0),new this.schedulerActionCtor(this,o).schedule(u,s)},a.now=n.dateTimestampProvider.now,a}();e.Scheduler=i},8987:function(r,e,t){var n=this&&this.__extends||function(){var x=function(C,w){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,A){O.__proto__=A}||function(O,A){for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(O[k]=A[k])},x(C,w)};return function(C,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function O(){this.constructor=C}x(C,w),C.prototype=w===null?Object.create(w):(O.prototype=w.prototype,new O)}}(),i=this&&this.__awaiter||function(x,C,w,O){return new(w||(w=Promise))(function(A,k){function R(N){try{M(O.next(N))}catch(F){k(F)}}function I(N){try{M(O.throw(N))}catch(F){k(F)}}function M(N){var F;N.done?A(N.value):(F=N.value,F instanceof w?F:new w(function(z){z(F)})).then(R,I)}M((O=O.apply(x,C||[])).next())})},a=this&&this.__generator||function(x,C){var w,O,A,k,R={label:0,sent:function(){if(1&A[0])throw A[1];return A[1]},trys:[],ops:[]};return k={next:I(0),throw:I(1),return:I(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function I(M){return function(N){return function(F){if(w)throw new TypeError("Generator is already executing.");for(;k&&(k=0,F[0]&&(R=0)),R;)try{if(w=1,O&&(A=2&F[0]?O.return:F[0]?O.throw||((A=O.return)&&A.call(O),0):O.next)&&!(A=A.call(O,F[1])).done)return A;switch(O=0,A&&(F=[2&F[0],A.value]),F[0]){case 0:case 1:A=F;break;case 4:return R.label++,{value:F[1],done:!1};case 5:R.label++,O=F[1],F=[0];continue;case 7:F=R.ops.pop(),R.trys.pop();continue;default:if(!((A=(A=R.trys).length>0&&A[A.length-1])||F[0]!==6&&F[0]!==2)){R=0;continue}if(F[0]===3&&(!A||F[1]>A[0]&&F[1]<A[3])){R.label=F[1];break}if(F[0]===6&&R.label<A[1]){R.label=A[1],A=F;break}if(A&&R.label<A[2]){R.label=A[2],R.ops.push(F);break}A[2]&&R.ops.pop(),R.trys.pop();continue}F=C.call(x,R)}catch(z){F=[6,z],O=0}finally{w=A=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}([M,N])}}},o=this&&this.__read||function(x,C){var w=typeof Symbol=="function"&&x[Symbol.iterator];if(!w)return x;var O,A,k=w.call(x),R=[];try{for(;(C===void 0||C-- >0)&&!(O=k.next()).done;)R.push(O.value)}catch(I){A={error:I}}finally{try{O&&!O.done&&(w=k.return)&&w.call(k)}finally{if(A)throw A.error}}return R},s=this&&this.__spreadArray||function(x,C,w){if(w||arguments.length===2)for(var O,A=0,k=C.length;A<k;A++)!O&&A in C||(O||(O=Array.prototype.slice.call(C,0,A)),O[A]=C[A]);return x.concat(O||Array.prototype.slice.call(C))},u=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0});var l=t(7721),c=t(9305),f=u(t(1839)),d=t(6781),h=u(t(4531)),v=u(t(4271)),p=c.error.SERVICE_UNAVAILABLE,g=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],y=c.internal.pool,b=y.Pool,m=y.PoolConfig,_=function(x){function C(w,O){var A=w.id,k=w.config,R=w.log,I=w.userAgent,M=w.boltAgent,N=w.authTokenManager,F=w.newPool,z=F===void 0?function(){for(var U=[],W=0;W<arguments.length;W++)U[W]=arguments[W];return new(b.bind.apply(b,s([void 0],o(U),!1)))}:F;O===void 0&&(O=null);var B=x.call(this)||this;return B._id=A,B._config=k,B._log=R,B._clientCertificateHolder=new v.default({clientCertificateProvider:B._config.clientCertificate}),B._authenticationProvider=new f.default({authTokenManager:N,userAgent:I,boltAgent:M}),B._livenessCheckProvider=new h.default({connectionLivenessCheckTimeout:k.connectionLivenessCheckTimeout}),B._userAgent=I,B._boltAgent=M,B._createChannelConnection=O||function(U){return i(B,void 0,void 0,function(){var W,Y;return a(this,function(H){switch(H.label){case 0:return W=l.createChannelConnection,Y=[U,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,W.apply(void 0,Y.concat([H.sent()]))]}})})},B._connectionPool=z({create:B._createConnection.bind(B),destroy:B._destroyConnection.bind(B),validateOnAcquire:B._validateConnectionOnAcquire.bind(B),validateOnRelease:B._validateConnectionOnRelease.bind(B),installIdleObserver:C._installIdleObserverOnConnection.bind(B),removeIdleObserver:C._removeIdleObserverOnConnection.bind(B),config:m.fromDriverConfig(k),log:B._log}),B._openConnections={},B}return n(C,x),C.prototype._createConnectionErrorHandler=function(){return new l.ConnectionErrorHandler(p)},C.prototype._getClientCertificate=function(){return i(this,void 0,void 0,function(){return a(this,function(w){return[2,this._config.clientCertificate.getClientCertificate()]})})},C.prototype._createConnection=function(w,O,A){var k=this,R=w.auth;return this._createChannelConnection(O).then(function(I){return I.release=function(){return I.idleTimestamp=Date.now(),A(O,I)},k._openConnections[I.id]=I,k._authenticationProvider.authenticate({connection:I,auth:R}).catch(function(M){throw k._destroyConnection(I),M})})},C.prototype._validateConnectionOnAcquire=function(w,O){var A=w.auth,k=w.skipReAuth;return i(this,void 0,void 0,function(){var R,I;return a(this,function(M){switch(M.label){case 0:if(!this._validateConnection(O))return[2,!1];M.label=1;case 1:return M.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(O)];case 2:return M.sent(),[3,4];case 3:return R=M.sent(),this._log.debug("The connection ".concat(O.id," is not alive because of an error ").concat(R.code," '").concat(R.message,"'")),[2,!1];case 4:return M.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:O,auth:A,skipReAuth:k})];case 5:return M.sent(),[2,!0];case 6:return I=M.sent(),this._log.debug("The connection ".concat(O.id," is not valid because of an error ").concat(I.code," '").concat(I.message,"'")),[2,!1];case 7:return[2]}})})},C.prototype._validateConnectionOnRelease=function(w){return w._sticky!==!0&&this._validateConnection(w)},C.prototype._validateConnection=function(w){if(!w.isOpen())return!1;var O=this._config.maxConnectionLifetime;return!(Date.now()-w.creationTimestamp>O)},C.prototype._destroyConnection=function(w){return delete this._openConnections[w.id],w.close()},C.prototype._verifyConnectivityAndGetServerVersion=function(w){var O=w.address;return i(this,void 0,void 0,function(){var A,k;return a(this,function(R){switch(R.label){case 0:return[4,this._connectionPool.acquire({},O)];case 1:A=R.sent(),k=new c.ServerInfo(A.server,A.protocol().version),R.label=2;case 2:return R.trys.push([2,,5,7]),A.protocol().isLastMessageLogon()?[3,4]:[4,A.resetAndFlush()];case 3:R.sent(),R.label=4;case 4:return[3,7];case 5:return[4,A.release()];case 6:return R.sent(),[7];case 7:return[2,k]}})})},C.prototype._verifyAuthentication=function(w){var O=w.getAddress,A=w.auth;return i(this,void 0,void 0,function(){var k,R,I,M,N,F;return a(this,function(z){switch(z.label){case 0:k=[],z.label=1;case 1:return z.trys.push([1,8,9,11]),[4,O()];case 2:return R=z.sent(),[4,this._connectionPool.acquire({auth:A,skipReAuth:!0},R)];case 3:if(I=z.sent(),k.push(I),M=!I.protocol().isLastMessageLogon(),!I.supportsReAuth)throw(0,c.newError)("Driver is connected to a database that does not support user switch.");return M&&I.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:I,auth:A,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return z.sent(),[3,7];case 5:return!M||I.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:A},R,{requireNew:!0})];case 6:(N=z.sent())._sticky=!0,k.push(N),z.label=7;case 7:return[2,!0];case 8:if(F=z.sent(),g.includes(F.code))return[2,!1];throw F;case 9:return[4,Promise.all(k.map(function(B){return B.release()}))];case 10:return z.sent(),[7];case 11:return[2]}})})},C.prototype._verifyStickyConnection=function(w){var O=w.auth,A=w.connection;return w.address,i(this,void 0,void 0,function(){var k,R;return a(this,function(I){switch(I.label){case 0:return k=d.object.equals(O,A.authToken),R=!k,A._sticky=k&&!A.supportsReAuth,R||A._sticky?[4,A.release()]:[3,2];case 1:throw I.sent(),(0,c.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}})})},C.prototype.close=function(){return i(this,void 0,void 0,function(){return a(this,function(w){switch(w.label){case 0:return[4,this._connectionPool.close()];case 1:return w.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(O){return O.close()}))];case 2:return w.sent(),[2]}})})},C._installIdleObserverOnConnection=function(w,O){w._setIdle(O)},C._removeIdleObserverOnConnection=function(w){w._unsetIdle()},C.prototype._handleSecurityError=function(w,O,A){return this._authenticationProvider.handleError({connection:A,code:w.code})&&(w.retriable=!0),w.code==="Neo.ClientError.Security.AuthorizationExpired"&&this._connectionPool.apply(O,function(k){k.authToken=null}),A&&A.close().catch(function(){}),w},C}(c.ConnectionProvider);e.default=_},8995:function(r,e,t){var n=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,d=f&&c[f],h=0;if(d)return d.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&h>=c.length&&(c=void 0),{value:c&&c[h++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=void 0;var i=t(8014),a=t(7843),o=t(9445),s=t(3111),u=t(1342),l=t(7479);e.bufferToggle=function(c,f){return a.operate(function(d,h){var v=[];o.innerFrom(c).subscribe(s.createOperatorSubscriber(h,function(p){var g=[];v.push(g);var y=new i.Subscription;y.add(o.innerFrom(f(p)).subscribe(s.createOperatorSubscriber(h,function(){l.arrRemove(v,g),h.next(g),y.unsubscribe()},u.noop)))},u.noop)),d.subscribe(s.createOperatorSubscriber(h,function(p){var g,y;try{for(var b=n(v),m=b.next();!m.done;m=b.next())m.value.push(p)}catch(_){g={error:_}}finally{try{m&&!m.done&&(y=b.return)&&y.call(b)}finally{if(g)throw g.error}}},function(){for(;v.length>0;)h.next(v.shift());h.complete()}))})}},9014:function(r,e,t){var n=this&&this.__extends||function(){var x=function(C,w){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,A){O.__proto__=A}||function(O,A){for(var k in A)Object.prototype.hasOwnProperty.call(A,k)&&(O[k]=A[k])},x(C,w)};return function(C,w){if(typeof w!="function"&&w!==null)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function O(){this.constructor=C}x(C,w),C.prototype=w===null?Object.create(w):(O.prototype=w.prototype,new O)}}(),i=this&&this.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var a=t(9305),o=i(t(7790)),s=t(6781),u=a.internal.constants.FETCH_ALL,l=a.error.PROTOCOL_ERROR,c=function(){function x(){}return x.prototype.onNext=function(C){},x.prototype.onError=function(C){},x.prototype.onCompleted=function(C){},x}();e.StreamObserver=c;var f=function(x){function C(w){var O=w===void 0?{}:w,A=O.reactive,k=A!==void 0&&A,R=O.moreFunction,I=O.discardFunction,M=O.fetchSize,N=M===void 0?u:M,F=O.beforeError,z=O.afterError,B=O.beforeKeys,U=O.afterKeys,W=O.beforeComplete,Y=O.afterComplete,H=O.server,J=O.highRecordWatermark,le=J===void 0?Number.MAX_VALUE:J,fe=O.lowRecordWatermark,ue=fe===void 0?Number.MAX_VALUE:fe,ge=O.enrichMetadata,ve=O.onDb,de=x.call(this)||this;return de._fieldKeys=null,de._fieldLookup=null,de._head=null,de._queuedRecords=[],de._tail=null,de._error=null,de._observers=[],de._meta={},de._server=H,de._beforeError=F,de._afterError=z,de._beforeKeys=B,de._afterKeys=U,de._beforeComplete=W,de._afterComplete=Y,de._enrichMetadata=ge||s.functional.identity,de._queryId=null,de._moreFunction=R,de._discardFunction=I,de._discard=!1,de._fetchSize=N,de._lowRecordWatermark=ue,de._highRecordWatermark=le,de._setState(k?_.READY:_.READY_STREAMING),de._setupAutoPull(),de._paused=!1,de._pulled=!k,de._haveRecordStreamed=!1,de._onDb=ve,de}return n(C,x),C.prototype.pause=function(){this._paused=!0},C.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},C.prototype.onNext=function(w){this._haveRecordStreamed=!0;var O=new a.Record(this._fieldKeys,w,this._fieldLookup);this._observers.some(function(A){return A.onNext})?this._observers.forEach(function(A){A.onNext&&A.onNext(O)}):(this._queuedRecords.push(O),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},C.prototype.onCompleted=function(w){this._state.onSuccess(this,w)},C.prototype.onError=function(w){this._state.onError(this,w)},C.prototype.cancel=function(){this._discard=!0},C.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(_.STREAMING)},C.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(_.SUCCEEDED)},C.prototype.subscribe=function(w){if(this._head&&w.onKeys&&w.onKeys(this._head),this._queuedRecords.length>0&&w.onNext)for(var O=0;O<this._queuedRecords.length;O++)w.onNext(this._queuedRecords[O]),this._queuedRecords.length-O-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===_.READY&&this._handleStreaming());this._tail&&w.onCompleted&&w.onCompleted(this._tail),this._error&&w.onError(this._error),this._observers.push(w),this._state===_.READY&&this._handleStreaming()},C.prototype._handleHasMore=function(w){this._setState(_.READY),this._handleStreaming(),delete w.has_more},C.prototype._handlePullSuccess=function(w){var O=this,A=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},w));if([void 0,null,"r","w","rw","s"].includes(A.type)){this._setState(_.SUCCEEDED);var k=null;this._beforeComplete&&(k=this._beforeComplete(A));var R=function(){O._tail=A,O._observers.some(function(I){return I.onCompleted})&&O._observers.forEach(function(I){I.onCompleted&&I.onCompleted(A)}),O._afterComplete&&O._afterComplete(A)};k?Promise.resolve(k).then(function(){return R()}):R()}else this.onError((0,a.newError)(`Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got '`.concat(A.type,"'"),l))},C.prototype._handleRunSuccess=function(w,O){var A=this;if(this._fieldKeys===null){if(this._fieldKeys=[],this._fieldLookup={},w.fields&&w.fields.length>0){this._fieldKeys=w.fields;for(var k=0;k<w.fields.length;k++)this._fieldLookup[w.fields[k]]=k}w.db!==null&&this._onDb!==void 0&&this._onDb(w.db),w.fields!=null&&delete w.fields,w.qid!==null&&w.qid!==void 0&&(this._queryId=w.qid,delete w.qid),this._storeMetadataForCompletion(w);var R=null;this._beforeKeys&&(R=this._beforeKeys(this._fieldKeys));var I=function(){A._head=A._fieldKeys,A._observers.some(function(M){return M.onKeys})&&A._observers.forEach(function(M){M.onKeys&&M.onKeys(A._fieldKeys)}),A._afterKeys&&A._afterKeys(A._fieldKeys),O()};R?Promise.resolve(R).then(function(){return I()}):I()}},C.prototype._handleError=function(w){var O=this;this._setState(_.FAILED),this._error=w;var A=null;this._beforeError&&(A=this._beforeError(w));var k=function(){O._observers.some(function(R){return R.onError})&&O._observers.forEach(function(R){R.onError&&R.onError(w)}),O._afterError&&O._afterError(w)};A?Promise.resolve(A).then(function(){return k()}):k()},C.prototype._handleStreaming=function(){this._head&&this._observers.some(function(w){return w.onNext||w.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},C.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(_.STREAMING)},C.prototype._storeMetadataForCompletion=function(w){for(var O=Object.keys(w),A=O.length,k="";A--;)k=O[A],this._meta[k]=w[k]},C.prototype._setState=function(w){this._state=w},C.prototype._setupAutoPull=function(){this._autoPull=!0},C}(c);e.ResultStreamObserver=f;var d=function(x){function C(w){var O=w===void 0?{}:w,A=O.onError,k=O.onCompleted,R=x.call(this)||this;return R._onError=A,R._onCompleted=k,R}return n(C,x),C.prototype.onNext=function(w){this.onError((0,a.newError)("Received RECORD when initializing "+a.json.stringify(w)))},C.prototype.onError=function(w){this._onError&&this._onError(w)},C.prototype.onCompleted=function(w){this._onCompleted&&this._onCompleted(w)},C}(c);e.LoginObserver=d;var h=function(x){function C(w){var O=w===void 0?{}:w,A=O.onError,k=O.onCompleted,R=x.call(this)||this;return R._onError=A,R._onCompleted=k,R}return n(C,x),C.prototype.onNext=function(w){this.onError((0,a.newError)("Received RECORD when logging off "+a.json.stringify(w)))},C.prototype.onError=function(w){this._onError&&this._onError(w)},C.prototype.onCompleted=function(w){this._onCompleted&&this._onCompleted(w)},C}(c);e.LogoffObserver=h;var v=function(x){function C(w){var O=w===void 0?{}:w,A=O.onProtocolError,k=O.onError,R=O.onComplete,I=x.call(this)||this;return I._onProtocolError=A,I._onError=k,I._onComplete=R,I}return n(C,x),C.prototype.onNext=function(w){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(w),l))},C.prototype.onError=function(w){w.code===l&&this._onProtocolError&&this._onProtocolError(w.message),this._onError&&this._onError(w)},C.prototype.onCompleted=function(w){this._onComplete&&this._onComplete(w)},C}(c);e.ResetObserver=v;var p=function(x){function C(w){var O=w===void 0?{}:w,A=O.onError,k=O.onCompleted,R=x.call(this)||this;return R._onError=A,R._onCompleted=k,R}return n(C,x),C.prototype.onNext=function(w){this.onError((0,a.newError)("Received RECORD when sending telemetry "+a.json.stringify(w),l))},C.prototype.onError=function(w){this._onError&&this._onError(w)},C.prototype.onCompleted=function(w){this._onCompleted&&this._onCompleted(w)},C}(f);e.TelemetryObserver=p;var g=function(x){function C(w){var O=w.error,A=w.onError,k=x.call(this,{beforeError:A})||this;return k.onError(O),k}return n(C,x),C}(f);e.FailedObserver=g;var y=function(x){function C(){var w=x.call(this)||this;return x.prototype.markCompleted.call(w),w}return n(C,x),C}(f);e.CompletedObserver=y;var b=function(x){function C(w){var O=w.resultObserver,A=w.onProtocolError,k=w.onError,R=w.onCompleted,I=x.call(this)||this;return I._resultObserver=O,I._onError=k,I._onCompleted=R,I._records=[],I._onProtocolError=A,O.subscribe(I),I}return n(C,x),C.prototype.onNext=function(w){this._records.push(w)},C.prototype.onError=function(w){w.code===l&&this._onProtocolError&&this._onProtocolError(w.message),this._onError&&this._onError(w)},C.prototype.onCompleted=function(){this._records===null||this._records.length===1?this._onCompleted&&this._onCompleted(o.default.ofRecord(this._records[0])):this.onError((0,a.newError)("Illegal response from router. Received "+this._records.length+` records but expected only one.
`+a.json.stringify(this._records),l))},C}(c);e.ProcedureRouteObserver=b;var m=function(x){function C(w){var O=w===void 0?{}:w,A=O.onProtocolError,k=O.onError,R=O.onCompleted,I=x.call(this)||this;return I._onProtocolError=A,I._onError=k,I._onCompleted=R,I}return n(C,x),C.prototype.onNext=function(w){this.onError((0,a.newError)("Received RECORD when resetting: received record is: "+a.json.stringify(w),l))},C.prototype.onError=function(w){w.code===l&&this._onProtocolError&&this._onProtocolError(w.message),this._onError&&this._onError(w)},C.prototype.onCompleted=function(w){this._onCompleted&&this._onCompleted(o.default.ofMessageResponse(w))},C}(c);e.RouteObserver=m;var _={READY_STREAMING:{onSuccess:function(x,C){x._handleRunSuccess(C,function(){x._setState(_.STREAMING)})},onError:function(x,C){x._handleError(C)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(x,C){x._handleRunSuccess(C,function(){return x._handleStreaming()})},onError:function(x,C){x._handleError(C)},name:function(){return"READY"},pull:function(x){return x._more()}},STREAMING:{onSuccess:function(x,C){C.has_more?x._handleHasMore(C):x._handlePullSuccess(C)},onError:function(x,C){x._handleError(C)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(x){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},9018:function(r,e,t){var n=this&&this.__read||function(g,y){var b=typeof Symbol=="function"&&g[Symbol.iterator];if(!b)return g;var m,_,x=b.call(g),C=[];try{for(;(y===void 0||y-- >0)&&!(m=x.next()).done;)C.push(m.value)}catch(w){_={error:w}}finally{try{m&&!m.done&&(b=x.return)&&b.call(x)}finally{if(_)throw _.error}}return C},i=this&&this.__spreadArray||function(g,y,b){if(b||arguments.length===2)for(var m,_=0,x=y.length;_<x;_++)!m&&_ in y||(m||(m=Array.prototype.slice.call(y,0,_)),m[_]=y[_]);return g.concat(m||Array.prototype.slice.call(y))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var a=t(9305),o=a.internal.constants,s=o.ACCESS_MODE_WRITE,u=o.ACCESS_MODE_READ,l=a.internal.serverAddress.ServerAddress,c=a.error.PROTOCOL_ERROR,f=function(){function g(y){var b=y===void 0?{}:y,m=b.database,_=b.routers,x=b.readers,C=b.writers,w=b.expirationTime,O=b.ttl;this.database=m||null,this.databaseName=m||"default database",this.routers=_||[],this.readers=x||[],this.writers=C||[],this.expirationTime=w||(0,a.int)(0),this.ttl=O}return g.fromRawRoutingTable=function(y,b,m){return h(y,b,m)},g.prototype.forget=function(y){this.readers=d(this.readers,y),this.writers=d(this.writers,y)},g.prototype.forgetRouter=function(y){this.routers=d(this.routers,y)},g.prototype.forgetWriter=function(y){this.writers=d(this.writers,y)},g.prototype.isStaleFor=function(y){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||y===u&&this.readers.length===0||y===s&&this.writers.length===0},g.prototype.isExpiredFor=function(y){return this.expirationTime.add(y).lessThan(Date.now())},g.prototype.allServers=function(){return i(i(i([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},g.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},g}();function d(g,y){return g.filter(function(b){return b.asKey()!==y.asKey()})}function h(g,y,b){var m=b.ttl,_=function(A,k){try{var R=(0,a.int)(Date.now()),I=(0,a.int)(A.ttl).multiply(1e3).add(R);return I.lessThan(R)?a.Integer.MAX_VALUE:I}catch(M){throw(0,a.newError)("Unable to parse TTL entry from router ".concat(k,` from raw routing table:
`).concat(a.json.stringify(A),`
Error message: `).concat(M.message),c)}}(b,y),x=function(A,k){try{var R=[],I=[],M=[];return A.servers.forEach(function(N){var F=N.role,z=N.addresses;F==="ROUTE"?R=p(z).map(function(B){return l.fromUrl(B)}):F==="WRITE"?M=p(z).map(function(B){return l.fromUrl(B)}):F==="READ"&&(I=p(z).map(function(B){return l.fromUrl(B)}))}),{routers:R,readers:I,writers:M}}catch(N){throw(0,a.newError)("Unable to parse servers entry from router ".concat(k,` from addresses:
`).concat(a.json.stringify(A.servers),`
Error message: `).concat(N.message),c)}}(b,y),C=x.routers,w=x.readers,O=x.writers;return v(C,"routers",y),v(w,"readers",y),new f({database:g||b.db,routers:C,readers:w,writers:O,expirationTime:_,ttl:m})}function v(g,y,b){if(g.length===0)throw(0,a.newError)("Received no "+y+" from router "+b,c)}function p(g){if(!Array.isArray(g))throw new TypeError("Array expected but got: "+g);return Array.from(g)}e.default=f,e.createValidRoutingTable=h},9052:(r,e)=>{function t(n,i,a){return{kind:n,value:i,error:a}}Object.defineProperty(e,"__esModule",{value:!0}),e.createNotification=e.nextNotification=e.errorNotification=e.COMPLETE_NOTIFICATION=void 0,e.COMPLETE_NOTIFICATION=t("C",void 0,void 0),e.errorNotification=function(n){return t("E",void 0,n)},e.nextNotification=function(n){return t("N",n,void 0)},e.createNotification=t},9054:function(r,e,t){var n=this&&this.__extends||function(){var y=function(b,m){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,x){_.__proto__=x}||function(_,x){for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(_[C]=x[C])},y(b,m)};return function(b,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");function _(){this.constructor=b}y(b,m),b.prototype=m===null?Object.create(m):(_.prototype=m.prototype,new _)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(y){for(var b,m=1,_=arguments.length;m<_;m++)for(var x in b=arguments[m])Object.prototype.hasOwnProperty.call(b,x)&&(y[x]=b[x]);return y},i.apply(this,arguments)},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(6445)),s=a(t(7021)),u=t(9014),l=t(397),c=a(t(7331)),f=a(t(5045)),d=a(t(3321)),h=t(9305),v=h.internal.bookmarks.Bookmarks,p=h.internal.constants.BOLT_PROTOCOL_V4_3,g=function(y){function b(){return y!==null&&y.apply(this,arguments)||this}return n(b,y),Object.defineProperty(b.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"transformer",{get:function(){var m=this;return this._transformer===void 0&&(this._transformer=new d.default(Object.values(c.default).map(function(_){return _(m._config,m._log)}))),this._transformer},enumerable:!1,configurable:!0}),b.prototype.requestRoutingInformation=function(m){var _=m.routingContext,x=_===void 0?{}:_,C=m.databaseName,w=C===void 0?null:C,O=m.sessionContext,A=O===void 0?{}:O,k=m.onError,R=m.onCompleted,I=new u.RouteObserver({onProtocolError:this._onProtocolError,onError:k,onCompleted:R}),M=A.bookmarks||v.empty();return this.write(s.default.route(x,M.values(),w),I,!0),I},b.prototype.initialize=function(m){var _=this,x=m===void 0?{}:m,C=x.userAgent,w=(x.boltAgent,x.authToken),O=x.notificationFilter,A=x.onError,k=x.onComplete,R=new u.LoginObserver({onError:function(I){return _._onLoginError(I,A)},onCompleted:function(I){return I.patch_bolt!==void 0&&_._applyPatches(I.patch_bolt),_._onLoginCompleted(I,w,k)}});return(0,l.assertNotificationFilterIsEmpty)(O,this._onProtocolError,R),this.write(s.default.hello(C,w,this._serversideRouting,["utc"]),R,!0),R},b.prototype._applyPatches=function(m){m.includes("utc")&&this._applyUtcPatch()},b.prototype._applyUtcPatch=function(){var m=this;this._transformer=new d.default(Object.values(i(i({},c.default),f.default)).map(function(_){return _(m._config,m._log)}))},b}(o.default);e.default=g},9060:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.firstValueFrom=void 0;var n=t(2823),i=t(5);e.firstValueFrom=function(a,o){var s=typeof o=="object";return new Promise(function(u,l){var c=new i.SafeSubscriber({next:function(f){u(f),c.unsubscribe()},error:l,complete:function(){s?u(o.defaultValue):l(new n.EmptyError)}});a.subscribe(c)})}},9098:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=void 0;var n=t(6640),i=t(7843),a=t(3111);e.skipLast=function(o){return o<=0?n.identity:i.operate(function(s,u){var l=new Array(o),c=0;return s.subscribe(a.createOperatorSubscriber(u,function(f){var d=c++;if(d<o)l[d]=f;else{var h=d%o,v=l[h];l[h]=f,u.next(v)}})),function(){l=null}})}},9105:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forkJoin=void 0;var n=t(4662),i=t(7360),a=t(9445),o=t(1107),s=t(3111),u=t(1251),l=t(6013);e.forkJoin=function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];var d=o.popResultSelector(c),h=i.argsArgArrayOrObject(c),v=h.args,p=h.keys,g=new n.Observable(function(y){var b=v.length;if(b)for(var m=new Array(b),_=b,x=b,C=function(O){var A=!1;a.innerFrom(v[O]).subscribe(s.createOperatorSubscriber(y,function(k){A||(A=!0,x--),m[O]=k},function(){return _--},void 0,function(){_&&A||(x||y.next(p?l.createObject(p,m):m),y.complete())}))},w=0;w<b;w++)C(w);else y.complete()});return d?g.pipe(u.mapOneOrManyArgs(d)):g}},9125:function(r,e,t){var n=this&&this.__extends||function(){var h=function(v,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(g[b]=y[b])},h(v,p)};return function(v,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function g(){this.constructor=v}h(v,p),v.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(h){for(var v,p=1,g=arguments.length;p<g;p++)for(var y in v=arguments[p])Object.prototype.hasOwnProperty.call(v,y)&&(h[y]=v[y]);return h},i.apply(this,arguments)},a=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0});var o=a(t(934)),s=a(t(2204)),u=a(t(3321)),l=a(t(7021)),c=t(9014),f=t(9305).internal.constants.BOLT_PROTOCOL_V5_3,d=function(h){function v(){return h!==null&&h.apply(this,arguments)||this}return n(v,h),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var p=this;return this._transformer===void 0&&(this._transformer=new u.default(Object.values(s.default).map(function(g){return g(p._config,p._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.initialize=function(p){var g=this,y=p===void 0?{}:p,b=y.userAgent,m=y.boltAgent,_=y.authToken,x=y.notificationFilter,C=y.onError,w=y.onComplete,O={},A=new c.LoginObserver({onError:function(k){return g._onLoginError(k,C)},onCompleted:function(k){return O.metadata=k,g._onLoginCompleted(k)}});return this.write(l.default.hello5x3(b,m,x,this._serversideRouting),A,!1),this.logon({authToken:_,onComplete:function(k){return w(i(i({},k),O.metadata))},onError:C,flush:!0})},v}(o.default);e.default=d},9135:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=void 0;var n=t(983),i=t(1018);e.concatMap=function(a,o){return i.isFunction(o)?n.mergeMap(a,o,1):n.mergeMap(a,1)}},9137:function(r,e,t){var n=this&&this.__generator||function(s,u){var l,c,f,d,h={label:0,sent:function(){if(1&f[0])throw f[1];return f[1]},trys:[],ops:[]};return d={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function v(p){return function(g){return function(y){if(l)throw new TypeError("Generator is already executing.");for(;h;)try{if(l=1,c&&(f=2&y[0]?c.return:y[0]?c.throw||((f=c.return)&&f.call(c),0):c.next)&&!(f=f.call(c,y[1])).done)return f;switch(c=0,f&&(y=[2&y[0],f.value]),y[0]){case 0:case 1:f=y;break;case 4:return h.label++,{value:y[1],done:!1};case 5:h.label++,c=y[1],y=[0];continue;case 7:y=h.ops.pop(),h.trys.pop();continue;default:if(!((f=(f=h.trys).length>0&&f[f.length-1])||y[0]!==6&&y[0]!==2)){h=0;continue}if(y[0]===3&&(!f||y[1]>f[0]&&y[1]<f[3])){h.label=y[1];break}if(y[0]===6&&h.label<f[1]){h.label=f[1],f=y;break}if(f&&h.label<f[2]){h.label=f[2],h.ops.push(y);break}f[2]&&h.ops.pop(),h.trys.pop();continue}y=u.call(s,h)}catch(b){y=[6,b],c=0}finally{l=f=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([p,g])}}},i=this&&this.__await||function(s){return this instanceof i?(this.v=s,this):new i(s)},a=this&&this.__asyncGenerator||function(s,u,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,f=l.apply(s,u||[]),d=[];return c={},h("next"),h("throw"),h("return"),c[Symbol.asyncIterator]=function(){return this},c;function h(b){f[b]&&(c[b]=function(m){return new Promise(function(_,x){d.push([b,m,_,x])>1||v(b,m)})})}function v(b,m){try{(_=f[b](m)).value instanceof i?Promise.resolve(_.value.v).then(p,g):y(d[0][2],_)}catch(x){y(d[0][3],x)}var _}function p(b){v("next",b)}function g(b){v("throw",b)}function y(b,m){b(m),d.shift(),d.length&&v(d[0][0],d[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.isReadableStreamLike=e.readableStreamLikeToAsyncGenerator=void 0;var o=t(1018);e.readableStreamLikeToAsyncGenerator=function(s){return a(this,arguments,function(){var u,l,c;return n(this,function(f){switch(f.label){case 0:u=s.getReader(),f.label=1;case 1:f.trys.push([1,,9,10]),f.label=2;case 2:return[4,i(u.read())];case 3:return l=f.sent(),c=l.value,l.done?[4,i(void 0)]:[3,5];case 4:return[2,f.sent()];case 5:return[4,i(c)];case 6:return[4,f.sent()];case 7:return f.sent(),[3,2];case 8:return[3,10];case 9:return u.releaseLock(),[7];case 10:return[2]}})})},e.isReadableStreamLike=function(s){return o.isFunction(s==null?void 0:s.getReader)}},9139:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;var n=t(6384),i=t(7843);e.reduce=function(a,o){return i.operate(n.scanInternals(a,o,arguments.length>=2,!1,!0))}},9155:function(r,e){var t=this&&this.__read||function(i,a){var o=typeof Symbol=="function"&&i[Symbol.iterator];if(!o)return i;var s,u,l=o.call(i),c=[];try{for(;(a===void 0||a-- >0)&&!(s=l.next()).done;)c.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(o=l.return)&&o.call(l)}finally{if(u)throw u.error}}return c},n=this&&this.__spreadArray||function(i,a){for(var o=0,s=a.length,u=i.length;o<s;o++,u++)i[u]=a[o];return i};Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutProvider=void 0,e.timeoutProvider={setTimeout:function(i,a){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var u=e.timeoutProvider.delegate;return u!=null&&u.setTimeout?u.setTimeout.apply(u,n([i,a],t(o))):setTimeout.apply(void 0,n([i,a],t(o)))},clearTimeout:function(i){var a=e.timeoutProvider.delegate;return((a==null?void 0:a.clearTimeout)||clearTimeout)(i)},delegate:void 0}},9223:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.captureError=e.errorContext=void 0;var n=t(3413),i=null;e.errorContext=function(a){if(n.config.useDeprecatedSynchronousErrorHandling){var o=!i;if(o&&(i={errorThrown:!1,error:null}),a(),o){var s=i,u=s.errorThrown,l=s.error;if(i=null,u)throw l}}else a()},e.captureError=function(a){n.config.useDeprecatedSynchronousErrorHandling&&i&&(i.errorThrown=!0,i.error=a)}},9238:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(4325));e.default=n({},a.default)},9247:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=void 0;var n=t(8918),i=t(1018),a=t(1483);e.multicast=function(o,s){var u=i.isFunction(o)?o:function(){return o};return i.isFunction(s)?a.connect(s,{connector:u}):function(l){return new n.ConnectableObservable(l,u)}}},9305:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(H,J,le,fe){fe===void 0&&(fe=le);var ue=Object.getOwnPropertyDescriptor(J,le);ue&&!("get"in ue?!J.__esModule:ue.writable||ue.configurable)||(ue={enumerable:!0,get:function(){return J[le]}}),Object.defineProperty(H,fe,ue)}:function(H,J,le,fe){fe===void 0&&(fe=le),H[fe]=J[le]}),i=this&&this.__setModuleDefault||(Object.create?function(H,J){Object.defineProperty(H,"default",{enumerable:!0,value:J})}:function(H,J){H.default=J}),a=this&&this.__importStar||function(H){if(H&&H.__esModule)return H;var J={};if(H!=null)for(var le in H)le!=="default"&&Object.prototype.hasOwnProperty.call(H,le)&&n(J,H,le);return i(J,H),J},o=this&&this.__importDefault||function(H){return H&&H.__esModule?H:{default:H}};Object.defineProperty(e,"__esModule",{value:!0}),e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.GQLError=e.newGQLError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=e.Releasable=e.ConnectionProvider=void 0;var s=t(9691);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return s.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return s.Neo4jError}}),Object.defineProperty(e,"newGQLError",{enumerable:!0,get:function(){return s.newGQLError}}),Object.defineProperty(e,"GQLError",{enumerable:!0,get:function(){return s.GQLError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return s.isRetriableError}});var u=a(t(3371));e.Integer=u.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return u.toString}});var l=t(5459);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}});var c=t(1517);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var f=o(t(4820));e.Record=f.default;var d=t(7093);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return d.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d.Point}});var h=a(t(6033));e.ResultSummary=h.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return h.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return h.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return h.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return h.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return h.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return h.Stats}});var v=a(t(1866));e.Notification=v.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return v.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return v.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return v.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return v.notificationSeverityLevel}});var p=t(1985);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return p.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return p.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return p.notificationFilterMinimumSeverityLevel}});var g=o(t(9512));e.Result=g.default;var y=o(t(8917));e.EagerResult=y.default;var b=a(t(2007));e.ConnectionProvider=b.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return b.Releasable}});var m=o(t(1409));e.Connection=m.default;var _=o(t(9473));e.Transaction=_.default;var x=o(t(5909));e.ManagedTransaction=x.default;var C=o(t(4569));e.TransactionPromise=C.default;var w=o(t(5481));e.Session=w.default;var O=a(t(7264)),A=O;e.Driver=O.default,e.driver=A;var k=o(t(1967));e.auth=k.default;var R=t(6755);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return R.bookmarkManager}});var I=t(2069);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return I.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return I.staticAuthTokenManager}});var M=t(7264);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return M.routing}});var N=a(t(6872));e.types=N;var F=a(t(4027));e.json=F;var z=o(t(1573));e.resultTransformers=z.default;var B=t(8264);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return B.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return B.resolveCertificateProvider}});var U=a(t(6995));e.internal=U;var W={SERVICE_UNAVAILABLE:s.SERVICE_UNAVAILABLE,SESSION_EXPIRED:s.SESSION_EXPIRED,PROTOCOL_ERROR:s.PROTOCOL_ERROR};e.error=W;var Y={authTokenManagers:I.authTokenManagers,newError:s.newError,Neo4jError:s.Neo4jError,newGQLError:s.newGQLError,GQLError:s.GQLError,isRetriableError:s.isRetriableError,error:W,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:U,isPoint:d.isPoint,Point:d.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,isDate:l.isDate,isDateTime:l.isDateTime,isDuration:l.isDuration,isLocalDateTime:l.isLocalDateTime,isLocalTime:l.isLocalTime,isTime:l.isTime,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:f.default,ResultSummary:h.default,queryType:h.queryType,ServerInfo:h.ServerInfo,Notification:v.default,GqlStatusObject:v.GqlStatusObject,Plan:h.Plan,ProfiledPlan:h.ProfiledPlan,QueryStatistics:h.QueryStatistics,Stats:h.Stats,Result:g.default,EagerResult:y.default,Transaction:_.default,ManagedTransaction:x.default,TransactionPromise:C.default,Session:w.default,Driver:O.default,Connection:m.default,Releasable:b.Releasable,types:N,driver:A,json:F,auth:k.default,bookmarkManager:R.bookmarkManager,routing:M.routing,resultTransformers:z.default,notificationCategory:v.notificationCategory,notificationClassification:v.notificationClassification,notificationSeverityLevel:v.notificationSeverityLevel,notificationFilterDisabledCategory:p.notificationFilterDisabledCategory,notificationFilterDisabledClassification:p.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:p.notificationFilterMinimumSeverityLevel,clientCertificateProviders:B.clientCertificateProviders,resolveCertificateProvider:B.resolveCertificateProvider};e.default=Y},9318:(r,e)=>{e.read=function(t,n,i,a,o){var s,u,l=8*o-a-1,c=(1<<l)-1,f=c>>1,d=-7,h=i?o-1:0,v=i?-1:1,p=t[n+h];for(h+=v,s=p&(1<<-d)-1,p>>=-d,d+=l;d>0;s=256*s+t[n+h],h+=v,d-=8);for(u=s&(1<<-d)-1,s>>=-d,d+=a;d>0;u=256*u+t[n+h],h+=v,d-=8);if(s===0)s=1-f;else{if(s===c)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,a),s-=f}return(p?-1:1)*u*Math.pow(2,s-a)},e.write=function(t,n,i,a,o,s){var u,l,c,f=8*s-o-1,d=(1<<f)-1,h=d>>1,v=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=a?0:s-1,g=a?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(l=isNaN(n)?1:0,u=d):(u=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-u))<1&&(u--,c*=2),(n+=u+h>=1?v/c:v*Math.pow(2,1-h))*c>=2&&(u++,c/=2),u+h>=d?(l=0,u=d):u+h>=1?(l=(n*c-1)*Math.pow(2,o),u+=h):(l=n*Math.pow(2,h-1)*Math.pow(2,o),u=0));o>=8;t[i+p]=255&l,p+=g,l/=256,o-=8);for(u=u<<o|l,f+=o;f>0;t[i+p]=255&u,p+=g,u/=256,f-=8);t[i+p-g]|=128*y}},9353:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defer=void 0;var n=t(4662),i=t(9445);e.defer=function(a){return new n.Observable(function(o){i.innerFrom(a()).subscribe(o)})}},9356:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=void 0;var n=t(7843),i=t(3111);e.isEmpty=function(){return n.operate(function(a,o){a.subscribe(i.createOperatorSubscriber(o,function(){o.next(!1),o.complete()},function(){o.next(!0),o.complete()}))})}},9376:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.range=void 0;var n=t(4662),i=t(8616);e.range=function(a,o,s){if(o==null&&(o=a,a=0),o<=0)return i.EMPTY;var u=o+a;return new n.Observable(s?function(l){var c=a;return s.schedule(function(){c<u?(l.next(c++),this.schedule()):l.complete()})}:function(l){for(var c=a;c<u&&!l.closed;)l.next(c++);l.complete()})}},9419:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=e.merge=e.max=e.materialize=e.mapTo=e.map=e.last=e.isEmpty=e.ignoreElements=e.groupBy=e.first=e.findIndex=e.find=e.finalize=e.filter=e.expand=e.exhaustMap=e.exhaustAll=e.exhaust=e.every=e.endWith=e.elementAt=e.distinctUntilKeyChanged=e.distinctUntilChanged=e.distinct=e.dematerialize=e.delayWhen=e.delay=e.defaultIfEmpty=e.debounceTime=e.debounce=e.count=e.connect=e.concatWith=e.concatMapTo=e.concatMap=e.concatAll=e.concat=e.combineLatestWith=e.combineLatest=e.combineLatestAll=e.combineAll=e.catchError=e.bufferWhen=e.bufferToggle=e.bufferTime=e.bufferCount=e.buffer=e.auditTime=e.audit=void 0,e.timeInterval=e.throwIfEmpty=e.throttleTime=e.throttle=e.tap=e.takeWhile=e.takeUntil=e.takeLast=e.take=e.switchScan=e.switchMapTo=e.switchMap=e.switchAll=e.subscribeOn=e.startWith=e.skipWhile=e.skipUntil=e.skipLast=e.skip=e.single=e.shareReplay=e.share=e.sequenceEqual=e.scan=e.sampleTime=e.sample=e.refCount=e.retryWhen=e.retry=e.repeatWhen=e.repeat=e.reduce=e.raceWith=e.race=e.publishReplay=e.publishLast=e.publishBehavior=e.publish=e.pluck=e.partition=e.pairwise=e.onErrorResumeNext=e.observeOn=e.multicast=e.min=e.mergeWith=e.mergeScan=e.mergeMapTo=e.mergeMap=e.flatMap=void 0,e.zipWith=e.zipAll=e.zip=e.withLatestFrom=e.windowWhen=e.windowToggle=e.windowTime=e.windowCount=e.window=e.toArray=e.timestamp=e.timeoutWith=e.timeout=void 0;var n=t(3146);Object.defineProperty(e,"audit",{enumerable:!0,get:function(){return n.audit}});var i=t(3231);Object.defineProperty(e,"auditTime",{enumerable:!0,get:function(){return i.auditTime}});var a=t(8015);Object.defineProperty(e,"buffer",{enumerable:!0,get:function(){return a.buffer}});var o=t(5572);Object.defineProperty(e,"bufferCount",{enumerable:!0,get:function(){return o.bufferCount}});var s=t(7210);Object.defineProperty(e,"bufferTime",{enumerable:!0,get:function(){return s.bufferTime}});var u=t(8995);Object.defineProperty(e,"bufferToggle",{enumerable:!0,get:function(){return u.bufferToggle}});var l=t(8831);Object.defineProperty(e,"bufferWhen",{enumerable:!0,get:function(){return l.bufferWhen}});var c=t(8118);Object.defineProperty(e,"catchError",{enumerable:!0,get:function(){return c.catchError}});var f=t(6625);Object.defineProperty(e,"combineAll",{enumerable:!0,get:function(){return f.combineAll}});var d=t(6728);Object.defineProperty(e,"combineLatestAll",{enumerable:!0,get:function(){return d.combineLatestAll}});var h=t(2551);Object.defineProperty(e,"combineLatest",{enumerable:!0,get:function(){return h.combineLatest}});var v=t(8239);Object.defineProperty(e,"combineLatestWith",{enumerable:!0,get:function(){return v.combineLatestWith}});var p=t(7601);Object.defineProperty(e,"concat",{enumerable:!0,get:function(){return p.concat}});var g=t(8158);Object.defineProperty(e,"concatAll",{enumerable:!0,get:function(){return g.concatAll}});var y=t(9135);Object.defineProperty(e,"concatMap",{enumerable:!0,get:function(){return y.concatMap}});var b=t(9938);Object.defineProperty(e,"concatMapTo",{enumerable:!0,get:function(){return b.concatMapTo}});var m=t(9669);Object.defineProperty(e,"concatWith",{enumerable:!0,get:function(){return m.concatWith}});var _=t(1483);Object.defineProperty(e,"connect",{enumerable:!0,get:function(){return _.connect}});var x=t(1038);Object.defineProperty(e,"count",{enumerable:!0,get:function(){return x.count}});var C=t(4461);Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return C.debounce}});var w=t(8079);Object.defineProperty(e,"debounceTime",{enumerable:!0,get:function(){return w.debounceTime}});var O=t(378);Object.defineProperty(e,"defaultIfEmpty",{enumerable:!0,get:function(){return O.defaultIfEmpty}});var A=t(914);Object.defineProperty(e,"delay",{enumerable:!0,get:function(){return A.delay}});var k=t(8766);Object.defineProperty(e,"delayWhen",{enumerable:!0,get:function(){return k.delayWhen}});var R=t(7441);Object.defineProperty(e,"dematerialize",{enumerable:!0,get:function(){return R.dematerialize}});var I=t(5365);Object.defineProperty(e,"distinct",{enumerable:!0,get:function(){return I.distinct}});var M=t(8937);Object.defineProperty(e,"distinctUntilChanged",{enumerable:!0,get:function(){return M.distinctUntilChanged}});var N=t(9612);Object.defineProperty(e,"distinctUntilKeyChanged",{enumerable:!0,get:function(){return N.distinctUntilKeyChanged}});var F=t(4520);Object.defineProperty(e,"elementAt",{enumerable:!0,get:function(){return F.elementAt}});var z=t(1776);Object.defineProperty(e,"endWith",{enumerable:!0,get:function(){return z.endWith}});var B=t(5510);Object.defineProperty(e,"every",{enumerable:!0,get:function(){return B.every}});var U=t(1551);Object.defineProperty(e,"exhaust",{enumerable:!0,get:function(){return U.exhaust}});var W=t(2752);Object.defineProperty(e,"exhaustAll",{enumerable:!0,get:function(){return W.exhaustAll}});var Y=t(4753);Object.defineProperty(e,"exhaustMap",{enumerable:!0,get:function(){return Y.exhaustMap}});var H=t(7661);Object.defineProperty(e,"expand",{enumerable:!0,get:function(){return H.expand}});var J=t(783);Object.defineProperty(e,"filter",{enumerable:!0,get:function(){return J.filter}});var le=t(3555);Object.defineProperty(e,"finalize",{enumerable:!0,get:function(){return le.finalize}});var fe=t(7714);Object.defineProperty(e,"find",{enumerable:!0,get:function(){return fe.find}});var ue=t(9756);Object.defineProperty(e,"findIndex",{enumerable:!0,get:function(){return ue.findIndex}});var ge=t(8275);Object.defineProperty(e,"first",{enumerable:!0,get:function(){return ge.first}});var ve=t(7815);Object.defineProperty(e,"groupBy",{enumerable:!0,get:function(){return ve.groupBy}});var de=t(490);Object.defineProperty(e,"ignoreElements",{enumerable:!0,get:function(){return de.ignoreElements}});var ie=t(9356);Object.defineProperty(e,"isEmpty",{enumerable:!0,get:function(){return ie.isEmpty}});var Q=t(8669);Object.defineProperty(e,"last",{enumerable:!0,get:function(){return Q.last}});var re=t(5471);Object.defineProperty(e,"map",{enumerable:!0,get:function(){return re.map}});var se=t(3218);Object.defineProperty(e,"mapTo",{enumerable:!0,get:function(){return se.mapTo}});var pe=t(2360);Object.defineProperty(e,"materialize",{enumerable:!0,get:function(){return pe.materialize}});var Oe=t(1415);Object.defineProperty(e,"max",{enumerable:!0,get:function(){return Oe.max}});var Ce=t(361);Object.defineProperty(e,"merge",{enumerable:!0,get:function(){return Ce.merge}});var Re=t(7302);Object.defineProperty(e,"mergeAll",{enumerable:!0,get:function(){return Re.mergeAll}});var be=t(6902);Object.defineProperty(e,"flatMap",{enumerable:!0,get:function(){return be.flatMap}});var j=t(983);Object.defineProperty(e,"mergeMap",{enumerable:!0,get:function(){return j.mergeMap}});var G=t(6586);Object.defineProperty(e,"mergeMapTo",{enumerable:!0,get:function(){return G.mergeMapTo}});var $=t(4408);Object.defineProperty(e,"mergeScan",{enumerable:!0,get:function(){return $.mergeScan}});var te=t(8253);Object.defineProperty(e,"mergeWith",{enumerable:!0,get:function(){return te.mergeWith}});var ce=t(2669);Object.defineProperty(e,"min",{enumerable:!0,get:function(){return ce.min}});var he=t(9247);Object.defineProperty(e,"multicast",{enumerable:!0,get:function(){return he.multicast}});var xe=t(5184);Object.defineProperty(e,"observeOn",{enumerable:!0,get:function(){return xe.observeOn}});var Ne=t(1226);Object.defineProperty(e,"onErrorResumeNext",{enumerable:!0,get:function(){return Ne.onErrorResumeNext}});var We=t(1518);Object.defineProperty(e,"pairwise",{enumerable:!0,get:function(){return We.pairwise}});var ot=t(2171);Object.defineProperty(e,"partition",{enumerable:!0,get:function(){return ot.partition}});var Ze=t(4912);Object.defineProperty(e,"pluck",{enumerable:!0,get:function(){return Ze.pluck}});var et=t(766);Object.defineProperty(e,"publish",{enumerable:!0,get:function(){return et.publish}});var Qe=t(7220);Object.defineProperty(e,"publishBehavior",{enumerable:!0,get:function(){return Qe.publishBehavior}});var Ye=t(6106);Object.defineProperty(e,"publishLast",{enumerable:!0,get:function(){return Ye.publishLast}});var Ie=t(8157);Object.defineProperty(e,"publishReplay",{enumerable:!0,get:function(){return Ie.publishReplay}});var ee=t(4440);Object.defineProperty(e,"race",{enumerable:!0,get:function(){return ee.race}});var we=t(5600);Object.defineProperty(e,"raceWith",{enumerable:!0,get:function(){return we.raceWith}});var Pe=t(9139);Object.defineProperty(e,"reduce",{enumerable:!0,get:function(){return Pe.reduce}});var De=t(8522);Object.defineProperty(e,"repeat",{enumerable:!0,get:function(){return De.repeat}});var Me=t(6566);Object.defineProperty(e,"repeatWhen",{enumerable:!0,get:function(){return Me.repeatWhen}});var it=t(7835);Object.defineProperty(e,"retry",{enumerable:!0,get:function(){return it.retry}});var Fe=t(9843);Object.defineProperty(e,"retryWhen",{enumerable:!0,get:function(){return Fe.retryWhen}});var ut=t(7561);Object.defineProperty(e,"refCount",{enumerable:!0,get:function(){return ut.refCount}});var rt=t(1731);Object.defineProperty(e,"sample",{enumerable:!0,get:function(){return rt.sample}});var ft=t(6086);Object.defineProperty(e,"sampleTime",{enumerable:!0,get:function(){return ft.sampleTime}});var Ot=t(8624);Object.defineProperty(e,"scan",{enumerable:!0,get:function(){return Ot.scan}});var yt=t(582);Object.defineProperty(e,"sequenceEqual",{enumerable:!0,get:function(){return yt.sequenceEqual}});var nt=t(8977);Object.defineProperty(e,"share",{enumerable:!0,get:function(){return nt.share}});var kt=t(3133);Object.defineProperty(e,"shareReplay",{enumerable:!0,get:function(){return kt.shareReplay}});var St=t(5382);Object.defineProperty(e,"single",{enumerable:!0,get:function(){return St.single}});var lr=t(3982);Object.defineProperty(e,"skip",{enumerable:!0,get:function(){return lr.skip}});var ar=t(9098);Object.defineProperty(e,"skipLast",{enumerable:!0,get:function(){return ar.skipLast}});var Gt=t(7372);Object.defineProperty(e,"skipUntil",{enumerable:!0,get:function(){return Gt.skipUntil}});var At=t(4721);Object.defineProperty(e,"skipWhile",{enumerable:!0,get:function(){return At.skipWhile}});var hr=t(269);Object.defineProperty(e,"startWith",{enumerable:!0,get:function(){return hr.startWith}});var or=t(8960);Object.defineProperty(e,"subscribeOn",{enumerable:!0,get:function(){return or.subscribeOn}});var Fr=t(8774);Object.defineProperty(e,"switchAll",{enumerable:!0,get:function(){return Fr.switchAll}});var nn=t(3879);Object.defineProperty(e,"switchMap",{enumerable:!0,get:function(){return nn.switchMap}});var Dt=t(3274);Object.defineProperty(e,"switchMapTo",{enumerable:!0,get:function(){return Dt.switchMapTo}});var yr=t(8712);Object.defineProperty(e,"switchScan",{enumerable:!0,get:function(){return yr.switchScan}});var Wr=t(846);Object.defineProperty(e,"take",{enumerable:!0,get:function(){return Wr.take}});var Qr=t(8330);Object.defineProperty(e,"takeLast",{enumerable:!0,get:function(){return Qr.takeLast}});var Cn=t(4780);Object.defineProperty(e,"takeUntil",{enumerable:!0,get:function(){return Cn.takeUntil}});var bn=t(2129);Object.defineProperty(e,"takeWhile",{enumerable:!0,get:function(){return bn.takeWhile}});var Or=t(3964);Object.defineProperty(e,"tap",{enumerable:!0,get:function(){return Or.tap}});var Rr=t(8941);Object.defineProperty(e,"throttle",{enumerable:!0,get:function(){return Rr.throttle}});var xr=t(7640);Object.defineProperty(e,"throttleTime",{enumerable:!0,get:function(){return xr.throttleTime}});var Ii=t(4869);Object.defineProperty(e,"throwIfEmpty",{enumerable:!0,get:function(){return Ii.throwIfEmpty}});var qn=t(489);Object.defineProperty(e,"timeInterval",{enumerable:!0,get:function(){return qn.timeInterval}});var Qo=t(1554);Object.defineProperty(e,"timeout",{enumerable:!0,get:function(){return Qo.timeout}});var Vs=t(4862);Object.defineProperty(e,"timeoutWith",{enumerable:!0,get:function(){return Vs.timeoutWith}});var Xa=t(6505);Object.defineProperty(e,"timestamp",{enumerable:!0,get:function(){return Xa.timestamp}});var So=t(2343);Object.defineProperty(e,"toArray",{enumerable:!0,get:function(){return So.toArray}});var Ka=t(5477);Object.defineProperty(e,"window",{enumerable:!0,get:function(){return Ka.window}});var $s=t(6746);Object.defineProperty(e,"windowCount",{enumerable:!0,get:function(){return $s.windowCount}});var Ws=t(8208);Object.defineProperty(e,"windowTime",{enumerable:!0,get:function(){return Ws.windowTime}});var Hs=t(6637);Object.defineProperty(e,"windowToggle",{enumerable:!0,get:function(){return Hs.windowToggle}});var ua=t(1141);Object.defineProperty(e,"windowWhen",{enumerable:!0,get:function(){return ua.windowWhen}});var mr=t(5442);Object.defineProperty(e,"withLatestFrom",{enumerable:!0,get:function(){return mr.withLatestFrom}});var cr=t(5918);Object.defineProperty(e,"zip",{enumerable:!0,get:function(){return cr.zip}});var Jo=t(187);Object.defineProperty(e,"zipAll",{enumerable:!0,get:function(){return Jo.zipAll}});var es=t(8538);Object.defineProperty(e,"zipWith",{enumerable:!0,get:function(){return es.zipWith}})},9445:function(r,e,t){var n=this&&this.__awaiter||function(O,A,k,R){return new(k||(k=Promise))(function(I,M){function N(B){try{z(R.next(B))}catch(U){M(U)}}function F(B){try{z(R.throw(B))}catch(U){M(U)}}function z(B){var U;B.done?I(B.value):(U=B.value,U instanceof k?U:new k(function(W){W(U)})).then(N,F)}z((R=R.apply(O,A||[])).next())})},i=this&&this.__generator||function(O,A){var k,R,I,M,N={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return M={next:F(0),throw:F(1),return:F(2)},typeof Symbol=="function"&&(M[Symbol.iterator]=function(){return this}),M;function F(z){return function(B){return function(U){if(k)throw new TypeError("Generator is already executing.");for(;N;)try{if(k=1,R&&(I=2&U[0]?R.return:U[0]?R.throw||((I=R.return)&&I.call(R),0):R.next)&&!(I=I.call(R,U[1])).done)return I;switch(R=0,I&&(U=[2&U[0],I.value]),U[0]){case 0:case 1:I=U;break;case 4:return N.label++,{value:U[1],done:!1};case 5:N.label++,R=U[1],U=[0];continue;case 7:U=N.ops.pop(),N.trys.pop();continue;default:if(!((I=(I=N.trys).length>0&&I[I.length-1])||U[0]!==6&&U[0]!==2)){N=0;continue}if(U[0]===3&&(!I||U[1]>I[0]&&U[1]<I[3])){N.label=U[1];break}if(U[0]===6&&N.label<I[1]){N.label=I[1],I=U;break}if(I&&N.label<I[2]){N.label=I[2],N.ops.push(U);break}I[2]&&N.ops.pop(),N.trys.pop();continue}U=A.call(O,N)}catch(W){U=[6,W],R=0}finally{k=I=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}([z,B])}}},a=this&&this.__asyncValues||function(O){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var A,k=O[Symbol.asyncIterator];return k?k.call(O):(O=typeof o=="function"?o(O):O[Symbol.iterator](),A={},R("next"),R("throw"),R("return"),A[Symbol.asyncIterator]=function(){return this},A);function R(I){A[I]=O[I]&&function(M){return new Promise(function(N,F){(function(z,B,U,W){Promise.resolve(W).then(function(Y){z({value:Y,done:U})},B)})(N,F,(M=O[I](M)).done,M.value)})}}},o=this&&this.__values||function(O){var A=typeof Symbol=="function"&&Symbol.iterator,k=A&&O[A],R=0;if(k)return k.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&R>=O.length&&(O=void 0),{value:O&&O[R++],done:!O}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.fromReadableStreamLike=e.fromAsyncIterable=e.fromIterable=e.fromPromise=e.fromArrayLike=e.fromInteropObservable=e.innerFrom=void 0;var s=t(8046),u=t(7629),l=t(4662),c=t(1116),f=t(1358),d=t(7614),h=t(6368),v=t(9137),p=t(1018),g=t(7315),y=t(3327);function b(O){return new l.Observable(function(A){var k=O[y.observable]();if(p.isFunction(k.subscribe))return k.subscribe(A);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function m(O){return new l.Observable(function(A){for(var k=0;k<O.length&&!A.closed;k++)A.next(O[k]);A.complete()})}function _(O){return new l.Observable(function(A){O.then(function(k){A.closed||(A.next(k),A.complete())},function(k){return A.error(k)}).then(null,g.reportUnhandledError)})}function x(O){return new l.Observable(function(A){var k,R;try{for(var I=o(O),M=I.next();!M.done;M=I.next()){var N=M.value;if(A.next(N),A.closed)return}}catch(F){k={error:F}}finally{try{M&&!M.done&&(R=I.return)&&R.call(I)}finally{if(k)throw k.error}}A.complete()})}function C(O){return new l.Observable(function(A){(function(k,R){var I,M,N,F;return n(this,void 0,void 0,function(){var z,B;return i(this,function(U){switch(U.label){case 0:U.trys.push([0,5,6,11]),I=a(k),U.label=1;case 1:return[4,I.next()];case 2:if((M=U.sent()).done)return[3,4];if(z=M.value,R.next(z),R.closed)return[2];U.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return B=U.sent(),N={error:B},[3,11];case 6:return U.trys.push([6,,9,10]),M&&!M.done&&(F=I.return)?[4,F.call(I)]:[3,8];case 7:U.sent(),U.label=8;case 8:return[3,10];case 9:if(N)throw N.error;return[7];case 10:return[7];case 11:return R.complete(),[2]}})})})(O,A).catch(function(k){return A.error(k)})})}function w(O){return C(v.readableStreamLikeToAsyncGenerator(O))}e.innerFrom=function(O){if(O instanceof l.Observable)return O;if(O!=null){if(c.isInteropObservable(O))return b(O);if(s.isArrayLike(O))return m(O);if(u.isPromise(O))return _(O);if(f.isAsyncIterable(O))return C(O);if(h.isIterable(O))return x(O);if(v.isReadableStreamLike(O))return w(O)}throw d.createInvalidObservableTypeError(O)},e.fromInteropObservable=b,e.fromArrayLike=m,e.fromPromise=_,e.fromIterable=x,e.fromAsyncIterable=C,e.fromReadableStreamLike=w},9470:function(r,e,t){var n=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=n(t(3389));e.BaseHostNameResolver=i.default;var a=n(t(8341));e.ConfiguredCustomResolver=a.default},9473:function(r,e,t){var n=this&&this.__awaiter||function(y,b,m,_){return new(m||(m=Promise))(function(x,C){function w(k){try{A(_.next(k))}catch(R){C(R)}}function O(k){try{A(_.throw(k))}catch(R){C(R)}}function A(k){var R;k.done?x(k.value):(R=k.value,R instanceof m?R:new m(function(I){I(R)})).then(w,O)}A((_=_.apply(y,b||[])).next())})},i=this&&this.__generator||function(y,b){var m,_,x,C,w={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return C={next:O(0),throw:O(1),return:O(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function O(A){return function(k){return function(R){if(m)throw new TypeError("Generator is already executing.");for(;C&&(C=0,R[0]&&(w=0)),w;)try{if(m=1,_&&(x=2&R[0]?_.return:R[0]?_.throw||((x=_.return)&&x.call(_),0):_.next)&&!(x=x.call(_,R[1])).done)return x;switch(_=0,x&&(R=[2&R[0],x.value]),R[0]){case 0:case 1:x=R;break;case 4:return w.label++,{value:R[1],done:!1};case 5:w.label++,_=R[1],R=[0];continue;case 7:R=w.ops.pop(),w.trys.pop();continue;default:if(!((x=(x=w.trys).length>0&&x[x.length-1])||R[0]!==6&&R[0]!==2)){w=0;continue}if(R[0]===3&&(!x||R[1]>x[0]&&R[1]<x[3])){w.label=R[1];break}if(R[0]===6&&w.label<x[1]){w.label=x[1],x=R;break}if(x&&w.label<x[2]){w.label=x[2],w.ops.push(R);break}x[2]&&w.ops.pop(),w.trys.pop();continue}R=b.call(y,w)}catch(I){R=[6,I],_=0}finally{m=x=0}if(5&R[0])throw R[1];return{value:R[0]?R[1]:void 0,done:!0}}([A,k])}}},a=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(e,"__esModule",{value:!0});var o=t(6587),s=t(3618),u=t(9730),l=t(754),c=t(2696),f=t(9691),d=a(t(9512)),h=function(){function y(b){var m=b.connectionHolder,_=b.onClose,x=b.onBookmarks,C=b.onConnection,w=b.reactive,O=b.fetchSize,A=b.impersonatedUser,k=b.highRecordWatermark,R=b.lowRecordWatermark,I=b.notificationFilter,M=b.apiTelemetryConfig,N=this;this._connectionHolder=m,this._reactive=w,this._state=v.ACTIVE,this._onClose=_,this._onBookmarks=x,this._onConnection=C,this._onError=this._onErrorCallback.bind(this),this._fetchSize=O,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=A,this._lowRecordWatermak=R,this._highRecordWatermark=k,this._bookmarks=u.Bookmarks.empty(),this._notificationFilter=I,this._apiTelemetryConfig=M,this._acceptActive=function(){},this._activePromise=new Promise(function(F,z){N._acceptActive=F})}return y.prototype._begin=function(b,m,_){var x=this;this._connectionHolder.getConnection().then(function(C){return n(x,void 0,void 0,function(){var w,O=this;return i(this,function(A){switch(A.label){case 0:return this._onConnection(),C==null?[3,2]:(w=this,[4,b()]);case 1:return w._bookmarks=A.sent(),[2,C.beginTransaction({bookmarks:this._bookmarks,txConfig:m,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(k){_!=null&&_.onError(k),O._onError(k).catch(function(){})},afterComplete:function(k){_!=null&&_.onComplete(k),k.db!==void 0&&(_==null?void 0:_.onDB)!=null&&_.onDB(k.db),O._onComplete(k)}})];case 2:throw(0,f.newError)("No connection available")}})})}).catch(function(C){_!=null&&_.onError(C),x._onError(C).catch(function(){})}).finally(function(){return x._acceptActive()})},y.prototype.run=function(b,m){var _=(0,o.validateQueryAndParameters)(b,m),x=_.validatedQuery,C=_.params,w=this._state.run(x,C,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(w),w},y.prototype.commit=function(){var b=this,m=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(_){return b._onCompleteCallback(_,b._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=m.state,this._onClose(),new Promise(function(_,x){m.result.subscribe({onCompleted:function(){return _()},onError:function(C){return x(C)}})})},y.prototype.rollback=function(){var b=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=b.state,this._onClose(),new Promise(function(m,_){b.result.subscribe({onCompleted:function(){return m()},onError:function(x){return _(x)}})})},y.prototype.isOpen=function(){return this._state===v.ACTIVE},y.prototype.close=function(){return n(this,void 0,void 0,function(){return i(this,function(b){switch(b.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:b.sent(),b.label=2;case 2:return[2]}})})},y.prototype[Symbol.asyncDispose]=function(){return this.close()},y.prototype._onErrorCallback=function(b){return this._state===v.FAILED?Promise.resolve(null):(this._state=v.FAILED,this._onClose(),this._results.forEach(function(m){m.isOpen()&&m._streamObserverPromise.then(function(_){return _.onError(b)}).catch(function(_){})}),this._connectionHolder.releaseConnection())},y.prototype._onCompleteCallback=function(b,m){this._onBookmarks(new u.Bookmarks(b==null?void 0:b.bookmark),m??u.Bookmarks.empty(),b==null?void 0:b.db)},y}(),v={ACTIVE:{commit:function(y){return{result:p(!0,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.SUCCEEDED}},rollback:function(y){return{result:p(!1,y.connectionHolder,y.onError,y.onComplete,y.onConnection,y.pendingResults,y.preparationJob),state:v.ROLLED_BACK}},run:function(y,b,m){var _=m.connectionHolder,x=m.onError,C=m.onComplete,w=m.onConnection,O=m.reactive,A=m.fetchSize,k=m.highRecordWatermark,R=m.lowRecordWatermark,I=m.preparationJob,M=I??Promise.resolve();return g(_.getConnection().then(function(N){return M.then(function(){return N})}).then(function(N){if(w(),N!=null)return N.run(y,b,{bookmarks:u.Bookmarks.empty(),txConfig:l.TxConfig.empty(),beforeError:x,afterComplete:C,reactive:O,fetchSize:A,highRecordWatermark:k,lowRecordWatermark:R});throw(0,f.newError)("No connection available")}).catch(function(N){return new c.FailedObserver({error:N,onError:x})}),y,b,_,k,R)}},FAILED:{commit:function(y){var b=y.connectionHolder,m=y.onError;return y.onComplete,{result:g(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:m}),"COMMIT",{},b,0,0),state:v.FAILED}},rollback:function(y){var b=y.connectionHolder;return y.onError,y.onComplete,{result:g(new c.CompletedObserver,"ROLLBACK",{},b,0,0),state:v.FAILED}},run:function(y,b,m){var _=m.connectionHolder,x=m.onError;return m.onComplete,g(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:x}),y,b,_,0,0)}},SUCCEEDED:{commit:function(y){var b=y.connectionHolder,m=y.onError;return y.onComplete,{result:g(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been committed."),onError:m}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:b}},rollback:function(y){var b=y.connectionHolder,m=y.onError;return y.onComplete,{result:g(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been committed."),onError:m}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:v.SUCCEEDED,connectionHolder:b}},run:function(y,b,m){var _=m.connectionHolder,x=m.onError;return m.onComplete,g(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been committed."),onError:x}),y,b,_,0,0)}},ROLLED_BACK:{commit:function(y){var b=y.connectionHolder,m=y.onError;return y.onComplete,{result:g(new c.FailedObserver({error:(0,f.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:m}),"COMMIT",{},b,0,0),state:v.ROLLED_BACK}},rollback:function(y){var b=y.connectionHolder;return y.onError,y.onComplete,{result:g(new c.FailedObserver({error:(0,f.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},b,0,0),state:v.ROLLED_BACK}},run:function(y,b,m){var _=m.connectionHolder,x=m.onError;return m.onComplete,g(new c.FailedObserver({error:(0,f.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:x}),y,b,_,0,0)}}};function p(y,b,m,_,x,C,w){var O=w??Promise.resolve(),A=b.getConnection().then(function(k){return O.then(function(){return k})}).then(function(k){return x(),C.forEach(function(R){return R._cancel()}),Promise.all(C.map(function(R){return R.summary()})).then(function(R){if(k!=null)return y?k.commitTransaction({beforeError:m,afterComplete:_}):k.rollbackTransaction({beforeError:m,afterComplete:_});throw(0,f.newError)("No connection available")})}).catch(function(k){return new c.FailedObserver({error:k,onError:m})});return new d.default(A,y?"COMMIT":"ROLLBACK",{},b,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function g(y,b,m,_,x,C){return _===void 0&&(_=s.EMPTY_CONNECTION_HOLDER),new d.default(Promise.resolve(y),b,m,new s.ReadOnlyConnectionHolder(_??s.EMPTY_CONNECTION_HOLDER),{low:C,high:x})}e.default=h},9507:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),d=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)d.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return d},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.animationFrameProvider=void 0;var a=t(8014);e.animationFrameProvider={schedule:function(o){var s=requestAnimationFrame,u=cancelAnimationFrame,l=e.animationFrameProvider.delegate;l&&(s=l.requestAnimationFrame,u=l.cancelAnimationFrame);var c=s(function(f){u=void 0,o(f)});return new a.Subscription(function(){return u==null?void 0:u(c)})},requestAnimationFrame:function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.requestAnimationFrame)||requestAnimationFrame).apply(void 0,i([],n(o)))},cancelAnimationFrame:function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=e.animationFrameProvider.delegate;return((u==null?void 0:u.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,i([],n(o)))},delegate:void 0}},9512:function(r,e,t){var n,i=this&&this.__awaiter||function(p,g,y,b){return new(y||(y=Promise))(function(m,_){function x(O){try{w(b.next(O))}catch(A){_(A)}}function C(O){try{w(b.throw(O))}catch(A){_(A)}}function w(O){var A;O.done?m(O.value):(A=O.value,A instanceof y?A:new y(function(k){k(A)})).then(x,C)}w((b=b.apply(p,g||[])).next())})},a=this&&this.__generator||function(p,g){var y,b,m,_,x={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]};return _={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(_[Symbol.iterator]=function(){return this}),_;function C(w){return function(O){return function(A){if(y)throw new TypeError("Generator is already executing.");for(;_&&(_=0,A[0]&&(x=0)),x;)try{if(y=1,b&&(m=2&A[0]?b.return:A[0]?b.throw||((m=b.return)&&m.call(b),0):b.next)&&!(m=m.call(b,A[1])).done)return m;switch(b=0,m&&(A=[2&A[0],m.value]),A[0]){case 0:case 1:m=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,b=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(!((m=(m=x.trys).length>0&&m[m.length-1])||A[0]!==6&&A[0]!==2)){x=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){x.label=A[1];break}if(A[0]===6&&x.label<m[1]){x.label=m[1],m=A;break}if(m&&x.label<m[2]){x.label=m[2],x.ops.push(A);break}m[2]&&x.ops.pop(),x.trys.pop();continue}A=g.call(p,x)}catch(k){A=[6,k],b=0}finally{y=m=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([w,O])}}},o=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(t(6033)),u=t(6995),l=t(9691),c=u.connectionHolder.EMPTY_CONNECTION_HOLDER,f=function(p){console.log("Uncaught error when processing result: "+p)},d=function(p){},h=function(p){},v=function(){function p(g,y,b,m,_){var x;_===void 0&&(_={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[n]="Result",this._stack=(x=new Error("")).stack!=null?x.stack.replace(/^Error(\n\r)*/,""):null,this._streamObserverPromise=g,this._p=null,this._query=y,this._parameters=b??{},this._connectionHolder=m??c,this._keys=null,this._summary=null,this._error=null,this._watermarks=_}return p.prototype.keys=function(){var g=this;return this._keys!==null?Promise.resolve(this._keys):this._error!==null?Promise.reject(this._error):new Promise(function(y,b){g._streamObserverPromise.then(function(m){return m.subscribe(g._decorateObserver({onKeys:function(_){return y(_)},onError:function(_){return b(_)}}))}).catch(b)})},p.prototype.summary=function(){var g=this;return this._summary!==null?Promise.resolve(this._summary):this._error!==null?Promise.reject(this._error):new Promise(function(y,b){g._streamObserverPromise.then(function(m){m.cancel(),m.subscribe(g._decorateObserver({onCompleted:function(_){return y(_)},onError:function(_){return b(_)}}))}).catch(b)})},p.prototype._getOrCreatePromise=function(){var g=this;return this._p==null&&(this._p=new Promise(function(y,b){var m=[],_={onNext:function(x){m.push(x)},onCompleted:function(x){y({records:m,summary:x})},onError:function(x){b(x)}};g.subscribe(_)})),this._p},p.prototype[Symbol.asyncIterator]=function(){var g=this;if(!this.isOpen()){var y=(0,l.newError)("Result is already consumed");return{next:function(){return Promise.reject(y)},peek:function(){return Promise.reject(y)}}}var b={paused:!0,firstRun:!0,finished:!1},m=function(){var C,w;if(b.streaming!=null){var O=(w=(C=b.queuedObserver)===null||C===void 0?void 0:C.size)!==null&&w!==void 0?w:0,A=O>=g._watermarks.high,k=O<=g._watermarks.low;A&&!b.paused?(b.paused=!0,b.streaming.pause()):(k&&b.paused||b.firstRun&&!A)&&(b.firstRun=!1,b.paused=!1,b.streaming.resume())}},_=function(){return i(g,void 0,void 0,function(){var C;return a(this,function(w){switch(w.label){case 0:return b.queuedObserver!==void 0?[3,2]:(b.queuedObserver=this._createQueuedResultObserver(m),C=b,[4,this._subscribe(b.queuedObserver,!0).catch(function(){})]);case 1:C.streaming=w.sent(),m(),w.label=2;case 2:return[2,b.queuedObserver]}})})},x=function(C){if(C===void 0)throw(0,l.newError)("InvalidState: Result stream finished without Summary",l.PROTOCOL_ERROR);return!0};return{next:function(){return i(g,void 0,void 0,function(){var C;return a(this,function(w){switch(w.label){case 0:return b.finished&&x(b.summary)?[2,{done:!0,value:b.summary}]:[4,_()];case 1:return[4,w.sent().dequeue()];case 2:return(C=w.sent()).done===!0&&(b.finished=C.done,b.summary=C.value),[2,C]}})})},return:function(C){return i(g,void 0,void 0,function(){var w,O;return a(this,function(A){switch(A.label){case 0:return b.finished&&x(b.summary)?[2,{done:!0,value:C??b.summary}]:((O=b.streaming)===null||O===void 0||O.cancel(),[4,_()]);case 1:return[4,A.sent().dequeueUntilDone()];case 2:return w=A.sent(),b.finished=!0,w.value=C??w.value,b.summary=w.value,[2,w]}})})},peek:function(){return i(g,void 0,void 0,function(){return a(this,function(C){switch(C.label){case 0:return b.finished&&x(b.summary)?[2,{done:!0,value:b.summary}]:[4,_()];case 1:return[4,C.sent().head()];case 2:return[2,C.sent()]}})})}}},p.prototype.then=function(g,y){return this._getOrCreatePromise().then(g,y)},p.prototype.catch=function(g){return this._getOrCreatePromise().catch(g)},p.prototype.finally=function(g){return this._getOrCreatePromise().finally(g)},p.prototype.subscribe=function(g){this._subscribe(g).catch(function(){})},p.prototype.isOpen=function(){return this._summary===null&&this._error===null},p.prototype._subscribe=function(g,y){y===void 0&&(y=!1);var b=this._decorateObserver(g);return this._streamObserverPromise.then(function(m){return y&&m.pause(),m.subscribe(b),m}).catch(function(m){return b.onError!=null&&b.onError(m),Promise.reject(m)})},p.prototype._decorateObserver=function(g){var y,b,m,_=this,x=(y=g.onCompleted)!==null&&y!==void 0?y:d,C=(b=g.onError)!==null&&b!==void 0?b:f,w=(m=g.onKeys)!==null&&m!==void 0?m:h;return{onNext:g.onNext!=null?g.onNext.bind(g):void 0,onKeys:function(O){return _._keys=O,w.call(g,O)},onCompleted:function(O){_._releaseConnectionAndGetSummary(O).then(function(A){return _._summary!==null?x.call(g,_._summary):(_._summary=A,x.call(g,A))}).catch(C)},onError:function(O){_._connectionHolder.releaseConnection().then(function(){(function(A,k){k!=null&&(A.stack=A.toString()+`
`+k)})(O,_._stack),_._error=O,C.call(g,O)}).catch(C)}}},p.prototype._cancel=function(){this._summary===null&&this._error===null&&this._streamObserverPromise.then(function(g){return g.cancel()}).catch(function(){})},p.prototype._releaseConnectionAndGetSummary=function(g){var y=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),b=y.validatedQuery,m=y.params,_=this._connectionHolder;return _.getConnection().then(function(x){return _.releaseConnection().then(function(){return x==null?void 0:x.getProtocolVersion()})},function(x){}).then(function(x){return new s.default(b,m,g,x)})},p.prototype._createQueuedResultObserver=function(g){var y=this;function b(){var O={};return O.promise=new Promise(function(A,k){O.resolve=A,O.reject=k}),O}function m(O){return O instanceof Error}function _(){var O;return i(this,void 0,void 0,function(){var A;return a(this,function(k){switch(k.label){case 0:if(x.length>0){if(A=(O=x.shift())!==null&&O!==void 0?O:(0,l.newError)("Unexpected empty buffer",l.PROTOCOL_ERROR),g(),m(A))throw A;return[2,A]}return C.resolvable=b(),[4,C.resolvable.promise];case 1:return[2,k.sent()]}})})}var x=[],C={resolvable:null},w={onNext:function(O){w._push({done:!1,value:O})},onCompleted:function(O){w._push({done:!0,value:O})},onError:function(O){w._push(O)},_push:function(O){if(C.resolvable!==null){var A=C.resolvable;C.resolvable=null,m(O)?A.reject(O):A.resolve(O)}else x.push(O),g()},dequeue:_,dequeueUntilDone:function(){return i(y,void 0,void 0,function(){var O;return a(this,function(A){switch(A.label){case 0:return[4,_()];case 1:return(O=A.sent()).done===!0?[2,O]:[3,0];case 2:return[2]}})})},head:function(){return i(y,void 0,void 0,function(){var O,A;return a(this,function(k){switch(k.label){case 0:if(x.length>0){if(m(O=x[0]))throw O;return[2,O]}C.resolvable=b(),k.label=1;case 1:return k.trys.push([1,3,4,5]),[4,C.resolvable.promise];case 2:return O=k.sent(),x.unshift(O),[2,O];case 3:throw A=k.sent(),x.unshift(A),A;case 4:return g(),[7];case 5:return[2]}})})},get size(){return x.length}};return w},p}();n=Symbol.toStringTag,e.default=v},9567:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleObservable=void 0;var n=t(9445),i=t(5184),a=t(8960);e.scheduleObservable=function(o,s){return n.innerFrom(o).pipe(a.subscribeOn(s),i.observeOn(s))}},9568:(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dateTimestampProvider=void 0,e.dateTimestampProvider={now:function(){return(e.dateTimestampProvider.delegate||Date).now()},delegate:void 0}},9589:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.schedulePromise=void 0;var n=t(9445),i=t(5184),a=t(8960);e.schedulePromise=function(o,s){return n.innerFrom(o).pipe(a.subscribeOn(s),i.observeOn(s))}},9612:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=void 0;var n=t(8937);e.distinctUntilKeyChanged=function(i,a){return n.distinctUntilChanged(function(o,s){return a?a(o[i],s[i]):o[i]===s[i]})}},9669:function(r,e,t){var n=this&&this.__read||function(o,s){var u=typeof Symbol=="function"&&o[Symbol.iterator];if(!u)return o;var l,c,f=u.call(o),d=[];try{for(;(s===void 0||s-- >0)&&!(l=f.next()).done;)d.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return d},i=this&&this.__spreadArray||function(o,s){for(var u=0,l=s.length,c=o.length;u<l;u++,c++)o[c]=s[u];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.concatWith=void 0;var a=t(7601);e.concatWith=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return a.concat.apply(void 0,i([],n(o)))}},9686:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectUnsubscribedError=void 0;var n=t(5568);e.ObjectUnsubscribedError=n.createErrorClass(function(i){return function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})},9689:function(r,e,t){var n=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=t(4132);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var a=t(8987);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(a).default}});var o=t(3545);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var s=t(7428);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(s).default}})},9691:function(r,e,t){var n=this&&this.__extends||function(){var g=function(y,b){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,_){m.__proto__=_}||function(m,_){for(var x in _)Object.prototype.hasOwnProperty.call(_,x)&&(m[x]=_[x])},g(y,b)};return function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");function m(){this.constructor=y}g(y,b),y.prototype=b===null?Object.create(b):(m.prototype=b.prototype,new m)}}(),i=this&&this.__createBinding||(Object.create?function(g,y,b,m){m===void 0&&(m=b);var _=Object.getOwnPropertyDescriptor(y,b);_&&!("get"in _?!y.__esModule:_.writable||_.configurable)||(_={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(g,m,_)}:function(g,y,b,m){m===void 0&&(m=b),g[m]=y[b]}),a=this&&this.__setModuleDefault||(Object.create?function(g,y){Object.defineProperty(g,"default",{enumerable:!0,value:y})}:function(g,y){g.default=y}),o=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var y={};if(g!=null)for(var b in g)b!=="default"&&Object.prototype.hasOwnProperty.call(g,b)&&i(y,g,b);return a(y,g),y};Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.GQLError=e.Neo4jError=e.isRetriableError=e.newGQLError=e.newError=void 0;var s=o(t(4027)),u=t(1053),l={DATABASE_ERROR:"DATABASE_ERROR",CLIENT_ERROR:"CLIENT_ERROR",TRANSIENT_ERROR:"TRANSIENT_ERROR",UNKNOWN:"UNKNOWN"};Object.freeze(l);var c=Object.values(l),f="ServiceUnavailable";e.SERVICE_UNAVAILABLE=f;var d="SessionExpired";e.SESSION_EXPIRED=d,e.PROTOCOL_ERROR="ProtocolError";var h=function(g){function y(b,m,_,x,C){var w,O=this;return(O=g.call(this,b,C!=null?{cause:C}:void 0)||this).constructor=y,O.__proto__=y.prototype,O.cause=C??void 0,O.gqlStatus=m,O.gqlStatusDescription=_,O.diagnosticRecord=x,O.classification=function(A){return A===void 0||A._classification===void 0?"UNKNOWN":c.includes(A._classification)?A==null?void 0:A._classification:"UNKNOWN"}(O.diagnosticRecord),O.rawClassification=(w=x==null?void 0:x._classification)!==null&&w!==void 0?w:void 0,O.name="GQLError",O}return n(y,g),Object.defineProperty(y.prototype,"diagnosticRecordAsJsonString",{get:function(){return s.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),y}(Error);e.GQLError=h;var v=function(g){function y(b,m,_,x,C,w){var O=g.call(this,b,_,x,C,w)||this;return O.constructor=y,O.__proto__=y.prototype,O.code=m,O.name="Neo4jError",O.retriable=function(A){return A===f||A===d||function(k){return k==="Neo.ClientError.Security.AuthorizationExpired"}(A)||function(k){return(k==null?void 0:k.includes("TransientError"))===!0}(A)}(m),O}return n(y,g),y.isRetriable=function(b){return b!=null&&b instanceof y&&b.retriable},y}(h);e.Neo4jError=v,e.newError=function(g,y,b,m,_,x){return new v(g,y??"N/A",m??"50N42",_??"error: general processing exception - unexpected error. "+g,x??u.rawPolyfilledDiagnosticRecord,b)},e.newGQLError=function(g,y,b,m,_){return new h(g,b??"50N42",m??"error: general processing exception - unexpected error. "+g,_??u.rawPolyfilledDiagnosticRecord,y)};var p=v.isRetriable;e.isRetriableError=p},9730:function(r,e,t){var n=this&&this.__createBinding||(Object.create?function(d,h,v,p){p===void 0&&(p=v);var g=Object.getOwnPropertyDescriptor(h,v);g&&!("get"in g?!h.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return h[v]}}),Object.defineProperty(d,p,g)}:function(d,h,v,p){p===void 0&&(p=v),d[p]=h[v]}),i=this&&this.__setModuleDefault||(Object.create?function(d,h){Object.defineProperty(d,"default",{enumerable:!0,value:h})}:function(d,h){d.default=h}),a=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var h={};if(d!=null)for(var v in d)v!=="default"&&Object.prototype.hasOwnProperty.call(d,v)&&n(h,d,v);return i(h,d),h},o=this&&this.__read||function(d,h){var v=typeof Symbol=="function"&&d[Symbol.iterator];if(!v)return d;var p,g,y=v.call(d),b=[];try{for(;(h===void 0||h-- >0)&&!(p=y.next()).done;)b.push(p.value)}catch(m){g={error:m}}finally{try{p&&!p.done&&(v=y.return)&&v.call(y)}finally{if(g)throw g.error}}return b},s=this&&this.__spreadArray||function(d,h,v){if(v||arguments.length===2)for(var p,g=0,y=h.length;g<y;g++)!p&&g in h||(p||(p=Array.prototype.slice.call(h,0,g)),p[g]=h[g]);return d.concat(p||Array.prototype.slice.call(h))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var u=a(t(6587)),l=function(){function d(h){this._values=function(v){if(v==null||v==="")return[];if(u.isString(v))return[v];if(Array.isArray(v)){for(var p=new Set,g=f(v),y=0;y<g.length;y++){var b=g[y];if(b!=null){if(!u.isString(b))throw new TypeError("Bookmark value should be a string, given: '".concat(b,"'"));p.add(b)}}return s([],o(p),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(v,"'"))}(h)}return d.empty=function(){return c},d.prototype.isEmpty=function(){return this._values.length===0},d.prototype.values=function(){return this._values},d.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},d.prototype.asBeginTransactionParameters=function(){var h;return this.isEmpty()?{}:((h={}).bookmarks=this._values,h)},d}();e.Bookmarks=l;var c=new l(null);function f(d){return d.reduce(function(h,v){return Array.isArray(v)?h.concat(f(v)):h.concat(v)},[])}},9744:function(r,e,t){var n=this&&this.__extends||function(){var d=function(h,v){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},d(h,v)};return function(h,v){if(typeof v!="function"&&v!==null)throw new TypeError("Class extends value "+String(v)+" is not a constructor or null");function p(){this.constructor=h}d(h,v),h.prototype=v===null?Object.create(v):(p.prototype=v.prototype,new p)}}(),i=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(9125)),o=i(t(4325)),s=i(t(7021)),u=t(9014),l=i(t(3321)),c=t(9305).internal.constants.BOLT_PROTOCOL_V5_4,f=function(d){function h(){return d!==null&&d.apply(this,arguments)||this}return n(h,d),Object.defineProperty(h.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var v=this;return this._transformer===void 0&&(this._transformer=new l.default(Object.values(o.default).map(function(p){return p(v._config,v._log)}))),this._transformer},enumerable:!1,configurable:!0}),h.prototype.telemetry=function(v,p){var g=v.api,y=p===void 0?{}:p,b=y.onError,m=y.onCompleted,_=new u.TelemetryObserver({onCompleted:m,onError:b});return this.write(s.default.telemetry({api:g}),_,!1),_},h}(a.default);e.default=f},9756:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=void 0;var n=t(7843),i=t(7714);e.findIndex=function(a,o){return n.operate(i.createFind(a,o,"index"))}},9792:(r,e,t)=>{var n=t(7045),i=t(4360),a=t(6804);r.exports=function(o,s){if(!s)return o;var u=Object.keys(s);if(u.length===0)return o;for(var l=n(o),c=u.length-1;c>=0;c--){var f=u[c],d=String(s[f]);d&&(d=" "+d),a(l,{type:"preprocessor",data:"#define "+f+d})}return i(l)}},9823:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=t(9305),i=t(8813),a=t(9419),o=(n.internal.logger.Logger,n.error.SERVICE_UNAVAILABLE),s=function(){function l(c){var f=c===void 0?{}:c,d=f.maxRetryTimeout,h=d===void 0?3e4:d,v=f.initialDelay,p=v===void 0?1e3:v,g=f.delayMultiplier,y=g===void 0?2:g,b=f.delayJitter,m=b===void 0?.2:b,_=f.logger,x=_===void 0?null:_;this._maxRetryTimeout=u(h,3e4),this._initialDelay=u(p,1e3),this._delayMultiplier=u(y,2),this._delayJitter=u(m,.2),this._logger=x}return l.prototype.retry=function(c){var f=this;return c.pipe((0,a.retryWhen)(function(d){var h=[],v=Date.now(),p=1,g=f._initialDelay;return d.pipe((0,a.mergeMap)(function(y){if(!(0,n.isRetriableError)(y))return(0,i.throwError)(function(){return y});if(h.push(y),p>=2&&Date.now()-v>=f._maxRetryTimeout){var b=(0,n.newError)("Failed after retried for ".concat(p," times in ").concat(f._maxRetryTimeout," ms. Make sure that your database is online and retry again."),o);return b.seenErrors=h,(0,i.throwError)(function(){return b})}var m=f._computeNextDelay(g);return g*=f._delayMultiplier,p++,f._logger&&f._logger.warn("Transaction failed and will be retried in ".concat(m)),(0,i.of)(1).pipe((0,a.delay)(m))}))}))},l.prototype._computeNextDelay=function(c){var f=c*this._delayJitter;return c-f+2*f*Math.random()},l}();function u(l,c){return l||l===0?l:c}e.default=s},9843:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=void 0;var n=t(9445),i=t(2483),a=t(7843),o=t(3111);e.retryWhen=function(s){return a.operate(function(u,l){var c,f,d=!1,h=function(){c=u.subscribe(o.createOperatorSubscriber(l,void 0,void 0,function(v){f||(f=new i.Subject,n.innerFrom(s(f)).subscribe(o.createOperatorSubscriber(l,function(){return c?h():d=!0}))),f&&f.next(v)})),d&&(c.unsubscribe(),c=null,d=!1,h())};h()})}},9857:function(r,e,t){var n=this&&this.__extends||function(){var o=function(s,u){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&(l[f]=c[f])},o(s,u)};return function(s,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function l(){this.constructor=s}o(s,u),s.prototype=u===null?Object.create(u):(l.prototype=u.prototype,new l)}}(),i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(o){function s(u,l){var c=o.call(this,l)||this;return l&&(c._originalErrorHandler=u._errorHandler,u._errorHandler=c._errorHandler),c._delegate=u,c}return n(s,o),s.prototype.beginTransaction=function(u){return this._delegate.beginTransaction(u)},s.prototype.run=function(u,l,c){return this._delegate.run(u,l,c)},s.prototype.commitTransaction=function(u){return this._delegate.commitTransaction(u)},s.prototype.rollbackTransaction=function(u){return this._delegate.rollbackTransaction(u)},s.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(s.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(u){this._delegate.databaseId=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(u){this._delegate.authToken=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._delegate.version},set:function(u){this._delegate.version=u},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(u){this._delegate.idleTimestamp=u},enumerable:!1,configurable:!0}),s.prototype.isOpen=function(){return this._delegate.isOpen()},s.prototype.protocol=function(){return this._delegate.protocol()},s.prototype.connect=function(u,l,c,f){return this._delegate.connect(u,l,c,f)},s.prototype.write=function(u,l,c){return this._delegate.write(u,l,c)},s.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},s.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},s.prototype.close=function(){return this._delegate.close()},s.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},s}(i(t(6385)).default);e.default=a},9938:(r,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=void 0;var n=t(9135),i=t(1018);e.concatMapTo=function(a,o){return i.isFunction(o)?n.concatMap(function(){return a},o):n.concatMap(function(){return a})}},9975:(r,e,t)=>{var n=t(7101),i=Array.prototype.concat,a=Array.prototype.slice,o=r.exports=function(s){for(var u=[],l=0,c=s.length;l<c;l++){var f=s[l];n(f)?u=i.call(u,a.call(f)):u.push(f)}return u};o.wrap=function(s){return function(){return s(o(arguments))}}},9994:function(r,e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(o){for(var s,u=1,l=arguments.length;u<l;u++)for(var c in s=arguments[u])Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c]);return o},n.apply(this,arguments)},i=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0});var a=i(t(7449));e.default=n({},a.default)}},eN={};function On(r){var e=eN[r];if(e!==void 0)return e.exports;var t=eN[r]={id:r,loaded:!1,exports:{}};return Qre[r].call(t.exports,t,t.exports,On),t.loaded=!0,t.exports}On.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return On.d(e,{a:e}),e},On.d=(r,e)=>{for(var t in e)On.o(e,t)&&!On.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},On.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),On.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),On.nmd=r=>(r.paths=[],r.children||(r.children=[]),r);var Vr=On(5250),Jre=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])};function h_(r,e){function t(){this.constructor=r}Jre(r,e),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var oy=function(){function r(e){e===void 0&&(e="Atom@"+Ai()),this.name=e,this.isPendingUnobservation=!0,this.observers=[],this.observersIndexes={},this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=Ar.NOT_TRACKING}return r.prototype.onBecomeUnobserved=function(){},r.prototype.reportObserved=function(){vB(this)},r.prototype.reportChanged=function(){Vl(),function(e){if(e.lowestObserverState!==Ar.STALE){e.lowestObserverState=Ar.STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===Ar.UP_TO_DATE&&(i.isTracing!==Vo.NONE&&pB(i,e),i.onBecomeStale()),i.dependenciesState=Ar.STALE}}}(this),$l()},r.prototype.toString=function(){return this.name},r}(),ene=function(r){function e(t,n,i){t===void 0&&(t="Atom@"+Ai()),n===void 0&&(n=hN),i===void 0&&(i=hN);var a=r.call(this,t)||this;return a.name=t,a.onBecomeObservedHandler=n,a.onBecomeUnobservedHandler=i,a.isPendingUnobservation=!1,a.isBeingTracked=!1,a}return h_(e,r),e.prototype.reportObserved=function(){return Vl(),r.prototype.reportObserved.call(this),this.isBeingTracked||(this.isBeingTracked=!0,this.onBecomeObservedHandler()),$l(),!!Et.trackingDerivation},e.prototype.onBecomeUnobserved=function(){this.isBeingTracked=!1,this.onBecomeUnobservedHandler()},e}(oy),pA=Gf("Atom",oy);function Af(r){return r.interceptors&&r.interceptors.length>0}function v_(r,e){var t=r.interceptors||(r.interceptors=[]);return t.push(e),_A(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Pf(r,e){var t=Vf();try{var n=r.interceptors;if(n)for(var i=0,a=n.length;i<a&&(Wt(!(e=n[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{Cu(t)}}function ql(r){return r.changeListeners&&r.changeListeners.length>0}function p_(r,e){var t=r.changeListeners||(r.changeListeners=[]);return t.push(e),_A(function(){var n=t.indexOf(e);n!==-1&&t.splice(n,1)})}function Gl(r,e){var t=Vf(),n=r.changeListeners;if(n){for(var i=0,a=(n=n.slice()).length;i<a;i++)n[i](e);Cu(t)}}function aa(){return!!Et.spyListeners.length}function Rf(r){if(Et.spyListeners.length)for(var e=Et.spyListeners,t=0,n=e.length;t<n;t++)e[t](r)}function Ho(r){Rf(tB({},r,{spyReportStart:!0}))}var tN={spyReportEnd:!0};function Yo(r){Rf(r?tB({},r,tN):tN)}function NF(r){return Et.spyListeners.push(r),_A(function(){var e=Et.spyListeners.indexOf(r);e!==-1&&Et.spyListeners.splice(e,1)})}var rN="__$$iterating";function Lb(r){Wt(r[rN]!==!0,"Illegal state: cannot recycle array as iterator"),Ng(r,rN,!0);var e=-1;return Ng(r,"next",function(){return{done:++e>=this.length,value:e<this.length?this[e]:void 0}}),r}function jF(r,e){Ng(r,typeof Symbol=="function"&&Symbol.iterator||"@@iterator",e)}var hp,Qm,tne=function(){var r=!1,e={};return Object.defineProperty(e,"0",{set:function(){r=!0}}),Object.create(e)[0]=1,r===!1}(),c2=0,f2=function(){};hp=f2,Qm=Array.prototype,Object.setPrototypeOf!==void 0?Object.setPrototypeOf(hp.prototype,Qm):hp.prototype.__proto__!==void 0?hp.prototype.__proto__=Qm:hp.prototype=Qm,Object.isFrozen(Array)&&["constructor","push","shift","concat","pop","unshift","replace","find","findIndex","splice","reverse","sort"].forEach(function(r){Object.defineProperty(f2.prototype,r,{configurable:!0,writable:!0,value:Array.prototype[r]})});var FF=function(){function r(e,t,n,i){this.array=n,this.owned=i,this.values=[],this.lastKnownLength=0,this.interceptors=null,this.changeListeners=null,this.atom=new oy(e||"ObservableArray@"+Ai()),this.enhancer=function(a,o){return t(a,o,e+"[..]")}}return r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.dehanceValues=function(e){return this.dehancer!==void 0?e.map(this.dehancer):e},r.prototype.intercept=function(e){return v_(this,e)},r.prototype.observe=function(e,t){return t===void 0&&(t=!1),t&&e({object:this.array,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),p_(this,e)},r.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},r.prototype.setArrayLength=function(e){if(typeof e!="number"||e<0)throw new Error("[mobx.array] Out of range: "+e);var t=this.values.length;if(e!==t)if(e>t){for(var n=new Array(e-t),i=0;i<e-t;i++)n[i]=void 0;this.spliceWithArray(t,0,n)}else this.spliceWithArray(e,t-e)},r.prototype.updateArrayLength=function(e,t){if(e!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed. Did you use peek() to change it?");this.lastKnownLength+=t,t>0&&e+t+1>c2&&gA(e+t+1)},r.prototype.spliceWithArray=function(e,t,n){var i=this;EA(this.atom);var a=this.values.length;if(e===void 0?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),t=arguments.length===1?a-e:t==null?0:Math.max(0,Math.min(t,a-e)),n===void 0&&(n=[]),Af(this)){var o=Pf(this,{object:this.array,type:"splice",index:e,removedCount:t,added:n});if(!o)return eB;t=o.removedCount,n=o.added}var s=(n=n.map(function(l){return i.enhancer(l,void 0)})).length-t;this.updateArrayLength(a,s);var u=this.spliceItemsIntoValues(e,t,n);return t===0&&n.length===0||this.notifyArraySplice(e,n,u),this.dehanceValues(u)},r.prototype.spliceItemsIntoValues=function(e,t,n){if(n.length<1e4)return(i=this.values).splice.apply(i,[e,t].concat(n));var i,a=this.values.slice(e,e+t);return this.values=this.values.slice(0,e).concat(n,this.values.slice(e+t)),a},r.prototype.notifyArrayChildUpdate=function(e,t,n){var i=!this.owned&&aa(),a=ql(this),o=a||i?{object:this.array,type:"update",index:e,newValue:t,oldValue:n}:null;i&&Ho(o),this.atom.reportChanged(),a&&Gl(this,o),i&&Yo()},r.prototype.notifyArraySplice=function(e,t,n){var i=!this.owned&&aa(),a=ql(this),o=a||i?{object:this.array,type:"splice",index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;i&&Ho(o),this.atom.reportChanged(),a&&Gl(this,o),i&&Yo()},r}(),xu=function(r){function e(t,n,i,a){i===void 0&&(i="ObservableArray@"+Ai()),a===void 0&&(a=!1);var o=r.call(this)||this,s=new FF(i,n,o,a);return Ng(o,"$mobx",s),t&&t.length&&o.spliceWithArray(0,0,t),tne&&Object.defineProperty(s.array,"0",rne),o}return h_(e,r),e.prototype.intercept=function(t){return this.$mobx.intercept(t)},e.prototype.observe=function(t,n){return n===void 0&&(n=!1),this.$mobx.observe(t,n)},e.prototype.clear=function(){return this.splice(0)},e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.$mobx.atom.reportObserved(),Array.prototype.concat.apply(this.peek(),t.map(function(i){return Ru(i)?i.peek():i}))},e.prototype.replace=function(t){return this.$mobx.spliceWithArray(0,this.$mobx.values.length,t)},e.prototype.toJS=function(){return this.slice()},e.prototype.toJSON=function(){return this.toJS()},e.prototype.peek=function(){return this.$mobx.atom.reportObserved(),this.$mobx.dehanceValues(this.$mobx.values)},e.prototype.find=function(t,n,i){i===void 0&&(i=0);var a=this.findIndex.apply(this,arguments);return a===-1?void 0:this.get(a)},e.prototype.findIndex=function(t,n,i){i===void 0&&(i=0);for(var a=this.peek(),o=a.length,s=i;s<o;s++)if(t.call(n,a[s],s,this))return s;return-1},e.prototype.splice=function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];switch(arguments.length){case 0:return[];case 1:return this.$mobx.spliceWithArray(t);case 2:return this.$mobx.spliceWithArray(t,n)}return this.$mobx.spliceWithArray(t,n,i)},e.prototype.spliceWithArray=function(t,n,i){return this.$mobx.spliceWithArray(t,n,i)},e.prototype.push=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.$mobx;return i.spliceWithArray(i.values.length,0,t),i.values.length},e.prototype.pop=function(){return this.splice(Math.max(this.$mobx.values.length-1,0),1)[0]},e.prototype.shift=function(){return this.splice(0,1)[0]},e.prototype.unshift=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.$mobx;return i.spliceWithArray(0,0,t),i.values.length},e.prototype.reverse=function(){var t=this.slice();return t.reverse.apply(t,arguments)},e.prototype.sort=function(t){var n=this.slice();return n.sort.apply(n,arguments)},e.prototype.remove=function(t){var n=this.$mobx.dehanceValues(this.$mobx.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},e.prototype.move=function(t,n){function i(s){if(s<0)throw new Error("[mobx.array] Index out of bounds: "+s+" is negative");var u=this.$mobx.values.length;if(s>=u)throw new Error("[mobx.array] Index out of bounds: "+s+" is not smaller than "+u)}if(i.call(this,t),i.call(this,n),t!==n){var a,o=this.$mobx.values;a=t<n?o.slice(0,t).concat(o.slice(t+1,n+1),[o[t]],o.slice(n+1)):o.slice(0,n).concat([o[t]],o.slice(n,t),o.slice(t+1)),this.replace(a)}},e.prototype.get=function(t){var n=this.$mobx;if(n){if(t<n.values.length)return n.atom.reportObserved(),n.dehanceValue(n.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+n.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},e.prototype.set=function(t,n){var i=this.$mobx,a=i.values;if(t<a.length){EA(i.atom);var o=a[t];if(Af(i)){var s=Pf(i,{type:"update",object:this,index:t,newValue:n});if(!s)return;n=s.newValue}(n=i.enhancer(n,o))!==o&&(a[t]=n,i.notifyArrayChildUpdate(t,n,o))}else{if(t!==a.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+a.length);i.spliceWithArray(t,0,[n])}},e}(f2);jF(xu.prototype,function(){return Lb(this.slice())}),Object.defineProperty(xu.prototype,"length",{enumerable:!1,configurable:!0,get:function(){return this.$mobx.getArrayLength()},set:function(r){this.$mobx.setArrayLength(r)}}),["every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(r){var e=Array.prototype[r];Wt(typeof e=="function","Base function not defined on Array prototype: '"+r+"'"),rc(xu.prototype,r,function(){return e.apply(this.peek(),arguments)})}),function(r,e){for(var t=0;t<e.length;t++)rc(r,e[t],r[e[t]])}(xu.prototype,["constructor","intercept","observe","clear","concat","get","replace","toJS","toJSON","peek","find","findIndex","splice","spliceWithArray","push","pop","set","shift","unshift","reverse","sort","remove","move","toString","toLocaleString"]);var rne=BF(0);function BF(r){return{enumerable:!1,configurable:!1,get:function(){return this.get(r)},set:function(e){this.set(r,e)}}}function nne(r){Object.defineProperty(xu.prototype,""+r,BF(r))}function gA(r){for(var e=c2;e<r;e++)nne(e);c2=r}gA(1e3);var ine=Gf("ObservableArrayAdministration",FF);function Ru(r){return wA(r)&&ine(r.$mobx)}var Gp={},tc=function(r){function e(t,n,i,a){i===void 0&&(i="ObservableValue@"+Ai()),a===void 0&&(a=!0);var o=r.call(this,i)||this;return o.enhancer=n,o.hasUnreportedChange=!1,o.dehancer=void 0,o.value=n(t,void 0,i),a&&aa()&&Rf({type:"create",object:o,newValue:o.value}),o}return h_(e,r),e.prototype.dehanceValue=function(t){return this.dehancer!==void 0?this.dehancer(t):t},e.prototype.set=function(t){var n=this.value;if((t=this.prepareNewValue(t))!==Gp){var i=aa();i&&Ho({type:"update",object:this,newValue:t,oldValue:n}),this.setNewValue(t),i&&Yo()}},e.prototype.prepareNewValue=function(t){if(EA(this),Af(this)){var n=Pf(this,{object:this,type:"update",newValue:t});if(!n)return Gp;t=n.newValue}return t=this.enhancer(t,this.value,this.name),this.value!==t?t:Gp},e.prototype.setNewValue=function(t){var n=this.value;this.value=t,this.reportChanged(),ql(this)&&Gl(this,{type:"update",object:this,newValue:t,oldValue:n})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return v_(this,t)},e.prototype.observe=function(t,n){return n&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),p_(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return iB(this.get())},e}(oy);tc.prototype[nB()]=tc.prototype.valueOf;var yA=Gf("ObservableValue",tc),ane={m001:"It is not allowed to assign new values to @action fields",m002:"`runInAction` expects a function",m003:"`runInAction` expects a function without arguments",m004:"autorun expects a function",m005:"Warning: attempted to pass an action to autorun. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m006:"Warning: attempted to pass an action to autorunAsync. Actions are untracked and will not trigger on state changes. Use `reaction` or wrap only your state modification code in an action.",m007:"reaction only accepts 2 or 3 arguments. If migrating from MobX 2, please provide an options object",m008:"wrapping reaction expression in `asReference` is no longer supported, use options object instead",m009:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'. It looks like it was used on a property.",m010:"@computed can only be used on getter functions, like: '@computed get myProps() { return ...; }'",m011:"First argument to `computed` should be an expression. If using computed as decorator, don't pass it arguments",m012:"computed takes one or two arguments if used as function",m013:"[mobx.expr] 'expr' should only be used inside other reactive functions.",m014:"extendObservable expected 2 or more arguments",m015:"extendObservable expects an object as first argument",m016:"extendObservable should not be used on maps, use map.merge instead",m017:"all arguments of extendObservable should be objects",m018:"extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540",m019:"[mobx.isObservable] isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.",m020:"modifiers can only be used for individual object properties",m021:"observable expects zero or one arguments",m022:"@observable can not be used on getters, use @computed instead",m024:"whyRun() can only be used if a derivation is active, or by passing an computed value / reaction explicitly. If you invoked whyRun from inside a computation; the computation is currently suspended but re-evaluating because somebody requested its value.",m025:"whyRun can only be used on reactions and computed values",m026:"`action` can only be invoked on functions",m028:"It is not allowed to set `useStrict` when a derivation is running",m029:"INTERNAL ERROR only onBecomeUnobserved shouldn't be called twice in a row",m030a:"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ",m030b:"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ",m031:"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: ",m032:`* This computation is suspended (not in use by any reaction) and won't run automatically.
	Didn't expect this computation to be suspended at this point?
	  1. Make sure this computation is used by a reaction (reaction, autorun, observer).
	  2. Check whether you are using this computation synchronously (in the same stack as they reaction that needs it).`,m033:"`observe` doesn't support the fire immediately property for observable maps.",m034:"`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead",m035:"Cannot make the designated object observable; it is not extensible",m036:"It is not possible to get index atoms from arrays",m037:`Hi there! I'm sorry you have just run into an exception.
If your debugger ends up here, know that some reaction (like the render() of an observer component, autorun or reaction)
threw an exception and that mobx caught it, to avoid that it brings the rest of your application down.
The original cause of the exception (the code that caused this reaction to run (again)), is still in the stack.

However, more interesting is the actual stack trace of the error itself.
Hopefully the error is an instanceof Error, because in that case you can inspect the original stack of the error from where it was thrown.
See \`error.stack\` property, or press the very subtle "(...)" link you see near the console.error message that probably brought you here.
That stack is more interesting than the stack of this console.error itself.

If the exception you see is an exception you created yourself, make sure to use \`throw new Error("Oops")\` instead of \`throw "Oops"\`,
because the javascript environment will only preserve the original stack trace in the first form.

You can also make sure the debugger pauses the next time this very same exception is thrown by enabling "Pause on caught exception".
(Note that it might pause on many other, unrelated exception as well).

If that all doesn't help you out, feel free to open an issue https://github.com/mobxjs/mobx/issues!
`,m038:`Missing items in this list?
    1. Check whether all used values are properly marked as observable (use isObservable to verify)
    2. Make sure you didn't dereference values too early. MobX observes props, not primitives. E.g: use 'person.name' instead of 'name' in your computation.
`};function wr(r){return ane[r]}function Dg(r,e){Wt(typeof e=="function",wr("m026")),Wt(typeof r=="string"&&r.length>0,"actions should have valid names, got: '"+r+"'");var t=function(){return mA(r,e,this,arguments)};return t.originalFn=e,t.isMobxAction=!0,t}function mA(r,e,t,n){var i=function(a,o,s,u){var l=aa()&&!!a,c=0;if(l){c=Date.now();var f=u&&u.length||0,d=new Array(f);if(f>0)for(var h=0;h<f;h++)d[h]=u[h];Ho({type:"action",name:a,fn:o,object:s,arguments:d})}var v=Vf();return Vl(),{prevDerivation:v,prevAllowStateChanges:zF(!0),notifySpy:l,startTime:c}}(r,e,t,n);try{return e.apply(t,n)}finally{(function(a){qF(a.prevAllowStateChanges),$l(),Cu(a.prevDerivation),a.notifySpy&&Yo({time:Date.now()-a.startTime})})(i)}}function UF(r){Wt(Et.trackingDerivation===null,wr("m028")),Et.strictMode=r,Et.allowStateChanges=!r}function zF(r){var e=Et.allowStateChanges;return Et.allowStateChanges=r,e}function qF(r){Et.allowStateChanges=r}function g_(r,e,t,n,i){function a(o,s,u,l,c){if(c===void 0&&(c=0),Wt(i||iN(arguments),"This function is a decorator, but it wasn't invoked like a decorator"),u){m_(o,"__mobxLazyInitializers")||rc(o,"__mobxLazyInitializers",o.__mobxLazyInitializers&&o.__mobxLazyInitializers.slice()||[]);var f=u.value,d=u.initializer;return o.__mobxLazyInitializers.push(function(v){r(v,s,d?d.call(v):f,l,u)}),{enumerable:n,configurable:!0,get:function(){return this.__mobxDidRunLazyInitializers!==!0&&Mg(this),e.call(this,s)},set:function(v){this.__mobxDidRunLazyInitializers!==!0&&Mg(this),t.call(this,s,v)}}}var h={enumerable:n,configurable:!0,get:function(){return this.__mobxInitializedProps&&this.__mobxInitializedProps[s]===!0||nN(this,s,void 0,r,l,u),e.call(this,s)},set:function(v){this.__mobxInitializedProps&&this.__mobxInitializedProps[s]===!0?t.call(this,s,v):nN(this,s,v,r,l,u)}};return(arguments.length<3||arguments.length===5&&c<3)&&Object.defineProperty(o,s,h),h}return i?function(){if(iN(arguments))return a.apply(null,arguments);var o=arguments,s=arguments.length;return function(u,l,c){return a(u,l,c,o,s)}}:a}function nN(r,e,t,n,i,a){m_(r,"__mobxInitializedProps")||rc(r,"__mobxInitializedProps",{}),r.__mobxInitializedProps[e]=!0,n(r,e,t,i,a)}function Mg(r){r.__mobxDidRunLazyInitializers!==!0&&r.__mobxLazyInitializers&&(rc(r,"__mobxDidRunLazyInitializers",!0),r.__mobxDidRunLazyInitializers&&r.__mobxLazyInitializers.forEach(function(e){return e(r)}))}function iN(r){return(r.length===2||r.length===3)&&typeof r[1]=="string"}var one=g_(function(r,e,t,n,i){var a=n&&n.length===1?n[0]:t.name||e||"<unnamed action>";rc(r,e,Xr(a,t))},function(r){return this[r]},function(){Wt(!1,wr("m001"))},!1,!0),sne=g_(function(r,e,t){GF(r,e,t)},function(r){return this[r]},function(){Wt(!1,wr("m001"))},!1,!1),Xr=function(r,e,t,n){return arguments.length===1&&typeof r=="function"?Dg(r.name||"<unnamed action>",r):arguments.length===2&&typeof e=="function"?Dg(r,e):arguments.length===1&&typeof r=="string"?aN(r):aN(e).apply(null,arguments)};function aN(r){return function(e,t,n){if(n&&typeof n.value=="function")return n.value=Dg(r,n.value),n.enumerable=!1,n.configurable=!0,n;if(n!==void 0&&n.get!==void 0)throw new Error("[mobx] action is not expected to be used with getters");return one(r).apply(this,arguments)}}function c0(r){return typeof r=="function"&&r.isMobxAction===!0}function GF(r,e,t){var n=function(){return mA(e,t,r,arguments)};n.isMobxAction=!0,rc(r,e,n)}Xr.bound=function(r,e,t){if(typeof r=="function"){var n=Dg("<not yet bound action>",r);return n.autoBind=!0,n}return sne.apply(null,arguments)};var oN=Object.prototype.toString;function y_(r,e){return d2(r,e)}function d2(r,e,t,n){if(r===e)return r!==0||1/r==1/e;if(r==null||e==null)return!1;if(r!=r)return e!=e;var i=typeof r;return(i==="function"||i==="object"||typeof e=="object")&&function(a,o,s,u){a=sN(a),o=sN(o);var l=oN.call(a);if(l!==oN.call(o))return!1;switch(l){case"[object RegExp]":case"[object String]":return""+a==""+o;case"[object Number]":return+a!=+a?+o!=+o:+a==0?1/+a==1/o:+a==+o;case"[object Date]":case"[object Boolean]":return+a==+o;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(a)===Symbol.valueOf.call(o)}var c=l==="[object Array]";if(!c){if(typeof a!="object"||typeof o!="object")return!1;var f=a.constructor,d=o.constructor;if(f!==d&&!(typeof f=="function"&&f instanceof f&&typeof d=="function"&&d instanceof d)&&"constructor"in a&&"constructor"in o)return!1}u=u||[];for(var h=(s=s||[]).length;h--;)if(s[h]===a)return u[h]===o;if(s.push(a),u.push(o),c){if((h=a.length)!==o.length)return!1;for(;h--;)if(!d2(a[h],o[h],s,u))return!1}else{var v,p=Object.keys(a);if(h=p.length,Object.keys(o).length!==h)return!1;for(;h--;)if(!une(o,v=p[h])||!d2(a[v],o[v],s,u))return!1}return s.pop(),u.pop(),!0}(r,e,t,n)}function sN(r){return Ru(r)?r.peek():wo(r)?r.entries():Uh(r)?function(e){for(var t=[];;){var n=e.next();if(n.done)break;t.push(n.value)}return t}(r.entries()):r}function une(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function uN(r,e){return r===e}var ku={identity:uN,structural:function(r,e){return y_(r,e)},default:function(r,e){return function(t,n){return typeof t=="number"&&typeof n=="number"&&isNaN(t)&&isNaN(n)}(r,e)||uN(r,e)}};function f0(r,e,t){var n,i,a;typeof r=="string"?(n=r,i=e,a=t):(n=r.name||"Autorun@"+Ai(),i=r,a=e),Wt(typeof i=="function",wr("m004")),Wt(c0(i)===!1,wr("m005")),a&&(i=i.bind(a));var o=new jg(n,function(){this.track(s)});function s(){i(o)}return o.schedule(),o.getDisposer()}function VF(r,e,t){var n;arguments.length>3&&Pi(wr("m007")),qf(r)&&Pi(wr("m008")),(n=typeof t=="object"?t:{}).name=n.name||r.name||e.name||"Reaction@"+Ai(),n.fireImmediately=t===!0||n.fireImmediately===!0,n.delay=n.delay||0,n.compareStructural=n.compareStructural||n.struct||!1,e=Xr(n.name,n.context?e.bind(n.context):e),n.context&&(r=r.bind(n.context));var i,a=!0,o=!1,s=n.equals?n.equals:n.compareStructural||n.struct?ku.structural:ku.default,u=new jg(n.name,function(){a||n.delay<1?l():o||(o=!0,setTimeout(function(){o=!1,l()},n.delay))});function l(){if(!u.isDisposed){var c=!1;u.track(function(){var f=r(u);c=a||!s(i,f),i=f}),a&&n.fireImmediately&&e(i,u),a||c!==!0||e(i,u),a&&(a=!1)}}return u.schedule(),u.getDisposer()}var kf=function(){function r(e,t,n,i,a){this.derivation=e,this.scope=t,this.equals=n,this.dependenciesState=Ar.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isPendingUnobservation=!1,this.observers=[],this.observersIndexes={},this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=Ar.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+Ai(),this.value=new h0(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Vo.NONE,this.name=i||"ComputedValue@"+Ai(),a&&(this.setter=Dg(i+"-setter",a))}return r.prototype.onBecomeStale=function(){(function(e){if(e.lowestObserverState===Ar.UP_TO_DATE){e.lowestObserverState=Ar.POSSIBLY_STALE;for(var t=e.observers,n=t.length;n--;){var i=t[n];i.dependenciesState===Ar.UP_TO_DATE&&(i.dependenciesState=Ar.POSSIBLY_STALE,i.isTracing!==Vo.NONE&&pB(i,e),i.onBecomeStale())}}})(this)},r.prototype.onBecomeUnobserved=function(){y2(this),this.value=void 0},r.prototype.get=function(){Wt(!this.isComputing,"Cycle detected in computation "+this.name,this.derivation),Et.inBatch===0?(Vl(),g2(this)&&(this.isTracing!==Vo.NONE&&console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context and doing a full recompute"),this.value=this.computeValue(!1)),$l()):(vB(this),g2(this)&&this.trackAndCompute()&&function(t){if(t.lowestObserverState!==Ar.STALE){t.lowestObserverState=Ar.STALE;for(var n=t.observers,i=n.length;i--;){var a=n[i];a.dependenciesState===Ar.POSSIBLY_STALE?a.dependenciesState=Ar.STALE:a.dependenciesState===Ar.UP_TO_DATE&&(t.lowestObserverState=Ar.UP_TO_DATE)}}}(this));var e=this.value;if(Ip(e))throw e.cause;return e},r.prototype.peek=function(){var e=this.computeValue(!1);if(Ip(e))throw e.cause;return e},r.prototype.set=function(e){if(this.setter){Wt(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,e)}finally{this.isRunningSetter=!1}}else Wt(!1,"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")},r.prototype.trackAndCompute=function(){aa()&&Rf({object:this.scope,type:"compute",fn:this.derivation});var e=this.value,t=this.dependenciesState===Ar.NOT_TRACKING,n=this.value=this.computeValue(!0);return t||Ip(e)||Ip(n)||!this.equals(e,n)},r.prototype.computeValue=function(e){var t;if(this.isComputing=!0,Et.computationDepth++,e)t=mB(this,this.derivation,this.scope);else try{t=this.derivation.call(this.scope)}catch(n){t=new h0(n)}return Et.computationDepth--,this.isComputing=!1,t},r.prototype.observe=function(e,t){var n=this,i=!0,a=void 0;return f0(function(){var o=n.get();if(!i||t){var s=Vf();e({type:"update",object:n,newValue:o,oldValue:a}),Cu(s)}i=!1,a=o})},r.prototype.toJSON=function(){return this.get()},r.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},r.prototype.valueOf=function(){return iB(this.get())},r.prototype.whyRun=function(){var e=!!Et.trackingDerivation,t=d0(this.isComputing?this.newObserving:this.observing).map(function(i){return i.name}),n=d0(fB(this).map(function(i){return i.name}));return`
WhyRun? computation '`+this.name+`':
 * Running because: `+(e?"[active] the value of this computation is needed by a reaction":this.isComputing?"[get] The value of this computed was requested outside a reaction":"[idle] not running at the moment")+`
`+(this.dependenciesState===Ar.NOT_TRACKING?wr("m032"):` * This computation will re-run if any of the following observables changes:
    `+v2(t)+`
    `+(this.isComputing&&e?" (... or any observable accessed during the remainder of the current run)":"")+`
    `+wr("m038")+`

  * If the outcome of this computation changes, the following observers will be re-run:
    `+v2(n)+`
`)},r}();kf.prototype[nB()]=kf.prototype.valueOf;var Su=Gf("ComputedValue",kf),$F=function(){function r(e,t){this.target=e,this.name=t,this.values={},this.changeListeners=null,this.interceptors=null}return r.prototype.observe=function(e,t){return Wt(t!==!0,"`observe` doesn't support the fire immediately property for observable objects."),p_(this,e)},r.prototype.intercept=function(e){return v_(this,e)},r}();function jh(r,e){if(js(r)&&r.hasOwnProperty("$mobx"))return r.$mobx;Wt(Object.isExtensible(r),wr("m035")),Bh(r)||(e=(r.constructor.name||"ObservableObject")+"@"+Ai()),e||(e="ObservableObject@"+Ai());var t=new $F(r,e);return Ng(r,"$mobx",t),t}function lne(r,e,t,n){if(r.values[e]&&!Su(r.values[e]))return Wt("value"in t,"The property "+e+" in "+r.name+" is already observable, cannot redefine it as computed property"),void(r.target[e]=t.value);if("value"in t)if(qf(t.value)){var i=t.value;h2(r,e,i.initialValue,i.enhancer)}else c0(t.value)&&t.value.autoBind===!0?GF(r.target,e,t.value.originalFn):Su(t.value)?function(a,o,s){var u=a.name+"."+o;s.name=u,s.scope||(s.scope=a.target),a.values[o]=s,Object.defineProperty(a.target,o,HF(o))}(r,e,t.value):h2(r,e,t.value,n);else WF(r,e,t.get,t.set,ku.default,!0)}function h2(r,e,t,n){if(xA(r.target,e),Af(r)){var i=Pf(r,{object:r.target,name:e,type:"add",newValue:t});if(!i)return;t=i.newValue}t=(r.values[e]=new tc(t,n,r.name+"."+e,!1)).value,Object.defineProperty(r.target,e,function(a){return lN[a]||(lN[a]={configurable:!0,enumerable:!0,get:function(){return this.$mobx.values[a].get()},set:function(o){YF(this,a,o)}})}(e)),function(a,o,s,u){var l=ql(a),c=aa(),f=l||c?{type:"add",object:o,name:s,newValue:u}:null;c&&Ho(f),l&&Gl(a,f),c&&Yo()}(r,r.target,e,t)}function WF(r,e,t,n,i,a){a&&xA(r.target,e),r.values[e]=new kf(t,r.target,i,r.name+"."+e,n),a&&Object.defineProperty(r.target,e,HF(e))}var lN={},cN={};function HF(r){return cN[r]||(cN[r]={configurable:!0,enumerable:!1,get:function(){return this.$mobx.values[r].get()},set:function(e){return this.$mobx.values[r].set(e)}})}function YF(r,e,t){var n=r.$mobx,i=n.values[e];if(Af(n)){if(!(s=Pf(n,{type:"update",object:r,name:e,newValue:t})))return;t=s.newValue}if((t=i.prepareNewValue(t))!==Gp){var a=ql(n),o=aa(),s=a||o?{type:"update",object:r,oldValue:i.value,name:e,newValue:t}:null;o&&Ho(s),i.setNewValue(t),a&&Gl(n,s),o&&Yo()}}var cne=Gf("ObservableObjectAdministration",$F);function js(r){return!!wA(r)&&(Mg(r),cne(r.$mobx))}function ev(r,e){if(r==null)return!1;if(e!==void 0){if(Ru(r)||wo(r))throw new Error(wr("m019"));if(js(r)){var t=r.$mobx;return t.values&&!!t.values[e]}return!1}return js(r)||!!r.$mobx||pA(r)||zh(r)||Su(r)}function sy(r){return Wt(!!r,":("),g_(function(e,t,n,i,a){xA(e,t),Wt(!a||!a.get,wr("m022")),h2(jh(e,void 0),t,n,r)},function(e){var t=this.$mobx.values[e];if(t!==void 0)return t.get()},function(e,t){YF(this,e,t)},!0,!1)}function XF(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return bA(r,Ml,e)}function KF(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return bA(r,Ll,e)}function bA(r,e,t){Wt(arguments.length>=2,wr("m014")),Wt(typeof r=="object",wr("m015")),Wt(!wo(r),wr("m016")),t.forEach(function(u){Wt(typeof u=="object",wr("m017")),Wt(!ev(u),wr("m018"))});for(var n=jh(r),i={},a=t.length-1;a>=0;a--){var o=t[a];for(var s in o)if(i[s]!==!0&&m_(o,s)){if(i[s]=!0,r===o&&!rB(r,s))continue;lne(n,s,Object.getOwnPropertyDescriptor(o,s),e)}}return r}var ZF=sy(Ml),fne=sy(QF),dne=sy(Ll),hne=sy(Vp),vne=sy(JF),fN={box:function(r,e){return arguments.length>2&&_l("box"),new tc(r,Ml,e)},shallowBox:function(r,e){return arguments.length>2&&_l("shallowBox"),new tc(r,Ll,e)},array:function(r,e){return arguments.length>2&&_l("array"),new xu(r,Ml,e)},shallowArray:function(r,e){return arguments.length>2&&_l("shallowArray"),new xu(r,Ll,e)},map:function(r,e){return arguments.length>2&&_l("map"),new Fh(r,Ml,e)},shallowMap:function(r,e){return arguments.length>2&&_l("shallowMap"),new Fh(r,Ll,e)},object:function(r,e){arguments.length>2&&_l("object");var t={};return jh(t,e),XF(t,r),t},shallowObject:function(r,e){arguments.length>2&&_l("shallowObject");var t={};return jh(t,e),KF(t,r),t},ref:function(){return arguments.length<2?kp(Ll,arguments[0]):dne.apply(null,arguments)},shallow:function(){return arguments.length<2?kp(QF,arguments[0]):fne.apply(null,arguments)},deep:function(){return arguments.length<2?kp(Ml,arguments[0]):ZF.apply(null,arguments)},struct:function(){return arguments.length<2?kp(Vp,arguments[0]):hne.apply(null,arguments)}},vn=function(r){if(r===void 0&&(r=void 0),typeof arguments[1]=="string")return ZF.apply(null,arguments);if(Wt(arguments.length<=1,wr("m021")),Wt(!qf(r),wr("m020")),ev(r))return r;var e=Ml(r,0,void 0);return e!==r?e:vn.box(r)};function _l(r){Pi("Expected one or two arguments to observable."+r+". Did you accidentally try to use observable."+r+" as decorator?")}function qf(r){return typeof r=="object"&&r!==null&&r.isMobxModifierDescriptor===!0}function kp(r,e){return Wt(!qf(e),"Modifiers cannot be nested"),{isMobxModifierDescriptor:!0,initialValue:e,enhancer:r}}function Ml(r,e,t){return qf(r)&&Pi("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),ev(r)?r:Array.isArray(r)?vn.array(r,t):Bh(r)?vn.object(r,t):Uh(r)?vn.map(r,t):r}function QF(r,e,t){return qf(r)&&Pi("You tried to assign a modifier wrapped value to a collection, please define modifiers when creating the collection, not when modifying it"),r==null||js(r)||Ru(r)||wo(r)?r:Array.isArray(r)?vn.shallowArray(r,t):Bh(r)?vn.shallowObject(r,t):Uh(r)?vn.shallowMap(r,t):Pi("The shallow modifier / decorator can only used in combination with arrays, objects and maps")}function Ll(r){return r}function Vp(r,e,t){if(y_(r,e))return e;if(ev(r))return r;if(Array.isArray(r))return new xu(r,Vp,t);if(Uh(r))return new Fh(r,Vp,t);if(Bh(r)){var n={};return jh(n,t),bA(n,Vp,[r]),n}return r}function JF(r,e,t){return y_(r,e)?e:r}function vh(r,e){e===void 0&&(e=void 0),Vl();try{return r.apply(e)}finally{$l()}}Object.keys(fN).forEach(function(r){return vn[r]=fN[r]}),vn.deep.struct=vn.struct,vn.ref.struct=function(){return arguments.length<2?kp(JF,arguments[0]):vne.apply(null,arguments)};var pne={},Fh=function(){function r(e,t,n){t===void 0&&(t=Ml),n===void 0&&(n="ObservableMap@"+Ai()),this.enhancer=t,this.name=n,this.$mobx=pne,this._data=Object.create(null),this._hasMap=Object.create(null),this._keys=new xu(void 0,Ll,this.name+".keys()",!0),this.interceptors=null,this.changeListeners=null,this.dehancer=void 0,this.merge(e)}return r.prototype._has=function(e){return this._data[e]!==void 0},r.prototype.has=function(e){return!!this.isValidKey(e)&&(e=""+e,this._hasMap[e]?this._hasMap[e].get():this._updateHasMapEntry(e,!1).get())},r.prototype.set=function(e,t){this.assertValidKey(e),e=""+e;var n=this._has(e);if(Af(this)){var i=Pf(this,{type:n?"update":"add",object:this,newValue:t,name:e});if(!i)return this;t=i.newValue}return n?this._updateValue(e,t):this._addValue(e,t),this},r.prototype.delete=function(e){var t=this;if(this.assertValidKey(e),e=""+e,Af(this)&&!(a=Pf(this,{type:"delete",object:this,name:e})))return!1;if(this._has(e)){var n=aa(),i=ql(this),a=i||n?{type:"delete",object:this,oldValue:this._data[e].value,name:e}:null;return n&&Ho(a),vh(function(){t._keys.remove(e),t._updateHasMapEntry(e,!1),t._data[e].setNewValue(void 0),t._data[e]=void 0}),i&&Gl(this,a),n&&Yo(),!0}return!1},r.prototype._updateHasMapEntry=function(e,t){var n=this._hasMap[e];return n?n.setNewValue(t):n=this._hasMap[e]=new tc(t,Ll,this.name+"."+e+"?",!1),n},r.prototype._updateValue=function(e,t){var n=this._data[e];if((t=n.prepareNewValue(t))!==Gp){var i=aa(),a=ql(this),o=a||i?{type:"update",object:this,oldValue:n.value,name:e,newValue:t}:null;i&&Ho(o),n.setNewValue(t),a&&Gl(this,o),i&&Yo()}},r.prototype._addValue=function(e,t){var n=this;vh(function(){var s=n._data[e]=new tc(t,n.enhancer,n.name+"."+e,!1);t=s.value,n._updateHasMapEntry(e,!0),n._keys.push(e)});var i=aa(),a=ql(this),o=a||i?{type:"add",object:this,name:e,newValue:t}:null;i&&Ho(o),a&&Gl(this,o),i&&Yo()},r.prototype.get=function(e){return e=""+e,this.has(e)?this.dehanceValue(this._data[e].get()):this.dehanceValue(void 0)},r.prototype.dehanceValue=function(e){return this.dehancer!==void 0?this.dehancer(e):e},r.prototype.keys=function(){return Lb(this._keys.slice())},r.prototype.values=function(){return Lb(this._keys.map(this.get,this))},r.prototype.entries=function(){var e=this;return Lb(this._keys.map(function(t){return[t,e.get(t)]}))},r.prototype.forEach=function(e,t){var n=this;this.keys().forEach(function(i){return e.call(t,n.get(i),i,n)})},r.prototype.merge=function(e){var t=this;return wo(e)&&(e=e.toJS()),vh(function(){Bh(e)?Object.keys(e).forEach(function(n){return t.set(n,e[n])}):Array.isArray(e)?e.forEach(function(n){var i=n[0],a=n[1];return t.set(i,a)}):Uh(e)?e.forEach(function(n,i){return t.set(i,n)}):e!=null&&Pi("Cannot initialize map from "+e)}),this},r.prototype.clear=function(){var e=this;vh(function(){bB(function(){e.keys().forEach(e.delete,e)})})},r.prototype.replace=function(e){var t=this;return vh(function(){var n,i=Bh(n=e)?Object.keys(n):Array.isArray(n)?n.map(function(a){return a[0]}):Uh(n)?Array.from(n.keys()):wo(n)?n.keys():Pi("Cannot get keys from "+n);t.keys().filter(function(a){return i.indexOf(a)===-1}).forEach(function(a){return t.delete(a)}),t.merge(e)}),this},Object.defineProperty(r.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),r.prototype.toJS=function(){var e=this,t={};return this.keys().forEach(function(n){return t[n]=e.get(n)}),t},r.prototype.toJSON=function(){return this.toJS()},r.prototype.isValidKey=function(e){return e!=null&&(typeof e=="string"||typeof e=="number"||typeof e=="boolean")},r.prototype.assertValidKey=function(e){if(!this.isValidKey(e))throw new Error("[mobx.map] Invalid key: '"+e+"', only strings, numbers and booleans are accepted as key in observable maps.")},r.prototype.toString=function(){var e=this;return this.name+"[{ "+this.keys().map(function(t){return t+": "+e.get(t)}).join(", ")+" }]"},r.prototype.observe=function(e,t){return Wt(t!==!0,wr("m033")),p_(this,e)},r.prototype.intercept=function(e){return v_(this,e)},r}();jF(Fh.prototype,function(){return this.entries()});var wo=Gf("ObservableMap",Fh),eB=[];function Lg(){return typeof window<"u"?window:On.g}function Ai(){return++Et.mobxGuid}function Pi(r,e){throw Wt(!1,r,e),"X"}function Wt(r,e,t){if(!r)throw new Error("[mobx] Invariant failed: "+e+(t?" in '"+t+"'":""))}Object.freeze(eB);var dN=[];function sf(r){return dN.indexOf(r)===-1&&(dN.push(r),console.error("[mobx] Deprecated: "+r),!0)}function _A(r){var e=!1;return function(){if(!e)return e=!0,r.apply(this,arguments)}}var hN=function(){};function d0(r){var e=[];return r.forEach(function(t){e.indexOf(t)===-1&&e.push(t)}),e}function v2(r,e,t){return e===void 0&&(e=100),t===void 0&&(t=" - "),r?r.slice(0,e).join(t)+(r.length>e?" (... and "+(r.length-e)+"more)":""):""}function wA(r){return r!==null&&typeof r=="object"}function Bh(r){if(r===null||typeof r!="object")return!1;var e=Object.getPrototypeOf(r);return e===Object.prototype||e===null}function tB(){for(var r=arguments[0],e=1,t=arguments.length;e<t;e++){var n=arguments[e];for(var i in n)m_(n,i)&&(r[i]=n[i])}return r}var gne=Object.prototype.hasOwnProperty;function m_(r,e){return gne.call(r,e)}function rc(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:t})}function Ng(r,e,t){Object.defineProperty(r,e,{enumerable:!1,writable:!1,configurable:!0,value:t})}function rB(r,e){var t=Object.getOwnPropertyDescriptor(r,e);return!t||t.configurable!==!1&&t.writable!==!1}function xA(r,e){Wt(rB(r,e),"Cannot make property '"+e+"' observable, it is not configurable and writable in the target object")}function Gf(r,e){var t="isMobX"+r;return e.prototype[t]=!0,function(n){return wA(n)&&n[t]===!0}}function Uh(r){return Lg().Map!==void 0&&r instanceof Lg().Map}function nB(){return typeof Symbol=="function"&&Symbol.toPrimitive||"@@toPrimitive"}function iB(r){return r===null?null:typeof r=="object"?""+r:r}var Ar,Vo,yne=["mobxGuid","resetId","spyListeners","strictMode","runId"],aB=function(){this.version=5,this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.strictMode=!1,this.resetId=0,this.spyListeners=[],this.globalReactionErrorHandlers=[]},Et=new aB,oB=!1,sB=!1,vN=!1,XS=Lg();function Fs(r,e){if(typeof r=="object"&&r!==null){if(Ru(r))return Wt(e===void 0,wr("m036")),r.$mobx.atom;if(wo(r)){var t=r;return e===void 0?Fs(t._keys):(Wt(!!(n=t._data[e]||t._hasMap[e]),"the entry '"+e+"' does not exist in the observable map '"+p2(r)+"'"),n)}var n;if(Mg(r),e&&!r.$mobx&&r[e],js(r))return e?(Wt(!!(n=r.$mobx.values[e]),"no observable property '"+e+"' found on the observable object '"+p2(r)+"'"),n):Pi("please specify a property");if(pA(r)||Su(r)||zh(r))return r}else if(typeof r=="function"&&zh(r.$mobx))return r.$mobx;return Pi("Cannot obtain atom from "+r)}function Eu(r,e){return Wt(r,"Expecting some object"),e!==void 0?Eu(Fs(r,e)):pA(r)||Su(r)||zh(r)||wo(r)?r:(Mg(r),r.$mobx?r.$mobx:void Wt(!1,"Cannot obtain administration from "+r))}function p2(r,e){return(e!==void 0?Fs(r,e):js(r)||wo(r)?Eu(r):Fs(r)).name}function uB(r,e){return lB(Fs(r,e))}function lB(r){var e={name:r.name};return r.observing&&r.observing.length>0&&(e.dependencies=d0(r.observing).map(lB)),e}function cB(r){var e={name:r.name};return function(t){return t.observers&&t.observers.length>0}(r)&&(e.observers=fB(r).map(cB)),e}function fB(r){return r.observers}function mne(r,e){var t=r.observers.length;t&&(r.observersIndexes[e.__mapid]=t),r.observers[t]=e,r.lowestObserverState>e.dependenciesState&&(r.lowestObserverState=e.dependenciesState)}function dB(r,e){if(r.observers.length===1)r.observers.length=0,hB(r);else{var t=r.observers,n=r.observersIndexes,i=t.pop();if(i!==e){var a=n[e.__mapid]||0;a?n[i.__mapid]=a:delete n[i.__mapid],t[a]=i}delete n[e.__mapid]}}function hB(r){r.isPendingUnobservation||(r.isPendingUnobservation=!0,Et.pendingUnobservations.push(r))}function Vl(){Et.inBatch++}function $l(){if(--Et.inBatch===0){xB();for(var r=Et.pendingUnobservations,e=0;e<r.length;e++){var t=r[e];t.isPendingUnobservation=!1,t.observers.length===0&&t.onBecomeUnobserved()}Et.pendingUnobservations=[]}}function vB(r){var e=Et.trackingDerivation;e!==null?e.runId!==r.lastAccessedBy&&(r.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=r):r.observers.length===0&&hB(r)}function pB(r,e){if(console.log("[mobx.trace] '"+r.name+"' is invalidated due to a change in: '"+e.name+"'"),r.isTracing===Vo.BREAK){var t=[];gB(uB(r),t,1),new Function(`debugger;
/*
Tracing '`+r.name+`'

You are entering this break point because derivation '`+r.name+"' is being traced and '"+e.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(r instanceof kf?r.derivation.toString():"")+`

The dependencies for this derivation are:

`+t.join(`
`)+`
*/
    `)()}}function gB(r,e,t){e.length>=1e3?e.push("(and many more)"):(e.push(""+new Array(t).join("	")+r.name),r.dependencies&&r.dependencies.forEach(function(n){return gB(n,e,t+1)}))}XS.__mobxInstanceCount?(XS.__mobxInstanceCount++,setTimeout(function(){oB||sB||vN||(vN=!0,console.warn("[mobx] Warning: there are multiple mobx instances active. This might lead to unexpected results. See https://github.com/mobxjs/mobx/issues/1082 for details."))},1)):XS.__mobxInstanceCount=1,function(r){r[r.NOT_TRACKING=-1]="NOT_TRACKING",r[r.UP_TO_DATE=0]="UP_TO_DATE",r[r.POSSIBLY_STALE=1]="POSSIBLY_STALE",r[r.STALE=2]="STALE"}(Ar||(Ar={})),function(r){r[r.NONE=0]="NONE",r[r.LOG=1]="LOG",r[r.BREAK=2]="BREAK"}(Vo||(Vo={}));var h0=function(r){this.cause=r};function Ip(r){return r instanceof h0}function g2(r){switch(r.dependenciesState){case Ar.UP_TO_DATE:return!1;case Ar.NOT_TRACKING:case Ar.STALE:return!0;case Ar.POSSIBLY_STALE:for(var e=Vf(),t=r.observing,n=t.length,i=0;i<n;i++){var a=t[i];if(Su(a)){try{a.get()}catch{return Cu(e),!0}if(r.dependenciesState===Ar.STALE)return Cu(e),!0}}return _B(r),Cu(e),!1}}function yB(){return Et.trackingDerivation!==null}function EA(r){var e=r.observers.length>0;Et.computationDepth>0&&e&&Pi(wr("m031")+r.name),!Et.allowStateChanges&&e&&Pi(wr(Et.strictMode?"m030a":"m030b")+r.name)}function mB(r,e,t){_B(r),r.newObserving=new Array(r.observing.length+100),r.unboundDepsCount=0,r.runId=++Et.runId;var n,i=Et.trackingDerivation;Et.trackingDerivation=r;try{n=e.call(t)}catch(a){n=new h0(a)}return Et.trackingDerivation=i,function(a){for(var o=a.observing,s=a.observing=a.newObserving,u=Ar.UP_TO_DATE,l=0,c=a.unboundDepsCount,f=0;f<c;f++)(d=s[f]).diffValue===0&&(d.diffValue=1,l!==f&&(s[l]=d),l++),d.dependenciesState>u&&(u=d.dependenciesState);for(s.length=l,a.newObserving=null,c=o.length;c--;)(d=o[c]).diffValue===0&&dB(d,a),d.diffValue=0;for(;l--;){var d;(d=s[l]).diffValue===1&&(d.diffValue=0,mne(d,a))}u!==Ar.UP_TO_DATE&&(a.dependenciesState=u,a.onBecomeStale())}(r),n}function y2(r){var e=r.observing;r.observing=[];for(var t=e.length;t--;)dB(e[t],r);r.dependenciesState=Ar.NOT_TRACKING}function bB(r){var e=Vf(),t=r();return Cu(e),t}function Vf(){var r=Et.trackingDerivation;return Et.trackingDerivation=null,r}function Cu(r){Et.trackingDerivation=r}function _B(r){if(r.dependenciesState!==Ar.UP_TO_DATE){r.dependenciesState=Ar.UP_TO_DATE;for(var e=r.observing,t=e.length;t--;)e[t].lowestObserverState=Ar.UP_TO_DATE}}function pN(r){return console.log(r),r}function wB(r){switch(r.length){case 0:return Et.trackingDerivation;case 1:return Fs(r[0]);case 2:return Fs(r[0],r[1])}}var jg=function(){function r(e,t){e===void 0&&(e="Reaction@"+Ai()),this.name=e,this.onInvalidate=t,this.observing=[],this.newObserving=[],this.dependenciesState=Ar.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+Ai(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Vo.NONE}return r.prototype.onBecomeStale=function(){this.schedule()},r.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Et.pendingReactions.push(this),xB())},r.prototype.isScheduled=function(){return this._isScheduled},r.prototype.runReaction=function(){this.isDisposed||(Vl(),this._isScheduled=!1,g2(this)&&(this._isTrackPending=!0,this.onInvalidate(),this._isTrackPending&&aa()&&Rf({object:this,type:"scheduled-reaction"})),$l())},r.prototype.track=function(e){Vl();var t,n=aa();n&&(t=Date.now(),Ho({object:this,type:"reaction",fn:e})),this._isRunning=!0;var i=mB(this,e,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&y2(this),Ip(i)&&this.reportExceptionInDerivation(i.cause),n&&Yo({time:Date.now()-t}),$l()},r.prototype.reportExceptionInDerivation=function(e){var t=this;if(this.errorHandler)this.errorHandler(e,this);else{var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this,i=wr("m037");console.error(n||i,e),aa()&&Rf({type:"error",message:n,error:e,object:this}),Et.globalReactionErrorHandlers.forEach(function(a){return a(e,t)})}},r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Vl(),y2(this),$l()))},r.prototype.getDisposer=function(){var e=this.dispose.bind(this);return e.$mobx=this,e.onError=bne,e},r.prototype.toString=function(){return"Reaction["+this.name+"]"},r.prototype.whyRun=function(){var e=d0(this._isRunning?this.newObserving:this.observing).map(function(t){return t.name});return`
WhyRun? reaction '`+this.name+`':
 * Status: [`+(this.isDisposed?"stopped":this._isRunning?"running":this.isScheduled()?"scheduled":"idle")+`]
 * This reaction will re-run if any of the following observables changes:
    `+v2(e)+`
    `+(this._isRunning?" (... or any observable accessed during the remainder of the current run)":"")+`
	`+wr("m038")+`
`},r.prototype.trace=function(e){e===void 0&&(e=!1),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=!1;typeof t[t.length-1]=="boolean"&&(i=t.pop());var a=wB(t);if(!a)return Pi("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");a.isTracing===Vo.NONE&&console.log("[mobx.trace] '"+a.name+"' tracing enabled"),a.isTracing=i?Vo.BREAK:Vo.LOG}(this,e)},r}();function bne(r){Wt(this&&this.$mobx&&zh(this.$mobx),"Invalid `this`"),Wt(!this.$mobx.errorHandler,"Only one onErrorHandler can be registered"),this.$mobx.errorHandler=r}var gN=100,m2=function(r){return r()};function xB(){Et.inBatch>0||Et.isRunningReactions||m2(_ne)}function _ne(){Et.isRunningReactions=!0;for(var r=Et.pendingReactions,e=0;r.length>0;){++e===gN&&(console.error("Reaction doesn't converge to a stable state after "+gN+" iterations. Probably there is a cycle in the reactive function: "+r[0]),r.splice(0));for(var t=r.splice(0),n=0,i=t.length;n<i;n++)t[n].runReaction()}Et.isRunningReactions=!1}var zh=Gf("Reaction",jg);function OA(r){return g_(function(e,t,n,i,a){Wt(a!==void 0,wr("m009")),Wt(typeof a.get=="function",wr("m010")),WF(jh(e,""),t,a.get,a.set,r,!1)},function(e){var t=this.$mobx.values[e];if(t!==void 0)return t.get()},function(e,t){this.$mobx.values[e].set(t)},!1,!1)}var wne=OA(ku.default),xne=OA(ku.structural),v0=function(r,e,t){if(typeof e=="string")return wne.apply(null,arguments);Wt(typeof r=="function",wr("m011")),Wt(arguments.length<3,wr("m012"));var n=typeof e=="object"?e:{};n.setter=typeof e=="function"?e:n.setter;var i=n.equals?n.equals:n.compareStructural||n.struct?ku.structural:ku.default;return new kf(r,n.context,i,n.name||r.name||"",n.setter)};function ia(r,e,t){function n(c){return e&&t.push([r,c]),c}if(e===void 0&&(e=!0),t===void 0&&(t=[]),ev(r)){if(e&&t===null&&(t=[]),e&&r!==null&&typeof r=="object"){for(var i=0,a=t.length;i<a;i++)if(t[i][0]===r)return t[i][1]}if(Ru(r)){var o=n([]),s=r.map(function(c){return ia(c,e,t)});for(o.length=s.length,i=0,a=s.length;i<a;i++)o[i]=s[i];return o}if(js(r)){for(var u in o=n({}),r)o[u]=ia(r[u],e,t);return o}if(wo(r)){var l=n({});return r.forEach(function(c,f){return l[f]=ia(c,e,t)}),l}if(yA(r))return ia(r.get(),e,t)}return r}v0.struct=xne,v0.equals=OA;var SA={allowStateChanges:function(r,e){var t,n=zF(r);try{t=e()}finally{qF(n)}return t},deepEqual:y_,getAtom:Fs,getDebugName:p2,getDependencyTree:uB,getAdministration:Eu,getGlobalState:function(){return Et},getObserverTree:function(r,e){return cB(Fs(r,e))},interceptReads:function(r,e,t){var n;if(wo(r)||Ru(r)||yA(r))n=Eu(r);else{if(!js(r))return Pi("Expected observable map, object or array as first array");if(typeof e!="string")return Pi("InterceptReads can only be used with a specific property, not with an object in general");n=Eu(r,e)}return n.dehancer!==void 0?Pi("An intercept reader was already established"):(n.dehancer=typeof e=="function"?e:t,function(){n.dehancer=void 0})},isComputingDerivation:yB,isSpyEnabled:aa,onReactionError:function(r){return Et.globalReactionErrorHandlers.push(r),function(){var e=Et.globalReactionErrorHandlers.indexOf(r);e>=0&&Et.globalReactionErrorHandlers.splice(e,1)}},reserveArrayBuffer:gA,resetGlobalState:function(){Et.resetId++;var r=new aB;for(var e in r)yne.indexOf(e)===-1&&(Et[e]=r[e]);Et.allowStateChanges=!Et.strictMode},isolateGlobalState:function(){sB=!0,Lg().__mobxInstanceCount--},shareGlobalState:function(){sf("Using `shareGlobalState` is not recommended, use peer dependencies instead. See https://github.com/mobxjs/mobx/issues/1082 for details."),oB=!0;var r=Lg(),e=Et;if(r.__mobservableTrackingStack||r.__mobservableViewStack)throw new Error("[mobx] An incompatible version of mobservable is already loaded.");if(r.__mobxGlobal&&r.__mobxGlobal.version!==e.version)throw new Error("[mobx] An incompatible version of mobx is already loaded.");r.__mobxGlobal?Et=r.__mobxGlobal:r.__mobxGlobal=e},spyReport:Rf,spyReportEnd:Yo,spyReportStart:Ho,setReactionScheduler:function(r){var e=m2;m2=function(t){return r(function(){return e(t)})}}},b2={Reaction:jg,untracked:bB,Atom:ene,BaseAtom:oy,useStrict:UF,isStrictModeEnabled:function(){return Et.strictMode},spy:NF,comparer:ku,asReference:function(r){return sf("asReference is deprecated, use observable.ref instead"),vn.ref(r)},asFlat:function(r){return sf("asFlat is deprecated, use observable.shallow instead"),vn.shallow(r)},asStructure:function(r){return sf("asStructure is deprecated. Use observable.struct, computed.struct or reaction options instead."),vn.struct(r)},asMap:function(r){return sf("asMap is deprecated, use observable.map or observable.shallowMap instead"),vn.map(r||{})},isModifierDescriptor:qf,isObservableObject:js,isBoxedObservable:yA,isObservableArray:Ru,ObservableMap:Fh,isObservableMap:wo,map:function(r){return sf("`mobx.map` is deprecated, use `new ObservableMap` or `mobx.observable.map` instead"),vn.map(r)},transaction:vh,observable:vn,computed:v0,isObservable:ev,isComputed:function(r,e){if(r==null)return!1;if(e!==void 0){if(js(r)===!1||!r.$mobx.values[e])return!1;var t=Fs(r,e);return Su(t)}return Su(r)},extendObservable:XF,extendShallowObservable:KF,observe:function(r,e,t,n){return typeof t=="function"?function(i,a,o,s){return Eu(i,a).observe(o,s)}(r,e,t,n):function(i,a,o){return Eu(i).observe(a,o)}(r,e,t)},intercept:function(r,e,t){return typeof t=="function"?function(n,i,a){return Eu(n,i).intercept(a)}(r,e,t):function(n,i){return Eu(n).intercept(i)}(r,e)},autorun:f0,autorunAsync:function(r,e,t,n){var i,a,o,s;typeof r=="string"?(i=r,a=e,o=t,s=n):(i=r.name||"AutorunAsync@"+Ai(),a=r,o=e,s=t),Wt(c0(a)===!1,wr("m006")),o===void 0&&(o=1),s&&(a=a.bind(s));var u=!1,l=new jg(i,function(){u||(u=!0,setTimeout(function(){u=!1,l.isDisposed||l.track(c)},o))});function c(){a(l)}return l.schedule(),l.getDisposer()},when:function(r,e,t,n){var i,a,o,s;return typeof r=="string"?(i=r,a=e,o=t,s=n):(i="When@"+Ai(),a=r,o=e,s=t),f0(i,function(u){if(a.call(s)){u.dispose();var l=Vf();o.call(s),Cu(l)}})},reaction:VF,action:Xr,isAction:c0,runInAction:function(r,e,t){var n=typeof r=="string"?r:r.name||"<unnamed action>",i=typeof r=="function"?r:e,a=typeof r=="function"?e:t;return Wt(typeof i=="function",wr("m002")),Wt(i.length===0,wr("m003")),Wt(typeof n=="string"&&n.length>0,"actions should have valid names, got: '"+n+"'"),mA(n,i,a,void 0)},expr:function(r,e){return yB()||console.warn(wr("m013")),v0(r,{context:e}).get()},toJS:ia,createTransformer:function(r,e){Wt(typeof r=="function"&&r.length<2,"createTransformer expects a function that accepts one argument");var t={},n=Et.resetId,i=function(a){function o(s,u){var l=a.call(this,function(){return r(u)},void 0,ku.default,"Transformer-"+r.name+"-"+s,void 0)||this;return l.sourceIdentifier=s,l.sourceObject=u,l}return h_(o,a),o.prototype.onBecomeUnobserved=function(){var s=this.value;a.prototype.onBecomeUnobserved.call(this),delete t[this.sourceIdentifier],e&&e(s,this.sourceObject)},o}(kf);return function(a){n!==Et.resetId&&(t={},n=Et.resetId);var o=function(u){if(typeof u=="string"||typeof u=="number")return u;if(u===null||typeof u!="object")throw new Error("[mobx] transform expected some kind of object or primitive value, got: "+u);var l=u.$transformId;return l===void 0&&rc(u,"$transformId",l=Ai()),l}(a),s=t[o];return s?s.get():(s=t[o]=new i(o,a)).get()}},whyRun:function(r,e){return sf("`whyRun` is deprecated in favor of `trace`"),(r=wB(arguments))?Su(r)||zh(r)?pN(r.whyRun()):Pi(wr("m025")):pN(wr("m024"))},isArrayLike:function(r){return Array.isArray(r)||Ru(r)},extras:SA},yN=!1,Ene=function(r){var e=b2[r];Object.defineProperty(b2,r,{get:function(){return yN||(yN=!0,console.warn("Using default export (`import mobx from 'mobx'`) is deprecated and won’t work in mobx@4.0.0\nUse `import * as mobx from 'mobx'` instead")),e}})};for(var One in b2)Ene(One);function $p(r){return $p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$p(r)}function Sne(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,EB(n.key),n)}}function EB(r){var e=function(t){if($p(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if($p(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return $p(e)=="symbol"?e:e+""}typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:NF,extras:SA});var Cne=["onLayoutDone","onLayoutStep","onError","onInitialization","onLayoutComputing","onWebGLContextLost","onZoomTransitionDone","restart"],Tne=function(){return r=function t(){var n,i,a,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(function(s,u){if(!(s instanceof u))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,a=void 0,(i=EB(i="callbacks"))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,this.callbacks=o},e=[{key:"onInitialization",value:function(){this.isValidFunction(this.callbacks.onInitialization)&&this.callbacks.onInitialization()}},{key:"onZoomTransitionDone",value:function(){this.isValidFunction(this.callbacks.onZoomTransitionDone)&&this.callbacks.onZoomTransitionDone()}},{key:"onLayoutDone",value:function(){this.isValidFunction(this.callbacks.onLayoutDone)&&this.callbacks.onLayoutDone()}},{key:"onLayoutStep",value:function(t){this.isValidFunction(this.callbacks.onLayoutStep)&&this.callbacks.onLayoutStep(t)}},{key:"onLayoutComputing",value:function(t){this.isValidFunction(this.callbacks.onLayoutComputing)&&this.callbacks.onLayoutComputing(t)}},{key:"onError",value:function(t){this.isValidFunction(this.callbacks.onError)&&this.callbacks.onError(t)}},{key:"onWebGLContextLost",value:function(t){this.isValidFunction(this.callbacks.onWebGLContextLost)&&this.callbacks.onWebGLContextLost(t)}},{key:"isValidFunction",value:function(t){return t!==void 0&&typeof t=="function"}}],e&&Sne(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),Ane=On(1803),mN=On.n(Ane),Pne={value:()=>{}};function OB(){for(var r,e=0,t=arguments.length,n={};e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nb(n)}function Nb(r){this._=r}function Rne(r,e){for(var t,n=0,i=r.length;n<i;++n)if((t=r[n]).name===e)return t.value}function bN(r,e,t){for(var n=0,i=r.length;n<i;++n)if(r[n].name===e){r[n]=Pne,r=r.slice(0,n).concat(r.slice(n+1));break}return t!=null&&r.push({name:e,value:t}),r}Nb.prototype=OB.prototype={constructor:Nb,on:function(r,e){var t,n,i=this._,a=(n=i,(r+"").trim().split(/^|\s+/).map(function(u){var l="",c=u.indexOf(".");if(c>=0&&(l=u.slice(c+1),u=u.slice(0,c)),u&&!n.hasOwnProperty(u))throw new Error("unknown type: "+u);return{type:u,name:l}})),o=-1,s=a.length;if(!(arguments.length<2)){if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<s;)if(t=(r=a[o]).type)i[t]=bN(i[t],r.name,e);else if(e==null)for(t in i)i[t]=bN(i[t],r.name,null);return this}for(;++o<s;)if((t=(r=a[o]).type)&&(t=Rne(i[t],r.name)))return t},copy:function(){var r={},e=this._;for(var t in e)r[t]=e[t].slice();return new Nb(r)},call:function(r,e){if((t=arguments.length-2)>0)for(var t,n,i=new Array(t),a=0;a<t;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(a=0,t=(n=this._[r]).length;a<t;++a)n[a].value.apply(e,i)},apply:function(r,e,t){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var n=this._[r],i=0,a=n.length;i<a;++i)n[i].value.apply(e,t)}};const kne=OB;var jb,Dp,bh=0,Mp=0,vp=0,p0=0,mf=0,b_=0,Fg=typeof performance=="object"&&performance.now?performance:Date,SB=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(r){setTimeout(r,17)};function CB(){return mf||(SB(Ine),mf=Fg.now()+b_)}function Ine(){mf=0}function _2(){this._call=this._time=this._next=null}function TB(r,e,t){var n=new _2;return n.restart(r,e,t),n}function _N(){mf=(p0=Fg.now())+b_,bh=Mp=0;try{(function(){CB(),++bh;for(var r,e=jb;e;)(r=mf-e._time)>=0&&e._call.call(void 0,r),e=e._next;--bh})()}finally{bh=0,function(){for(var r,e,t=jb,n=1/0;t;)t._call?(n>t._time&&(n=t._time),r=t,t=t._next):(e=t._next,t._next=null,t=r?r._next=e:jb=e);Dp=r,w2(n)}(),mf=0}}function Dne(){var r=Fg.now(),e=r-p0;e>1e3&&(b_-=e,p0=r)}function w2(r){bh||(Mp&&(Mp=clearTimeout(Mp)),r-mf>24?(r<1/0&&(Mp=setTimeout(_N,r-Fg.now()-b_)),vp&&(vp=clearInterval(vp))):(vp||(p0=Fg.now(),vp=setInterval(Dne,1e3)),bh=1,SB(_N)))}_2.prototype=TB.prototype={constructor:_2,restart:function(r,e,t){if(typeof r!="function")throw new TypeError("callback is not a function");t=(t==null?CB():+t)+(e==null?0:+e),this._next||Dp===this||(Dp?Dp._next=this:jb=this,Dp=this),this._call=r,this._time=t,w2()},stop:function(){this._call&&(this._call=null,this._time=1/0,w2())}};const wN=4294967296;function Mne(r){return r.x}function Lne(r){return r.y}var Nne=Math.PI*(3-Math.sqrt(5));function xN(r,e,t,n){if(isNaN(e)||isNaN(t))return r;var i,a,o,s,u,l,c,f,d,h=r._root,v={data:n},p=r._x0,g=r._y0,y=r._x1,b=r._y1;if(!h)return r._root=v,r;for(;h.length;)if((l=e>=(a=(p+y)/2))?p=a:y=a,(c=t>=(o=(g+b)/2))?g=o:b=o,i=h,!(h=h[f=c<<1|l]))return i[f]=v,r;if(s=+r._x.call(null,h.data),u=+r._y.call(null,h.data),e===s&&t===u)return v.next=h,i?i[f]=v:r._root=v,r;do i=i?i[f]=new Array(4):r._root=new Array(4),(l=e>=(a=(p+y)/2))?p=a:y=a,(c=t>=(o=(g+b)/2))?g=o:b=o;while((f=c<<1|l)==(d=(u>=o)<<1|s>=a));return i[d]=h,i[f]=v,r}function Ki(r,e,t,n,i){this.node=r,this.x0=e,this.y0=t,this.x1=n,this.y1=i}function jne(r){return r[0]}function Fne(r){return r[1]}function CA(r,e,t){var n=new TA(e??jne,t??Fne,NaN,NaN,NaN,NaN);return r==null?n:n.addAll(r)}function TA(r,e,t,n,i,a){this._x=r,this._y=e,this._x0=t,this._y0=n,this._x1=i,this._y1=a,this._root=void 0}function EN(r){for(var e={data:r.data},t=e;r=r.next;)t=t.next={data:r.data};return e}var Zi=CA.prototype=TA.prototype;function ta(r){return function(){return r}}function Nl(r){return 1e-6*(r()-.5)}function KS(){var r,e,t,n,i,a=ta(-30),o=1,s=1/0,u=.81;function l(h){var v,p=r.length,g=CA(r,Mne,Lne).visitAfter(f);for(n=h,v=0;v<p;++v)e=r[v],g.visit(d)}function c(){if(r){var h,v,p=r.length;for(i=new Array(p),h=0;h<p;++h)v=r[h],i[v.index]=+a(v,h,r)}}function f(h){var v,p,g,y,b,m=0,_=0;if(h.length){for(g=y=b=0;b<4;++b)(v=h[b])&&(p=Math.abs(v.value))&&(m+=v.value,_+=p,g+=p*v.x,y+=p*v.y);h.x=g/_,h.y=y/_}else{(v=h).x=v.data.x,v.y=v.data.y;do m+=i[v.data.index];while(v=v.next)}h.value=m}function d(h,v,p,g){if(!h.value)return!0;var y=h.x-e.x,b=h.y-e.y,m=g-v,_=y*y+b*b;if(m*m/u<_)return _<s&&(y===0&&(_+=(y=Nl(t))*y),b===0&&(_+=(b=Nl(t))*b),_<o&&(_=Math.sqrt(o*_)),e.vx+=y*h.value*n/_,e.vy+=b*h.value*n/_),!0;if(!(h.length||_>=s)){(h.data!==e||h.next)&&(y===0&&(_+=(y=Nl(t))*y),b===0&&(_+=(b=Nl(t))*b),_<o&&(_=Math.sqrt(o*_)));do h.data!==e&&(m=i[h.data.index]*n/_,e.vx+=y*m,e.vy+=b*m);while(h=h.next)}}return l.initialize=function(h,v){r=h,t=v,c()},l.strength=function(h){return arguments.length?(a=typeof h=="function"?h:ta(+h),c(),l):a},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Bne(r){return r.x+r.vx}function Une(r){return r.y+r.vy}function zne(r){return r.index}function ON(r,e){var t=r.get(e);if(!t)throw new Error("node not found: "+e);return t}Zi.copy=function(){var r,e,t=new TA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return t;if(!n.length)return t._root=EN(n),t;for(r=[{source:n,target:t._root=new Array(4)}];n=r.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?r.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=EN(e));return t},Zi.add=function(r){const e=+this._x.call(null,r),t=+this._y.call(null,r);return xN(this.cover(e,t),e,t,r)},Zi.addAll=function(r){var e,t,n,i,a=r.length,o=new Array(a),s=new Array(a),u=1/0,l=1/0,c=-1/0,f=-1/0;for(t=0;t<a;++t)isNaN(n=+this._x.call(null,e=r[t]))||isNaN(i=+this._y.call(null,e))||(o[t]=n,s[t]=i,n<u&&(u=n),n>c&&(c=n),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),t=0;t<a;++t)xN(this,o[t],s[t],r[t]);return this},Zi.cover=function(r,e){if(isNaN(r=+r)||isNaN(e=+e))return this;var t=this._x0,n=this._y0,i=this._x1,a=this._y1;if(isNaN(t))i=(t=Math.floor(r))+1,a=(n=Math.floor(e))+1;else{for(var o,s,u=i-t||1,l=this._root;t>r||r>=i||n>e||e>=a;)switch(s=(e<n)<<1|r<t,(o=new Array(4))[s]=l,l=o,u*=2,s){case 0:i=t+u,a=n+u;break;case 1:t=i-u,a=n+u;break;case 2:i=t+u,n=a-u;break;case 3:t=i-u,n=a-u}this._root&&this._root.length&&(this._root=l)}return this._x0=t,this._y0=n,this._x1=i,this._y1=a,this},Zi.data=function(){var r=[];return this.visit(function(e){if(!e.length)do r.push(e.data);while(e=e.next)}),r},Zi.extent=function(r){return arguments.length?this.cover(+r[0][0],+r[0][1]).cover(+r[1][0],+r[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Zi.find=function(r,e,t){var n,i,a,o,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,v=[],p=this._root;for(p&&v.push(new Ki(p,c,f,d,h)),t==null?t=1/0:(c=r-t,f=e-t,d=r+t,h=e+t,t*=t);u=v.pop();)if(!(!(p=u.node)||(i=u.x0)>d||(a=u.y0)>h||(o=u.x1)<c||(s=u.y1)<f))if(p.length){var g=(i+o)/2,y=(a+s)/2;v.push(new Ki(p[3],g,y,o,s),new Ki(p[2],i,y,g,s),new Ki(p[1],g,a,o,y),new Ki(p[0],i,a,g,y)),(l=(e>=y)<<1|r>=g)&&(u=v[v.length-1],v[v.length-1]=v[v.length-1-l],v[v.length-1-l]=u)}else{var b=r-+this._x.call(null,p.data),m=e-+this._y.call(null,p.data),_=b*b+m*m;if(_<t){var x=Math.sqrt(t=_);c=r-x,f=e-x,d=r+x,h=e+x,n=p.data}}return n},Zi.remove=function(r){if(isNaN(a=+this._x.call(null,r))||isNaN(o=+this._y.call(null,r)))return this;var e,t,n,i,a,o,s,u,l,c,f,d,h=this._root,v=this._x0,p=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(v+g)/2))?v=s:g=s,(c=o>=(u=(p+y)/2))?p=u:y=u,e=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(t=e,d=f)}for(;h.data!==r;)if(n=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,n?(i?n.next=i:delete n.next,this):e?(i?e[f]=i:delete e[f],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(t?t[d]=h:this._root=h),this):(this._root=i,this)},Zi.removeAll=function(r){for(var e=0,t=r.length;e<t;++e)this.remove(r[e]);return this},Zi.root=function(){return this._root},Zi.size=function(){var r=0;return this.visit(function(e){if(!e.length)do++r;while(e=e.next)}),r},Zi.visit=function(r){var e,t,n,i,a,o,s=[],u=this._root;for(u&&s.push(new Ki(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!r(u=e.node,n=e.x0,i=e.y0,a=e.x1,o=e.y1)&&u.length){var l=(n+a)/2,c=(i+o)/2;(t=u[3])&&s.push(new Ki(t,l,c,a,o)),(t=u[2])&&s.push(new Ki(t,n,c,l,o)),(t=u[1])&&s.push(new Ki(t,l,i,a,c)),(t=u[0])&&s.push(new Ki(t,n,i,l,c))}return this},Zi.visitAfter=function(r){var e,t=[],n=[];for(this._root&&t.push(new Ki(this._root,this._x0,this._y0,this._x1,this._y1));e=t.pop();){var i=e.node;if(i.length){var a,o=e.x0,s=e.y0,u=e.x1,l=e.y1,c=(o+u)/2,f=(s+l)/2;(a=i[0])&&t.push(new Ki(a,o,s,c,f)),(a=i[1])&&t.push(new Ki(a,c,s,u,f)),(a=i[2])&&t.push(new Ki(a,o,f,c,l)),(a=i[3])&&t.push(new Ki(a,c,f,u,l))}n.push(e)}for(;e=n.pop();)r(e.node,e.x0,e.y0,e.x1,e.y1);return this},Zi.x=function(r){return arguments.length?(this._x=r,this):this._x},Zi.y=function(r){return arguments.length?(this._y=r,this):this._y};var Nt=256,ZS=4096,zn=25,AB="#FFDF81",PB="#818790",RB="#EDEDED",kB="#CFD1D4",IB="#F5F6F6",DB="#8FE3E8",AA="#1A1B1D",MB={position:"absolute",top:0,bottom:0,left:0,right:0},qne=1/.38,Zr=function(){return window.devicePixelRatio||1},Gne=["NVL_basic-wrapper","NVL_interactive-wrapper"];function pp(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return SN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?SN(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function SN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var LB=function(r,e){var t=[r,e].sort();return"".concat(t[0],".").concat(t[1])},Jm=function(r){var e=new Set;return r.forEach(function(t){var n=t.from,i=t.to,a=LB(n,i);e.has(a)||e.add(a)}),e},x2=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:RB,t=new Map;return r.forEach(function(n){var i=n.id,a=n.from,o=n.to,s=n.color,u=n.width,l=n.disabled,c=LB(a,o),f=t.get(c);f?f.bundledRels.push({id:i,color:s??void 0,disabled:l!=null&&l,width:u??1}):t.set(c,{bundledRels:[{id:i,color:s??void 0,disabled:l!=null&&l,width:u??1}],key:c,from:a,to:o,color:s??void 0,disabled:l!=null&&l,width:0})}),t.forEach(function(n){var i=(0,Vr.uniqBy)(n.bundledRels,"disabled"),a=i.length===1&&i[0].disabled===!0,o=i.length===1&&i[0].disabled!==!0;if(a)n.color=e,n.width=1;else{var s=n.bundledRels.filter(function(l){return l.disabled!==!0}),u=(0,Vr.uniqBy)(s,"color");o?(n.color=u.length>1?void 0:n.bundledRels[0].color,n.bundledRels.forEach(function(l){n.width+=l.width})):(n.color=u.length===1?u[0].color:void 0,n.disabled=!1,n.bundledRels.forEach(function(l){n.width+=l.disabled!==!0?l.width:0}))}n.width=Math.min(n.width,20)}),Array.from(t.values())},Bg=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).find(function(r){return"size"in r})!==void 0};function E2(r){return E2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E2(r)}var Vne=function(r){var e,t;return typeof r.source=="number"||typeof r.target=="number"||typeof r.source=="string"||typeof r.target=="string"?45*devicePixelRatio:((e=r.source.size)!==null&&e!==void 0?e:zn)+((t=r.target.size)!==null&&t!==void 0?t:zn)+90*devicePixelRatio};function CN(r){return E2(r)==="object"}var $ne=function(r){var e;return((e=r.size)!==null&&e!==void 0?e:zn)+25*devicePixelRatio},O2=function(){return-400*Math.pow(devicePixelRatio,2)},Wne=function(){return 2*O2()};function bf(r){return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bf(r)}function TN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function AN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Hne(r,e,t){return(e=NB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Yne(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,NB(n.key),n)}}function NB(r){var e=function(t){if(bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(bf(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return bf(e)=="symbol"?e:e+""}var Cs="d3ForceLayout",QS=function(r){return r&&ia(r)},Xne=function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t);var a=n.state;this.state=a,this.d3Nodes={},this.d3RelList={},this.computing=!0,this.center={x:0,y:0},this.nodeRelCount=[];var o=this.state,s=o.nodes,u=o.rels;s.addChannel(Cs),u.addChannel(Cs),this.simulation=function(l){var c,f=1,d=.001,h=1-Math.pow(d,1/300),v=0,p=.6,g=new Map,y=TB(_),b=kne("tick","end"),m=function(){let O=1;return()=>(O=(1664525*O+1013904223)%wN)/wN}();function _(){x(),b.call("tick",c),f<d&&(y.stop(),b.call("end",c))}function x(O){var A,k,R=l.length;O===void 0&&(O=1);for(var I=0;I<O;++I)for(f+=(v-f)*h,g.forEach(function(M){M(f)}),A=0;A<R;++A)(k=l[A]).fx==null?k.x+=k.vx*=p:(k.x=k.fx,k.vx=0),k.fy==null?k.y+=k.vy*=p:(k.y=k.fy,k.vy=0);return c}function C(){for(var O,A=0,k=l.length;A<k;++A){if((O=l[A]).index=A,O.fx!=null&&(O.x=O.fx),O.fy!=null&&(O.y=O.fy),isNaN(O.x)||isNaN(O.y)){var R=10*Math.sqrt(.5+A),I=A*Nne;O.x=R*Math.cos(I),O.y=R*Math.sin(I)}(isNaN(O.vx)||isNaN(O.vy))&&(O.vx=O.vy=0)}}function w(O){return O.initialize&&O.initialize(l,m),O}return l==null&&(l=[]),C(),c={tick:x,restart:function(){return y.restart(_),c},stop:function(){return y.stop(),c},nodes:function(O){return arguments.length?(l=O,C(),g.forEach(w),c):l},alpha:function(O){return arguments.length?(f=+O,c):f},alphaMin:function(O){return arguments.length?(d=+O,c):d},alphaDecay:function(O){return arguments.length?(h=+O,c):+h},alphaTarget:function(O){return arguments.length?(v=+O,c):v},velocityDecay:function(O){return arguments.length?(p=1-O,c):1-p},randomSource:function(O){return arguments.length?(m=O,g.forEach(w),c):m},force:function(O,A){return arguments.length>1?(A==null?g.delete(O):g.set(O,w(A)),c):g.get(O)},find:function(O,A,k){var R,I,M,N,F,z=0,B=l.length;for(k==null?k=1/0:k*=k,z=0;z<B;++z)(M=(R=O-(N=l[z]).x)*R+(I=A-N.y)*I)<k&&(F=N,k=M);return F},on:function(O,A){return arguments.length>1?(b.on(O,A),c):b.on(O)}}}().velocityDecay(.4).force("charge",KS().strength(O2)).force("centerX",function(l){var c,f,d,h=ta(.1);function v(g){for(var y,b=0,m=c.length;b<m;++b)(y=c[b]).vx+=(d[b]-y.x)*f[b]*g}function p(){if(c){var g,y=c.length;for(f=new Array(y),d=new Array(y),g=0;g<y;++g)f[g]=isNaN(d[g]=+l(c[g],g,c))?0:+h(c[g],g,c)}}return typeof l!="function"&&(l=ta(l==null?0:+l)),v.initialize=function(g){c=g,p()},v.strength=function(g){return arguments.length?(h=typeof g=="function"?g:ta(+g),p(),v):h},v.x=function(g){return arguments.length?(l=typeof g=="function"?g:ta(+g),p(),v):l},v}(0).strength(.03)).force("centerY",function(l){var c,f,d,h=ta(.1);function v(g){for(var y,b=0,m=c.length;b<m;++b)(y=c[b]).vy+=(d[b]-y.y)*f[b]*g}function p(){if(c){var g,y=c.length;for(f=new Array(y),d=new Array(y),g=0;g<y;++g)f[g]=isNaN(d[g]=+l(c[g],g,c))?0:+h(c[g],g,c)}}return typeof l!="function"&&(l=ta(l==null?0:+l)),v.initialize=function(g){c=g,p()},v.strength=function(g){return arguments.length?(h=typeof g=="function"?g:ta(+g),p(),v):h},v.y=function(g){return arguments.length?(l=typeof g=="function"?g:ta(+g),p(),v):l},v}(0).strength(.03)).alpha(1).alphaMin(.05).on("end",function(){i.simulationStopped=!0,i.shouldUpdate=!1,i.shouldReheatNodes=!1,i.shouldCountNodeRels=!1}).stop(),this.simulationStopped=!0,this.shouldUpdate=!0,this.shouldReheatNodes=!1,this.shouldCountNodeRels=!0,this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){var l=s.channels[Cs];if(s.version!==void 0&&l){var c=Object.values(l.adds).length>0,f=Object.values(l.removes).length>0,d=Object.values(l.updates),h=Bg(d);c||f||h?(i.shouldUpdate=!0,i.shouldReheatNodes=!0,i.shouldCountNodeRels=!0):i.shouldReheatNodes=!1}var v=u.channels[Cs];if(u.version!==void 0&&v){var p=Object.values(v.adds).length>0,g=Object.values(v.removes).length>0;(p||g)&&(i.shouldUpdate=!0,i.shouldReheatNodes=!0,i.shouldCountNodeRels=!0)}}))},e=[{key:"setOptions",value:function(t){}},{key:"updateNodes",value:function(t){var n=this;t.forEach(function(i){n.d3Nodes[i.id]===void 0&&(n.d3Nodes[i.id]={id:i.id}),i!=null&&i.pinned?(n.d3Nodes[i.id].fx=i.x,n.d3Nodes[i.id].fy=i.y):(n.d3Nodes[i.id].x=i.x,n.d3Nodes[i.id].y=i.y),n.d3Nodes[i.id].vy=0,n.d3Nodes[i.id].vx=0}),this.shouldUpdate=!0,this.simulation.tick().alpha(.2)}},{key:"update",value:function(){var t,n=this,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||i){var a=this.state,o=a.nodes,s=a.rels,u=o.channels[Cs],l=s.channels[Cs],c=Object.values(u.adds).length>0,f=Object.values(l.adds).length>0,d=Object.values(u.removes).length>0,h=Object.values(l.removes).length>0,v=Object.values(u.updates).length>0;if(c||f||d||h||v){var p=c&&Object.keys(this.d3Nodes).length===0,g=QS(u.removes);Object.keys(g).forEach(function(m){delete n.d3Nodes[m]});var y=QS(u.adds);if(Object.keys(y).forEach(function(m){n.d3Nodes[m]=function(_){for(var x=1;x<arguments.length;x++){var C=arguments[x]!=null?arguments[x]:{};x%2?AN(Object(C),!0).forEach(function(w){Hne(_,w,C[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(C)):AN(Object(C)).forEach(function(w){Object.defineProperty(_,w,Object.getOwnPropertyDescriptor(C,w))})}return _}({},y[m])}),v&&Object.values(u.updates).forEach(function(m){m.pinned===!0?(n.d3Nodes[m.id].fx=n.d3Nodes[m.id].x,n.d3Nodes[m.id].fy=n.d3Nodes[m.id].y):m.pinned===!1&&(n.d3Nodes[m.id].fx=null,n.d3Nodes[m.id].fy=null),m.size!==void 0&&(n.d3Nodes[m.id].size=m.size)}),(f||h)&&(this.d3RelList=x2(QS(s.items)).filter(function(m){return m.from!==m.to}).map(function(m,_){return{source:m.from,target:m.to,index:_}})),p){var b=Object.values(this.d3Nodes);(function(m,_,x){var C=m.filter(function(w){return w.x===void 0&&w.y===void 0});C.forEach(function(w,O){w.x=_.x+x*Math.sin(2*Math.PI*O/C.length),w.y=_.y+x*Math.cos(2*Math.PI*O/C.length)})})(b,this.center,(t=b.length,45*t/(2*Math.PI)))}this.layout(o.items,s.items,p)}o.clearChannel(Cs),s.clearChannel(Cs),this.shouldUpdate=!1,this.simulation.alpha()>this.simulation.alphaMin()&&(this.shouldUpdate=!0,this.simulationStopped&&(this.simulation.restart(),this.simulationStopped=!1))}}},{key:"layout",value:function(t,n,i){var a=this;if(!(0,Vr.isEmpty)(this.d3Nodes)){if(this.simulation.stop(),this.simulation.nodes(Object.values(this.d3Nodes)).force("collide",function(l){var c,f,d,h=1,v=1;function p(){for(var b,m,_,x,C,w,O,A=c.length,k=0;k<v;++k)for(m=CA(c,Bne,Une).visitAfter(g),b=0;b<A;++b)_=c[b],w=f[_.index],O=w*w,x=_.x+_.vx,C=_.y+_.vy,m.visit(R);function R(I,M,N,F,z){var B=I.data,U=I.r,W=w+U;if(!B)return M>x+W||F<x-W||N>C+W||z<C-W;if(B.index>_.index){var Y=x-B.x-B.vx,H=C-B.y-B.vy,J=Y*Y+H*H;J<W*W&&(Y===0&&(J+=(Y=Nl(d))*Y),H===0&&(J+=(H=Nl(d))*H),J=(W-(J=Math.sqrt(J)))/J*h,_.vx+=(Y*=J)*(W=(U*=U)/(O+U)),_.vy+=(H*=J)*W,B.vx-=Y*(W=1-W),B.vy-=H*W)}}}function g(b){if(b.data)return b.r=f[b.data.index];for(var m=b.r=0;m<4;++m)b[m]&&b[m].r>b.r&&(b.r=b[m].r)}function y(){if(c){var b,m,_=c.length;for(f=new Array(_),b=0;b<_;++b)m=c[b],f[m.index]=+l(m,b,c)}}return typeof l!="function"&&(l=ta(l==null?1:+l)),p.initialize=function(b,m){c=b,d=m,y()},p.iterations=function(b){return arguments.length?(v=+b,p):v},p.strength=function(b){return arguments.length?(h=+b,p):h},p.radius=function(b){return arguments.length?(l=typeof b=="function"?b:ta(+b),y(),p):l},p}().radius($ne)),this.shouldCountNodeRels&&(this.nodeRelCount=this.countNodeRels()),this.simulation.force("link",function(l){var c,f,d,h,v,p,g=zne,y=function(O){return 1/Math.min(h[O.source.index],h[O.target.index])},b=ta(30),m=1;function _(O){for(var A=0,k=l.length;A<m;++A)for(var R,I,M,N,F,z,B,U=0;U<k;++U)I=(R=l[U]).source,N=(M=R.target).x+M.vx-I.x-I.vx||Nl(p),F=M.y+M.vy-I.y-I.vy||Nl(p),N*=z=((z=Math.sqrt(N*N+F*F))-f[U])/z*O*c[U],F*=z,M.vx-=N*(B=v[U]),M.vy-=F*B,I.vx+=N*(B=1-B),I.vy+=F*B}function x(){if(d){var O,A,k=d.length,R=l.length,I=new Map(d.map((M,N)=>[g(M,N,d),M]));for(O=0,h=new Array(k);O<R;++O)(A=l[O]).index=O,typeof A.source!="object"&&(A.source=ON(I,A.source)),typeof A.target!="object"&&(A.target=ON(I,A.target)),h[A.source.index]=(h[A.source.index]||0)+1,h[A.target.index]=(h[A.target.index]||0)+1;for(O=0,v=new Array(R);O<R;++O)A=l[O],v[O]=h[A.source.index]/(h[A.source.index]+h[A.target.index]);c=new Array(R),C(),f=new Array(R),w()}}function C(){if(d)for(var O=0,A=l.length;O<A;++O)c[O]=+y(l[O],O,l)}function w(){if(d)for(var O=0,A=l.length;O<A;++O)f[O]=+b(l[O],O,l)}return l==null&&(l=[]),_.initialize=function(O,A){d=O,p=A,x()},_.links=function(O){return arguments.length?(l=O,x(),_):l},_.id=function(O){return arguments.length?(g=O,_):g},_.iterations=function(O){return arguments.length?(m=+O,_):m},_.strength=function(O){return arguments.length?(y=typeof O=="function"?O:ta(+O),C(),_):y},_.distance=function(O){return arguments.length?(b=typeof O=="function"?O:ta(+O),w(),_):b},_}(this.d3RelList).id(function(l){return l.id}).distance(Vne).strength(function(l){return function(c,f){if(!CN(c.source)||!CN(c.target))return 1;var d=1.2/(Math.min(f[c.source.index],f[c.target.index])+(Math.max(f[c.source.index],f[c.target.index])-1)/100);return Math.max(Math.min(d,1),.06)}(l,a.nodeRelCount)})),i){var o=0;this.simulation.force("charge",KS().strength(Wne));for(var s=performance.now();performance.now()-s<300&&o<200;)this.simulation.alpha(1),this.simulation.tick(1),o+=1;this.simulation.force("charge",KS().strength(O2));for(var u=performance.now();performance.now()-u<100&&this.simulation.alpha()>=this.simulation.alphaMin();)this.simulation.tick(1);return this.computing=!1,void this.simulation.restart()}this.shouldReheatNodes?this.simulation.alpha(1).restart():this.simulation.restart()}}},{key:"getNodePositions",value:function(t){var n,i=[],a=function(l,c){var f=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(!f){if(Array.isArray(l)||(f=function(y,b){if(y){if(typeof y=="string")return TN(y,b);var m={}.toString.call(y).slice(8,-1);return m==="Object"&&y.constructor&&(m=y.constructor.name),m==="Map"||m==="Set"?Array.from(y):m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m)?TN(y,b):void 0}}(l))||c){f&&(l=f);var d=0,h=function(){};return{s:h,n:function(){return d>=l.length?{done:!0}:{done:!1,value:l[d++]}},e:function(y){throw y},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v,p=!0,g=!1;return{s:function(){f=f.call(l)},n:function(){var y=f.next();return p=y.done,y},e:function(y){g=!0,v=y},f:function(){try{p||f.return==null||f.return()}finally{if(g)throw v}}}}(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=this.d3Nodes[o.id];if(s!==void 0){var u={id:s.id,x:s.x,y:s.y};i.push(u)}}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return this.computing}},{key:"terminateUpdate",value:function(){this.simulation.alpha(this.simulation.alphaMin()).stop(),this.simulationStopped=!0}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){t()}),this.state.nodes.removeChannel(Cs),this.state.rels.removeChannel(Cs),this.simulation.stop()}},{key:"setAlpha",value:function(t){this.simulation.alpha(t),this.simulation.restart(),this.simulation.shouldUpdate=!0}},{key:"countNodeRels",value:function(){for(var t=new Map(Object.entries(this.d3Nodes)),n=Object.values(this.d3RelList),i=new Array(t.length),a=0;a<n.length;++a){var o=n[a];o.index=a,bf(o.source)!=="object"&&(o.source=t.get(o.source)),bf(o.target)!=="object"&&(o.target=t.get(o.target)),i[o.source.index]=(i[o.source.index]||0)+1,i[o.target.index]=(i[o.target.index]||0)+1}return i}}],e&&Yne(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),Kne=On(5880),jB=On.n(Kne),Dr=jB().getLogger("NVL");const JS=aee;var Zne={CoseBilkentLayout:{standard:"createCoseBilkentLayoutWorker",fallback:"coseBilkentLayoutFallbackWorker"},HierarchicalLayout:{standard:"createHierarchicalLayoutWorker",fallback:"hierarchicalLayoutFallbackWorker"}},FB=function(r){var e,t=arguments.length>1&&arguments[1]!==void 0&&arguments[1],n=Zne[r],i=n.standard,a=n.fallback;if(t)e=JS[a];else try{e=JS[i]()}catch(o){console.warn("Failed to initialise ".concat(r,' worker: "').concat(JSON.stringify(o),'". Falling back to syncronous code.')),e=JS[a]}if(e===void 0)throw"".concat(r," code could not be initialized.");return e.port.start(),e};function Wp(r){return Wp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wp(r)}function PN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function eC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?PN(Object(t),!0).forEach(function(n){Fo(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):PN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function tC(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return RN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?RN(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function RN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Qne(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,BB(n.key),n)}}function Fo(r,e,t){return(e=BB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function BB(r){var e=function(t){if(Wp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Wp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Wp(e)=="symbol"?e:e+""}var kN=function(r,e,t){return r+(e-r)*function(n){return n*n*(3-2*n)}(t)},UB=function(){return r=function t(n){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),Fo(this,"positions",void 0),Fo(this,"oldPositions",void 0),Fo(this,"startTime",void 0),Fo(this,"t",void 0),Fo(this,"currentT",void 0),Fo(this,"state",void 0),Fo(this,"shouldUpdateAnimator",void 0),Fo(this,"parents",void 0),Fo(this,"animationCompleteCallback",void 0),Fo(this,"shouldUpdate",void 0);var i=n.state;this.positions={},this.oldPositions={},this.startTime=0,this.t=1,this.currentT=1,this.state=i,this.shouldUpdateAnimator=!1,this.parents={},this.animationCompleteCallback=n.animationCompleteCallback},e=[{key:"getPositionMapFromState",value:function(){var t,n=this.state.nodes,i=n.idToPosition,a={},o=tC(n.items);try{for(o.s();!(t=o.n()).done;){var s=t.value,u=i[s.id];u!==void 0&&(a[s.id]={id:s.id,x:u.x,y:u.y})}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"updatePositionsFromState",value:function(){this.positions=eC({},this.getPositionMapFromState())}},{key:"updateOldPositionFromState",value:function(){this.oldPositions=eC({},this.getPositionMapFromState())}},{key:"startAnimation",value:function(){this.updateOldPositionFromState(),this.startTime=Date.now(),this.t=0,this.currentT=0,this.shouldUpdateAnimator=!0}},{key:"update",value:function(){var t=this.shouldUpdateAnimator,n=(Date.now()-this.startTime)/400;this.t=Math.min(n,1),this.currentT<1?this.shouldUpdateAnimator=!0:(this.shouldUpdateAnimator=!1,t&&!this.shouldUpdateAnimator&&this.animationCompleteCallback!==void 0&&this.animationCompleteCallback(),this.shouldUpdateAnimator||this.updatePositionsFromState())}},{key:"updateNodes",value:function(t){var n,i=tC(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.x!==void 0&&a.y!==void 0&&(this.positions[a.id]={id:a.id,x:a.x,y:a.y}),this.shouldUpdate=!0}}catch(o){i.e(o)}finally{i.f()}}},{key:"getNodePositions",value:function(t){var n,i=this.parents,a=this.state.nodes.idToPosition,o=function(m,_){for(var x={x:0,y:0},C=m.length,w=0,O=0;O<C;O++){var A=_[m[O].id];A===void 0||isNaN(A.x)||isNaN(A.y)||A.x===0||A.y===0||(x.x+=A.x,x.y+=A.y,w+=1)}return w>0?[x.x/w,x.y/w]:[0,0]}(t,a),s={x:o[0],y:o[1]},u=[],l=tC(t);try{for(l.s();!(n=l.n()).done;){var c=n.value,f=this.positions[c.id],d=a[c.id],h={id:c.id};if(f!==void 0){for(var v,p,g,y=c.id,b=(v=this.oldPositions[c.id])!==null&&v!==void 0?v:eC({},s);b===void 0&&i[y]!==void 0;)y=i[y],b=this.oldPositions[y];b.x=(p=b.x)!==null&&p!==void 0?p:s.x,b.y=(g=b.y)!==null&&g!==void 0?g:s.y,h.x=kN(b.x,f.x,this.t),h.y=kN(b.y,f.y,this.t)}else d!==void 0&&(h.x=d.x||s.x,h.y=d.y||s.y);u.push(h)}}catch(m){l.e(m)}finally{l.f()}return this.currentT=this.t,u}}],e&&Qne(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function Th(r){return Th=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Th(r)}function IN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Jne(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?IN(Object(t),!0).forEach(function(n){uf(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):IN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function eie(r,e){return function(t){if(Array.isArray(t))return t}(r)||function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var a,o,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(a=s.call(i)).done)&&(l.push(a.value),l.length!==n);c=!0);}catch(d){f=!0,o=d}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw o}}return l}}(r,e)||zB(r,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function DN(r){return function(e){if(Array.isArray(e))return S2(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||zB(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zB(r,e){if(r){if(typeof r=="string")return S2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S2(r,e):void 0}}function S2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function tie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,GB(n.key),n)}}function qB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(qB=function(){return!!r})()}function C2(){return C2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=function(a,o){for(;!{}.hasOwnProperty.call(a,o)&&(a=Ah(a))!==null;);return a}(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},C2.apply(null,arguments)}function Ah(r){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ah(r)}function T2(r,e){return T2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},T2(r,e)}function uf(r,e,t){return(e=GB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function GB(r){var e=function(t){if(Th(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Th(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Th(e)=="symbol"?e:e+""}var MN=function(r){return r!==void 0?ia(r):r},rie=function(){function r(n){var i;return function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}(this,r),uf(i=function(a,o,s){return o=Ah(o),function(u,l){if(l&&(Th(l)=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}(u)}(a,qB()?Reflect.construct(o,s||[],Ah(a).constructor):o.apply(a,s))}(this,r,[n]),"stateDisposers",void 0),uf(i,"cytoCompleteCallback",void 0),uf(i,"computing",void 0),uf(i,"pendingLayoutData",void 0),uf(i,"worker",void 0),uf(i,"workersDisabled",void 0),i.stateDisposers=[],i.stateDisposers.push(i.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)})),i.cytoCompleteCallback=n.cytoCompleteCallback,i.shouldUpdate=!0,i.computing=!1,i.workersDisabled=n.state.disableWebWorkers,i.setOptions(),i.worker=FB("CoseBilkentLayout",i.workersDisabled),i.pendingLayoutData=null,i}return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&T2(n,i)}(r,UB),e=r,t=[{key:"setOptions",value:function(){this.shouldUpdate=!0}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(this.shouldUpdate||n){var o=MN(i),s=MN(a);(o.length>0||s.length>0)&&(this.updatePositionsFromState(),this.layout(o,s))}(function(u,l,c){var f=C2(Ah(u.prototype),"update",c);return typeof f=="function"?function(d){return f.apply(c,d)}:f})(r,0,this)([]),this.shouldUpdate=!1}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(n,i){var a=this;if(this.worker){if(n.length){var o=n.map(function(l){return{group:"nodes",data:{id:l.id}}}),s=i.map(function(l){return{group:"edges",data:{id:"rel".concat(l.id),source:l.from,target:l.to}}}),u={elements:[].concat(DN(o),DN(s)),spacingFactor:n.reduce(function(l,c){var f;return l+((f=c.size)!==null&&f!==void 0?f:zn)},0)/n.length*4.5/50*Zr()};this.computing?this.pendingLayoutData=u:(this.computing=!0,this.worker.port.onmessage=function(l){var c=l.data.positions;if(a.computing){for(var f=0,d=Object.entries(c);f<d.length;f++){var h=eie(d[f],2),v=h[0],p=h[1];a.positions[v]=Jne({id:v},p)}a.cytoCompleteCallback(),a.startAnimation()}a.computing=!1,a.shouldUpdate=!0},setTimeout(function(){a.computing&&a.worker.port.postMessage(u)},0))}}else Dr.info("Cose-Bilkent layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){this.computing=!1}},{key:"destroy",value:function(){var n;this.stateDisposers.forEach(function(i){i()}),(n=this.worker)===null||n===void 0||n.port.close()}}],t&&tie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),LN=typeof Float32Array<"u"?Float32Array:Array;function g0(){var r=new LN(16);return LN!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var A2=function(r,e,t,n,i,a,o){var s=1/(e-t),u=1/(n-i),l=1/(a-o);return r[0]=-2*s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*u,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(e+t)*s,r[13]=(i+n)*u,r[14]=(o+a)*l,r[15]=1,r},nie=On(9792),NN=On.n(nie);function Hp(r){return Hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hp(r)}function iie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,VB(n.key),n)}}function gp(r,e,t){return(e=VB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function VB(r){var e=function(t){if(Hp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Hp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Hp(e)=="symbol"?e:e+""}var jl=function(){return r=function t(n,i,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};(function(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")})(this,t),gp(this,"shaderProgram",void 0),gp(this,"gl",void 0),gp(this,"curTexture",void 0),gp(this,"attributeInfo",void 0),gp(this,"uniformInfo",void 0);var s=n.createShader(n.FRAGMENT_SHADER);if(!n.isShader(s))throw new Error("Could not create shader object");var u=NN()(a,o);n.shaderSource(s,u),n.compileShader(s),(0,Vr.isNil)(n.getShaderParameter(s,n.COMPILE_STATUS))&&Dr.info(n.getShaderInfoLog(s));var l=n.createShader(n.VERTEX_SHADER);if(!n.isShader(l))throw new Error("Could not create shader object");var c=NN()(i,o);if(n.shaderSource(l,c),n.compileShader(l),(0,Vr.isNil)(n.getShaderParameter(l,n.COMPILE_STATUS))&&Dr.info(n.getShaderInfoLog(l)),this.shaderProgram=n.createProgram(),n.attachShader(this.shaderProgram,s),n.attachShader(this.shaderProgram,l),n.linkProgram(this.shaderProgram),(0,Vr.isNil)(n.getProgramParameter(this.shaderProgram,n.LINK_STATUS)))throw new Error("Could not initialise shader");this.gl=n,this.curTexture=0,this.scanUniforms(),this.scanAttributes()},e=[{key:"setUniform",value:function(t,n){var i=this.gl,a=this.uniformInfo[t];if(a===void 0)throw new Error("Shader.setUniform - Uniform ".concat(t," not found in shader"));switch(a.type){case i.INT:i.uniform1i(a.location,n);break;case i.INT_VEC2:i.uniform2iv(a.location,n);break;case i.INT_VEC3:i.uniform3iv(a.location,n);break;case i.INT_VEC4:i.uniform4iv(a.location,n);break;case i.SAMPLER_2D:i.activeTexture(i.TEXTURE0+a.texture),i.bindTexture(i.TEXTURE_2D,n),i.uniform1i(a.location,a.texture);break;case i.SAMPLER_CUBE:case i.FLOAT:i.uniform1f(a.location,n);break;case i.FLOAT_VEC2:i.uniform2fv(a.location,n);break;case i.FLOAT_VEC3:i.uniform3fv(a.location,n);break;case i.FLOAT_VEC4:i.uniform4fv(a.location,n);break;case i.FLOAT_MAT2:i.uniformMatrix2fv(a.location,!1,n);break;case i.FLOAT_MAT3:i.uniformMatrix3fv(a.location,!1,n);break;case i.FLOAT_MAT4:i.uniformMatrix4fv(a.location,!1,n)}}},{key:"setAttributePointer",value:function(t,n,i,a){var o=this.gl,s=this.attributeInfo[t],u=i*Float32Array.BYTES_PER_ELEMENT,l=a*Float32Array.BYTES_PER_ELEMENT;o.enableVertexAttribArray(s.position),o.vertexAttribPointer(s.position,n,o.FLOAT,!1,l,u)}},{key:"setAttributePointerFloat",value:function(t,n,i,a){var o=this.gl,s=this.attributeInfo[t];o.enableVertexAttribArray(s.position),o.vertexAttribPointer(s.position,n,o.FLOAT,!1,a,i)}},{key:"setAttributePointerUShort",value:function(t,n,i,a){var o=this.gl,s=this.attributeInfo[t];o.enableVertexAttribArray(s.position),o.vertexAttribPointer(s.position,n,o.UNSIGNED_SHORT,!1,a,i)}},{key:"setAttributePointerByteNorm",value:function(t,n,i,a){var o=this.gl,s=this.attributeInfo[t];o.enableVertexAttribArray(s.position),o.vertexAttribPointer(s.position,n,o.UNSIGNED_BYTE,!0,a,i)}},{key:"setAttributePointerByte",value:function(t,n,i,a){var o=this.gl,s=this.attributeInfo[t];o.enableVertexAttribArray(s.position),o.vertexAttribPointer(s.position,n,o.UNSIGNED_BYTE,!1,a,i)}},{key:"use",value:function(){this.gl.useProgram(this.shaderProgram)}},{key:"remove",value:function(){this.gl.deleteProgram(this.shaderProgram)}},{key:"scanAttributes",value:function(){var t=this.gl;this.attributeInfo={};for(var n,i,a=t.getProgramParameter(this.shaderProgram,t.ACTIVE_ATTRIBUTES),o=0;o<a;o++)n=t.getActiveAttrib(this.shaderProgram,o),i=t.getAttribLocation(this.shaderProgram,n.name),this.attributeInfo[n.name]={type:n.type,position:i}}},{key:"scanUniforms",value:function(){var t=this.gl;this.uniformInfo={};for(var n,i=t.getProgramParameter(this.shaderProgram,t.ACTIVE_UNIFORMS),a=0;a<i;a++){n=t.getActiveUniform(this.shaderProgram,a);var o=t.getUniformLocation(this.shaderProgram,n.name),s={type:n.type,location:o};n.type===t.SAMPLER_2D&&(s.texture=this.curTexture,this.curTexture+=1),this.uniformInfo[n.name]=s}}}],e&&iie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function Ph(r){return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(r)}function aie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,oie(n.key),n)}}function oie(r){var e=function(t){if(Ph(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Ph(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Ph(e)=="symbol"?e:e+""}function P2(r){var e=typeof Map=="function"?new Map:void 0;return P2=function(t){if(t===null||!function(i){try{return Function.toString.call(i).indexOf("[native code]")!==-1}catch{return typeof i=="function"}}(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(i,a,o){if(PA())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,a);var u=new(i.bind.apply(i,s));return o&&Ug(u,o.prototype),u}(t,arguments,zg(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ug(n,t)},P2(r)}function PA(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PA=function(){return!!r})()}function Ug(r,e){return Ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Ug(r,e)}function zg(r){return zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},zg(r)}var $B=function(){function r(){return function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}(this,r),function(n,i,a){return i=zg(i),function(o,s){if(s&&(Ph(s)=="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}(o)}(n,PA()?Reflect.construct(i,a||[],zg(n).constructor):i.apply(n,a))}(this,r,arguments)}return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&Ug(n,i)}(r,P2(Error)),e=r,(t=[{key:"toString",value:function(){return this.message}}])&&aie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const eb=`uniform mat4 u_projection;

attribute vec2 a_position;
//attribute float a_index;

//varying highp float index;

void main() {
//  index = a_index;
  gl_Position = u_projection * vec4(a_position, 0.0, 1.0);
}`;function Yp(r){return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yp(r)}function sie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,uie(n.key),n)}}function uie(r){var e=function(t){if(Yp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Yp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Yp(e)=="symbol"?e:e+""}var jN=function(){return r=function t(n,i){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),this.graph=this.constructGraphObjects(n,i),this.subGraphs=[],this.sunMap={}},e=[{key:"constructGraphObjects",value:function(t,n){var i=new Array(t.nodes.length),a=new Array(t.rels.length),o={},s=[];return t.nodes.forEach(function(u,l){i[l]=[],a[l]=[],s.push(u)}),t.rels.forEach(function(u){var l=n[u.from],c=n[u.to];l!==void 0&&c!==void 0&&(i[l].push(c),i[c].push(l),a[l].push(u.id),a[c].push(u.id),o[u.id]=u)}),this.relIdMap=a,{nodes:s,relationships:i,idToRel:o}}},{key:"coarsenTo",value:function(t){for(var n=this.graph,i=n.nodes.length,a=0;n.nodes.length>t&&n.relationships.some(function(s){return s.length>0});){var o=this.coarsen(n,a===0);if(a===0&&(this.nodeSortMap=o.nodeSortMap),this.subGraphs.push(o.sortedInput),(n=o.output).relationships.length===0||n.relationships.every(function(s){return s.length===0})||i===n.nodes.length)break;i=n.nodes.length,a+=1}return this.subGraphs.push(n),n}},{key:"coarsenBy",value:function(t){for(var n=t,i=this.graph,a=i.nodes.length,o=n;n>0;){var s=this.coarsen(i,n===o);if(this.subGraphs.push(s.sortedInput),(i=s.output).relationships.length===0||i.relationships.every(function(u){return u.length===0})||a===i.nodes.length)break;a=i.nodes.length,n-=1}return this.subGraphs.push(i),i}},{key:"coarsen",value:function(t,n){var i=this,a=t.nodes,o=t.relationships,s=a.map(function(x,C){return C}),u={},l={};a.forEach(function(x,C){u[C]=x,l[x.id]=C});for(var c=o.map(function(x){return x.slice()}),f={suns:{},planets:{},moons:{}},d=[],h=[],v=function(){var x=s[0];s.splice(s.indexOf(x),1),o[x].forEach(function(O){var A=s.indexOf(O);A>=0&&s.splice(A,1);var k=-1,R=c[O];R.forEach(function(I,M){var N=s.indexOf(I);N>=0?s.splice(N,1):I===x&&(k=M)}),R.splice(k,1)});var C={id:x};if(n)C.originalId=u[x].id;else{var w=u[x];C.finestIndex=w.finestIndex,C.originalId=w.originalId}d.push(C),f.suns[x]=C};s.length>0;)v();d.forEach(function(x,C){h[C]=[]}),d.forEach(function(x,C){var w={},O=[];o[x.id].forEach(function(A){if(A!==x.id&&!w[A]){var k={id:A,parent:x,sunId:C,moons:[]},R=u[A];k.size=function(){return k.moons.length+1},k.weight=R.weight||1,k.children=function(){return k.moons},n?k.originalId=R.id:(k.finestIndex=R.finestIndex,k.originalId=R.originalId),O.push(k),w[A]=!0}}),O.forEach(function(A){f.planets[A.id]=A}),x.planets=O,x.children=function(){return x.planets},x.weight=x.planets.reduce(function(A,k){return A+(k.weight||1)},0)+(u[x.id].weight||1),x.size=function(){return x.planets.reduce(function(A,k){return A+k.size()},0)+1}});var p=a.filter(function(x,C){return!d.find(function(w){return w.id===C})&&!f.planets[C]});p.forEach(function(x){for(var C=l[x.id],w=c[C],O=null,A=-1,k=0;k<w.length;k++){var R=w[k];if(R!==C&&(O=f.planets[R])){A=k;break}}if(w.splice(A,1),O){var I={id:C,size:function(){return 0}};I.weight=u[C].weight||1,I.parent=O,I.sunId=O.sunId,n?I.originalId=x.id:(I.finestIndex=x.finestIndex,I.originalId=x.originalId),f.moons[C]=I,O.moons.push(I),O.weight+=I.weight,O.parent.weight+=I.weight;var M=c[O.id];M.splice(M.indexOf(C),1)}}),c.forEach(function(x,C){if(!f.suns[C]){var w=f.planets[C]||f.moons[C];c[C].forEach(function(O){var A=f.planets[O];if(A||(A=f.moons[O]),w.sunId!==A.sunId){var k=h[w.sunId];k.includes(A.sunId)||k.push(A.sunId)}})}});var g=[],y=0,b={};d.forEach(function(x,C){var w=a[x.id];b[x.id]=y,x.previousIndex=C,x.id=y,y+=1,n&&(w.finestIndex=x.id,x.finestIndex=x.id),g.push(w),x.planets.forEach(function(O){var A=a[O.id];b[O.id]=y,O.id=y,y+=1,O.sunId=x.id,n&&(A.finestIndex=O.id),i.sunMap[O.originalId]=x.originalId,g.push(A),O.moons.forEach(function(k){var R=a[k.id];b[k.id]=y,k.id=y,y+=1,k.sunId=x.id,n&&(R.finestIndex=k.id),i.sunMap[k.originalId]=x.originalId,g.push(R)})})});var m=[],_=[];return o.forEach(function(x,C){var w=b[C];m[w]=x.map(function(O){return b[O]}),n&&(_[w]=x.map(function(O,A){return i.relIdMap[C][A]}))}),_&&_.length>0&&(this.relIdMap=_),{output:{nodes:d,relationships:h},sortedInput:{nodes:g,relationships:m},nodeSortMap:b}}}],e&&sie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),FN=function(r,e,t){for(var n=2*Math.PI/t,i=[],a=0;a<t;a++){var o=n*a;i.push({x:r.x+e*Math.cos(o),y:r.y+e*Math.sin(o)})}return i};function Xp(r){return Xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xp(r)}function yp(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return BN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?BN(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function BN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function lie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,WB(n.key),n)}}function Ft(r,e,t){return(e=WB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function WB(r){var e=function(t){if(Xp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Xp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Xp(e)=="symbol"?e:e+""}var Ei="PhysLayout",mp=new Float32Array(4),vo=256,rC=function(r){for(var e={},t={},n=0;n<r.length;n++)e[r[n].id]=n,t[n]=r[n].id;return{nodeIdToIndex:e,nodeIndexToId:t}},cie=function(){return r=function t(n){var i=this;(function(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function")})(this,t),Ft(this,"physVbo",void 0),Ft(this,"physSmallVbo",void 0),Ft(this,"physProjection",void 0),Ft(this,"physSmallProjection",void 0),Ft(this,"gl",void 0),Ft(this,"useReadpixelWorkaround",void 0),Ft(this,"averageNodeSize",void 0),Ft(this,"shouldUpdate",void 0),Ft(this,"iterationCount",void 0),Ft(this,"lastSpeedValues",void 0),Ft(this,"rollingAvgGraphSpeed",void 0),Ft(this,"nodeVariation",void 0),Ft(this,"nodeCenterPoint",void 0),Ft(this,"peakIterationMultiplier",void 0),Ft(this,"stateDisposers",void 0),Ft(this,"state",void 0),Ft(this,"dpr",void 0),Ft(this,"intelWorkaround",void 0),Ft(this,"simulationStopVelocitySquared",void 0),Ft(this,"gravity",void 0),Ft(this,"force",void 0),Ft(this,"nodeIdToIndex",void 0),Ft(this,"nodeIndexToId",void 0),Ft(this,"flatRelationshipKeys",void 0),Ft(this,"numNodes",void 0),Ft(this,"solarMerger",void 0),Ft(this,"subGraphs",void 0),Ft(this,"nodeSortMap",void 0),Ft(this,"firstUpdate",void 0),Ft(this,"curPhysData",void 0),Ft(this,"apprxRepForceShader",void 0),Ft(this,"levelsClusterTexture",void 0),Ft(this,"levelsFinestIndexTexture",void 0),Ft(this,"initalLevelTexture",void 0),Ft(this,"levelsData",void 0),Ft(this,"collisionDetectionMultiplier",void 0),Ft(this,"physShader",void 0),Ft(this,"physData",void 0),Ft(this,"workaroundData",void 0),Ft(this,"pinData",void 0),Ft(this,"updateData",void 0),Ft(this,"updateShader",void 0),Ft(this,"workaroundShader",void 0),Ft(this,"physPositions",void 0),Ft(this,"springTexture",void 0),Ft(this,"sizeTexture",void 0),Ft(this,"offsetTexture",void 0),Ft(this,"pinTexture",void 0),Ft(this,"addedNodes",void 0),Ft(this,"updateTexture",void 0),Ft(this,"enableVerlet",void 0);var a=n.state,o=n.webGLContext;if(Dr.info("layout - webGLContext",!!o),n.webGLContext===void 0)throw new Error("PhysLayout missing options: webGLContext - webgl context");if(n.state===void 0)throw new Error("PhysLayout missing options: state - state object");var s=o;this.checkCompatibility(s),this.printGlStats(s),this.physVbo=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.physVbo);var u=new Float32Array([0,0,Nt,0,0,Nt,Nt,Nt]);s.bufferData(s.ARRAY_BUFFER,u,s.STATIC_DRAW),this.physSmallVbo=s.createBuffer(),s.bindBuffer(s.ARRAY_BUFFER,this.physSmallVbo);var l=new Float32Array([0,0,vo,0,0,vo,vo,vo]);s.bufferData(s.ARRAY_BUFFER,l,s.STATIC_DRAW),this.physProjection=g0(),A2(this.physProjection,0,Nt,Nt,0,0,1e6),this.physSmallProjection=g0(),A2(this.physSmallProjection,0,vo,vo,0,0,1e6),s.disable(s.DEPTH_TEST),this.gl=s,this.useReadpixelWorkaround&&this.setupReadpixelWorkaround(),this.setupUpdates(),this.averageNodeSize=zn,this.shouldUpdate=!0,this.iterationCount=0,this.lastSpeedValues=[],this.rollingAvgGraphSpeed=0,this.nodeVariation=0,this.nodeCenterPoint=[0,0],this.peakIterationMultiplier=160,this.setOptions(n,!0),this.definePhysicsArrays(),this.flatRelationshipKeys=new Set;var c=a.nodes,f=a.rels;c.addChannel(Ei),f.addChannel(Ei),this.stateDisposers=[],this.stateDisposers.push(a.reaction(function(){return a.graphUpdates},function(){var d=c.channels[Ei];if(c.version!==void 0&&d){var h=Object.values(d.adds).length>0,v=Object.values(d.removes).length>0,p=Object.values(d.updates),g=Bg(p);(h||v||g)&&(i.shouldUpdate=!0,i.checkForUpdates())}var y=f.channels[Ei];if(f.version!==void 0&&y){var b=Object.values(y.adds).length>0,m=Object.values(y.removes).length>0;(b||m)&&(i.shouldUpdate=!0,i.checkForUpdates())}})),this.setData({nodes:c.items,rels:f.items}),this.state=a,this.dpr=window.devicePixelRatio||1},e=[{key:"setOptions",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(t){var i=t.intelWorkaround,a=t.simulationStopVelocity,o=t.gravity,s=t.enableVerlet,u=s!==void 0&&s;n&&(this.intelWorkaround=i,this.enableVerlet=u);var l=this.enableVerlet?.25:a??100;this.simulationStopVelocitySquared=l*l,this.gravity=o??100,this.force=0}}},{key:"setData",value:function(t){var n=rC(t.nodes),i=n.nodeIdToIndex,a=n.nodeIndexToId;return this.nodeIdToIndex=i,this.nodeIndexToId=a,this.numNodes=t.nodes.length,this.flatRelationshipKeys=Jm(t.rels),this.solarMerger=new jN(t,i),this.solarMerger.coarsenTo(1),this.subGraphs=this.solarMerger.subGraphs,this.nodeSortMap=this.solarMerger.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]),this.setupPhysics(),this.firstUpdate=!0,this.curPhysData=0,this.shouldUpdate=!0,this.iterationCount=0,this.subGraphs[0]}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.gl;if(this.checkForUpdates(t),!this.shouldUpdate)return n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(0).frameBuffer),n.readPixels(0,0,Nt,Nt,n.RGBA,n.FLOAT,this.physPositions),!1;n.disable(n.BLEND);for(var i=this.nodeVariation/(this.numNodes||1)>.3,a=this.getScaleNumber(this.iterationCount),o=this.subGraphs?this.subGraphs.length:0,s=this.getPhysData(0).texture,u=o-1;u>0;u--){var l=this.subGraphs[u].nodes.length,c=u===o-1;this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_physData",s),this.apprxRepForceShader.setUniform("u_clusterData",this.levelsClusterTexture[u]),this.apprxRepForceShader.setUniform("u_finestIndexes",this.levelsFinestIndexTexture[u]),this.apprxRepForceShader.setUniform("u_prevForce",c?this.initalLevelTexture:this.levelsData[u+1].texture),this.apprxRepForceShader.setUniform("u_numNodes",l),this.apprxRepForceShader.setUniform("u_iterationMultiplier",a),this.apprxRepForceShader.setUniform("u_baseLength",this.getBaseLength(l)),this.apprxRepForceShader.setUniform("u_isTopLevel",c?1:0),n.bindBuffer(n.ARRAY_BUFFER,this.physSmallVbo),this.apprxRepForceShader.setAttributePointer("a_position",2,0,2),n.bindFramebuffer(n.FRAMEBUFFER,this.levelsData[u].frameBuffer),n.viewport(0,0,vo,vo),n.drawArrays(n.TRIANGLE_STRIP,0,4)}if(this.collisionDetectionMultiplier=0,this.collisionDetectionMultiplier=i?Math.min(this.iterationCount/Math.min(this.numNodes,300),1):1,this.force=o<=1?this.initalLevelTexture:this.levelsData[1].texture,this.physShader.use(),this.physShader.setUniform("u_prevForce",o<=1?this.initalLevelTexture:this.levelsData[1].texture),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_physData",s),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_iterationMultiplier",a),this.physShader.setUniform("u_curIteration",this.iterationCount),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_clusterData",this.levelsClusterTexture[0]),this.physShader.setUniform("u_collisionMultiplier",this.collisionDetectionMultiplier),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.firstUpdate=!1,n.bindBuffer(n.ARRAY_BUFFER,this.physVbo),this.physShader.setAttributePointer("a_position",2,0,2),n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(1).frameBuffer),n.viewport(0,0,Nt,Nt),n.drawArrays(n.TRIANGLE_STRIP,0,4),this.useReadpixelWorkaround?this.doReadpixelWorkaround():(n.bindFramebuffer(n.FRAMEBUFFER,this.getPhysData(0).frameBuffer),n.readPixels(0,0,Nt,Nt,n.RGBA,n.FLOAT,this.physPositions)),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.iterationCount+=1,this.numNodes<2)this.shouldUpdate=!1,this.iterationCount=0;else if(this.iterationCount%5==0){var f=this.iterationCount<300,d=f?this.getMaxSpeedSquared():this.getMedianSpeedSquared(this.addedNodes);this.lastSpeedValues.push(d),this.rollingAvgGraphSpeed=this.lastSpeedValues.reduce(function(p,g){return p+g},0)/this.lastSpeedValues.length;var h=f&&d>=this.rollingAvgGraphSpeed,v=this.simulationStopVelocitySquared&&this.rollingAvgGraphSpeed<this.simulationStopVelocitySquared;this.lastSpeedValues.length>20&&this.lastSpeedValues.shift(),!h&&v===!0&&this.iterationCount>2&&this.terminateUpdate()}return this.shouldUpdate}},{key:"terminateUpdate",value:function(){Dr.info("Cooling down after ".concat(this.iterationCount," iterations at graph speed of ").concat(Math.sqrt(this.rollingAvgGraphSpeed))),this.shouldUpdate=!1,this.iterationCount=0,this.rollingAvgGraphSpeed=0,this.lastSpeedValues=[],this.addedNodes=null,this.nodeVariation=0}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"getNodePositions",value:function(t){var n=[];if(this.useReadpixelWorkaround){var i,a=yp(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=this.nodeIdToIndex[o.id],u=o.id,l=void 0,c=void 0;s!==void 0&&(l=this.workaroundData[0].dataFloat[s],c=this.workaroundData[1].dataFloat[s]),n.push({id:u,x:l,y:c})}}catch(b){a.e(b)}finally{a.f()}}else{var f,d=yp(t);try{for(d.s();!(f=d.n()).done;){var h=f.value,v=this.nodeIdToIndex[h.id],p=h.id,g=void 0,y=void 0;v!==void 0&&(g=this.physPositions[4*v+0],y=this.physPositions[4*v+1]),n.push({id:p,x:g,y})}}catch(b){d.e(b)}finally{d.f()}}return n}},{key:"reheat",value:function(t){this.setupSize(this.subGraphs[0]),this.shouldUpdate=!0,this.iterationCount=0,this.nodeVariation=t.nodes.length}},{key:"updateNodes",value:function(t){var n=this.gl,i=new Set;n.bindTexture(n.TEXTURE_2D,this.getPhysData().texture);var a,o=yp(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=this.nodeIdToIndex[s.id];if(s.x!==void 0&&s.y!==void 0){mp[0]=s.x,mp[1]=s.y,mp[2]=0,mp[3]=0;var l=u%Nt,c=(u-l)/Nt;n.texSubImage2D(n.TEXTURE_2D,0,l,c,1,1,n.RGBA,n.FLOAT,mp),this.useReadpixelWorkaround?(this.workaroundData[0].dataFloat[u]=s.x,this.workaroundData[1].dataFloat[u]=s.y):(this.physPositions[4*u+0]=s.x,this.physPositions[4*u+1]=s.y)}s.pinned!==void 0&&(this.pinData[u]=s.pinned?255:0),Object.keys(s).forEach(function(f){return i.add(f)})}}catch(f){o.e(f)}finally{o.f()}i.has("pinned")&&(n.bindTexture(n.TEXTURE_2D,this.pinTexture),n.texImage2D(n.TEXTURE_2D,0,n.ALPHA,Nt,Nt,0,n.ALPHA,n.UNSIGNED_BYTE,this.pinData)),(i.has("x")||i.has("y")||i.has("size"))&&(this.shouldUpdate=!0,this.iterationCount=0)}},{key:"addRemoveData",value:function(t,n,i){var a=this.gl;this.numNodes=t.nodes.length,this.physShader.use(),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_baseLength",this.getBaseLength());var o=rC(t.nodes).nodeIdToIndex,s=new jN(t,o);s.coarsenTo(1);var u=s.subGraphs[0],l=this.subGraphs[0],c=function(B){return l.nodes.findIndex(function(U){return U.id===B})},f=Object.values(n.adds),d=Object.values(n.removes);this.addedNodes=f.length>0?{}:null,this.nodeVariation=f.length+d.length;for(var h=function(B){return!!n.adds[B]},v=3*Math.sqrt(t.nodes.length),p={x:0,y:0},g=u.nodes.length,y=new Uint8Array(65536),b=0;b<g;b++){var m=0,_=0,x=u.nodes[b];if(h(x.id)){if(this.addedNodes[b]=x.id,m=x.position?x.position.x:void 0,_=x.position?x.position.y:void 0,m===void 0||_===void 0){var C=s.sunMap,w=void 0;for(w=C[x.id];w!==void 0;w=C[w]){var O=c(w);if(O!==-1){var A=this.getNodePosition(O);m=A.x+10*(Math.random()-.5),_=A.y+10*(Math.random()-.5);break}}w===void 0&&(m=this.nodeCenterPoint[0]+v*(Math.random()-.5),_=this.nodeCenterPoint[1]+v*(Math.random()-.5))}this.updateData[2*b]=m,this.updateData[2*b+1]=_,y[b]=x.pinned?255:0}else{var k=c(x.id),R=this.getNodePosition(k);m=R.x,_=R.y,this.updateData[2*b]=k,this.updateData[2*b+1]=999999,y[b]=this.pinData[k]}p.x+=m||0,p.y+=_||0}this.nodeCenterPoint=g?[p.x/g,p.y/g]:[0,0],this.pinData=y,this.subGraphs=s.subGraphs,this.nodeSortMap=s.nodeSortMap,this.setupSprings(this.subGraphs[0]),this.setupSize(this.subGraphs[0]);var I=rC(this.subGraphs[0].nodes),M=I.nodeIdToIndex,N=I.nodeIndexToId;this.nodeIdToIndex=M,this.nodeIndexToId=N,a.bindTexture(a.TEXTURE_2D,this.updateTexture),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,Nt,Nt,0,a.ALPHA,a.FLOAT,this.updateData),Dr.info("Setting gravity center to ",this.nodeCenterPoint),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.updateShader.use(),this.updateShader.setUniform("u_numNodesNew",u.nodes.length),this.updateShader.setUniform("u_physData",this.getPhysData(0).texture),this.updateShader.setUniform("u_updateData",this.updateTexture),a.disable(a.BLEND),a.bindBuffer(a.ARRAY_BUFFER,this.physVbo),this.updateShader.setAttributePointer("a_position",2,0,2),a.bindFramebuffer(a.FRAMEBUFFER,this.getPhysData(1).frameBuffer),a.viewport(0,0,Nt,Nt),a.drawArrays(a.TRIANGLE_STRIP,0,4),this.curPhysData=(this.curPhysData+1)%this.physData.length,this.useReadpixelWorkaround?this.doReadpixelWorkaround():(a.bindFramebuffer(a.FRAMEBUFFER,this.getPhysData().frameBuffer),a.readPixels(0,0,Nt,Nt,a.RGBA,a.FLOAT,this.physPositions)),(f.length>0||d.length>0)&&(a.bindTexture(a.TEXTURE_2D,this.pinTexture),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,Nt,Nt,0,a.ALPHA,a.UNSIGNED_BYTE,this.pinData));var F=Jm(t.rels),z=this.hasRelationshipFlatMapChanged(F,i);return this.shouldUpdate=this.nodeVariation>0||z,this.iterationCount=0,this.flatRelationshipKeys=F,this.setupPhysicsForCoarse(),this.subGraphs[0]}},{key:"destroy",value:function(){var t=this;this.gl.deleteBuffer(this.physVbo),this.gl.deleteBuffer(this.physSmallVbo),this.physData.forEach(function(n){t.gl.deleteFramebuffer(n.frameBuffer),t.gl.deleteTexture(n.texture)}),this.levelsData.forEach(function(n){t.gl.deleteFramebuffer(n.frameBuffer),t.gl.deleteTexture(n.texture)}),this.levelsClusterTexture.forEach(function(n){t.gl.deleteTexture(n)}),this.levelsFinestIndexTexture.forEach(function(n){t.gl.deleteTexture(n)}),this.gl.deleteTexture(this.initalLevelTexture),this.gl.deleteTexture(this.sizeTexture),this.gl.deleteTexture(this.offsetTexture),this.gl.deleteTexture(this.springTexture),this.gl.deleteTexture(this.pinTexture),this.gl.deleteTexture(this.updateTexture),this.apprxRepForceShader!==void 0&&this.apprxRepForceShader.remove(),this.updateShader!==void 0&&this.updateShader.remove(),this.physShader!==void 0&&this.physShader.remove(),this.physPositions=null,this.gl=null,this.stateDisposers.forEach(function(n){n()}),this.state.nodes.removeChannel(Ei),this.state.rels.removeChannel(Ei)}},{key:"hasRelationshipFlatMapChanged",value:function(t,n){if(t.size!==this.flatRelationshipKeys.size)return!0;var i=!1,a=Object.values(n.adds),o=Object.values(n.removes);if(a.length>0||o.length>0){var s,u=yp(Jm(a));try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!this.flatRelationshipKeys.has(l)){i=!0;break}}}catch(h){u.e(h)}finally{u.f()}if(!i){var c,f=yp(Jm(o));try{for(f.s();!(c=f.n()).done;){var d=c.value;if(!t.has(d)){i=!0;break}}}catch(h){f.e(h)}finally{f.f()}}}return i}},{key:"dumpTexture",value:function(t,n,i){var a=this.gl;Dr.info("--- Dumping texture ",i),a.bindFramebuffer(a.FRAMEBUFFER,t),a.readPixels(0,0,Nt,Nt,a.RGBA,a.FLOAT,this.physPositions);for(var o=0;o<n;o++)Dr.info(o,": ",this.physPositions[4*o+0],this.physPositions[4*o+1],this.physPositions[4*o+2],this.physPositions[4*o+3])}},{key:"getScaleNumber",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(i,a,o){return o+Math.pow(10,6)*Math.pow(i-120,-1.7)};return t===0?0:t<300?200+-1/Math.pow(10,5)*3*Math.pow(Math.abs(t-200+12),3):n(t,200,10)}},{key:"getBaseLength",value:function(t){if(t===void 0||t===this.numNodes)return 100*this.dpr;var n=Math.pow(this.averageNodeSize/2,2)*Math.PI,i=this.numNodes/t*n;return(100+Math.sqrt(i/Math.PI)/2/t)*this.dpr}},{key:"checkForUpdates",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.state,i=n.nodes,a=n.rels,o={nodes:i.items,rels:a.items},s=Object.values(i.channels[Ei].adds).length>0,u=Object.values(a.channels[Ei].adds).length>0,l=Object.values(i.channels[Ei].removes).length>0,c=Object.values(a.channels[Ei].removes).length>0,f=Object.values(i.channels[Ei].updates);(s||u||l||c)&&this.addRemoveData(o,{adds:i.channels[Ei].adds,removes:i.channels[Ei].removes},{adds:a.channels[Ei].adds,removes:a.channels[Ei].removes}),t?(this.updateNodes(o.nodes),this.reheat(o)):f.length>0&&(this.updateNodes(f),Bg(f)&&this.reheat(o)),i.clearChannel(Ei),a.clearChannel(Ei)}},{key:"getNodePosition",value:function(t){return this.useReadpixelWorkaround?{x:this.workaroundData[0].dataFloat[t],y:this.workaroundData[1].dataFloat[t]}:{x:this.physPositions[4*t+0],y:this.physPositions[4*t+1]}}},{key:"getMaxSpeedSquared",value:function(){var t=0;if(this.useReadpixelWorkaround)for(var n=0;n<this.numNodes;n++){var i=this.workaroundData[2].dataFloat[n],a=this.workaroundData[3].dataFloat[n],o=i*i+a*a;o>t&&(t=o)}else for(var s=0;s<this.numNodes;s++){var u=this.physPositions[4*s+2],l=this.physPositions[4*s+3],c=u*u+l*l;c>t&&(t=c)}return t}},{key:"getMedianSpeedSquared",value:function(t){var n=[];if(this.useReadpixelWorkaround)for(var i=0;i<this.numNodes;i++){var a=this.workaroundData[2].dataFloat[i],o=this.workaroundData[3].dataFloat[i],s=a*a+o*o;n[i]=s}else for(var u=0;u<this.numNodes;u++)if(!t||t[u]){var l=this.physPositions[4*u+2],c=this.physPositions[4*u+3],f=l*l+c*c;n.push(f)}return n.sort(function(d,h){return d-h}),n[Math.floor(n.length/2)]}},{key:"getPhysData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.physData[(this.curPhysData+t)%this.physData.length]}},{key:"newTexture",value:function(t,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:t.FLOAT,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:t.RGBA,s=t.createTexture();return t.bindTexture(t.TEXTURE_2D,s),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,o,i,i,0,o,a,n),s}},{key:"newFramebuffer",value:function(t,n){var i=t.createFramebuffer();return t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),i}},{key:"checkCompatibility",value:function(t){function n(l){throw new $B(l)}t||n("Could not initialize WebGL"),t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)===0&&n("Vertex shader texture access not available"),t.getExtension("OES_texture_float")||n("OES_texture_float extension not available"),t.getExtension("WEBGL_color_buffer_float")||(Dr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0);var i=t.getParameter(t.MAX_TEXTURE_SIZE),a=Math.max(Nt,ZS);if(i<a&&n("Need larger WebGL texture support. Avaliable: ".concat(i," needed: ").concat(a)),!this.useReadpixelWorkaround){var o=new Float32Array(4),s=this.newTexture(t,o,1),u=this.newFramebuffer(t,s);t.bindFramebuffer(t.FRAMEBUFFER,u),t.readPixels(0,0,1,1,t.RGBA,t.FLOAT,o),t.getError()!==t.NO_ERROR&&(Dr.info("gl.readPixels doesnt work for float texture, activating workaround"),this.useReadpixelWorkaround=!0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(u),t.deleteTexture(s)}}},{key:"printGlStats",value:function(t){var n="?",i="?";if(t.getParameter(t.RENDERER))i=t.getParameter(t.RENDERER),n=t.getParameter(t.VENDOR);else{var a=t.getExtension("WEBGL_debug_renderer_info");a&&(n=t.getParameter(a.UNMASKED_VENDOR_WEBGL),i=t.getParameter(a.UNMASKED_RENDERER_WEBGL))}Dr.trace("Vendor: ".concat(n)),Dr.trace("Renderer: ".concat(i));var o=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);Dr.trace("Line width range: ".concat(o));var s=t.getSupportedExtensions();Dr.trace("Extentions:"),s.length>0&&s.forEach(function(u){return Dr.trace(u)})}},{key:"adjustToGlSize",value:function(t){return t*this.dpr*2.5}},{key:"setupSize",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{nodes:[]},n=new Float32Array(65536),i=t.nodes,a=i.length,o=0,s=0;s<a;s++){var u,l=parseInt((u=i[s].size)!==null&&u!==void 0?u:zn,10);n[s]=this.adjustToGlSize(l),o+=l}this.averageNodeSize=a?o/a:zn;var c=this.gl;this.sizeTexture===void 0&&(this.sizeTexture=c.createTexture()),c.bindTexture(c.TEXTURE_2D,this.sizeTexture),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,Nt,Nt,0,c.ALPHA,c.FLOAT,n),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE)}},{key:"setupSprings",value:function(t){var n,i,a=this.gl,o=t.relationships,s=new Float32Array(16777216),u=new Float32Array(65536),l=0;for(n=0;n<t.nodes.length;n++)for(u[n]=l,s[l]=o[n].length,l+=1,i=0;i<o[n].length;i++)s[l]=o[n][i],l+=1;for(i=l;i<s.length;i++)s[i]=1;for(i=n;i<u.length;i++)u[i]=0;this.offsetTexture===void 0&&(this.offsetTexture=a.createTexture()),a.bindTexture(a.TEXTURE_2D,this.offsetTexture),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,Nt,Nt,0,a.ALPHA,a.FLOAT,u),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),this.springTexture===void 0&&(this.springTexture=a.createTexture()),a.bindTexture(a.TEXTURE_2D,this.springTexture),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,ZS,ZS,0,a.ALPHA,a.FLOAT,s),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)}},{key:"setupPhysics",value:function(){this.setupPhysicsForCoarse(),this.setupPhysicsForNodes(),this.physPositions=new Float32Array(262144),this.setupPinData()}},{key:"setupPhysicsForNodes",value:function(){var t=this.gl,n=this.subGraphs.length,i=this.subGraphs[0].nodes,a=3*Math.sqrt(i.length),o=new Float32Array(262144),s=new Float32Array(262144);this.numNodes=i.length;for(var u=0;u<262144;u++)o[u]=0,s[u]=0;for(var l=function(g,y,b,m){m[4*g+0]=y,m[4*g+1]=b,m[4*g+2]=0,m[4*g+3]=0},c=n-1;c>=0;c--){var f=c===n-1?[]:this.subGraphs[c+1].nodes;f.length===0?this.subGraphs[c].nodes.forEach(function(g,y){var b=g.placement?g.placement.x:a*(Math.random()-.5),m=g.placement?g.placement.y:a*(Math.random()-.5);l(g.finestIndex===void 0?y:g.finestIndex,b,m,o)}):f.forEach(function(g){var y=g.finestIndex,b=o[4*g.finestIndex],m=o[4*g.finestIndex+1],_=FN({x:b,y:m},10,g.planets.length+1);y+=1,g.planets.forEach(function(x,C){var w=_[C];l(y+=1,w.x,w.y,o);var O=FN({x:w.x,y:w.y},10,x.moons.length+1);x.moons.forEach(function(A,k){var R=O[k];l(y+=1,R.x,R.y,o)})})})}this.physData=[];for(var d=0;d<2;d++){var h=this.newTexture(t,d===0?o:s,Nt),v=this.newFramebuffer(t,h);this.physData.push({texture:h,frameBuffer:v})}var p=this.enableVerlet?`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;


float DAMP = 0.6;
float COOL = 0.99998;
float TEMP = max(0.02, pow(COOL, u_curIteration));
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 50000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection, float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = (combinedNodeSize - dist) / (dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * fScale) / (dist);
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, myPosition.zw);
  } else {
    vec2 prevVelocity = myPosition.zw;
    vec2 currentPos = myPosition.xy;
    vec2 prevPos = currentPos - prevVelocity;

    vec2 newPos = currentPos + TEMP * ( DAMP * (prevVelocity) + acceleration * TIMESTEP * TIMESTEP);
    vec2 newVelocity = newPos - currentPos;
    gl_FragColor = vec4(newPos, newVelocity);
  }
}`:`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_connections;
uniform sampler2D u_connectionOffsets;
uniform sampler2D u_pinnedNodes;
uniform sampler2D u_sizeTexture;
uniform float u_baseLength;
uniform float u_curIteration;
uniform float u_iterationMultiplier;
uniform vec2 u_gravityCenter;
uniform float u_numNodes;
uniform float u_gravity;

uniform sampler2D u_clusterData;
uniform sampler2D u_prevForce;
uniform float u_collisionMultiplier;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;
float accLimitLow = 500000.0;
float accLimitHigh = 750000.0;
float accLimitPosHigh = 10000000.0;

const float denseNodeThreshold = 1000.0;
const float MIN_DISTANCE = 0.00000001;
const float MAX_DISTANCE = 1000000000.0;
const float MAX_ACCELERATION = 500000.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

bool isNan(float val) {
  return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;
}

const float BIG_NUMBER = 999999999999999999.0;
bool isInf(float val) {
  return val > BIG_NUMBER || val < -BIG_NUMBER;
}

vec2 getDelta(vec2 v1, vec2 v2) {
  vec2 delta = v1 - v2;
  float dist = length(delta);
  if (dist < MIN_DISTANCE || isNan(dist)) {
    return vec2(MIN_DISTANCE, MIN_DISTANCE);
  }
  if (dist > MAX_DISTANCE) {
    vec2 normDelta = delta / dist;
    return normDelta * MAX_DISTANCE;
  }
  return delta;
}

vec4 getOtherNodePosition(float i) {
  return getTextureData(u_physData, i, 256.0);
}

float getCombinedNodeSize(float i, float nodeSize) {
  float otherNodeSize = getTextureData(u_sizeTexture, i, 256.0).a;
  return nodeSize + otherNodeSize;
}

vec2 getSpringForce(float curConnection,  float numConnections, float springFScale, vec4 myPosition, float i) {
  float curSpring = getTextureData(u_connections, curConnection + i, 4096.0).a;

  vec4 otherPosition = getTextureData(u_physData, curSpring, 256.0);
  float otherDataPosition = getTextureData(u_connectionOffsets, curSpring, 256.0).a;
  float avgDegree;
#if INTEL_WORKAROUND
    avgDegree = max(numConnections, 4.0);
#else
    float otherNumConnections = getTextureData(u_connections, otherDataPosition, 4096.0).a;
    avgDegree = max((otherNumConnections + numConnections * 3.0) / 4.0, 4.0);
#endif

  vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
  float dist = length(delta);

  float F = (dist * dist * springFScale) / (u_baseLength * avgDegree);
  if (u_collisionMultiplier > 0.0) {
    F *= u_collisionMultiplier;
  }
  return (-delta / dist) * F;
}

vec2 getCollisionForce(float combinedNodeSize, float dist, float fScale, vec2 delta) {
  float collisionForce = ((combinedNodeSize - dist) / dist);
  if (u_collisionMultiplier > 0.0) {
    collisionForce *= u_collisionMultiplier;
  }
  return (delta * collisionForce * fScale * combinedNodeSize) / (combinedNodeSize + 1.0);
}

vec2 getRepulsionForce(float dist, float fScale, vec2 delta) {
  float F = (u_baseLength * u_baseLength * (fScale / 1.5)) / dist;
  return (delta / dist) * F * 0.05;
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * textureSide;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterWeight = clusterData.w;

  vec4 myPosition = getTextureData(u_physData, index, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);

  vec2 acceleration = previousForce.xy;

  float isPinned = getTextureData(u_pinnedNodes, index, 256.0).a;
  float nodeSize = getTextureData(u_sizeTexture, index, 256.0).a;

  if (isPinned > 0.5) {
    gl_FragColor = vec4(myPosition.xy, 0.0, 0.0);
    return;
  }

  float curConnection = getTextureData(u_connectionOffsets, index, 256.0).a;
  float numConnections = getTextureData(u_connections, curConnection, 4096.0).a;

  float fScale = 1.0 + sqrt(u_iterationMultiplier);
  float springFScale = fScale;

  if (numConnections > denseNodeThreshold) {
    springFScale = sqrt(fScale);
  }

  float numOfRels = 0.0;

  // Springs
  for (float i = 1.0; i <= 256.0 * 256.0; i++) {
    if (numOfRels >= numConnections) {
      break;
    }
    acceleration += getSpringForce(curConnection, numConnections, springFScale, myPosition, i);
    numOfRels += 1.0;
  }

  // Repulsion && collision detection
  if (u_collisionMultiplier > 0.0) {
    float number_of_collisions = 0.0;
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= u_numNodes) {
        break;
      }

      if (i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize) * 2.0;

      if (dist < combinedNodeSize && number_of_collisions < 40.0) {
        number_of_collisions++;
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      if (i >= clusterStartIndex && i < clusterStartIndex + clusterSize) {
        acceleration += getRepulsionForce(dist, fScale, delta);
      }
    }
  } else {
    for (float i = 0.0; i < 256.0 * 256.0; i++) {
      if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
        break;
      }

      if (i < clusterStartIndex || i == index) {
        continue;
      }

      vec4 otherPosition = getOtherNodePosition(i);
      vec2 delta = getDelta(myPosition.xy, otherPosition.xy);
      float dist = length(delta);
      float combinedNodeSize = getCombinedNodeSize(i, nodeSize);

      if (dist < combinedNodeSize) {
        acceleration += getCollisionForce(combinedNodeSize, dist, fScale, delta);
      }

      acceleration += getRepulsionForce(dist, fScale, delta);
    }
  }

  // Gravity
  vec2 delta = getDelta(u_gravityCenter, myPosition.xy);
  float dist = length(delta);

  vec2 grav = (delta / dist) * u_gravity * fScale;
  acceleration += grav * smoothstep(0.0, 500.0, dist);

  float accMagnitude = length(acceleration);
  acceleration *= min(MAX_ACCELERATION, accMagnitude) / accMagnitude;

  float iterationFrictionThreshold = 1000.0;

  if (u_curIteration > iterationFrictionThreshold) {
    float friction = 1.0 + pow((u_curIteration - iterationFrictionThreshold), 2.0) / 100.0;
    acceleration *= 1.0 / friction;
  }

  if (u_curIteration == 0.0) {
    gl_FragColor = vec4(myPosition.xy, acceleration * TIMESTEP * 0.5);
  } else {
    myPosition.zw = myPosition.zw * VELOCITYDECAY;
    gl_FragColor = vec4(myPosition.xy + myPosition.zw * TIMESTEP, myPosition.zw + acceleration * TIMESTEP);
  }
}`;this.physShader=new jl(t,eb,p,{INTEL_WORKAROUND:this.intelWorkaround?1:0}),this.physShader.use(),this.physShader.setUniform("u_projection",this.physProjection),this.physShader.setUniform("u_baseLength",this.getBaseLength()),this.physShader.setUniform("u_connections",this.springTexture),this.physShader.setUniform("u_sizeTexture",this.sizeTexture),this.physShader.setUniform("u_connectionOffsets",this.offsetTexture),this.physShader.setUniform("u_pinnedNodes",this.pinTexture),this.physShader.setUniform("u_gravityCenter",this.nodeCenterPoint),this.physShader.setUniform("u_numNodes",this.numNodes),this.physShader.setUniform("u_gravity",this.gravity)}},{key:"setupPhysicsForCoarse",value:function(){var t=this,n=this.gl;this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[];var i,a,o=this.subGraphs.length,s=function(v,p,g,y,b){i[4*v+0]=p,i[4*v+1]=g,i[4*v+2]=b.size(),i[4*v+3]=y||1};if(o===1){i=new Float32Array(262144);var u=this.subGraphs[0].nodes;u.forEach(function(v,p){s(p,0,0,v.weight,{size:function(){return u.length}})}),this.levelsClusterTexture[0]=this.newTexture(n,i,vo)}else for(var l=function(){var v=t.subGraphs[c].nodes,p=c===t.subGraphs.length-1?[]:t.subGraphs[c+1].nodes;i=new Float32Array(262144),a=new Float32Array(65536);var g=0;if(p.length>0){var y=p.slice();y.sort(function(_,x){return _.previousIndex-x.previousIndex}),y.forEach(function(_,x){var C=g,w=p.indexOf(_);s(g,w,C,v[_.id].weight,_),a[g]=v[g].finestIndex,g+=1,_.planets.forEach(function(O){s(g,w,C,O.weight,_),a[g]=v[g].finestIndex,g+=1,O.moons.forEach(function(A){s(g,w,C,A.weight,_),a[g]=v[g].finestIndex,g+=1})})})}else v.forEach(function(_,x){s(x,0,0,_.weight,{size:function(){return v.length}}),a[x]=v[x].finestIndex});var b=t.newTexture(n,null,vo),m=t.newFramebuffer(n,b);t.levelsData[c]={texture:b,frameBuffer:m},t.levelsClusterTexture[c]=t.newTexture(n,i,vo),t.levelsFinestIndexTexture[c]=t.newTexture(n,a,Nt,n.FLOAT,n.ALPHA)},c=this.subGraphs.length-1;c>=0;c--)l();for(var f=new Float32Array(262144),d=0;d<f.length;d++)f[d]=0;this.initalLevelTexture=this.newTexture(n,f,vo);var h=this.enableVerlet?`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float PI = 3.1415926535897932384626433832795;
float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 1.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getSquaredLogClusterWeight(float value) {
  return pow(log(value), 2.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;
  float clusterArea = pow(clusterSize + u_baseLength * 2.0, 2.0);

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getSquaredLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = (clusterArea * fScale) / (dist * dist);

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.2;
    }

    acceleration += ((delta / sqrt(dist)) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / (dist * dist);
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`:`precision mediump float;
uniform sampler2D u_physData;
uniform sampler2D u_clusterData;
uniform sampler2D u_finestIndexes;
uniform sampler2D u_prevForce;

uniform float u_baseLength;
uniform float u_numNodes;
uniform float u_iterationMultiplier;
uniform float u_isTopLevel;

float TIMESTEP = 1.0 / 30.0;
float VELOCITYDECAY = 0.6;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

float getLogClusterWeight(float value) {
  return value / max(log(value), 1.0);
}

void main(void) {
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5) * 256.0;

  if (index >= u_numNodes) {
    discard;
  }

  vec4 clusterData = getTextureData(u_clusterData, index, 256.0);

  float clusterIndex = clusterData.x;
  float clusterStartIndex = clusterData.y;
  float clusterSize = clusterData.z;

  float finestIndex = getTextureData(u_finestIndexes, index, 256.0).a;
  vec4 myPosition = getTextureData(u_physData, finestIndex, 256.0);
  vec4 previousForce = getTextureData(u_prevForce, clusterIndex, 256.0);
  float fScale = 1.0 + sqrt(u_iterationMultiplier);

  vec2 acceleration = previousForce.xy;

  // Repulsion & Collision Detection
  for (float i = 0.0; i < 256.0 * 256.0; i++) {
    if (i >= clusterStartIndex + clusterSize || i >= u_numNodes) {
      break;
    }
    if (i < clusterStartIndex || i == index) {
      continue;
    }

    vec4 otherClusterData = getTextureData(u_clusterData, i, 256.0);
    float otherClusterWeight = getLogClusterWeight(otherClusterData.w);

    float otherFinestIndex = getTextureData(u_finestIndexes, i, 256.0).a;
    vec4 otherPosition = getTextureData(u_physData, otherFinestIndex, 256.0);

    vec2 delta = myPosition.xy - otherPosition.xy;
    float dist = max(length(delta), 0.0000001);
    float maxDist = 25.0;
    float repulsionForceScale = 0.1;

    float F = ((u_baseLength * u_baseLength) * (fScale / 1.5)) / dist;

    if (u_isTopLevel == 1.0) {
      repulsionForceScale = 0.3;
    }

    acceleration += ((delta / dist) * F) * repulsionForceScale * otherClusterWeight;

    if (dist < maxDist) {
      float collide = (maxDist - dist) / dist;
      acceleration += delta * collide * fScale * maxDist / (maxDist + 1.0);
    }
  }

  gl_FragColor = vec4(acceleration, vec2(finestIndex, 0));
}`;this.apprxRepForceShader=new jl(n,eb,h),this.apprxRepForceShader.use(),this.apprxRepForceShader.setUniform("u_projection",this.physSmallProjection)}},{key:"setupPinData",value:function(){var t=this.gl;this.pinTexture=t.createTexture(),this.pinData=new Uint8Array(65536);for(var n=0;n<65536;n++)this.pinData[n]=0;t.bindTexture(t.TEXTURE_2D,this.pinTexture),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,Nt,Nt,0,t.ALPHA,t.UNSIGNED_BYTE,this.pinData),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}},{key:"setupUpdates",value:function(){var t=this.gl;this.updateData=new Float32Array(65536),this.updateTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.updateTexture),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,Nt,Nt,0,t.ALPHA,t.FLOAT,this.updateData),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.updateShader=new jl(t,eb,`precision mediump float;

uniform sampler2D u_physData;
uniform sampler2D u_updateData;
uniform float u_numNodesNew;

const float INDEX_FLAG = 999999.0;

vec4 getTextureData(sampler2D texture, float index, float base) {
  float x = mod(index, base);
  float y = (index - x) / base;
  return texture2D(texture, vec2(x + 0.5, y + 0.5) / base);
}

void main(void) {
  float textureSide = 256.0; //#TEXTURE_SIDE#;
  float index = (gl_FragCoord.x - 0.5) + (gl_FragCoord.y - 0.5)*textureSide;

  if (index >= u_numNodesNew) {
    discard;
  }

  float firstValue = getTextureData(u_updateData, index * 2.0, 256.0).a;
  float secondValue = getTextureData(u_updateData, index * 2.0 + 1.0, 256.0).a;

  if (secondValue == INDEX_FLAG) {
    vec4 myPosition = getTextureData(u_physData, firstValue, 256.0);
    gl_FragColor = myPosition;
  } else {
    gl_FragColor = vec4(firstValue, secondValue, 0.0, 0.0);
  }
}
`),this.updateShader.use(),this.updateShader.setUniform("u_projection",this.physProjection)}},{key:"setupReadpixelWorkaround",value:function(){var t=this.gl;this.workaroundShader=new jl(t,eb,`precision lowp float;

uniform sampler2D u_physData;
uniform float u_index;

float shift_right (float v, float amt) { 
    v = floor(v) + 0.5; 
    return floor(v / exp2(amt)); 
}

float shift_left (float v, float amt) { 
    return floor(v * exp2(amt) + 0.5); 
}

float mask_last (float v, float bits) { 
    return mod(v, shift_left(1.0, bits)); 
}

float extract_bits (float num, float from, float to) { 
    from = floor(from + 0.5); to = floor(to + 0.5); 
    return mask_last(shift_right(num, from), to - from); 
}

// From https://stackoverflow.com/questions/17981163/webgl-read-pixels-from-floating-point-render-target
vec4 encode_float (float val) { 
    if (val == 0.0) return vec4(0, 0, 0, 0); 
    float sign = val > 0.0 ? 0.0 : 1.0; 
    val = abs(val); 
    float exponent = floor(log2(val)); 
    float biased_exponent = exponent + 127.0; 
    float fraction = ((val / exp2(exponent)) - 1.0) * 8388608.0; 
    float t = biased_exponent / 2.0; 
    float last_bit_of_biased_exponent = fract(t) * 2.0; 
    float remaining_bits_of_biased_exponent = floor(t); 
    float byte4 = extract_bits(fraction, 0.0, 8.0) / 255.0; 
    float byte3 = extract_bits(fraction, 8.0, 16.0) / 255.0; 
    float byte2 = (last_bit_of_biased_exponent * 128.0 + extract_bits(fraction, 16.0, 23.0)) / 255.0; 
    float byte1 = (sign * 128.0 + remaining_bits_of_biased_exponent) / 255.0; 
    return vec4(byte4, byte3, byte2, byte1); 
}

void main(void) {
  vec4 texData = texture2D(u_physData, gl_FragCoord.xy / 255.0);
  float data;
  if (u_index == 0.0) {
    data = texData.x;
  } else if (u_index == 1.0) {
    data = texData.y;
  } else if (u_index == 2.0) {
    data = texData.z;
  } else if (u_index == 3.0) {
    data = texData.w;
  }

  gl_FragColor = encode_float(data);
}
`),this.workaroundShader.use(),this.workaroundShader.setUniform("u_projection",this.physProjection),this.workaroundData=[];for(var n=0;n<4;n++){var i=new Uint8Array(262144),a=this.newTexture(t,null,Nt,t.UNSIGNED_BYTE),o=this.newFramebuffer(t,a);this.workaroundData.push({dataByte:i,dataFloat:new Float32Array(i.buffer),texture:a,frameBuffer:o})}}},{key:"doReadpixelWorkaround",value:function(){for(var t=this.gl,n=0;n<4;n++){var i=this.workaroundData[n];t.bindFramebuffer(t.FRAMEBUFFER,i.frameBuffer),t.viewport(0,0,Nt,Nt),this.workaroundShader.use(),this.workaroundShader.setUniform("u_index",n),this.workaroundShader.setUniform("u_physData",this.getPhysData(0).texture),t.bindBuffer(t.ARRAY_BUFFER,this.physVbo),this.workaroundShader.setAttributePointer("a_position",2,0,2),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.readPixels(0,0,Nt,Nt,t.RGBA,t.UNSIGNED_BYTE,i.dataByte)}}},{key:"definePhysicsArrays",value:function(){this.physData=[],this.levelsData=[],this.levelsClusterTexture=[],this.levelsFinestIndexTexture=[]}}],e&&lie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function Kp(r){return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kp(r)}function tb(r){return function(e){if(Array.isArray(e))return nC(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return nC(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nC(e,t):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function fie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,HB(n.key),n)}}function oh(r,e,t){return(e=HB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function HB(r){var e=function(t){if(Kp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Kp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Kp(e)=="symbol"?e:e+""}var sh="ForceCytoLayout",rb="forceDirected",nb="coseBilkent",die=function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),oh(this,"physLayout",void 0),oh(this,"coseBilkentLayout",void 0),oh(this,"state",void 0),oh(this,"currentLayoutType",void 0),oh(this,"enableCytoscape",void 0),oh(this,"currentLayout",void 0);var a=n.state,o=n.enableCytoscape;this.enableCytoscape=o==null||o,this.physLayout=new cie(n),this.coseBilkentLayout=new rie({state:a,cytoCompleteCallback:function(){for(i.physLayout.update(!0),i.copyLayoutPositions(i.state.nodes.items,i.coseBilkentLayout,i.physLayout);i.physLayout.update(!1););i.copyLayoutPositions(i.state.nodes.items,i.physLayout,i.coseBilkentLayout)},animationCompleteCallback:function(){i.currentLayoutType===nb&&setTimeout(function(){return i.setLayout(rb)},50)}}),this.currentLayout=this.physLayout,this.currentLayoutType=rb;var s=a.nodes,u=a.rels;s.addChannel(sh),u.addChannel(sh),this.state=a},e=[{key:"setOptions",value:function(t){t!==void 0&&(this.currentLayout.setOptions(t),this.enableCytoscape=t.enableCytoscape)}},{key:"getLayout",value:function(t){return t===nb?this.coseBilkentLayout:this.physLayout}},{key:"setLayout",value:function(t){if(t!==this.currentLayoutType){Dr.info("Switching to layout: ".concat(t," in ForceCyto"));var n=this.getLayout(t);this.currentLayout=n,this.currentLayoutType=t}}},{key:"copyLayoutPositions",value:function(t,n,i){var a=n.getNodePositions(t);i.updateNodes(a)}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=this.state,i=n.nodes,a=n.rels,o=i.channels[sh],s=a.channels[sh],u=Object.values(o.adds).length,l=Object.values(s.adds).length,c=Object.values(o.adds).map(function(A){return A.id}),f=Object.values(s.adds).map(function(A){return A.id}),d=new Set(Object.keys(o.adds)),h=new Set(Object.keys(s.adds));if(i.clearChannel(sh),a.clearChannel(sh),this.currentLayoutType===rb&&this.enableCytoscape&&i.items.length<=100&&u<100&&u>0&&l>0){var v=i.items.map(function(A){return A.id}),p=new Set([].concat(tb(v),tb(c))),g=a.items.map(function(A){return A.id}),y=new Set([].concat(tb(g),tb(f)));if(p.size<=100&&y.size<=300){var b=function(A,k,R,I){var M,N=new Set(A),F=pp(new Set(k));try{for(F.s();!(M=F.n()).done;){var z=M.value,B=I.idToItem[z];if(B){var U=B.from,W=B.to;N.add(U),N.add(W)}}}catch(de){F.e(de)}finally{F.f()}var Y,H=function(de){var ie,Q={},re={},se=pp(de);try{for(se.s();!(ie=se.n()).done;){for(var pe=ie.value,Oe=pe.from,Ce=pe.to,Re="".concat(Oe,"-").concat(Ce),be="".concat(Ce,"-").concat(Oe),j=0,G=[Re,be];j<G.length;j++){var $=G[j];re[$]!==void 0?re[$].push(pe):re[$]=[pe]}Q[Oe]||(Q[Oe]=new Set),Q[Ce]||(Q[Ce]=new Set),Q[Oe].add(Ce),Q[Ce].add(Oe)}}catch(te){se.e(te)}finally{se.f()}return{adjNodesMap:Q,relMap:re}}(I.items),J=H.adjNodesMap,le=H.relMap,fe={},ue={},ge=function(de){var ie=[];for(fe[de]||ie.push(de);ie.length>0;){var Q=ie.shift();if(fe[Q]=R.idToItem[Q],J[Q]!==void 0){var re,se=pp(J[Q]);try{for(se.s();!(re=se.n()).done;){var pe=re.value;if(!fe[pe]){ie.push(pe);var Oe=le["".concat(Q,"-").concat(pe)];if(Oe){var Ce,Re=pp(Oe);try{for(Re.s();!(Ce=Re.n()).done;){var be=Ce.value;ue[be.id]||(ue[be.id]=be)}}catch(j){Re.e(j)}finally{Re.f()}}}}}catch(j){se.e(j)}finally{se.f()}}}},ve=pp(N);try{for(ve.s();!(Y=ve.n()).done;)ge(Y.value)}catch(de){ve.e(de)}finally{ve.f()}return{connectedNodes:fe,connectedRels:ue}}(d,h,i,a),m=b.connectedNodes,_=b.connectedRels,x=Object.values(m),C=Object.values(_),w=x.length,O=C.length;w===d.size&&O===h.size&&(h.size>0||d.size>0)?(this.setLayout(nb),this.coseBilkentLayout.update(!0,i.items,a.items)):O>0&&h.size/O>.25&&(this.setLayout(nb),this.coseBilkentLayout.update(!0,x,C))}}this.physLayout.update(t),this.coseBilkentLayout.update(t)}},{key:"getShouldUpdate",value:function(){return this.currentLayout.getShouldUpdate()}},{key:"getComputing",value:function(){return this.currentLayout.getComputing()}},{key:"updateNodes",value:function(t){this.setLayout(rb),this.physLayout.updateNodes(t)}},{key:"getNodePositions",value:function(t){return this.currentLayout.getNodePositions(t)}},{key:"terminateUpdate",value:function(){this.physLayout.terminateUpdate(),this.coseBilkentLayout.terminateUpdate()}},{key:"destroy",value:function(){this.physLayout.destroy(),this.coseBilkentLayout.destroy()}}],e&&fie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function Zp(r){return Zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zp(r)}function UN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function hie(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?UN(Object(t),!0).forEach(function(n){Lp(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):UN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function zN(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return qN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?qN(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function qN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function vie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,YB(n.key),n)}}function Lp(r,e,t){return(e=YB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function YB(r){var e=function(t){if(Zp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Zp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Zp(e)=="symbol"?e:e+""}var Ts="FreeLayout",pie=function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),Lp(this,"state",void 0),Lp(this,"positions",void 0),Lp(this,"shouldUpdate",void 0),Lp(this,"stateDisposers",void 0);var a=n.state;this.state=a,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)}));var o=this.state,s=o.nodes,u=o.rels;s.addChannel(Ts),u.addChannel(Ts),this.shouldUpdate=!0,this.setOptions(),this.layout(s.items,s.idToItem,s.idToPosition)},e=[{key:"setOptions",value:function(){}},{key:"updateNodes",value:function(t){var n,i=zN(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.x!==void 0&&a.y!==void 0&&(this.positions[a.id]={x:a.x,y:a.y}),this.shouldUpdate=!0}}catch(o){i.e(o)}finally{i.f()}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||t){var n=this.state,i=n.nodes,a=n.rels,o=Object.values(i.channels[Ts].adds).length>0,s=Object.values(a.channels[Ts].adds).length>0,u=Object.values(i.channels[Ts].removes).length>0,l=Object.values(a.channels[Ts].removes).length>0;(o||s||u||l)&&this.layout(i.items,i.idToItem,i.idToPosition),i.clearChannel(Ts),a.clearChannel(Ts)}this.shouldUpdate=!1}},{key:"layout",value:function(t,n,i){var a,o=(a=t)!==void 0?ia(a):a;if(!(0,Vr.isEmpty)(o)){for(var s={},u=0;u<o.length;++u){var l,c=o[u].id,f=(l=i[c])!==null&&l!==void 0?l:{},d=f.x,h=d===void 0?0:d,v=f.y,p=v===void 0?0:v;s[c]={id:c,x:h,y:p}}this.positions=s,this.shouldUpdate=!1}}},{key:"setNodePositions",value:function(t){this.positions=t}},{key:"getNodePositions",value:function(t){var n,i=[],a=zN(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=this.positions[o.id],u=hie({id:o.id},s);i.push(u)}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){}},{key:"destroy",value:function(){this.state.nodes.removeChannel(Ts),this.state.rels.removeChannel(Ts)}}],e&&vie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function Qp(r){return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qp(r)}function GN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function VN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?GN(Object(t),!0).forEach(function(n){gie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):GN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function gie(r,e,t){return(e=XB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function $N(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return WN(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?WN(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function WN(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function yie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,XB(n.key),n)}}function XB(r){var e=function(t){if(Qp(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Qp(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Qp(e)=="symbol"?e:e+""}var As="GridLayout",mie=function(){return r=function t(n){var i=this;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t);var a=n.state;this.state=a,this.positions={},this.stateDisposers=[],this.stateDisposers.push(this.state.reaction(function(){return i.state.graphUpdates},function(){i.state.nodes.version!==void 0&&(i.shouldUpdate=!0),i.state.rels.version!==void 0&&(i.shouldUpdate=!0)}));var o=this.state,s=o.nodes,u=o.rels;s.addChannel(As),u.addChannel(As),this.shouldUpdate=!0,this.setOptions(n),this.layout(s.items,s.idToItem,s.idToPosition,u.items)},e=[{key:"setOptions",value:function(t){}},{key:"updateNodes",value:function(t){var n,i=$N(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.x!==void 0&&a.y!==void 0&&(this.positions[a.id]={x:a.x,y:a.y}),this.shouldUpdate=!0}}catch(o){i.e(o)}finally{i.f()}}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||t){var n=this.state,i=n.nodes,a=n.rels,o=Object.values(i.channels[As].adds).length>0,s=Object.values(a.channels[As].adds).length>0,u=Object.values(i.channels[As].removes).length>0,l=Object.values(a.channels[As].removes).length>0;(o||s||u||l)&&(this.layout(i.items,i.idToItem,i.idToPosition,a.items),i.idToPosition=this.positions),i.clearChannel(As),a.clearChannel(As)}this.shouldUpdate=!1}},{key:"layout",value:function(t,n,i,a){var o,s=(o=t)?ia(o):o;if(!(0,Vr.isEmpty)(s)){for(var u=s.length,l=Math.ceil(Math.sqrt(u)),c=new Array(u),f=0,d=0;d<l;++d){for(var h=0;h<l&&(c[f]={y:0+150*d,x:0+150*h},(f+=1)!==u);++h);if(f===u)break}for(var v=s.sort(),p={},g=0;g<u;++g){var y=v[g],b=c[g];y.x===b.x&&y.y===b.y||(p[y.id]=VN({id:y.id},b))}this.positions=p,this.shouldUpdate=!1}}},{key:"getNodePositions",value:function(t){var n,i=[],a=$N(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=this.positions[o.id],u=VN({id:o.id},s);i.push(u)}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate}},{key:"getComputing",value:function(){return!1}},{key:"terminateUpdate",value:function(){this.shouldUpdate=!1}},{key:"destroy",value:function(){this.state.nodes.removeChannel(As),this.state.rels.removeChannel(As)}}],e&&yie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),bie=new Set(["direction","packing"]),_ie="forceDirected",Fb="hierarchical",wie="grid",xie="free",Eie="d3Force",R2="webgl",k2="canvas";function Jp(r){return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jp(r)}function ib(r,e,t){return(e=function(n){var i=function(a){if(Jp(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var s=o.call(a,"string");if(Jp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return Jp(i)=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var I2="down",Oie=ib(ib(ib(ib({},"up","BT"),I2,"TB"),"left","RL"),"right","LR"),D2="bin",Sie=[D2,"stack"],Cie=["html"],Tie=["html"],Aie=["captionHtml"];function Rh(r){return Rh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rh(r)}function iC(r,e){if(r==null)return{};var t,n,i=function(o,s){if(o==null)return{};var u={};for(var l in o)if({}.hasOwnProperty.call(o,l)){if(s.indexOf(l)!==-1)continue;u[l]=o[l]}return u}(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}function Pie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ZB(n.key),n)}}function KB(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KB=function(){return!!r})()}function M2(){return M2=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(r,e,t){var n=function(a,o){for(;!{}.hasOwnProperty.call(a,o)&&(a=kh(a))!==null;);return a}(r,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(arguments.length<3?r:t):i.value}},M2.apply(null,arguments)}function kh(r){return kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kh(r)}function L2(r,e){return L2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},L2(r,e)}function Ps(r,e,t){return(e=ZB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ZB(r){var e=function(t){if(Rh(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(Rh(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return Rh(e)=="symbol"?e:e+""}var Qi="HierarchicalLayout",ab=function(r){return r!==void 0?ia(r):r},Rie=function(){function r(n){var i;(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,r),Ps(i=function(u,l,c){return l=kh(l),function(f,d){if(d&&(Rh(d)=="object"||typeof d=="function"))return d;if(d!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}(f)}(u,KB()?Reflect.construct(l,c||[],kh(u).constructor):l.apply(u,c))}(this,r,[n]),"direction",void 0),Ps(i,"packing",void 0),Ps(i,"stateDisposers",void 0),Ps(i,"oldComputing",void 0),Ps(i,"computing",void 0),Ps(i,"pendingLayoutData",void 0),Ps(i,"worker",void 0),Ps(i,"directionChanged",void 0),Ps(i,"packingChanged",void 0),Ps(i,"workersDisabled",void 0),i.direction=I2,i.packing=D2;var a=i.state,o=a.nodes,s=a.rels;return o.addChannel(Qi),s.addChannel(Qi),i.stateDisposers=[i.state.reaction(function(){return i.state.graphUpdates},function(){if(o.version!==void 0){var u=o.channels[Qi],l=Object.values(u.adds).length>0,c=Object.values(u.removes).length>0,f=Object.values(u.updates),d=Bg(f);i.shouldUpdate=i.shouldUpdate||l||c||d}if(s.version!==void 0){var h=s.channels[Qi],v=Object.values(h.adds).length>0,p=Object.values(h.removes).length>0;i.shouldUpdate=i.shouldUpdate||v||p}})],i.shouldUpdate=!0,i.oldComputing=!1,i.computing=!1,i.workersDisabled=n.state.disableWebWorkers,i.setOptions(n),i.worker=FB("HierarchicalLayout",i.workersDisabled),i.pendingLayoutData=null,i.layout(o.items,o.idToItem,o.idToPosition,s.items),i}return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(i&&i.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),i&&L2(n,i)}(r,UB),e=r,t=[{key:"setOptions",value:function(n){if(n!==void 0&&function(u){return Object.keys(u).every(function(l){return bie.has(l)})}(n)){var i=n.direction,a=i===void 0?I2:i,o=n.packing,s=o===void 0?D2:o;Object.keys(Oie).includes(a)&&(this.directionChanged=this.direction&&this.direction!==a,this.direction=a),Sie.includes(s)&&(this.packingChanged=this.packing&&this.packing!==s,this.packing=s),this.shouldUpdate=this.shouldUpdate||this.directionChanged||this.packingChanged}}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.shouldUpdate||n){var i=this.state,a=i.nodes,o=i.rels,s=this.directionChanged,u=this.packingChanged,l=Object.values(a.channels[Qi].adds).length>0,c=Object.values(o.channels[Qi].adds).length>0,f=Object.values(a.channels[Qi].removes).length>0,d=Object.values(o.channels[Qi].removes).length>0,h=Object.values(a.channels[Qi].updates),v=Bg(h);(n||l||c||f||d||s||u||v)&&this.layout(a.items,a.idToItem,a.idToPosition,o.items),a.clearChannel(Qi),o.clearChannel(Qi),this.directionChanged=!1,this.packingChanged=!1}(function(p,g,y){var b=M2(kh(p.prototype),"update",y);return typeof b=="function"?function(m){return b.apply(y,m)}:b})(r,0,this)([]),this.shouldUpdate=!1,this.oldComputing=this.computing}},{key:"getShouldUpdate",value:function(){return this.shouldUpdate||this.shouldUpdateAnimator}},{key:"getComputing",value:function(){return this.computing}},{key:"layout",value:function(n,i,a,o){var s=this;if(this.worker){var u=ab(n).map(function(y){return y.html,iC(y,Cie)}),l=ab(i),c={};Object.keys(l).forEach(function(y){var b=l[y],m=(b.html,iC(b,Tie));c[y]=m});var f=ab(o).map(function(y){return y.captionHtml,iC(y,Aie)}),d=ab(a),h=this.direction,v=this.packing,p=window.devicePixelRatio,g={nodes:u,nodeIds:c,idToPosition:d,rels:f,direction:h,packing:v,pixelRatio:p,forcedDelay:0};this.computing?this.pendingLayoutData=g:(this.worker.port.onmessage=function(y){var b=y.data,m=b.positions,_=b.parents,x=b.waypoints;s.computing&&(s.positions=m),s.parents=_,s.state.setWaypoints(x),s.pendingLayoutData!==null?(s.worker.port.postMessage(s.pendingLayoutData),s.pendingLayoutData=null):s.computing=!1,s.shouldUpdate=!0,s.startAnimation()},this.computing=!0,this.worker.port.postMessage(g))}else Dr.info("Hierarchical layout code not yet initialised.")}},{key:"terminateUpdate",value:function(){var n,i;this.computing=!1,this.shouldUpdate=!1,(n=this.state.nodes)===null||n===void 0||n.clearChannel(Qi),(i=this.state.rels)===null||i===void 0||i.clearChannel(Qi)}},{key:"destroy",value:function(){var n;this.stateDisposers.forEach(function(i){i()}),this.state.nodes.removeChannel(Qi),this.state.rels.removeChannel(Qi),(n=this.worker)===null||n===void 0||n.port.close()}}],t&&Pie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function eg(r){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eg(r)}function kie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,QB(n.key),n)}}function Rs(r,e,t){return(e=QB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function QB(r){var e=function(t){if(eg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(eg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return eg(e)=="symbol"?e:e+""}var Iie=function(){return r=function t(n,i){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),Rs(this,"elementId",void 0),Rs(this,"currentValue",void 0),Rs(this,"startValue",void 0),Rs(this,"currentTime",void 0),Rs(this,"duration",void 0),Rs(this,"status",void 0),Rs(this,"endValue",void 0),Rs(this,"startTime",void 0),Rs(this,"endTime",void 0),Rs(this,"hasNextAnimation",void 0),this.elementId=n,this.startValue=i,this.status=0,this.currentValue=i,this.duration=0},(e=[{key:"setDuration",value:function(t){this.duration=t,this.setEndTime(this.startTime+this.duration)}},{key:"getStatus",value:function(){return this.status}},{key:"advance",value:function(){if(this.status!==1)return!1;this.currentTime=new Date().getTime();var t,n=this.endTime-this.startTime;return(t=n>0?(this.currentTime-this.startTime)/n:1)>=1?(this.currentValue=this.endValue,this.status=2):(this.currentValue=this.startValue+t*(this.endValue-this.startValue),this.hasNextAnimation=!0),this.hasNextAnimation}},{key:"setEndValue",value:function(t){this.endValue!==t&&(t-this.currentValue!==0?(this.currentTime=new Date().getTime(),this.status=1,this.startValue=this.currentValue,this.endValue=t,this.startTime=this.currentTime,this.setEndTime(this.startTime+this.duration)):this.endValue=t)}},{key:"setEndTime",value:function(t){this.endTime=Math.max(t,this.startTime)}}])&&kie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function tg(r){return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tg(r)}function HN(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function YN(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?HN(Object(t),!0).forEach(function(n){lf(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):HN(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Die(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,JB(n.key),n)}}function lf(r,e,t){return(e=JB(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function JB(r){var e=function(t){if(tg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(tg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return tg(e)=="symbol"?e:e+""}var Mie=function(){return r=function t(){(function(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")})(this,t),lf(this,"animations",void 0),lf(this,"durations",void 0),lf(this,"defaultDuration",void 0),lf(this,"hasNextAnimation",void 0),lf(this,"ignoreAnimationsFlag",void 0),this.animations=new Map,this.durations=[],this.durations[0]=0,this.durations[1]=0,this.defaultDuration=150,this.hasNextAnimation=!1,this.ignoreAnimationsFlag=!1},e=[{key:"advance",value:function(){var t=this;return this.hasNextAnimation=!1,this.animations.forEach(function(n){Object.values(n).forEach(function(i){i.advance()&&(t.hasNextAnimation=!0)})}),this.hasNextAnimation}},{key:"ignoreAnimations",value:function(t){this.ignoreAnimationsFlag=t}},{key:"setOptions",value:function(t){t.fadeDuration!==void 0&&(this.durations[0]=t.fadeDuration),t.sizeDuration!==void 0&&(this.durations[1]=t.sizeDuration)}},{key:"needsToRun",value:function(){return this.hasNextAnimation}},{key:"getValueForAnimationName",value:function(t,n,i){var a,o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(this.ignoreAnimationsFlag)return i;var u=(a=this.getById(t))!==null&&a!==void 0?a:{};if(u[n]===void 0){var l=s===1?this.createSizeAnimation(0,t,n):this.createFadeAnimation(0,t,n);l.setEndValue(i),o=l.currentValue}else{var c=u[n];if(c.currentValue===i)return i;c.setEndValue(i),o=c.currentValue}return this.hasNextAnimation=!0,o}},{key:"createAnimation",value:function(t,n,i){var a,o=new Iie(n,t),s=(a=this.animations.get(n))!==null&&a!==void 0?a:{};return this.animations.set(n,YN(YN({},s),{},lf({},i,o))),o}},{key:"getById",value:function(t){return this.animations.get(t)}},{key:"createFadeAnimation",value:function(t,n,i){var a,o=this.createAnimation(t,n,i);return o.setDuration((a=this.durations[0])!==null&&a!==void 0?a:this.defaultDuration),o}},{key:"createSizeAnimation",value:function(t,n,i){var a,o=this.createAnimation(t,n,i);return o.setDuration((a=this.durations[1])!==null&&a!==void 0?a:this.defaultDuration),o}}],e&&Die(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function rg(r){return rg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rg(r)}function Lie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,e6(n.key),n)}}function e6(r){var e=function(t){if(rg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(rg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return rg(e)=="symbol"?e:e+""}var po=64,Nie=function(){return r=function t(){var n,i,a;(function(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,a=void 0,(i=e6(i="cache"))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,this.cache={}},e=[{key:"getImage",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.getOrCreateEntry(t),a=n?"inverted":"image",o=i[a];return o===void 0&&(o=this.loadImage(t),i[a]=o),this.drawIfNeeded(o,n),o.canvas}},{key:"getOrCreateEntry",value:function(t){return this.cache[t]===void 0&&(this.cache[t]={}),this.cache[t]}},{key:"invertCanvas",value:function(t){for(var n=t.getImageData(0,0,po,po),i=n.data,a=0;a<4096;a++){var o=4*a;i[o]^=255,i[o+1]^=255,i[o+2]^=255}t.putImageData(n,0,0)}},{key:"loadImage",value:function(t){var n=document.createElement("canvas");n.width=po,n.height=po;var i=new Image;return i.src=t,i.crossOrigin="anonymous",{canvas:n,image:i,drawn:!1}}},{key:"drawIfNeeded",value:function(t,n){var i=t.image,a=t.canvas;if(!t.drawn&&i.complete){var o=a.getContext("2d");try{o.drawImage(i,0,0,po,po)}catch(s){Dr.error("Failed to draw image",i.src,s),o.beginPath(),o.strokeStyle="black",o.rect(0,0,po,po),o.moveTo(0,0),o.lineTo(po,po),o.moveTo(0,po),o.lineTo(po,0),o.stroke(),o.closePath()}n&&this.invertCanvas(o),t.drawn=!0}}}],e&&Lie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();const jie=Nie;function ng(r){return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(r)}function XN(r,e){if(r){if(typeof r=="string")return N2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N2(r,e):void 0}}function N2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Fie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,t6(n.key),n)}}function wl(r,e,t){return(e=t6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function t6(r){var e=function(t){if(ng(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ng(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return ng(e)=="symbol"?e:e+""}var Bie=function(){return r=function t(n,i,a){(function(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),wl(this,"key",void 0),wl(this,"rels",void 0),wl(this,"waypointPath",void 0),wl(this,"selfReferring",void 0),wl(this,"fromId",void 0),wl(this,"toId",void 0),wl(this,"angles",void 0),wl(this,"labelInfo",void 0),this.key=n,this.rels=new Map,this.selfReferring=i===a,this.fromId=i,this.toId=a,this.labelInfo={},this.angles=[]},e=[{key:"insert",value:function(t){this.rels.set(t.id,t)}},{key:"setLabelInfo",value:function(t,n){this.labelInfo[t]=n}},{key:"has",value:function(t){var n=t.id;return this.rels.has(n)}},{key:"remove",value:function(t){var n=t.id;if(this.rels.has(n)&&(this.rels.delete(n),this.size()>0)){var i=function(a,o){return function(s){if(Array.isArray(s))return s}(a)||function(s,u){var l=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(l!=null){var c,f,d,h,v=[],p=!0,g=!1;try{if(d=(l=l.call(s)).next,u!==0)for(;!(p=(c=d.call(l)).done)&&(v.push(c.value),v.length!==u);p=!0);}catch(y){g=!0,f=y}finally{try{if(!p&&l.return!=null&&(h=l.return(),Object(h)!==h))return}finally{if(g)throw f}}return v}}(a,o)||XN(a,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(this.relArray(),1)[0];this.fromId=i.from,this.toId=i.to}}},{key:"size",value:function(){return this.rels.size}},{key:"relArray",value:function(){return Array.from(this.rels.values())}},{key:"maxFontSize",value:function(){if(this.size()===0)return 1;var t=this.relArray().map(function(n){return(0,Vr.isNumber)(n.captionSize)?n.captionSize:1});return Math.max.apply(Math,function(n){return function(i){if(Array.isArray(i))return N2(i)}(n)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(n)||XN(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}(t))}},{key:"relIsOppositeDirection",value:function(t){var n=t.from,i=t.to,a=this.fromId,o=this.toId;return n!==a&&i!==o||n===o&&i===a}},{key:"indexOf",value:function(t){var n=t.id,i=Array.from(this.rels.keys());return this.rels.has(n)?i.indexOf(n):-1}},{key:"getRel",value:function(t){var n=this.relArray();return t<0||t>=n.length?null:n[t]}},{key:"setWaypoints",value:function(t){this.waypointPath=t}},{key:"setAngles",value:function(t){this.angles=t}}],e&&Fie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),KN=PB,ZN=2*Math.PI/50,QN=.1*Math.PI;function ig(r){return ig=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ig(r)}function JN(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=r6(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function e5(r){return function(e){if(Array.isArray(e))return j2(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||r6(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function r6(r,e){if(r){if(typeof r=="string")return j2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?j2(r,e):void 0}}function j2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Uie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n6(n.key),n)}}function t5(r,e,t){return(e=n6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function n6(r){var e=function(t){if(ig(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ig(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return ig(e)=="symbol"?e:e+""}var zie=function(r){var e=[];if(r.length===0)e.push({size:2*Math.PI,start:0});else{for(var t=r.length-1;t>=0;t--){var n=void 0,i=void 0;t===0?(i=r[r.length-1],n=r[t]-r[r.length-1]+2*Math.PI):(i=r[t-1],n=r[t]-r[t-1]),e.push({size:n,start:i})}e.sort(function(a,o){return o.size-a.size})}return e},qie=function(r,e){for(;e>r.length||r[0].size>2*r[e-1].size;)r.push({size:r[0].size/2,start:r[0].start}),r.push({size:r[0].size/2,start:r[0].start+r[0].size/2}),r.shift(),r.sort(function(t,n){return n.size-t.size});return r},Gie=function(){return r=function t(n,i){(function(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),t5(this,"bundles",void 0),t5(this,"nodeToBundles",void 0),this.bundles={},this.nodeToBundles={};var a=n.reduce(function(o,s){return o[s.id]=s,o},{});this.updateData(a,{},{},i)},e=[{key:"getBundle",value:function(t){var n=this.bundles,i=this.nodeToBundles,a=this.generatePairId(t.from,t.to),o=n[a];return o===void 0&&(o=new Bie(a,t.from,t.to),n[a]=o,i[t.from]===void 0&&(i[t.from]=[]),i[t.to]===void 0&&(i[t.to]=[]),i[t.from].push(o),i[t.to].push(o)),o}},{key:"updateData",value:function(t,n,i,a){var o,s=this.bundles,u=this.nodeToBundles,l=function(x,C){var w=u[C].findIndex(function(O){return O===x});w!==-1&&u[C].splice(w,1),u[C].length===0&&delete u[C]},c=[].concat(e5(Object.values(t)),e5(Object.values(i))),f=Object.values(n),d=JN(c);try{for(d.s();!(o=d.n()).done;){var h=o.value;this.getBundle(h).insert(h)}}catch(x){d.e(x)}finally{d.f()}for(var v=0,p=f;v<p.length;v++){var g=p[v],y=this.getBundle(g);y.remove(g),y.size()===0&&(delete s[y.key],l(y,g.from),l(y,g.to))}for(var b=0,m=Object.keys(s);b<m.length;b++){var _=s[m[b]];_.setWaypoints(a["".concat(_.fromId,"-").concat(_.toId)])}}},{key:"updatePositions",value:function(t){for(var n=this.nodeToBundles,i=0,a=Object.keys(t);i<a.length;i++){var o,s=a[i],u=(o=n[s])!==null&&o!==void 0?o:[];if(u.length!==0){var l=u.find(function(O){return O.selfReferring}),c=u.filter(function(O){return!O.selfReferring});if(l!==void 0){var f,d=[],h=JN(c);try{for(h.s();!(f=h.n()).done;){var v=f.value,p=t[v.fromId],g=t[v.toId];if(p!==void 0&&g!==void 0)for(var y=ZN*v.size(),b=p.id===s?Math.atan2(g.y-p.y,g.x-p.x):Math.atan2(p.y-g.y,p.x-g.x),m=0;m<v.size();m++)d.push(b+y/2-m*ZN);else{var _=p===void 0?v.fromId:v.toId;Dr.warn("Arrowbundler: Node with id ".concat(_," is not in position map"))}}}catch(O){h.e(O)}finally{h.f()}var x=d.map(function(O){return(O+2*Math.PI)%(2*Math.PI)}).sort(),C=zie(x);qie(C,l.size());var w=C.map(function(O){return O.start+O.size/2}).slice(0,l.size());l.setAngles(w)}}}}},{key:"generatePairId",value:function(t,n){return[t.toString(),n.toString()].sort(function(i,a){return i.localeCompare(a)}).join("-")}}],e&&Uie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function ag(r){return ag=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ag(r)}function r5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Vie(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,i6(n.key),n)}}function cf(r,e,t){return(e=i6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function i6(r){var e=function(t){if(ag(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ag(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return ag(e)=="symbol"?e:e+""}var __=function(r,e){return(0,Vr.isFinite)(r.x)&&(0,Vr.isFinite)(r.y)&&(0,Vr.isFinite)(e.x)&&(0,Vr.isFinite)(e.y)},ob=function(r,e){if(r===void 0||e===void 0||!__(r,e))return!1;var t=e.x-r.x,n=e.y-r.y,i=Zr();return t*t+n*n<100*i*i},Ui=function(){return r=function t(n,i){(function(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")})(this,t),cf(this,"p1",void 0),cf(this,"p2",void 0),cf(this,"unit",void 0),cf(this,"norm",void 0),cf(this,"length",void 0),cf(this,"vector",void 0),this.p1=n,this.p2=i,this.vector=this.getVector(),this.length=this.getLength(),this.unit=this.getUnitVector(),this.norm=this.getUnitNormalVector()},e=[{key:"getVector",value:function(){return{x:this.p2.x-this.p1.x,y:this.p2.y-this.p1.y}}},{key:"getLength",value:function(){var t=this.vector,n=t.x,i=t.y;return Math.sqrt(n*n+i*i)}},{key:"getUnitVector",value:function(){var t=this.vector,n=this.length;return{x:t.x/n,y:t.y/n}}},{key:"getUnitNormalVector",value:function(){return{x:this.unit.y,y:-this.unit.x}}}],e&&Vie(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),RA=function(r,e,t){var n={x:e.x-r.x,y:e.y-r.y},i=function(l,c){var f=(l.x*c.x+l.y*c.y)/(c.x*c.x+c.y*c.y);return(0,Vr.clamp)(f,0,1)}({x:t.x-r.x,y:t.y-r.y},n),a=r.x+i*n.x,o=r.y+i*n.y,s=a-t.x,u=o-t.y;return Math.sqrt(s*s+u*u)},$ie=function(r,e,t,n){if(e.x===t.x&&e.y===t.y)return e;var i=e.y-r.y,a=r.x-e.x,o=i*r.x+a*r.y,s=n.y-t.y,u=t.x-n.x,l=s*t.x+u*t.y,c=i*u-s*a;return c===0?null:{x:(u*o-a*l)/c,y:(i*l-s*o)/c}},aC=function(r,e,t,n){var i,a,o,s=1e9,u=function(c){for(var f=1;f<arguments.length;f++){var d=arguments[f]!=null?arguments[f]:{};f%2?r5(Object(d),!0).forEach(function(h){cf(c,h,d[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):r5(Object(d)).forEach(function(h){Object.defineProperty(c,h,Object.getOwnPropertyDescriptor(d,h))})}return c}({},r),l={x:0,y:0};for(a=1;a<10;a++)o=.1*a,l.x=Math.pow(1-o,2)*r.x+2*o*(1-o)*t.x+Math.pow(o,2)*e.x,l.y=Math.pow(1-o,2)*r.y+2*o*(1-o)*t.y+Math.pow(o,2)*e.y,a>0&&(s=(i=RA(u,l,n))<s?i:s),u.x=l.x,u.y=l.y;return s},Wie=On(3269),a6=On.n(Wie);function og(r){return og=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},og(r)}function bp(r){return function(e){if(Array.isArray(e))return F2(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||o6(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function n5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function y0(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n5(Object(t),!0).forEach(function(n){Hie(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):n5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Hie(r,e,t){return(e=function(n){var i=function(a){if(og(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var s=o.call(a,"string");if(og(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return og(i)=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function o6(r,e){if(r){if(typeof r=="string")return F2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F2(r,e):void 0}}function F2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var m0="…",i5=function(r){return!(!r||!isNaN(Number(r))||r.toLowerCase()===r.toUpperCase())&&r===r.toUpperCase()},Yie=function(r){var e=r[r.length-1],t=r[r.length-2];return!(!e||!isNaN(Number(e))||e.toLowerCase()===e.toUpperCase())&&!(!t||!isNaN(Number(t))||t.toLowerCase()===t.toUpperCase())&&i5(e)&&!i5(t)},Xie=function(r){return` 	
\r\v`.includes(r)},B2=function(r,e,t,n){for(var i,a=arguments.length>4&&arguments[4]!==void 0&&arguments[4],o=[],s=[],u=0,l=0,c=!1,f=!1,d=0;d<n;d++)o[d]=t(d,n);for(var h,v=function(){i=r.slice(u,p);var g,y=e(i),b=o[l];if(y>b||(g=r[p-1],`
\r\v`.includes(g))){if(!(l<n-1)){if(a)return{v:[]};for(var m=p,_=function(){return r[m-1]};y>b;){for(m-=1;Xie(_());)m-=1;if(!(m-u>1)){i="",f=!0,c=!1;break}i=r.slice(u,m),y=e(i),f=!0,c=!1}return s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:c},{v:s}}c=!1,f=!1;var x=function(w){var O=w.length,A=Math.min(O-1,3);if(O===1)return{hyphen:!1,cnt:0};for(var k=0;k<A;k++){var R=w[w.length-(k+1)];if(R===" "||R.toLowerCase()===R.toUpperCase())return{hyphen:!1,cnt:k+1};var I=w.slice(0,w.length-k);if(Yie(I))return{hyphen:!1,cnt:k+1}}return{hyphen:!0,cnt:1}}(i),C=p-x.cnt;if(x.hyphen)for(i=r.slice(u,C),y=e(i),c=!0;y>b;){if(!(C-u>1)){i=r[u],C=u+1,y=e(i),c=!1;break}C-=1,i=r.slice(u,C),y=e(i),c=!0}else i=(i=r.slice(u,C)).trim();s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:c},u=C,l+=1}},p=1;p<=r.length;p++)if(h=v())return h.v;return i=r.slice(u,r.length),s[l]={text:i,hasEllipsisChar:f,hasHyphenChar:!1},s},a5=function(r,e,t,n,i,a,o,s){r.font="bold ".concat(n,"px ").concat(t).replace(/"/g,"");for(var u=function(v){var p;return(p=r.measureText(v))===null||p===void 0?void 0:p.width},l=a?(o<4?["",""]:[""]).length:0,c=function(v,p){return function(g,y,b){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"top",_=.98*b,x=.89*b,C=.95*b;return y===1?_:y===2?C:y===3&&m==="top"?g===0||g===2?x:_:y===4&&m==="top"?g===0||g===3?.78*b:C:y===5&&m==="top"?g===0||g===4?.65*b:g===1||g===3?x:C:_}(v+l,p+l,i)},f=1,d=[],h=function(){if((d=function(p,g,y,b){var m,_=p.split(/\s/g).filter(function(M){return M.length>0}),x=[],C=null,w=function(M){return g(M)>y(x.length,b)},O=function(M){var N=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!N){if(Array.isArray(M)||(N=o6(M))){N&&(M=N);var F=0,z=function(){};return{s:z,n:function(){return F>=M.length?{done:!0}:{done:!1,value:M[F++]}},e:function(Y){throw Y},f:z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B,U=!0,W=!1;return{s:function(){N=N.call(M)},n:function(){var Y=N.next();return U=Y.done,Y},e:function(Y){W=!0,B=Y},f:function(){try{U||N.return==null||N.return()}finally{if(W)throw B}}}}(_);try{for(O.s();!(m=O.n()).done;){var A=m.value,k=C?"".concat(C," ").concat(A):A;if(g(k)<y(x.length,b))C=k;else{if(C!==null){var R=w(C);x.push({text:C,overflowed:R})}if(C=A,x.length>b)return[]}}}catch(M){O.e(M)}finally{O.f()}if(C){var I=w(C);x.push({text:C,overflowed:I})}return x.length<=b?x:[]}(e,u,c,f)).length===0)d=B2(e,u,c,f,o>f);else if(d.some(function(p){return p.overflowed})){var v=f;d=d.reduce(function(p,g){var y=o-p.length;if(y===0){var b=p[p.length-1];return b.text.endsWith(m0)||(u(b.text)+u(m0)>c(p.length,v)?(p[p.length-1].text=b.text.slice(0,-2),p[p.length-1].hasEllipsisChar=!0):(p[p.length-1].text=b.text,p[p.length-1].hasEllipsisChar=!0)),p}if(g.overflowed){var m=B2(g.text,u,c,y);p=p.concat(m)}else p.push({text:g.text,hasEllipsisChar:!1,hasHyphenChar:!1});return p},[])}else d=d.map(function(p){return y0(y0({},p),{},{hasEllipsisChar:!1,hasHyphenChar:!1})});f+=1};d.length===0;)h();return Array.from(d)},s6=function(){var r=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).reduce(function(e,t,n){var i=t.value;if(i){var a="".concat(n>0&&e.length?", ":"").concat(i);return[].concat(bp(e),[y0(y0({},t),{},{value:a,chars:a.split("").map(function(o,s){var u,l;return n!==0&&e.length?s<2?null:bp((u=t.styles)!==null&&u!==void 0?u:[]):bp((l=t.styles)!==null&&l!==void 0?l:[])})})])}return[]},[]);return{stylesPerChar:r.reduce(function(e,t){return[].concat(bp(e),bp(t.chars))},[]),fullCaption:r.map(function(e){return e.value}).join("")}};function oC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Kie=[[.04,1],[100,2]],Bb=[[.8,1.1],[3,1.6],[8,2.5]],Zie=[[Bb[0][0],1],[100,1.25]],nf=function(r,e){if(r.includes("rgba"))return r;if(r.includes("rgb")){var t=r.substr(r.indexOf("(")+1).replace(")","").split(",");return"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(e,")")}var n=a6().get.rgb(r);return n===null?r:"rgba(".concat(n[0],",").concat(n[1],",").concat(n[2],",").concat(e,")")},xl=function(r,e,t,n){var i=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],a=arguments.length>5&&arguments[5]!==void 0&&arguments[5],o=n.headPosition,s=n.headAngle,u=n.headHeight,l=n.headChinHeight,c=n.headWidth,f=Math.cos(s),d=Math.sin(s),h=function(g,y){return{x:o.x+g*f-y*d,y:o.y+g*d+y*f}},v=[h(l-u,0),h(-u,c/2),h(0,0),h(-u,-c/2)],p={lineWidth:r.lineWidth,strokeStyle:r.strokeStyle,fillStyle:r.fillStyle};r.lineWidth=e,r.strokeStyle=t,r.fillStyle=t,function(g,y,b,m){if(g.beginPath(),y.length>0){var _=y[0];g.moveTo(_.x,_.y)}for(var x=1;x<y.length;x++){var C=y[x];g.lineTo(C.x,C.y)}g.closePath(),b&&g.fill(),m&&g.stroke()}(r,v,i,a),r.lineWidth=p.lineWidth,r.strokeStyle=p.strokeStyle,r.fillStyle=p.fillStyle},Qie=function(r,e,t,n,i){var a=n;i.forEach(function(o){var s=o.width,u=o.color,l=a+s;r.beginPath(),r.fillStyle=u,r.arc(e,t,l,0,2*Math.PI,!1),r.arc(e,t,a,2*Math.PI,0,!0),r.fill(),r.closePath(),a=l})},u6=function(r,e,t,n){r.beginPath(),r.arc(e,t,n,0,2*Math.PI,!1),r.closePath()},o5=function(r,e,t,n,i){r.beginPath(),r.fillStyle=n,u6(r,e,t,i),r.fill(),r.closePath()};function sC(r,e){var t=e.find(function(i){return r<i[0]}),n=e[e.length-1][1];return t!==void 0?t[1]:n}var s5=function(r,e,t,n,i,a,o,s,u,l){var c=n,f=0,d=0,h="".concat(i,"px ").concat(a),v="normal ".concat(h);e.forEach(function(p){var g;r.font=v;var y,b=-((g=r.measureText(p.text))===null||g===void 0?void 0:g.width)/2,m=p.text?function(_){if(Array.isArray(_))return oC(_)}(y=p.text)||function(_){if(typeof Symbol<"u"&&_[Symbol.iterator]!=null||_["@@iterator"]!=null)return Array.from(_)}(y)||function(_,x){if(_){if(typeof _=="string")return oC(_,x);var C={}.toString.call(_).slice(8,-1);return C==="Object"&&_.constructor&&(C=_.constructor.name),C==="Map"||C==="Set"?Array.from(_):C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?oC(_,x):void 0}}(y)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}():[];p.hasHyphenChar||p.hasEllipsisChar||m.push(" "),m.forEach(function(_){var x,C=r.measureText(_).width,w=(x=t[d])!==null&&x!==void 0?x:[],O=w.includes("bold"),A=w.includes("italic");r.font=O&&A?"italic 600 ".concat(h):A?"italic 400 ".concat(h):O?"bold ".concat(h):v,w.includes("underline")&&r.fillRect(s+b+f,u+c+.2,C,.2),p.hasEllipsisChar?r.fillText(_,s+b+f-l/2,u+c):r.fillText(_,s+b+f,u+c),f+=C,d+=1}),r.font=v,p.hasHyphenChar&&r.fillText("‐",s+b+f,u+c),p.hasEllipsisChar&&r.fillText(m0,s+b+f-l/2,u+c),f=0,c+=o})},ph=function(r,e){return{x:r.x+e.x,y:r.y+e.y}},l6=function(r,e){return{x:r.x-e.x,y:r.y-e.y}},uh=function(r,e){return{x:r.x*e,y:r.y*e}},Jie=function(r,e){return r.x*e.x+r.y*e.y},Np=function(r,e){return function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}(l6(r,e))},u5=function(r,e){return{x:Math.cos(r)*e,y:Math.sin(r)*e}};function c6(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return l5(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?l5(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function l5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Ub=2*Math.PI,Fl=Math.PI/2,c5=function(r,e,t,n,i,a){var o={x:(r.x+e.x)/2,y:(r.y+e.y)/2},s={x:r.x,y:r.y},u={x:e.x,y:e.y},l=new Ui(u,s),c=function(d,h){var v=0;return d&&(v+=d),h&&(v-=h),v}(n,t);o.x+=c/2*l.unit.x,o.y+=c/2*l.unit.y;var f=a.size()/2-a.indexOf(i);return o.x+=f*l.unit.x,o.y+=f*l.unit.y,o},U2=function(r){var e=Zr(),t=r.size,n=r.selected;return((t??zn)+4+(n===!0?4:0))*e},sb=function(r,e){var t=Zr();r.shadowColor=e.color,r.shadowBlur=e.width*t,r.shadowOffsetX=0,r.shadowOffsetY=0},ub=function(r){r.shadowColor="rgba(0,0,0,0)",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0},kA=function(r,e,t,n,i){var a=arguments.length>5&&arguments[5]!==void 0&&arguments[5],o=function(F){var z=arguments.length>1&&arguments[1]!==void 0&&arguments[1],B=F.norm.x,U=F.norm.y;return z?{x:-B,y:-U}:F.norm},s=Zr(),u=e.indexOf(r),l=(e.size()-1)/2,c=u>l,f=Math.abs(u-l),d=i?17*e.maxFontSize():8,h=(e.size()-1)*d*s,v=function(F,z,B,U,W,Y,H){var J,le=arguments.length>7&&arguments[7]!==void 0&&arguments[7],fe=Zr(),ue=F.size(),ge=ue>1,ve=F.relIsOppositeDirection(Y),de=ve?B:z,ie=ve?z:B,Q=F.waypointPath,re=Q==null?void 0:Q.points,se=Q==null?void 0:Q.from,pe=Q==null?void 0:Q.to,Oe=ob(de,se)&&ob(ie,pe)||ob(ie,se)&&ob(de,pe),Ce=Oe?re[1]:null,Re=Oe?re[re.length-2]:null,be=U2(de),j=U2(ie),G=function(Gt,At){return Math.atan2(Gt.y-At.y,Gt.x-At.x)},$=Math.max(Math.PI,Ub/(ue/2)),te=ge?U*$*(H?1:-1)/((J=de.size)!==null&&J!==void 0?J:zn):0,ce=G(Oe?Ce:ie,de),he=Oe?G(ie,Re):ce,xe=function(Gt,At,hr,or){return{x:Gt.x+Math.cos(At)*hr*(or?-1:1),y:Gt.y+Math.sin(At)*hr*(or?-1:1)}},Ne=function(Gt,At){return xe(de,ce+Gt,At,!1)},We=function(Gt,At){return xe(ie,he-Gt,At,!0)},ot=function(Gt,At){return{x:Gt.x+(At.x-Gt.x)/2,y:Gt.y+(At.y-Gt.y)/2}},Ze=function(Gt,At){return Math.sqrt((Gt.x-At.x)*(Gt.x-At.x)+(Gt.y-At.y)*(Gt.y-At.y))*fe},et=Ne(te,be),Qe=We(te,j),Ye=ge?Ne(0,be):null,Ie=ge?We(0,j):null,ee=200*fe,we=[];if(Oe){var Pe=Ze(et,Ce)<ee;if(ge&&!Pe){var De=ot(Ye,Ce);we.push(new Ui(et,De)),we.push(new Ui(De,Ce))}else we.push(new Ui(et,Ce));for(var Me=2;Me<re.length-1;Me++)we.push(new Ui(re[Me-1],re[Me]));var it=Ze(Qe,Re)<ee;if(ge&&!it){var Fe=ot(Ie,Re);we.push(new Ui(Re,Fe)),we.push(new Ui(Fe,Qe))}else we.push(new Ui(Re,Qe))}else{var ut=ge?Ze(Ye,Ie):0;if(ge&&ut>2*(30*fe+Math.min(be,j)))if(le){var rt=c5(de,ie,be,j,Y,F);we.push(new Ui(et,rt)),we.push(new Ui(rt,Qe))}else{var ft=U*W,Ot=30+be,yt=Math.sqrt(Ot*Ot+ft*ft),nt=30+j,kt=Math.sqrt(nt*nt+ft*ft),St=Ne(0,yt),lr=We(0,kt);we.push(new Ui(et,St)),we.push(new Ui(St,lr)),we.push(new Ui(lr,Qe))}else if(ut>(be+j)/2){var ar=c5(de,ie,be,j,Y,F);we.push(new Ui(et,ar)),we.push(new Ui(ar,Qe))}else we.push(new Ui(et,Qe))}return we}(e,t,n,f,d,r,c,a),p=[],g=v[0],y=o(g,c);p.push({x:g.p1.x+y.x,y:g.p1.y+y.y});for(var b=1;b<v.length;b++)if(e.size()===1)p.push(v[b-1].p2);else{var m=v[b-1],_=v[b],x=o(m,c),C=o(_,c),w=ph(m.p1,uh(x,h/2)),O=ph(m.p2,uh(x,h/2)),A=ph(_.p1,uh(C,h/2)),k=ph(_.p2,uh(C,h/2)),R=null;Jie(x,C)<.99&&(R=$ie(w,O,A,k));var I=R!==null?l6(R,m.p2):uh(x,h/2);p.push(ph(m.p2,uh(I,f/l)))}var M=v[v.length-1],N=o(M,c);return p.push({x:M.p2.x+N.x,y:M.p2.y+N.y}),e.relIsOppositeDirection(r)?p.reverse():p},f5=function(r,e,t,n,i,a,o,s){var u,l=arguments.length>8&&arguments[8]!==void 0&&arguments[8],c=Zr(),f=i.selected,d=i.captions,h=d===void 0?[]:d,v=i.caption,p=v===void 0?"":v,g=i.width,y=i.disabled,b=i.captionAlign,m=b===void 0?"top":b,_=i.captionSize,x=_===void 0?1:_,C=h.length>0?(u=s6(h))===null||u===void 0?void 0:u.fullCaption:p;if(C!==void 0){var w=6*x*c,O=f===!0?"bold":"normal",A=C;r.fillStyle=y===!0?o.fontColor:s,r.font="".concat(O," ").concat(w,"px ").concat('"Open Sans", sans-serif');var k=function(ue){return r.measureText(ue).width},R=(g??1)*(f===!0?1.5:1),I=k(A);if(I>n){var M=B2(A,k,function(){return n},1,!1)[0];A=M.hasEllipsisChar===!0?"".concat(M.text,"..."):A,I=n}var N=Math.cos(t),F=Math.sin(t),z={x:e.x,y:e.y},B=z.x,U=z.y,W=t;l&&(W=t-Fl,B+=2*w*N,U+=2*w*F,W-=Fl);var Y=(1+x)*c,H=m==="bottom"?w/2+R+Y:-(R+Y);r.translate(B,U),r.rotate(W),r.fillText(A,-I/2,H),r.rotate(-W),r.translate(-B,-U);var J=2*H*Math.sin(t),le=2*H*Math.cos(t),fe={position:{x:e.x-J,y:e.y+le},rotation:l?t-Math.PI:t,width:n/c,height:(w+Y)/c};a.setLabelInfo(i.id,fe)}},lb=function(r,e,t,n,i){if(r.beginPath(),r.moveTo(e[0].x,e[0].y),i&&e.length>2){for(var a=1;a<e.length-2;){var o=(e[a].x+e[a+1].x)/2,s=(e[a].y+e[a+1].y)/2;r.quadraticCurveTo(e[a].x,e[a].y,o,s),a+=1}r.quadraticCurveTo(e[a].x,e[a].y,e[a+1].x,e[a+1].y)}else for(var u=1;u<e.length;u++)r.lineTo(e[u].x,e[u].y);r.lineWidth=t,r.strokeStyle=n,r.lineCap="round",r.stroke()},uC=function(r){return r.rings[0].width*Zr()*1.5},d5=function(r){return 6*r*Zr()},h5=function(r,e,t){var n,i;return{widthAlign:e/2*((n=r[0])!==null&&n!==void 0?n:0),heightAlign:t/2*((i=r[1])!==null&&i!==void 0?i:0)}},IA=function(r,e,t){var n,i,a=t.indexOf(r),o=(n=t.angles[a])!==null&&n!==void 0?n:0,s=o-QN/2,u=o+QN/2,l=(i=r.width)!==null&&i!==void 0?i:1,c=Zr(),f=U2(e),d={x:e.x+Math.cos(s)*(f+l/2),y:e.y+Math.sin(s)*(f+l/2)},h={x:e.x+Math.cos(u)*(f+l/2),y:e.y+Math.sin(u)*(f+l/2)},v={x:e.x+Math.cos(o)*(f+35*c),y:e.y+Math.sin(o)*(f+35*c)};return{startAngle:s,endAngle:u,startPoint:d,endPoint:h,apexPoint:v,control1Point:{x:v.x+25*Math.cos(o-Fl)*c/2,y:v.y+25*Math.sin(o-Fl)*c/2},control2Point:{x:v.x+25*Math.cos(o+Fl)*c/2,y:v.y+25*Math.sin(o+Fl)*c/2}}},cb=function(r,e,t,n,i,a){r.beginPath(),r.moveTo(e.x,e.y),r.quadraticCurveTo(i.x,i.y,n.x,n.y),r.quadraticCurveTo(a.x,a.y,t.x,t.y),r.stroke()},eae=function(r,e,t,n,i,a,o,s,u,l){var c=!(arguments.length>10&&arguments[10]!==void 0)||arguments[10];__(t,n)&&(t.id===n.id?function(f,d,h,v,p,g,y,b){var m=arguments.length>8&&arguments[8]!==void 0?arguments[8]:KN,_=d.overlayIcon,x=d.selected,C=d.width,w=d.hovered,O=d.disabled,A=d.color,k=IA(d,h,v),R=k.startPoint,I=k.endPoint,M=k.apexPoint,N=k.control1Point,F=k.control2Point,z=y.rings,B=y.shadow,U=Zr(),W=z[0].color,Y=z[1].color,H=z[0].width*U,J=z[1].width*U,le=40*U,fe=(C??1)*U,ue=fe>1?fe/2:1,ge=9*ue,ve=2*ue,de=7*ue,ie=x===!0,Q=O===!0,re=_!==void 0,se=Math.atan2(I.y-F.y,I.x-F.x),pe=ie?H*Math.sqrt(1+2*ge/de*(2*ge/de)):0,Oe={x:I.x-Math.cos(se)*(.5*ge-ve+pe),y:I.y-Math.sin(se)*(.5*ge-ve+pe)},Ce={headPosition:{x:I.x+Math.cos(se)*(.5*ge-ve-pe),y:I.y+Math.sin(se)*(.5*ge-ve-pe)},headAngle:se,headHeight:ge,headChinHeight:ve,headWidth:de};if(f.save(),f.lineCap="round",ie&&(sb(f,B),f.lineWidth=fe+J,f.strokeStyle=Y,cb(f,R,Oe,M,N,F),xl(f,J,Y,Ce,!1,!0),ub(f),f.lineWidth=fe+H,f.strokeStyle=W,cb(f,R,Oe,M,N,F),xl(f,H,W,Ce,!1,!0)),f.lineWidth=fe,w===!0&&!ie&&!Q){var Re=B.color;sb(f,B),f.strokeStyle=Re,f.fillStyle=Re,cb(f,R,Oe,M,N,F),xl(f,fe,Re,Ce),ub(f)}var be=Q?b.color:A??m;if(f.fillStyle=be,f.strokeStyle=be,cb(f,R,Oe,M,N,F),xl(f,fe,be,Ce),g||re){var j,G=v.indexOf(d),$=(j=v.angles[G])!==null&&j!==void 0?j:0,te=M.x-Math.cos(se)*(pe/4),ce=M.y-Math.sin(se)*(pe/4),he=($+Fl)%Ub,xe=($+Ub)%Ub<Math.PI;if(g&&f5(f,{x:te,y:ce},he,le,d,v,b,m,xe),re){var Ne=_.position,We=Ne===void 0?[0,0]:Ne,ot=_.url,Ze=_.size,et=d5(Ze===void 0?1:Ze),Qe=h5(We,le,et),Ye=Qe.widthAlign,Ie=Qe.heightAlign+(ie?uC(y):0)*(We[1]<0?-1:1);f.save(),f.translate(te,ce),xe?(f.rotate(he-Math.PI),f.translate(2*-Ye,2*-Ie)):f.rotate(he);var ee=et/2,we=-ee+Ye,Pe=-ee+Ie;f.drawImage(p.getImage(ot),we,Pe,et,et),f.restore()}}f.restore()}(r,e,t,i,a,o,s,u,l):function(f,d,h,v,p,g,y,b,m,_){var x=arguments.length>10&&arguments[10]!==void 0?arguments[10]:KN,C=d.overlayIcon,w=d.color,O=d.disabled,A=d.selected,k=d.width,R=d.hovered,I=d.captionAlign,M=A===!0,N=O===!0,F=C!==void 0,z=m.rings,B=m.shadow,U=kA(d,p,h,v,y,b),W=Zr(),Y=function(nn){var Dt,yr=nn.selected===!0?1.5:1;return((Dt=nn.width)!==null&&Dt!==void 0?Dt:1)*yr*Zr()}(d),H=N?_.color:w??x,J=z[0].width*W,le=z[1].width*W,fe=W*(k>1?k/2:1),ue=9*fe,ge=2*fe,ve=7*fe,de=Np(U[U.length-2],U[U.length-1]),ie=2*ue,Q=M?J*Math.sqrt(1+ie/ve*(ie/ve)):0,re=2-Q,se=Math.floor(U.length/2);U.length>2&&M&&de<ue+Q-ge&&(re+=de,Q-=de/2+ge,U.pop(),se=Math.floor(U.length/2));var pe,Oe,Ce=U[U.length-2],Re=U[U.length-1],be=(pe=Ce,Oe=Re,Math.atan2(Oe.y-pe.y,Oe.x-pe.x)),j=ue/2+Q,G=Math.cos(be),$=Math.sin(be);U[U.length-1]={x:Re.x-G*j,y:Re.y-$*j};var te,ce={headPosition:{x:Re.x+G*re,y:Re.y+$*re},headAngle:be,headHeight:ue,headChinHeight:ge,headWidth:ve},he=c6(U);try{for(he.s();!(te=he.n()).done;){var xe=te.value;xe.x=Math.round(xe.x),xe.y=Math.round(xe.y)}}catch(nn){he.e(nn)}finally{he.f()}if(f.save(),M){var Ne=z[0].color,We=z[1].color,ot=Math.atan2(U[1].y-U[0].y,U[1].x-U[0].x),Ze=u5(ot,uC(m));U[0]=ph(U[0],Ze),sb(f,B),lb(f,U,Y+le,We,b),xl(f,le,We,ce,!1,!0),ub(f),lb(f,U,Y+J,Ne,b),xl(f,J,Ne,ce,!1,!0)}if(R===!0&&!M&&!N){var et=B.color;sb(f,B),lb(f,U,Y,et,b),xl(f,Y,et,ce),ub(f)}if(lb(f,U,Y,H,b),xl(f,Y,H,ce),y||F){var Qe,Ye,Ie,ee,we,Pe=h.x>v.x,De=U[se];1&~U.length?(Qe=U[Pe?se:se-1],Ye=U[Pe?se-1:se],Ie=(Qe.x+Ye.x)/2,ee=(Qe.y+Ye.y)/2,we=Math.atan2(Ye.y-Qe.y,Ye.x-Qe.x)):(Qe=U[Pe?se+1:se-1],Ye=U[Pe?se-1:se+1],b?(Ie=(De.x+(Qe.x+Ye.x)/2)/2,ee=(De.y+(Qe.y+Ye.y)/2)/2,we=Pe?Math.atan2(h.y-v.y,h.x-v.x):Math.atan2(v.y-h.y,v.x-h.x)):(Np(De,Qe)>Np(De,Ye)?Ye=De:Qe=De,Ie=(Qe.x+Ye.x)/2,ee=(Qe.y+Ye.y)/2,we=Math.atan2(Ye.y-Qe.y,Ye.x-Qe.x)));var Me=M?u5(we+Fl,uC(m)):{x:0,y:0},it=Np(Qe,Ye);if(y){var Fe=I==="bottom"?1:-1,ut={x:Ie+Me.x*Fe,y:ee+Me.y*Fe};f5(f,ut,we,it,d,p,_,x)}if(F){var rt=C.position,ft=rt===void 0?[0,0]:rt,Ot=C.url,yt=C.size,nt=d5(yt===void 0?1:yt),kt=h5(ft,it,nt),St=kt.widthAlign,lr=kt.heightAlign,ar=ft[1]<0?-1:1,Gt=Me.x*ar,At=Me.y*ar,hr=nt/2;f.translate(Ie,ee),f.rotate(we);var or=-hr+Gt+St,Fr=-hr+At+lr;f.drawImage(g.getImage(Ot),or,Fr,nt,nt),f.rotate(-we),f.translate(-Ie,-ee)}}f.restore()}(r,e,t,n,i,a,o,c,s,u,l))},tae=function(r,e,t,n){var i=arguments.length>4&&arguments[4]!==void 0&&arguments[4],a=arguments.length>5&&arguments[5]!==void 0&&arguments[5];return __(t,n)?t.id===n.id?function(o,s,u){for(var l=IA(o,s,u),c={left:1/0,top:1/0,right:-1/0,bottom:-1/0},f=["startPoint","endPoint","apexPoint","control1Point","control2Point"],d=0;d<f.length;d++){var h=l[f[d]],v=h.x,p=h.y;v<c.left&&(c.left=v),v>c.right&&(c.right=v),p<c.top&&(c.top=p),p>c.bottom&&(c.bottom=p)}return c}(r,t,e):function(o,s,u,l,c,f){var d,h={left:1/0,top:1/0,right:-1/0,bottom:-1/0},v=c6(kA(o,s,u,l,c,f));try{for(v.s();!(d=v.n()).done;){var p=d.value,g=p.x,y=p.y;g<h.left&&(h.left=g),g>h.right&&(h.right=g),y<h.top&&(h.top=y),y>h.bottom&&(h.bottom=y)}}catch(b){v.e(b)}finally{v.f()}return h}(r,e,t,n,i,a):null};function b0(r){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b0(r)}var rae=/^\s+/,nae=/\s+$/;function xt(r,e){if(e=e||{},(r=r||"")instanceof xt)return r;if(!(this instanceof xt))return new xt(r,e);var t=function(n){var i,a,o,s={r:0,g:0,b:0},u=1,l=null,c=null,f=null,d=!1,h=!1;return typeof n=="string"&&(n=function(v){v=v.replace(rae,"").replace(nae,"").toLowerCase();var p,g=!1;if(z2[v])v=z2[v],g=!0;else if(v=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};return(p=Bo.rgb.exec(v))?{r:p[1],g:p[2],b:p[3]}:(p=Bo.rgba.exec(v))?{r:p[1],g:p[2],b:p[3],a:p[4]}:(p=Bo.hsl.exec(v))?{h:p[1],s:p[2],l:p[3]}:(p=Bo.hsla.exec(v))?{h:p[1],s:p[2],l:p[3],a:p[4]}:(p=Bo.hsv.exec(v))?{h:p[1],s:p[2],v:p[3]}:(p=Bo.hsva.exec(v))?{h:p[1],s:p[2],v:p[3],a:p[4]}:(p=Bo.hex8.exec(v))?{r:Ga(p[1]),g:Ga(p[2]),b:Ga(p[3]),a:b5(p[4]),format:g?"name":"hex8"}:(p=Bo.hex6.exec(v))?{r:Ga(p[1]),g:Ga(p[2]),b:Ga(p[3]),format:g?"name":"hex"}:(p=Bo.hex4.exec(v))?{r:Ga(p[1]+""+p[1]),g:Ga(p[2]+""+p[2]),b:Ga(p[3]+""+p[3]),a:b5(p[4]+""+p[4]),format:g?"name":"hex8"}:!!(p=Bo.hex3.exec(v))&&{r:Ga(p[1]+""+p[1]),g:Ga(p[2]+""+p[2]),b:Ga(p[3]+""+p[3]),format:g?"name":"hex"}}(n)),b0(n)=="object"&&(pu(n.r)&&pu(n.g)&&pu(n.b)?(i=n.r,a=n.g,o=n.b,s={r:255*hn(i,255),g:255*hn(a,255),b:255*hn(o,255)},d=!0,h=String(n.r).substr(-1)==="%"?"prgb":"rgb"):pu(n.h)&&pu(n.s)&&pu(n.v)?(l=jp(n.s),c=jp(n.v),s=function(v,p,g){v=6*hn(v,360),p=hn(p,100),g=hn(g,100);var y=Math.floor(v),b=v-y,m=g*(1-p),_=g*(1-b*p),x=g*(1-(1-b)*p),C=y%6;return{r:255*[g,_,m,m,x,g][C],g:255*[x,g,g,_,m,m][C],b:255*[m,m,x,g,g,_][C]}}(n.h,l,c),d=!0,h="hsv"):pu(n.h)&&pu(n.s)&&pu(n.l)&&(l=jp(n.s),f=jp(n.l),s=function(v,p,g){var y,b,m;function _(w,O,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?w+6*(O-w)*A:A<.5?O:A<2/3?w+(O-w)*(2/3-A)*6:w}if(v=hn(v,360),p=hn(p,100),g=hn(g,100),p===0)y=b=m=g;else{var x=g<.5?g*(1+p):g+p-g*p,C=2*g-x;y=_(C,x,v+1/3),b=_(C,x,v),m=_(C,x,v-1/3)}return{r:255*y,g:255*b,b:255*m}}(n.h,l,f),d=!0,h="hsl"),n.hasOwnProperty("a")&&(u=n.a)),u=f6(u),{ok:d,format:n.format||h,r:Math.min(255,Math.max(s.r,0)),g:Math.min(255,Math.max(s.g,0)),b:Math.min(255,Math.max(s.b,0)),a:u}}(r);this._originalInput=r,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}function v5(r,e,t){r=hn(r,255),e=hn(e,255),t=hn(t,255);var n,i,a=Math.max(r,e,t),o=Math.min(r,e,t),s=(a+o)/2;if(a==o)n=i=0;else{var u=a-o;switch(i=s>.5?u/(2-a-o):u/(a+o),a){case r:n=(e-t)/u+(e<t?6:0);break;case e:n=(t-r)/u+2;break;case t:n=(r-e)/u+4}n/=6}return{h:n,s:i,l:s}}function p5(r,e,t){r=hn(r,255),e=hn(e,255),t=hn(t,255);var n,i,a=Math.max(r,e,t),o=Math.min(r,e,t),s=a,u=a-o;if(i=a===0?0:u/a,a==o)n=0;else{switch(a){case r:n=(e-t)/u+(e<t?6:0);break;case e:n=(t-r)/u+2;break;case t:n=(r-e)/u+4}n/=6}return{h:n,s:i,v:s}}function g5(r,e,t,n){var i=[$o(Math.round(r).toString(16)),$o(Math.round(e).toString(16)),$o(Math.round(t).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function y5(r,e,t,n){return[$o(d6(n)),$o(Math.round(r).toString(16)),$o(Math.round(e).toString(16)),$o(Math.round(t).toString(16))].join("")}function iae(r,e){e=e===0?0:e||10;var t=xt(r).toHsl();return t.s-=e/100,t.s=w_(t.s),xt(t)}function aae(r,e){e=e===0?0:e||10;var t=xt(r).toHsl();return t.s+=e/100,t.s=w_(t.s),xt(t)}function oae(r){return xt(r).desaturate(100)}function sae(r,e){e=e===0?0:e||10;var t=xt(r).toHsl();return t.l+=e/100,t.l=w_(t.l),xt(t)}function uae(r,e){e=e===0?0:e||10;var t=xt(r).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(-e/100*255))),t.g=Math.max(0,Math.min(255,t.g-Math.round(-e/100*255))),t.b=Math.max(0,Math.min(255,t.b-Math.round(-e/100*255))),xt(t)}function lae(r,e){e=e===0?0:e||10;var t=xt(r).toHsl();return t.l-=e/100,t.l=w_(t.l),xt(t)}function cae(r,e){var t=xt(r).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,xt(t)}function fae(r){var e=xt(r).toHsl();return e.h=(e.h+180)%360,xt(e)}function m5(r,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=xt(r).toHsl(),n=[xt(r)],i=360/e,a=1;a<e;a++)n.push(xt({h:(t.h+a*i)%360,s:t.s,l:t.l}));return n}function dae(r){var e=xt(r).toHsl(),t=e.h;return[xt(r),xt({h:(t+72)%360,s:e.s,l:e.l}),xt({h:(t+216)%360,s:e.s,l:e.l})]}function hae(r,e,t){e=e||6,t=t||30;var n=xt(r).toHsl(),i=360/t,a=[xt(r)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,a.push(xt(n));return a}function vae(r,e){e=e||6;for(var t=xt(r).toHsv(),n=t.h,i=t.s,a=t.v,o=[],s=1/e;e--;)o.push(xt({h:n,s:i,v:a})),a=(a+s)%1;return o}xt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var r=this.toRgb();return(299*r.r+587*r.g+114*r.b)/1e3},getLuminance:function(){var r,e,t,n=this.toRgb();return r=n.r/255,e=n.g/255,t=n.b/255,.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))},setAlpha:function(r){return this._a=f6(r),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var r=p5(this._r,this._g,this._b);return{h:360*r.h,s:r.s,v:r.v,a:this._a}},toHsvString:function(){var r=p5(this._r,this._g,this._b),e=Math.round(360*r.h),t=Math.round(100*r.s),n=Math.round(100*r.v);return this._a==1?"hsv("+e+", "+t+"%, "+n+"%)":"hsva("+e+", "+t+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var r=v5(this._r,this._g,this._b);return{h:360*r.h,s:r.s,l:r.l,a:this._a}},toHslString:function(){var r=v5(this._r,this._g,this._b),e=Math.round(360*r.h),t=Math.round(100*r.s),n=Math.round(100*r.l);return this._a==1?"hsl("+e+", "+t+"%, "+n+"%)":"hsla("+e+", "+t+"%, "+n+"%, "+this._roundA+")"},toHex:function(r){return g5(this._r,this._g,this._b,r)},toHexString:function(r){return"#"+this.toHex(r)},toHex8:function(r){return function(e,t,n,i,a){var o=[$o(Math.round(e).toString(16)),$o(Math.round(t).toString(16)),$o(Math.round(n).toString(16)),$o(d6(i))];return a&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,r)},toHex8String:function(r){return"#"+this.toHex8(r)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*hn(this._r,255))+"%",g:Math.round(100*hn(this._g,255))+"%",b:Math.round(100*hn(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(100*hn(this._r,255))+"%, "+Math.round(100*hn(this._g,255))+"%, "+Math.round(100*hn(this._b,255))+"%)":"rgba("+Math.round(100*hn(this._r,255))+"%, "+Math.round(100*hn(this._g,255))+"%, "+Math.round(100*hn(this._b,255))+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":!(this._a<1)&&(pae[g5(this._r,this._g,this._b,!0)]||!1)},toFilter:function(r){var e="#"+y5(this._r,this._g,this._b,this._a),t=e,n=this._gradientType?"GradientType = 1, ":"";if(r){var i=xt(r);t="#"+y5(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+t+")"},toString:function(r){var e=!!r;r=r||this._format;var t=!1,n=this._a<1&&this._a>=0;return e||!n||r!=="hex"&&r!=="hex6"&&r!=="hex3"&&r!=="hex4"&&r!=="hex8"&&r!=="name"?(r==="rgb"&&(t=this.toRgbString()),r==="prgb"&&(t=this.toPercentageRgbString()),r!=="hex"&&r!=="hex6"||(t=this.toHexString()),r==="hex3"&&(t=this.toHexString(!0)),r==="hex4"&&(t=this.toHex8String(!0)),r==="hex8"&&(t=this.toHex8String()),r==="name"&&(t=this.toName()),r==="hsl"&&(t=this.toHslString()),r==="hsv"&&(t=this.toHsvString()),t||this.toHexString()):r==="name"&&this._a===0?this.toName():this.toRgbString()},clone:function(){return xt(this.toString())},_applyModification:function(r,e){var t=r.apply(null,[this].concat([].slice.call(e)));return this._r=t._r,this._g=t._g,this._b=t._b,this.setAlpha(t._a),this},lighten:function(){return this._applyModification(sae,arguments)},brighten:function(){return this._applyModification(uae,arguments)},darken:function(){return this._applyModification(lae,arguments)},desaturate:function(){return this._applyModification(iae,arguments)},saturate:function(){return this._applyModification(aae,arguments)},greyscale:function(){return this._applyModification(oae,arguments)},spin:function(){return this._applyModification(cae,arguments)},_applyCombination:function(r,e){return r.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(hae,arguments)},complement:function(){return this._applyCombination(fae,arguments)},monochromatic:function(){return this._applyCombination(vae,arguments)},splitcomplement:function(){return this._applyCombination(dae,arguments)},triad:function(){return this._applyCombination(m5,[3])},tetrad:function(){return this._applyCombination(m5,[4])}},xt.fromRatio=function(r,e){if(b0(r)=="object"){var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=n==="a"?r[n]:jp(r[n]));r=t}return xt(r,e)},xt.equals=function(r,e){return!(!r||!e)&&xt(r).toRgbString()==xt(e).toRgbString()},xt.random=function(){return xt.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},xt.mix=function(r,e,t){t=t===0?0:t||50;var n=xt(r).toRgb(),i=xt(e).toRgb(),a=t/100;return xt({r:(i.r-n.r)*a+n.r,g:(i.g-n.g)*a+n.g,b:(i.b-n.b)*a+n.b,a:(i.a-n.a)*a+n.a})},xt.readability=function(r,e){var t=xt(r),n=xt(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)},xt.isReadable=function(r,e,t){var n,i,a,o,s,u=xt.readability(r,e);switch(i=!1,(o=((a=(a=t)||{level:"AA",size:"small"}).level||"AA").toUpperCase())!=="AA"&&o!=="AAA"&&(o="AA"),(s=(a.size||"small").toLowerCase())!=="small"&&s!=="large"&&(s="small"),(n={level:o,size:s}).level+n.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},xt.mostReadable=function(r,e,t){var n,i,a,o,s=null,u=0;i=(t=t||{}).includeFallbackColors,a=t.level,o=t.size;for(var l=0;l<e.length;l++)(n=xt.readability(r,e[l]))>u&&(u=n,s=xt(e[l]));return xt.isReadable(r,s,{level:a,size:o})||!i?s:(t.includeFallbackColors=!1,xt.mostReadable(r,["#fff","#000"],t))};var z2=xt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},pae=xt.hexNames=function(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}(z2);function f6(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function hn(r,e){(function(n){return typeof n=="string"&&n.indexOf(".")!=-1&&parseFloat(n)===1})(r)&&(r="100%");var t=function(n){return typeof n=="string"&&n.indexOf("%")!=-1}(r);return r=Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(r*e,10)/100),Math.abs(r-e)<1e-6?1:r%e/parseFloat(e)}function w_(r){return Math.min(1,Math.max(0,r))}function Ga(r){return parseInt(r,16)}function $o(r){return r.length==1?"0"+r:""+r}function jp(r){return r<=1&&(r=100*r+"%"),r}function d6(r){return Math.round(255*parseFloat(r)).toString(16)}function b5(r){return Ga(r)/255}var El,fb,db,Bo=(fb="[\\s|\\(]+("+(El="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+El+")[,|\\s]+("+El+")\\s*\\)?",db="[\\s|\\(]+("+El+")[,|\\s]+("+El+")[,|\\s]+("+El+")[,|\\s]+("+El+")\\s*\\)?",{CSS_UNIT:new RegExp(El),rgb:new RegExp("rgb"+fb),rgba:new RegExp("rgba"+db),hsl:new RegExp("hsl"+fb),hsla:new RegExp("hsla"+db),hsv:new RegExp("hsv"+fb),hsva:new RegExp("hsva"+db),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function pu(r){return!!Bo.CSS_UNIT.exec(r)}var gae=function(r){return xt.mostReadable(r,[AA,"#FFFFFF"]).toString()},qg=function(r){return a6().get.rgb(r)},hb=function(r){var e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e),i=qg(r);return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=255*i[3],t[0]},vb=function(r){return[(e=qg(r))[0]/255,e[1]/255,e[2]/255];var e};function yae(r,e){return function(t){if(Array.isArray(t))return t}(r)||function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var a,o,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(a=s.call(i)).done)&&(l.push(a.value),l.length!==n);c=!0);}catch(d){f=!0,o=d}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw o}}return l}}(r,e)||function(t,n){if(t){if(typeof t=="string")return _5(t,n);var i={}.toString.call(t).slice(8,-1);return i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set"?Array.from(t):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_5(t,n):void 0}}(r,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function _5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var mae=function(r){var e=r.x,t=e===void 0?0:e,n=r.y,i=n===void 0?0:n,a=r.size,o=a===void 0?zn:a;return{top:i-o,left:t-o,right:t+o,bottom:i+o}},bae=function(r,e,t,n,i,a){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:AB,s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:1,u=arguments.length>8&&arguments[8]!==void 0?arguments[8]:1,l=e.x,c=l===void 0?0:l,f=e.y,d=f===void 0?0:f,h=e.size,v=h===void 0?zn:h,p=e.caption,g=p===void 0?"":p,y=e.captions,b=y===void 0?[]:y,m=e.captionAlign,_=m===void 0?"center":m,x=e.captionSize,C=x===void 0?1:x,w=e.disabled,O=e.activated,A=e.selected,k=e.hovered,R=e.id,I=e.icon,M=e.overlayIcon,N=Zr(),F=function(Dt,yr,Wr){var Qr=Dt.selected?Wr.selected.rings:Wr.default.rings;if(!Qr.length){var Cn=yr.getById(Dt.id);return Cn!==void 0&&Object.entries(Cn).forEach(function(bn){var Or=yae(bn,2),Rr=Or[0],xr=Or[1];Rr.startsWith("ring-")&&xr.setEndValue(0)}),[{width:0,color:""}]}return Qr.map(function(bn,Or){var Rr=bn.widthFactor,xr=bn.color,Ii=(Dt.size||zn)*Rr*Zr();return{width:yr.getValueForAnimationName(Dt.id,"ring-".concat(Or),Ii),color:xr}})}(e,n,i),z=F.reduce(function(Dt,yr){return Dt+yr.width},0),B=v*N,U=2*B,W=function(Dt,yr){if(!Dt||!yr)return{nodeInfoLevel:0,fontInfoLevel:1.25,iconInfoLevel:1};var Wr=Zr(),Qr=1600*Wr*(1200*Wr),Cn=Math.pow(Dt,2)*Math.PI*Math.pow(yr,2)/(Qr/100);return{nodeInfoLevel:sC(Cn,Kie),fontInfoLevel:sC(Cn,Bb),iconInfoLevel:sC(Cn,Zie)}}(B,u),Y=W.nodeInfoLevel,H=W.fontInfoLevel,J=W.iconInfoLevel,le=e.color||o,fe=function(Dt){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:zn)/({1:3.5,2:2.75,3:2}[arguments.length>2&&arguments[2]!==void 0?arguments[2]:1]+(arguments.length>3&&arguments[3]!==void 0&&arguments[3]?1:0))/Dt}(H,B,C,!!I),ue=gae(le),ge=B;if(z>0&&(ge=B+z),w)le=a.color,ue=a.fontColor;else{var ve;if(O){var de=Date.now()%1e3/1e3,ie=de<.7?de/.7:0,Q=nf(le,.4-.4*ie);o5(r,c,d,Q,B+.88*B*ie)}var re=(ve=i.selected.shadow)!==null&&ve!==void 0?ve:{width:0,opacity:0,color:""},se=re.width*N,pe=re.opacity,Oe=re.color,Ce=A||k?se:0,Re=n.getValueForAnimationName(R,"shadowWidth",Ce);Re>0&&function(Dt,yr,Wr,Qr,Cn,bn){var Or=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,Rr=Cn+bn,xr=Dt.createRadialGradient(yr,Wr,Cn,yr,Wr,Rr);xr.addColorStop(0,"transparent"),xr.addColorStop(.01,nf(Qr,.5*Or)),xr.addColorStop(.05,nf(Qr,.5*Or)),xr.addColorStop(.5,nf(Qr,.12*Or)),xr.addColorStop(.75,nf(Qr,.03*Or)),xr.addColorStop(1,nf(Qr,0)),Dt.fillStyle=xr,u6(Dt,yr,Wr,Rr),Dt.fill()}(r,c,d,Oe,ge,Re,pe)}o5(r,c,d,le,B),z>0&&Qie(r,c,d,B,F);var be=!!g.length,j=!!b.length,G=!!I;if(I){var $=Y<2||!(be||j),te=Y>0?1:0,ce=$?1*B:.75*B;ce/=J;var he=$?.5*ce:ce*(J===1?_==="center"?1.3:_==="bottom"||$?1.1:0:_==="center"?1.35:_==="bottom"||$?1.1:0),xe=ce/2;ce=n.getValueForAnimationName(R,"iconSize",ce),xe=n.getValueForAnimationName(R,"iconXPos",xe),he=n.getValueForAnimationName(R,"iconYPos",he);var Ne=r.globalAlpha,We=w?.1:te;r.globalAlpha=n.getValueForAnimationName(R,"iconOpacity",We);var ot=ue==="#ffffff",Ze=t.getImage(I,ot);r.drawImage(Ze,c-xe,d-he,Math.floor(ce),Math.floor(ce)),r.globalAlpha=Ne}if(M!==void 0){var et,Qe,Ye,Ie,ee,we=U*((et=M.size)!==null&&et!==void 0?et:1),Pe=we/2-B*((Qe=(Ye=M.position)===null||Ye===void 0?void 0:Ye[1])!==null&&Qe!==void 0?Qe:0),De=we/2-B*((Ie=(ee=M.position)===null||ee===void 0?void 0:ee[0])!==null&&Ie!==void 0?Ie:0),Me=r.globalAlpha,it=w?.1:1;r.globalAlpha=n.getValueForAnimationName(R,"iconOpacity",it);var Fe=t.getImage(M.url);r.drawImage(Fe,c-De,d-Pe,we,we),r.globalAlpha=Me}if(be||j){var ut=Y<2?0:1,rt=n.getValueForAnimationName(R,"textOpacity",ut,0);if(rt>0){var ft,Ot,yt='"Open Sans", sans-serif',nt=2;H===((ft=Bb[1])===null||ft===void 0?void 0:ft[1])?nt=3:H===((Ot=Bb[2])===null||Ot===void 0?void 0:Ot[1])&&(nt=4);var kt=_==="center"?.7*U:2*Math.sqrt(Math.pow(U/2,2)-Math.pow(U/3,2));if(r.fillStyle=nf(ue,rt),j){var St,lr=s6(b),ar=lr.stylesPerChar,Gt=lr.fullCaption,At=a5(r,Gt,yt,fe,kt,G,nt,e==null||e.captionAlign),hr=-(At.length-2)*fe/2;St=_&&_!=="center"?_==="bottom"?hr+B/Math.PI:hr-B/Math.PI:hr,s5(r,At,ar,St,fe,yt,fe,c,d,s)}else if(be){var or=a5(r,g,yt,fe,kt,G,nt,e==null||e.captionAlign),Fr=-(or.length-2)*fe/2,nn=g.split("").map(function(Dt){return[]});s5(r,or,nn,Fr,fe,yt,fe,c,d,s)}}}};function sg(r){return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sg(r)}function w5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ji(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w5(Object(t),!0).forEach(function(n){ea(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):w5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function lh(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return x5(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?x5(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function x5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function _ae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,h6(n.key),n)}}function ea(r,e,t){return(e=h6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function h6(r){var e=function(t){if(sg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(sg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return sg(e)=="symbol"?e:e+""}var Ol="canvasRenderer",wae=function(){return r=function t(n,i,a){var o=this,s=(arguments.length>3&&arguments[3]!==void 0?arguments[3]:{}).relationshipThreshold,u=s===void 0?0:s;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),ea(this,"arrowBundler",void 0),ea(this,"activeNodes",void 0),ea(this,"canvas",void 0),ea(this,"context",void 0),ea(this,"state",void 0),ea(this,"stateDisposers",void 0),ea(this,"relationshipThreshold",void 0),ea(this,"animationHandler",void 0),ea(this,"imageCache",void 0),ea(this,"needsRun",void 0),ea(this,"nodeVersion",void 0),ea(this,"relVersion",void 0),ea(this,"waypointVersion",void 0),ea(this,"ellipsisWidth",void 0),i!==null&&(this.activeNodes=new Set,this.canvas=n,this.context=i,this.state=a,this.stateDisposers=[],this.stateDisposers.push(a.autorun(function(){a.zoom!==void 0&&(o.needsRun=!0),a.panX!==void 0&&(o.needsRun=!0),a.panY!==void 0&&(o.needsRun=!0),a.nodes.version!==void 0&&(o.needsRun=!0),a.rels.version!==void 0&&(o.needsRun=!0),a.waypoints.counter>0&&(o.needsRun=!0),a.layout!==void 0&&(o.needsRun=!0)})),a.nodes.addChannel(Ol),a.rels.addChannel(Ol),this.relationshipThreshold=u,this.nodeVersion=a.nodes.version,this.relVersion=a.rels.version,this.waypointVersion=a.waypoints.counter,this.animationHandler=new Mie,this.animationHandler.setOptions({fadeDuration:150,sizeDuration:150}),this.arrowBundler=new Gie(a.rels.items,a.waypoints.data),this.imageCache=new jie,this.needsRun=!0,this.ellipsisWidth=i.measureText(m0).width)},e=[{key:"needsToRun",value:function(){return this.needsRun||this.animationHandler.needsToRun()||this.activeNodes.size>0}},{key:"processUpdates",value:function(){var t=this.state,n=!1,i=t.nodes.channels[Ol],a=t.rels.channels[Ol],o=a.adds,s=a.removes,u=a.updates;this.nodeVersion<t.nodes.version&&(this.handleChannelUpdate(i,t.nodes,!0),this.nodeVersion=t.nodes.version,t.nodes.clearChannel(Ol)),this.relVersion<t.rels.version&&(n=Object.keys(o).length>0||Object.keys(s).length>0||Object.keys(u).length>0,t.rels.clearChannel(Ol),this.relVersion=t.rels.version),(n||this.waypointVersion<t.waypoints.counter)&&(this.arrowBundler.updateData(o,s,u,t.waypoints.data),this.waypointVersion=t.waypoints.counter)}},{key:"render",value:function(t){var n,i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.state,s=this.animationHandler,u=this.arrowBundler,l=o.zoom,c=o.layout,f=o.nodes.idToPosition,d=(n=a.canvas)!==null&&n!==void 0?n:this.canvas,h=(i=a.context)!==null&&i!==void 0?i:this.context,v=Zr(),p=d.clientWidth*v,g=d.clientHeight*v;h.save(),a.backgroundColor!==void 0?(h.fillStyle=a.backgroundColor,h.fillRect(0,0,p,g)):h.clearRect(0,0,p,g),this.zoomAndPan(h,d),s.ignoreAnimations(!!a.ignoreAnimations),a.ignoreAnimations||s.advance(),u.updatePositions(f);var y=this.getRelationshipsToRender(a.showCaptions,p,g);this.renderRelationships(y,h,c!==Fb);var b=this.getNodesToRender(t,p,g);this.renderNodes(b,h,l),h.restore(),this.needsRun=!1}},{key:"getRelationshipsToRender",value:function(t,n,i){var a,o=[],s=[],u=[],l=this.arrowBundler,c=this.state,f=this.relationshipThreshold,d=c.layout,h=c.zoom,v=c.rels,p=c.nodes,g=p.idToItem,y=p.idToPosition,b=lh(v.items);try{for(b.s();!(a=b.n()).done;){var m=a.value,_=l.getBundle(m),x=Ji(Ji({},g[m.from]),y[m.from]),C=Ji(Ji({},g[m.to]),y[m.to]),w=t||h>f||m.captionHtml!==void 0,O=tae(m,_,x,C,w,d!==Fb);if(O!==null){var A,k,R,I,M,N,F=this.isBoundingBoxOffScreen(O,n,i),z=Np({x:(A=x.x)!==null&&A!==void 0?A:0,y:(k=x.y)!==null&&k!==void 0?k:0},{x:(R=C.x)!==null&&R!==void 0?R:0,y:(I=C.y)!==null&&I!==void 0?I:0}),B=(((M=x.size)!==null&&M!==void 0?M:zn)+((N=C.size)!==null&&N!==void 0?N:zn))*devicePixelRatio,U=x.id!==C.id&&B>z;F||U||(m.disabled?s.push(Ji(Ji({},m),{},{fromNode:x,toNode:C,showLabel:w})):m.selected?o.push(Ji(Ji({},m),{},{fromNode:x,toNode:C,showLabel:w})):u.push(Ji(Ji({},m),{},{fromNode:x,toNode:C,showLabel:w})))}}}catch(W){b.e(W)}finally{b.f()}return[].concat(s,u,o)}},{key:"getNodesToRender",value:function(t,n,i){var a,o=[],s=[],u=[],l=this.state.nodes.idToItem,c=lh(t);try{for(c.s();!(a=c.n()).done;){var f=a.value,d=mae(f);this.isBoundingBoxOffScreen(d,n,i)||(l[f.id].disabled?o.push(Ji({},f)):l[f.id].selected?s.push(Ji({},f)):u.push(Ji({},f)))}}catch(h){c.e(h)}finally{c.f()}return[].concat(o,u,s)}},{key:"renderNodes",value:function(t,n,i){var a,o=this.imageCache,s=this.animationHandler,u=this.state,l=this.ellipsisWidth,c=u.nodes.idToItem,f=u.nodeBorderStyles,d=u.disabledItemStyles,h=u.defaultNodeColor,v=lh(t);try{for(v.s();!(a=v.n()).done;){var p=a.value;bae(n,Ji(Ji({},c[p.id]),p),o,s,f,d,h,l,i)}}catch(g){v.e(g)}finally{v.f()}}},{key:"renderRelationships",value:function(t,n,i){var a,o=this.state.relationshipBorderStyles.selected,s=this.arrowBundler,u=this.imageCache,l=this.state,c=l.disabledItemStyles,f=l.defaultRelationshipColor,d=lh(t);try{for(d.s();!(a=d.n()).done;){var h=a.value,v=s.getBundle(h),p=h.fromNode,g=h.toNode,y=h.showLabel;eae(n,h,p,g,v,u,y,o,c,f,i)}}catch(b){d.e(b)}finally{d.f()}}},{key:"getNodesAt",value:function(t){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=[],o=this.state.nodes,s=o.items,u=o.idToPosition,l=Zr(),c=lh(s);try{var f=function(){var d=n.value,h=d.id,v=d.size,p=v===void 0?zn:v,g=u[h],y=g.x,b=g.y,m=Math.sqrt(Math.pow(t.x-y,2)+Math.pow(t.y-b,2));if(m<=(p+i)*l){var _=a.findIndex(function(x){return x.distance>m});a.splice(_!==-1?_:a.length,0,{data:d,targetCoordinates:{x:y,y:b},pointerCoordinates:t,distanceVector:{x:t.x-y,y:t.y-b},insideNode:m<=p*l,distance:m})}};for(c.s();!(n=c.n()).done;)f()}catch(d){c.e(d)}finally{c.f()}return a}},{key:"getRelsAt",value:function(t){var n,i=[],a=this.state,o=this.arrowBundler,s=this.relationshipThreshold,u=a.zoom,l=a.rels.items,c=a.nodes.idToPosition,f=a.layout,d=u>s,h=lh(l);try{var v=function(){var p=n.value,g=o.getBundle(p),y=c[p.from],b=c[p.to];if(y!==void 0&&b!==void 0&&g.has(p)){var m=function(x,C,w,O,A,k){var R=arguments.length>6&&arguments[6]!==void 0&&arguments[6];if(!__(w,O))return 1/0;var I=w===O?function(M,N,F,z){var B=IA(N,F,z),U=B.startPoint,W=B.endPoint,Y=B.apexPoint,H=B.control1Point,J=B.control2Point,le=aC(U,Y,H,M),fe=aC(Y,W,J,M);return Math.min(le,fe)}(x,C,w,A):function(M,N,F,z,B,U,W){var Y=kA(N,F,z,B,U,W),H=1/0;if(W&&Y.length===3)H=aC(Y[0],Y[2],Y[1],M);else for(var J=1;J<Y.length;J++){var le=Y[J-1],fe=Y[J],ue=RA(le,fe,M);H=ue<H?ue:H}return H}(x,C,A,w,O,k,R);return I}(t,p,y,b,g,d,f!==Fb);if(m<10){var _=i.findIndex(function(x){return x.distance>m});i.splice(_!==-1?_:i.length,0,{data:p,fromTargetCoordinates:y,toTargetCoordinates:b,pointerCoordinates:t,distance:m})}}};for(h.s();!(n=h.n()).done;)v()}catch(p){h.e(p)}finally{h.f()}return i}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){t()}),this.state.nodes.removeChannel(Ol),this.state.rels.removeChannel(Ol)}},{key:"isBoundingBoxOffScreen",value:function(t,n,i){var a=this.state,o=a.zoom,s=n/o,u=i/o,l=a.panX-s/2,c=a.panY-u/2,f=t.right<l,d=t.bottom<c,h=t.left>l+s,v=t.top>c+u;return f||h||d||v}},{key:"handleChannelUpdate",value:function(t,n,i){for(var a=Object.keys(t.adds),o=0;o<a.length;o++){var s=a[o];t.adds[s].activated&&this.activeNodes.add(s)}for(var u=Object.keys(t.removes),l=0;l<u.length;l++){var c=u[l];this.activeNodes.delete(c)}if(i)for(var f=Object.keys(t.updates),d=0;d<f.length;d++){var h=f[d];n.idToItem[h].activated?this.activeNodes.add(h):this.activeNodes.delete(h)}}},{key:"zoomAndPan",value:function(t,n){var i=n.width,a=n.height,o=this.state,s=o.zoom,u=o.panX,l=o.panY;t.translate(-i/2*s,-a/2*s),t.translate(-u*s,-l*s),t.scale(s,s),t.translate(i/2/s,a/2/s),t.translate(i/2,a/2)}}],e&&_ae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),v6=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=function(o,s){if((0,Vr.isNil)(o)||(0,Vr.isNil)(s))return{offsetX:0,offsetY:0};var u=s.getBoundingClientRect(),l=window.devicePixelRatio||1;return{offsetX:l*(o.clientX-u.left-.5*u.width),offsetY:l*(o.clientY-u.top-.5*u.height)}}(r,e);return{x:n+a.offsetX/t,y:i+a.offsetY/t}};function ug(r){return ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ug(r)}function p6(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function xae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,y6(n.key),n)}}function g6(r,e,t){return e&&xae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function bo(r,e,t){return(e=y6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function y6(r){var e=function(t){if(ug(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(ug(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return ug(e)=="symbol"?e:e+""}var go="WebGLRenderer",Eae=function(){return g6(function r(e){var t=this;if(p6(this,r),bo(this,"mainSceneRenderer",void 0),bo(this,"minimapRenderer",void 0),bo(this,"needsRun",void 0),bo(this,"minimapMouseDown",void 0),bo(this,"stateDisposers",void 0),bo(this,"state",void 0),e.state===void 0)throw new Error("Renderer missing options: state - state object");var n=e.state,i=e.mainSceneRenderer,a=e.minimapRenderer,o=n.nodes,s=n.rels;this.mainSceneRenderer=i,this.minimapRenderer=a,this.needsRun=!1,this.minimapMouseDown=!1,this.stateDisposers=[],this.stateDisposers.push(n.autorun(function(){t.updateMainViewport(n.zoom,n.panX,n.panY)})),this.stateDisposers.push(n.autorun(function(){t.updateMinimapViewport(n.minimapZoom,n.minimapPanX,n.minimapPanY)})),this.stateDisposers.push(n.autorun(function(){n.nodes.version!==void 0&&(t.needsRun=!0),n.rels.version!==void 0&&(t.needsRun=!0)})),o.addChannel(go),s.addChannel(go),this.state=n,this.setupMinimapInteractions()},[{key:"needsToRun",value:function(){return this.needsRun||Object.keys(this.mainSceneRenderer.activeNodes).length>0}},{key:"renderMainScene",value:function(r){var e=this.state,t=e.nodes,n=e.rels;this.checkForUpdates(t,n),this.mainSceneRenderer.render(r,t,n),this.needsRun=!1}},{key:"renderMinimap",value:function(r){var e=this.state,t=e.nodes,n=e.rels;this.checkForUpdates(t,n),this.minimapRenderer.render(r,t,n),this.minimapRenderer.renderViewbox(),this.needsRun=!1}},{key:"checkForUpdates",value:function(r,e){var t=Object.values(r.channels[go].adds).length>0,n=Object.values(e.channels[go].adds).length>0,i=Object.values(r.channels[go].removes).length>0,a=Object.values(e.channels[go].removes).length>0,o=Object.values(r.channels[go].updates),s=Object.values(e.channels[go].updates);t||n||i||a?(this.mainSceneRenderer.setData({nodes:r.items,rels:e.items}),this.minimapRenderer.setData({nodes:r.items,rels:e.items})):(o.length>0&&(this.mainSceneRenderer.updateNodes(o),this.minimapRenderer.updateNodes(o)),s.length>0&&(this.mainSceneRenderer.updateRelationships(e.items),this.minimapRenderer.updateRelationships(e.items))),r.clearChannel(go),e.clearChannel(go)}},{key:"onResize",value:function(){var r=this.state,e=r.zoom,t=r.panX,n=r.panY,i=r.minimapZoom,a=r.minimapPanX,o=r.minimapPanY;this.updateMainViewport(e,t,n),this.updateMinimapViewport(i,a,o)}},{key:"updateMainViewport",value:function(r,e,t){this.mainSceneRenderer.updateViewport(r,e,t);var n=this.mainSceneRenderer.canvas.clientWidth,i=this.mainSceneRenderer.canvas.clientHeight;this.minimapRenderer.updateViewportBox(r,e,t,n,i),this.needsRun=!0}},{key:"updateMinimapViewport",value:function(r,e,t){this.minimapRenderer.updateViewport(r,e,t),this.needsRun=!0}},{key:"handleMinimapDrag",value:function(r){var e=this.state,t=this.minimapRenderer,n=v6(r,t.canvas,e.minimapZoom,e.minimapPanX,e.minimapPanY),i=n.x,a=n.y;e.setPan(i,a)}},{key:"handleMinimapWheel",value:function(r){var e=this.state,t=this.mainSceneRenderer;e.setZoom(function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return(0,Vr.isNil)(n)||isNaN(n.deltaY)?i:i-n.deltaY/500*Math.min(1,i)}(r,e.zoom),t.canvas),r.preventDefault()}},{key:"setupMinimapInteractions",value:function(){var r=this,e=this.minimapRenderer.canvas;e.addEventListener("mousedown",function(t){r.handleMinimapDrag(t),r.minimapMouseDown=!0}),e.addEventListener("mousemove",function(t){r.minimapMouseDown&&r.handleMinimapDrag(t)}),e.addEventListener("mouseup",function(){r.minimapMouseDown=!1}),e.addEventListener("mouseleave",function(){r.minimapMouseDown=!1}),e.addEventListener("wheel",function(t){r.handleMinimapWheel(t)})}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(r){r()}),this.state.nodes.removeChannel(go),this.state.rels.removeChannel(go),this.mainSceneRenderer.destroy(),this.minimapRenderer.destroy()}}])}(),Oae=function(){return g6(function r(){p6(this,r),bo(this,"mainSceneRenderer",void 0),bo(this,"minimapRenderer",void 0),bo(this,"needsRun",void 0),bo(this,"minimapMouseDown",void 0),bo(this,"stateDisposers",void 0),bo(this,"state",void 0)},[{key:"renderMainScene",value:function(r){}},{key:"renderMinimap",value:function(r){}},{key:"checkForUpdates",value:function(r,e){}},{key:"onResize",value:function(){}},{key:"updateMainViewport",value:function(r,e,t){}},{key:"updateMinimapViewport",value:function(r,e,t){}},{key:"handleMinimapDrag",value:function(r){}},{key:"handleMinimapWheel",value:function(r){}},{key:"setupMinimapInteractions",value:function(){}},{key:"destroy",value:function(){}},{key:"needsToRun",value:function(){return!1}}])}();function lg(r){return lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lg(r)}function lC(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return E5(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?E5(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function E5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Sae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,m6(n.key),n)}}function dn(r,e,t){return(e=m6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function m6(r){var e=function(t){if(lg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(lg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return lg(e)=="symbol"?e:e+""}var q2,Oi=24,O5=function(){return r=function t(n,i,a,o){var s;if(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")}(this,t),dn(this,"nodeShader",void 0),dn(this,"nodeAnimShader",void 0),dn(this,"relShader",void 0),dn(this,"relDataBuffer",void 0),dn(this,"viewportBoxShader",void 0),dn(this,"defaultRelColor",void 0),dn(this,"defaultNodeColor",void 0),dn(this,"disableRelColor",void 0),dn(this,"disableNodeColor",void 0),dn(this,"gl",void 0),dn(this,"activeNodes",void 0),dn(this,"canvas",void 0),dn(this,"projection",void 0),dn(this,"idToIndex",void 0),dn(this,"posBuffer",void 0),dn(this,"numRels",void 0),dn(this,"numNodes",void 0),dn(this,"nodeDataByte",void 0),dn(this,"relIdToIndex",void 0),dn(this,"relData",void 0),dn(this,"viewportBoxBuffer",void 0),dn(this,"relBuffer",void 0),dn(this,"nodeBuffer",void 0),dn(this,"posTexture",void 0),((s=n.getExtension("OES_texture_float"))!==null&&s!==void 0?s:void 0)===void 0)throw new Error("Renderer needs floating point texture support");this.nodeShader=new jl(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;
uniform lowp vec3 u_nodeBorderColor;
uniform lowp vec3 u_selectedBorderColor;
uniform lowp vec3 u_selectedInnerBorderColor;
uniform lowp vec3 u_shadowColor;
uniform lowp float u_drawDefaultBorder;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_selected;
attribute lowp float a_hovered;

varying lowp float window;
varying lowp vec4 color;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float drawDefaultBorder;

lowp float MinNodeSize = 5.0;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);
  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  lowp float nodeSize = a_size * u_zoom * u_glAdjust;
  if (nodeSize < MinNodeSize) {
   gl_PointSize = MinNodeSize;
   varNodeSize = MinNodeSize;
  } else {
    gl_PointSize = nodeSize;
    varNodeSize = nodeSize;
  }

  color = a_color;
  selected = a_selected;
  hovered = a_hovered;
  nodeBorderColor = u_nodeBorderColor;
  selectedBorderColor = u_selectedBorderColor;
  selectedInnerBorderColor = u_selectedInnerBorderColor;
  shadowColor = u_shadowColor;
  drawDefaultBorder = u_drawDefaultBorder;
}`,`uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float drawDefaultBorder;
varying lowp vec3 nodeBorderColor;
varying lowp vec3 selectedBorderColor;
varying lowp vec3 selectedInnerBorderColor;
varying lowp vec3 shadowColor;
varying lowp float selected;
varying lowp float hovered;
varying lowp float varNodeSize;

mediump float circleSize = 0.40;
mediump float defaultBoderSize = 0.42;
mediump float innerSelectedRingSize = 0.43;
mediump float outerSelectedRingSize = 0.47;
mediump float shadowSize = 0.51;

lowp float getShadowAlpha(lowp float size, lowp float dist) {
  return (1.0 - smoothstep(size, shadowSize, dist)) * 0.25;
}

lowp float getCircleAlpha(lowp float ringSize, lowp float nodeSize, lowp float dist) {
  return color.w - smoothstep(ringSize - nodeSize, ringSize, dist);
}

void main() {
  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float nodeSize = 1.0 / varNodeSize;
    lowp float nodeAlpha = getCircleAlpha(circleSize, nodeSize, dist);
    lowp float borderAlpha = getCircleAlpha(defaultBoderSize, nodeSize, dist);
    lowp float ringAlpha = getCircleAlpha(innerSelectedRingSize, nodeSize, dist);
    lowp vec3 finalColor = color.xyz;
    lowp float finalAlpha = nodeAlpha;

    if (selected > 0.0) {
      lowp float shadowAlpha = getShadowAlpha(outerSelectedRingSize, dist);
      lowp float ringAlpha2 = getCircleAlpha(outerSelectedRingSize, nodeSize, dist);

      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedInnerBorderColor, finalColor, borderAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(borderAlpha, ringAlpha2)));
      } else {
        finalColor = mix(selectedInnerBorderColor, finalColor, nodeAlpha);
        finalColor = mix(selectedBorderColor, finalColor, ringAlpha);
        finalColor = mix(shadowColor, finalColor, ringAlpha2);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, max(ringAlpha, ringAlpha2)));
      }
    } else if (hovered > 0.0) {
      if (drawDefaultBorder > 0.0) {
        lowp float shadowAlpha = getShadowAlpha(defaultBoderSize, dist);
  
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalColor = mix(shadowColor, finalColor, borderAlpha);
        finalAlpha = max(shadowAlpha, max(nodeAlpha, ringAlpha));
      } else {
        lowp float shadowAlpha = getShadowAlpha(circleSize, dist);

        finalColor = mix(shadowColor, finalColor, nodeAlpha);
        finalAlpha = max(shadowAlpha, nodeAlpha);
      }
    } else {
      if (drawDefaultBorder > 0.0) {
        finalColor = mix(nodeBorderColor, finalColor, nodeAlpha);
        finalAlpha = borderAlpha;
      }
    }
    gl_FragColor = vec4(finalColor, 1.0) * finalAlpha;
  }
}
`),this.nodeAnimShader=new jl(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform lowp float u_animPos;
uniform mediump float u_zoom;
uniform mediump float u_glAdjust;

attribute float a_size;
attribute lowp vec2 a_index;
attribute lowp vec4 a_color;
attribute lowp float a_active;

varying lowp float varNodeSize;
varying lowp vec4 color;

void main(void) {
  vec4 data = texture2D(u_positions, a_index);

  gl_Position = u_projection * vec4(data.xy, 0.0, 1.0);

  float nodeSize = a_size * u_zoom * u_glAdjust;
  nodeSize = nodeSize * (0.4 / 0.5); // Remove extra space added for shadow and selection ring

  gl_PointSize = a_active > 0.5
    ? nodeSize + 0.88 * nodeSize * u_animPos
    : 0.0;

  color = a_color;
  varNodeSize = a_size;
}`,`uniform mediump float u_zoom;
uniform lowp float u_animPos;
uniform mediump float u_glAdjust;

varying lowp vec4 color;
varying lowp float varNodeSize;
mediump float circleSize = 0.50;

void main(void) {

  lowp float dist = distance(gl_PointCoord, vec2(0.5));

  if (dist > 0.51) {
    discard;
  }
  else {
    lowp float alpha = 1.0 - smoothstep(circleSize - (1.0 / (varNodeSize * 2.0 * u_zoom * u_glAdjust)), circleSize, dist);
    lowp float pulseAlpha = 0.9 - 0.9 * u_animPos;
    gl_FragColor = vec4(color.xyz, 1.0) * alpha * pulseAlpha;
  }
}
`),this.relShader=new jl(n,`uniform mat4 u_projection;
uniform sampler2D u_positions;
uniform mediump float u_glAdjust;

attribute vec2 a_from;
attribute vec2 a_to;
attribute lowp vec4 a_color;
attribute lowp float a_triside;
attribute float a_width;

varying lowp vec4 color;

void main(void) {
  vec4 from = texture2D(u_positions, a_from);
  vec4 to = texture2D(u_positions, a_to);
  vec2 direction = normalize(to.xy - from.xy);
  direction = vec2(-direction.y, direction.x);

  float width = a_width * u_glAdjust * 0.5;

  if (a_triside == 0.0) {
    from.y += (width / 2.0) * direction.y;
    from.x += (width / 2.0) * direction.x;
  } else {
    from.y -= (width / 2.0) * direction.y;
    from.x -= (width / 2.0) * direction.x;
  }

  color = a_color;
  gl_Position = u_projection * vec4(from.xy, 0.0, 1.0);
}
`,`varying lowp vec4 color;

void main(void) {
  gl_FragColor = vec4(color.xyz, 1.0) * color.w;
}
`),this.viewportBoxShader=new jl(n,`
attribute vec2 coordinates;
uniform mat4 u_projection;
uniform lowp vec4 u_minimapViewportBoxColor;

varying lowp vec4 minimapViewportBoxColor;

void main(void) {
  gl_Position = u_projection * vec4(coordinates, 0.0, 1.0);
  minimapViewportBoxColor = u_minimapViewportBoxColor;
}
`,`
varying lowp vec4 minimapViewportBoxColor;

void main(void) {
 gl_FragColor = minimapViewportBoxColor;
}
`),this.setShaderUniforms(o),n.clearColor(0,0,0,0),n.disable(n.DEPTH_TEST),this.defaultRelColor=o.defaultRelationshipColor,this.defaultNodeColor=o.defaultNodeColor,this.disableRelColor=o.disabledItemStyles.color,this.disableNodeColor=o.disabledItemStyles.color,n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),this.gl=n,this.activeNodes={},this.canvas=n.canvas,this.projection=g0(),this.setData({nodes:i.items,rels:a.items}),this.createPositionTexture(),this.setupViewportRendering(o.minimapViewportBoxColor)},e=[{key:"setShaderUniforms",value:function(t){var n,i,a,o,s,u=t.nodeBorderStyles,l=null;((n=u.default)===null||n===void 0?void 0:n.rings.length)>0&&(l=(s=u.default.rings[0])===null||s===void 0?void 0:s.color);var c,f,d=null,h=null,v=(i=(a=u.selected)===null||a===void 0?void 0:a.rings)!==null&&i!==void 0?i:[],p=v.length;p>1&&(h=(c=v[p-2])===null||c===void 0?void 0:c.color,d=(f=v[p-1])===null||f===void 0?void 0:f.color);var g=null;(o=u.selected)!==null&&o!==void 0&&o.shadow&&(g=u.selected.shadow.color),this.nodeShader.use(),(0,Vr.isNil)(l)?this.nodeShader.setUniform("u_drawDefaultBorder",0):(this.nodeShader.setUniform("u_nodeBorderColor",vb(l)),this.nodeShader.setUniform("u_drawDefaultBorder",1));var y=vb(d),b=vb(h),m=vb(g);this.nodeShader.setUniform("u_selectedBorderColor",y),this.nodeShader.setUniform("u_selectedInnerBorderColor",b),this.nodeShader.setUniform("u_shadowColor",m)}},{key:"setData",value:function(t){var n=x2(t.rels,this.disableRelColor);this.setupNodeRendering(t.nodes),this.setupRelationshipRendering(n)}},{key:"render",value:function(t,n,i){var a,o=this.gl,s=this.idToIndex,u=lC(t);try{for(u.s();!(a=u.n()).done;){var l=a.value,c=s[l.id];this.posBuffer[4*c+0]=l.x,this.posBuffer[4*c+1]=l.y}}catch(f){u.e(f)}finally{u.f()}o.bindTexture(o.TEXTURE_2D,this.posTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,Nt,Nt,0,o.RGBA,o.FLOAT,this.posBuffer),o.enable(o.BLEND),o.bindFramebuffer(o.FRAMEBUFFER,null),o.clear(o.COLOR_BUFFER_BIT),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),this.renderAnimations(this.posTexture),this.numRels>0&&(this.relShader.use(),this.relShader.setUniform("u_positions",this.posTexture),o.bindBuffer(o.ARRAY_BUFFER,this.relBuffer),this.relShader.setAttributePointerByteNorm("a_color",4,0,16),this.relShader.setAttributePointerByteNorm("a_from",2,4,16),this.relShader.setAttributePointerByteNorm("a_to",2,6,16),this.relShader.setAttributePointerByteNorm("a_triside",1,8,16),this.relShader.setAttributePointerFloat("a_width",1,12,16),o.drawArrays(o.TRIANGLES,0,6*this.numRels)),this.numNodes>0&&(this.nodeShader.use(),this.nodeShader.setUniform("u_positions",this.posTexture),o.bindBuffer(o.ARRAY_BUFFER,this.nodeBuffer),this.nodeShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeShader.setAttributePointerByteNorm("a_selected",1,4,12),this.nodeShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeShader.setAttributePointerByte("a_size",4,8,12),this.nodeShader.setAttributePointerByteNorm("a_hovered",1,9,12),o.drawArrays(o.POINTS,0,this.numNodes))}},{key:"renderViewbox",value:function(){var t=this.gl,n=this.projection,i=this.viewportBoxBuffer;this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_projection",n),t.bindBuffer(t.ARRAY_BUFFER,i),this.viewportBoxShader.setAttributePointerFloat("coordinates",2,0,0),t.drawArrays(t.LINES,0,8)}},{key:"updateNodes",value:function(t){var n,i=this.gl,a=this.idToIndex,o=this.disableNodeColor,s=this.nodeBuffer,u=this.nodeDataByte,l=!1,c=lC(t);try{for(c.s();!(n=c.n()).done;){var f=n.value,d=a[f.id];if(!(0,Vr.isNil)(f.color)||f.disabled===!0){var h=qg(f.disabled===!0?o:f.color);this.nodeDataByte[3*d*4+0]=h[0],this.nodeDataByte[3*d*4+1]=h[1],this.nodeDataByte[3*d*4+2]=h[2],this.nodeDataByte[3*d*4+3]=255*h[3],l=!0}if(f.selected!==void 0){var v=f.selected;this.nodeDataByte[3*d*4+4]=v?255:0,l=!0}if(f.activated!==void 0&&(this.nodeDataByte[3*d*4+7]=f.activated?255:0,l=!0,f.activated?this.activeNodes[f.id]=!0:delete this.activeNodes[f.id]),f.hovered!==void 0){var p=f.disabled!==!0&&f.hovered;this.nodeDataByte[3*d*4+9]=p?255:0,l=!0}if(f.size!==void 0){var g=f.size;this.nodeDataByte[3*d*4+8]=g||zn,l=!0}}}catch(y){c.e(y)}finally{c.f()}l&&(i.bindBuffer(i.ARRAY_BUFFER,s),i.bufferData(i.ARRAY_BUFFER,u,i.DYNAMIC_DRAW))}},{key:"updateRelationships",value:function(t){var n,i=x2(t,this.disableRelColor),a=this.gl,o=!1,s=lC(i);try{for(s.s();!(n=s.n()).done;){var u=n.value,l=u.key,c=u.width,f=u.color,d=u.disabled,h=this.relIdToIndex[l],v=(0,Vr.isNil)(f)?this.defaultRelColor:f,p=hb(d?this.disableRelColor:v);this.relData.positionsAndColors[h*Oi+0]=p,this.relData.positionsAndColors[h*Oi+4]=p,this.relData.positionsAndColors[h*Oi+8]=p,this.relData.positionsAndColors[h*Oi+12]=p,this.relData.positionsAndColors[h*Oi+16]=p,this.relData.positionsAndColors[h*Oi+20]=p,o=!0,c!==void 0&&(this.relData.widths[h*Oi+3]=c,this.relData.widths[h*Oi+7]=c,this.relData.widths[h*Oi+11]=c,this.relData.widths[h*Oi+15]=c,this.relData.widths[h*Oi+19]=c,this.relData.widths[h*Oi+23]=c,o=!0)}}catch(g){s.e(g)}finally{s.f()}o&&(a.bindBuffer(a.ARRAY_BUFFER,this.relBuffer),a.bufferData(a.ARRAY_BUFFER,this.relDataBuffer,a.DYNAMIC_DRAW))}},{key:"createPositionTexture",value:function(){var t=this.gl,n=t.createTexture(),i=new Float32Array(262144);t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,Nt,Nt,0,t.RGBA,t.FLOAT,i),this.posTexture=n,this.posBuffer=i}},{key:"updateViewportBox",value:function(t,n,i,a,o){var s=this.gl,u=Zr(),l=a*u,c=o*u,f=(.5*l+n*t)/t,d=(.5*c+i*t)/t,h=(.5*-l+n*t)/t,v=(.5*-c+i*t)/t,p=[f,d,h,d,h,d,h,v,h,v,f,v,f,v,f,d];s.bindBuffer(s.ARRAY_BUFFER,this.viewportBoxBuffer),s.bufferData(s.ARRAY_BUFFER,new Float32Array(p),s.DYNAMIC_DRAW)}},{key:"updateViewport",value:function(t,n,i){var a=this.gl,o=1/t,s=n-a.drawingBufferWidth*o*.5,u=i-a.drawingBufferHeight*o*.5,l=a.drawingBufferWidth*o,c=a.drawingBufferHeight*o,f=g0(),d=qne*Zr();A2(f,s,s+l,u+c,u,0,1e6),this.nodeShader.use(),this.nodeShader.setUniform("u_zoom",t),this.nodeShader.setUniform("u_glAdjust",d),this.nodeShader.setUniform("u_projection",f),this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_zoom",t),this.nodeAnimShader.setUniform("u_glAdjust",d),this.nodeAnimShader.setUniform("u_projection",f),this.relShader.use(),this.relShader.setUniform("u_glAdjust",d),this.relShader.setUniform("u_projection",f),this.projection=f}},{key:"setupViewportRendering",value:function(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AA;this.viewportBoxBuffer=this.gl.createBuffer(),this.viewportBoxShader.use(),this.viewportBoxShader.setUniform("u_minimapViewportBoxColor",[(t=qg(n))[0]/255,t[1]/255,t[2]/255,t[3]])}},{key:"setupNodeRendering",value:function(t){var n=this.gl,i=new ArrayBuffer(8),a=new Uint32Array(i),o=new Uint8Array(i);this.nodeBuffer===void 0&&(this.nodeBuffer=n.createBuffer()),this.numNodes=t.length;var s=new ArrayBuffer(3*t.length*8),u=new Uint32Array(s),l={};this.activeNodes={};for(var c=0;c<t.length;c++){var f=t[c],d=f.selected,h=f.hovered,v=f.color,p=f.activated,g=f.size,y=f.id,b=f.disabled,m=hb((0,Vr.isNil)(v)?this.defaultNodeColor:v);u[3*c+0]=b?hb(this.disableNodeColor):m,o[0]=d?255:0,o[1]=c%Nt,o[2]=Math.floor(c/Nt),o[3]=p?255:0,o[4]=!b&&h?255:0,p&&(this.activeNodes[y]=!0),u[3*c+1]=a[0],u[3*c+2]=g??zn,u[3*c+3]=a[1],l[y]=c}n.bindBuffer(n.ARRAY_BUFFER,this.nodeBuffer),n.bufferData(n.ARRAY_BUFFER,u,n.DYNAMIC_DRAW),this.numNodes=t.length,this.nodeDataByte=new Uint8Array(s),this.idToIndex=l}},{key:"setupRelationshipRendering",value:function(t){var n=this,i=this.gl,a=new ArrayBuffer(4),o=new Uint32Array(a),s=new Uint8Array(a),u={};this.relBuffer===void 0&&(this.relBuffer=i.createBuffer());for(var l=new ArrayBuffer(t.length*Oi*4),c=new Uint32Array(l),f=new Float32Array(l),d=function(v){var p=t[v],g=p.from,y=p.to,b=p.color,m=p.width,_=m===void 0?1:m,x=p.key,C=p.disabled,w=n.idToIndex[g],O=n.idToIndex[y],A=w%Nt,k=Math.floor(w/Nt),R=O%Nt,I=Math.floor(O/Nt),M=[A,k,R,I],N=[R,I,A,k],F=(0,Vr.isNil)(b)?n.defaultRelColor:b,z=hb(C?n.disableRelColor:F);u[x]=v;var B=0,U=function(W,Y,H,J){c[v*Oi+B]=W,B+=1;for(var le=0;le<Y.length;le++)s[le]=Y[le];c[v*Oi+B]=o[0],B+=1,s[0]=H,c[v*Oi+B]=o[0],f[v*Oi+(B+=1)]=J,B+=1};U(z,M,255,_),U(z,N,0,_),U(z,M,0,_),U(z,N,0,_),U(z,M,0,_),U(z,N,255,_)},h=0;h<t.length;h++)d(h);i.bindBuffer(i.ARRAY_BUFFER,this.relBuffer),i.bufferData(i.ARRAY_BUFFER,l,i.DYNAMIC_DRAW),this.numRels=t.length,this.relDataBuffer=l,this.relData={positionsAndColors:c,widths:f},this.relIdToIndex=u}},{key:"renderAnimations",value:function(t){var n=this.gl,i=this.nodeBuffer,a=this.numNodes,o=Date.now()%1e3/1e3,s=o<.7?o/.7:0;this.nodeAnimShader.use(),this.nodeAnimShader.setUniform("u_positions",t),this.nodeAnimShader.setUniform("u_animPos",s),n.bindBuffer(n.ARRAY_BUFFER,i),this.nodeAnimShader.setAttributePointerByteNorm("a_color",4,0,12),this.nodeAnimShader.setAttributePointerByteNorm("a_active",1,7,12),this.nodeAnimShader.setAttributePointerByteNorm("a_index",2,5,12),this.nodeAnimShader.setAttributePointerByte("a_size",4,8,12),n.drawArrays(n.POINTS,0,a)}},{key:"destroy",value:function(){this.gl.deleteBuffer(this.nodeBuffer),this.gl.deleteBuffer(this.relBuffer),this.nodeShader.remove(),this.nodeAnimShader.remove(),this.relShader.remove()}}],e&&Sae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),b6=function(r,e,t){var n=Zr();r.width=e*n,r.height=t*n,r.style.width="".concat(e,"px"),r.style.height="".concat(t,"px")},_6=function(r){Dr.warn("Error: WebGL context lost - visualization will stop working!",r),q2!==void 0&&q2(r)},zb=function(r){var e=r.parentElement,t=e.getBoundingClientRect(),n=t.width,i=t.height;n!==0||i!==0||e.isConnected||(n=parseInt(e.style.width,10)||0,i=parseInt(e.style.height,10)||0),b6(r,n,i)},cC=function(r,e){var t=document.createElement("canvas");return Object.assign(t.style,MB),r!==void 0&&(r.appendChild(t),zb(t)),function(n,i){q2=i,n.addEventListener("webglcontextlost",_6)}(t,e),t},ch=function(r){r.width=0,r.height=0,r.remove()},S5=function(r){var e={antialias:!0},t=r.getContext("webgl",e);return t===null&&(t=r.getContext("experimental-webgl",e)),function(n){return n instanceof WebGLRenderingContext}(t)?t:null},C5=function(r){r.canvas.removeEventListener("webglcontextlost",_6);var e=r.getExtension("WEBGL_lose_context");e==null||e.loseContext()};function pb(r){return function(e){if(Array.isArray(e))return V2(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||w6(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function G2(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=w6(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function w6(r,e){if(r){if(typeof r=="string")return V2(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?V2(r,e):void 0}}function V2(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var Cae=zn*Zr();function cg(r){return cg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cg(r)}function T5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gb(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?T5(Object(t),!0).forEach(function(n){Tae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):T5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tae(r,e,t){return(e=function(n){var i=function(a){if(cg(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var s=o.call(a,"string");if(cg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return cg(i)=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var _0=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:50,t={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},n=0;n<r.length;n++)t.minX>r[n].x&&(t.minX=r[n].x),t.minY>r[n].y&&(t.minY=r[n].y),t.maxX<r[n].x&&(t.maxX=r[n].x),t.maxY<r[n].y&&(t.maxY=r[n].y);var i=(t.minX+t.maxX)/2,a=(t.minY+t.maxY)/2,o=2*e,s=Zr()*o;return{centerX:i,centerY:a,nodesWidth:t.maxX-t.minX+o+s,nodesHeight:t.maxY-t.minY+o+s}},$2=function(r,e,t,n){var i=1/0,a=1/0;return r>1&&(i=t/r),e>1&&(a=n/e),{zoomX:i,zoomY:a}},x6=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/0,i=Math.min(r,e);return Math.min(n,Math.max(t,i))},fg=function(r,e,t,n){return Math.max(Math.min(e,t),Math.min(r,n))},fC=function(r,e,t,n,i,a){var o=e;return function(s,u,l){return s<u&&s<l}(i,a,e)&&r.length>1?(o=function(s,u,l){var c=function(p){var g=new Array(4).fill(p[0]);return p.forEach(function(y){g[0]=y.x<g[0].x?g[0]:gb({},y),g[1]=y.y<g[1].y?g[1]:gb({},y),g[2]=y.x<g[2].x?gb({},y):g[2],g[3]=y.y<g[3].y?gb({},y):g[3]}),g}(s),f=function(){for(var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=0,y=0,b=0;b<p.length;b++)for(var m=b+1;m<p.length;m++)g=Math.hypot(Math.abs(p[b].x-p[m].x),Math.abs(p[b].y-p[m].y)),y=Math.max(y,g);return y}(c),d=2*l,h=Zr()*d,v=u.height<=u.width?u.height-d-h:u.width-d-h;return f>v?.9*v/f:.9*f/v}(r,n,25),fg(i,a,Math.min(e,o),t)):fg(i,a,e,t)};function dg(r){return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dg(r)}function Aae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,E6(n.key),n)}}function E6(r){var e=function(t){if(dg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(dg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return dg(e)=="symbol"?e:e+""}var Pae=function(){return r=function t(){var n,i,a;(function(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")})(this,t),n=this,a=void 0,(i=E6(i="callbacks"))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,this.callbacks={}},e=[{key:"register",value:function(t,n){this.isCallbackRegistered(t)||(this.callbacks[t]=[]),this.callbacks[t].push(n)}},{key:"isCallbackRegistered",value:function(t){return this.callbacks[t]!==void 0}},{key:"callIfRegistered",value:function(){var t,n=arguments,i=Array.prototype.slice.call(arguments)[0];t=i,Cne.includes(t)&&this.isCallbackRegistered(i)&&this.callbacks[i].slice(0).forEach(function(a){return a.apply(null,Array.prototype.slice.call(n,1))})}}],e&&Aae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}(),Rae=On(481),dC=On.n(Rae);function hg(r){return hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hg(r)}function kae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,O6(n.key),n)}}function Sl(r,e,t){return(e=O6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function O6(r){var e=function(t){if(hg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(hg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return hg(e)=="symbol"?e:e+""}var A5=5e-5,Iae=function(){return r=function t(n){var i,a=this,o=n.state,s=n.getNodePositions,u=n.canvas;(function(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")})(this,t),Sl(this,"xCtrl",void 0),Sl(this,"yCtrl",void 0),Sl(this,"zoomCtrl",void 0),Sl(this,"getNodePositions",void 0),Sl(this,"firstUpdate",void 0),Sl(this,"state",void 0),Sl(this,"canvas",void 0),Sl(this,"stateDisposers",void 0),this.state=o,this.getNodePositions=s,this.canvas=u,this.xCtrl=new(dC())(.35,A5,.05,1),this.yCtrl=new(dC())(.35,A5,.05,1),this.zoomCtrl=new(dC())(.3,1e-5,.01,1),this.stateDisposers=[],this.stateDisposers.push(o.autorun(function(){o.fitNodeIds===null&&(a.xCtrl.reset(),a.yCtrl.reset(),a.zoomCtrl.reset())})),this.stateDisposers.push(o.autorun(function(){i!==o.fitNodeIds&&(i=o.fitNodeIds,a.firstUpdate=!0)})),this.stateDisposers.push(o.autorun(function(){o.resetZoom&&(a.firstUpdate=!0)}))},e=[{key:"needsToRun",value:function(){var t=this.state,n=t.fitNodeIds,i=t.resetZoom;return n.length>0||i}},{key:"update",value:function(t,n){var i=this.state,a=i.fitNodeIds,o=i.resetZoom;a.length>0?this.fitNodes(a,t,n):o&&this.reset(t,n)}},{key:"destroy",value:function(){this.stateDisposers.forEach(function(t){return t()})}},{key:"recalculateTarget",value:function(t,n,i,a){for(var o=this.xCtrl,s=this.yCtrl,u=this.zoomCtrl,l=this.state,c=[],f=0;f<t.length;f++)c.push({id:t[f]});var d=l.zoom,h=l.panX,v=l.panY,p=l.maxNodeRadius,g=l.nodes,y=l.defaultZoomLevel,b=this.getNodePositions(c);g.updatePositions(b);var m=_0(b,p),_=m.centerX,x=m.centerY,C=m.nodesWidth,w=m.nodesHeight;if(isNaN(_)||isNaN(x))return Dr.info("fit() function couldn't calculate center point, not updating viewport"),!1;var O=n.noPan,A=n.outOnly,k=n.minZoom,R=n.maxZoom;o.setTarget(O?h:_),s.setTarget(O?v:x);var I=$2(C,w,i,a),M=I.zoomX,N=I.zoomY;if(M===1/0&&N===1/0)u.setTarget(y);else{var F=x6(M,N,k,R);A&&d<F?u.setTarget(d):u.setTarget(F)}return!0}},{key:"allNodesAreVisible",value:function(t,n,i){var a=$2(n,i,this.canvas.width,this.canvas.height),o=a.zoomX,s=a.zoomY;return t<o&&t<s}},{key:"reset",value:function(t,n){var i=this.xCtrl,a=this.yCtrl,o=this.zoomCtrl,s=this.state,u=this.firstUpdate,l=this.canvas,c=s.zoom,f=s.panX,d=s.panY,h=s.nodes,v=s.maxNodeRadius,p=s.defaultZoomLevel;if(u||t){o.setTarget(p);var g=_0(Object.values(h.idToPosition),v),y=g.centerX,b=g.centerY,m=g.nodesWidth,_=g.nodesHeight;this.allNodesAreVisible(c,m,_)?(i.setTarget(y),a.setTarget(b)):(i.setTarget(f),a.setTarget(d)),this.firstUpdate=!1}var x=c+o.update(c),C=f+i.update(f),w=d+a.update(d);s.updateZoomToFit(x,C,w,l),Math.abs(o.target-x)<.01&&(s.updateZoomToFit(p,C,w,l),s.clearReset(),n!==void 0&&n())}},{key:"fitNodes",value:function(t,n,i){var a=this.state,o=this.firstUpdate,s=this.canvas,u=this.xCtrl,l=this.yCtrl,c=this.zoomCtrl,f=a.zoomOptions,d=f===void 0?{}:f,h=a.zoom,v=a.panX,p=a.panY,g=!0;if(o||n){var y=s.width,b=s.height;g=this.recalculateTarget(t,d,y,b),this.firstUpdate=!1}if(g){if(!d.animated)return a.setZoomPan(c.target,u.target,l.target,s),void a.clearFit();var m=v+u.update(v),_=p+l.update(p),x=h+c.update(h);a.updateZoomToFit(x,m,_,s);var C=Math.max(5,10/c.target),w=Math.min(.01,.01*c.target);!n&&Math.abs(c.target-x)<w&&Math.abs(u.target-m)<C&&Math.abs(l.target-_)<C&&(a.setZoom(c.target,s),a.clearFit(),i!==void 0&&i())}}}],e&&kae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function vg(r){return vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vg(r)}function W2(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(h,v,p,g){var y=v&&v.prototype instanceof s?v:s,b=Object.create(y.prototype);return Va(b,"_invoke",function(m,_,x){var C,w,O,A=0,k=x||[],R=!1,I={p:0,n:0,v:r,a:M,f:M.bind(r,4),d:function(N,F){return C=N,w=0,O=r,I.n=F,o}};function M(N,F){for(w=N,O=F,e=0;!R&&A&&!z&&e<k.length;e++){var z,B=k[e],U=I.p,W=B[2];N>3?(z=W===F)&&(O=B[(w=B[4])?5:(w=3,3)],B[4]=B[5]=r):B[0]<=U&&((z=N<2&&U<B[1])?(w=0,I.v=F,I.n=B[1]):U<W&&(z=N<3||B[0]>F||F>W)&&(B[4]=N,B[5]=F,I.n=W,w=0))}if(z||N>1)return o;throw R=!0,F}return function(N,F,z){if(A>1)throw TypeError("Generator is already running");for(R&&F===1&&M(F,z),w=F,O=z;(e=w<2?r:O)||!R;){C||(w?w<3?(w>1&&(I.n=-1),M(w,O)):I.n=O:I.v=O);try{if(A=2,C){if(w||(N="next"),e=C[N]){if(!(e=e.call(C,O)))throw TypeError("iterator result is not an object");if(!e.done)return e;O=e.value,w<2&&(w=0)}else w===1&&(e=C.return)&&e.call(C),w<2&&(O=TypeError("The iterator does not provide a '"+N+"' method"),w=1);C=r}else if((e=(R=I.n<0)?O:m.call(_,I))!==o)break}catch(B){C=r,w=1,O=B}finally{A=1}}return{value:e,done:R}}}(h,p,g),!0),b}var o={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(Va(e={},n,function(){return this}),e),f=l.prototype=s.prototype=Object.create(c);function d(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,l):(h.__proto__=l,Va(h,i,"GeneratorFunction")),h.prototype=Object.create(f),h}return u.prototype=l,Va(f,"constructor",l),Va(l,"constructor",u),u.displayName="GeneratorFunction",Va(l,i,"GeneratorFunction"),Va(f),Va(f,i,"Generator"),Va(f,n,function(){return this}),Va(f,"toString",function(){return"[object Generator]"}),(W2=function(){return{w:a,m:d}})()}function Va(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Va=function(a,o,s,u){if(o)i?i(a,o,{value:s,enumerable:!u,configurable:!u,writable:!u}):a[o]=s;else{var l=function(c,f){Va(a,c,function(d){return this._invoke(c,f,d)})};l("next",0),l("throw",1),l("return",2)}},Va(r,e,t,n)}function P5(r,e,t,n,i,a,o){try{var s=r[a](o),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function R5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function k5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Bi(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?k5(Object(t),!0).forEach(function(n){rr(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):k5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Dae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,S6(n.key),n)}}function rr(r,e,t){return(e=S6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function S6(r){var e=function(t){if(vg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(vg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return vg(e)=="symbol"?e:e+""}var yb="NvlController",mb={filename:"visualisation.png",backgroundColor:"rgba(0,0,0,0)"},fh="onError",I5="onLayoutDone",D5="onLayoutStep",w0={},_p=function(){var r;return(r=w0[arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default"])!==null&&r!==void 0?r:Object.values(w0).pop()},Mae=function(){return r=function i(a,o){var s,u,l,c=this;(function(B,U){if(!(B instanceof U))throw new TypeError("Cannot call a class as a function")})(this,i),rr(this,"destroyed",void 0),rr(this,"state",void 0),rr(this,"callbacks",void 0),rr(this,"instanceId",void 0),rr(this,"glController",void 0),rr(this,"webGLContext",void 0),rr(this,"webGLMinimapContext",void 0),rr(this,"htmlOverlay",void 0),rr(this,"hasResized",void 0),rr(this,"hierarchicalLayout",void 0),rr(this,"gridLayout",void 0),rr(this,"freeLayout",void 0),rr(this,"d3ForceLayout",void 0),rr(this,"forceLayout",void 0),rr(this,"canvasRenderer",void 0),rr(this,"glCanvas",void 0),rr(this,"canvasRect",void 0),rr(this,"glMinimapCanvas",void 0),rr(this,"c2dCanvas",void 0),rr(this,"isInRenderSwitchAnimation",void 0),rr(this,"justSwitchedRenderer",void 0),rr(this,"justSwitchedLayout",void 0),rr(this,"layoutUpdating",void 0),rr(this,"layoutComputing",void 0),rr(this,"isRenderingDisabled",void 0),rr(this,"setRenderSwitchAnimation",void 0),rr(this,"stateDisposers",void 0),rr(this,"zoomTransitionHandler",void 0),rr(this,"currentLayout",void 0),rr(this,"layoutTimeLimit",void 0),rr(this,"pixelRatio",void 0),rr(this,"removeResizeListener",void 0),rr(this,"removeMinimapResizeListener",void 0),rr(this,"pendingZoomOperation",void 0),rr(this,"layoutRunner",void 0),rr(this,"animationRequestId",void 0),rr(this,"layoutDoneCallback",void 0),rr(this,"layoutComputingCallback",void 0),rr(this,"currentLayoutType",void 0),rr(this,"descriptionElement",void 0),this.destroyed=!1;var f=o.frame,d=o.minimapContainer,h=d===void 0?document.createElement("span"):d,v=o.layoutOptions,p=o.layout,g=o.instanceId,y=g===void 0?"default":g,b=o.disableAria,m=b!==void 0&&b,_=a.nodes,x=a.rels,C=a.webGLVisible,w=a.disableWebGL;this.state=a,this.callbacks=new Pae,this.instanceId=y;var O=f;O.setAttribute("instanceId",y),O.setAttribute("data-testid","nvl-parent"),(s=O.style.height)!==null&&s!==void 0&&s.length||Object.assign(O.style,{height:"100%"}),(u=O.style.outline)!==null&&u!==void 0&&u.length||Object.assign(O.style,{outline:"none"}),this.descriptionElement=m?document.createElement("div"):function(B,U){var W;B.setAttribute("role","img"),B.setAttribute("aria-label","Graph visualization");var Y="nvl-".concat(U,"-description"),H=(W=document.getElementById(Y))!==null&&W!==void 0?W:document.createElement("div");return H.innerHTML="",H.id="nvl-".concat(U,"-description"),H.setAttribute("role","status"),H.setAttribute("aria-live","polite"),H.setAttribute("aria-atomic","false"),H.style.display="none",B.appendChild(H),B.setAttribute("aria-describedby",H.id),H}(O,y);var A=cC(O,this.onWebGLContextLost.bind(this)),k=cC(h,this.onWebGLContextLost.bind(this));if(A.setAttribute("data-testid","nvl-gl-canvas"),w)this.glController=new Oae;else{var R=S5(A),I=S5(k);this.glController=new Eae({mainSceneRenderer:new O5(R,_,x,this.state),minimapRenderer:new O5(I,_,x,this.state),state:a}),this.webGLContext=R,this.webGLMinimapContext=I}var M=cC(O,this.onWebGLContextLost.bind(this));M.setAttribute("data-testid","nvl-c2d-canvas");var N=M.getContext("2d"),F=document.createElement("div");Object.assign(F.style,Bi(Bi({},MB),{},{overflow:"hidden"})),O.appendChild(F),this.htmlOverlay=F,this.hasResized=!0,this.hierarchicalLayout=new Rie(Bi(Bi({},v),{},{state:this.state})),this.gridLayout=new mie({state:this.state}),this.freeLayout=new pie({state:this.state}),this.d3ForceLayout=new Xne({state:this.state}),this.forceLayout=w?this.d3ForceLayout:new die(Bi(Bi({},v),{},{webGLContext:this.webGLContext,state:this.state})),this.state.setLayout(p),this.state.setLayoutOptions(v);var z=new wae(M,N,a,o);this.canvasRenderer=z,this.glCanvas=A,this.canvasRect=A.getBoundingClientRect(),this.glMinimapCanvas=k,this.c2dCanvas=M,this.glCanvas.style.opacity=C?"1":"0",this.c2dCanvas.style.opacity=C?"0":"1",this.isInRenderSwitchAnimation=!1,this.justSwitchedRenderer=!1,this.justSwitchedLayout=!1,this.hasResized=!1,this.layoutUpdating=!1,this.layoutComputing=!1,this.isRenderingDisabled=!1,_.addChannel(yb),x.addChannel(yb),this.setRenderSwitchAnimation=function(){c.isInRenderSwitchAnimation=!1},this.stateDisposers=[],this.stateDisposers.push(a.autorun(function(){c.callIfRegistered("zoom",a.zoom)})),this.stateDisposers.push(a.autorun(function(){c.callIfRegistered("pan",{panX:a.panX,panY:a.panY})})),this.stateDisposers.push(a.autorun(function(){c.setLayout(a.layout)})),this.stateDisposers.push(a.autorun(function(){c.setLayoutOptions(a.layoutOptions)})),m||this.stateDisposers.push(a.autorun(function(){(function(B,U){var W=B.nodes,Y=B.rels,H=B.layout,J=W.items.length,le=Y.items.length;if(J!==0||le!==0){var fe="".concat(J," node").concat(J!==1?"s":""),ue="".concat(le," relationship").concat(le!==1?"s":""),ge="displayed using a ".concat(H??"forceDirected"," layout");U.innerHTML="A graph visualization with ".concat(fe," and ").concat(ue,", ").concat(ge,".")}else U.innerHTML="An empty graph visualization."})(a,c.descriptionElement)})),this.stateDisposers.push(a.autorun(function(){var B=a.webGLVisible?"1":"0";B!==c.glCanvas.style.opacity&&(c.justSwitchedRenderer=!0,c.glCanvas.style.opacity=B,c.c2dCanvas.style.opacity=a.webGLVisible?"0":"1")})),this.startMainLoop(),this.zoomTransitionHandler=new Iae({state:a,getNodePositions:function(B){return c.currentLayout.getNodePositions(B)},canvas:A}),this.layoutTimeLimit=(l=o.layoutTimeLimit)!==null&&l!==void 0?l:16,this.pixelRatio=Zr(),this.removeResizeListener=mN()(O,function(){zb(A),zb(M),c.canvasRect=A.getBoundingClientRect(),c.hasResized=!0}),this.removeMinimapResizeListener=mN()(h,function(){zb(k)}),w0[y]=this,window.__Nvl_dumpNodes=function(B){var U;return(U=_p(B))===null||U===void 0?void 0:U.dumpNodes()},window.__Nvl_dumpRelationships=function(B){var U;return(U=_p(B))===null||U===void 0?void 0:U.dumpRelationships()},window.__Nvl_registerDoneCallback=function(B,U){var W;return(W=_p(U))===null||W===void 0?void 0:W.on(I5,B)},window.__Nvl_getNodesOnScreen=function(B){var U;return(U=_p(B))===null||U===void 0?void 0:U.getNodesOnScreen()},window.__Nvl_getZoomLevel=function(B){var U;return(U=_p(B))===null||U===void 0?void 0:U.getScale()},this.pendingZoomOperation=null},e=[{key:"onWebGLContextLost",value:function(i){this.callIfRegistered("onWebGLContextLost",i)}},{key:"updateMinimapZoom",value:function(){var i=this.state,a=i.nodes,o=i.maxNodeRadius,s=i.maxMinimapZoom,u=i.minMinimapZoom,l=_0(Object.values(a.idToPosition),o),c=l.centerX,f=l.centerY,d=l.nodesWidth,h=l.nodesHeight,v=$2(d,h,this.glMinimapCanvas.width,this.glMinimapCanvas.height),p=v.zoomX,g=v.zoomY,y=x6(p,g,u,s);this.state.updateMinimapZoomToFit(y,c,f)}},{key:"startMainLoop",value:function(){var i=this,a=this.state,o=a.nodes,s=a.rels;this.currentLayout.update();var u=this.currentLayout.getNodePositions(o.items);o.updatePositions(u),this.isRenderingDisabled||(this.glController.renderMainScene(u),this.glController.renderMinimap(u),this.canvasRenderer.processUpdates(),this.canvasRenderer.render(u)),this.layoutRunner=setInterval(function(){try{(function(){var c=i.currentLayout.getShouldUpdate(),f=c||i.justSwitchedLayout,d=f&&!i.layoutUpdating&&!i.justSwitchedLayout;if(f)for(var h=window.performance.now(),v=d?0:50,p=0;p<v;p++){i.currentLayout.update(i.justSwitchedLayout),i.justSwitchedLayout=!1;var g=window.performance.now();if(!c||g-h>i.layoutTimeLimit)break}})()}catch(c){if(!i.callbacks.isCallbackRegistered(fh))throw c;i.callIfRegistered(fh,c)}},13);var l=function(){try{(function(c){if(i.destroyed)Dr.info("STEP IN A DESTROYED STRIP");else{var f=Zr();if(f!==i.pixelRatio)return i.pixelRatio=f,void i.callIfRegistered("restart");var d=i.currentLayout.getShouldUpdate(),h=d||i.justSwitchedLayout,v=i.currentLayout.getComputing(),p=i.zoomTransitionHandler.needsToRun(),g=h&&!i.layoutUpdating&&!i.justSwitchedLayout,y=i.layoutComputing&&!v,b=i.state.webGLVisible&&i.glController.needsToRun(),m=!i.state.webGLVisible&&i.canvasRenderer.needsToRun(),_=i.isInRenderSwitchAnimation||i.justSwitchedRenderer,x=i.hasResized,C=i.pendingZoomOperation!==null,w=i.glController.minimapMouseDown;if(o.clearChannel(yb),s.clearChannel(yb),p||h||y||_||b||m||w||x||C){!C||g||i.currentLayout.getComputing()||(i.pendingZoomOperation(),i.pendingZoomOperation=null);var O=d||v||y;i.zoomTransitionHandler.update(O,function(){return i.callIfRegistered("onZoomTransitionDone")}),x&&i.glController.onResize();var A=i.currentLayout.getNodePositions(o.items);if(o.updatePositions(A),i.callbacks.isCallbackRegistered(D5)&&i.callIfRegistered(D5,i.dumpNodes()),i.updateMinimapZoom(),i.glController.renderMinimap(A),!i.isRenderingDisabled){if((i.state.webGLVisible||_)&&i.glController.renderMainScene(A),!i.state.webGLVisible||_){i.canvasRenderer.processUpdates(),i.canvasRenderer.render(A);for(var k=0;k<s.items.length;k++){var R=s.items[k].id,I=i.canvasRenderer.arrowBundler.getBundle(s.items[k]),M=s.idToHtmlOverlay[R],N=I.labelInfo[R];if(M&&N){var F=N.rotation,z=N.position,B=N.width,U=N.height,W=i.mapCanvasSpaceToRelativePosition(z.x,z.y),Y=W.x,H=W.y,J=B>5&&!i.state.webGLVisible;Object.assign(M.style,{top:"".concat(H,"px"),left:"".concat(Y,"px"),width:"".concat(B,"px"),height:"".concat(U,"px"),display:J?"block":"none",transform:"translate(-50%, -50%) scale(".concat(Number(i.state.zoom),") rotate(").concat(F,"rad")})}}}for(var le=0;le<o.items.length;le++){var fe=o.items[le],ue=fe.id,ge=fe.size,ve=o.idToHtmlOverlay[ue];if(ve){var de=i.state.nodes.idToPosition[ue],ie=i.mapCanvasSpaceToRelativePosition(de.x,de.y),Q=ie.x,re=ie.y,se="".concat(2*(ge??zn),"px");Object.assign(ve.style,{top:"".concat(re,"px"),left:"".concat(Q,"px"),width:se,height:se,transform:"translate(-50%, -50%) scale(".concat(Number(i.state.zoom),")")})}}}}var pe=!h&&i.layoutUpdating,Oe=v!==i.layoutComputing;i.layoutComputing=v,i.layoutUpdating=h,pe&&i.callIfRegistered(I5),Oe&&i.callIfRegistered("onLayoutComputing",v),i.justSwitchedRenderer=!1,i.hasResized=!1,c!==void 0&&c()}})(function(){i.animationRequestId=window.requestAnimationFrame(l)})}catch(c){if(!i.callbacks.isCallbackRegistered(fh))throw c;i.callIfRegistered(fh,c)}};this.animationRequestId=window.requestAnimationFrame(l)}},{key:"updateHtmlOverlay",value:function(){this.state.nodes.updateHtmlOverlay(this.htmlOverlay),this.state.rels.updateHtmlOverlay(this.htmlOverlay)}},{key:"dumpNodes",value:function(){var i,a=ia(this.state.nodes.items),o=this.state.nodes.idToPosition,s=[],u=function(d,h){var v=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(!v){if(Array.isArray(d)||(v=function(_,x){if(_){if(typeof _=="string")return R5(_,x);var C={}.toString.call(_).slice(8,-1);return C==="Object"&&_.constructor&&(C=_.constructor.name),C==="Map"||C==="Set"?Array.from(_):C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C)?R5(_,x):void 0}}(d))||h){v&&(d=v);var p=0,g=function(){};return{s:g,n:function(){return p>=d.length?{done:!0}:{done:!1,value:d[p++]}},e:function(_){throw _},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var y,b=!0,m=!1;return{s:function(){v=v.call(d)},n:function(){var _=v.next();return b=_.done,_},e:function(_){m=!0,y=_},f:function(){try{b||v.return==null||v.return()}finally{if(m)throw y}}}}(a);try{for(u.s();!(i=u.n()).done;){var l=i.value,c=o[l.id],f=this.mapCanvasSpaceToRelativePosition(c.x,c.y);s.push(Bi(Bi({},l),{},{x:f.x,y:f.y}))}}catch(d){u.e(d)}finally{u.f()}return s}},{key:"dumpRelationships",value:function(){return ia(this.state.rels.items)}},{key:"mapCanvasSpaceToRelativePosition",value:function(i,a){var o=this.canvasRect,s=window.devicePixelRatio||1,u=(i-this.state.panX)*this.state.zoom/s,l=(a-this.state.panY)*this.state.zoom/s;return{x:u+.5*o.width,y:l+.5*o.height}}},{key:"mapRelativePositionToCanvasSpace",value:function(i,a){var o=this.glCanvas.getBoundingClientRect(),s=window.devicePixelRatio||1,u=s*(i-.5*o.width),l=s*(a-.5*o.height);return{x:this.state.panX+u/this.state.zoom,y:this.state.panY+l/this.state.zoom}}},{key:"getNodePositions",value:function(){return Object.values(ia(this.state.nodes.idToPosition))}},{key:"setNodePositions",value:function(i){var a=this,o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],s=[],u=i.filter(function(l){var c=l.id,f=a.state.nodes.idToItem[c]!==void 0;return f||s.push(c),f});s.length>0&&Dr.warn("Failed to set positions for following nodes:",s,"They do not exist in the graph."),this.state.nodes.updatePositions(u),this.currentLayout.updateNodes(u),o||this.currentLayout.terminateUpdate(),this.hasResized=!0,this.getNodesOnScreen().nodes.length===0&&this.state.setPan(0,0),this.state.clearFit()}},{key:"isLayoutMoving",value:function(){return this.layoutUpdating}},{key:"getNodesOnScreen",value:function(){var i=this.glCanvas.getBoundingClientRect(),a=this.mapRelativePositionToCanvasSpace(0,0),o=a.x,s=a.y,u=this.mapRelativePositionToCanvasSpace(i.width,i.height);return function(l,c,f,d,h){var v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:["node"],p=h.nodes,g=h.rels,y=Math.min(l,f),b=Math.max(l,f),m=Math.min(c,d),_=Math.max(c,d),x=[],C=[];if(v.includes("node"))for(var w=0,O=Object.values(p.idToPosition);w<O.length;w++){var A=O[w],k=A.x,R=A.y;k!==void 0&&R!==void 0&&k>y&&k<b&&R>m&&R<_&&x.push(A)}if(v.includes("relationship")){var I,M=G2(g.items);try{for(M.s();!(I=M.n()).done;){var N=I.value,F=N.from,z=N.to,B=p.idToPosition[F],U=p.idToPosition[z];if(B.x!==void 0&&B.y!==void 0&&U.x!==void 0&&U.y!==void 0){var W=B.x>y&&B.x<b&&B.y>m&&B.y<_,Y=U.x>y&&U.x<b&&U.y>m&&U.y<_;W&&Y&&C.push(N)}}}catch(H){M.e(H)}finally{M.f()}}return{nodes:x,rels:C}}(o,s,u.x,u.y,this.state,["node"])}},{key:"registerDoneCallback",value:function(i){this.layoutDoneCallback=i}},{key:"registerComputingCallback",value:function(i){this.layoutComputingCallback=i}},{key:"getPosition",value:function(i){return this.currentLayout.getNodePositions([{id:i}])[0]}},{key:"getScale",value:function(){return this.state.zoom}},{key:"getPan",value:function(){return{x:this.state.panX,y:this.state.panY}}},{key:"setZoomLevel",value:function(i){var a=this;this.pendingZoomOperation=function(){return a.state.setZoom(i,a.glCanvas)}}},{key:"setPanCoordinates",value:function(i,a){this.state.setPan(i,a)}},{key:"setZoomAndPan",value:function(i,a,o){var s=this;this.pendingZoomOperation=function(){return s.state.setZoomPan(i,a,o,s.glCanvas)}}},{key:"fit",value:function(i,a){var o=this;this.pendingZoomOperation=function(){return o.state.fitNodes(i,a)}}},{key:"resetZoom",value:function(){var i=this;this.pendingZoomOperation=function(){return i.state.setZoomReset()}}},{key:"setRenderer",value:function(i){this.state.setRenderer(i)}},{key:"on",value:function(i,a){this.callbacks.register(i,a)}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"destroy",value:function(){var i;this.destroyed||(this.animationRequestId&&window.cancelAnimationFrame(this.animationRequestId),this.layoutRunner!==void 0&&window.clearInterval(this.layoutRunner),this.glController.destroy(),this.glCanvas.removeEventListener("transitionend",this.setRenderSwitchAnimation),this.webGLContext!==void 0&&C5(this.webGLContext),this.webGLMinimapContext!==void 0&&C5(this.webGLMinimapContext),ch(this.glCanvas),ch(this.glMinimapCanvas),this.canvasRenderer.destroy(),ch(this.c2dCanvas),this.removeResizeListener(),this.removeMinimapResizeListener(),this.forceLayout.destroy(),this.hierarchicalLayout.destroy(),this.gridLayout.destroy(),this.freeLayout.destroy(),this.htmlOverlay.remove(),this.descriptionElement.remove(),this.zoomTransitionHandler.destroy(),this.stateDisposers.forEach(function(a){a()}),i=this.instanceId,delete w0[i],this.destroyed=!0)}},{key:"callIfRegistered",value:function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];this.callbacks.callIfRegistered.apply(this.callbacks,arguments)}},{key:"getCanvasRelsAt",value:function(i){return this.canvasRenderer.getRelsAt(i)}},{key:"getCanvasNodesAt",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return this.canvasRenderer.getNodesAt(i,a)}},{key:"getLayout",value:function(i){return i===Fb?this.hierarchicalLayout:i===_ie?this.forceLayout:i===wie?this.gridLayout:i===xie?this.freeLayout:i===Eie?this.d3ForceLayout:this.forceLayout}},{key:"setLayout",value:function(i){Dr.info("Switching to layout: ".concat(i));var a=this.currentLayoutType,o=this.getLayout(i);i==="free"&&o.setNodePositions(this.state.nodes.idToPosition),this.currentLayout=o,this.currentLayoutType=i,a&&a!==this.currentLayoutType&&(this.justSwitchedLayout=!0)}},{key:"setLayoutOptions",value:function(i){this.getLayout(this.state.layout).setOptions(i)}},{key:"getDataUrlForCanvas",value:function(i){var a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],o=i.toDataURL("image/png");return a?o.replace(/^data:image\/png/,"data:application/octet-stream"):o}},{key:"initiateFileDownload",value:function(i,a){var o=document.createElement("a");o.style.display="none",o.setAttribute("download",i);var s=this.getDataUrlForCanvas(a,!0);o.setAttribute("href",s),o.click()}},{key:"updateLayoutAndPositions",value:function(){var i=this.state.nodes,a=i.items;this.currentLayout.update(this.justSwitchedLayout),this.justSwitchedLayout=!1;var o=this.currentLayout.getNodePositions(a);return i.updatePositions(o),o}},{key:"saveToFile",value:function(i){var a=Bi(Bi({},mb),i),o=this.createCanvasAndRenderImage(this.c2dCanvas.width,this.c2dCanvas.height,a.backgroundColor);this.initiateFileDownload(a.filename,o),ch(o),o=null}},{key:"getImageDataURL",value:function(i){var a=Bi(Bi({},mb),i),o=this.createCanvasAndRenderImage(this.c2dCanvas.width,this.c2dCanvas.height,a.backgroundColor),s=this.getDataUrlForCanvas(o);return ch(o),o=null,s}},{key:"prepareLargeFileForDownload",value:function(i){var a=this,o=Bi(Bi({},mb),i),s=this.currentLayout.getNodePositions(this.state.nodes.items),u=_0(s,100),l=u.nodesWidth,c=u.nodesHeight,f=u.centerX,d=u.centerY,h=Math.max(Math.min(l+100,15e3),5e3),v=Math.max(Math.min(c+100,15e3),5e3);return this.isRenderingDisabled=!0,new Promise(function(p,g){try{a.setPanCoordinates(f,d);var y=Math.max(h/l-.02,a.state.minZoom),b=Math.max(v/c-.02,a.state.minZoom);a.setZoomLevel(Math.min(y,b))}catch(m){return Dr.error("An error occurred while downloading the file"),void g(m)}setTimeout(function(){try{var m=a.createCanvasAndRenderImage(h,v,o.backgroundColor);a.initiateFileDownload(o.filename,m),ch(m),m=null,p(!0)}catch(_){g(_)}},500)})}},{key:"createCanvasAndRenderImage",value:function(i,a,o){var s=function(c,f){var d=document.createElement("canvas");return document.body.appendChild(d),b6(d,c,f),d}(i,a),u=function(c){return c.getContext("2d")}(s),l=this.updateLayoutAndPositions();return this.canvasRenderer.processUpdates(),this.canvasRenderer.render(l,{canvas:s,context:u,backgroundColor:o,ignoreAnimations:!0,showCaptions:!0}),s}},{key:"saveFullGraphToLargeFile",value:(t=W2().m(function i(a){var o,s,u,l,c;return W2().w(function(f){for(;;)switch(f.n){case 0:return o=Bi(Bi({},mb),a),s=this.state.zoom,u=this.state.panX,l=this.state.panY,f.p=1,f.n=2,this.prepareLargeFileForDownload(o);case 2:f.n=5;break;case 3:if(f.p=3,c=f.v,Dr.error("An error occurred while downloading the image"),!this.callbacks.isCallbackRegistered(fh)){f.n=4;break}this.callIfRegistered(fh,c),f.n=5;break;case 4:throw c;case 5:return f.p=5,this.isRenderingDisabled=!1,this.setZoomLevel(s),this.setPanCoordinates(u,l),f.f(5);case 6:return f.a(2)}},i,this,[[1,3,5,6]])}),n=function(){var i=this,a=arguments;return new Promise(function(o,s){var u=t.apply(i,a);function l(f){P5(u,o,s,l,c,"next",f)}function c(f){P5(u,o,s,l,c,"throw",f)}l(void 0)})},function(i){return n.apply(this,arguments)})}],e&&Dae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e,t,n}();function pg(r){return pg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pg(r)}function x_(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Lae(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,Nae(n.key),n)}}function E_(r,e,t){return e&&Lae(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Nae(r){var e=function(t){if(pg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(pg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return pg(e)=="symbol"?e:e+""}var hC=function(){return E_(function r(e,t){if(x_(this,r),!e)throw new Error("Tried to create a node with no data");this.data=e,this.parent=t,this.children=[]},[{key:"addChild",value:function(r){this.children.push(r)}},{key:"isRoot",value:function(){return this.parent===null}},{key:"print",value:function(){var r=this.data.name;this.isRoot()||(r="".concat(r,"		").concat(function(n){for(var i=(Math.round(1e3*n)/1e3).toFixed(3);i.length<6;)i=" ".concat(i);return i}(this.data._timeSpent())," ms"),this.parent.isRoot()||(r="".concat(r,"	").concat(this._percentageOfParentSpent(),"%")));var e=this.noOfChildren()>0;for(var t in e?(r="".concat(r,"	 Children: ").concat(this.noOfChildren()),console.groupCollapsed(r)):console.log(r),this.children)this.children[t].print();e&&console.groupEnd()}},{key:"noOfChildren",value:function(){return this.children.length}},{key:"_percentageOfParentSpent",value:function(){return Math.round(this.data._timeSpent()/this.parent.data._timeSpent()*100)}}])}(),C6=function(){return E_(function r(e){x_(this,r),this.name=e,this.startTime=performance.now(),this.endTime=null},[{key:"close",value:function(){this.endTime=performance.now()}},{key:"_timeSpent",value:function(){if(this.startTime===null||this.endTime===null)throw new Error("You have an error in your performance measurements that makes the whole tree unreliable. You probably forgot to call performanceTestEnd on ".concat(this.name));return this.endTime-this.startTime}}])}(),jae=function(){return E_(function r(){x_(this,r),this.root=new hC(new C6("Performance Tree"),null),this.current=this.root},[{key:"clear",value:function(){this.root.children=[],this.current=this.root}},{key:"add",value:function(r){if(this.current){var e=new hC(r,this.current);this.current.addChild(e),this.current=e}else{if(this.root)throw new Error("Performance tree is screwed up");this.root=new hC(r,null),this.current=this.root}}},{key:"close",value:function(){if(this.current.isRoot())throw new Error("Tried to close performance tree root. You probably have one too many Performance.endTest() in your code.");this.current.data.close(),this.current=this.current.parent}},{key:"getCurrentData",value:function(){return this.current.data}},{key:"print",value:function(){this.root.noOfChildren()>0&&this.root.print()}}])}(),Fae=function(){return E_(function r(){x_(this,r),window.performance?(this.disabled=!1,this.tree=new jae):(this.disabled=!0,this.tree=null)},[{key:"startTest",value:function(r){if(!this.disabled){var e,t=r||(e=(e=new Error().stack.split(`
`)[3].trim()).split(" ")[0]==="at"?e.split(" ")[1]:e.split("@")[0]),n=new C6(t);this.tree.add(n)}}},{key:"endTest",value:function(){this.disabled||this.tree.close()}},{key:"reset",value:function(){this.disabled||this.tree.clear()}},{key:"print",value:function(){this.disabled||this.tree.print()}}])}();function O_(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(u,l){if(u){if(typeof u=="string")return M5(u,l);var c={}.toString.call(u).slice(8,-1);return c==="Object"&&u.constructor&&(c=u.constructor.name),c==="Map"||c==="Set"?Array.from(u):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?M5(u,l):void 0}}(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function M5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Bae(r){return"from"in r&&"to"in r}function Uae(r){this.channels[r]={adds:{},updates:{},removes:{}}}function zae(r){delete this.channels[r]}function qae(r){this.channels[r].adds={},this.channels[r].updates={},this.channels[r].removes={}}var T6=function(r){return"html"in r?r.html:"captionHtml"in r?r.captionHtml:void 0};function Gae(r,e){var t,n=!1,i=O_(r);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.id;if(this.idToItem[o]===void 0){if(a=(0,Vr.cloneDeep)(a),this.items.push(a),this.idToItem[o]=a,this.idToPosition[o]={id:o,x:0,y:0},"x"in a&&"y"in a){var s=a,u=s.x,l=s.y;isNaN(u)||isNaN(l)||(this.idToPosition[o].x=u,this.idToPosition[o].y=l)}var c=T6(a);if(c instanceof HTMLElement){var f=document.createElement("div");Object.assign(f.style,{position:"absolute"}),f.appendChild(c),this.idToHtmlOverlay[o]=f}for(var d=Object.values(this.channels),h=0,v=d;h<v.length;h++){var p=v[h];p.removes[o]===void 0?p.adds[o]=a:(delete p.removes[o],p.updates[o]=a)}n=!0}}}catch(g){i.e(g)}finally{i.f()}n&&(this.version+=1,e!==void 0&&(e.added=!0))}function Vae(r,e){var t,n=!1,i=O_(r);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.id,s=this.idToItem[o];if(s!==void 0){Object.assign(s,a);var u=T6(a);if(u instanceof HTMLElement){var l;(l=this.idToHtmlOverlay[o])===null||l===void 0||l.remove(),delete this.idToHtmlOverlay[o];var c=document.createElement("div");Object.assign(c.style,{position:"absolute"}),c.appendChild(u),this.idToHtmlOverlay[o]=c}for(var f=Object.values(this.channels),d=0,h=f;d<h.length;d++){var v=h[d];if(v.adds[o]===void 0){var p=v.updates[o];p===void 0&&(p={id:o},Bae(s)&&(p={id:o,from:s.from,to:s.to}),v.updates[o]=p),Object.assign(p,a)}}e!==void 0&&(e.updated=!0)}n=!0}}catch(g){i.e(g)}finally{i.f()}n&&(this.version+=1)}function $ae(r,e){var t,n=!1,i=O_(r);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=this.idToItem[a];if(o!==void 0){var s;n=!0,delete this.idToItem[o.id],delete this.idToPosition[o.id],(s=this.idToHtmlOverlay[o.id])===null||s===void 0||s.remove(),delete this.idToHtmlOverlay[o.id],this.items.splice(this.items.indexOf(o),1);for(var u=Object.values(this.channels),l=0,c=u;l<c.length;l++){var f=c[l];f.adds[a]!==void 0?delete f.adds[a]:(delete f.updates[a],f.removes[a]=o)}}}}catch(d){i.e(d)}finally{i.f()}n&&(e!==void 0&&(e.removed=!0),this.version+=1)}function Wae(r){var e,t=O_(r);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.idToPosition[n.id]!==void 0){var i=this.idToPosition[n.id];Object.assign(i,n)}else this.idToPosition[n.id]={id:n.id,x:n.x,y:n.y,pinned:n.pinned}}}catch(a){t.e(a)}finally{t.f()}}function Hae(r){for(var e in this.idToHtmlOverlay){var t=this.idToHtmlOverlay[e];r.appendChild(t)}}var L5=function(){return{idToItem:vn.shallow({}),items:vn.shallow([]),channels:vn.shallow({}),idToPosition:vn.shallow({}),idToHtmlOverlay:vn.shallow({}),version:0,addChannel:Xr(Uae),removeChannel:Xr(zae),clearChannel:Xr(qae),add:Xr(Gae),update:Xr(Vae),remove:Xr($ae),updatePositions:Xr(Wae),updateHtmlOverlay:Xr(Hae)}},N5={selected:{rings:[{widthFactor:.05,color:IB},{widthFactor:.1,color:DB}],shadow:{width:10,opacity:1,color:kB}},default:{rings:[]}},j5={selected:{rings:[{color:IB,width:2},{color:DB,width:4}],shadow:{width:18,opacity:1,color:kB}},default:{rings:[]}},vC=.75,pC={noPan:!1,outOnly:!1,animated:!0};function gg(r){return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gg(r)}function gC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function F5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yC(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?F5(Object(t),!0).forEach(function(n){Yae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):F5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Yae(r,e,t){return(e=function(n){var i=function(a){if(gg(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var s=o.call(a,"string");if(gg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return gg(i)=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Cl=function(r,e,t){(0,Vr.isNil)(r)||(function(n){return typeof n=="string"&&qg(n)!==null}(r)?e(r):jB().warn("Invalid color string for ".concat(t,":"),r))};function yg(r){return yg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yg(r)}function B5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function U5(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?B5(Object(t),!0).forEach(function(n){Xae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):B5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Xae(r,e,t){return(e=function(n){var i=function(a){if(yg(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var s=o.call(a,"string");if(yg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return yg(i)=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var Kae=function(r){var e=r.minZoom,t=r.maxZoom,n=r.allowDynamicMinZoom,i=n===void 0||n,a=r.layout,o=r.layoutOptions,s=r.styling,u=s===void 0?{}:s,l=r.panX,c=l===void 0?0:l,f=r.panY,d=f===void 0?0:f,h=r.initialZoom,v=r.renderer,p=v===void 0?r.useWebGL===!0?R2:k2:v,g=r.disableWebGL,y=g!==void 0&&g,b=r.disableWebWorkers,m=b!==void 0&&b,_=r.disableTelemetry,x=_!==void 0&&_;UF(!0),SA.isolateGlobalState();var C=(0,Vr.isNil)(e)?.075:e,w=(0,Vr.isNil)(t)?10:t,O=function(z,B){var U=B.legacyNodeDefaultBorderColor,W=B.legacySelectedBorderColor,Y=B.legacyDisabledItemColor,H=B.legacyDisabledItemFontColor,J=z.nodeDefaultBorderColor,le=J===void 0?U:J,fe=z.selectedBorderColor,ue=fe===void 0?W:fe,ge=z.disabledItemColor,ve=ge===void 0?Y:ge,de=z.disabledItemFontColor,ie=de===void 0?H:de,Q=z.selectedInnerBorderColor,re=z.dropShadowColor,se=z.defaultNodeColor,pe=z.defaultRelationshipColor,Oe=z.minimapViewportBoxColor,Ce=yC({},N5.default),Re=yC({},N5.selected),be=yC({},j5.selected),j={color:RB,fontColor:"#DDDDDD"},G=PB,$=AB;return Cl(Q,function(te){Re.rings[0].color=te,be.rings[0].color=te},"selectedInnerBorderColor"),Cl(ue,function(te){Re.rings[1].color=te,be.rings[1].color=te},"selectedBorderColor"),Cl(le,function(te){var ce;Ce.rings=[{color:te,widthFactor:.05}],Re.rings=[{color:te,widthFactor:.05}].concat(function(he){if(Array.isArray(he))return gC(he)}(ce=Re.rings)||function(he){if(typeof Symbol<"u"&&he[Symbol.iterator]!=null||he["@@iterator"]!=null)return Array.from(he)}(ce)||function(he,xe){if(he){if(typeof he=="string")return gC(he,xe);var Ne={}.toString.call(he).slice(8,-1);return Ne==="Object"&&he.constructor&&(Ne=he.constructor.name),Ne==="Map"||Ne==="Set"?Array.from(he):Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne)?gC(he,xe):void 0}}(ce)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}())},"nodeDefaultBorderColor"),Cl(re,function(te){Re.shadow.color=te,be.shadow.color=te},"dropShadowColor"),Cl(ve,function(te){j.color=te},"disabledItemColor"),Cl(ie,function(te){j.fontColor=te},"disabledItemFontColor"),Cl(se,function(te){$=te},"defaultNodeColor"),Cl(pe,function(te){G=te},"defaultRelationshipColor"),{nodeBorderStyles:{default:Ce,selected:Re},relationshipBorderStyles:{default:j5.default,selected:be},disabledItemStyles:j,defaultNodeColor:$,defaultRelationshipColor:G,minimapViewportBoxColor:Oe||AA}}(u,{legacyNodeDefaultBorderColor:r.nodeDefaultBorderColor,legacySelectedBorderColor:r.selectedBorderColor,legacyDisabledItemColor:r.disabledItemColor,legacyDisabledItemFontColor:r.disabledItemFontColor}),A=O.nodeBorderStyles,k=O.relationshipBorderStyles,R=O.disabledItemStyles,I=O.defaultNodeColor,M=O.defaultRelationshipColor,N=O.minimapViewportBoxColor,F=vn({zoom:h||vC,minimapZoom:vC,defaultZoomLevel:vC,panX:c,panY:d,minimapPanX:0,minimapPanY:0,fitNodeIds:[],resetZoom:!1,zoomOptions:pC,forceWebGL:!1,renderer:p,disableWebGL:y,disableWebWorkers:m,disableTelemetry:x,fitMovement:0,layout:a,layoutOptions:o,maxDistance:0,maxNodeRadius:50,nodeBorderStyles:A,relationshipBorderStyles:k,disabledItemStyles:R,defaultNodeColor:I,defaultRelationshipColor:M,minimapViewportBoxColor:N,get minZoom(){return C},get maxZoom(){return w},get minMinimapZoom(){return 0},get maxMinimapZoom(){return .2},get webGLVisible(){var z=this.fitMovement>50;return this.renderer===R2||z},nodes:L5(),rels:L5(),graphUpdates:0,waypoints:{data:vn.shallow({}),counter:0},setGraphUpdated:Xr(function(){this.graphUpdates+=1}),setRenderer:Xr(function(z){Xr(function(){this.graphUpdates+=1}),this.renderer=z}),setWaypoints:Xr(function(z){this.waypoints.data=z,this.waypoints.counter+=1}),setZoomPan:Xr(function(z,B,U,W){if(i){var Y=Object.values(this.nodes.idToPosition),H=fC(Y,C,w,W,z,this.zoom);H!==this.zoom&&(this.zoom=H,z===H&&(this.panX=B,this.panY=U))}else{var J=fg(z,this.zoom,C,w);J!==this.zoom&&(this.zoom=J,this.panX=B,this.panY=U)}this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setZoom:Xr(function(z,B){if(i){var U=Object.values(this.nodes.idToPosition);this.zoom=fC(U,C,w,B,z,this.zoom)}else this.zoom=fg(z,this.zoom,C,w);this.fitNodeIds=[],this.fitMovement=0,this.resetZoom=!1,this.forceWebGL=!1}),setPan:Xr(function(z,B){this.panX=z,this.panY=B,this.fitNodeIds=[],this.resetZoom=!1,this.forceWebGL=!1}),setLayout:Xr(function(z){this.layout=z}),setLayoutOptions:Xr(function(z){this.layoutOptions=z}),fitNodes:Xr(function(z){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.fitNodeIds=(0,Vr.intersection)(z,(0,Vr.map)(this.nodes.items,"id")),this.zoomOptions=U5(U5({},pC),B)}),setZoomReset:Xr(function(){this.resetZoom=!0}),clearFit:Xr(function(){this.fitNodeIds=[],this.forceWebGL=!1,this.fitMovement=0,this.zoomOptions=pC}),clearReset:Xr(function(){this.resetZoom=!1,this.fitMovement=0}),updateZoomToFit:Xr(function(z,B,U,W){var Y;if(this.fitMovement=Math.abs(z-this.zoom)+Math.abs(B-this.panX)+Math.abs(U-this.panY),i){var H=Object.values(this.nodes.idToPosition);Y=fC(H,C,w,W,z,this.zoom)}else Y=fg(z,this.zoom,C,w);this.zoom=Y,this.panX=B,this.panY=U}),updateMinimapZoomToFit:Xr(function(z,B,U){this.minimapZoom=z,this.minimapPanX=B,this.minimapPanY=U}),autorun:f0,reaction:VF});return F},Zae=function(r){return!!r&&typeof r.id=="string"&&r.id.length>0},bb=On(1187);function mg(r){return mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mg(r)}function z5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function q5(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z5(Object(t),!0).forEach(function(n){Qae(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):z5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Qae(r,e,t){return(e=function(n){var i=function(a){if(mg(a)!="object"||!a)return a;var o=a[Symbol.toPrimitive];if(o!==void 0){var s=o.call(a,"string");if(mg(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}(n);return mg(i)=="symbol"?i:i+""}(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function G5(r){return function(e){if(Array.isArray(e))return mC(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return mC(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mC(e,t):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mC(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}var bC=function(r){return{id:r.elementId}},V5=function(r){return{id:r.elementId,from:r.startNodeElementId,to:r.endNodeElementId}};bb.resultTransformers.mappedResultTransformer({map:function(r){return Object.values(r.toObject())},collect:function(r){var e={nodes:[],relationships:[]},t=new Map;return function(n){for(var i=G5(n),a=[];i.length;){var o=i.pop();Array.isArray(o)?i.push.apply(i,G5(o)):a.push(o)}return a}(r).forEach(function(n){(0,bb.isNode)(n)?(e.nodes.push(bC(n)),t.set(n.elementId,n)):(0,bb.isPath)(n)?n.segments.forEach(function(i){e.nodes.push(bC(i.start)),e.nodes.push(bC(i.end)),e.relationships.push(V5(i.relationship)),t.set(i.start.elementId,i.start),t.set(i.end.elementId,i.end),t.set(i.relationship.elementId,i.relationship)}):(0,bb.isRelationship)(n)&&(e.relationships.push(V5(n)),t.set(n.elementId,n))}),q5(q5({},e),{},{recordObjectMap:t})}});const Jae=(r=>{var e={};return On.d(e,r),e})({AnalyticsBrowser:()=>Zre});var _C,eoe=new Uint8Array(16);function toe(){if(!_C&&!(_C=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _C(eoe)}const roe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var Si=[],wC=0;wC<256;++wC)Si.push((wC+256).toString(16).substr(1));const noe=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(Si[r[e+0]]+Si[r[e+1]]+Si[r[e+2]]+Si[r[e+3]]+"-"+Si[r[e+4]]+Si[r[e+5]]+"-"+Si[r[e+6]]+Si[r[e+7]]+"-"+Si[r[e+8]]+Si[r[e+9]]+"-"+Si[r[e+10]]+Si[r[e+11]]+Si[r[e+12]]+Si[r[e+13]]+Si[r[e+14]]+Si[r[e+15]]).toLowerCase();if(!function(n){return typeof n=="string"&&roe.test(n)}(t))throw TypeError("Stringified UUID is invalid");return t};var $5,xC,EC=0,OC=0;const ioe=function(r,e,t){var n=0,i=new Array(16),a=(r=r||{}).node||$5,o=r.clockseq!==void 0?r.clockseq:xC;if(a==null||o==null){var s=r.random||(r.rng||toe)();a==null&&(a=$5=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),o==null&&(o=xC=16383&(s[6]<<8|s[7]))}var u=r.msecs!==void 0?r.msecs:Date.now(),l=r.nsecs!==void 0?r.nsecs:OC+1,c=u-EC+(l-OC)/1e4;if(c<0&&r.clockseq===void 0&&(o=o+1&16383),(c<0||u>EC)&&r.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");EC=u,OC=l,xC=o;var f=(1e4*(268435455&(u+=122192928e5))+l)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=255&f;var d=u/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=255&d,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var h=0;h<6;++h)i[n+h]=a[h];return e||noe(i)};function bg(r){return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bg(r)}function H2(){var r,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(h,v,p,g){var y=v&&v.prototype instanceof s?v:s,b=Object.create(y.prototype);return $a(b,"_invoke",function(m,_,x){var C,w,O,A=0,k=x||[],R=!1,I={p:0,n:0,v:r,a:M,f:M.bind(r,4),d:function(N,F){return C=N,w=0,O=r,I.n=F,o}};function M(N,F){for(w=N,O=F,e=0;!R&&A&&!z&&e<k.length;e++){var z,B=k[e],U=I.p,W=B[2];N>3?(z=W===F)&&(O=B[(w=B[4])?5:(w=3,3)],B[4]=B[5]=r):B[0]<=U&&((z=N<2&&U<B[1])?(w=0,I.v=F,I.n=B[1]):U<W&&(z=N<3||B[0]>F||F>W)&&(B[4]=N,B[5]=F,I.n=W,w=0))}if(z||N>1)return o;throw R=!0,F}return function(N,F,z){if(A>1)throw TypeError("Generator is already running");for(R&&F===1&&M(F,z),w=F,O=z;(e=w<2?r:O)||!R;){C||(w?w<3?(w>1&&(I.n=-1),M(w,O)):I.n=O:I.v=O);try{if(A=2,C){if(w||(N="next"),e=C[N]){if(!(e=e.call(C,O)))throw TypeError("iterator result is not an object");if(!e.done)return e;O=e.value,w<2&&(w=0)}else w===1&&(e=C.return)&&e.call(C),w<2&&(O=TypeError("The iterator does not provide a '"+N+"' method"),w=1);C=r}else if((e=(R=I.n<0)?O:m.call(_,I))!==o)break}catch(B){C=r,w=1,O=B}finally{A=1}}return{value:e,done:R}}}(h,p,g),!0),b}var o={};function s(){}function u(){}function l(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):($a(e={},n,function(){return this}),e),f=l.prototype=s.prototype=Object.create(c);function d(h){return Object.setPrototypeOf?Object.setPrototypeOf(h,l):(h.__proto__=l,$a(h,i,"GeneratorFunction")),h.prototype=Object.create(f),h}return u.prototype=l,$a(f,"constructor",l),$a(l,"constructor",u),u.displayName="GeneratorFunction",$a(l,i,"GeneratorFunction"),$a(f),$a(f,i,"Generator"),$a(f,n,function(){return this}),$a(f,"toString",function(){return"[object Generator]"}),(H2=function(){return{w:a,m:d}})()}function $a(r,e,t,n){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}$a=function(a,o,s,u){if(o)i?i(a,o,{value:s,enumerable:!u,configurable:!u,writable:!u}):a[o]=s;else{var l=function(c,f){$a(a,c,function(d){return this._invoke(c,f,d)})};l("next",0),l("throw",1),l("return",2)}},$a(r,e,t,n)}function W5(r,e,t,n,i,a,o){try{var s=r[a](o),u=s.value}catch(l){return void t(l)}s.done?e(u):Promise.resolve(u).then(n,i)}function H5(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,A6(n.key),n)}}function A6(r){var e=function(t){if(bg(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(bg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return bg(e)=="symbol"?e:e+""}var Y5=window.localStorage,X5="neo4j.nvl.sTid",K5=!1,aoe=function(){return r=function a(){var o,s,u;(function(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),o=this,u=void 0,(s=A6(s="analytics"))in o?Object.defineProperty(o,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[s]=u;var l=new Jae.AnalyticsBrowser;this.analytics=l},e=[{key:"init",value:function(a){this.analytics.load({writeKey:a}),this.analytics.addSourceMiddleware(function(o){var s=o.payload,u=o.next,l=s.obj.context.page;l!==void 0&&(l.url="",l.title="",l.search="",l.referrer="",l.path=""),u(s)})}},{key:"trackEvent",value:(n=H2().m(function a(o){var s;return H2().w(function(u){for(;;)switch(u.n){case 0:return u.n=1,this.ready();case 1:s="".concat(o.eventPrefix?o.eventPrefix:"NVL_core","-").concat(o.event),this.analytics.track(s,o.properties).catch(function(l){Dr.warn("TRACKING: Event tracking is failed. err: ".concat(l))});case 2:return u.a(2)}},a,this)}),i=function(){var a=this,o=arguments;return new Promise(function(s,u){var l=n.apply(a,o);function c(d){W5(l,s,u,c,f,"next",d)}function f(d){W5(l,s,u,c,f,"throw",d)}c(void 0)})},function(a){return i.apply(this,arguments)})},{key:"identify",value:function(){if(!K5){var a=this.getSegmentTrackingId();this.analytics.identify(a).catch(function(o){Dr.debug("TRACKING: Identifying user for Segment tracking failed. err: ".concat(o))}),K5=!0}}},{key:"loadSavedSegmentId",value:function(){try{var a=Y5.getItem(X5);return typeof a=="string"?a:null}catch(o){return Dr.debug("TRACKING: Retrieving tracking Id failed. err: ".concat(o)),null}}},{key:"getSegmentTrackingId",value:function(){var a=this.loadSavedSegmentId(),o=a??ioe();return this.saveTrackingId(o),o}},{key:"saveTrackingId",value:function(a){Y5.setItem(X5,a)}},{key:"ready",value:function(){return this.analytics.ready().catch(function(a){Dr.debug("TRACKING: segment track instance not ready. err: ".concat(a))})}}],e&&H5(r.prototype,e),t&&H5(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e,t,n,i}();function _g(r){return _g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_g(r)}function ooe(r,e){return function(t){if(Array.isArray(t))return t}(r)||function(t,n){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var a,o,s,u,l=[],c=!0,f=!1;try{if(s=(i=i.call(t)).next,n!==0)for(;!(c=(a=s.call(i)).done)&&(l.push(a.value),l.length!==n);c=!0);}catch(d){f=!0,o=d}finally{try{if(!c&&i.return!=null&&(u=i.return(),Object(u)!==u))return}finally{if(f)throw o}}return l}}(r,e)||P6(r,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Y2(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=P6(r))||e){t&&(r=t);var n=0,i=function(){};return{s:i,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return o=u.done,u},e:function(u){s=!0,a=u},f:function(){try{o||t.return==null||t.return()}finally{if(s)throw a}}}}function P6(r,e){if(r){if(typeof r=="string")return Z5(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Z5(r,e):void 0}}function Z5(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Q5(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function ci(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q5(Object(t),!0).forEach(function(n){soe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Q5(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function soe(r,e,t){return(e=R6(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function uoe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,R6(n.key),n)}}function R6(r){var e=function(t){if(_g(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,"string");if(_g(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(r);return _g(e)=="symbol"?e:e+""}function dh(r,e,t){k6(r,e),e.set(r,t)}function k6(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function tt(r,e){return r.get(wa(r,e))}function _h(r,e,t){return r.set(wa(r,e),t),t}function wa(r,e,t){if(typeof r=="function"?r===e:r.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}var wg=new WeakMap,J5=new WeakMap,_r=new WeakMap,Ir=new WeakMap,ra=new WeakMap,Fp=new WeakMap,qa=new WeakSet,loe=function(){return r=function t(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};(function(u,l){if(!(u instanceof l))throw new TypeError("Cannot call a class as a function")})(this,t),function(u,l){k6(u,l),l.add(u)}(this,qa),dh(this,wg,void 0),dh(this,J5,void 0),dh(this,_r,void 0),dh(this,Ir,void 0),dh(this,ra,void 0),dh(this,Fp,void 0),o.disableTelemetry!==!0&&(_h(Fp,this,new aoe),tt(Fp,this).init("4SGwdwzuDm5WkFvQtz7D6ATQlo14yjmW"),tt(Fp,this).identify()),wa(qa,this,coe).call(this,o),_h(wg,this,new Tne(s)),_h(J5,this,new Fae),_h(ra,this,o),tt(ra,this).frame=n,this.checkWebGLCompatibility(),wa(qa,this,e3).call(this,i,a,o)},e=[{key:"restart",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.getNodePositions(),a=tt(_r,this),o=a.zoom,s=a.layout,u=a.layoutOptions,l=a.nodes,c=a.rels;tt(Ir,this).destroy(),Object.assign(tt(ra,this),t),wa(qa,this,e3).call(this,l.items,c.items,tt(ra,this)),this.setZoom(o),this.setLayout(s),this.setLayoutOptions(u),this.addAndUpdateElementsInGraph(l.items,c.items),n&&this.setNodePositions(i)}},{key:"addAndUpdateElementsInGraph",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];wa(qa,this,SC).call(this,t),wa(qa,this,CC).call(this,n,t);var i={added:!1,updated:!1};tt(_r,this).nodes.update(t,ci({},i)),tt(_r,this).rels.update(n,ci({},i)),tt(_r,this).nodes.add(t,ci({},i)),tt(_r,this).rels.add(n,ci({},i)),tt(_r,this).setGraphUpdated(),tt(Ir,this).updateHtmlOverlay()}},{key:"getSelectedNodes",value:function(){var t=this;return ia(tt(_r,this).nodes.items).filter(function(n){return n.selected}).map(function(n){return ci(ci({},n),tt(_r,t).nodes.idToPosition[n.id])})}},{key:"getSelectedRelationships",value:function(){return ia(tt(_r,this).rels.items).filter(function(t){return t.selected})}},{key:"updateElementsInGraph",value:function(t,n){var i=this,a={added:!1,updated:!1},o=t.filter(function(u){return tt(_r,i).nodes.idToItem[u.id]!==void 0}),s=n.filter(function(u){return tt(_r,i).rels.idToItem[u.id]!==void 0});wa(qa,this,SC).call(this,o),wa(qa,this,CC).call(this,s,t),tt(_r,this).nodes.update(o,ci({},a)),tt(_r,this).rels.update(s,ci({},a)),tt(Ir,this).updateHtmlOverlay()}},{key:"addElementsToGraph",value:function(t,n){wa(qa,this,SC).call(this,t),wa(qa,this,CC).call(this,n,t);var i={added:!1,updated:!1};tt(_r,this).nodes.add(t,ci({},i)),tt(_r,this).rels.add(n,ci({},i)),tt(Ir,this).updateHtmlOverlay()}},{key:"removeNodesWithIds",value:function(t){if(Array.isArray(t)&&!(0,Vr.isEmpty)(t)){var n,i={},a=Y2(t);try{for(a.s();!(n=a.n()).done;)i[n.value]=!0}catch(c){a.e(c)}finally{a.f()}var o,s=[],u=Y2(tt(_r,this).rels.items);try{for(u.s();!(o=u.n()).done;){var l=o.value;i[l.from]!==!0&&i[l.to]!==!0||s.push(l.id)}}catch(c){u.e(c)}finally{u.f()}s.length>0&&wa(qa,this,t3).call(this,s),wa(qa,this,foe).call(this,t),tt(_r,this).setGraphUpdated(),tt(Ir,this).updateHtmlOverlay()}}},{key:"removeRelationshipsWithIds",value:function(t){Array.isArray(t)&&!(0,Vr.isEmpty)(t)&&(wa(qa,this,t3).call(this,t),tt(_r,this).setGraphUpdated(),tt(Ir,this).updateHtmlOverlay())}},{key:"getNodes",value:function(){return tt(Ir,this).dumpNodes()}},{key:"getRelationships",value:function(){return tt(Ir,this).dumpRelationships()}},{key:"getNodeById",value:function(t){return tt(_r,this).nodes.idToItem[t]}},{key:"getRelationshipById",value:function(t){return tt(_r,this).rels.idToItem[t]}},{key:"getPositionById",value:function(t){return tt(_r,this).nodes.idToPosition[t]}},{key:"getCurrentOptions",value:function(){return tt(ra,this)}},{key:"destroy",value:function(){tt(Ir,this).destroy()}},{key:"deselectAll",value:function(){this.updateElementsInGraph(tt(_r,this).nodes.items.map(function(t){return ci(ci({},t),{},{selected:!1})}),tt(_r,this).rels.items.map(function(t){return ci(ci({},t),{},{selected:!1})}))}},{key:"fit",value:function(t,n){tt(Ir,this).fit(t,n)}},{key:"resetZoom",value:function(){tt(Ir,this).resetZoom()}},{key:"setUseWebGLRenderer",value:function(t){tt(Ir,this).setRenderer(t?R2:k2)}},{key:"setRenderer",value:function(t){tt(Ir,this).setRenderer(t)}},{key:"setDisableWebGL",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];tt(ra,this).disableWebGL!==t&&(tt(ra,this).disableWebGL=t,this.restart())}},{key:"pinNode",value:function(t){tt(_r,this).nodes.update([{id:t,pinned:!0}],{})}},{key:"unPinNode",value:function(t){tt(_r,this).nodes.update(t.map(function(n){return{id:n,pinned:!1}}),{})}},{key:"setLayout",value:function(t){tt(_r,this).setLayout(t)}},{key:"setLayoutOptions",value:function(t){tt(_r,this).setLayoutOptions(t)}},{key:"getNodesOnScreen",value:function(){return tt(Ir,this).getNodesOnScreen()}},{key:"getNodePositions",value:function(){return tt(Ir,this).getNodePositions()}},{key:"setNodePositions",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];tt(Ir,this).setNodePositions(t,n)}},{key:"isLayoutMoving",value:function(){return tt(Ir,this).isLayoutMoving()}},{key:"saveToFile",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(Ir,this).saveToFile(t)}},{key:"getImageDataUrl",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return tt(Ir,this).getImageDataURL(t)}},{key:"saveFullGraphToLargeFile",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};tt(Ir,this).saveFullGraphToLargeFile(t)}},{key:"setZoom",value:function(t){tt(Ir,this).setZoomLevel(t)}},{key:"setPan",value:function(t,n){tt(Ir,this).setPanCoordinates(t,n)}},{key:"setZoomAndPan",value:function(t,n,i){tt(Ir,this).setZoomAndPan(t,n,i)}},{key:"getScale",value:function(){return tt(Ir,this).getScale()}},{key:"getPan",value:function(){return tt(Ir,this).getPan()}},{key:"getHits",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["node","relationship"],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{hitNodeMarginWidth:0},a=tt(_r,this),o=a.zoom,s=a.panX,u=a.panY,l=a.webGLVisible,c=v6(t,tt(ra,this).frame,o,s,u),f=c.x,d=c.y,h=l?function(v,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},m=[],_=[],x=g.nodes,C=g.rels;return y.includes("node")&&m.push.apply(m,pb(function(w,O){var A,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},R=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,I=[],M=G2(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var N=function(){var F,z=A.value,B=k[z.id];if((B==null?void 0:B.x)===void 0||B.y===void 0)return 1;var U=((F=z.size)!==null&&F!==void 0?F:zn)*Zr(),W={x:B.x-w,y:B.y-O},Y=Math.pow(U,2),H=Math.pow(U+R,2),J=Math.pow(W.x,2)+Math.pow(W.y,2),le=Math.sqrt(J);if(J<H){var fe=I.findIndex(function(ue){return ue.distance>le});I.splice(fe!==-1?fe:I.length,0,{data:z,targetCoordinates:{x:B.x,y:B.y},pointerCoordinates:{x:w,y:O},distanceVector:W,distance:le,insideNode:J<Y})}};for(M.s();!(A=M.n()).done;)N()}catch(F){M.e(F)}finally{M.f()}return I}(v,p,x.items,x.idToPosition,b.hitNodeMarginWidth))),y.includes("relationship")&&_.push.apply(_,pb(function(w,O){var A,k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},R=[],I={},M=G2(arguments.length>2&&arguments[2]!==void 0?arguments[2]:[]);try{var N=function(){var F=A.value,z=F.from,B=F.to;if(I["".concat(z,".").concat(B)]===void 0){var U=k[z],W=k[B];if((U==null?void 0:U.x)===void 0||U.y===void 0||(W==null?void 0:W.x)===void 0||W.y===void 0)return 0;var Y=RA({x:U.x,y:U.y},{x:W.x,y:W.y},{x:w,y:O});if(Y<=Cae){var H=R.findIndex(function(J){return J.distance>Y});R.splice(H!==-1?H:R.length,0,{data:F,fromTargetCoordinates:{x:U.x,y:U.y},toTargetCoordinates:{x:W.x,y:W.y},pointerCoordinates:{x:w,y:O},distance:Y})}I["".concat(z,".").concat(B)]=1,I["".concat(B,".").concat(z)]=1}};for(M.s();!(A=M.n()).done;)N()}catch(F){M.e(F)}finally{M.f()}return R}(v,p,C.items,x.idToPosition))),{nodes:m,relationships:_}}(f,d,tt(_r,this),n,i):function(v,p,g){var y=arguments.length>3&&arguments[3]!==void 0?arguments[3]:["node","relationship"],b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},m=[],_=[];return y.includes("node")&&m.push.apply(m,pb(g.getCanvasNodesAt({x:v,y:p},b.hitNodeMarginWidth))),y.includes("relationship")&&_.push.apply(_,pb(g.getCanvasRelsAt({x:v,y:p}))),{nodes:m,relationships:_}}(f,d,tt(Ir,this),n,i);return ci(ci({},t),{},{nvlTargets:h})}},{key:"getContainer",value:function(){return tt(ra,this).frame}},{key:"checkWebGLCompatibility",value:function(){var t=tt(ra,this).disableWebGL;if(t===void 0||!t){var n=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document.createElement("canvas");try{return window.WebGLRenderingContext!==void 0&&(i.getContext("webgl")!==null||i.getContext("experimental-webgl")!==null)}catch{return!1}}();if(!n){if(t!==void 0)throw new $B("Could not initialize WebGL");tt(ra,this).renderer=k2,console.warn("GPU acceleration is not available on your browser. Falling back to CPU layout and rendering. You can disable this warning by setting the disableWebGL option to true.")}t===void 0&&(tt(ra,this).disableWebGL=!n)}}}],e&&uoe(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,e}();function e3(){var r,e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};_h(_r,this,Kae(i)),i.minimapContainer instanceof HTMLElement||delete i.minimapContainer,_h(Ir,this,new Mae(tt(_r,this),i)),this.addAndUpdateElementsInGraph(t,n),tt(Ir,this).on("restart",this.restart.bind(this));var a,o,s=Y2((a=tt(wg,this).callbacks,Object.entries(a)));try{for(s.s();!(o=s.n()).done;){var u=ooe(o.value,2),l=u[0];u[1]!==void 0&&tt(Ir,this).on(l,tt(wg,this)[l].bind(tt(wg,this)))}}catch(f){s.e(f)}finally{s.f()}setTimeout(function(){tt(Ir,e).callIfRegistered("onInitialization")});var c=(r=tt(ra,this).frame)===null||r===void 0?void 0:r.getAttribute("id");tt(ra,this).disableTelemetry!==!0&&setTimeout(function(){tt(Ir,e).isDestroyed()||tt(Fp,e).trackEvent({eventPrefix:Gne.includes(c)?c:null,event:"instantiated",properties:{}})},200)}function coe(r){var e,t=r.logging;(t==null?void 0:t.level)!==void 0&&(e=t.level,Dr.setLevel(e),function(n,i){var a=n.methodFactory;n.methodFactory=function(o,s,u){var l=a(o,s,u);return function(){for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];typeof i.logger=="function"?i.logger.apply(i,[o].concat(f)):l.apply(void 0,f)}},n.setLevel(n.getLevel())}(Dr,t))}function foe(r){var e=Array.isArray(r)?r:[r],t=tt(_r,this),n=t.nodes,i=t.fitNodeIds;n.remove(e,{removed:!1}),i.length&&e.find(function(a){return i.includes(a)})!==void 0&&tt(_r,this).fitNodes(i.filter(function(a){return!e.includes(a)}))}function t3(r){var e=Array.isArray(r)?r:[r];tt(_r,this).rels.remove(e,{removed:!1})}function SC(r){var e=r.find(function(n){return!function(i){return!!i&&typeof i.id=="string"&&i.id.length>0}(n)});if(e){var t="";throw/^\d+$/.test(e.id)||(t=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported."),new TypeError("Invalid node provided: ".concat(JSON.stringify(e),".").concat(t))}}function CC(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t="",n=null,i=tt(_r,this),a=i.nodes,o=i.rels,s={},u=0;u<e.length;u++){var l=e[u];s[l.id]=l}for(var c=ci(ci({},a.idToItem),s),f=o.idToItem,d=0;d<r.length;d++){var h=r[d];if(!Zae(h)){n=h,/^\d+$/.test(h.id)&&(t=" Node ids need to be numeric strings. Strings that contain anything other than numbers are not yet supported.");break}if(f[h.id]===void 0){var v=c[h.from],p=c[h.to];if(v===void 0){t=' Node with id "'.concat(h.from,'" does not exist.'),n=h;break}if(p===void 0){t=' Node with id "'.concat(h.to,'" does not exist.'),n=h;break}}}if(n!==null)throw new TypeError("Invalid relationship provided: ".concat(JSON.stringify(n),".").concat(t))}var doe=Object.defineProperty,hoe=(r,e,t)=>e in r?doe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,gu=(r,e,t)=>hoe(r,typeof e!="symbol"?e+"":e,t);class voe extends HTMLElement{constructor(){super(...arguments),gu(this,"unsubscribe"),gu(this,"state",null),gu(this,"universeId"),gu(this,"container"),gu(this,"viewer"),gu(this,"lastGraph"),gu(this,"nvlError"),gu(this,"isFullscreen",!1),gu(this,"handleEscapeKey",e=>{e.key==="Escape"&&this.isFullscreen&&this.exitFullscreen()})}static get observedAttributes(){return["universe-id"]}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.universeId=this.getAttribute("universe-id")??void 0,this.ensureGraphRequest(),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()}),this.render()}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),this.exitFullscreen(),this.destroyViewer()}attributeChangedCallback(e,t,n){e==="universe-id"&&(this.universeId=n??void 0,this.ensureGraphRequest(),this.render())}ensureGraphRequest(){this.universeId&&gr.ensureUniverseGraph(this.universeId)}async render(){if(!this.shadowRoot)return;const{universeId:e,graphData:t,loadingGraph:n,storeError:i,libraryError:a}=this.getRenderState();e&&!t&&!n&&!i&&this.ensureGraphRequest();const o=this.renderContent(e,t,n,i,a),s=!!t&&t.nodes.length>0;if(this.renderHTML(o),a){this.setupRetryButton(),this.destroyViewer();return}this.setupFullscreenButton(),s&&t?await this.setupCanvas(t):(this.destroyViewer(),this.container=void 0,this.lastGraph=void 0)}getRenderState(){const e=this.universeId,t=this.state,n=(t==null?void 0:t.loading.graph)??!1,i=t==null?void 0:t.errors.graph,a=e&&t?t.universeGraphs[e]:void 0,o=this.nvlError;return{universeId:e,graphData:a,loadingGraph:n,storeError:i,libraryError:o}}renderContent(e,t,n,i,a){if(!e)return'<div class="empty">Select a universe to see its graph visualization.</div>';const o=this.renderFullscreenIcon();return a?`
        <div class="error">
          <p>${a}</p>
          <button type="button" data-action="retry">Retry</button>
          ${o}
        </div>
      `:i?`
        <div class="error">
          ${i}
          ${o}
        </div>
      `:n&&!t?`
        <div class="loading">
          Loading graph…
          ${o}
        </div>
      `:t&&t.nodes.length===0?`
        <div class="empty">
          This universe does not have any graph data yet.
          ${o}
        </div>
      `:t?`
        <div class="graph-wrapper">
          <div class="graph-header">
            ${this.renderMeta(t,n)}
            ${o}
          </div>
          <div class="graph-canvas" role="application" aria-label="Universe graph visualization"></div>
          ${n?'<div class="graph-overlay">Refreshing graph…</div>':""}
        </div>
      `:`
      <div class="loading">
        Loading graph…
        ${o}
      </div>
    `}renderHTML(e){this.shadowRoot&&(this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
          min-height: 320px;
        }

        .graph-shell {
          background: #ffffff;
          border-radius: 16px;
          border: 1px solid rgba(162, 169, 177, 0.24);
          box-shadow: 0 16px 32px rgba(18, 23, 40, 0.08);
          padding: 20px;
          min-height: 320px;
          display: flex;
          flex-direction: column;
          gap: 16px;
        }

        .graph-wrapper {
          position: relative;
          flex: 1;
          border-radius: 12px;
          border: 1px solid rgba(162, 169, 177, 0.2);
          background: linear-gradient(180deg, rgba(248, 249, 253, 0.9), #ffffff);
          overflow: hidden;
          min-height: 280px;
          display: flex;
          flex-direction: column;
        }

        .graph-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 12px 16px;
          border-bottom: 1px solid rgba(162, 169, 177, 0.1);
        }

        .fullscreen-button {
          background: none;
          border: none;
          cursor: pointer;
          padding: 8px;
          border-radius: 6px;
          color: rgba(32, 33, 34, 0.68);
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .fullscreen-button:hover {
          background: rgba(51, 102, 204, 0.12);
          color: #1f409c;
        }

        .fullscreen-icon {
          width: 18px;
          height: 18px;
          fill: currentColor;
        }

        .graph-canvas {
          flex: 1;
          min-height: 260px;
        }

        .graph-meta {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 12px 16px;
          font-size: 14px;
          color: rgba(32, 33, 34, 0.68);
          flex-wrap: wrap;
          border-bottom: 1px solid rgba(162, 169, 177, 0.2);
          background: rgba(255, 255, 255, 0.85);
        }

        .status-pill {
          display: inline-flex;
          align-items: center;
          gap: 6px;
          padding: 6px 10px;
          border-radius: 999px;
          background: rgba(51, 102, 204, 0.12);
          color: #1f409c;
        }

        .loading,
        .error,
        .empty {
          padding: 28px;
          text-align: center;
          border-radius: 12px;
          border: 1px solid rgba(162, 169, 177, 0.2);
          background: rgba(255, 255, 255, 0.96);
          box-shadow: 0 12px 24px rgba(18, 23, 40, 0.08);
          font-size: 15px;
          position: relative;
        }

        .loading .fullscreen-button,
        .error .fullscreen-button,
        .empty .fullscreen-button {
          position: absolute;
          top: 12px;
          right: 12px;
        }

        .loading {
          color: #1f409c;
          background: rgba(51, 102, 204, 0.08);
        }

        .empty {
          color: #0b6952;
          background: rgba(20, 134, 109, 0.08);
        }

        .error {
          color: #861616;
          background: rgba(215, 51, 51, 0.12);
          display: grid;
          gap: 12px;
        }

        .error button {
          justify-self: center;
          border: none;
          background: #3366cc;
          color: #ffffff;
          padding: 8px 18px;
          border-radius: 999px;
          font: inherit;
          cursor: pointer;
        }

        .graph-overlay {
          position: absolute;
          inset: 0;
          background: rgba(255, 255, 255, 0.85);
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: 500;
          color: #1f409c;
          pointer-events: none;
        }

        /* Fullscreen styles */
        :host(.fullscreen) {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          z-index: 9999;
          background: #ffffff;
          border-radius: 0;
          box-shadow: none;
          border: none;
          padding: 0;
          min-height: 100vh;
        }

        :host(.fullscreen) .graph-shell {
          border-radius: 0;
          border: none;
          box-shadow: none;
          padding: 0;
          min-height: 100vh;
        }

        :host(.fullscreen) .graph-wrapper {
          border-radius: 0;
          border: none;
          min-height: 100vh;
        }

        :host(.fullscreen) .graph-canvas {
          min-height: calc(100vh - 60px);
        }
      </style>
      <div class="graph-shell">
        ${e}
      </div>
    `)}setupRetryButton(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector('button[data-action="retry"]');e&&(e.onclick=()=>this.retryLibrary())}setupFullscreenButton(){if(!this.shadowRoot)return;const e=this.shadowRoot.querySelector('button[data-action="fullscreen"]');e&&(e.onclick=()=>this.toggleFullscreen())}async setupCanvas(e){var t;this.container=((t=this.shadowRoot)==null?void 0:t.querySelector(".graph-canvas"))??void 0,this.container&&(this.container.style.height="100%",this.container.style.minHeight="260px",this.container.style.width="100%",!(this.lastGraph===e&&this.viewer)&&(this.lastGraph=e,await new Promise(n=>requestAnimationFrame(n)),this.renderVisualization(e)))}renderMeta(e,t){return`
      <div class="graph-meta">
        <span class="status-pill">${e.nodes.length} nodes</span>
        <span class="status-pill">${e.relationships.length} relationships</span>
        ${t?'<span class="status-pill">Updating…</span>':""}
      </div>
    `}renderFullscreenIcon(){const e=this.isFullscreen?"M9 9V3H7v2.59L3.91 2.5 2.5 3.91 5.59 7H3v2h6V9zm8 0V7h-2.59l3.09-3.09L17.09 2.5 14 5.59V3h-2v6h6V9zM3 15h2v2.59l3.09-3.09 1.41 1.41L6.41 19H9v2H3v-6zm16 0v6h-6v-2h2.59l-3.09-3.09 1.41-1.41L17.59 17H15v-2h4z":"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z";return`
      <button type="button" class="fullscreen-button" data-action="fullscreen" title="${this.isFullscreen?"Exit fullscreen":"Enter fullscreen"}">
        <svg class="fullscreen-icon" viewBox="0 0 24 24">
          <path d="${e}"/>
        </svg>
      </button>
    `}async renderVisualization(e){if(!this.container)return;this.destroyViewer();const t=this.toNVLGraphPayload(e),n=this.instantiateVisualization(t);if(!n){this.nvlError="Unable to initialize the Neo4j visualization. Ensure that the NVL bundle is available.",queueMicrotask(()=>void this.render());return}this.viewer=n}instantiateVisualization(e){if(this.container)try{return new loe(this.container,e.nodes,e.relationships)}catch(t){console.error("Failed to create NVL instance",t);return}}toNVLGraphPayload(e){const t=e.nodes.map(i=>({id:i.id,labels:[...i.labels],properties:{...i.properties},caption:this.resolveCaption(i.caption,i.properties,i.id)})),n=e.relationships.map(i=>({id:i.id||`rel_${i.start}_${i.end}_${Date.now()}`,type:i.type,from:i.start,to:i.end,properties:{...i.properties}}));return{nodes:t,relationships:n}}resolveCaption(e,t,n){if(e&&e.trim().length>0)return e;const i=[t.title,t.name,t.id,t.label];for(const a of i)if(typeof a=="string"&&a.trim().length>0)return a.trim();return n}retryLibrary(){this.nvlError=void 0,this.destroyViewer(),this.ensureGraphRequest(),this.render()}toggleFullscreen(){this.isFullscreen?this.exitFullscreen():this.enterFullscreen()}enterFullscreen(){this.isFullscreen=!0,this.classList.add("fullscreen"),document.addEventListener("keydown",this.handleEscapeKey),document.body.style.overflow="hidden",this.render()}exitFullscreen(){this.isFullscreen=!1,this.classList.remove("fullscreen"),document.removeEventListener("keydown",this.handleEscapeKey),document.body.style.overflow="",this.render()}destroyViewer(){if(this.viewer&&typeof this.viewer.destroy=="function")try{this.viewer.destroy()}catch(e){console.warn("Failed to destroy NVL viewer cleanly",e)}this.viewer=void 0}}customElements.get("canon-universe-graph")||customElements.define("canon-universe-graph",voe);var poe=Object.defineProperty,goe=(r,e,t)=>e in r?poe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,_b=(r,e,t)=>goe(r,typeof e!="symbol"?e+"":e,t);class yoe extends HTMLElement{constructor(){super(...arguments),_b(this,"unsubscribe"),_b(this,"state",null),_b(this,"activeTab","overview"),_b(this,"currentUniverseId")}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}render(){if(!this.shadowRoot||!this.state)return;const e=this.state.route;if(e.view!=="universe"){this.shadowRoot.innerHTML="",this.currentUniverseId=void 0,this.activeTab="overview";return}const t=e.universeId;this.currentUniverseId!==t&&(this.currentUniverseId=t,this.activeTab="overview");const n=this.state.universeDetails[t],i=this.state.universeCategories[t]??[],a=this.state.loading.universe||this.state.loading.category,o=this.state.errors.universe??this.state.errors.category,s=this.activeTab==="graph";s&&gr.ensureUniverseGraph(t),this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        .hero {
          background: #ffffff;
          border-radius: 18px;
          padding: 32px;
          border: 1px solid rgba(162, 169, 177, 0.28);
          box-shadow: 0 18px 40px rgba(18, 23, 40, 0.1);
          margin-bottom: 28px;
        }

        .hero h1 {
          margin: 0 0 12px 0;
          font-size: 32px;
        }

        .hero p {
          margin: 0;
          color: rgba(32, 33, 34, 0.72);
          line-height: 1.7;
          max-width: 720px;
        }

        .status {
          margin-top: 16px;
          display: flex;
          flex-wrap: wrap;
          gap: 12px;
          font-size: 14px;
          color: rgba(32, 33, 34, 0.6);
        }

        .status span {
          background: rgba(51, 102, 204, 0.1);
          color: #1f409c;
          padding: 6px 10px;
          border-radius: 999px;
        }

        .tabs {
          display: flex;
          gap: 12px;
          margin-bottom: 24px;
        }

        .tabs button {
          background: rgba(51, 102, 204, 0.08);
          border: none;
          border-radius: 999px;
          padding: 10px 18px;
          font: inherit;
          color: rgba(32, 33, 34, 0.72);
          cursor: pointer;
          transition: background 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
        }

        .tabs button[data-active="true"] {
          background: #3366cc;
          color: #ffffff;
          box-shadow: 0 12px 24px rgba(51, 102, 204, 0.28);
        }

        .tab-content {
          min-height: 320px;
        }

        .categories {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
          gap: 20px;
        }

        .category-card {
          background: #ffffff;
          border-radius: 14px;
          border: 1px solid rgba(162, 169, 177, 0.24);
          padding: 24px;
          display: flex;
          flex-direction: column;
          gap: 12px;
          box-shadow: 0 12px 30px rgba(18, 23, 40, 0.08);
        }

        .category-card h3 {
          margin: 0;
          font-size: 18px;
        }

        .category-card p {
          margin: 0;
          color: rgba(32, 33, 34, 0.72);
          line-height: 1.5;
        }

        .category-card footer {
          margin-top: auto;
        }

        .empty,
        .loading,
        .error {
          padding: 28px;
          border-radius: 14px;
          text-align: center;
          background: #ffffff;
          border: 1px solid rgba(162, 169, 177, 0.24);
          box-shadow: 0 12px 30px rgba(18, 23, 40, 0.08);
        }

        .loading {
          color: #1f409c;
          background: rgba(51, 102, 204, 0.08);
        }

        .error {
          background: rgba(215, 51, 51, 0.12);
          color: #861616;
        }

        .empty {
          background: rgba(20, 134, 109, 0.1);
          color: #0b6952;
        }
      </style>
      <section>
        ${this.renderHero(n)}
        <div class="tabs" role="tablist" aria-label="Universe views">
          <button
            type="button"
            role="tab"
            data-tab="overview"
            data-active="${this.activeTab==="overview"}"
            aria-selected="${this.activeTab==="overview"}"
          >
            Overview
          </button>
          <button
            type="button"
            role="tab"
            data-tab="graph"
            data-active="${s}"
            aria-selected="${s}"
          >
            Graph
          </button>
        </div>
        <div class="tab-content">
          ${s?`<canon-universe-graph universe-id="${t}"></canon-universe-graph>`:this.renderOverviewContent(t,i,a,o)}
        </div>
      </section>
    `,this.bindTabEvents(t),s||this.bindOverviewCategoryEvents(t)}renderOverviewContent(e,t,n,i){return n?'<div class="loading">Loading universe details…</div>':i?`<div class="error">${i}</div>`:t.length===0?'<div class="empty">This universe has no categories yet.</div>':`<div class="categories">${t.map(a=>this.renderCategoryCard(e,a)).join("")}</div>`}bindTabEvents(e){if(!this.shadowRoot)return;this.shadowRoot.querySelectorAll("button[data-tab]").forEach(n=>{const i=n.getAttribute("data-tab");i!=="overview"&&i!=="graph"||(n.dataset.active=this.activeTab===i?"true":"false",n.onclick=()=>this.switchTab(i,e))})}bindOverviewCategoryEvents(e){if(!this.shadowRoot)return;this.shadowRoot.querySelectorAll("ds-button[data-category]").forEach(n=>{const i=n.getAttribute("data-category");i&&(n.onclick=()=>{gr.navigate({view:"category",universeId:e,categoryName:i})})})}switchTab(e,t){if(this.activeTab===e){e==="graph"&&gr.ensureUniverseGraph(t);return}this.activeTab=e,e==="graph"&&gr.ensureUniverseGraph(t),this.render()}renderHero(e){var t;return e?`
      <div class="hero">
        <h1>${e.name}</h1>
        <p>${e.description||"This universe is ready for new lore and adventures."}</p>
        <div class="status">
          <span>${((t=e.categories)==null?void 0:t.length)??0} categories</span>
          <span>ID: ${e.id}</span>
        </div>
      </div>
    `:`
        <div class="hero">
          <h1>Universe</h1>
          <p>The selected universe is loading.</p>
        </div>
      `}renderCategoryCard(e,t){var i;const n=((i=t.pages)==null?void 0:i.length)??0;return`
      <article class="category-card">
        <h3>${t.category}</h3>
        <p>${n} ${n===1?"entry":"entries"} tracked for this category.</p>
        <footer>
          <ds-button variant="secondary" data-category="${t.category}" data-universe="${e}">
            Browse ${t.category}
          </ds-button>
        </footer>
      </article>
    `}}customElements.get("canon-universe-detail")||customElements.define("canon-universe-detail",yoe);var moe=Object.defineProperty,boe=(r,e,t)=>e in r?moe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,TC=(r,e,t)=>boe(r,typeof e!="symbol"?e+"":e,t);class _oe extends HTMLElement{constructor(){super(...arguments),TC(this,"unsubscribe"),TC(this,"state",null),TC(this,"creatingContent",new Set)}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}render(){if(!this.shadowRoot||!this.state)return;const e=this.state.route;if(e.view!=="category"){this.shadowRoot.innerHTML="";return}const t=e.universeId,n=e.categoryName,i=`${t}::${n.toLowerCase()}`,a=this.state.categoryPages[i]??[],o=this.state.loading.category,s=this.state.errors.category;this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        header {
          margin-bottom: 24px;
        }

        h1 {
          margin: 0;
          font-size: 28px;
        }

        .meta {
          margin: 8px 0 0 0;
          color: rgba(32, 33, 34, 0.65);
        }

        .pages {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
          gap: 18px;
        }

        .page-card {
          background: #ffffff;
          border-radius: 14px;
          padding: 20px;
          border: 1px solid rgba(162, 169, 177, 0.24);
          box-shadow: 0 12px 26px rgba(18, 23, 40, 0.08);
          display: flex;
          flex-direction: column;
          gap: 12px;
        }

        .page-card h2 {
          margin: 0;
          font-size: 18px;
        }

        .page-card p {
          margin: 0;
          color: rgba(32, 33, 34, 0.72);
        }

        .page-card footer {
          margin-top: auto;
        }

        .loading,
        .error,
        .empty {
          margin-top: 20px;
          padding: 28px;
          border-radius: 14px;
          text-align: center;
        }

        .loading {
          background: rgba(51, 102, 204, 0.08);
        }

        .error {
          background: rgba(215, 51, 51, 0.12);
          color: #861616;
        }

        .empty {
          background: rgba(20, 134, 109, 0.1);
          color: #0b6952;
        }

        .header-actions {
          display: flex;
          gap: 12px;
          align-items: center;
          margin-top: 16px;
        }

        .create-buttons {
          display: flex;
          gap: 8px;
          flex-wrap: wrap;
        }

        .create-buttons ds-button {
          font-size: 14px;
          padding: 8px 16px;
        }

        .create-buttons ds-button:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
      </style>
      <section>
        <header>
          <h1>${n}</h1>
          <p class="meta">Entries connected to ${n.toLowerCase()} in this universe.</p>
          <div class="header-actions">
            <ds-button variant="secondary" id="back-btn">Back to universe</ds-button>
            ${this.renderCreateButtons(n)}
          </div>
        </header>
        ${o?'<div class="loading">Loading category pages…</div>':s?`<div class="error">${s}</div>`:a.length===0?'<div class="empty">No pages have been generated for this category yet.</div>':`<div class="pages">${a.map(f=>this.renderPageCard(f,t,n)).join("")}</div>`}
      </section>
    `;const u=this.shadowRoot.querySelector("#back-btn");u&&(u.onclick=()=>{gr.navigate({view:"universe",universeId:t})}),this.shadowRoot.querySelectorAll("ds-button[data-page]").forEach(f=>{const d=f.getAttribute("data-page");d&&(f.onclick=()=>{gr.navigate({view:"page",pageId:d,universeId:t,categoryName:n})})}),this.shadowRoot.querySelectorAll("ds-button[data-create-type]").forEach(f=>{const d=f.getAttribute("data-create-type");d&&(f.onclick=()=>{this.handleCreateContent(t,d)})})}renderCreateButtons(e){return`
      <div class="create-buttons">
        ${[{type:"world",label:"Create World",icon:"🌍"},{type:"character",label:"Create Character",icon:"👤"},{type:"technology",label:"Create Technology",icon:"⚙️"},{type:"society",label:"Create Society",icon:"🏛️"},{type:"flora",label:"Create Flora",icon:"🌿"},{type:"fauna",label:"Create Fauna",icon:"🐾"},{type:"event",label:"Create Event",icon:"📅"}].map(({type:n,label:i,icon:a})=>`
          <ds-button 
            variant="primary" 
            data-create-type="${n}"
            ${this.creatingContent.has(n)?"disabled":""}
          >
            ${a} ${i}
          </ds-button>
        `).join("")}
      </div>
    `}async handleCreateContent(e,t){var n;if(!this.creatingContent.has(t)){this.creatingContent.add(t),this.render();try{const i=await n3(e,t);console.log(`Content creation started for ${t} in universe ${e}, job ID: ${i}`),alert(`Creating ${t}... Job ID: ${i}`);const a=(n=this.state)==null?void 0:n.route;a&&a.view==="category"&&gr.navigate(a)}catch(i){console.error(`Failed to create ${t}:`,i),alert(`Failed to create ${t}: ${i instanceof Error?i.message:"Unknown error"}`)}finally{this.creatingContent.delete(t),this.render()}}}renderPageCard(e,t,n){return`
      <article class="page-card">
        <h2>${e.title??e.name??"Untitled page"}</h2>
        <p>${e.type?e.type:"Page content"} — ${e.id}</p>
        <footer>
          <ds-button variant="secondary" data-page="${e.id}" data-universe="${t}" data-category="${n}">
            View page
          </ds-button>
        </footer>
      </article>
    `}}customElements.get("canon-category-panel")||customElements.define("canon-category-panel",_oe);var woe=Object.defineProperty,xoe=(r,e,t)=>e in r?woe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,AC=(r,e,t)=>xoe(r,typeof e!="symbol"?e+"":e,t);class Eoe extends HTMLElement{constructor(){super(...arguments),AC(this,"unsubscribe"),AC(this,"state",null),AC(this,"handleLinkClick",e=>{var u;const t=e.target;if(!t)return;const n=t.closest("a");if(!n)return;const i=n.getAttribute("href");if(!i||i.startsWith("#"))return;const a=new URL(i,window.location.origin);if(!a.pathname.startsWith("/page/"))return;e.preventDefault();const o=a.pathname.split("/")[2],s=(u=this.state)==null?void 0:u.route;gr.navigate({view:"page",pageId:o,universeId:(s==null?void 0:s.view)==="page"||(s==null?void 0:s.view)==="category"?s.universeId:void 0,categoryName:(s==null?void 0:s.view)==="page"||(s==null?void 0:s.view)==="category"?s.categoryName:void 0})})}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot.addEventListener("click",this.handleLinkClick),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){var e;this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0),(e=this.shadowRoot)==null||e.removeEventListener("click",this.handleLinkClick)}render(){if(!this.shadowRoot||!this.state)return;const e=this.state.route;if(e.view!=="page"){this.shadowRoot.innerHTML="";return}const t=e.pageId,n=this.state.pages[t],i=this.state.loading.page,a=this.state.errors.page;this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        .header {
          margin-bottom: 24px;
        }

        h1 {
          margin: 0;
          font-size: 30px;
        }

        .meta {
          margin-top: 8px;
          display: flex;
          flex-wrap: wrap;
          gap: 12px;
          font-size: 14px;
          color: rgba(32, 33, 34, 0.6);
        }

        .content {
          background: #ffffff;
          border-radius: 18px;
          border: 1px solid rgba(162, 169, 177, 0.24);
          padding: 28px;
          box-shadow: 0 18px 42px rgba(18, 23, 40, 0.08);
          line-height: 1.7;
        }

        .content h1,
        .content h2,
        .content h3,
        .content h4,
        .content h5,
        .content h6 {
          font-family: inherit;
          color: inherit;
        }

        .loading,
        .error,
        .empty {
          padding: 28px;
          border-radius: 14px;
          text-align: center;
          margin-top: 20px;
        }

        .loading {
          background: rgba(51, 102, 204, 0.08);
        }

        .error {
          background: rgba(215, 51, 51, 0.12);
          color: #861616;
        }

        .empty {
          background: rgba(20, 134, 109, 0.1);
          color: #0b6952;
        }
      </style>
      <section>
        ${this.renderHeader(t,n)}
        ${i?'<div class="loading">Loading page content…</div>':a?`<div class="error">${a}</div>`:n!=null&&n.html?`<article class="content">${n.html}</article>`:'<div class="empty">No content is available for this page.</div>'}
      </section>
    `}renderHeader(e,t){if(!(t!=null&&t.metadata))return`
        <div class="header">
          <h1>Page ${e}</h1>
        </div>
      `;const n=t.metadata.labels??[];return`
      <div class="header">
        <h1>${t.metadata.title}</h1>
        <div class="meta">
          <span>Page ID: ${t.metadata.id}</span>
          ${n.map(i=>`<span>${i}</span>`).join("")}
        </div>
      </div>
    `}}customElements.get("canon-page-viewer")||customElements.define("canon-page-viewer",Eoe);var Ooe=Object.defineProperty,Soe=(r,e,t)=>e in r?Ooe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,PC=(r,e,t)=>Soe(r,typeof e!="symbol"?e+"":e,t);class Coe extends HTMLElement{constructor(){super(...arguments),PC(this,"unsubscribe"),PC(this,"state",null),PC(this,"handleRefresh",()=>{gr.refreshQueue()})}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}render(){if(!this.shadowRoot||!this.state)return;const e=this.state.queue,t=this.state.loading.queue,n=this.state.errors.queue;this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        header {
          display: flex;
          flex-wrap: wrap;
          align-items: center;
          justify-content: space-between;
          gap: 16px;
          margin-bottom: 24px;
        }

        h1 {
          margin: 0;
          font-size: 28px;
        }

        .meta {
          font-size: 14px;
          color: rgba(32, 33, 34, 0.65);
        }

        .grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
          gap: 16px;
        }

        .card {
          background: #ffffff;
          border-radius: 14px;
          padding: 24px;
          border: 1px solid rgba(162, 169, 177, 0.24);
          box-shadow: 0 12px 32px rgba(18, 23, 40, 0.1);
        }

        .card h2 {
          margin: 0;
          font-size: 36px;
        }

        .card p {
          margin: 8px 0 0 0;
          color: rgba(32, 33, 34, 0.65);
        }

        .status {
          margin-top: 24px;
          padding: 20px;
          border-radius: 12px;
          background: rgba(51, 102, 204, 0.08);
        }

        .loading,
        .error,
        .empty {
          padding: 28px;
          border-radius: 12px;
          text-align: center;
        }

        .error {
          background: rgba(215, 51, 51, 0.12);
          color: #861616;
        }

        .loading {
          background: rgba(51, 102, 204, 0.08);
        }

        .empty {
          background: rgba(20, 134, 109, 0.1);
          color: #0b6952;
        }
      </style>
      <section>
        <header>
          <div>
            <h1>Queue dashboard</h1>
            <p class="meta">Monitor build jobs submitted to the universe generation pipeline.</p>
          </div>
          <ds-button variant="primary" id="refresh-btn" ${t?"disabled":""}>Refresh now</ds-button>
        </header>
        ${t&&!e?'<div class="loading">Loading queue statistics…</div>':n?`<div class="error">${n}</div>`:e?`
              <div>
                ${this.renderStats(e)}
                <div class="status">Last updated ${new Date(e.fetchedAt).toLocaleTimeString()}</div>
              </div>
            `:'<div class="empty">Queue statistics will appear once jobs are running.</div>'}
      </section>
    `;const i=this.shadowRoot.querySelector("#refresh-btn");i&&(i.onclick=this.handleRefresh)}renderStats(e){return`
      <div class="grid">
        ${this.renderStatCard(e.waiting,"Waiting")}
        ${this.renderStatCard(e.active,"Active")}
        ${this.renderStatCard(e.completed,"Completed")}
        ${this.renderStatCard(e.failed,"Failed",!0)}
      </div>
    `}renderStatCard(e,t,n=!1){return`
      <article class="card" style="${n?"border-color: rgba(215, 51, 51, 0.35);":""}">
        <h2>${e}</h2>
        <p>${t}</p>
      </article>
    `}}customElements.get("canon-queue-dashboard")||customElements.define("canon-queue-dashboard",Coe);class Toe extends HTMLElement{connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.render()}render(){this.shadowRoot&&(this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        section {
          display: grid;
          gap: 24px;
        }

        article {
          background: #ffffff;
          border-radius: 16px;
          border: 1px solid rgba(162, 169, 177, 0.26);
          padding: 28px;
          box-shadow: 0 16px 38px rgba(18, 23, 40, 0.08);
        }

        h1 {
          margin: 0 0 12px 0;
          font-size: 30px;
        }

        h2 {
          margin: 0 0 12px 0;
          font-size: 20px;
        }

        p {
          margin: 0 0 12px 0;
          line-height: 1.7;
          color: rgba(32, 33, 34, 0.72);
        }

        ul {
          margin: 0;
          padding-left: 20px;
          color: rgba(32, 33, 34, 0.72);
        }

        li + li {
          margin-top: 8px;
        }
      </style>
      <section>
        <article>
          <h1>Help & architecture notes</h1>
          <p>
            Canon now boots as a Standards UI + DataStar-style application shell. A shared store
            coordinates routing, universe data, and queue polling so that each web component can
            stay declarative.
          </p>
        </article>
        <article>
          <h2>Component responsibilities</h2>
          <ul>
            <li><strong>&lt;canon-app&gt;</strong> — orchestrates layout, navigation, and modal portals.</li>
            <li><strong>&lt;canon-universe-list&gt;</strong> — renders the universe catalog.</li>
            <li><strong>&lt;canon-universe-detail&gt;</strong> — shows hero content plus categories.</li>
            <li><strong>&lt;canon-category-panel&gt;</strong> — lists pages inside a category.</li>
            <li><strong>&lt;canon-page-viewer&gt;</strong> — presents markdown fragments and handles internal anchors.</li>
            <li><strong>&lt;canon-queue-dashboard&gt;</strong> — polls the job queue with Standards UI cards.</li>
            <li><strong>&lt;canon-universe-modal&gt;</strong> — wraps the creation flow in a reusable dialog.</li>
          </ul>
        </article>
        <article>
          <h2>Design token overrides</h2>
          <p>
            Tokens live in <code>src/design-system/tokens.ts</code>. They remap Standards UI variants to
            Canon’s encyclopedia palette so that buttons use <code>variant="primary"</code> and backgrounds
            inherit the shared theme without custom classes.
          </p>
        </article>
        <article>
          <h2>Routing & data flow</h2>
          <p>
            Routes map directly to store actions. Each navigation call updates browser history,
            requests data from <code>/api</code> endpoints, and re-renders subscribed components.
          </p>
          <p>
            The queue dashboard starts polling automatically when its route is active and stops when
            users leave the view.
          </p>
        </article>
      </section>
    `)}}customElements.get("canon-help")||customElements.define("canon-help",Toe);var Aoe=Object.defineProperty,Poe=(r,e,t)=>e in r?Aoe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,wb=(r,e,t)=>Poe(r,typeof e!="symbol"?e+"":e,t);class Roe extends HTMLElement{constructor(){super(...arguments),wb(this,"unsubscribe"),wb(this,"state",null),wb(this,"nameValue",""),wb(this,"wasOpen",!1)}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.syncNameState(),this.render()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}syncNameState(){var t;const e=((t=this.state)==null?void 0:t.modal.open)??!1;!e&&this.wasOpen&&(this.nameValue=""),this.wasOpen=e}render(){if(!this.shadowRoot||!this.state)return;const{modal:e}=this.state,t=e.open;if(this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
        }

        .overlay {
          position: fixed;
          inset: 0;
          background: rgba(15, 23, 42, 0.45);
          backdrop-filter: blur(6px);
          display: ${t?"flex":"none"};
          align-items: center;
          justify-content: center;
          z-index: 9999;
          padding: 24px;
        }

        .dialog {
          background: #ffffff;
          border-radius: 18px;
          padding: 32px;
          width: min(480px, 100%);
          box-shadow: 0 24px 60px rgba(15, 23, 42, 0.18);
          display: flex;
          flex-direction: column;
          gap: 20px;
        }

        h2 {
          margin: 0;
          font-size: 24px;
        }

        form {
          display: grid;
          gap: 16px;
        }

        .actions {
          display: flex;
          justify-content: flex-end;
          gap: 12px;
        }

        .error {
          color: #861616;
          background: rgba(215, 51, 51, 0.12);
          border-radius: 10px;
          padding: 12px;
          font-size: 14px;
        }
      </style>
      <div class="overlay" part="overlay">
        <div class="dialog" role="dialog" aria-modal="true">
          <h2>Create a new universe</h2>
          <p>Give your universe a name and Canon will scaffold categories and placeholder pages.</p>
          ${e.error?`<div class="error">${e.error}</div>`:""}
          <form id="universe-form">
            <ds-text-input
              id="universe-name"
              name="universe-name"
              placeholder="The Aether Archives"
              value="${this.nameValue.replace(/"/g,"&quot;")}"
              ${e.submitting?"disabled":""}
              required
            ></ds-text-input>
            <div class="actions">
              <ds-button type="button" id="cancel-btn" variant="secondary" ${e.submitting?"disabled":""}>
                Cancel
              </ds-button>
              <ds-button type="submit" variant="primary" ${e.submitting?"disabled":""}>
                ${e.submitting?"Creating…":"Create universe"}
              </ds-button>
            </div>
          </form>
        </div>
      </div>
    `,!t)return;const n=this.shadowRoot.querySelector(".overlay");n&&(n.onclick=s=>{s.target===n&&!e.submitting&&gr.closeUniverseModal()});const i=this.shadowRoot.querySelector("#cancel-btn");i&&(i.onclick=()=>{e.submitting||gr.closeUniverseModal()});const a=this.shadowRoot.querySelector("#universe-form");a&&(a.onsubmit=s=>{var c;s.preventDefault();const u=(c=this.shadowRoot)==null?void 0:c.querySelector("#universe-name"),l=(u==null?void 0:u.value)??this.nameValue;gr.submitUniverse(l??"")});const o=this.shadowRoot.querySelector("#universe-name");o&&o.addEventListener("input",s=>{const u=s.target;this.nameValue=(u==null?void 0:u.value)??""})}}customElements.get("canon-universe-modal")||customElements.define("canon-universe-modal",Roe);var koe=Object.defineProperty,Ioe=(r,e,t)=>e in r?koe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,wp=(r,e,t)=>Ioe(r,typeof e!="symbol"?e+"":e,t);class Doe extends HTMLElement{constructor(){super(...arguments),wp(this,"unsubscribe"),wp(this,"state",null),wp(this,"contentEl"),wp(this,"navButtons",new Map),wp(this,"activeContentTag")}connectedCallback(){this.shadowRoot||this.attachShadow({mode:"open"}),this.renderBase(),this.unsubscribe=gr.subscribe(e=>{this.state=e,this.updateNavigation(),this.renderContent()})}disconnectedCallback(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=void 0)}renderBase(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML=`
      <style>
        :host {
          display: block;
          min-height: 100vh;
          background: linear-gradient(180deg, #f7f9fc 0%, #eef1f7 100%);
          color: #202122;
          font-family: 'Helvetica Neue', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        .app-shell {
          min-height: 100vh;
          display: flex;
          flex-direction: column;
        }

        .app-header {
          position: sticky;
          top: 0;
          z-index: 100;
          backdrop-filter: blur(12px);
          background: rgba(255, 255, 255, 0.9);
          border-bottom: 1px solid rgba(162, 169, 177, 0.3);
          padding: 16px 32px;
          display: flex;
          align-items: center;
          gap: 24px;
        }

        .brand {
          font-size: 24px;
          font-weight: 600;
          letter-spacing: 0.05em;
        }

        nav {
          display: flex;
          align-items: center;
          gap: 12px;
          flex: 1;
        }

        nav button {
          background: transparent;
          border: none;
          padding: 10px 14px;
          border-radius: 999px;
          font: inherit;
          color: rgba(32, 33, 34, 0.7);
          cursor: pointer;
          transition: background 0.2s ease, color 0.2s ease;
        }

        nav button:hover {
          background: rgba(51, 102, 204, 0.12);
          color: #1f409c;
        }

        nav button[data-active="true"] {
          background: #3366cc;
          color: #ffffff;
        }

        .app-main {
          flex: 1;
          width: min(1200px, 100%);
          margin: 0 auto;
          display: grid;
          grid-template-columns: minmax(220px, 280px) minmax(0, 1fr);
          gap: 32px;
          padding: 32px 24px 64px;
          box-sizing: border-box;
        }

        .sidebar {
          min-width: 0;
        }

        .content {
          min-width: 0;
        }

        @media (max-width: 960px) {
          .app-main {
            grid-template-columns: 1fr;
          }

          .sidebar {
            order: 2;
          }

          .content {
            order: 1;
          }
        }
      </style>
      <div class="app-shell">
        <header class="app-header">
          <div class="brand">Canon</div>
          <nav>
            <button type="button" data-view="home">Home</button>
            <button type="button" data-view="universes">Universes</button>
            <button type="button" data-view="queue">Queue</button>
            <button type="button" data-view="help">Help</button>
          </nav>
          <ds-button variant="primary" id="header-create">New universe</ds-button>
        </header>
        <main class="app-main">
          <aside class="sidebar">
            <canon-universe-sidebar></canon-universe-sidebar>
          </aside>
          <section class="content" id="app-content"></section>
        </main>
        <canon-fullscreen-modal id="fullscreen-modal"></canon-fullscreen-modal>
      </div>
      <canon-universe-modal></canon-universe-modal>
    `,this.contentEl=this.shadowRoot.querySelector("#app-content")??void 0,this.shadowRoot.querySelectorAll("nav button[data-view]").forEach(n=>{const i=n.getAttribute("data-view");i&&(this.navButtons.set(i,n),n.onclick=()=>this.handleNavigation(i))});const t=this.shadowRoot.querySelector("#header-create");t&&(t.onclick=()=>gr.openUniverseModal())}handleNavigation(e){switch(e){case"home":gr.navigate({view:"home"});break;case"universes":gr.navigate({view:"universes"});break;case"queue":gr.navigate({view:"queue"});break;case"help":gr.navigate({view:"help"});break}}updateNavigation(){var t;const e=(t=this.state)==null?void 0:t.route;this.navButtons.forEach((n,i)=>{n.dataset.active=this.isViewActive(i,e)?"true":"false"})}renderContent(){if(!this.contentEl||!this.state)return;const e=this.state.route,t=this.resolveContentTag(e);t&&(this.activeContentTag!==t&&(this.contentEl.innerHTML=`<${t}></${t}>`,this.activeContentTag=t),this.updateDocumentTitle(e))}getFullscreenModal(){var e;return((e=this.shadowRoot)==null?void 0:e.getElementById("fullscreen-modal"))||null}resolveContentTag(e){switch(e.view){case"home":return"canon-home";case"universes":return"canon-universe-list";case"universe":return"canon-universe-detail";case"category":return"canon-category-panel";case"page":return"canon-page-viewer";case"queue":return"canon-queue-dashboard";case"help":return"canon-help";default:return"canon-home"}}updateDocumentTitle(e){const t="Canon – Universe Builder";let n="";switch(e.view){case"home":n="Home";break;case"universes":n="Universe catalog";break;case"universe":n=`Universe ${e.universeId}`;break;case"category":n=`${e.categoryName} · ${e.universeId}`;break;case"page":n=`Page ${e.pageId}`;break;case"queue":n="Queue dashboard";break;case"help":n="Help & docs";break;default:n="";break}document.title=n?`${n} – ${t}`:t}isViewActive(e,t){if(!t)return!1;switch(e){case"home":return t.view==="home";case"universes":return t.view==="universes";case"queue":return t.view==="queue";case"help":return t.view==="help";default:return!1}}}customElements.get("canon-app")||customElements.define("canon-app",Doe);function Moe(){var t,n,i,a,o,s,u,l,c,f;const r=sq??{};return{...r,...xs,color:{...r.color??{},...xs.color??{}},spacing:{...r.spacing??{},...xs.spacing??{}},typography:{...r.typography??{},...xs.typography??{}},layout:{...r.layout??{},...xs.layout??{}},components:{...r.components??{},...xs.components??{},button:{...((t=r.components)==null?void 0:t.button)??{},...((n=xs.components)==null?void 0:n.button)??{},variants:{...((a=(i=r.components)==null?void 0:i.button)==null?void 0:a.variants)??{},...((s=(o=xs.components)==null?void 0:o.button)==null?void 0:s.variants)??{}}},card:{...((u=r.components)==null?void 0:u.card)??{},...((l=xs.components)==null?void 0:l.card)??{}},page:{...((c=r.components)==null?void 0:c.page)??{},...((f=xs.components)==null?void 0:f.page)??{}}}}}dq(Moe());function DA(r,e){gr.setRouteFromRouter(r);const t=Rq(r);if(e!=null&&e.skipHistory){window.history.replaceState(r,"",t);return}e!=null&&e.replace?window.history.replaceState(r,"",t):window.history.pushState(r,"",t)}gr.bindNavigator((r,e)=>DA(r,e));const Loe=window.history.state??i3();DA(Loe,{replace:!0});window.addEventListener("popstate",r=>{const e=r.state??i3();DA(e,{skipHistory:!0})});gr.initialize();export{Lh as C,WT as P,mt as _,bt as a,Jn as b,Ke as c,LF as d,Tl as e,joe as f,Foe as g,Go as h,Ig as i,rF as j,KT as k,HS as l,xre as m,qp as n,Ou as o,fre as p,jee as q,Zm as r,qo as s,_ee as t,Boe as u,Ere as v,U0 as w};
